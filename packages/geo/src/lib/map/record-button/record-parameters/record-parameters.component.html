<div *ngIf="stateAffichage === display.Choice" style="width: fit-content;">
  <div mat-dialog-content style="width: fit-content;">
    <button mat-button (click)="stateAffichage = display.TrackHistory">{{ 'igo.geo.record-prompts.history' | translate }}</button>
    <button mat-button (click)="stateAffichage = display.RecordTrack">{{ 'igo.geo.record-prompts.record' | translate }}</button>
  </div>
</div>

<div *ngIf="stateAffichage === display.RecordTrack">
  <h1 mat-dialog-title>{{ 'igo.geo.record-prompts.intervalMode' | translate }}</h1>

  <div mat-dialog-content>
    <mat-radio-group class="radio-group element"
    [(ngModel)]="intervalMode">
      <mat-radio-button value="time">{{ 'igo.geo.record-prompts.timeInterval' | translate }}</mat-radio-button>
      <mat-radio-button value="distance">{{ 'igo.geo.record-prompts.distInterval' | translate }}</mat-radio-button>
    </mat-radio-group>

    <div class="element">
      <label class="ang-label">
        <span *ngIf="!amountInput" style="font-size: small; color: red;"><sup>*</sup></span>
        {{ 'igo.geo.record-prompts.numInputLabel' | translate }}
      </label>
      <input matInput min="1" type="number" [(ngModel)]="amountInput" style="width: 2.5em; text-align: right; background-color: rgba(0, 0, 0, 0.04); border-bottom: 1px solid black">
      <label class="ang-label">{{ intervalMode === 'time' ? ('igo.geo.record-prompts.second' | translate) : ('igo.geo.record-prompts.meter' | translate) }}</label>
      <p *ngIf="amountInput <= 0" style="font-size: small; color: red;">* {{ 'igo.geo.record-prompts.invalidNumber' | translate }}</p>
    </div>

    <mat-form-field appearance="fill" class="element">
      <mat-label class="ang-label">
        <span *ngIf="!fileName" style="font-size: small; color: red;"><sup>*</sup></span>
        {{ 'igo.geo.record-prompts.routeInputLabel' | translate }}</mat-label>
      <input  matInput [(ngModel)]="fileName">
    </mat-form-field>

  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="onNoClick()">{{ 'igo.geo.record-prompts.cancel' | translate }}</button>
    <button mat-button [disabled]="!formReady()" [mat-dialog-close]="getInputs()" cdkFocusInitial>{{ 'igo.geo.record-prompts.startRecord' | translate }}</button>
  </div>
</div>

<div *ngIf="stateAffichage === display.TrackHistory">
  <div mat-dialog-content style="align-items:center; padding: 0;">
    <h3 mat-dialog-title *ngIf="!trackFiles || trackFiles.length === 0" style="padding-right: 20px; padding-left: 20px; font-size: 15px;">{{ 'igo.geo.record-prompts.noTraceFound' | translate }}</h3>
    <table mat-table *ngIf="trackFiles" [dataSource]="trackFiles" class="mat-elevation-z8">

      <!-- File name Column -->
      <ng-container matColumnDef="name">
        <td mat-cell *matCellDef="let element"> {{element.name.substring(0, element.name.lastIndexOf("."))}} </td>
      </ng-container>

      <!-- Date Column -->
      <ng-container matColumnDef="date">
        <td mat-cell *matCellDef="let element"> {{ getDate(element.lastModified) }} </td>
      </ng-container>

      <!-- Controls Column -->
      <ng-container matColumnDef="buttons">
        <td mat-cell *matCellDef="let element" style="padding-top: 8px; padding-bottom: 8px; width: 30%;">
          <div style="display:inline-block; width: 100%;">
            <button mat-raised-button (click)="loadFile(element)" style="width: 100%; margin-bottom: 5px;">{{ 'igo.geo.record-prompts.loadGPX' | translate }}</button>
            <div style="font-size:smaller;">
              <button mat-raised-button (click)="downloadGPXFile(element)" style="width: 48%; float:left; display:inline; padding: 0; min-width: 0px; margin-right: 4%;">
                <mat-icon svgIcon="download"
                  style="vertical-align: middle; transform: scale(0.75);">
                </mat-icon>
              </button>
              <button mat-raised-button color="warn" (click)="deleteGPXFile(element)" style="width: 48%; float:left; display:inline; padding: 0; min-width: 0px;">
                <mat-icon svgIcon="delete"
                  style="vertical-align: middle; transform: scale(0.75);">
                </mat-icon>
              </button>
            </div>
          </div>
        </td>
      </ng-container>

      <tr mat-row *matRowDef="let row; columns: ['name', 'date', 'buttons'];"></tr>
    </table>
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="onNoClick()">{{ 'igo.geo.record-prompts.cancel' | translate }}</button>
  </div>
</div>
