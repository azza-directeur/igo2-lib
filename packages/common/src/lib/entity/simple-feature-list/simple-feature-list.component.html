<ng-container *ngIf="(entityIsSelected$ | async) === false && (entitiesAreSelected$ | async) === false; else entitiesSelected">
  <div class="entity" *ngFor="let entity of entities" #entity>
    <div class="attributes">
      <ng-container *ngFor="let attribute of attributeOrder">
        <ng-container *ngIf="attribute.header; else notHeader">
          <span [ngClass]="attribute.header" *ngIf="attribute.description"><strong>{{ attribute.description }}</strong>: </span>
          <span [ngClass]="attribute.header">{{ entity.properties[attribute.attributeName] }}</span>
          <br>
        </ng-container>
        <ng-template #notHeader>
          <span *ngIf="attribute.description && createAttribute(entity, attribute)"
            class="description"><strong>{{ attribute.description }}</strong>:
          </span>
          <span class="attribute" [innerHTML]="createAttribute(entity, attribute)"></span>
          <br *ngIf="createAttribute(entity, attribute)">
        </ng-template>
      </ng-container>
    </div>
    <div class="selectButton">
      <button mat-mini-fab
        class="mat-elevation-z0"
        color="primary"
        [matTooltip]="'igo.common.simpleFeatureList.selectEntity' | translate"
        tooltip-position="below"
        matTooltipShowDelay="500">
        <mat-icon
          svgIcon="magnify-plus-outline"
          (click)="selectEntity(entity)">
        </mat-icon>
      </button>
    </div>
  </div>
</ng-container>
<ng-template #entitiesSelected>
  <ng-container *ngIf="(selectedEntities$ | async) !== undefined; else entitySelected">
    <div class="entity" *ngFor="let entity of selectedEntities$.value" #entity>
      <div class="attributes">
        <ng-container *ngFor="let attribute of attributeOrder">
          <ng-container *ngIf="attribute.header; else notHeader">
            <span [ngClass]="attribute.header" *ngIf="attribute.description"><strong>{{ attribute.description }}</strong>: </span>
            <span [ngClass]="attribute.header">{{ entity.properties[attribute.attributeName] }}</span>
            <br>
          </ng-container>
          <ng-template #notHeader>
            <span *ngIf="attribute.description && createAttribute(entity, attribute)"
              class="description"><strong>{{ attribute.description }}</strong>:
            </span>
            <span class="attribute" [innerHTML]="createAttribute(entity, attribute)"></span>
            <br *ngIf="createAttribute(entity, attribute)">
          </ng-template>
        </ng-container>
      </div>
      <div class="selectButton">
        <button mat-mini-fab
          class="mat-elevation-z0"
          color="primary"
          [matTooltip]="'igo.common.simpleFeatureList.selectEntity' | translate"
          tooltip-position="below"
          matTooltipShowDelay="500">
          <mat-icon
            svgIcon="magnify-plus-outline"
            (click)="selectEntity(entity)">
          </mat-icon>
        </button>
      </div>
    </div>
  </ng-container>
</ng-template>
<ng-template #entitySelected>
  <div class="selectedEntity">
    <div class="attributes">
      <ng-container *ngFor="let attribute of attributeOrder">
        <ng-container *ngIf="attribute.header; else notHeader">
          <span [ngClass]="attribute.header" *ngIf="attribute.description"><strong> {{ attribute.description }}</strong>: </span>
          <span [ngClass]="attribute.header">{{ (selectedEntity$.value).properties[attribute.attributeName] }}</span>
          <br>
        </ng-container>
        <ng-template #notHeader>
          <span *ngIf="attribute.description && createAttribute(selectedEntity$.value, attribute)"
            class="description"><strong>{{ attribute.description }}</strong>:
          </span>
          <span class="attribute" [innerHTML]="createAttribute(selectedEntity$.value, attribute)"></span>
          <br *ngIf="createAttribute(selectedEntity$.value, attribute)">
        </ng-template>
      </ng-container>
    </div>
    <div class="unselectButton">
      <button mat-mini-fab
        class="mat-elevation-z0"
        color="warn"
        [matTooltip]="'igo.common.simpleFeatureList.unselectEntity' | translate"
        tooltip-position="below"
        matTooltipShowDelay="500">
        <mat-icon
          svgIcon="close"
          (click)="unselectEntity()">
        </mat-icon>
      </button>
    </div>
  </div>
</ng-template>
