{"version":3,"sources":["dist/core/locale sync ^\\.\\/.*\\.json$","demo/src/environments/environment.ts","dist/utils/fesm2015/igo2-utils.js","dist/core/fesm2015/igo2-core.js","dist/common/fesm2015/igo2-common.js","demo/src/app/core/home/home.component.ts","demo/src/app/core/home/home.module.ts","demo/src/app/core/activity/activity.component.ts","demo/src/app/core/activity/activity.module.ts","demo/src/app/core/config/config.component.ts","demo/src/app/core/config/config.module.ts","demo/src/app/core/language/language.component.ts","demo/src/app/core/language/language.module.ts","demo/src/app/core/media/media.component.ts","demo/src/app/core/media/media.module.ts","demo/src/app/core/message/message.component.ts","demo/src/app/core/message/message.module.ts","demo/src/app/core/request/request.component.ts","demo/src/app/core/request/request.module.ts","demo/src/app/core/home/home-routing.module.ts","demo/src/app/core/home/home.component.html","demo/src/app/core/activity/activity-routing.module.ts","demo/src/app/core/activity/activity.component.html","demo/src/app/core/config/config-routing.module.ts","demo/src/app/core/config/config.component.html","demo/src/app/core/language/language-routing.module.ts","demo/src/app/core/language/language.component.html","demo/src/app/core/media/media-routing.module.ts","demo/src/app/core/media/media.component.html","demo/src/app/core/message/message-routing.module.ts","demo/src/app/core/message/message.component.html","demo/src/app/core/request/request-routing.module.ts","demo/src/app/core/request/request.component.html","demo/src/app/common/action/action.component.html","demo/src/app/common/action/action-routing.module.ts","demo/src/app/common/action/action.component.ts","demo/src/app/common/dynamic-component/dynamic-component.component.ts","demo/src/app/common/action/action.module.ts","demo/src/app/common/dynamic-component/dynamic-component.module.ts","demo/src/app/common/entity-table/entity-table.component.ts","demo/src/app/common/entity-table/entity-table.module.ts","demo/src/app/common/dynamic-component/dynamic-component-routing.module.ts","demo/src/app/common/dynamic-component/dynamic-component.component.html","demo/src/app/common/entity-table/entity-table-routing.module.ts","demo/src/app/common/entity-table/entity-table.component.html","demo/src/app/common/entity-selector/entity-selector.component.html","demo/src/app/common/entity-selector/entity-selector-routing.module.ts","demo/src/app/common/entity-selector/entity-selector.component.ts","demo/src/app/common/entity-selector/entity-selector.module.ts","demo/src/app/common/form/form.component.html","demo/src/app/common/form/form-routing.module.ts","demo/src/app/common/form/form.component.ts","demo/src/app/common/form/form.module.ts","demo/src/app/common/table/table.component.ts","demo/src/app/common/table/table.module.ts","demo/src/app/common/table/table-routing.module.ts","demo/src/app/common/table/table.component.html","demo/src/app/common/tool/tool.component.html","demo/src/app/common/tool/tool-routing.module.ts","demo/src/app/common/tool/tool.component.ts","demo/src/app/common/widget/widget.component.ts","demo/src/app/common/tool/tool.module.ts","demo/src/app/common/widget/widget.module.ts","dist/auth/fesm2015/igo2-auth.js","demo/src/app/common/widget/widget-routing.module.ts","demo/src/app/common/widget/widget.component.html","demo/src/app/auth/auth-form/auth-form.component.ts","demo/src/app/auth/auth-form/auth-form.module.ts","demo/src/app/auth/auth-form/auth-form-routing.module.ts","demo/src/app/auth/auth-form/auth-form.component.html","dist/geo/fesm2015/igo2-geo.js","demo/src/app/geo/simple-map/simple-map.component.html","demo/src/app/geo/simple-map/simple-map-routing.module.ts","demo/src/app/geo/simple-map/simple-map.component.ts","demo/src/app/geo/simple-map/simple-map.module.ts","demo/src/app/geo/layer/layer.component.html","demo/src/app/geo/layer/layer-routing.module.ts","demo/src/app/geo/layer/layer.component.ts","demo/src/app/geo/layer/layer.module.ts","demo/src/app/geo/legend/legend.component.ts","demo/src/app/geo/legend/legend.module.ts","demo/src/app/geo/overlay/overlay.component.ts","demo/src/app/geo/overlay/overlay.module.ts","demo/src/app/geo/legend/legend-routing.module.ts","demo/src/app/geo/legend/legend.component.html","demo/src/app/geo/overlay/overlay-routing.module.ts","demo/src/app/geo/overlay/overlay.component.html","demo/src/app/geo/geometry/geometry.component.html","demo/src/app/geo/geometry/geometry-routing.module.ts","demo/src/app/geo/geometry/geometry.component.ts","demo/src/app/geo/geometry/geometry.module.ts","demo/src/app/geo/feature/feature.component.ts","demo/src/app/geo/feature/feature.module.ts","demo/src/app/geo/hover/hover.component.ts","demo/src/app/geo/hover/hover.module.ts","demo/src/app/geo/measure/measure.component.ts","demo/src/app/geo/measure/measure.module.ts","demo/src/app/geo/draw/draw.component.ts","demo/src/app/geo/draw/draw.module.ts","demo/src/app/geo/feature/feature-routing.module.ts","demo/src/app/geo/feature/feature.component.html","demo/src/app/geo/hover/hover-routing.module.ts","demo/src/app/geo/hover/hover.component.html","demo/src/app/geo/measure/measure-routing.module.ts","demo/src/app/geo/measure/measure.component.html","demo/src/app/geo/draw/draw-routing.module.ts","demo/src/app/geo/draw/draw.component.html","demo/src/app/geo/query/query.component.html","demo/src/app/geo/query/query-routing.module.ts","demo/src/app/geo/query/query.component.ts","demo/src/app/geo/query/query.module.ts","demo/src/app/geo/catalog/catalog.component.ts","demo/src/app/geo/catalog/catalog.module.ts","demo/src/app/geo/catalog/catalog-routing.module.ts","demo/src/app/geo/catalog/catalog.component.html","dist/context/fesm2015/igo2-context.js","dist/integration/fesm2015/igo2-integration.js","demo/src/app/geo/search/search.component.html","demo/src/app/geo/search/search-routing.module.ts","demo/src/app/geo/search/search.component.ts","demo/src/app/geo/search/search.module.ts","demo/src/app/geo/print/print.component.ts","demo/src/app/geo/print/print.module.ts","demo/src/app/geo/import-export/import-export.component.ts","demo/src/app/geo/import-export/import-export.module.ts","demo/src/app/geo/directions/directions.component.ts","demo/src/app/geo/directions/directions.module.ts","demo/src/app/geo/time-filter/time-filter.component.ts","demo/src/app/geo/time-filter/time-filter.module.ts","demo/src/app/geo/ogc-filter/ogc-filter.component.ts","demo/src/app/geo/ogc-filter/ogc-filter.module.ts","demo/src/app/geo/print/print-routing.module.ts","demo/src/app/geo/print/print.component.html","demo/src/app/geo/import-export/import-export-routing.module.ts","demo/src/app/geo/import-export/import-export.component.html","demo/src/app/geo/directions/directions-routing.module.ts","demo/src/app/geo/directions/directions.component.html","demo/src/app/geo/time-filter/time-filter-routing.module.ts","demo/src/app/geo/time-filter/time-filter.component.html","demo/src/app/geo/ogc-filter/ogc-filter-routing.module.ts","demo/src/app/geo/ogc-filter/ogc-filter.component.html","demo/src/app/geo/spatial-filter/spatial-filter.component.html","demo/src/app/geo/spatial-filter/spatial-filter-routing.module.ts","demo/src/app/geo/spatial-filter/spatial-filter.component.ts","demo/src/app/geo/spatial-filter/spatial-filter.module.ts","demo/src/app/geo/workspace/workspace.component.html","demo/src/app/geo/workspace/workspace-routing.module.ts","demo/src/app/geo/workspace/workspace.component.ts","demo/src/app/geo/workspace/workspace.module.ts","demo/src/app/context/context/context.component.html","demo/src/app/context/context/context-routing.module.ts","demo/src/app/context/context/context.component.ts","demo/src/app/context/context/context.module.ts","demo/src/app/app.module.ts","demo/src/app/app.component.ts","demo/src/app/app-routing.module.ts","demo/src/app/app.component.html","demo/src/main.ts","node_modules/moment/locale sync ^\\.\\/.*$","demo/src/$_lazy_route_resource lazy namespace object"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","environment","production","igo","projections","alias","def","extent","auth","intern","enabled","allowAnonymous","interactiveTour","tourInMobile","importExport","url","language","prefix","catalog","sources","title","queryFormat","html","queryHtmlTarget","count","regFilters","tooltipType","searchSources","nominatim","icherche","searchUrl","order","params","limit","coordinatesreverse","showInPointerSummary","icherchereverse","ilayer","Base64","s","i","charCodeAt","this","ALPHA","indexOf","charAt","b10","pads","imax","length","x","String","PADCHAR","getByte64","push","fromCharCode","join","getByte","userAgent","window","navigator","Clipboard","element","successful","textArea","createTextArea","selectText","copyTextToClipboard","destroyTextArea","text","document","createElement","value","body","appendChild","removeChild","getOSName","oldContentEditable","contentEditable","oldReadOnly","readOnly","range","createRange","selection","getSelection","contenteditable","readonly","selectNodeContents","removeAllRanges","addRange","setSelectionRange","select","compareVersion","execCommand","ObjectUtils","obj","key","keysArray","replace","split","current","shift","item","Array","isArray","Date","target","source","ignoreUndefined","output","assign","isObject","filter","forEach","mergeDeep","src","prop","hasOwnProperty","copyDeep","summaryCapitalizeObject","capitalizeObject","upperCaseCount","property","upperCaseProperty","toUpperCase","capitalizedProperty","capitalizedPropertyObject","singlePossibility","paramClosestToLowercase","f","toLowerCase","reduce","prev","y","removeUndefined","removeNull","a","b","nullsFirst","direction","nullScore","ax","bx","_","$1","$2","Infinity","an","bn","nn","localeCompare","obj1","obj2","obj1Props","getOwnPropertyNames","obj2Props","_obj","strEnum","res","create","S4","Math","random","toString","substring","uuid","IgoActivityModule","ActivityInterceptor","ActivityService","ConfigService","SubjectStatus","status$","Subject","status","_status","next","callback","scope","watch","status$$","pipe","distinctUntilChanged","subscribe","handleStatusChange","call","unwatch","unsubscribe","Waiting","counter$","BehaviorSubject","ids","index","splice","ɵfac","t","ɵprov","token","factory","providedIn","activityService","activity","headers","get","actReq","clone","handle","register","finalize","unregister","ngModule","providers","provide","useClass","multi","ɵmod","type","ɵinj","imports","lib","releaseDate","injector","config","options","baseConfig","path","http","Promise","_reject","catchError","error","console","log","throwError","configResponse","version","CONFIG_OPTIONS","provideConfigOptions","useValue","configFactory","configService","load","IgoConfigModule","useFactory","deps","suffix","lang","translation","igoLocale$","getConfig","appLocale$","combineLatest","translations","acc","defaultLanguageLoader","undefined","IgoLanguageModule","IgoMessageModule","MessageCenterComponent","RouteService","IgoErrorModule","ErrorInterceptor","LanguageService","MessageService","MediaService","NetworkService","StorageService","IgoMissingTranslationHandler","translateService","langs","substr","forRoot","missingTranslationHandler","_c0","a0","closeIcon","_options","defaultOptions","timeOut","hasCloseIcon","showProgressBar","pauseOnHover","clickToClose","maxLength","maxStack","preventDuplicates","ɵcmp","selectors","inputs","decls","vars","consts","template","rf","ctx","directives","styles","MessageType","notificationService","messages$","message","httpError","caught","concat","currentDate","from","to","parse","notification","handleTemplate","icon","theClass","addIcon","SUCCESS","ERROR","INFO","ALERT","remove","mess","translate","getBrowserLang","getLanguage","setDefaultLang","match","use","reloadLang","messageService","errorContainer","handleError","handleCaughtError","handleUncaughtError","errorObj","statusText","toDisplay","instant","parentModule","ROUTE_SERVICE_OPTIONS","route","centerKey","zoomKey","projectionKey","contextKey","searchKey","visibleOnLayersKey","visibleOffLayersKey","directionsCoordKey","toolKey","wmsUrlKey","wmsLayersKey","wmtsUrlKey","wmtsLayersKey","arcgisUrlKey","arcgisLayersKey","iarcgisUrlKey","iarcgisLayersKey","tarcgisUrlKey","tarcgisLayersKey","vectorKey","queryParams","Media","MediaOrientation","breakpointObserver","media$","orientation$","observe","HandsetLandscape","matches","Mobile","Landscape","HandsetPortrait","Portrait","TabletLandscape","Tablet","TabletPortrait","WebLandscape","Desktop","WebPortrait","getMedia","documentElement","StorageScope","StorageServiceEventEnum","storageChange$","CLEARED","SESSION","sessionStorage","getItem","LOCAL","localStorage","JSON","_a","previousValue","setItem","stringify","currentValue","event","MODIFIED","ADDED","removeItem","REMOVED","clear","stateChangeEventEmitter","state","connection","onLine","checkNetworkState","onlineSubscription","fromEvent","info","emitEvent","offlineSubscription","emit","reportState","debounceTime","startWith","EntityTableColumnRenderer","EntityTableScrollBehavior","EntityTableSelectionState","getEntityProperty","entity","safeObject","getEntityId","meta","idProperty","getEntityTitle","titleProperty","getEntityIcon","iconProperty","Map","change$","ReplaySubject","store","getKey","size","setMany","entities","set","changes","exclusive","updateMany","updateManyExclusive","reverseMany","currentState","reversedChanges","reverseChanges","allKeys","getAllKeys","Set","some","changeKey","entries","bunch","storeKeys","source$","values$","lifted","joins","filter$","filters$","filterIndex","sort$","getKey$","count$","empty$","_index","clause","find","values","sort","values$$","observables$","liftJoinedSource","liftSource","skip","_values","filters","processValues","setValues","sources$","joinData","computeJoinedValue","joinIndex","slice","filterValues","sortValues","clauses","every","v1","v2","naturalCompare","valueAccessor","generateIndex","empty","entities$","_pristine","strategies","getProperty","createStateManager","view","createDataView","stateView","createStateView","lift","newStateIsEmpty","pristine","updateCount","softClear","destroy","insertMany","deleteMany","strategy","activate","_strategy","constructor","bindStore","unbindStore","getStrategyOfType","deactivate","all$","currentRecord","statesAreTheSame","revision","ref","createIndex","record","newState","currentStateIsEmpty","cdRef","innerStateIndex","setChangeDetector","setStore","teardownObservers","setupObservers","detectChanges","entities$$","onEntitiesChange","state$$","onStateChange","changesDetected","storeIndex","innerIndex","storeValue","innerValue","objectsAreEquivalent","stores","active$","active","doDeactivate","doActivate","EntityStoreFilterCustomFuncStrategy","super","filterStore","unfilterStore","filterAll","unfilterAll","addFilter","filterClauseFunc","filterId","removeFilter","EntityStoreFilterSelectionStrategy","arguments","has","selected","EntitySelectorComponent_mat_option_3_Template","ctx_r0","emptyValue","emptyText","EntitySelectorComponent_mat_option_4_Template","ctx_r1","multiSelectValue","multiText$","EntitySelectorComponent_ng_template_5_Template","record_r3","$implicit","ctx_r2","titleAccessor","SanitizeHtmlPipe","SecureImagePipe","EntityTablePaginatorComponent","EntityTableRowDirective","StopPropagationDirective","EntitySelectorComponent","selected$","multiAllText","multiNoneText","disabled","selectedChange","watcher","selected$$","manyBy$","records","onSelectFromStore","multiSelect","_value","all","updateAll","updateMultiToggleWithEntities","placeholder","outputs","$event","onSelectionChange","pipes","changeDetection","stopPropagation","ɵdir","hostBindings","onClick","renderer","el","selectOnClick","highlightSelection","_selected","scrollBehavior","Auto","cls","toggleSelected","scroll","addCls","selectedCls","highlightedCls","removeCls","nativeElement","scrollMode","behavior","block","inline","addClass","removeClass","languageService","mediaService","hidePageSize","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","paginationLabelTranslation$$","entitySortChange$","paginatorChange","rangeLabel","page","of","label","startIndex","max","min","paginator","unsubscribeAll","count$$","emitPaginator","entitySortChange$$","firstPage","initPaginatorOptions","translateLabels","_b","_c","_d","_e","_f","paginatorOptions","isMobile","_intl","firstPageLabel","getRangeLabel","itemsPerPageLabel","lastPageLabel","nextPageLabel","previousPageLabel","sub","viewQuery","_t","first","features","complete","activityInterceptor","responseType","switchMap","blob","Observable","observer","reader","FileReader","readAsDataURL","onloadend","result","ɵpipe","name","pure","maxCacheCount","Function","prototype","_sanitizer","v","bypassSecurityTrustHtml","EntityTableComponent_th_3_ng_container_1_ng_container_1_Template","_r10","onToggleRows","checked","selectionState_r8","ngIf","ctx_r7","entityTableSelectionState","All","Some","EntityTableComponent_th_3_ng_container_1_Template","ctx_r6","selectionState$","EntityTableComponent_th_3_Template","selectMany","EntityTableComponent_td_4_Template","_r13","shiftKey","preventDefault","record_r11","ctx_r14","onShiftToggleRow","rowIsSelected","onToggleRow","EntityTableComponent_ng_container_5_ng_container_1_th_1_Template","column_r16","EntityTableComponent_ng_container_5_ng_container_1_Template","EntityTableComponent_ng_container_5_ng_container_2_th_1_Template","EntityTableComponent_ng_container_5_ng_container_2_Template","EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_td_1_Template","record_r31","ctx_r32","getCellClass","getValue","EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_ng_template_2_img_2_Template","ctx_r37","EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_ng_template_2_ng_template_3_Template","EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_ng_template_2_Template","_r43","_r38","ctx_r34","isImg","EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_Template","_r33","ctx_r30","isUrl","EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_Template","EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_td_1_Template","record_r48","ctx_r49","EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_ng_template_2_img_2_Template","ctx_r54","EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_ng_template_2_ng_template_3_Template","EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_ng_template_2_Template","_r60","_r55","ctx_r51","EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_Template","_r50","ctx_r47","EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_Template","EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_td_1_Template","record_r65","ctx_r66","EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_ng_template_2_img_2_Template","ctx_r71","EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_ng_template_2_ng_template_3_Template","EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_ng_template_2_Template","_r77","_r72","ctx_r68","EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_Template","_r67","ctx_r64","EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_Template","EntityTableComponent_ng_container_5_ng_container_3_ng_container_4_td_1_Template","record_r82","ctx_r81","EntityTableComponent_ng_container_5_ng_container_3_ng_container_4_Template","EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_1_Template","_r92","button_r87","record_r85","onButtonClick","click","color","EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_2_Template","_r97","EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_Template","style","EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_Template","ctx_r84","EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_Template","EntityTableComponent_ng_container_5_ng_container_3_Template","columnRenderer_r24","ctx_r19","entityTableColumnRenderer","Default","HTML","UnsanitizedHTML","Icon","ButtonGroup","EntityTableComponent_ng_container_5_Template","columnIsSortable","getColumnRenderer","EntityTableComponent_tr_6_Template","ctx_r3","getHeaderClass","EntityTableComponent_tr_7_Template","_r103","record_r101","onRowSelect","onRowClick","ctx_r4","getRowClass","EntityTableComponent_igo_entity_table_paginator_8_Template","_r106","ctx_r5","EntityTableComponent","sortNullsFirst","withPaginator","entityClick","entitySelectChange","entitySortChange","dataSource","_paginator","columns","column","visible","selectionCheckbox","fixedHeader","handleDatasource","unsubscribeStore","selection$$","firstSelected","firstSelectedStateviewPosition","pageMax","pageToReach","floor","computeSelectionState","dataSource$$","data","c","lastRecordCheckedKey","update","added","toggle","selectNode","stopImmediatePropagation","recordIndex","lastRecordChecked","indexes","_record","selectedRecords","selectionCount","None","sortable","pop","func","headerClassFunc","rowClassFunc","tableFunc","cellClassFunc","columnFunc","clickFunc","onSort","getTableClass","getTrackByFunction","ActionbarMode","ActionStore","ActionbarItemComponent_mat_list_item_0_button_4_mat_icon_2_Template","icon$","ActionbarItemComponent_mat_list_item_0_button_4_Template","disabled$","withIcon","ActionbarItemComponent_mat_list_item_0_h4_5_Template","ActionbarItemComponent_mat_list_item_0_Template","_r6","withTooltip","tooltip$","ngClass$","withTitle","ActionbarItemComponent_mat_list_item_1_mat_checkbox_4_Template","_r9","action","handler","checkCondition$","ActionbarItemComponent_mat_list_item_1_Template","ActionbarItemComponent","noDisplay$","trigger","args","ngClass","ngClass$$","updateNgClass","isObservable","icon$$","updateIcon","checkCondition","checkCondition$$","updateCheckCondition","tooltip","tooltip$$","updateTooltip","availability","availability$$","available","disabled$$","display","display$$","noDisplay","noDisplay$$","checkbox","ActionbarComponent_mat_list_0_div_1_Template","_r8","scrollUp","ActionbarComponent_mat_list_0_igo_actionbar_item_2_Template","ctx_r9","onTriggerAction","toggleCollapseAction","ActionbarComponent_mat_list_0_3_ng_template_0_Template","_r15","action_r13","ctx_r12","ActionbarComponent_mat_list_0_3_Template","ActionbarComponent_mat_list_0_div_4_Template","_r17","scrollDown","ActionbarComponent_mat_list_0_Template","heightCondition","positionConditionTop","isDesktop","withToggleButton","collapsed","positionConditionLow","ActionbarComponent_div_1_ng_template_7_Template","_r22","action_r20","ActionbarComponent_div_1_Template","_r18","iconColor","overlayClass","xPosition","yPosition","ActionbarComponent_mat_card_2_ng_template_2_Template","_r26","action_r24","ctx_r23","ActionbarComponent_mat_card_2_Template","CollapseDirective","IgoClickoutModule","ClickoutDirective","IgoMatBadgeIconModule","IgoBadgeIconDirective","IgoActionModule","IgoActionbarModule","ActionbarComponent","IgoDrapDropModule","IgoCustomHtmlModule","IgoContextMenuModule","ContextMenuDirective","IgoConfirmDialogModule","ConfirmDialogService","ConfirmDialogComponent","IgoCollapsibleModule","CollapsibleComponent","DynamicComponentService","overlay","elRef","actionbarMode","heightCondition$","positionConditionTop$","positionConditionLow$","mode","Dock","horizontal","scrollActive","_overlayClass","clientHeight","scrollHeight","scrollTop","scrollBy","hostVars","withTitleClass","withIconClass","horizontalClass","Overlay","Context","matIconRegistry","hidden","inverseColor","inheritColor","originalColor","getNamedSvgIcon","svgObj","svg","updateSvg","updateHidden","updateDisabled","updateColor","querySelector","badge","alignItems","justifyContent","innerHTML","background","getComputedStyle","getPropertyValue","igoMatBadgeIcon","matBadgeHidden","matBadgeDisabled","igoMatBadgeInverseColor","igoMatBadgeInheritColor","clickout","contains","handleMouseClick","_collapsed","_target","collapseTarget","expandTarget","_c0$1","_title","ngContentSelectors","_r0","dialogRef","close","confirmMessage","dialog","afterClosed","open","disableClose","componentInstance","viewContainerRef","elementRef","menuPosition","overlayRef","positionStrategy","position","flexibleConnectedTo","withPositions","originX","originY","overlayX","overlayY","scrollStrategy","scrollStrategies","attach","menuContext","clickTarget","overlayElement","take","dispose","onContextMenu","componentFactory","subscriptions","inputs$$","subscribers","componentRef","createComponent","updateInputs","updateSubscribers","unobserveAllInputs","instance","propName","unobserveInput","inputValue","observeInput","setInputValue","onUpdateInputs","getPrototypeOf","descriptor","getOwnPropertyDescriptor","emitter","subscriber","_subscriber","observable","resolver","componentCls","resolveComponentFactory","_c0$2","DynamicOutletComponent_ng_template_0_Template","IgoFlexibleModule","IgoDynamicComponentModule","IgoDynamicOutletModule","DynamicOutletComponent","FormService","FormFieldService","IgoFormFormModule","FormComponent","dynamicComponentService","component","eq","inputsAreEquivalents","subscribersAreEquivalents","dynamicComponent","renderComponent","setTarget","_c0$4","_c1$1","_c2$1","_c3","autocomplete","submitForm","reset","buttons","children","formData","setData","getData","form","groups","group","fields","field","updateDataWithFormField","control","setValue","onSubmit","hasButtons","formBuilder","validatorStr","addControl","validators","getValidators","validator","setValidators","partial","validatorOption","getValidator","FormFieldComponent_ng_container_0_Template","getFieldComponent","getFieldInputs","getFieldSubscribers","IgoFormFieldModule","FormFieldComponent","formFieldService","fieldInputs","fieldSubscribers","getFieldByType","errors","fieldOptions","disableSwitch","formControl","required","FormGroupComponent_div_0_div_1_Template","field_r3","getFieldNgClass","FormGroupComponent_div_0_Template","FormGroupComponent_mat_error_3_Template","getErrorMessage","InteractiveTourService","InteractiveTourLoader","IgoEntityModule","IgoEntityTableModule","IgoImageModule","IgoEntityTablePaginatorModule","IgoStopPropagationModule","IgoEntitySelectorModule","IgoFormModule","IgoFormGroupModule","FormGroupComponent","ToolService","_c0$5","colSpan","cols","getFieldColSpan","messages","errorMessages","jsonURL","getPathToConfigFile","nameInConfigFile","getJSON","allToursOptions","err","toolName","interactiveTourLoader","shepherdService","nextIndex","isAppHaveTour","loadConfigTour","start","haveTour","getTourOptionData","stepConfig","conditions","condition","buttonKind","classes","actionName","self","nbTry","checkExist","setInterval","getCurrentStep","attachTo","cancel","clearInterval","currentStepElement","getElement","querySelectorAll","classList","add","header","stepsArray","steps","progress","className","innerText","insertBefore","tour","service","nextStep","checkNext","_setupModal","show","step","actionConfig","getAction","executeAction","waitFor","maxTry","maxWait","shepherdSteps","on","popperOptions","modifiers","offset","beforeShowPromise","executeActionPromise","previousStep","beforeChange","beforeShow","getButtons","noBackButton","highlightClass","scrollTo","scrollToElement","canClickTarget","disableInteraction","when","onShow","hide","onHide","defaultStepOptions","cancelIcon","getShepherdSteps","modal","confirmCancel","addSteps","tourObject","addProgress","activeTool$","toolbar$","activeToolHistory","tool","setToolbar","toolbar","initStore","activeTool$$","tools","getTool","deactivateTool","previous","activateTool","clearActiveToolHistory","firstBy$","setActiveTool","toolbox","setTools","getTools","InteractiveTourComponent_button_0_Template","_r2","startInteractiveTour","getClass","disabledTourButton","discoverTitleInLocale$","ListItemDirective","IgoKeyValueModule","KeyValuePipe","IgoInteractiveTourModule","InteractiveTourComponent","IgoListModule","ListComponent","interactiveTourService","toolService","tourToStart","styleButton","activeToolName","isActiveTool","isToolHaveTourConfig","getTourToStart","isToolHaveTour","isTourDisplayInMobile","startTour","showTourButton","encapsulation","keyValues","_color","_focused","_disabled","beforeSelect","beforeFocus","beforeUnselect","beforeUnfocus","beforeDisable","beforeEnable","focus","unfocus","unselect","disable","enable","toggleFocusedClass","toggleSelectedClass","toggleDisabledClass","offsetTop","focused","focusedCls","disabledCls","_c0$7","_c1$3","_navigation","_selection","focusNext","_selectedItem","focusedItem","_focusedItem","navigationEnabled","navigate","enableNavigation","listItems","init","listItems$$","items","toArray","igoList","getFocusedIndex","isScrolledIntoView","offsetHeight","selectedItem","navigation","getOffsetTop","elem","docViewTop","elemTop","findSelectedItem","findFocusedItem","item2","handleItemBeforeSelect","handleItemSelect","handleItemBeforeFocus","handleItemFocus","findIndex","focusPrevious","contentQueries","dirIndex","handleKeyboardEvent","disableNavigation","PanelComponent_div_0_Template","IgoPanelModule","PanelComponent","IgoSpinnerModule","SpinnerActivityDirective","SpinnerComponent","_c0$8","_c1$4","_withHeader","withHeader","_c0$9","a1","shown$","shown","spinner","counter$$","dataChange","copiedData","_database","_model","_sort","_filterChange","merge","displayDataChanges","sortChange","getFilteredData","getSortedData","filterable","propertyA","propertyB","TableActionColor","_c0$a","TableComponent_div_1_Template","TableComponent_th_6_Template","_r11","ctx_r10","masterToggle","hasValue","isAllSelected","TableComponent_td_7_Template","_r14","row_r12","ctx_r15","isSelected","TableComponent_ng_container_8_ng_container_1_th_1_Template","TableComponent_ng_container_8_ng_container_1_Template","TableComponent_ng_container_8_ng_container_2_th_1_Template","TableComponent_ng_container_8_ng_container_2_Template","_c1$5","TableComponent_ng_container_8_ng_container_3_td_1_Template","row_r27","ctx_r26","model","TableComponent_ng_container_8_ng_container_3_Template","TableComponent_ng_container_8_ng_template_4_td_0_Template","row_r30","ctx_r29","TableComponent_ng_container_8_ng_template_4_Template","TableComponent_ng_container_8_Template","_r20","TableComponent_th_10_Template","TableComponent_td_11_button_1_Template","_r36","action_r34","row_r32","handleClickAction","ctx_r33","getActionColor","TableComponent_td_11_Template","actions","TableComponent_tr_12_Template","TableComponent_tr_13_Template","_r40","row_r38","ctx_r8","IgoTableModule","TableComponent","_hasFIlterInput","row","database","displayedColumns","displayed","unshift","changed","change","colorId","hasFilterInput","ToolboxColor","toolSlideInOut","speed","transform","ToolboxComponent_igo_actionbar_0_Template","actionStore","toolbarWithTitle$","_c0$b","ToolboxComponent_div_2_Template","_r4","onAnimationStart","onAnimationComplete","tool_r2","animate","animation$","getToolInputs","IgoToolModule","IgoToolboxModule","ToolboxComponent","animating$","White","Grey","Primary","toolbar$$","onToolbarChange","onActiveToolChange","onAnimate","_tool","_toolbox","activeTool","toolActivated","childrenToolActivated","parent","unAnimate","animating$$","animation","classColorGrey","classColorPrimary","WidgetOutletComponent_igo_dynamic_outlet_0_Template","widget","getEffectiveSubscribers","IgoWidgetModule","WidgetService","IgoWidgetOutletModule","WidgetOutletComponent","IgoWorkspaceSelectorModule","WorkspaceSelectorComponent","baseSubscribers","onCancel","onComplete","destroyWidget","baseSubscriber","widgetCls","activeWorkspace$","workspace","deactivateWorkspace","activateWorkspace","onSelectedChange","getWorkspaceTitle","widget$","widgetInputs$","widgetSubscribers$","entityStore","deactivateWidget","WorkspaceWidgetOutletComponent_ng_container_0_Template","_r3","widget_r1","onWidgetCancel","onWidgetComplete","IgoWorkspaceModule","IgoWorkspaceWidgetOutletModule","WorkspaceWidgetOutletComponent","AppHomeComponent","AppHomeModule","AppActivityComponent","AppActivityModule","AppConfigComponent","AppConfigModule","AppLanguageComponent","AppLanguageModule","AppMediaComponent","AppMediaModule","AppMessageComponent","AppMessageModule","AppRequestComponent","AppRequestModule","AppHomeRoutingModule","forChild","AppActivityRoutingModule","idsActivity","AppConfigRoutingModule","configLanguage","default","AppLanguageRoutingModule","app","setLanguage","changeLanguage","AppMediaRoutingModule","getOrientation","isTouchScreen","AppMessageRoutingModule","success","alert","AppRequestRoutingModule","rep","callHttp","callHttpError","AppActionComponent","AppExplanationComponent","AppSalutationComponent","AppActionModule","AppDynamicComponentComponent","AppDynamicComponentModule","AppEntityTableComponent","AppEntityTableModule","AppActionRoutingModule","added$","AppDynamicComponentRoutingModule","toggleComponent","AppEntityTableRoutingModule","description","image","AppEntitySelectorComponent","AppEntitySelectorModule","AppEntitySelectorRoutingModule","AppFormComponent","AppFormModule","AppTableComponent","AppTableModule","AppFormRoutingModule","formService","form$","data$","submitDisabled","choices","valueChanges$$","valueChanges","valid","AppTableRoutingModule","primary","showName","rows","handleSelect","AppToolComponent","AppSalutationWidgetComponent","AppToolModule","AppWidgetComponent","AppWidgetModule","AuthFacebookComponent","AuthMicrosoftb2cComponent","MsalBroadcastServiceb2c","MsalServiceb2c","AuthMicrosoftComponent","AuthGoogleComponent","AuthService","TokenService","AppToolRoutingModule","activateSalutationTool","AppWidgetRoutingModule","widgetService","tokenKey","jwt","decode","currentTime","getTime","exp","tokenService","router","authenticate$","logged$","anonymous","authenticated","username","password","myHeader","encodePassword","loginCall","infosUser","typeConnection","post","tap","isExpired","isAuthenticated","redirectUrl","loginRoute","navigateByUrl","homeRoute","user","patch","encode","isAnonymous","decodeToken","isAdmin","tokenDecoded","locale","expiredAlert","authService","appRef","login","apiKey","clientId","loadSDKGoogle","loadPlatform","warn","fjs","gapi","auth2","getAuthInstance","signIn","signOut","initClient","client","discoveryDocs","then","handleSignOutClick","updateTextButton","isSignedIn","listen","updateSigninStatus","loginGoogle","getToken","access_token","btn","loginWithToken","tick","getElementsByTagName","js","onload","handleClientLoad","parentNode","msalService","msalGuardConfig","_destroying$","PublicClientApplication","cache","cacheLocation","broadcastService","inProgress$","takeUntil","checkAccount","loginPopup","getConf","authRequest","response","setActiveAccount","account","acquireTokenSilent","accessToken","tokenId","idToken","InteractionRequiredAuthError","acquireTokenPopup","conf","loginMicrosoft","location","hash","redirectHash","initializeWrapperLibrary","Angular","logger","request","acquireTokenRedirect","silentRequest","handleRedirectPromise","loginRedirect","logoutRequest","logout","logoutRedirect","logoutPopup","ssoSilent","getLogger","setLogger","msalInstance","_msalSubject","msalSubject$","asObservable","_inProgress","Startup","addEventCallback","EventMessage","getInteractionStatusFromEvent","verbose","eventType","browserAuthOptions","loginMicrosoftb2c","appId","loadSDKFacebook","FB","Event","statusChangeCallback","loginFacebook","authResponse","getElementById","subscribeEvents","AuthInternComponent_button_12_Template","loginAnonymous","loading","AuthInternComponent_div_13_Template","AuthInternComponent","fb","_allowAnonymous","errorMsg","loginUser","AuthFormComponent_div_0_div_1_Template","AuthFormComponent_div_0_div_2_igo_auth_google_4_Template","onLogin","AuthFormComponent_div_0_div_2_igo_auth_microsoft_5_Template","AuthFormComponent_div_0_div_2_igo_auth_microsoftb2c_6_Template","AuthFormComponent_div_0_div_2_igo_auth_facebook_7_Template","AuthFormComponent_div_0_div_2_igo_auth_intern_8_Template","_r19","AuthFormComponent_div_0_div_2_Template","google","microsoft","microsoftb2c","facebook","AuthFormComponent_div_0_div_3_Template","_r21","AuthFormComponent_div_0_div_4_button_4_Template","_r24","home","AuthFormComponent_div_0_div_4_Template","AuthFormComponent_div_0_Template","logged","backgroundDisable","showLoginDiv","showAlreadyConnectedDiv","showLogoutDiv","AuthInterceptor","AuthFormComponent","_backgroundDisable","_hasAlreadyConnectedDiv","_hasLogoutDiv","_showAlreadyConnectedDiv","_showLogoutDiv","isLogoutRoute","hasAlreadyConnectedDiv","hasLogoutDiv","analyzeRoute","getName","goToRedirectUrl","logoutRoute","firstName","sourceId","events","changeEvent","currentRoute","isLoginRoute","refreshInProgress","trustHosts","hostname","originalReq","withCredentials","handleHostsWithCredentials","refreshToken","href","host","authReq","hashUser","hashStr","xhr","setRequestHeader","reqUrl","hostsWithCredentials","hostWithCredentials","RegExp","domainRegFilters","test","MSALConfigFactory","msConf","redirectUri","authority","MSALConfigFactoryb2c","MSALAngularConfigFactory","interactionType","Popup","scopes","loginHint","MSALAngularConfigFactoryb2c","provideAuthMicrosoft","IgoAuthModule","AuthStorageService","AppAuthFormComponent","AppAuthFormModule","userIgo","preference","mergePreference","AppAuthFormRoutingModule","convertDMSToDD","degrees","minutes","seconds","neg","dd","abs","formatScale","scale","round","getResolutionFromScale","dpi","ctrlKeyDown","originalEvent","altKey","metaKey","ctrlKey","roundCoordTo","coord","decimal","toFixed","LinkedProperties","generateIdFromSourceOptions","wms","generateWMSIdFromSourceOptions","wmts","generateWMTSIdFromSourceOptions","xyz","generateXYZIdFromSourceOptions","feature","generateFeatureIdFromSourceOptions","wfs","generateWfsIdFromSourceOptions","arcgisrest","generateArcgisRestIdFromSourceOptions","imagearcgisrest","tilearcgisrest","osm","tiledebug","generateId","layers","LAYERS","standardizeUrl","layer","featureTypes","urlDecomposed","origin","urlStandardized","paramsToKeep","p","DataSource","dataService","ol","createOlSource","legend","OgcFilterOperatorType","OgcFilterOperator","moment","filterSequence","operators","PropertyIsEqualTo","spatial","fieldRestrict","PropertyIsNotEqualTo","PropertyIsLike","PropertyIsGreaterThan","PropertyIsGreaterThanOrEqualTo","PropertyIsLessThan","PropertyIsLessThanOrEqualTo","PropertyIsBetween","During","PropertyIsNull","Intersects","Within","Contains","defaultValue","ogcFiltersOptions","fieldNameGeometry","srcType","ogcFiltersDefaultValue","editable","geometryName","advancedOgcFilters","pushButtons","checkboxes","radioButtons","proj","ourBboxFilter","enableBbox","getCode","checkIgoFiltersProperties","wfsOptions","srsName","featureNS","featurePrefix","bundleFilter","outputFormat","query","writeGetFeature","XMLSerializer","serializeToString","filterObject","logicalArray","createFilter","operator","logical","filterOptions","geometry","wfsPropertyName","propertyName","wfsPattern","pattern","wfsMatchCase","matchCase","wfsWildCard","wildCard","wfsSingleChar","singleChar","wfsEscapeChar","escapeChar","wfsLowerBoundary","lowerBoundary","wfsUpperBoundary","upperBoundary","wfsGeometryName","wfsExtent","wfsWktGeometry","wkt_geometry","wfsSrsName","wfsBegin","parseFilterOptionDate","begin","minDate","wfsEnd","end","maxDate","wfsExpression","expression","readGeometry","dataProjection","featureProjection","BBOX","And","apply","Or","Not","level","defineInterfaceFilterSequence","addInterfaceFilter","defaultOperatorsType","allowedOperators","fieldsHasSpatialOperator","includeContains","effectiveOperators","srcField","allowedOperatorsType","Spatial","BasicAndSpatial","Basic","Time","BasicNumericOperator","igoOgcFilterObject","parentLogical","filterid","sliderOptions","igoSpatialSelector","igoSNRC","filterArray","addFilterProperties","sequence","nextElement","lastProcessedFilter","lastParentLogical","uiFilter","computedSelectors","selector","bundles","bundle","includes","selectorType","selectorGroup","ogcFilters","filterQueryStringSelector","filterQueryStringAdvancedFilters","formatGroupAndFilter","selectorsCorr","verifyMultipleEnableds","buildFilter","filterQueryString","formatProcessedOgcFilter","multiple","enableds","list","selectorBundle","computeIgoSelector","g","bundleCondition","selectorsType","ogcselector","enabledSelector","processedFilter","layersOrTypenames","appliedFilter","layerOrTypenames","isValid","QueryFormat","QueryFormatMimeType","QueryHtmlTarget","gmlRegex","formatWFSQueryString","dataSourceOptions","epsg","properties","forceDefaultOutputFormat","urlWfs","paramsWFS","effectiveCount","effectiveStartIndex","epsgCode","paramMaxFeatures","cnt","maxFeatures","srs","valueReference","sourceFields","fieldsNames","sourcefield","separator","getFeature","getpropertyvalue","checkWfsParams","wfsDataSourceOptions","getFormatFromOptions","olFormatCls","formatOptions","gmlFormat","MetadataService","wfsService","ogcFilters$","timeFilter$","sourceParams","DPI","MAP_RESOLUTION","FORMAT_OPTIONS","refreshIntervalSec","refresh","wfsCheckup","download","dynamicUrl","buildDynamicDownloadUrlFromParamsWFS","sourceField","initOgcFilters","ogcFilterWriter","defineOgcFiltersDefaultOptions","sf","getSourceFieldsFromWFS","handleOgcFiltersAppliedValue","FILTER","setOgcFilters","timeFilterableDataSourceOptions","timeFilterable","timeFilter","setTimeFilter","queryTitle","mapLabel","BLANK","updateParams","igoRefresh","asWFSDataSourceOptions","ratio","triggerEvent","projParam","contentDependent","projection","contentDependentLegend","VERSION","baseUrl","currentStyle","evt","transferCommonProperties","ogcFilters$$","transferOgcFiltersProperties","timeFilter$$","transferTimeFilterProperties","syncChildLayers","un","linkedLayers","links","link","VISIBLE","OPACITY","baseOpacity","opacity","MINRESOLUTION","baseMinResolution","minResolution","MAXRESOLUTION","baseMaxResolution","OGCFILTERS","TIMEFILTER","layerChange","layerChangeProperties","getProperties","newValue","currentLinkedId","linkId","currentLinks","linkedIds","linkedId","layerToApply","silent","visible$","l","bidirectionnal","appliedOgcFilter","layerType","sourceOptions","getSource","viewController","getOlProjection","getParams","childLayer","appliedTimeFilter","values_","TIME","parentLayer","authInterceptor","legendCollapsed","firstLoadComponent","hasBeenVisible$","isInResolutionsRange$","displayed$","createOlLayer","zIndex","baseLayer","maxResolution","Number","maxScaleDenom","minScaleDenom","legendOptions","setLegend","getZIndex","setZIndex","setOpacity","getMaxResolution","setMaxResolution","updateInResolutionsRange","getMinResolution","setMinResolution","setVisible","isInResolutionsRange","showInLayerList","igoMap","unobserveResolution","observeResolution","layerSyncWatcher","hasBeenVisible$$","resolution$$","resolution$","resolution","getResolution","metadata","extern","MetadataButtonComponent_button_0_Template","openMetadata","MetadataAbstractComponent_mat_dialog_content_4_Template","MetadataAbstractComponent_mat_dialog_content_5_Template","IgoMetadataModule","MetadataAbstractComponent","MetadataButtonComponent","WFSService","metadataService","_layer","layerTitle","abstract","format","getSourceFormatFromOptions","formatType","vectorSource","loader","dispatchEvent","wfsProj","currentExtent","buildUrl","alteredUrl","getFeatures","addEventListener","threshold","XMLHttpRequest","interceptXhr","onError","removeLoadedExtent","onerror","responseText","getFormat","readFeatures","addFeatures","send","igoFilters","queryStringValues","filterOrBox","filterOrPush","xmlFilter","defineFieldAndValuefromWFS","getfeatureSourceField","nb","d","fieldList","fieldListWoGeom","fieldListWoGeomStr","olFormats","effectiveOlFormats","gmlDataSourceOptions","sourceFieldsToRetrieveValues","wfsGetFeature","concatMap","allowGml","firstFeature","getKeys","getGeometryName","processingArray","results","mfeatures","loopFeatures","built_properties_value","kv","boundedBy","fieldType","featureProperties","createDefaultTileGrid","projectionExtent","getExtent","resolutions","matrixIds","z","pow","MapService","CapabilitiesService","DataSourceService","ProjectionService","tileGrid","crossOrigin","htmlString","layerOptions","oneType","cartocss","colors","j","layer_name","esrijsonFormat","attributions","overlaps","encodeURIComponent","time","customParams","bind","legendInfo","parseInt","lyr","layerId","lyrLegend","renderingRule","ImageArcGISRest","baseOptions","TileGrid","WebSocketDataSource","createWebSocket","ws","WebSocket","onmessage","onMessage","onclose","onClose","onopen","onOpen","featureAdded","readFeature","featureToRemove","getFeatureById","getId","removeFeature","addFeature","mvtFormat","featureClass","_converters","esriPMS","_convertEsriPMS","esriSFS","_convertEsriSFS","esriSLS","_convertEsriSLS","esriSMS","_convertEsriSMS","esriTS","_convertEsriTS","_renderers","uniqueValue","_renderUniqueValue","simple","_renderSimple","classBreaks","_renderClassBreaks","labelingInfo","mapUnits","ii","labelExpression","symbol","maxScale","minScale","_getResolutionForScale","getText","setText","defaultSymbol","defaultStyle","classBreakInfos","classBreakInfo","classMinValue","minValue","classMaxValue","field1","infos","uniqueValueInfos","me","layerInfo","drawingInfo","styleFunctions","drawingInfoStyle","labelingInfoStyleFunctions","_convertLabelingInfo","point","units","mpu","parseFloat","rotation","_transformAngle","angle","fill","_transformColor","font","weight","family","textBaseline","verticalAlignment","textAlign","horizontalAlignment","offsetX","_convertPointToPixel","xoffset","offsetY","yoffset","contentType","imageData","stroke","outline","_convertOutline","lineDash","width","ol3Rad","PI","radius","points","radius2","TimeFilterType","TimeFilterStyle","TypeCapabilities","mapService","parsers","esriJSON","getCapabilities","capabilities","parseWMSOptions","parseWMTSOptions","jsonp","mapId","cartoOptions","parseCartoOptions","legendUrl","arcgisOptions","forkJoin","parseArcgisOptions","parseTileOrImageArcgisOptions","fromObject","_i","read","findDataSourceInCapabilities","Capability","Layer","DataURL","Abstract","keywordList","KeywordList","queryable","getTimeFilter","Style","getStyle","isExtentInGeographic","EX_GeographicBoundingBox","getMap","queryFormatMimeTypePriority","GEOJSON","GEOJSON2","GML3","GML2","mimeType","Request","GetFeatureInfo","Format","keyEnum","_layerOptionsFromSource","Title","MaxScaleDenominator","MinScaleDenominator","OnlineResource","stepDate","Contents","Identifier","ouputOptions","layer_definition","timeExtent","generateStyle","copyrightText","timeInfo","setTime","toUTCString","DATETIME","CALENDAR","displayField","layerArray","Name","dimension","Dimension","minMaxDim","stylesAvailable","OptionsService","registerProjection","utmZone","mtmZone","lon0","defs","setExtent","capabilitiesService","optionsService","wfsDataSourceService","projectionService","datasources$","context","detailedContextUri","createOSMDataSource","createFeatureDataSource","createWFSDataSource","wmsContext","removeDuplicateCaseInsensitive","createWMSDataSource","createWMTSDataSource","createXYZDataSource","createTileDebugDataSource","createCartoDataSource","createArcGISRestDataSource","createArcGISRestImageDataSource","createWebSocketDataSource","createMVTDataSource","createTileArcGISRestDataSource","createClusterDataSource","observables","optionsFromCapabilities","getWMSOptions","optionsFromApi","optionsMerged","getWMTSOptions","getCartoOptions","getArcgisOptions","getArcgisRestOptions","getImageArcgisOptions","loaded","handleLoadStart","handleLoadEnd","__watchers__","Working","watcherIndex","Done","tile","olSource","olOptions","setImageLoadFunction","customLoader","interceptor","abort","getImage","arrayBufferView","Uint8Array","TextDecoder","Blob","imageUrl","URL","createObjectURL","browsable","exportable","flash","trackFeature","enableTrackFeature","vector","getUrl","setLoader","listenerKey","vectorContext","frameState","flashGeom","getGeometry","elapsed","elapsedRatio","duration","newColor","getStyleFunction","style2","styleClone","getType","getRadius","setRadius","getStroke","setColor","setWidth","getWidth","getFill","setStyle","drawGeometry","render","onUnwatch","stopAnimation","trackFeatureListenerId","feat","getView","setCenter","getCoordinates","centerMapOnFeature","FormatType","ARRAY_BUFFER","TEXT","XML","responseXML","DOMParser","parseFromString","readProjection","vectorTile","setTileLoadFunction","onLoad","failure","createOverlayMarkerStyle","markerColor","markerOutlineColor","isIE","newOutlineColor","svgIconColor","svgOutlineColor","imgSize","anchor","overflow","LayerService","StyleService","parseStyle","styleOptions","olCls","getOlCls","_key","olKey","getOlKey","styleByAttribute","guessTypeFeature","attribute","labelStyle","baseStyle","getLabel","val","createStyle","layerStyle","clusterParam","clusterRanges","r","minRadius","maxRadius","showRange","dynamicRadius","clusterRadius","radiusMin","image_","radiusCalc","labelMatch","labelToGet","matchAll","styleService","dataSourceService","createTileLayer","createVectorLayer","createImageLayer","createVectorTileLayer","createLayer","createAsyncDataSource","olLayer","serviceStyle","createStyleByAttribute","clusterBaseStyle","createClusterStyle","layerOptionsOl","applyMapboxStyle","mapboxStyle","getMapboxGlStyle","stylefunction","FEATURE","FeatureMotion","featureToOl","projectionOut","olFeature","setId","mapTitle","featureFromOl","projectionIn","exclude","excludeOffline","idColumn","olFormat","startsWith","writeGeometryObject","excludeAttribute","excludeAttributeOffline","getRevision","scaleExtent","height","moveToOlFeatures","olFeatures","areaRatio","motion","featuresExtent","featureExtent","olExtent","olFeatureExtent","olFeatureProjection","olGeometry","viewExtent","Zoom","zoomToExtent","Move","moveToExtent","mapExtent","mapExtentArea","featuresExtentArea","getZoom","tryBindStoreLayer","bindLayer","addLayer","viewScale","checkLayer","setLayerOlFeatures","diff","olFeaturesMap","olFeaturesToRemove","newOlFeature","olFeaturesToAddIds","removeOlFeaturesFromLayer","addOlFeaturesToLayer","stores$$","states$$","watchStore","empty$$","skipWhile","updateEntitiesInExtent","unwatchStore","unwatchAll","state$","inMapExtent","entitiesInMapExtent","updateEntitiesInResolution","mapResolution","inMapResolution","setMotion","subscription","onFeaturesChange","clearLayer","setLayerFeatures","selectMotion","getFeatureId","onSourceChanges","flatMap","cluster","setStoreOlFeatures","_overlayStore","createOverlayStore","overlayStore","unlistenToMapClick","removeDragBoxInteraction","addOverlayLayer","listenToMapClick","dragBox","addDragBoxInteraction","watchAll","deactivateSelection","removeOverlayLayer","stores$","mapClickListener","onMapClick","listener","reverse","getFeaturesAtPixel","pixel","hitTolerance","layerFilter","onSelectFromMap","olDragSelectInteraction","getInteractions","getArray","olInteraction","addInteraction","olDragSelectInteractionEndKey","onDragBoxEnd","removeInteraction","mapBrowserEvent","getFeaturesInExtent","doMotion","overlayFeaturesKeys","featuresKeys","groupedFeatures","groupFeaturesByStore","unselectAllFeaturesFromStore","selectFeaturesFromStore","overlayLayer","createOverlayLayer","removeLayer","tryAddLoadingStrategy","addStrategy","activateStrategyOfType","tryAddSelectionStrategy","HoverFeatureDirective","PointerPositionDirective","MapBrowserComponent","markerStyle","overlayDataSource","strokeWidth","fillColor","strokeColor","fillWithOpacity","strokeWithOpacity","bufferRadius","strokeRGBA","fillRGBA","customStyle","geometryType","setMap","removeOlFeature","addOlFeatures","removeFeatures","unwatchLayer","layer$$","MapViewAction","padding","maxZoomOnExtent","extent$","states","stateIndex","stateHistory","olMap","observerKeys","onMoveEnd","extent$$","olView","getProjection","center","getCenter","calculateExtent","getSize","unit","getUnits","zoomTo","zoom","cancelAnimations","easing","getRotation","hasPreviousState","setStateIndex","hasNextState","fromCenter","toCenter","distCenter","sqrt","fromExtent","fromSize","xSize","maxZoom","fit","isFinished","setState","state1","state2","trunc","getOlMap","offlineButtonToggle$","layers$","positionFollower","geolocation$","controls","attribution","layerWatcher","offline","scaleLine","interactions","altShiftDragRotate","doubleClickZoom","keyboard","mouseWheelZoom","shiftDragZoom","dragPan","pinchRotate","pinchZoom","setView","setOlMap","queryResultsOverlay","searchResultsOverlay","buffer","currentView","viewOptions","clearStateHistory","constrainResolution","unsubscribeGeolocate","maxLayerZoomExtent","geolocate","alwaysTracking","getControls","array_","removeControl","getBaseLayers","setMinZoom","minZoom","setMaxZoom","olUId","ol_uid","addLayers","offsetZIndex","offsetBaseLayerZIndex","addedLayers","doAddLayer","setLayers","removeLayers","newLayers","layersToRemove","handleLinkedLayersDeletion","linkedLayer","linkedIndex","doRemoveLayer","srcLayer","syncedDelete","getLayerIndex","moveLayer","raiseLayer","lowerLayer","layerTo","zIndexFrom","changeBaseLayer","existingLayer","getLayerById","maxZIndex","watchLayer","sortLayersByZIndex","layer1","layer2","track","geolocation$$","geolocation","getTracking","startGeolocation","getAccuracy","getAccuracyGeometry","geolocationFeature","bufferFeature","addOlFeature","options_","coordinates","getPosition","bufferGeom","bufferText","bufferStroke","bufferFill","showBufferRadius","setZoom","stopGeolocation","setTracking","trackingOptions","enableHighAccuracy","tracking","_view","updateView","_controls","updateControls","activityId","pointerPositionDelay","pointerPositionCoord","delay","listenToMapPointerMove","unlistenToMapPointerMove","pointerMoveListener","onPointerEvent","dragging","lastTimeoutRequest","clearTimeout","lonlat","coordinate","mapProjection","setTimeout","pointerHoverFeatureStore","hoverFeatureId","igoHoverFeatureDelay","igoHoverFeatureEnabled","subscribeToPointerStore","layers$$","layerSource","hoverFeatureMarker","unsubscribeToPointerStore","unlistenToMapSingleClick","store$$","resultsUnderPointerPosition","entitiesToPointerOverlay","addFeatureOverlay","onMapEvent","singleClickMapListener","onMapSingleClickEvent","getPixelFromCoordinate","forEachFeatureAtPixel","igoLayer","getLayerByOlUId","setLayerStyleFromOptions","geom","getSameFeatureNeighbour","n","hoverSummary","getHoverSummary","hoverStyle","summary","getOrientedFlatCoordinates","coords","flatCoords","idx","neighbourCollection","toDoNeighbour","checkIf","mouseout","olStyle","backgroundFill","backgroundStroke","GeolocateButtonComponent","ZoomButtonComponent","getMaxZoom","getMinZoom","zoomIn","zoomOut","_map","RotationButtonComponent_div_0_Template","resetRotation","rotated","rotationStyle","RotationButtonComponent_div_1_Template","_r5","RotationButtonComponent","QueryService","_showIfNoRotation","radians","showIfNoRotation","CatalogItemType","TypeCatalog","Catalog","catalogService","WMSCatalog","loadCatalogWMSLayerItems","WMTSCatalog","loadCatalogWMTSLayerItems","BaselayersCatalog","baselayers","loadCatalogBaseLayerItems","ArcGISRestCatalog","loadCatalogArcGISRestItems","TileOrImageArcGISRestCatalog","typeCatalog","CompositeCatalog","composite","loadCatalogCompositeLayerItems","CatalogFactory","queryEnabled","queryLayer","getQueryUrl","HTMLGML2","urlGml","mergeMap","gmlRes","imposedGeom","mergeGML","extractData","parser","pts","firstFeatureType","olmpts","olmline","ptsArray","olmpoly","nbFeatures","bbox","getQueryParams","bboxExtent","featureGeometryCoordinates","featureGeometryType","appendLineString","appendPolygon","convexHull","lower","cross","upper","imposedGeometry","queryDataSource","allowedFieldsAndAlias","getAllowedFieldsAndAlias","extractGML3Data","extractGeoJSONData","ESRIJSON","extractEsriJSONData","extractTextData","extractHtmlData","extractGML2Data","geomToAdd","createGeometryFromUrlClick","getQueryTitle","sourceTitle","searchParams","bboxRaw","clickx","clicky","clickx1","clicky1","wktPoly","featureToResult","htmlTarget","crs","IFRAME","bodyTagStart","bodyTagEnd","lastIndexOf","queryString","pairs","pair","decodeURIComponent","featureOL","featureGeometry","shape","SHAPE","the_geom","datasource","forceGML2","wmsDatasource","WMSGetFeatureInfoOptions","INFO_FORMAT","getMimeInfoFormat","QUERY_LAYERS","FEATURE_COUNT","getFeatureInfoUrl","cartoDatasource","sql","queryPrecision","tileArcGISRestDatasource","deltaX","deltaY","clickBuffer","mime","getLabelMatch","layerIsQueryable","olLayerIsQueryable","QuerySearchSource","SearchSource","QueryDirective","CatalogService","queryService","queries$$","queryFeatures","queryFeaturesHitTolerance","waitForAllQueries","cancelOngoingQueries","queries$","doQueryFeatures","queryLayers","zip","query$","clickedFeatures","layerOL","newFeature","nom","id_","_icon","olRenderFeature","flatCoordinates_","XY","ends_","queryFeaturesCondition","dragExtent","forEachFeatureIntersectingExtent","olDragSelectInteractionOnQuery","storageService","storageOptions","getDefaultOptions","settings","setting","setParamFromSetting","search","showInSettings","saveInStorage","confValue","term","settingsName","hashtags","searchSourceSetting","getSettingsValues","hashtagsValid","hashtag","hashtagKey","types","normalize","GoogleLinks","lon","lat","encodeURI","OsmLinks","layersQueryFormat","contextConfig","catalogConfig","apiUrl","catalogsFromConfig","baseLayers","baseLayersCatalog","catalogsFromApi$","catalogs","_response","createInstanceCatalog","collectCatalogItems","getCatalogBaseLayersOptions","layersOptions","externalProvider","Group","getCatalogCapabilities","Service","finalLayers","flattenWmsCapabilities","groupSeparator","capabilitiesCapabilityLayer","includeRecursiveItems","modifiedParent","modifiedLayer","ff","getWMTSItems","getArcGISRESTItems","compositeCatalog","catalogsFromInstance","request1$","request2$","k","groupImpose","obs","outGroupImpose","address","flatLayer","flatDeepLayer","arr","pushImposeGroup","request3$","groupByGroupId","keyFn","groupId","ind","ix","recursiveGroupByLayerAddress","outItem","indicesMatchTitle","bInd","nPosition","idParent","configuredQueryFormat","retriveLayerInfoFormat","showLegend","baseSourceOptions","setCrossOriginAnonymous","forcedProperties","layerName","layerPrepare","itemListIn","regexes","idGroup","groupItem","prepareCatalogItemGroup","testLayerRegexes","layerItem","prepareCatalogItemLayer","itemsPrepare","loopLevel","findCatalogInfoFormat","ServiceIdentification","forcedTitle","matrixSet","requestEncoding","serviceDescription","regex","layerNameFromCatalog","currentLayerInfoFormat","baseInfoFormat","configuredInfoFormat","specific","CatalogBrowserComponent_ng_template_1_ng_container_0_Template","onGroupAddedChange","onLayerAddedChange","item_r1","catalogAllowLegend","toggleCollapsedGroup","CatalogBrowserComponent_ng_template_1_ng_container_1_Template","CatalogBrowserComponent_ng_template_1_Template","isGroup","isLayer","LayerListToolService","CatalogBrowserComponent","layerService","currentItems","sortDirection","addLayerToMap","removeLayerFromMap","addGroupToMap","removeGroupFromMap","addLayersToMap","removeLayersFromMap","createAsyncLayer","oLayers","oLayer","returnItem","titleA","titleB","sortCatalogItemsByTitle","sortAlpha","onlyVisible","onlyInRange","keywordInitialized","sortedAlphaInitialized","onlyVisibleInitialized","onlyInRangeInitialized","LayerListControlsEnum","LayerListSelectVisibleEnum","LayerListDisplacement","LayerListComponent_igo_layer_list_tool_1_Template","_r7","onAppliedFilterAndSortChange","toggleSelectionMode","layersAreAllVisible","layerFilterAndSortOptions","keyword","LayerListComponent_mat_list_item_3_Template","selectAll","selectAllCheck","layersChecked","LayerListComponent_ng_template_7_igo_layer_item_0_Template","toggleLayerTool","layersCheck","layer_r11","ctx_r13","activeLayer","orderable","getLowerLayer","getUpperLayer","queryBadge","expandLegendOfVisibleLayers","updateLegendOnResolutionChange","toggleLegendOnVisibilityChange","check","layerItemChangeDetection$","LayerListComponent_ng_template_7_Template","excludeBaseLayers","LayerListComponent_igo_panel_9_button_2_Template","LayerListComponent_igo_panel_9_button_19_Template","zoomLayerExtents","LayerListComponent_igo_panel_9_Template","ctx_r25","moveActiveLayer","layerListDisplacement","Lower","ctx_r27","Raise","changeOpacity","isLayerRemovable","lowerDisabled","raiseDisabled","badgeOpacity","activeLayerIsValid","templateLayerToolbar","LayerListComponent_igo_panel_10_mat_slider_25_Template","_r34","checkOpacity","ctx_r31","LayerListComponent_igo_panel_10_button_26_Template","_r37","ctx_r36","zoomLayersExtents","LayerListComponent_igo_panel_10_Template","_r39","ctx_r38","ctx_r40","toggleVisibility","ctx_r41","lowerLayers","ctx_r42","raiseLayers","_r30","isAllLayersRemovable","statusSelectedLayersCheck","lowerDisabledSelection","raiseDisabledSelection","activeLayersAreValid","LayerListBindingDirective","LayerListComponent","a2","_c4","thresholdToFilterAndSort","showToolbar$","hideSelectedLayers","activeLayer$","ogcButton","timeButton","floatLabel","appliedFilterAndSort","_keyword","_onlyVisible","_sortedAlpha","toggleOpacity","selectAllCheck$","checkItem","_layers","_activeLayer","isUpperBaselayer","isLowerBaselayer","raisableLayers","lowerableLayers","layersCheckedOpacity","change$$","debounce","timer","computeShowToolbar","computeLayers","selectAllCheck$$","checks","layerTool","lay","layerExtent","layersExtent","actiontype","layersToMove","sortedLayersToMove","getLinkedLayers","layersList","ZINDEX","base","mapIndex","currentLayer","previousLayer","raisableLayer","fromUi","layersToRaise","elements","computeElementRef","offsetParent","nextLayer","lowerableLayer","layersToLower","layersOut","filterLayers","sortLayersByTitle","sortLayersByZindex","showToolbar","never","keepLayerIds","layerKeywords","kw","localKeyword","dataSourceType","keywordRegex","keywordInList","str","always","removable","statusSelectedLayers","NULL","findTrue","findFalse","MIXED","ALL_VISIBLE","ALL_HIDDEN","eventMapIndex","elemSource","checkItems","getElementsByClassName","layersOrResolutionChange$$","shownLayers","setLayersVisibilityStatus","layersVisibility$$","visibles","Boolean","allLayersAreVisible","LayerLegendListComponent_mat_slide_toggle_0_Template","toggleShowAllLegends","showAllLegendsValue","LayerLegendListComponent_mat_divider_2_Template","LayerLegendListComponent_ng_template_5_igo_layer_legend_item_0_Template","layer_r9","ctx_r11","LayerLegendListComponent_ng_template_5_Template","LayerLegendListComponent_p_7_Template","LayerLegendListComponent_p_11_Template","LayerLegendListComponent_p_15_Template","LayerLegendListComponent_p_19_Template","LayerLegendListComponent","hasVisibleOrInRangeLayers$","hasVisibleAndNotInRangeLayers$","layersInUi$","showAllLegend","allowShowAllLegends","allLegendsShown","computeShownLayers","TrackFeatureButtonComponent_button_0_Template","toggleTrackFeature","IgoCatalogBrowserModule","IgoLayerModule","TrackFeatureButtonComponent","disableTrackFeature","AddCatalogDialogComponent_mat_option_10_Template","predefinedCatalog_r5","AddCatalogDialogComponent_mat_option_19_Template","type_r6","email","AddCatalogDialogComponent_span_20_Template","addedCatalog","emailAddress","AddCatalogDialogComponent_span_21_Template","AddCatalogDialogComponent","defaultAddedCatalogType","predefinedCatalogsList$","predefinedCatalogs","typeCapabilities","addedCatalogType$$","updateValueAndValidity","computePredefinedCatalogList","storeViewAll$$","patchValue","changeUrl","option","addCatalog","CatalogLibaryComponent_ng_template_1_Template","catalog_r2","onCatalogRemove","onCatalogSelect","CatalogLibaryComponent_div_3_Template","addCatalogDialog","OGCFilterService","TimeFilterService","IgoCatalogModule","IgoCatalogLibraryModule","CatalogLibaryComponent","DownloadService","SpatialFilterService","addCatalogAllowed","catalogSelectChange","addingCatalog$$","predefinedCatalog","unsubscribeAddingCatalog","capabilies","mapName","ServiceType","catalogToAdd","insert","newCatalogs","addedCatalogs","getCatalogs","date","newdateformStart","newdateformEnd","dates","reformatDateTime","year","years","getFullYear","month","getMonth","day","getUTCDate","hour","getUTCHours","minute","getUTCMinutes","filterString","wfsDatasource","interfaceOgcFilters","filterByOgc","filtered","SpatialFilterType","SpatialFilterItemType","urlFilterList","AdmRegion","Arrond","CircFed","CircProv","DirReg","MRC","Mun","RegTour","bornes","hydro","routes","object","featureCollection","getKeyByValue","itemType","thematic","urlItem","Address","bufferInput","simplified","loc","featureType","featureCode","filterType","Predefined","bufferOutput","DSOptions","currentProj","outputFormatDownload","baseurl","DownloadButtonComponent_button_0_Template","openDownload","IgoDownloadModule","DownloadButtonComponent","downloadService","FeatureDetailsComponent_table_0_tr_2_td_1_Template","FeatureDetailsComponent_table_0_tr_2_td_2_Template","property_r3","FeatureDetailsComponent_table_0_tr_2_td_3_Template","FeatureDetailsComponent_table_0_tr_2_td_4_Template","FeatureDetailsComponent_table_0_tr_2_td_5_img_2_Template","FeatureDetailsComponent_table_0_tr_2_td_5_ng_template_3_Template","FeatureDetailsComponent_table_0_tr_2_td_5_Template","FeatureDetailsComponent_table_0_tr_2_td_6_Template","FeatureDetailsComponent_table_0_tr_2_Template","FeatureDetailsComponent_table_0_Template","filterFeatureProperties","FeatureDetailsComponent_iframe_1_Template","htmlSanitizer","urlSanitizer","FeatureDetailsComponent","sanitizer","networkService","unsubscribe$","ready","routeEvent","selectFeature","htmlDisplayEvent","_source","_feature","bypassSecurityTrustResourceUrl","getBrowserName","offlineButtonState","Route","isHtmlDisplay","DrawType","createDrawHoleInteractionStyle","getMousePositionFromOlGeometryEvent","olEvent","flatCoordinates","DrawPopupComponent","DrawStyleService","start$","end$","changes$","freehand$","olOverlayLayer","createOlInnerOverlayLayer","clearOlInnerOverlaySource","removeOlInnerOverlayLayer","removeOlDrawInteraction","addOlInnerOverlayLayer","addOlDrawInteraction","olOverlaySource","olDrawInteraction","stopClick","drawStyle","maxPoints","freehand","freehandCondition","onDrawStartKey","onDrawStart","onDrawEndKey","onDrawEnd","unsubscribeToKeyDown","onDrawKey","olGeometryEvent","mousePosition","subscribeToKeyDown","keyDown$$","removeLastPoint","drawCounter","toggleLabel","labelOffset","cos","onOk$","_r1","MeasureType","MeasureLengthUnit","MeasureLengthUnitAbbreviation","Meters","Kilometers","Miles","Feet","MeasureAreaUnit","MeasureAreaUnitAbbreviation","SquareMeters","SquareKilometers","SquareMiles","SquareFeet","Hectares","Acres","metersToKilometers","metersToFeet","metersToMiles","squareMetersToSquareKilometers","squareMetersToSquareMiles","squareMetersToSquareFeet","squareMetersToHectares","squareMetersToAcres","metersToUnit","conversion","squareMetersToUnit","formatMeasure","measure","parts","toLocaleString","minimumFractionDigits","maximumFractionDigits","unitAbbr","createMeasureInteractionStyle","measureOlGeometryLength","getFlatCoordinates","measureOlGeometry","area","lengths","coordinatesLength","olSegment","getOlGeometryMidpoints","expectedNumber","olMidpoints","olMidpoint","clearOlMidpointTooltip","olTooltip","removeOverlay","getTooltipsOfOlGeometry","olTooltips","olCenterTooltip","olCenter","createOlTooltipAtPoint","olPoint","srcGeomType","stopEvent","setPosition","createDrawingInteractionStyle","DrawIconService","getIconsList","getPath","icons","DrawComponent_mat_form_field_47_div_6_Template","DrawComponent_mat_form_field_47_mat_option_10_Template","icon_html_r5","onIconChange","DrawComponent_mat_form_field_47_Template","DrawComponent_button_50_Template","deleteDrawings","selectedFeatures$","IgoFeatureModule","IgoFeatureFormModule","IgoFeatureDetailsModule","IgoDrawModule","DrawComponent","MeasurerDialogComponent","drawStyleService","drawIconService","tableTemplate","draw","drawType","draw$","_activeDrawType","Point","olDrawSource","drawsPresence","buildForm","showTooltips","getToggleLabel","getIcons","getIcon","setActiveDrawType","activeDrawControl","createDrawPointControl","createDrawLineControl","createDrawPolygonControl","createDrawCircleControl","toggleDrawControl","checkStoreCount","drawPointControl","drawLineControl","LineString","drawPolygonControl","Polygon","drawCircleControl","Circle","activeDrawType","createDrawLayerStyle","many","clearTooltipsOfOlGeometry","enableLabel","fillForm","strokeForm","setFill","setStroke","deactivateDrawControl","activateDrawControl","updateLabelOfOlGeometry","drawControl","drawEnd$$","openDialog","addFeatureToStore","rad","featureId","extend4326","center4326","raiseDrawCounter","switchLabel","changeStoreLayerStyle","setProperties","_label","setIcon","onDrawTypeChange","onToggleDrawControl","onToggleTooltips","drawControlIsActive","olModifyInteractionIsActive","olTranslateInteractionIsActive","olDrawInteractionIsActive","removedOlInteractions","modify","olLinearRingsLayer","createOlLinearRingsLayer","removeOlModifyInteraction","removeOlTranslateInteraction","addOlTranslateInteraction","activateTranslateInteraction","addOlModifyInteraction","activateModifyInteraction","olFeature$1","olLinearRingsSource","olModifyInteraction","deactivateModifyInteraction","onModifyStartKey","onModifyStart","onModifyEndKey","onModifyEnd","onModifyKey","olTranslateInteraction","deactivateTranslateInteraction","onTranslateStartKey","onTranslateStart","onTranslateEndKey","onTranslateEnd","onTranslateKey","olOuterGeometry","getOlGeometry","intersectsCoordinate","subscribeToDrawKeyDown","drawKeyDown$$","unsubscribeToDrawKeyDown","subscribeToDrawKeyUp","activateDrawInteraction","drawKeyUp$$","unsubscribeToDrawKeyUp","deactivateDrawInteraction","clearOlLinearRingsSource","addOlLinearRingsLayer","removeOlLinearRingsLayer","linearRingCoordinates","getLinearRing","addLinearRingToOlGeometry","_linearRingCoordinates","updateLinearRingOfOlGeometry","olPolygon","olLinearRing","appendLinearRing","newCoordinates","getLinearRings","setCoordinates","measureAreaUnit","measureLengthUnit","perimeter","MeasurerComponent_ng_container_27_Template","onLengthUnitChange","onAreaUnitChange","measure_r2","measureType","Length","measureUnitsAuto","activeMeasureType","Area","IgoGeometryModule","IgoGeometryFormFieldModule","MeasurerComponent","localFeature","activeLengthUnit","activeAreaUnit","displayDistance","displayLines","displayAreas","hasArea$","measure$","_activeMeasureType","minSegmentLength","setActiveMeasureType","createModifyControl","updateTooltipsOfOlSource","checkDistanceAreaToggle","deactivateModifyControl","freezeStore","onDisplayDistance","onDisplayLines","onDisplayAreas","table","activeOlGeometry","updateTooltipsOfOlGeometry","sum","modifyControl","_olFeature","activateModifyControl","setOlGeometry","onFeatureAddedKey","updateMeasureOfOlGeometry","onFeatureRemovedKey","selectedFeatures$$","objectsExists","objectExist","deactivateStrategyOfType","drawStart$$","drawChanges$$","onDrawChanges","clearTooltipsOfOlSource","clearMeasures","finalizeMeasureOfOlGeometry","modifyStart$$","modifyEnd$$","modifyChanges$$","onModifyChanges","_measure","olMidpointsTooltips","olMidpointPoint","midpointsLength","midpointCoordinate","getCoordinateAt","typeGeom","updateOlTooltip","centerCoordinate","shouldShowTooltip","addOverlay","forEachFeature","showTooltipsOfOlGeometry","_unit","_type","computeTooltipInnerHTML","onMeasureTypeChange","onToggleDisplayLines","onToggleDisplayDistance","onToggleDisplayAreas","onToggleMeasureUnitsAuto","onCalculateClick","onDeleteClick","TimeFilterButtonComponent_button_0_Template","TimeFilterButtonComponent_div_1_igo_time_filter_item_2_Template","TimeFilterButtonComponent_div_1_Template","timeFilterCollapse","TimeFilterButtonComponent","TimeFilterListComponent_ng_template_1_Template","layer_r1","TimeFilterListComponent","OgcFilterableItemComponent_mat_icon_1_Template","toggleFiltersCollapsed","filtersCollapsed","_c0$c","OgcFilterableItemComponent_h4_2_Template","toggleLegendOnClick","OgcFilterableItemComponent_button_3_Template","_r12","addFilterToSequence","addFilterDisabled","_c1$6","OgcFilterableItemComponent_button_4_Template","inResolutionRange$","OgcFilterableItemComponent_div_7_igo_layer_legend_2_Template","ctx_r16","OgcFilterableItemComponent_div_7_Template","showLegend$","OgcFilterableItemComponent_section_9_Template","changeOgcFilterType","OgcFilterableItemComponent","ogcFilterService","defaultLogicalParent","hasActiveSpatialFilter","filtersAreEditable","hasSelector","refreshFilters","setOgcWMSFiltersOptions","setOgcWFSFiltersOptions","lastRunOgcFilter","lastLevel","firstFieldName","includedFields","excludeFromOgcFilters","datasourceOptions","computeAllowedOperators","firstOperatorName","force","activeFilters","af","rebuiltIgoOgcFilterObjectFromSequence","rebuildFilter","ogcDataSource","ogcLayer","isAdvancedOgcFilters","changeOgcFiltersAdvancedOgcFilters","toggleLegend","refreshFunc","OgcFilterableListComponent_ng_template_1_Template","OgcFilterableListComponent","OgcFilterButtonComponent_button_0_Template","OgcFilterButtonComponent_div_1_igo_ogc_filterable_item_2_Template","OgcFilterButtonComponent_div_1_Template","ogcFilterCollapse","OgcFilterButtonComponent","OGCFilterTimeService","currentPushButtonGroup","gr","cntPushButtons","cb","button","currentCheckboxGroup","cntCheckboxes","currentRadioButtonsGroup","cntRadioButtons","radio","currentSelectGroup","cntSelect","moment$1","defaultStepMillisecond","toDate","currentFilter","asMilliseconds","months","weeks","days","hours","week","newDate","stepMillisecond","subtract","SpatialFilterTypeComponent_mat_option_8_Template","queryType_r1","SpatialFilterTypeComponent","queryType","selectedTypeIndex","spatialType","eventQueryType","zoneChange","zoneWithBufferChange","bufferChange","measureUnitChange","_store","selectedQueryType","zone","onTypeChange","SpatialFilterItemComponent_mat_slide_toggle_5_Template","onDrawControlChange","SpatialFilterItemComponent_mat_slide_toggle_6_Template","onfreehandControlChange","freehandDrawIsActive","SpatialFilterItemComponent_div_7_mat_option_7_Template","measureUnit_r13","SpatialFilterItemComponent_div_7_Template","onMeasureUnitChange","bufferFormControl","measureUnit","measureUnits","SpatialFilterItemComponent_div_8_mat_option_7_Template","measureUnit_r17","SpatialFilterItemComponent_div_8_Template","radiusFormControl","SpatialFilterItemComponent_mat_radio_button_13_Template","_r23","onItemTypeChange","item_r21","SpatialFilterItemComponent_div_14_mat_header_cell_3_Template","SpatialFilterItemComponent_div_14_mat_header_cell_5_Template","_r31","selectedThematics","SpatialFilterItemComponent_div_14_mat_header_row_6_Template","SpatialFilterItemComponent_div_14_mat_row_7_Template","SpatialFilterItemComponent_div_14_mat_tree_node_9_Template","_r35","node_r33","onToggleChange","ctx_r28","SpatialFilterItemComponent_div_14_mat_nested_tree_node_10_Template","node_r37","onToggleClick","childrensToggle","treeControl","isExpanded","hasChildrenSelected","SpatialFilterItemComponent_div_14_Template","hasChild","SpatialFilterItemComponent_button_16_Template","_r42","clearSearch","disabledClearSearch","SpatialFilterItemComponent_button_17_Template","_r44","clearDrawZone","IgoFilterModule","SpatialFilterItemComponent","ExportService","spatialFilterService","allLayers","toggleSearch","itemTypeChange","thematicChange","drawZoneEvent","bufferEvent","radiusEvent","freehandControl","clearButtonEvent","clearSearchEvent","openWorkspace","Thematics","selectedItemType","node","childrens","thematics","value$","drawGuide$","overlayStyle$","drawStyle$","geometryTypeField","geometryTypes","drawGuideField","drawGuide","drawGuidePlaceholder","PointStyle","overlayStyle","PolyStyle","_thematicLength","loadThematicsList","limits","child","value$$","drawZone","radiusChanges$$","bufferChanges$$","loadBufferGeometry","featureGeom","zoneWithBuffer","detach","isPolygon","isPoint","collapse","expand","numSelected","numNodes","bool","selectedThematicsName","deselect","nodeSelected","isPredefined","thematicLength","formValue","export","toggleSearchButton","clearButton","disableSearchButton","ExportError","ExportInvalidFileError","setPrototypeOf","ExportNothingToExportError","ExportFormat","EncodingFormat","aggregateInComment","ogreUrl","gpxAggregateInComment","encoding","exportOlFeatures","generateFeature","exportAsync","GPX","generateAggratedFeature","comment","nothingToExport","ogreFormats","noOgreFallbacks","exportToFile","exportWithOgre","content","fileName","writeFeatures","uri","setAttribute","encodingType","featuresText","UTF8","acceptCharset","enctype","LATIN1","geojsonField","outputNameField","outputName","ogreFormat","outputFormatField","submit","GML","KML","Shapefile","CSVcomma","CSVsemicolon","ImportError","ImportInvalidFileError","ImportUnreadableFileError","ImportNothingToImportError","ImportSizeError","ImportSRSError","handleFileImportSuccess","file","styleListService","computeLayerTitleFromFile","distance","getStyleList","messageTitle","handleInvalidFileImportError","handleUnreadbleFileImportError","handleSizeFileImportError","sizeMb","handleSRSImportError","getFileExtension","StyleListService","ImportService","configFileSizeMb","clientSideFileSizeMax","importAsync","extension","allowedMimeTypes","allowedZipMimeTypes","allowedExtensions","importFile","importFileWithOgre","importer","getFileImporter","parseFeaturesFromFile","readAsText","FormData","append","parseFeaturesFromGeoJSON","errMsg","msg","GeoJSON$1","writeFeatureObject","styleList","baseStyleList","styleListResponse","ImportExportComponent_form_8_mat_option_7_p_1_Template","projection_r6","translateKey","ImportExportComponent_form_8_mat_option_7_p_2_Template","ImportExportComponent_form_8_mat_option_7_Template","ImportExportComponent_form_8_Template","inputProj","importFiles","files","importForm","projections$","invalid","loading$","_c0$f","ImportExportComponent_section_9_Template","fileSizeMb","ImportExportComponent_section_10_Template","ImportExportComponent_form_12_span_9_Template","ctx_r18","ImportExportComponent_form_12_mat_option_10_mat_slide_toggle_4_Template","_r28","layer_r25","onlySelectedClick","inLayersIdToExportSelectionOnly","onlySelected","_c1$9","ImportExportComponent_form_12_mat_option_10_Template","layerHasSelectedFeatures","ImportExportComponent_form_12_ng_container_18_mat_option_1_Template","format_r37","ImportExportComponent_form_12_ng_container_18_Template","ctx_r20","formats$","ImportExportComponent_form_12_mat_option_20_Template","ImportExportComponent_form_12_div_22_Template","ImportExportComponent_form_12_div_23_ng_container_6_mat_option_1_Template","encoding_r40","ImportExportComponent_form_12_div_23_ng_container_6_Template","encodings$","ImportExportComponent_form_12_div_23_Template","ImportExportComponent_form_12_div_24_Template","ImportExportComponent_form_12_Template","ctx_r43","handleExportFormSubmit","getLayerTitleById","exportableLayers$","forceNaming","ImportExportComponent","importService","exportService","controlFormat","espgCodeRegex","popupChecked","previousLayerSpecs$","selectFirstProj","_projectionsLimitations","selectedMode","selectMode","exportOptions$","exportOptionsChange","loadConfig","computeProjections","exportOptions$$","exportOptions","computeFormats","formLayer$$","handlePopup","layersId","handlePreviousLayerSpecs","selectedLayers","previousSpecs","formats$$","formats","encodings$$","encodings","exportableLayers$$","projectionsLimitations","projectionsConstraints","projFromConfig","nad83","wgs84","webMercator","utm","mtm","minZone","maxZone","computeProjectionsConstraints","configProjection","wksFromLayerId","wksFromLayer","getWorkspaceByLayerId","firstBy","layersWithSelection","specs","onFileImportSuccess","onFileImportError","preCheck","p2","closed","onPopupBlockedError","popupAllowed","filename","dSOptions","wks","featureInMapExtent","geomTypes","featureGeomType","currentGeomType","geomType","onFileExportError","onFileExportSuccess","extraMessage","loadEncodings","appliedformats","formatsType","onlyUrl","onlyVector","vectorAndUrl","customList","allowedFormats","validateListFormat","validatedListFormat","commonFormats","layersWithCustomFormats","previousCustomListFormats","finalFormats","GeoJSON","onImportExportChange","STYLELIST_OPTIONS","provideStyleListOptions","styleListFactory","IgoMeasureModule","IgoMeasurerModule","IgoMapModule","IgoImportExportModule","IgoStyleListModule","IgoOverlayModule","OverlayDirective","OverlayService","PrintService","OverlayAction","features$","overlayService","features$$","handleFeatures","PrintOutputFormat","PrintPaperFormat","PrintOrientation","PrintResolution","PrintSaveImageFormat","PrintLegendPosition","zipFile","paperFormat","orientation","doc","dimensions","internal","margins","titleSizeResults","getTitleSize","addTitle","subtitle","subtitleSizeResult","titleH","getSubTitleSize","addSubTitle","showProjection","showScale","addProjScale","addComment","addMap","addScale","handleMeasureLayer","legendPosition","addLegendSamePage","addLegend","saveDoc","getOverlayContainer","mapOverlayMeasuresHTML","backgroundColor","canvasOverlayHTMLMeasures","addCanvas","map$1","legends","getLegend","legendUrls","getScale","images$","getDataImage","dataImage","htmlImg","dataImages","doZipFile","getLayersLegendHtml","toPromise","div","top","timeout","canvas","useCORS","generateCanvaFileToZip","saveCanvasImageAsFile","pageWidth","pageHeight","titleSize","setFont","setFontType","getTextWidth","titleMarginLeft","titleWidth","getStringUnitWidth","scaleFactor","titleTailleMinimale","titleFontSize","subtitleSize","subtitleWidth","titleMarginTop","setFontSize","subtitleFontSize","subtitleMarginLeft","subtitleMarginTop","heightPixels","textProjScale","imageSize","addPage","imgData","toDataURL","addImage","marginsLegend","mapSize","mapOverlayHTML","getOverlayContainerStopEvent","OverlayHTMLButton","allowTaint","canvasOverlayHTML","nbFileToProcess","ms","getImageSizeToFitPdf","rect","widthPixels","once","canvases","getViewport","mapStatus$$","mapStatus","renderMap","oldCanvas","newCanvas","newContext","getContext","positionHCanvas","positionWProjScale","commentWidth","measureText","positionHProjScale","commentNbLine","ceil","positionHComment","fillStyle","fillRect","fillText","projText","scaleText","mapScale","positionLastBlank","CommentLengthToCut","commentCurrentLine","positionFirstCutChar","drawImage","tiwContent","getWorldFileInformation","addFileToZip","saveFileProcessing","renderSync","updateSize","save","returnPromise","getHeight","canHeight","canWidth","heightRatio","widthRatio","maxRatio","currentResolution","blobFormat","that","msSaveBlob","msToBlob","toBlob","getZipFile","generateAsync","PrintFormComponent_mat_option_28_Template","legendPosition_r6","PrintFormComponent_mat_option_34_Template","outputFormat_r7","PrintFormComponent_mat_option_40_Template","paperFormat_r8","PrintFormComponent_mat_option_46_Template","imageFormat_r9","PrintFormComponent_mat_option_52_Template","resolution_r10","PrintFormComponent_mat_option_58_Template","orientation_r11","IgoPrintModule","PrintComponent","PrintFormComponent","outputFormats","paperFormats","orientations","imageFormats","legendPositions","isPrintService","imageFormat","imageFormatField","Jpeg","onlySelf","Pdf","paperFormatField","Letter","orientationField","landscape","resolutionField","legendPositionField","none","titleField","subtitleField","commentField","showProjectionField","showScaleField","showLegendField","doZipFileField","toggleImageSaveProp","handleFormSubmit","printService","_outputFormat","_paperFormat","_orientation","_imageFormat","_legendPosition","_resolution","print","defineNbFileToProcess","nbRequests","downloadMapImage","getLayersLegendImage","querySearchSourceFactory","IgoQueryModule","SearchSourceService","getSources","sourceCanSearch","sourceCanReverseSearch","reverseSearch","sourceCanReverseSearchAsSummary","findDiff","str1","str2","computeTermSimilarity","caseSensitive","termFrom","termTo","totalDiff","delta","SearchService","searchSourceService","termIsValid","lonLat","coordStr","negativeLon","degreesLon","minutesLon","secondsLon","directionLon","decimalLon","negativeLat","degreesLat","minutesLat","secondsLat","directionLat","decimalLat","projectionStr","opts","projectionRegex","lonLatPattern","lonLatRegex","dmsCoord","dmsCoordPattern","dmsRegex","patternUtm","utmRegex","patternMtm","mtmRegex","ddCoord","patternDd","ddRegex","dmdCoord","patternDmd","dmdRegex","patternBELL","bellRegex","mmPattern","mmRegex","isXYCoords","toLocaleUpperCase","trim","epsgUtm","epsgMtm","forceNA","dest","getEnabledOnly","getEnabledSources","searchType","asPointerSummary","reverseSourceFonction","reverseSearchSources","DirectionsSource","DirectionsSourceService","directionsSourceServiceFactory","DirectionsFormService","DirectionsService","directionsSourceService","directionsOptions","routeSource","stops","stopsCoordinates","stop","stopCoordinates","DirectionsFormComponent_div_1_button_4_Template","_r16","i_r7","geolocateStop","DirectionsFormComponent_div_1_button_8_Template","clearStop","DirectionsFormComponent_div_1_mat_optgroup_11_mat_option_1_Template","_r25","result_r22","chooseProposal","DirectionsFormComponent_div_1_mat_optgroup_11_Template","source_r20","DirectionsFormComponent_div_1_button_12_Template","removeStop","DirectionsFormComponent_div_1_Template","keyup","prevent","stop_r6","directionsText","stopPoint","stopProposals","DirectionsFormComponent_button_6_Template","zoomRoute","DirectionsFormComponent_button_7_Template","resetForm","DirectionsFormComponent_button_8_Template","copyDirectionsToClipboard","DirectionsFormComponent_button_9_Template","copyLinkToClipboard","DirectionsFormComponent_div_10_mat_form_field_1_mat_option_3_Template","pathDirections_r45","cnt_r46","ctx_r44","formatDistance","formatDuration","DirectionsFormComponent_div_10_mat_form_field_1_Template","_r48","changeRoute","activeRoute","routesResults","DirectionsFormComponent_div_10_mat_divider_2_Template","DirectionsFormComponent_div_10_mat_list_item_8_Template","_r53","step_r50","showSegment","cnt_r51","formatStep","cssClass","instruction","DirectionsFormComponent_div_10_Template","DirectionsFormComponent","directionsService","searchService","directionsFormService","changeDetectorRefs","invalidKeys","routesQueries$$","stream$","activeRoute$","focusOnStop","focusKey","stopsStore$","activeRouteDescription","directionsUrl","_activeRoute","directionsToText","_stopsStore","_routeFromFeatureDetail","showRouteGeometry","browserLanguage","stopsForm","directionsType","directionsMode","stopOrderPriority","directionsFixedStartEnd","array","createStop","initStores","initOlInteraction","subscribeToFormChange","handleTermChanged","routeFromFeatureDetail","setStops","stopsStore","handleLocationProposals","writeStopsToFormService","routeResponse","unsubscribeRoutesQueries","unlistenSingleClick","freezeStores","loadingStrategy","stopMarker","routeStore","selectedStopFeature","selectStop","translateStop","getLength","executeTranslation","selectedRoute","selectCoordinates","addStop","pos","at","addStopOverlay","reverseSearchProposal","overview","translatedPos","translationCoordinates","alternatives","getRoutes","stopIndex","groupedLocations","roundedCoordinates","resultPos","stopsCounts","moveStop","fromValue","stopsArray","directionsPos","getStopOverlayID","deleteStoreFeatureByID","removeAt","nbStops","formatInstruction","maneuver","modifier","bearing_after","exit","stepPosition","directiveFr","directiveEn","directive","lastStep","translatedDirection","translateBearing","translatedModifier","translateModifier","frAggregatedDirection","enAggregatedDirection","coma","bearing","showRouteSegmentGeometry","routeSegmentCoordinates","geojsonGeom","previousVertex","routeFeature","routeExtent","geometryMapProjection","previousRoute","getStopsCoordinates","copy","directionsBody","activeRouteDirective","wayPointList","wayPointsCnt","localCnt","searchProposals","search$$","currentStopIndex","keyIsValid","setTerm","handleMapClick","proposal","geomCoord","getFirstCoordinate","poly","getInteriorPoint","getInteriorPoints","indexPos","clickCoordinates","geolocateCoordinates","stopColor","stopText","stopID","previousStop","stopFeature","stopOpacity","directionsKey","pathname","vertexStyle","stopStyle","routeStyle","IgoDirectionsModule","searchSourceServiceFactory","IChercheSearchResultFormatter","IChercheReverseSearchSource","IChercheSearchSource","IgoHttpParameterCodec","formatter","title$","hashtagsLieuxToKeep","getAllowedTypes","ecmax","computeRequestParams","extractResults","typeSetting","typesMatched","computeOptionsParam","q","computeTerm","xMin","yMin","xMax","yMax","encoder","formatResult","dataToResult","computeProperties","dataType","titleHtml","highlight","title2","title3","score","nextPage","removeKeys","propertiesBlacklist","googleMaps","googleMapsNom","googleLinksProperties","GoogleMaps","getGoogleMapsCoordLink","getGoogleMapsNameLink","municipalite","GoogleStreetView","getGoogleStreetViewLink","routing","h","computeExtent","subtitleHtml","getSubtitle","defaultIChercheSearchResultFormatterFactory","ichercheSearchSourceFactory","ichercheReverseSearchSourceFactory","CoordinatesReverseSearchSource","CoordinatesSearchResultFormatter","dataDMS","lonLatDD","lonLatDMS","int","rawCoord3857","convertedLonLat","igo2CoordFormat","utmName","rawCoordUtm","long","mtmName","rawCoordMtm","rawCoord","numericEpsgCode","roundedCoordString","roundedCoordStringDMS","circleGeometry","polygonGeometry","writer","writeGeometry","OpenStreetMap","getOpenStreetMapLink","defaultCoordinatesSearchResultFormatterFactory","CoordinatesReverseSearchSourceFactory","_projectionService","ILayerSearchSource","ILayerSearchResultFormatter","dataR","allowedKey","out","newKey","computeSearchRequestParams","computeLayerOptions","groupTitle","extractQueryParamsFromSourceUrl","metadataUrl","formatOpt","urls","urlOpt","ilayerSearchResultFormatterFactory","ilayerSearchSourceFactory","SEARCH_TYPES","SearchSelectorComponent_mat_radio_button_8_Template","searchType_r2","getSearchTypeTitle","IgoSearchSelectorModule","SearchSelectorComponent","searchType$","searchTypes","searchTypeChange","setSearchType","searchType$$","onSetSearchType","enableSourcesByType","onSearchTypeChange","SearchSettingsComponent_div_6_Template","checkUncheckAllSources","searchSourcesAllEnabled","SearchSettingsComponent_ng_container_7_button_3_Template","source_r6","SearchSettingsComponent_ng_container_7_button_4_Template","SearchSettingsComponent_ng_container_7_ng_container_7_span_6_mat_radio_button_2_Template","settingValue_r18","setting_r13","settingsValueCheckedRadioButton","ctx_r17","getAvailableHashtagsValues","SearchSettingsComponent_ng_container_7_ng_container_7_span_6_Template","SearchSettingsComponent_ng_container_7_ng_container_7_span_7_div_1_Template","checkUncheckAll","allEnabled","SearchSettingsComponent_ng_container_7_ng_container_7_span_7_mat_checkbox_2_Template","settingValue_r32","settingsValueCheckedCheckbox","SearchSettingsComponent_ng_container_7_ng_container_7_span_7_Template","getAvailableValues","SearchSettingsComponent_ng_container_7_ng_container_7_Template","SearchSettingsComponent_ng_container_7_Template","_r41","onCheckSearchSource","SearchSettingsComponent_span_8_Template","changePointerReverseSearch","changeSearchResultsGeometry","pointerSummaryEnabled","searchResultsGeometryEnabled","IgoSearchSettingsModule","SearchSettingsComponent","hasPointerReverseSearchSource","lastKeyTime","now","searchSourceChange","pointerSummaryStatus","searchResultsGeometryStatus","hasReverseSearchSourcesForPointerSummary","textSearchSources","computeSourcesCheckAllBehavior","settingValue","enabledSourcesCnt","disabledSourcesCnt","computeSettingCheckAllBehavior","getSearchSources","storage","_c0$g","SearchBarComponent_mat_label_3_Template","SearchBarComponent_button_11_Template","searchIcon","SearchBarComponent_button_12_Template","onClearButtonClick","SearchBarComponent_igo_search_selector_14_Template","SearchBarComponent_igo_search_settings_15_Template","onSearchSettingsChange","IgoSearchBarModule","SearchBarComponent","_c1$a","_c2$4","placeholder$","term$","appearance","termSplitter","minLength","searchSelector","searchSettings","searchTermChange","clearFeature","searchSettingsChange","newResults","term$$","stream$$","onSetTerm","handlePlaceholder","doSearch","slug","input","ss","rawTerm","terms","researches$$","research","researches","onResearchCompleted","onKeyup","SearchResultsItemComponent_mat_icon_1_Template","showIcons","SearchResultsItemComponent_h4_2_Template","tooltipHtml","SearchResultsItemComponent_h4_3_Template","SearchResultsItemComponent_button_4_Template","onZoomHandler","SearchResultsItemComponent","_c0$h","_c1$b","withZoomButton","zoomEvent","titleHtmlProperty","_c0$i","SearchResultsComponent_ng_template_1_igo_collapsible_0_ng_container_1_Template","_c1$c","SearchResultsComponent_ng_template_1_igo_collapsible_0_Template","group_r2","computeGroupTitle","SearchResultsComponent_ng_template_1_ng_template_1_ng_container_0_Template","SearchResultsComponent_ng_template_1_ng_template_1_Template","_c2$5","SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template","result_r18","resultFocus","resultUnfocus","onResultSelect","templateSearchToolbar","SearchResultsComponent_ng_template_1_ng_template_3_span_1_Template","_r27","displayMoreResults","SearchResultsComponent_ng_template_1_ng_template_3_Template","results_r15","isMoreResults","SearchResultsComponent_ng_template_1_Template","searchResultMode","Grouped","SearchResultsComponent","SearchResultMode","pageIterator","settingsChange$","resultSelect","moreResults","resultMouseenter","resultMouseleave","_term","_results$","liftResults","settingsChange$$","groupResults","sortByOrder","r1","r2","displayOrder","grouped","sourceResults","stategy","results$","SearchResultAddButtonComponent_button_0_Template","onMouseEvent","isPreview$","inRange$","SearchPointerSummaryDirective","IgoSearchResultsModule","SearchResultAddButtonComponent","layersSubcriptions","mouseInsideAdd","computeTooltip","pointerSearchStore","reverseSearch$$","searchPointerSummaryFeatureId","igoSearchPointerSummaryDelay","igoSearchPointerSummaryEnabled","pointerPositionSummaryMarker","unsubscribeReverseSearch","closestResultByType","computeSummaryClosestFeature","summarizedClosestType","processedSummarizedClosestType","typeIndex","addPointerOverlay","onSearchCoordinate","_results","onSearch","pointerSummary","OgcFilterComponent","IgoSearchModule","OgcFilterWidget","ogcFilterWidgetFactory","IgoOgcFilterModule","WmsWorkspaceService","WfsWorkspaceService","IgoGeoWorkspaceModule","IgoWorkspaceUpdatorModule","WorkspaceSelectorDirective","FeatureWorkspaceService","OsrmDirectionsSource","srcId","workspaceId","createFeatureStore","createTableTemplate","inMapExtentStrategy","inMapResolutionStrategy","selectedRecordStrategy","selectionStrategy","zoomAuto","createFilterInMapExtentOrResolutionStrategy","columnsFromFeatures","col","wmsLinkId","wfsLinkId","linkProperties","hasOgcFilters","clonedLinks","workspaceLayer","wfsWorkspaceService","wmsWorkspaceService","featureWorkspaceService","onLayersChange","editableLayers","layerIsEditable","editableLayersIds","workspacesToAdd","getOrCreateWorkspace","workspacesToRemove","workspaceStore","createWorkspace","wmsWks","inResolutionRange","DirectionsFormat","SourceDirectionsType","weight_name","_name","directionsParams","getRouteParams","extractRoutesData","formatRoute","waypoints","geometries","roadNetworkRoute","stepsUI","legs","leg","sourceType","osrmDirectionsSourcesFactory","CadastreSearchSource","endsWith","numero","lot","computeGeometry","NoLot","wkt","cadastreSearchSourceFactory","NominatimSearchSource","place_id","display_name","osm_type","class","boundingbox","computeTermTags","tag","computeTermSettings","nominatimSearchSourceFactory","StoredQueriesReverseSearchSource","StoredQueriesSearchSource","storedQueriesOptions","storedquery_id","splitPrefix","outputformat","srsname","resultTitle","multipleFieldsQuery","storedqueriesParams","resultArray","extractWFSData","idxEnd","resultTotLenght","patternGml3","geojson","wfsfeatures","splittedTerm","remainingTerm","splitterRegex","wfsversion","longField","latField","longLatParams","doc_type","storedqueriesSearchSourceFactory","storedqueriesReverseSearchSourceFactory","mapExtentStrategyActiveToolTip","noElementSelected","AppSimpleMapComponent","AppSimpleMapModule","AppSimpleMapRoutingModule","pointerCoordDelay","pointerCoord","onPointerMove","AppLayerComponent","AppLayerModule","AppLegendComponent","AppLegendModule","AppOverlayComponent","AppOverlayModule","AppLayerRoutingModule","AppLegendRoutingModule","AppOverlayRoutingModule","setFeatures","AppGeometryComponent","AppGeometryModule","AppFeatureComponent","AppFeatureModule","AppHoverComponent","AppHoverModule","AppMeasureComponent","AppMeasureModule","AppDrawComponent","AppDrawModule","AppGeometryRoutingModule","AppFeatureRoutingModule","AppHoverRoutingModule","pointerHoverFeatureDelay","circle","AppMeasureRoutingModule","AppDrawRoutingModule","AppQueryComponent","AppQueryModule","AppCatalogComponent","AppCatalogModule","AppQueryRoutingModule","feature$","feature1","feature2","feature3","handleQueryResults","AppCatalogRoutingModule","catalogStore","catalogItemStore","loadCatalogs","loadCatalogItems","onCatalogSelectChange","ContextService","TypePermission","context$","contexts$","ours","defaultContextId$","editedContext$","importedContext","toolsChanged$","mapViewFromRoute","basePath","contextListFile","defaultContextUri","readParamsFromRoute","hasAuthService","handleContextsChange","loadContexts","found","_defaultContextUri","permissions","defaultContextId","imported","contexts","contextCreated","permission","write","contextCloned","contextId","toolId","profil","typePermission","permissionId","urlBase","resBase","resMerge","l2","t2","err2","getLocalContexts","loadFct","direct","getDefault","_context","addContextToList","setContext","loadContext","contextParam","getContextByUri","handleContextMessage","currentContext","keepCurrentView","setEditedContext","global","extraFeatures","currentLayers","layerFound","contextLayer","catalogLayer","Cluster","contextMessage","removeAllAreNotError","contextToLoad","getDetails","getLocalContext","permissionError","titleContext","keepCurrentContext","editedContext","findContext","loadDefaultContext","editedFound","contextSimplifie","LayerContextDirective","MapContextDirective","IgoContextImportExportModule","BookmarkDialogComponent","contextService","controlsContext","context$$","handleContextChange","viewContext","scaleLineOption","minWidth","contextLayers","removeLayersOnContextChange","queryParams$$","removeAllLayers","layersAndIndex$","computeLayerVisibilityFromUrl","currentLayerid","contextParams","visibleOnLayersParams","visibleOffLayersParams","visiblelayers","invisiblelayers","ContextListControlsEnum","ContextItemComponent_button_1_mat_icon_2_Template","ContextItemComponent_button_1_img_3_Template","iconImage","ContextItemComponent_button_1_Template","favoriteClick","ContextItemComponent_div_4_button_1_Template","ContextItemComponent_div_4_button_4_Template","managePermissions","ContextItemComponent_div_4_button_5_Template","ContextItemComponent_div_4_button_6_Template","edit","ContextItemComponent_div_4_button_7_Template","ctx_r22","ContextItemComponent_div_4_button_8_Template","ctx_r24","ContextItemComponent_div_4_button_9_Template","ContextItemComponent_div_4_Template","_r29","canShare","ContextItemComponent","_default","favorite","manageTools","delete","ContextListComponent_mat_form_field_1_button_3_Template","clearFilter","ContextListComponent_mat_form_field_1_Template","ContextListComponent_button_2_Template","toggleSort","ContextListComponent_button_3_Template","ContextListComponent_igo_actionbar_4_Template","ContextListComponent_button_5_Template","ContextListComponent_ng_container_8_button_3_Template","user_r17","ContextListComponent_ng_container_8_button_4_Template","ContextListComponent_ng_container_8_mat_checkbox_7_Template","child_r24","userSelection","ctx_r21","getPermission","ContextListComponent_ng_container_8_Template","indeterminate","childs","ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template","context_r36","hideContext","showContext","ctx_r35","selectedContext","ContextListComponent_ng_template_14_igo_collapsible_0_Template","groupContexts_r32","titleMapping","ContextListComponent_ng_template_14_1_ng_template_0_Template","_r56","context_r54","ctx_r53","ContextListComponent_ng_template_14_1_Template","ContextListComponent_ng_template_14_Template","IgoContextManagerModule","IgoContextMapButtonModule","PoiService","ContextListBindingDirective","ContextListComponent","StorageState","ToolState","ImportExportState","contextsInitial","_contexts","showHiddenContexts","filterPermissionsChanged","shared","public","showHidden","showContextFilter","thresholdToFilter","_selectedContext","_defaultContextId","filterContextsList","createContext","sortedAlpha","sortContextsList","updateContexts","filterNormalized","publics","totalLength","contextsList","parentPermission","childrenPermission","showFilter","users","confirmDialogService","loadEditedContext","contextFromMap","getContextFromMap","msgSuccess","setDefault","confirm","titleD","contexts$$","defaultContextId$$","selectedContext$$","authenticate","getProfilByUser","profils","cur","onSelect","onEdit","onSave","onFavorite","onManageTools","onManagePermissions","onDelete","onClone","onCreate","onShowContext","onHideContext","ImportExportType","ImportExportMode","importExportType$","selectedMode$","importExportState","openSidenav$","toolToActivate","setsExportOptions","setMode","igoStorageService","handleZoomAuto","IgoAppSearchModule","IgoAppSearchResultsToolModule","IgoAppSearchBarModule","SearchState","WorkspaceState","WfsActionsService","FeatureActionsService","storageState","toolState","maximize$","zoomAuto$","storageChange$$","rowsInMapExtentCheckCondition$","selectOnlyCheckCondition$","buildActions","storageChange","filterStrategy","filterSelectionStrategy","toolToActivateFromOptions","ogcFilterWidget","activateWidget","featureActionsService","wfsActionsService","workspacePanelExpanded","workspaceEnabled$","workspaceMaximize$","actionMaximize$$","activeWorkspaceWidget$","workspace$","initWorkspaces","workspaces","loadActions","maximized","setWorkspaceIsMaximized","activeWorkspace$$","activeWorkspaceWidget$$","rowsInMapExtentCheckCondition$$","rowsInMapExtent","selectOnlyCheckCondition$$","selectOnly","wksFromId","teardownWorkspaces","searchOverlayStyle","searchOverlayStyleSelection","searchOverlayStyleFocus","searchTermSplitter$","searchTerm$","searchDisabled$","searchResultsGeometryEnabled$","searchSettingsChange$","selectedResult$","createCustomFilterTermStrategy","searchTerm","AppSearchComponent","AppSearchModule","AppPrintComponent","AppPrintModule","AppImportExportComponent","AppImportExport","AppDirectionsComponent","AppDirectionsModule","AppTimeFilterComponent","AppTimeFilterModule","AppOgcFilterComponent","AppOgcFilterModule","AppSearchRoutingModule","searchState","osmLayer","searchStore","selectedFeature","tryAddFeatureToMap","onOpenGoogleMaps","onOpenGoogleStreetView","mapPosition","getCoordinateFromPixel","contextmenuPoint","mapBrowser","getBoundingClientRect","scrollY","left","scrollX","onContextMenuOpen","onPointerSummaryStatusChange","onSearchTermChange","removeFeatureFromMap","onResultFocus","AppPrintRoutingModule","AppImportExportRoutingModule","AppDirectionsRoutingModule","AppTimeFilterRoutingModule","YEAR","SLIDER","timeInterval","AppOgcFilterRoutingModule","displayFormat","interval","restrictToStep","vertical","AppSpatialFilterComponent","AppSpatialFilterModule","AppSpatialFilterRoutingModule","selectedFeature$","spatialListStore","loadFilterList","loadThematics","tryAddFeaturesToMap","loadFilterItem","idPoint","idLinePoly","featuresPoint","featuresLinePoly","tryAddPointToMap","tryAddLayerToMap","zoomToFeatureExtent","_internal","featuresOl","getOutputType","getOutputQueryType","onZoneChange","getOutputToggleSearch","getOutputClearSearch","AppWorkspaceComponent","AppWorkspaceModule","AppWorkspaceRoutingModule","workspaceState","Instant","selectedWorkspace$","workspacePaginator","AppContextComponent","AppContextModule","AppModule","AppComponent","AppRoutingModule","AppContextRoutingModule","redirectTo","pathMatch","useHash","changeDetectorRef","media","themeClass","mobileQuery","matchMedia","_mobileQueryListener","detectOldBrowser","removeEventListener","satisfies","ie","chrome","firefox","getBrowser","domSanitizer","addSvgIconSet","webpackEmptyAsyncContext"],"mappings":"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","sourceRoot":"webpack:///","sourcesContent":["var map = {\n\t\"./en.auth.json\": \"SylJ\",\n\t\"./en.common.json\": \"MDgV\",\n\t\"./en.context.json\": \"yhJE\",\n\t\"./en.core.json\": \"3sPO\",\n\t\"./en.geo.json\": \"DVs1\",\n\t\"./en.integration.json\": \"tshS\",\n\t\"./en.json\": \"fNJn\",\n\t\"./fr.auth.json\": \"S9Br\",\n\t\"./fr.common.json\": \"LoTT\",\n\t\"./fr.context.json\": \"5SdO\",\n\t\"./fr.core.json\": \"VPSe\",\n\t\"./fr.geo.json\": \"gy/B\",\n\t\"./fr.integration.json\": \"ACVS\",\n\t\"./fr.json\": \"tqkM\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"1pZX\";","interface Environment {\n  production: boolean;\n  igo: any;\n}\n\nexport const environment: Environment = {\n  production: true,\n  igo: {\n    projections: [\n      {\n        code: 'EPSG:32198',\n        alias: 'Quebec Lambert',\n        def:\n          '+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs',\n        extent: [-886251.0296, 180252.9126, 897177.3418, 2106143.8139]\n      }\n    ],\n    auth: {\n      intern: {\n        enabled: true\n      },\n      allowAnonymous: true\n    },\n    interactiveTour: {\n      tourInMobile: true\n    },\n    importExport: {\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ogre'\n    },\n    language: {\n      prefix: './locale/'\n    },\n    catalog: {\n      sources: [\n        {\n          id: 'Gououvert',\n          title: 'Gouvouvert',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi'\n        },\n        {\n          id: 'DefiningInfoFormat',\n          title: 'Defining info_format',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          queryFormat: {\n            html: '*',\n            'application/json': [\n              'stations_meteoroutieres',\n              'histo_stations_meteoroutieres'\n            ]\n          },\n          queryHtmlTarget: 'iframe',\n          count: 30\n        },\n        {\n          id: 'catalogwithregex',\n          title: 'Filtered catalog by regex',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          regFilters: ['zpegt']\n        },\n        {\n          id: 'catalogwithtooltipcontrol',\n          title: 'Controling tooltip format',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n          tooltipType: 'abstract' // or title\n        }\n      ]\n    },\n    searchSources: {\n      nominatim: {\n        enabled: false\n      },\n      icherche: {\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche',\n        order: 2,\n        enabled: true,\n        params: {\n          limit: '8'\n        }\n      },\n      coordinatesreverse: {\n        showInPointerSummary: true\n      },\n      icherchereverse: {\n        showInPointerSummary: true,\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/terrapi',\n        order: 3,\n        enabled: true\n      },\n      ilayer: {\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/layers/search',\n        order: 4,\n        enabled: true,\n        params: {\n          limit: '5'\n        }\n      }\n    }\n  }\n};\n","import { getParser } from 'bowser';\nimport { Subject } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\n\n/* tslint:disable */\nconst ALPHA = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nclass Base64 {\n    static getByte(s, i) {\n        const x = s.charCodeAt(i);\n        return x;\n    }\n    static getByte64(s, i) {\n        const idx = this.ALPHA.indexOf(s.charAt(i));\n        return idx;\n    }\n    static decode(s) {\n        let pads = 0, i, b10, imax = s.length, x = [];\n        s = String(s);\n        if (imax === 0) {\n            return s;\n        }\n        if (s.charAt(imax - 1) === this.PADCHAR) {\n            pads = 1;\n            if (s.charAt(imax - 2) === this.PADCHAR) {\n                pads = 2;\n            }\n            imax -= 4;\n        }\n        for (i = 0; i < imax; i += 4) {\n            b10 =\n                (this.getByte64(s, i) << 18) |\n                    (this.getByte64(s, i + 1) << 12) |\n                    (this.getByte64(s, i + 2) << 6) |\n                    this.getByte64(s, i + 3);\n            x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 255, b10 & 255));\n        }\n        switch (pads) {\n            case 1:\n                b10 =\n                    (this.getByte64(s, i) << 18) |\n                        (this.getByte64(s, i + 1) << 12) |\n                        (this.getByte64(s, i + 2) << 6);\n                x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 255));\n                break;\n            case 2:\n                b10 = (this.getByte64(s, i) << 18) | (this.getByte64(s, i + 1) << 12);\n                x.push(String.fromCharCode(b10 >> 16));\n                break;\n        }\n        return x.join('');\n    }\n    static encode(s) {\n        s = String(s);\n        let i, b10, x = [], imax = s.length - s.length % 3;\n        if (s.length === 0) {\n            return s;\n        }\n        for (i = 0; i < imax; i += 3) {\n            b10 =\n                (this.getByte(s, i) << 16) |\n                    (this.getByte(s, i + 1) << 8) |\n                    this.getByte(s, i + 2);\n            x.push(this.ALPHA.charAt(b10 >> 18));\n            x.push(this.ALPHA.charAt((b10 >> 12) & 63));\n            x.push(this.ALPHA.charAt((b10 >> 6) & 63));\n            x.push(this.ALPHA.charAt(b10 & 63));\n        }\n        switch (s.length - imax) {\n            case 1:\n                b10 = this.getByte(s, i) << 16;\n                x.push(this.ALPHA.charAt(b10 >> 18) +\n                    this.ALPHA.charAt((b10 >> 12) & 63) +\n                    this.PADCHAR +\n                    this.PADCHAR);\n                break;\n            case 2:\n                b10 = (this.getByte(s, i) << 16) | (this.getByte(s, i + 1) << 8);\n                x.push(this.ALPHA.charAt(b10 >> 18) +\n                    this.ALPHA.charAt((b10 >> 12) & 63) +\n                    this.ALPHA.charAt((b10 >> 6) & 63) +\n                    this.PADCHAR);\n                break;\n        }\n        return x.join('');\n    }\n}\nBase64.PADCHAR = '=';\nBase64.ALPHA = ALPHA;\n\nconst userAgent = getParser(window.navigator.userAgent);\n\nclass Clipboard {\n    static copy(element) {\n        let successful = false;\n        if (typeof element === 'string') {\n            const textArea = Clipboard.createTextArea(element);\n            Clipboard.selectText(textArea);\n            successful = Clipboard.copyTextToClipboard();\n            Clipboard.destroyTextArea(textArea);\n        }\n        else {\n            Clipboard.selectText(element);\n            successful = Clipboard.copyTextToClipboard();\n        }\n        return successful;\n    }\n    static createTextArea(text) {\n        const textArea = document.createElement('textArea');\n        textArea.value = text;\n        document.body.appendChild(textArea);\n        return textArea;\n    }\n    static destroyTextArea(textArea) {\n        document.body.removeChild(textArea);\n    }\n    static selectText(textArea) {\n        if (userAgent.getOSName() === 'iOS') {\n            const oldContentEditable = textArea.contentEditable;\n            const oldReadOnly = textArea.readOnly;\n            const range = document.createRange();\n            const selection = window.getSelection();\n            textArea.contenteditable = true;\n            textArea.readonly = false;\n            range.selectNodeContents(textArea);\n            selection.removeAllRanges();\n            selection.addRange(range);\n            textArea.setSelectionRange(0, 999999);\n            textArea.contentEditable = oldContentEditable;\n            textArea.readOnly = oldReadOnly;\n        }\n        else {\n            textArea.select();\n        }\n    }\n    static copyTextToClipboard() {\n        if (!(userAgent.getOSName() === 'iOS' && userAgent.compareVersion('<10'))) {\n            return document.execCommand('copy');\n        }\n        return false;\n    }\n}\n\nclass StringUtils {\n    static diff(s1, s2, p = 4) {\n        if (!s1 && !s2) {\n            return '';\n        }\n        if (!s1) {\n            return '<span class=\"inserted\">' + s2 + '</span>';\n        }\n        if (!s2) {\n            return '<span class=\"deleted\">' + s1 + '</span>';\n        }\n        s1 = s1.toString();\n        s2 = s2.toString();\n        const changeData = StringUtils.getChanges(s1, s2, '', p);\n        const nextS = s2.slice(changeData.mtc.length + changeData.ins.length + changeData.sbs.length); // remaining part of \"s\"\n        const nextThis = s1.slice(changeData.mtc.length + changeData.del.length + changeData.sbs.length); // remaining part of \"this\"\n        let result = ''; // the glorious result\n        if (changeData.del.length > 0) {\n            changeData.del = '<span class=\"deleted\">' + changeData.del + '</span>';\n        }\n        if (changeData.ins.length > 0) {\n            changeData.ins = '<span class=\"inserted\">' + changeData.ins + '</span>';\n        }\n        result = changeData.mtc + changeData.del + changeData.ins + changeData.sbs;\n        result +=\n            nextThis !== '' || nextS !== ''\n                ? StringUtils.diff(nextThis, nextS, p)\n                : '';\n        return result;\n    }\n    static getMatchingSubstring(s, l, m) {\n        // returns the first matching substring in-between the two strings\n        let i = 0;\n        let match = false;\n        const slen = s.length;\n        const o = { fis: slen, mtc: m, sbs: '' }; // temporary object used to construct the cd (change data) object\n        while (i < slen) {\n            l[i] === s[i]\n                ? match\n                    ? (o.sbs += s[i]) // o.sbs holds the matching substring itsef\n                    : ((match = true), (o.fis = i), (o.sbs = s[i]))\n                : match\n                    ? (i = slen) // stop after the first found substring\n                    : (i = i);\n            ++i;\n        }\n        return o;\n    }\n    static getChanges(s1, s2, m, p) {\n        const isThisLonger = s1.length >= s1.length ? true : false;\n        let [longer, shorter] = isThisLonger ? [s1, s2] : [s2, s1]; // assignment of longer and shorter by es6 destructuring\n        let bi = 0; // base index designating the index of first mismacthing character in both strings\n        while (shorter[bi] === longer[bi] && bi < shorter.length) {\n            ++bi;\n        } // make bi the index of first mismatching character\n        longer = longer.split('').slice(bi); // as the longer string will be rotated it is converted into array\n        shorter = shorter.slice(bi); // shorter and longer now starts from the first mismatching character\n        const len = longer.length; // length of the longer string\n        let cd = {\n            fis: shorter.length,\n            fil: len,\n            sbs: '',\n            mtc: m + s2.slice(0, bi)\n        }; // if exists mtc holds the matching string at the front\n        let sub = { sbs: '' }; // returned substring per 1 character rotation of the longer string\n        if (shorter !== '') {\n            for (let rc = 0; rc < len && sub.sbs.length < p; rc++) {\n                // rc -> rotate count, p -> precision factor\n                sub = StringUtils.getMatchingSubstring(shorter, StringUtils.rotateArray(longer, rc), cd.mtc); // rotate longer string 1 char and get substring\n                sub.fil =\n                    rc < len - sub.fis\n                        ? sub.fis + rc // mismatch is longer than the mismatch in short\n                        : sub.fis - len + rc; // mismatch is shorter than the mismatch in short\n                if (sub.sbs.length > cd.sbs.length) {\n                    cd = sub; // only keep the one with the longest substring.\n                }\n            }\n        }\n        // insert the mismatching delete subsrt and insert substr to the cd object and attach the previous substring\n        [cd.del, cd.ins] = isThisLonger\n            ? [longer.slice(0, cd.fil).join(''), shorter.slice(0, cd.fis)]\n            : [shorter.slice(0, cd.fis), longer.slice(0, cd.fil).join('')];\n        return cd.del.indexOf(' ') === -1 ||\n            cd.ins.indexOf(' ') === -1 ||\n            cd.del === '' ||\n            cd.ins === '' ||\n            cd.sbs === ''\n            ? cd\n            : StringUtils.getChanges(cd.del, cd.ins, cd.mtc, p);\n    }\n    static rotateArray(array, n) {\n        const len = array.length;\n        const res = new Array(array.length);\n        if (n % len === 0) {\n            return array.slice();\n        }\n        else {\n            for (let i = 0; i < len; i++) {\n                res[i] = array[(i + (len + (n % len))) % len];\n            }\n        }\n        return res;\n    }\n}\n\nvar ChangeType;\n(function (ChangeType) {\n    ChangeType[\"ADDED\"] = \"added\";\n    ChangeType[\"DELETED\"] = \"deleted\";\n    ChangeType[\"MODIFIED\"] = \"modified\";\n})(ChangeType || (ChangeType = {}));\n\nclass ChangeUtils {\n    static findChanges(obj1, obj2, ignoreKeys = []) {\n        const items = {\n            added: [],\n            deleted: [],\n            modified: []\n        };\n        if (!obj1 || !obj2) {\n            return items;\n        }\n        const obj1Clone = [...obj1];\n        const obj2Clone = [...obj2];\n        for (const fromItem of obj1Clone) {\n            const index = obj2Clone.findIndex(s => s.id === fromItem.id);\n            if (index === -1) {\n                items.deleted.push({\n                    change: { type: ChangeType.DELETED },\n                    value: fromItem\n                });\n                continue;\n            }\n            const toItem = obj2Clone.splice(index, 1)[0];\n            const fromItemClone = JSON.parse(JSON.stringify(fromItem));\n            const toItemClone = JSON.parse(JSON.stringify(toItem));\n            const keysChanged = ChangeUtils.compareObject(fromItemClone, toItemClone, undefined, ignoreKeys);\n            if (keysChanged.length) {\n                items.modified.push({\n                    change: {\n                        type: ChangeType.MODIFIED,\n                        keysChanged\n                    },\n                    value: fromItemClone,\n                    oldValue: fromItem,\n                    newValue: toItem\n                });\n            }\n        }\n        items.added = obj2Clone.map(itemAdded => {\n            return {\n                change: { type: ChangeType.ADDED },\n                value: itemAdded\n            };\n        });\n        return items;\n    }\n    static compareObject(fromItem, toItem, baseKey, ignoreKeys = []) {\n        const fromItemClone = JSON.parse(JSON.stringify(fromItem));\n        const toItemClone = JSON.parse(JSON.stringify(toItem));\n        const keys = new Set([\n            ...Object.keys(fromItem),\n            ...Object.keys(toItem)\n        ]);\n        let keysChanged = [];\n        keys.forEach(key => {\n            const keyString = baseKey ? `${baseKey}.${key}` : key;\n            if (ignoreKeys.indexOf(keyString) !== -1) {\n                return;\n            }\n            if (Array.isArray(fromItem[key])) {\n                fromItem[key] = fromItem[key].join(',<br>');\n            }\n            if (Array.isArray(toItem[key])) {\n                toItem[key] = toItem[key].join(',<br>');\n            }\n            if (typeof fromItem[key] === 'object' &&\n                typeof toItem[key] === 'object' &&\n                fromItem[key] !== null &&\n                toItem[key] !== null) {\n                keysChanged = keysChanged.concat(this.compareObject(fromItem[key], toItem[key], keyString));\n            }\n            else {\n                if (fromItem[key] !== toItem[key]) {\n                    keysChanged.push({\n                        key: keyString,\n                        oldValue: fromItemClone[key],\n                        newValue: toItemClone[key]\n                    });\n                    fromItem[key] = StringUtils.diff(fromItem[key], toItem[key]);\n                }\n            }\n        });\n        return keysChanged;\n    }\n}\n\n/**\n * Trigger download of a file\n *\n * @param content File content\n * @param mimeType File mime type\n * @param fileName File name\n */\nfunction downloadContent(content, mimeType, fileName) {\n    const uri = `data:${mimeType},${encodeURIComponent(content)}`;\n    downloadFromUri(uri, fileName);\n}\n/**\n * Trigger download of a file\n *\n * @param content File content\n * @param mimeType File mime type\n * @param fileName File name\n */\nfunction downloadFromUri(uri, fileName) {\n    const element = document.createElement('a');\n    element.setAttribute('href', uri);\n    element.setAttribute('download', fileName);\n    element.style.display = 'none';\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n}\n\nclass ObjectUtils {\n    static resolve(obj, key) {\n        const keysArray = key\n            .replace(/\\[/g, '.')\n            .replace(/\\]/g, '')\n            .split('.');\n        let current = obj;\n        while (keysArray.length) {\n            if (typeof current !== 'object') {\n                return undefined;\n            }\n            current = current[keysArray.shift()];\n        }\n        return current;\n    }\n    static isObject(item) {\n        return (item &&\n            typeof item === 'object' &&\n            !Array.isArray(item) &&\n            item !== null &&\n            !(item instanceof Date));\n    }\n    static mergeDeep(target, source, ignoreUndefined = false) {\n        const output = Object.assign({}, target);\n        if (ObjectUtils.isObject(target) && ObjectUtils.isObject(source)) {\n            Object.keys(source)\n                .filter(key => !ignoreUndefined || source[key] !== undefined)\n                .forEach(key => {\n                if (ObjectUtils.isObject(source[key])) {\n                    if (!(key in target)) {\n                        Object.assign(output, { [key]: source[key] });\n                    }\n                    else {\n                        output[key] = ObjectUtils.mergeDeep(target[key], source[key], ignoreUndefined);\n                    }\n                }\n                else {\n                    Object.assign(output, { [key]: source[key] });\n                }\n            });\n        }\n        return output;\n    }\n    static copyDeep(src) {\n        const target = Array.isArray(src) ? [] : {};\n        for (const prop in src) {\n            if (src.hasOwnProperty(prop)) {\n                const value = src[prop];\n                if (value && typeof value === 'object') {\n                    target[prop] = this.copyDeep(value);\n                }\n                else {\n                    target[prop] = value;\n                }\n            }\n        }\n        return target;\n    }\n    static removeDuplicateCaseInsensitive(obj) {\n        const summaryCapitalizeObject = {};\n        const capitalizeObject = {};\n        const upperCaseCount = [];\n        for (const property in obj) {\n            if (obj.hasOwnProperty(property)) {\n                const upperCaseProperty = property.toUpperCase();\n                if (!summaryCapitalizeObject.hasOwnProperty(upperCaseProperty)) {\n                    summaryCapitalizeObject[upperCaseProperty] = [\n                        { [property]: obj[property] }\n                    ];\n                }\n                else {\n                    summaryCapitalizeObject[upperCaseProperty].push({\n                        [property]: obj[property]\n                    });\n                }\n                // counting the number of uppercase lettersMna\n                upperCaseCount.push({\n                    key: property,\n                    count: property.replace(/[^A-Z]/g, '').length\n                });\n            }\n        }\n        for (const capitalizedProperty in summaryCapitalizeObject) {\n            if (summaryCapitalizeObject.hasOwnProperty(capitalizedProperty)) {\n                if (summaryCapitalizeObject.hasOwnProperty(capitalizedProperty)) {\n                    const capitalizedPropertyObject = summaryCapitalizeObject[capitalizedProperty];\n                    if (capitalizedPropertyObject.length === 1) {\n                        // for single params (no duplicates)\n                        const singlePossibility = capitalizedPropertyObject[0];\n                        capitalizeObject[capitalizedProperty] =\n                            singlePossibility[Object.keys(singlePossibility)[0]];\n                    }\n                    else if (capitalizedPropertyObject.length > 1) {\n                        // defining the closest to lowercase property\n                        const paramClosestToLowercase = upperCaseCount\n                            .filter(f => f.key.toLowerCase() === capitalizedProperty.toLowerCase())\n                            .reduce((prev, current) => {\n                            return prev.y < current.y ? prev : current;\n                        });\n                        capitalizeObject[paramClosestToLowercase.key.toUpperCase()] =\n                            obj[paramClosestToLowercase.key];\n                    }\n                }\n            }\n        }\n        for (const property in obj) {\n            if (obj.hasOwnProperty(property)) {\n                delete obj[property];\n            }\n        }\n        for (const property in capitalizeObject) {\n            if (capitalizeObject.hasOwnProperty(property)) {\n                obj[property] = capitalizeObject[property];\n            }\n        }\n    }\n    static removeUndefined(obj) {\n        const output = {};\n        if (ObjectUtils.isObject(obj)) {\n            Object.keys(obj)\n                .filter(key => obj[key] !== undefined)\n                .forEach(key => {\n                if (ObjectUtils.isObject(obj[key]) || Array.isArray(obj[key])) {\n                    output[key] = ObjectUtils.removeUndefined(obj[key]);\n                }\n                else {\n                    output[key] = obj[key];\n                }\n            });\n            return output;\n        }\n        if (Array.isArray(obj)) {\n            return obj.map(o => ObjectUtils.removeUndefined(o));\n        }\n        return obj;\n    }\n    static removeNull(obj) {\n        const output = {};\n        if (ObjectUtils.isObject(obj)) {\n            Object.keys(obj)\n                .filter(key => obj[key] !== null)\n                .forEach(key => {\n                if (ObjectUtils.isObject(obj[key]) || Array.isArray(obj[key])) {\n                    output[key] = ObjectUtils.removeNull(obj[key]);\n                }\n                else {\n                    output[key] = obj[key];\n                }\n            });\n            return output;\n        }\n        if (Array.isArray(obj)) {\n            return obj.map(o => ObjectUtils.removeNull(o));\n        }\n        return obj;\n    }\n    static naturalCompare(a, b, direction = 'asc', nullsFirst) {\n        if (direction === 'desc') {\n            b = [a, (a = b)][0];\n        }\n        // nullsFirst = undefined : end if direction = 'asc', first if direction = 'desc'\n        // nullsFirst = true : always first\n        // nullsFirst = false : always end\n        if (a === null ||\n            a === '' ||\n            a === undefined ||\n            b === null ||\n            b === '' ||\n            b === undefined) {\n            const nullScore = a === b\n                ? 0\n                : a === undefined\n                    ? 3\n                    : b === undefined\n                        ? -3\n                        : a === null\n                            ? 2\n                            : b === null\n                                ? -2\n                                : a === ''\n                                    ? 1\n                                    : -1;\n            if (direction === 'desc') {\n                return nullsFirst !== false ? nullScore : nullScore * -1;\n            }\n            return nullsFirst === true ? nullScore * -1 : nullScore;\n        }\n        const ax = [];\n        const bx = [];\n        a = '' + a;\n        b = '' + b;\n        a.replace(/(\\d+)|(\\D+)/g, (_, $1, $2) => {\n            ax.push([$1 || Infinity, $2 || '']);\n        });\n        b.replace(/(\\d+)|(\\D+)/g, (_, $1, $2) => {\n            bx.push([$1 || Infinity, $2 || '']);\n        });\n        while (ax.length && bx.length) {\n            const an = ax.shift();\n            const bn = bx.shift();\n            const nn = an[0] - bn[0] || an[1].localeCompare(bn[1]);\n            if (nn) {\n                return nn;\n            }\n        }\n        return ax.length - bx.length;\n    }\n    /**\n     * Return true if two object are equivalent.\n     * Objects are considered equivalent if they have the same properties and\n     * if all of their properties (first-level only) share the same value.\n     * @param obj1 First object\n     * @param obj2 Second object\n     * @returns Whether two objects arer equivalent\n     */\n    static objectsAreEquivalent(obj1, obj2) {\n        if (obj1 === obj2) {\n            return true;\n        }\n        const obj1Props = Object.getOwnPropertyNames(obj1);\n        const obj2Props = Object.getOwnPropertyNames(obj2);\n        if (obj1Props.length !== obj2Props.length) {\n            return false;\n        }\n        for (const prop of obj1Props) {\n            if (obj1[prop] !== obj2[prop]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Return a new object with an array of keys removed\n     * @param obj Source object\n     * @param keys Keys to remove\n     * @returns A new object\n     */\n    static removeKeys(obj, keys) {\n        const newObj = Object.keys(obj)\n            .filter(key => keys.indexOf(key) < 0)\n            .reduce((_obj, key) => {\n            _obj[key] = obj[key];\n            return _obj;\n        }, {});\n        return newObj;\n    }\n}\n\n/** Utility function to create a K:V from a list of strings */\nfunction strEnum(o) {\n    return o.reduce((res, key) => {\n        res[key] = key;\n        return res;\n    }, Object.create(null));\n}\n\nfunction S4() {\n    // tslint:disable-next-line: no-bitwise\n    return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\nfunction uuid() {\n    const id = `${S4()}${S4()}-${S4()}-${S4()}-${S4()}-${S4()}${S4()}${S4()}`;\n    return id.toLowerCase();\n}\n\nvar SubjectStatus;\n(function (SubjectStatus) {\n    SubjectStatus[SubjectStatus[\"Error\"] = 0] = \"Error\";\n    SubjectStatus[SubjectStatus[\"Done\"] = 1] = \"Done\";\n    SubjectStatus[SubjectStatus[\"Working\"] = 2] = \"Working\";\n    SubjectStatus[SubjectStatus[\"Waiting\"] = 3] = \"Waiting\";\n})(SubjectStatus || (SubjectStatus = {}));\nclass Watcher {\n    constructor() {\n        this.status$ = new Subject();\n    }\n    get status() {\n        return this._status;\n    }\n    set status(value) {\n        this._status = value;\n        this.status$.next(value);\n    }\n    // tslint:disable-next-line:ban-types\n    subscribe(callback, scope) {\n        this.watch();\n        this.status$$ = this.status$\n            .pipe(distinctUntilChanged())\n            .subscribe((status) => {\n            this.handleStatusChange(status);\n            callback.call(scope, this);\n        });\n    }\n    unsubscribe() {\n        this.unwatch();\n        if (this.status$$ !== undefined) {\n            this.status$$.unsubscribe();\n            this.status$$ = undefined;\n        }\n        this.status = SubjectStatus.Waiting;\n    }\n    handleStatusChange(status) { }\n}\n\n/*\n * Public API Surface of utils\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { Base64, ChangeType, ChangeUtils, Clipboard, ObjectUtils, S4, StringUtils, SubjectStatus, Watcher, downloadContent, downloadFromUri, strEnum, userAgent, uuid };\n//# sourceMappingURL=igo2-utils.js.map\n","import { ɵɵdefineInjectable, ɵsetClassMetadata, Injectable, ɵɵinject, ɵɵdefineNgModule, ɵɵdefineInjector, NgModule, Injector, InjectionToken, APP_INITIALIZER, ɵɵsetNgModuleScope, ɵɵdefineComponent, ɵɵelement, ɵɵproperty, ɵɵpureFunction1, Component, Input, Optional, SkipSelf, ɵɵgetInheritedFactory, Inject, EventEmitter } from '@angular/core';\nimport { NgClass, CommonModule } from '@angular/common';\nimport { HTTP_INTERCEPTORS, HttpClient, HttpErrorResponse, HttpClientModule, HttpResponse } from '@angular/common/http';\nimport { DomSanitizer, HammerGestureConfig, HAMMER_GESTURE_CONFIG, HammerModule } from '@angular/platform-browser';\nimport { MatIconRegistry } from '@angular/material/icon';\nimport { finalize, catchError, map, tap, debounceTime, startWith } from 'rxjs/operators';\nimport { BehaviorSubject, throwError, of, combineLatest, fromEvent } from 'rxjs';\nimport { uuid, ObjectUtils } from '@igo2/utils';\nimport { TranslateLoader, TranslateModule, MissingTranslationHandler, TranslateService } from '@ngx-translate/core';\nimport { SimpleNotificationsComponent, SimpleNotificationsModule, NotificationsService } from 'angular2-notifications';\nimport { ActivatedRoute } from '@angular/router';\nimport { Breakpoints, BreakpointObserver } from '@angular/cdk/layout';\n\nclass ActivityService {\n    constructor() {\n        this.counter$ = new BehaviorSubject(0);\n        this.ids = [];\n    }\n    register() {\n        const id = uuid();\n        this.ids.push(id);\n        this.counter$.next(this.ids.length);\n        return id;\n    }\n    unregister(id) {\n        const index = this.ids.indexOf(id);\n        if (index === -1) {\n            return;\n        }\n        this.ids.splice(index, 1);\n        this.counter$.next(this.ids.length);\n    }\n}\nActivityService.ɵfac = function ActivityService_Factory(t) { return new (t || ActivityService)(); };\nActivityService.ɵprov = ɵɵdefineInjectable({ token: ActivityService, factory: ActivityService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ActivityService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nclass ActivityInterceptor {\n    constructor(activityService) {\n        this.activityService = activityService;\n    }\n    intercept(req, next) {\n        const activity = req.headers.get('activityInterceptor');\n        if (activity) {\n            const actReq = req.clone({\n                headers: req.headers.delete('activityInterceptor')\n            });\n            if (activity === 'false') {\n                return next.handle(actReq);\n            }\n        }\n        const id = this.activityService.register();\n        return next.handle(req).pipe(finalize(() => {\n            this.activityService.unregister(id);\n        }));\n    }\n}\nActivityInterceptor.ɵfac = function ActivityInterceptor_Factory(t) { return new (t || ActivityInterceptor)(ɵɵinject(ActivityService)); };\nActivityInterceptor.ɵprov = ɵɵdefineInjectable({ token: ActivityInterceptor, factory: ActivityInterceptor.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ActivityInterceptor, [{\n        type: Injectable\n    }], function () { return [{ type: ActivityService }]; }, null); })();\n\nclass IgoActivityModule {\n    static forRoot() {\n        return {\n            ngModule: IgoActivityModule,\n            providers: [\n                {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: ActivityInterceptor,\n                    multi: true\n                }\n            ]\n        };\n    }\n}\nIgoActivityModule.ɵmod = ɵɵdefineNgModule({ type: IgoActivityModule });\nIgoActivityModule.ɵinj = ɵɵdefineInjector({ factory: function IgoActivityModule_Factory(t) { return new (t || IgoActivityModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoActivityModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\nconst version = {\n    lib: '1.8.2',\n    releaseDate: 1628779296901\n};\n\nclass ConfigService {\n    constructor(injector) {\n        this.injector = injector;\n        this.config = {};\n    }\n    /**\n     * Use to get the data found in config file\n     */\n    getConfig(key) {\n        return ObjectUtils.resolve(this.config, key);\n    }\n    /**\n     * This method loads \"[path]\" to get all config's variables\n     */\n    load(options) {\n        const baseConfig = options.default || {};\n        if (!options.path) {\n            this.config = baseConfig;\n            return true;\n        }\n        const http = this.injector.get(HttpClient);\n        return new Promise((resolve, _reject) => {\n            http\n                .get(options.path)\n                .pipe(catchError((error) => {\n                console.log(`Configuration file ${options.path} could not be read`);\n                resolve(true);\n                return throwError(error.error || 'Server error');\n            }))\n                .subscribe((configResponse) => {\n                this.config = ObjectUtils.mergeDeep(ObjectUtils.mergeDeep({ version }, baseConfig), configResponse);\n                resolve(true);\n            });\n        });\n    }\n}\nConfigService.ɵfac = function ConfigService_Factory(t) { return new (t || ConfigService)(ɵɵinject(Injector)); };\nConfigService.ɵprov = ɵɵdefineInjectable({ token: ConfigService, factory: ConfigService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ConfigService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: Injector }]; }, null); })();\n\nlet CONFIG_OPTIONS = new InjectionToken('configOptions');\nfunction provideConfigOptions(options) {\n    return {\n        provide: CONFIG_OPTIONS,\n        useValue: options\n    };\n}\nfunction configFactory(configService, options) {\n    return () => configService.load(options);\n}\nfunction provideConfigLoader() {\n    return {\n        provide: APP_INITIALIZER,\n        useFactory: configFactory,\n        multi: true,\n        deps: [ConfigService, CONFIG_OPTIONS]\n    };\n}\n\nclass IgoConfigModule {\n    static forRoot() {\n        return {\n            ngModule: IgoConfigModule,\n            providers: [provideConfigOptions({}), provideConfigLoader()]\n        };\n    }\n}\nIgoConfigModule.ɵmod = ɵɵdefineNgModule({ type: IgoConfigModule });\nIgoConfigModule.ɵinj = ɵɵdefineInjector({ factory: function IgoConfigModule_Factory(t) { return new (t || IgoConfigModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoConfigModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\nclass LanguageLoader {\n    constructor(http, prefix, suffix = '.json', config) {\n        this.http = http;\n        this.prefix = prefix;\n        this.suffix = suffix;\n        this.config = config;\n    }\n    getTranslation(lang) {\n        const translation = require(`../locale/${lang}.json`);\n        const igoLocale$ = of(translation);\n        if (this.config && !this.prefix) {\n            const prefix = this.config.getConfig('language.prefix');\n            this.prefix = !prefix || Array.isArray(prefix) ? prefix : [prefix];\n        }\n        if (!this.prefix || this.prefix.length === 0) {\n            return igoLocale$;\n        }\n        const appLocale$ = this.prefix.map((prefix) => this.http.get(`${prefix}${lang}${this.suffix}`));\n        const locale$ = combineLatest([igoLocale$, ...appLocale$]);\n        return locale$.pipe(map((translations) => {\n            return translations.reduce((acc, current) => ObjectUtils.mergeDeep(acc, current), {});\n        }));\n    }\n}\n\nfunction defaultLanguageLoader(http, config) {\n    return new LanguageLoader(http, undefined, undefined, config);\n}\nfunction provideLanguageLoader(loader) {\n    return {\n        provide: TranslateLoader,\n        useFactory: loader || defaultLanguageLoader,\n        deps: [HttpClient]\n    };\n}\nfunction provideDefaultLanguageLoader(loader) {\n    return {\n        provide: TranslateLoader,\n        useFactory: loader || defaultLanguageLoader,\n        deps: [HttpClient, ConfigService]\n    };\n}\n\nclass IgoMissingTranslationHandler {\n    handle(params) {\n        if (!params.translateService.langs.length) {\n            const error = 'Translations are not yet loaded. \\\n         Check that the LanguageService is injected.';\n            throw new Error(error);\n        }\n        if (params.key.substr(0, 4) === 'igo.') {\n            throw new Error(`The Key \"${params.key}\" is missing in locale file.`);\n        }\n        else {\n            return params.key;\n        }\n    }\n}\n\nclass IgoLanguageModule {\n    static forRoot() {\n        return {\n            ngModule: IgoLanguageModule,\n            providers: [provideDefaultLanguageLoader()]\n        };\n    }\n}\nIgoLanguageModule.ɵmod = ɵɵdefineNgModule({ type: IgoLanguageModule });\nIgoLanguageModule.ɵinj = ɵɵdefineInjector({ factory: function IgoLanguageModule_Factory(t) { return new (t || IgoLanguageModule)(); }, imports: [[\n            TranslateModule.forRoot({\n                missingTranslationHandler: {\n                    provide: MissingTranslationHandler,\n                    useClass: IgoMissingTranslationHandler\n                }\n            })\n        ], TranslateModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoLanguageModule, { imports: [TranslateModule], exports: [TranslateModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoLanguageModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    TranslateModule.forRoot({\n                        missingTranslationHandler: {\n                            provide: MissingTranslationHandler,\n                            useClass: IgoMissingTranslationHandler\n                        }\n                    })\n                ],\n                declarations: [],\n                exports: [TranslateModule]\n            }]\n    }], null, null); })();\n\nconst _c0 = function (a0) { return { closeIcon: a0 }; };\nclass MessageCenterComponent {\n    constructor() {\n        this._options = {};\n    }\n    get options() {\n        return Object.assign({}, MessageCenterComponent.defaultOptions, this._options);\n    }\n    set options(value) {\n        this._options = value;\n    }\n}\nMessageCenterComponent.defaultOptions = {\n    timeOut: 5000,\n    hasCloseIcon: false,\n    showProgressBar: true,\n    pauseOnHover: true,\n    clickToClose: true,\n    maxLength: 100,\n    maxStack: 3,\n    preventDuplicates: true\n};\nMessageCenterComponent.ɵfac = function MessageCenterComponent_Factory(t) { return new (t || MessageCenterComponent)(); };\nMessageCenterComponent.ɵcmp = ɵɵdefineComponent({ type: MessageCenterComponent, selectors: [[\"igo-message-center\"]], inputs: { options: \"options\" }, decls: 1, vars: 4, consts: [[1, \"mat-typography\", 3, \"ngClass\", \"options\"]], template: function MessageCenterComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"simple-notifications\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngClass\", ɵɵpureFunction1(2, _c0, ctx.options.hasCloseIcon))(\"options\", ctx.options);\n    } }, directives: [SimpleNotificationsComponent, NgClass], styles: [\"@charset \\\"UTF-8\\\";[_nghost-%COMP%]     div.simple-notification-wrapper{bottom:0;right:calc(50% - 150px)}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     div.simple-notification-wrapper{left:0;right:0;width:100%}}[_nghost-%COMP%]     div.simple-notification{margin-bottom:5px;min-height:50px;padding-left:45px;padding-right:25px}[_nghost-%COMP%]     div.simple-notification.noIcon{padding-left:25px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     div.simple-notification{margin-bottom:0}}[_nghost-%COMP%]     div.simple-notification .sn-title{font-size:15px;font-weight:700;line-height:23px}[_nghost-%COMP%]     div.simple-notification .sn-content{font-size:15px;line-height:18px}[_nghost-%COMP%]     div.simple-notification .icon{height:100%;left:0;padding:7px;top:0;width:45px}[_nghost-%COMP%]     div.simple-notification .icon\\u00A0 mat-icon{align-items:center;display:flex;font-size:32px;height:100%}[_nghost-%COMP%]     .closeIcon   .sn-title:after{content:\\\"close\\\";font-family:Material Icons;font-feature-settings:\\\"liga\\\" 1;font-size:24px;font-weight:400;position:absolute;right:5px;top:5px}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MessageCenterComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-message-center',\n                templateUrl: './message-center.component.html',\n                styleUrls: ['./message-center.component.scss']\n            }]\n    }], function () { return []; }, { options: [{\n            type: Input\n        }] }); })();\n\nclass IgoMessageModule {\n    static forRoot() {\n        return {\n            ngModule: IgoMessageModule,\n            providers: []\n        };\n    }\n}\nIgoMessageModule.ɵmod = ɵɵdefineNgModule({ type: IgoMessageModule });\nIgoMessageModule.ɵinj = ɵɵdefineInjector({ factory: function IgoMessageModule_Factory(t) { return new (t || IgoMessageModule)(); }, imports: [[CommonModule, SimpleNotificationsModule.forRoot()]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoMessageModule, { declarations: [MessageCenterComponent], imports: [CommonModule, SimpleNotificationsModule], exports: [MessageCenterComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoMessageModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule, SimpleNotificationsModule.forRoot()],\n                declarations: [MessageCenterComponent],\n                exports: [MessageCenterComponent]\n            }]\n    }], null, null); })();\n\nvar MessageType;\n(function (MessageType) {\n    MessageType[\"ERROR\"] = \"error\";\n    MessageType[\"ALERT\"] = \"alert\";\n    MessageType[\"INFO\"] = \"info\";\n    MessageType[\"SUCCESS\"] = \"success\";\n})(MessageType || (MessageType = {}));\n\nclass MessageService {\n    constructor(notificationService, configService) {\n        this.notificationService = notificationService;\n        this.configService = configService;\n        this.messages$ = new BehaviorSubject([]);\n        this.options = this.configService.getConfig('message') || {};\n    }\n    showError(httpError) {\n        httpError.error.caught = true;\n        return this.error(httpError.error.message, httpError.error.title);\n    }\n    message(message) {\n        this.messages$.next(this.messages$.value.concat([message]));\n        message.options = message.options || {};\n        const currentDate = new Date();\n        message.options.from = message.options.from ? message.options.from : new Date('1 jan 1900');\n        message.options.to = message.options.to ? message.options.to : new Date('1 jan 3000');\n        if (typeof message.options.from === 'string') {\n            message.options.from = new Date(Date.parse(message.options.from.replace(/-/g, ' ')));\n        }\n        if (typeof message.options.to === 'string') {\n            message.options.to = new Date(Date.parse(message.options.to.replace(/-/g, ' ')));\n        }\n        if (currentDate > message.options.from && currentDate < message.options.to) {\n            message = this.handleTemplate(message);\n            let notification;\n            if (message.text) {\n                notification = this.notificationService.create(message.title, message.text, message.type, message.options);\n            }\n            else if (message.html) {\n                if (!message.icon) {\n                    message.options.theClass = message.options.theClass\n                        ? message.options.theClass + ' noIcon'\n                        : 'noIcon';\n                }\n                notification = this.notificationService.html(message.html, message.type, message.options);\n            }\n            else {\n                return;\n            }\n            if (message.icon !== undefined) {\n                this.addIcon(notification, message.icon);\n            }\n            message.options.id = notification.id;\n            return notification;\n        }\n        return;\n    }\n    success(text, title, options = {}) {\n        return this.message({\n            text,\n            title,\n            icon: options.icon || 'check',\n            options,\n            type: MessageType.SUCCESS\n        });\n    }\n    error(text, title, options = {}) {\n        return this.message({\n            text,\n            title,\n            icon: options.icon || 'error_outline',\n            options,\n            type: MessageType.ERROR\n        });\n    }\n    info(text, title, options = {}) {\n        return this.message({\n            text,\n            title,\n            icon: options.icon || 'info_outline',\n            options,\n            type: MessageType.INFO\n        });\n    }\n    alert(text, title, options = {}) {\n        return this.message({\n            text,\n            title,\n            icon: options.icon || 'access_alarm',\n            options,\n            type: MessageType.ALERT\n        });\n    }\n    remove(id) {\n        this.notificationService.remove(id);\n    }\n    removeAllAreNotError() {\n        for (const mess of this.messages$.value) {\n            if (mess.type !== 'error') {\n                this.remove(mess.options.id);\n            }\n        }\n    }\n    addIcon(notification, icon) {\n        // There is no way to add an icon to a notification when reating\n        // it so we simply set it on the notification directly.\n        // See https://github.com/flauc/angular2-notifications/issues/165\n        notification.icon = `\n      <mat-icon class=\"material-icons mat-icon mat-list-avatar\" svgIcon=\"${icon}\">\n      </mat-icon>`;\n    }\n    handleTemplate(message) {\n        if (!this.options.template || message.html) {\n            return message;\n        }\n        let html = this.options.template;\n        html = html.replace('${text}', message.text);\n        html = html.replace('${title}', message.title);\n        html = html.replace('${icon}', message.icon);\n        message.html = html;\n        message.text = undefined;\n        message.title = undefined;\n        message.icon = undefined;\n        return message;\n    }\n}\nMessageService.ɵfac = function MessageService_Factory(t) { return new (t || MessageService)(ɵɵinject(NotificationsService), ɵɵinject(ConfigService)); };\nMessageService.ɵprov = ɵɵdefineInjectable({ token: MessageService, factory: MessageService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MessageService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: NotificationsService }, { type: ConfigService }]; }, null); })();\n\nclass LanguageService {\n    constructor(translate) {\n        this.translate = translate;\n        this.language = this.translate.getBrowserLang();\n        const lang = this.getLanguage();\n        this.translate.setDefaultLang(lang);\n    }\n    getLanguage() {\n        return this.language.match(/en|fr/) ? this.language : 'en';\n    }\n    setLanguage(language) {\n        this.language = language.match(/en|fr/) ? language : 'en';\n        this.translate.use(this.language);\n        this.translate.reloadLang(this.language);\n    }\n}\nLanguageService.ɵfac = function LanguageService_Factory(t) { return new (t || LanguageService)(ɵɵinject(TranslateService)); };\nLanguageService.ɵprov = ɵɵdefineInjectable({ token: LanguageService, factory: LanguageService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LanguageService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: TranslateService }]; }, null); })();\n\nclass ErrorInterceptor {\n    constructor(messageService, injector) {\n        this.messageService = messageService;\n        this.injector = injector;\n    }\n    intercept(req, next) {\n        const errorContainer = { httpError: undefined };\n        return next.handle(req).pipe(catchError(error => this.handleError(error, errorContainer)), finalize(() => {\n            this.handleCaughtError(errorContainer);\n            this.handleUncaughtError(errorContainer);\n        }));\n    }\n    handleError(httpError, errorContainer) {\n        if (httpError instanceof HttpErrorResponse) {\n            const errorObj = httpError.error === 'object' ? httpError.error : {};\n            errorObj.message = httpError.error.message || httpError.statusText;\n            errorObj.caught = false;\n            httpError = new HttpErrorResponse({\n                error: errorObj,\n                headers: httpError.headers,\n                status: httpError.status,\n                statusText: httpError.statusText,\n                url: httpError.url\n            });\n        }\n        errorContainer.httpError = httpError;\n        return throwError(httpError);\n    }\n    handleCaughtError(errorContainer) {\n        const httpError = errorContainer.httpError;\n        if (httpError && httpError.error.toDisplay) {\n            httpError.error.caught = true;\n            this.messageService.error(httpError.error.message, httpError.error.title);\n        }\n    }\n    handleUncaughtError(errorContainer) {\n        const httpError = errorContainer.httpError;\n        if (httpError && !httpError.error.caught) {\n            const translate = this.injector.get(LanguageService).translate;\n            const message = translate.instant('igo.core.errors.uncaught.message');\n            const title = translate.instant('igo.core.errors.uncaught.title');\n            httpError.error.caught = true;\n            this.messageService.error(message, title);\n        }\n    }\n}\nErrorInterceptor.ɵfac = function ErrorInterceptor_Factory(t) { return new (t || ErrorInterceptor)(ɵɵinject(MessageService), ɵɵinject(Injector)); };\nErrorInterceptor.ɵprov = ɵɵdefineInjectable({ token: ErrorInterceptor, factory: ErrorInterceptor.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ErrorInterceptor, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: MessageService }, { type: Injector }]; }, null); })();\n\nclass IgoErrorModule {\n    constructor(parentModule) {\n        if (parentModule) {\n            throw new Error('IgoErrorModule is already loaded. Import it in the AppModule only');\n        }\n    }\n    static forRoot() {\n        return {\n            ngModule: IgoErrorModule,\n            providers: [\n                {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: ErrorInterceptor,\n                    multi: true\n                }\n            ]\n        };\n    }\n}\nIgoErrorModule.ɵmod = ɵɵdefineNgModule({ type: IgoErrorModule });\nIgoErrorModule.ɵinj = ɵɵdefineInjector({ factory: function IgoErrorModule_Factory(t) { return new (t || IgoErrorModule)(ɵɵinject(IgoErrorModule, 12)); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoErrorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], function () { return [{ type: IgoErrorModule, decorators: [{\n                type: Optional\n            }, {\n                type: SkipSelf\n            }] }]; }, null); })();\n\nclass IgoCoreModule {\n    constructor(matIconRegistry, domSanitizer) {\n        matIconRegistry.addSvgIconSet(domSanitizer.bypassSecurityTrustResourceUrl('./assets/igo2/core/icons/mdi.svg'));\n    }\n    static forRoot() {\n        return {\n            ngModule: IgoCoreModule,\n            providers: []\n        };\n    }\n}\nIgoCoreModule.ɵmod = ɵɵdefineNgModule({ type: IgoCoreModule });\nIgoCoreModule.ɵinj = ɵɵdefineInjector({ factory: function IgoCoreModule_Factory(t) { return new (t || IgoCoreModule)(ɵɵinject(MatIconRegistry), ɵɵinject(DomSanitizer)); }, imports: [[\n            CommonModule,\n            HttpClientModule,\n            IgoActivityModule.forRoot(),\n            IgoConfigModule.forRoot(),\n            IgoErrorModule.forRoot(),\n            IgoLanguageModule.forRoot(),\n            IgoMessageModule.forRoot()\n        ], IgoActivityModule,\n        IgoConfigModule,\n        IgoErrorModule,\n        IgoLanguageModule,\n        IgoMessageModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoCoreModule, { imports: [CommonModule,\n        HttpClientModule, IgoActivityModule, IgoConfigModule, IgoErrorModule, IgoLanguageModule, IgoMessageModule], exports: [IgoActivityModule,\n        IgoConfigModule,\n        IgoErrorModule,\n        IgoLanguageModule,\n        IgoMessageModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoCoreModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    HttpClientModule,\n                    IgoActivityModule.forRoot(),\n                    IgoConfigModule.forRoot(),\n                    IgoErrorModule.forRoot(),\n                    IgoLanguageModule.forRoot(),\n                    IgoMessageModule.forRoot()\n                ],\n                declarations: [],\n                exports: [\n                    IgoActivityModule,\n                    IgoConfigModule,\n                    IgoErrorModule,\n                    IgoLanguageModule,\n                    IgoMessageModule\n                ]\n            }]\n    }], function () { return [{ type: MatIconRegistry }, { type: DomSanitizer }]; }, null); })();\n\nclass IgoGestureConfig extends HammerGestureConfig {\n    buildHammer(element) {\n        const mc = super.buildHammer(element);\n        mc.set({ touchAction: 'pan-y' });\n        return mc;\n    }\n}\nIgoGestureConfig.ɵfac = function IgoGestureConfig_Factory(t) { return ɵIgoGestureConfig_BaseFactory(t || IgoGestureConfig); };\nIgoGestureConfig.ɵprov = ɵɵdefineInjectable({ token: IgoGestureConfig, factory: IgoGestureConfig.ɵfac });\nconst ɵIgoGestureConfig_BaseFactory = /*@__PURE__*/ ɵɵgetInheritedFactory(IgoGestureConfig);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoGestureConfig, [{\n        type: Injectable\n    }], null, null); })();\n\nclass IgoGestureModule {\n    static forRoot() {\n        return {\n            ngModule: IgoGestureModule,\n            providers: [\n                {\n                    provide: HAMMER_GESTURE_CONFIG,\n                    useClass: IgoGestureConfig\n                }\n            ]\n        };\n    }\n}\nIgoGestureModule.ɵmod = ɵɵdefineNgModule({ type: IgoGestureModule });\nIgoGestureModule.ɵinj = ɵɵdefineInjector({ factory: function IgoGestureModule_Factory(t) { return new (t || IgoGestureModule)(); }, imports: [[HammerModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoGestureModule, { imports: [HammerModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoGestureModule, [{\n        type: NgModule,\n        args: [{\n                imports: [HammerModule],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\nclass LoggingInterceptor {\n    intercept(req, next) {\n        const started = Date.now();\n        let ok;\n        // extend server response observable with logging\n        return next.handle(req).pipe(tap(\n        // Succeeds when there is a response; ignore other events\n        event => (ok = event instanceof HttpResponse ? 'succeeded' : ''), \n        // Operation failed; error is an HttpErrorResponse\n        error => (ok = 'failed')), \n        // Log when response observable either completes or errors\n        finalize(() => {\n            const elapsed = Date.now() - started;\n            const msg = `${req.method} \"${req.urlWithParams}\"\n             ${ok} in ${elapsed} ms.`;\n            console.log(msg);\n        }));\n    }\n}\nLoggingInterceptor.ɵfac = function LoggingInterceptor_Factory(t) { return new (t || LoggingInterceptor)(); };\nLoggingInterceptor.ɵprov = ɵɵdefineInjectable({ token: LoggingInterceptor, factory: LoggingInterceptor.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LoggingInterceptor, [{\n        type: Injectable\n    }], null, null); })();\n\nclass IgoLoggingModule {\n    static forRoot() {\n        return {\n            ngModule: IgoLoggingModule,\n            providers: [\n                {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: LoggingInterceptor,\n                    multi: true\n                }\n            ]\n        };\n    }\n}\nIgoLoggingModule.ɵmod = ɵɵdefineNgModule({ type: IgoLoggingModule });\nIgoLoggingModule.ɵinj = ɵɵdefineInjector({ factory: function IgoLoggingModule_Factory(t) { return new (t || IgoLoggingModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoLoggingModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\nlet ROUTE_SERVICE_OPTIONS = new InjectionToken('routeServiceOptions');\nfunction provideRouteServiceOptions(options) {\n    return {\n        provide: ROUTE_SERVICE_OPTIONS,\n        useValue: options\n    };\n}\nclass RouteService {\n    constructor(route, options) {\n        this.route = route;\n        const defaultOptions = {\n            centerKey: 'center',\n            zoomKey: 'zoom',\n            projectionKey: 'projection',\n            contextKey: 'context',\n            searchKey: 'search',\n            visibleOnLayersKey: 'visiblelayers',\n            visibleOffLayersKey: 'invisiblelayers',\n            directionsCoordKey: 'routing',\n            toolKey: 'tool',\n            wmsUrlKey: 'wmsUrl',\n            wmsLayersKey: 'wmsLayers',\n            wmtsUrlKey: 'wmtsUrl',\n            wmtsLayersKey: 'wmtsLayers',\n            arcgisUrlKey: 'arcgisUrl',\n            arcgisLayersKey: 'arcgisLayers',\n            iarcgisUrlKey: 'iarcgisUrl',\n            iarcgisLayersKey: 'iarcgisLayers',\n            tarcgisUrlKey: 'tarcgisUrl',\n            tarcgisLayersKey: 'tarcgisLayers',\n            vectorKey: 'vector'\n        };\n        this.options = Object.assign({}, defaultOptions, options);\n    }\n    get queryParams() {\n        return this.route.queryParams;\n    }\n}\nRouteService.ɵfac = function RouteService_Factory(t) { return new (t || RouteService)(ɵɵinject(ActivatedRoute), ɵɵinject(ROUTE_SERVICE_OPTIONS, 8)); };\nRouteService.ɵprov = ɵɵdefineInjectable({ token: RouteService, factory: RouteService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(RouteService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ActivatedRoute }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [ROUTE_SERVICE_OPTIONS]\n            }, {\n                type: Optional\n            }] }]; }, null); })();\n\nclass AnalyticsService {\n    constructor(config) {\n        this.config = config;\n        this.options = this.config.getConfig('analytics') || {};\n        if (this.options.provider === 'matomo') {\n            this.initMatomo();\n        }\n    }\n    get paq() {\n        return (window._paq = window._paq || []);\n    }\n    initMatomo() {\n        if (!this.options.url || !this.options.id) {\n            return;\n        }\n        const url = this.options.url.substr(-1) === '/'\n            ? this.options.url + 'matomo'\n            : this.options.url;\n        // this.paq.push(['trackPageView']);\n        // this.paq.push(['enableLinkTracking']);\n        (() => {\n            this.paq.push(['setTrackerUrl', url + '.php']);\n            this.paq.push(['setSiteId', this.options.id]);\n            const g = document.createElement('script');\n            const s = document.getElementsByTagName('script')[0];\n            g.type = 'text/javascript';\n            g.async = true;\n            g.defer = true;\n            g.src = url + '.js';\n            s.parentNode.insertBefore(g, s);\n        })();\n    }\n    setUser(user, profils) {\n        if (this.options.provider === 'matomo') {\n            if (!user) {\n                this.paq.push(['resetUserId']);\n                this.paq.push(['deleteCustomVariable', 1, 'user']);\n                this.paq.push(['deleteCustomVariable', 2, 'name']);\n                this.paq.push(['deleteCustomVariable', 3, 'profils']);\n            }\n            else {\n                this.paq.push(['setUserId', user.id]);\n                const name = `${user.firstName} ${user.lastName}`;\n                this.paq.push(['setCustomVariable', 1, 'user', user.sourceId, 'visit']);\n                this.paq.push(['setCustomVariable', 2, 'name', name, 'visit']);\n                this.paq.push(['setCustomVariable', 3, 'profils', profils, 'visit']);\n            }\n            this.paq.push(['trackPageView']);\n            this.paq.push(['enableLinkTracking']);\n        }\n    }\n    trackSearch(term, nbResults) {\n        if (this.options.provider === 'matomo') {\n            this.paq.push(['trackSiteSearch', term, false, nbResults]);\n        }\n    }\n    trackEvent(category, action, name) {\n        if (this.options.provider === 'matomo') {\n            this.paq.push(['trackEvent', category, action, name]);\n        }\n    }\n}\nAnalyticsService.ɵfac = function AnalyticsService_Factory(t) { return new (t || AnalyticsService)(ɵɵinject(ConfigService)); };\nAnalyticsService.ɵprov = ɵɵdefineInjectable({ token: AnalyticsService, factory: AnalyticsService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AnalyticsService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ConfigService }]; }, null); })();\n\nvar Media;\n(function (Media) {\n    Media[\"Mobile\"] = \"mobile\";\n    Media[\"Tablet\"] = \"tablet\";\n    Media[\"Desktop\"] = \"desktop\";\n})(Media || (Media = {}));\nvar MediaOrientation;\n(function (MediaOrientation) {\n    MediaOrientation[\"Portrait\"] = \"portrait\";\n    MediaOrientation[\"Landscape\"] = \"landscape\";\n})(MediaOrientation || (MediaOrientation = {}));\n\nclass MediaService {\n    constructor(breakpointObserver) {\n        this.media$ = new BehaviorSubject(undefined);\n        this.orientation$ = new BehaviorSubject(undefined);\n        breakpointObserver\n            .observe([Breakpoints.HandsetLandscape])\n            .subscribe(res => {\n            if (res.matches) {\n                this.media$.next(Media.Mobile);\n                this.orientation$.next(MediaOrientation.Landscape);\n            }\n        });\n        breakpointObserver.observe([Breakpoints.HandsetPortrait]).subscribe(res => {\n            if (res.matches) {\n                this.media$.next(Media.Mobile);\n                this.orientation$.next(MediaOrientation.Portrait);\n            }\n        });\n        breakpointObserver.observe([Breakpoints.TabletLandscape]).subscribe(res => {\n            if (res.matches) {\n                this.media$.next(Media.Tablet);\n                this.orientation$.next(MediaOrientation.Landscape);\n            }\n        });\n        breakpointObserver.observe([Breakpoints.TabletPortrait]).subscribe(res => {\n            if (res.matches) {\n                this.media$.next(Media.Tablet);\n                this.orientation$.next(MediaOrientation.Portrait);\n            }\n        });\n        breakpointObserver.observe([Breakpoints.WebLandscape]).subscribe(res => {\n            if (res.matches) {\n                this.media$.next(Media.Desktop);\n                this.orientation$.next(MediaOrientation.Landscape);\n            }\n        });\n        breakpointObserver.observe([Breakpoints.WebPortrait]).subscribe(res => {\n            if (res.matches) {\n                this.media$.next(Media.Desktop);\n                this.orientation$.next(MediaOrientation.Portrait);\n            }\n        });\n    }\n    getMedia() {\n        return this.media$.value;\n    }\n    getOrientation() {\n        return this.orientation$.value;\n    }\n    isTouchScreen() {\n        return 'ontouchstart' in document.documentElement ? true : false;\n    }\n    isMobile() {\n        const media = this.getMedia();\n        return media === 'mobile';\n    }\n    isDesktop() {\n        const media = this.getMedia();\n        return media === 'desktop';\n    }\n}\nMediaService.ɵfac = function MediaService_Factory(t) { return new (t || MediaService)(ɵɵinject(BreakpointObserver)); };\nMediaService.ɵprov = ɵɵdefineInjectable({ token: MediaService, factory: MediaService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MediaService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: BreakpointObserver }]; }, null); })();\n\nvar StorageScope;\n(function (StorageScope) {\n    StorageScope[\"SESSION\"] = \"Session\";\n    StorageScope[\"LOCAL\"] = \"Local\";\n})(StorageScope || (StorageScope = {}));\nvar StorageServiceEventEnum;\n(function (StorageServiceEventEnum) {\n    StorageServiceEventEnum[\"ADDED\"] = \"Added\";\n    StorageServiceEventEnum[\"MODIFIED\"] = \"Modified\";\n    StorageServiceEventEnum[\"REMOVED\"] = \"Removed\";\n    StorageServiceEventEnum[\"CLEARED\"] = \"Cleared\";\n})(StorageServiceEventEnum || (StorageServiceEventEnum = {}));\n\nclass StorageService {\n    constructor(config) {\n        this.config = config;\n        this.storageChange$ = new BehaviorSubject(undefined);\n        this.options = this.config.getConfig('storage') || { key: 'igo' };\n    }\n    /**\n     * Use to get the data found in storage file\n     */\n    get(key, scope) {\n        let value;\n        if (!scope || scope === StorageScope.SESSION) {\n            value = sessionStorage.getItem(`${this.options.key}.${key}`);\n        }\n        if (scope === StorageScope.LOCAL || (!value && !scope)) {\n            value = localStorage.getItem(`${this.options.key}.${key}`);\n        }\n        if (value) {\n            try {\n                value = JSON.parse(value);\n            }\n            catch (_a) {\n                value = value;\n            }\n        }\n        return value;\n    }\n    set(key, value, scope = StorageScope.LOCAL) {\n        const previousValue = this.get(key, scope);\n        if (scope === StorageScope.SESSION) {\n            sessionStorage.setItem(`${this.options.key}.${key}`, JSON.stringify(value));\n        }\n        else {\n            localStorage.setItem(`${this.options.key}.${key}`, JSON.stringify(value));\n        }\n        const currentValue = this.get(key, scope);\n        if (currentValue !== previousValue) {\n            this.storageChange$.next({\n                key, scope,\n                event: previousValue !== undefined ? StorageServiceEventEnum.MODIFIED : StorageServiceEventEnum.ADDED,\n                previousValue,\n                currentValue\n            });\n        }\n    }\n    remove(key, scope = StorageScope.LOCAL) {\n        const previousValue = this.get(key, scope);\n        if (scope === StorageScope.SESSION) {\n            sessionStorage.removeItem(`${this.options.key}.${key}`);\n        }\n        else {\n            localStorage.removeItem(`${this.options.key}.${key}`);\n        }\n        this.storageChange$.next({ key, scope, event: StorageServiceEventEnum.REMOVED, previousValue });\n    }\n    clear(scope = StorageScope.LOCAL) {\n        if (scope === StorageScope.SESSION) {\n            sessionStorage.clear();\n        }\n        else {\n            localStorage.clear();\n        }\n        this.storageChange$.next({ scope, event: StorageServiceEventEnum.CLEARED });\n    }\n}\nStorageService.ɵfac = function StorageService_Factory(t) { return new (t || StorageService)(ɵɵinject(ConfigService)); };\nStorageService.ɵprov = ɵɵdefineInjectable({ token: StorageService, factory: StorageService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(StorageService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ConfigService }]; }, null); })();\n\nclass NetworkService {\n    constructor(messageService, injector) {\n        this.messageService = messageService;\n        this.injector = injector;\n        this.stateChangeEventEmitter = new EventEmitter();\n        this.state = {\n            connection: window.navigator.onLine\n        };\n        this.checkNetworkState();\n    }\n    checkNetworkState() {\n        this.onlineSubscription = fromEvent(window, 'online').subscribe(() => {\n            const translate = this.injector.get(LanguageService).translate;\n            const message = translate.instant('igo.core.network.online.message');\n            const title = translate.instant('igo.core.network.online.title');\n            this.messageService.info(message, title);\n            this.state.connection = true;\n            this.emitEvent();\n        });\n        this.offlineSubscription = fromEvent(window, 'offline').subscribe(() => {\n            const translate = this.injector.get(LanguageService).translate;\n            const message = translate.instant('igo.core.network.offline.message');\n            const title = translate.instant('igo.core.network.offline.title');\n            this.messageService.info(message, title);\n            this.state.connection = false;\n            this.emitEvent();\n        });\n    }\n    emitEvent() {\n        this.stateChangeEventEmitter.emit(this.state);\n    }\n    ngOnDestroy() {\n        try {\n            this.offlineSubscription.unsubscribe();\n            this.onlineSubscription.unsubscribe();\n        }\n        catch (e) { }\n    }\n    currentState(reportState = true) {\n        return reportState\n            ? this.stateChangeEventEmitter.pipe(debounceTime(300), startWith(this.state))\n            : this.stateChangeEventEmitter.pipe(debounceTime(300));\n    }\n}\nNetworkService.ɵfac = function NetworkService_Factory(t) { return new (t || NetworkService)(ɵɵinject(MessageService), ɵɵinject(Injector)); };\nNetworkService.ɵprov = ɵɵdefineInjectable({ token: NetworkService, factory: NetworkService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(NetworkService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: MessageService }, { type: Injector }]; }, null); })();\n\n/*\n * Public API Surface of core\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ActivityInterceptor, ActivityService, AnalyticsService, CONFIG_OPTIONS, ConfigService, ErrorInterceptor, IgoActivityModule, IgoConfigModule, IgoCoreModule, IgoErrorModule, IgoGestureConfig, IgoGestureModule, IgoLanguageModule, IgoLoggingModule, IgoMessageModule, IgoMissingTranslationHandler, LanguageLoader, LanguageService, LoggingInterceptor, Media, MediaOrientation, MediaService, MessageCenterComponent, MessageService, MessageType, NetworkService, ROUTE_SERVICE_OPTIONS, RouteService, StorageScope, StorageService, StorageServiceEventEnum, configFactory, defaultLanguageLoader, provideConfigLoader, provideConfigOptions, provideDefaultLanguageLoader, provideLanguageLoader, provideRouteServiceOptions, version };\n//# sourceMappingURL=igo2-core.js.map\n","import { ɵɵelementStart, ɵɵtext, ɵɵelementEnd, ɵɵnextContext, ɵɵproperty, ɵɵadvance, ɵɵtextInterpolate, ɵɵpipe, ɵɵpipeBind1, ɵɵtextInterpolate1, EventEmitter, ɵɵdirectiveInject, ChangeDetectorRef, ɵɵdefineComponent, ɵɵlistener, ɵɵtemplate, ɵsetClassMetadata, Component, ChangeDetectionStrategy, Input, Output, ɵɵdefineDirective, Directive, HostListener, Renderer2, ElementRef, ɵɵstaticViewQuery, ɵɵqueryRefresh, ɵɵloadQuery, ɵɵNgOnChangesFeature, ViewChild, ɵɵdefinePipe, Pipe, ɵɵgetCurrentView, ɵɵelementContainerStart, ɵɵrestoreView, ɵɵelementContainerEnd, ɵɵelement, ɵɵpropertyInterpolate, ɵɵsanitizeUrl, ɵɵtemplateRefExtractor, ɵɵreference, ɵɵsanitizeHtml, ɵɵclassMap, ɵɵclassProp, HostBinding, ɵɵdefineNgModule, ɵɵdefineInjector, ɵɵsetNgModuleScope, NgModule, ɵɵpureFunction1, ɵɵresolveDocument, ɵɵprojectionDef, ɵɵprojection, ɵɵinject, ɵɵdefineInjectable, Injectable, ViewContainerRef, ɵɵstyleProp, ComponentFactoryResolver, ɵɵclassMapInterpolate2, ɵɵtextInterpolate2, ViewEncapsulation, ɵɵelementContainer, ɵɵpureFunction2, ɵɵcontentQuery, ContentChildren, Self, ɵɵpureFunction0, ɵɵviewQuery } from '@angular/core';\nimport { NgIf, NgForOf, AsyncPipe, NgClass, CommonModule, NgTemplateOutlet } from '@angular/common';\nimport { MatButton, MatButtonModule } from '@angular/material/button';\nimport { MatCard, MatCardModule } from '@angular/material/card';\nimport { MatCheckbox, MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatIcon, MatIconModule, MatIconRegistry } from '@angular/material/icon';\nimport { MatListItem, MatListAvatarCssMatStyler, MatList, MatListModule } from '@angular/material/list';\nimport { MatMenuTrigger, _MatMenu, MatMenuModule } from '@angular/material/menu';\nimport { MatTooltip, MatTooltipModule } from '@angular/material/tooltip';\nimport { LanguageService, MediaService, Media, IgoLanguageModule, ConfigService, ActivityService } from '@igo2/core';\nimport t from 'typy';\nimport { ReplaySubject, BehaviorSubject, combineLatest, of, Observable, isObservable, fromEvent, merge, Subject } from 'rxjs';\nimport { map, skip, debounceTime, catchError, tap, switchMap, filter, take, distinctUntilChanged } from 'rxjs/operators';\nimport { uuid, ObjectUtils } from '@igo2/utils';\nimport { MatFormField, MatPrefix, MatError, MatFormFieldModule } from '@angular/material/form-field';\nimport { MatSelect, MatSelectModule } from '@angular/material/select';\nimport { MatOption, MatLine } from '@angular/material/core';\nimport { MatPaginator, MatPaginatorModule } from '@angular/material/paginator';\nimport { MatTableDataSource, MatTable, MatColumnDef, MatHeaderCellDef, MatCellDef, MatHeaderRowDef, MatRowDef, MatHeaderCell, MatCell, MatHeaderRow, MatRow, MatTableModule } from '@angular/material/table';\nimport { MatSort, MatSortHeader, MatSortModule } from '@angular/material/sort';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport { __decorate, __metadata } from 'tslib';\nimport { HttpHeaders, HttpClient } from '@angular/common/http';\nimport { Cacheable } from 'ngx-cacheable';\nimport { TranslatePipe } from '@ngx-translate/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Overlay } from '@angular/cdk/overlay';\nimport { MatBadgeModule } from '@angular/material/badge';\nimport { MatDialogRef, MatDialogTitle, MatDialogContent, MatDialogActions, MatDialog, MatDialogModule } from '@angular/material/dialog';\nimport { TemplatePortal } from '@angular/cdk/portal';\nimport { MatInputModule, MatInput } from '@angular/material/input';\nimport { ɵangular_packages_forms_forms_y, NgControlStatusGroup, FormGroupDirective, FormsModule, ReactiveFormsModule, Validators, FormBuilder, RequiredValidator, NgControlStatus, FormControlDirective, DefaultValueAccessor } from '@angular/forms';\nimport { ShepherdService } from 'angular-shepherd';\nimport { MatSidenav } from '@angular/material/sidenav';\nimport { MatProgressSpinner, MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { DataSource, CdkTableModule } from '@angular/cdk/table';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\n\nvar EntityOperationType;\n(function (EntityOperationType) {\n    EntityOperationType[\"Insert\"] = \"Insert\";\n    EntityOperationType[\"Update\"] = \"Update\";\n    EntityOperationType[\"Delete\"] = \"Delete\";\n})(EntityOperationType || (EntityOperationType = {}));\nvar EntityTableColumnRenderer;\n(function (EntityTableColumnRenderer) {\n    EntityTableColumnRenderer[\"Default\"] = \"Default\";\n    EntityTableColumnRenderer[\"HTML\"] = \"HTML\";\n    EntityTableColumnRenderer[\"UnsanitizedHTML\"] = \"UnsanitizedHTML\";\n    EntityTableColumnRenderer[\"Icon\"] = \"Icon\";\n    EntityTableColumnRenderer[\"ButtonGroup\"] = \"ButtonGroup\";\n})(EntityTableColumnRenderer || (EntityTableColumnRenderer = {}));\nvar EntityTableScrollBehavior;\n(function (EntityTableScrollBehavior) {\n    EntityTableScrollBehavior[\"Auto\"] = \"auto\";\n    EntityTableScrollBehavior[\"Instant\"] = \"instant\";\n    EntityTableScrollBehavior[\"Smooth\"] = \"smooth\";\n})(EntityTableScrollBehavior || (EntityTableScrollBehavior = {}));\nvar EntityTableSelectionState;\n(function (EntityTableSelectionState) {\n    EntityTableSelectionState[\"None\"] = \"None\";\n    EntityTableSelectionState[\"All\"] = \"All\";\n    EntityTableSelectionState[\"Some\"] = \"Some\";\n})(EntityTableSelectionState || (EntityTableSelectionState = {}));\n\n/**\n * Get an entity's named property. Nested properties are supported\n * with the dotted notation. (i.e 'author.name')\n *\n * Note: this method is a 'best attempt' at getting an entity's property.\n * It fits the most common cases but you might need to explicitely define\n * a property getter when using an EntityStore, for example.\n * @param entity Entity\n * @param property Property name\n * @returns Property value\n */\nfunction getEntityProperty(entity, property) {\n    return t(entity, property).safeObject;\n}\n/**\n * Get an entity's id. An entity's id can be one of:\n * 'entity.meta.id', 'entity.meta.idProperty' or 'entity.id'.\n *\n * Note: See the note in the 'getEntityProperty' documentation.\n * @param entity Entity\n * @returns Entity id\n */\nfunction getEntityId(entity) {\n    const meta = entity.meta || {};\n    return meta.id ? meta.id : getEntityProperty(entity, meta.idProperty || 'id');\n}\n/**\n * Get an entity's title. An entity's title can be one of:\n * 'entity.meta.title', 'entity.meta.titleProperty' or 'entity.title'.\n * @param entity Entity\n * @returns Entity title\n */\nfunction getEntityTitle(entity) {\n    const meta = entity.meta || {};\n    return meta.title ? meta.title : getEntityProperty(entity, meta.titleProperty || 'title');\n}\n/**\n * Get an entity's HTML title. An entity's HTML title can be one of:\n * 'entity.meta.titleHtml', 'entity.meta.titleHtmlProperty' or 'entity.titleHtml'.\n * @param entity Entity\n * @returns Entity HTML title\n */\nfunction getEntityTitleHtml(entity) {\n    const meta = entity.meta || {};\n    return meta.titleHtml ? meta.titleHtml : getEntityProperty(entity, meta.titleHtmlProperty || 'titleHtml');\n}\n/**\n * Get an entity's icon. An entity's icon can be one of:\n * 'entity.meta.icon', 'entity.meta.iconProperty' or 'entity.icon'.\n * @param entity Entity\n * @returns Entity icon\n */\nfunction getEntityIcon(entity) {\n    const meta = entity.meta || {};\n    return meta.icon ? meta.icon : getEntityProperty(entity, meta.iconProperty || 'icon');\n}\n/**\n * Get an entity's revision.\n * @param entity Entity\n * @returns Entity revision\n */\nfunction getEntityRevision(entity) {\n    const meta = entity.meta || {};\n    return meta.revision || 0;\n}\n\n/**\n * This class is used to track a store's entities state\n */\nclass EntityStateManager {\n    constructor(options = {}) {\n        /**\n         * State index\n         */\n        this.index = new Map();\n        /**\n         * Change emitter\n         */\n        this.change$ = new ReplaySubject(1);\n        this.store = options.store ? options.store : undefined;\n        this.getKey = options.getKey\n            ? options.getKey\n            : (this.store ? this.store.getKey : getEntityId);\n        this.next();\n    }\n    /**\n     * Clear state\n     */\n    clear() {\n        if (this.index.size > 0) {\n            this.index.clear();\n            this.next();\n        }\n    }\n    /**\n     * Get an entity's state\n     * @param entity Entity\n     * @returns State\n     */\n    get(entity) {\n        return (this.index.get(this.getKey(entity)) || {});\n    }\n    /**\n     * Set an entity's state\n     * @param entity Entity\n     * @param state State\n     */\n    set(entity, state) {\n        this.setMany([entity], state);\n    }\n    /**\n     * Set many entitie's state\n     * @param entitie Entities\n     * @param state State\n     */\n    setMany(entities, state) {\n        entities.forEach((entity) => {\n            this.index.set(this.getKey(entity), Object.assign({}, state));\n        });\n        this.next();\n    }\n    /**\n     * Set state of all entities that already have a state. This is not\n     * the same as setting the state of all the store's entities.\n     * @param state State\n     */\n    setAll(state) {\n        Array.from(this.index.keys()).forEach((key) => {\n            this.index.set(key, Object.assign({}, state));\n        });\n        this.next();\n    }\n    /**\n     * Update an entity's state\n     * @param entity Entity\n     * @param changes State changes\n     */\n    update(entity, changes, exclusive = false) {\n        this.updateMany([entity], changes, exclusive);\n    }\n    /**\n     * Update many entitie's state\n     * @param entitie Entities\n     * @param changes State changes\n     */\n    updateMany(entities, changes, exclusive = false) {\n        if (exclusive === true) {\n            return this.updateManyExclusive(entities, changes);\n        }\n        entities.forEach((entity) => {\n            const state = Object.assign({}, this.get(entity), changes);\n            this.index.set(this.getKey(entity), state);\n        });\n        this.next();\n    }\n    /**\n     * Reversee an entity's state\n     * @param entity Entity\n     * @param keys State keys to reverse\n     */\n    reverse(entity, keys) {\n        this.reverseMany([entity], keys);\n    }\n    /**\n     * Reverse many entitie's state\n     * @param entitie Entities\n     * @param keys State keys to reverse\n     */\n    reverseMany(entities, keys) {\n        entities.forEach((entity) => {\n            const currentState = this.get(entity);\n            const changes = keys.reduce((acc, key) => {\n                acc[key] = currentState[key] || false;\n                return acc;\n            }, {});\n            const reversedChanges = this.reverseChanges(changes);\n            const state = Object.assign({}, currentState, reversedChanges);\n            this.index.set(this.getKey(entity), state);\n        });\n        this.next();\n    }\n    /**\n     * Update state of all entities that already have a state. This is not\n     * the same as updating the state of all the store's entities.\n     * @param changes State\n     */\n    updateAll(changes) {\n        const allKeys = this.getAllKeys();\n        Array.from(allKeys).forEach((key) => {\n            const state = Object.assign({}, this.index.get(key), changes);\n            this.index.set(key, state);\n        });\n        this.next();\n    }\n    /**\n     * When some state changes are flagged as 'exclusive', reverse\n     * the state of all other entities. Changes are reversable when\n     * they are boolean.\n     * @param entitie Entities\n     * @param changes State changes\n     */\n    updateManyExclusive(entities, changes) {\n        const reverseChanges = this.reverseChanges(changes);\n        const keys = entities.map((entity) => this.getKey(entity));\n        const allKeys = new Set(keys.concat(Array.from(this.getAllKeys())));\n        allKeys.forEach((key) => {\n            const state = this.index.get(key) || {};\n            if (keys.indexOf(key) >= 0) {\n                this.index.set(key, Object.assign({}, state, changes));\n            }\n            else {\n                // Update only if the reverse changes would modify\n                // a key already present in the current state\n                const shouldUpdate = Object.keys(reverseChanges).some((changeKey) => {\n                    return state[changeKey] !== undefined &&\n                        state[changeKey] !== reverseChanges[changeKey];\n                });\n                if (shouldUpdate === true) {\n                    this.index.set(key, Object.assign({}, state, reverseChanges));\n                }\n            }\n        });\n        this.next();\n    }\n    /**\n     * Compute a 'reversed' version of some state changes.\n     * Changes are reversable when they are boolean.\n     * @param changes State changes\n     * @returns Reversed state changes\n     */\n    reverseChanges(changes) {\n        return Object.entries(changes).reduce((reverseChanges, bunch) => {\n            const [changeKey, value] = bunch;\n            if (typeof value === typeof true) {\n                reverseChanges[changeKey] = !value;\n            }\n            return reverseChanges;\n        }, {});\n    }\n    /**\n     * Return all the keys in that state and in the store it's bound to, if any.\n     * @returns Set of keys\n     */\n    getAllKeys() {\n        const storeKeys = this.store ? Array.from(this.store.index.keys()) : [];\n        return new Set(Array.from(this.index.keys()).concat(storeKeys));\n    }\n    /**\n     * Emit 'change' event\n     */\n    next() {\n        this.change$.next();\n    }\n}\n\n/**\n * An entity view streams entities from an observable source. These entities\n * can be filtered or sorted without affecting the source. A view can also\n * combine data from multiple sources, joined together.\n */\nclass EntityView {\n    constructor(source$) {\n        this.source$ = source$;\n        /**\n         * Observable stream of values\n         */\n        this.values$ = new BehaviorSubject([]);\n        /**\n         * Whether this view has been lifted\n         */\n        this.lifted = false;\n        /**\n         * Join clauses\n         */\n        this.joins = [];\n        /**\n         * Observable of a filter clause\n         */\n        this.filter$ = new BehaviorSubject(undefined);\n        /**\n         * Observable of filter clauses\n         */\n        this.filters$ = new BehaviorSubject([]);\n        /**\n         * Filters index\n         */\n        this.filterIndex = new Map();\n        /**\n         * Observable of a sort clause\n         */\n        this.sort$ = new BehaviorSubject(undefined);\n        this.getKey$ = new BehaviorSubject(undefined);\n        /**\n         * Number of entities\n         */\n        this.count$ = new BehaviorSubject(0);\n        /**\n         * Whether the store is empty\n         */\n        this.empty$ = new BehaviorSubject(true);\n    }\n    /**\n     * Method for indexing\n     */\n    get getKey() { return this.getKey$.value; }\n    get count() { return this.count$.value; }\n    get empty() { return this.empty$.value; }\n    /**\n     * Store index\n     */\n    get index() { return this._index; }\n    /**\n     * Get a value from the view by key\n     * @param key Key\n     * @returns Value\n     */\n    get(key) {\n        if (this._index === undefined) {\n            throw new Error('This view has no index, therefore, this method is unavailable.');\n        }\n        return this.index.get(key);\n    }\n    /**\n     * Get all the values\n     * @returns Array of values\n     */\n    all() {\n        return this.values$.value;\n    }\n    /**\n     * Observe all the values\n     * @returns Observable of values\n     */\n    all$() {\n        return this.values$;\n    }\n    /**\n     * Get the first value that respects a criteria\n     * @returns A value\n     */\n    firstBy(clause) {\n        return this.values$.value.find(clause);\n    }\n    /**\n     * Observe the first value that respects a criteria\n     * @returns Observable of a value\n     */\n    firstBy$(clause) {\n        return this.values$.pipe(map((values) => values.find(clause)));\n    }\n    /**\n     * Get all the values that respect a criteria\n     * @returns Array of values\n     */\n    manyBy(clause) {\n        return this.values$.value.filter(clause);\n    }\n    /**\n     * Observe all the values that respect a criteria\n     * @returns Observable of values\n     */\n    manyBy$(clause) {\n        return this.values$.pipe(map((values) => values.filter(clause)));\n    }\n    /**\n     * Clear the filter and sort and unsubscribe from the source\n     */\n    clear() {\n        this.filter(undefined);\n        this.sort(undefined);\n    }\n    destroy() {\n        if (this.values$$ !== undefined) {\n            this.values$$.unsubscribe();\n        }\n        this.clear();\n    }\n    /**\n     * Create an index\n     * @param getKey Method to get a value's id\n     * @returns The view\n     */\n    createIndex(getKey) {\n        this._index = new Map();\n        this.getKey$.next(getKey);\n        return this;\n    }\n    /**\n     * Join another source to the stream (chainable)\n     * @param clause Join clause\n     * @returns The view\n     */\n    join(clause) {\n        if (this.lifted === true) {\n            throw new Error('This view has already been lifted, therefore, no join is allowed.');\n        }\n        this.joins.push(clause);\n        return this;\n    }\n    /**\n     * Filter values (chainable)\n     * @param clause Filter clause\n     * @returns The view\n     */\n    filter(clause) {\n        this.filter$.next(clause);\n        return this;\n    }\n    /**\n     * @param clause Filter clause\n     * @returns The filter id\n     */\n    addFilter(clause) {\n        const id = uuid();\n        this.filterIndex.set(id, clause);\n        this.filters$.next(Array.from(this.filterIndex.values()));\n        return id;\n    }\n    /**\n     * Remove a filter by id\n     * @param clause Filter clause\n     */\n    removeFilter(id) {\n        this.filterIndex.delete(id);\n        this.filters$.next(Array.from(this.filterIndex.values()));\n    }\n    /**\n     * Sort values (chainable)\n     * @param clauseSort clause\n     * @returns The view\n     */\n    sort(clause) {\n        this.sort$.next(clause);\n        return this;\n    }\n    /**\n     * Create the final observable\n     * @returns Observable\n     */\n    lift() {\n        this.lifted = true;\n        const source$ = this.joins.length > 0 ? this.liftJoinedSource() : this.liftSource();\n        const observables$ = [\n            source$,\n            this.filters$,\n            this.filter$,\n            this.sort$,\n            this.getKey$\n        ];\n        this.values$$ = combineLatest(observables$)\n            .pipe(skip(1), debounceTime(5))\n            .subscribe((bunch) => {\n            const [_values, filters, filter, sort, getKey] = bunch;\n            const values = this.processValues(_values, filters, filter, sort);\n            const generateIndex = getKey !== undefined;\n            this.setValues(values, generateIndex);\n        });\n    }\n    /**\n     * Create the source observable when no joins are defined\n     * @returns Observable\n     */\n    liftSource() {\n        return this.source$;\n    }\n    /**\n     * Create the source observable when joins are defined\n     * @returns Observable\n     */\n    liftJoinedSource() {\n        const sources$ = [this.source$, combineLatest(this.joins.map((join) => join.source))];\n        return combineLatest(sources$)\n            .pipe(map((bunch) => {\n            const [entities, joinData] = bunch;\n            return entities.reduce((values, entity) => {\n                const value = this.computeJoinedValue(entity, joinData);\n                if (value !== undefined) {\n                    values.push(value);\n                }\n                return values;\n            }, []);\n        }));\n    }\n    /**\n     * Apply joins to a source's entity and return the final value\n     * @returns Final value\n     */\n    computeJoinedValue(entity, joinData) {\n        let value = entity;\n        let joinIndex = 0;\n        while (value !== undefined && joinIndex < this.joins.length) {\n            value = this.joins[joinIndex].reduce(value, joinData[joinIndex]);\n            joinIndex += 1;\n        }\n        return value;\n    }\n    /**\n     * Filter and sort values before streaming them\n     * @param values Values\n     * @param filters Filter clauses\n     * @param filter Filter clause\n     * @param sort Sort clause\n     * @returns Filtered and sorted values\n     */\n    processValues(values, filters, filter, sort) {\n        values = values.slice(0);\n        values = this.filterValues(values, filters.concat([filter]));\n        values = this.sortValues(values, sort);\n        return values;\n    }\n    /**\n     * Filter values\n     * @param values Values\n     * @param filters Filter clauses\n     * @returns Filtered values\n     */\n    filterValues(values, clauses) {\n        if (clauses.length === 0) {\n            return values;\n        }\n        return values\n            .filter((value) => {\n            return clauses\n                .filter((clause) => clause !== undefined)\n                .every((clause) => clause(value));\n        });\n    }\n    /**\n     * Sort values\n     * @param values Values\n     * @param sort Sort clause\n     * @returns Sorted values\n     */\n    sortValues(values, clause) {\n        if (clause === undefined) {\n            return values;\n        }\n        return values.sort((v1, v2) => {\n            return ObjectUtils.naturalCompare(clause.valueAccessor(v1), clause.valueAccessor(v2), clause.direction, clause.nullsFirst);\n        });\n    }\n    /**\n     * Set value and optionally generate an index\n     * @param values Values\n     * @param generateIndex boolean\n     */\n    setValues(values, generateIndex) {\n        if (generateIndex === true) {\n            this._index = this.generateIndex(values);\n        }\n        this.values$.next(values);\n        const count = values.length;\n        const empty = count === 0;\n        this.count$.next(count);\n        this.empty$.next(empty);\n    }\n    /**\n     * Generate a complete index of all the values\n     * @param entities Entities\n     * @returns Index\n     */\n    generateIndex(values) {\n        const entries = values.map((value) => [this.getKey(value), value]);\n        return new Map(entries);\n    }\n}\n\n/**\n * An entity store class holds any number of entities\n * as well as their state. It can be observed, filtered and sorted and\n * provides methods to insert, update or delete entities.\n */\nclass EntityStore {\n    constructor(entities, options = {}) {\n        /**\n         * Observable of the raw entities\n         */\n        this.entities$ = new BehaviorSubject([]);\n        /**\n         * Number of entities\n         */\n        this.count$ = new BehaviorSubject(0);\n        /**\n         * Whether the store is empty\n         */\n        this.empty$ = new BehaviorSubject(true);\n        this._pristine = true;\n        /**\n         * Strategies\n         */\n        this.strategies = [];\n        this.getKey = options.getKey ? options.getKey : getEntityId;\n        this.getProperty = options.getProperty ? options.getProperty : getEntityProperty;\n        this.state = this.createStateManager();\n        this.view = this.createDataView();\n        this.stateView = this.createStateView();\n        this.view.lift();\n        this.stateView.lift();\n        if (entities.length > 0) {\n            this.load(entities);\n        }\n        else {\n            this._index = this.generateIndex(entities);\n        }\n    }\n    get count() { return this.count$.value; }\n    get empty() { return this.empty$.value; }\n    /**\n     * Store index\n     */\n    get index() { return this._index; }\n    /**\n     * Store index\n     */\n    get pristine() { return this._pristine; }\n    /**\n     * Get an entity from the store by key\n     * @param key Key\n     * @returns Entity\n     */\n    get(key) {\n        return this.index.get(key);\n    }\n    /**\n     * Get all entities in the store\n     * @returns Array of entities\n     */\n    all() {\n        return this.entities$.value;\n    }\n    /**\n     * Set this store's entities\n     * @param entities Entities\n     */\n    load(entities, pristine = true) {\n        this._index = this.generateIndex(entities);\n        this._pristine = pristine;\n        this.next();\n    }\n    /**\n     * Clear the store's entities but keep the state and views intact.\n     * Views won't return any data but future data will be subject to the\n     * current views filter and sort\n     */\n    softClear() {\n        if (this.index && this.index.size > 0) {\n            this.index.clear();\n            this._pristine = true;\n            this.next();\n        }\n        else if (this.index) {\n            this.updateCount();\n        }\n    }\n    /**\n     * Clear the store's entities, state and views\n     */\n    clear() {\n        this.stateView.clear();\n        this.view.clear();\n        this.state.clear();\n        this.softClear();\n    }\n    destroy() {\n        this.stateView.destroy();\n        this.view.destroy();\n        this.clear();\n    }\n    /**\n     * Insert an entity into the store\n     * @param entity Entity\n     */\n    insert(entity) {\n        this.insertMany([entity]);\n    }\n    /**\n     * Insert many entities into the store\n     * @param entities Entities\n     */\n    insertMany(entities) {\n        entities.forEach((entity) => this.index.set(this.getKey(entity), entity));\n        this._pristine = false;\n        this.next();\n    }\n    /**\n     * Update or insert an entity into the store\n     * @param entity Entity\n     */\n    update(entity) {\n        this.updateMany([entity]);\n    }\n    /**\n     * Update or insert many entities into the store\n     * @param entities Entities\n     */\n    updateMany(entities) {\n        entities.forEach((entity) => this.index.set(this.getKey(entity), entity));\n        this._pristine = false;\n        this.next();\n    }\n    /**\n     * Delete an entity from the store\n     * @param entity Entity\n     */\n    delete(entity) {\n        this.deleteMany([entity]);\n    }\n    /**\n     * Delete many entities from the store\n     * @param entities Entities\n     */\n    deleteMany(entities) {\n        entities.forEach((entity) => this.index.delete(this.getKey(entity)));\n        this._pristine = false;\n        this.next();\n    }\n    /**\n     * Add a strategy to this store\n     * @param strategy Entity store strategy\n     * @returns Entity store\n     */\n    addStrategy(strategy, activate = false) {\n        const existingStrategy = this.strategies.find((_strategy) => {\n            return strategy.constructor === _strategy.constructor;\n        });\n        if (existingStrategy !== undefined) {\n            throw new Error('A strategy of this type already exists on that EntityStore.');\n        }\n        this.strategies.push(strategy);\n        strategy.bindStore(this);\n        if (activate === true) {\n            strategy.activate();\n        }\n        return this;\n    }\n    /**\n     * Remove a strategy from this store\n     * @param strategy Entity store strategy\n     * @returns Entity store\n     */\n    removeStrategy(strategy) {\n        const index = this.strategies.indexOf(strategy);\n        if (index >= 0) {\n            this.strategies.splice(index, 1);\n            strategy.unbindStore(this);\n        }\n        return this;\n    }\n    /**\n     * Return strategies of a given type\n     * @param type Entity store strategy class\n     * @returns Strategies\n     */\n    getStrategyOfType(type) {\n        return this.strategies.find((strategy) => {\n            return strategy instanceof type;\n        });\n    }\n    /**\n     * Activate strategies of a given type\n     * @param type Entity store strategy class\n     */\n    activateStrategyOfType(type) {\n        const strategy = this.getStrategyOfType(type);\n        if (strategy !== undefined) {\n            strategy.activate();\n        }\n    }\n    /**\n     * Deactivate strategies of a given type\n     * @param type Entity store strategy class\n     */\n    deactivateStrategyOfType(type) {\n        const strategy = this.getStrategyOfType(type);\n        if (strategy !== undefined) {\n            strategy.deactivate();\n        }\n    }\n    /**\n     * Generate a complete index of all the entities\n     * @param entities Entities\n     * @returns Index\n     */\n    generateIndex(entities) {\n        const entries = entities.map((entity) => [this.getKey(entity), entity]);\n        return new Map(entries);\n    }\n    /**\n     * Push the index's entities into the entities$ observable\n     */\n    next() {\n        this.entities$.next(Array.from(this.index.values()));\n        this.updateCount();\n    }\n    /**\n     * Update the store's count and empty\n     */\n    updateCount() {\n        const count = this.index.size;\n        const empty = count === 0;\n        this.count$.next(count);\n        this.empty$.next(empty);\n    }\n    /**\n     * Create the entity state manager\n     * @returns EntityStateManager\n     */\n    createStateManager() {\n        return new EntityStateManager({ store: this });\n    }\n    /**\n     * Create the data view\n     * @returns EntityView<E>\n     */\n    createDataView() {\n        return new EntityView(this.entities$);\n    }\n    /**\n     * Create the state view\n     * @returns EntityView<EntityRecord<E>>\n     */\n    createStateView() {\n        return new EntityView(this.view.all$())\n            .join({\n            source: this.state.change$,\n            reduce: (entity) => {\n                const key = this.getKey(entity);\n                const state = this.state.get(entity);\n                const currentRecord = this.stateView.get(key);\n                if (currentRecord !== undefined &&\n                    currentRecord.entity === entity &&\n                    this.statesAreTheSame(currentRecord.state, state)) {\n                    return currentRecord;\n                }\n                const revision = currentRecord ? currentRecord.revision + 1 : 1;\n                const ref = `${key}-${revision}`;\n                return { entity, state, revision, ref };\n            }\n        })\n            .createIndex((record) => this.getKey(record.entity));\n    }\n    statesAreTheSame(currentState, newState) {\n        if (currentState === newState) {\n            return true;\n        }\n        const currentStateIsEmpty = Object.keys(currentState).length === 0;\n        const newStateIsEmpty = Object.keys(newState).length === 0;\n        return currentStateIsEmpty && newStateIsEmpty;\n    }\n}\n\n/**\n * This class is used to synchronize a component's changes\n * detection with an EntityStore changes. For example, it is frequent\n * to have a component subscribe to a store's selected entity and, at the same time,\n * this component provides a way to select an entity with, let's say, a click.\n *\n * This class automatically handles those case and triggers the compoent's\n * change detection when needed.\n *\n * Note: If the component observes the store's stateView, a workspace is\n * probably not required because the stateView catches any changes to the\n * entities and their state.\n */\nclass EntityStoreWatcher {\n    constructor(store, cdRef) {\n        /**\n         * Component inner state\n         */\n        this.innerStateIndex = new Map();\n        this.setChangeDetector(cdRef);\n        this.setStore(store);\n    }\n    destroy() {\n        this.setChangeDetector(undefined);\n        this.setStore(undefined);\n    }\n    /**\n     * Bind this workspace to a store and start watching for changes\n     * @param store Entity store\n     */\n    setStore(store) {\n        if (store === undefined) {\n            this.teardownObservers();\n            this.innerStateIndex.clear();\n            this.store = undefined;\n            return;\n        }\n        this.setStore(undefined);\n        this.store = store;\n        this.setupObservers();\n        this.detectChanges();\n    }\n    /**\n     * Bind this workspace to a component's change detector\n     * @param cdRef Change detector\n     */\n    setChangeDetector(cdRef) {\n        this.cdRef = cdRef;\n    }\n    /**\n     * Set up observers on a store's entities and their state\n     * @param store Entity store\n     */\n    setupObservers() {\n        this.teardownObservers();\n        this.entities$$ = this.store.entities$\n            .subscribe((entities) => this.onEntitiesChange(entities));\n        this.state$$ = this.store.state.change$\n            .pipe(skip(1))\n            .subscribe(() => this.onStateChange());\n    }\n    /**\n     * Teardown store observers\n     */\n    teardownObservers() {\n        if (this.entities$$ !== undefined) {\n            this.entities$$.unsubscribe();\n        }\n        if (this.state$$ !== undefined) {\n            this.state$$.unsubscribe();\n        }\n        this.entities$$ = undefined;\n        this.state$$ = undefined;\n    }\n    /**\n     * When the entities change, always trigger the changes detection\n     */\n    onEntitiesChange(entities) {\n        this.detectChanges();\n    }\n    /**\n     * When the entities state change, trigger the change detection\n     * only if the component has not handled these changes yet. For example,\n     * the component might have initiated thoses changes itself.\n     */\n    onStateChange() {\n        let changesDetected = false;\n        const storeIndex = this.store.state.index;\n        const innerIndex = this.innerStateIndex;\n        if (storeIndex.size !== innerIndex.size) {\n            changesDetected = this.detectChanges();\n        }\n        const storeKeys = Array.from(storeIndex.keys());\n        for (const key of storeKeys) {\n            const storeValue = storeIndex.get(key);\n            const innerValue = innerIndex.get(key);\n            if (changesDetected === false) {\n                if (innerValue === undefined) {\n                    changesDetected = this.detectChanges();\n                }\n                else if (!ObjectUtils.objectsAreEquivalent(storeValue, innerValue)) {\n                    changesDetected = this.detectChanges();\n                }\n            }\n            this.innerStateIndex.set(key, Object.assign({}, storeValue));\n        }\n    }\n    /**\n     * Trigger the change detection of the workspace is bound to a change detector\n     */\n    detectChanges() {\n        if (this.cdRef !== undefined) {\n            this.cdRef.detectChanges();\n        }\n        return true;\n    }\n}\n\n/**\n * This class holds a reference to the insert, update and delete\n * operations performed on a store. This is useful to commit\n * these operations in a single pass or to cancel them.\n */\nclass EntityTransaction {\n    constructor(options = {}) {\n        this.inCommitPhase$ = new BehaviorSubject(false);\n        this.getKey = options.getKey ? options.getKey : getEntityId;\n        this.operations = new EntityStore([], {\n            getKey: (operation) => operation.key\n        });\n    }\n    /**\n     * Whether there are pending operations\n     */\n    get empty$() { return this.operations.empty$; }\n    /**\n     * Whether there are pending operations\n     */\n    get empty() { return this.empty$.value; }\n    /**\n     * Whether thise store is in commit phase\n     */\n    get inCommitPhase() { return this.inCommitPhase$.value; }\n    destroy() {\n        this.operations.destroy();\n    }\n    /**\n     * Insert an entity into a store. If no store is specified, an insert\n     * operation is still created but the transaction won't add the new\n     * entity to the store.\n     * @param current The entity to insert\n     * @param store Optional: The store to insert the entity into\n     * @param meta Optional: Any metadata on the operation\n     */\n    insert(current, store, meta) {\n        const existingOperation = this.getOperationByEntity(current);\n        if (existingOperation !== undefined) {\n            this.removeOperation(existingOperation);\n        }\n        this.doInsert(current, store, meta);\n    }\n    /**\n     * Update an entity in a store. If no store is specified, an update\n     * operation is still created but the transaction won't update the\n     * entity into the store.\n     * @param previous The entity before update\n     * @param current The entity after update\n     * @param store Optional: The store to update the entity into\n     * @param meta Optional: Any metadata on the operation\n     */\n    update(previous, current, store, meta) {\n        const existingOperation = this.getOperationByEntity(current);\n        if (existingOperation !== undefined) {\n            this.removeOperation(existingOperation);\n            if (existingOperation.type === EntityOperationType.Insert) {\n                this.doInsert(current, store, meta);\n                return;\n            }\n            else if (existingOperation.type === EntityOperationType.Update) {\n                previous = existingOperation.previous;\n            }\n        }\n        this.doUpdate(previous, current, store, meta);\n    }\n    /**\n     * Delete an entity from a store. If no store is specified, a delete\n     * operation is still created but the transaction won't remove the\n     * entity from the store.\n     * @param previous The entity before delete\n     * @param store Optional: The store to delete the entity from\n     * @param meta Optional: Any metadata on the operation\n     */\n    delete(previous, store, meta) {\n        const existingOperation = this.getOperationByEntity(previous);\n        if (existingOperation !== undefined) {\n            this.removeOperation(existingOperation);\n            if (existingOperation.type === EntityOperationType.Insert) {\n                if (store !== undefined) {\n                    store.delete(previous);\n                }\n                return;\n            }\n        }\n        this.doDelete(previous, store, meta);\n    }\n    /**\n     * Commit operations the transaction. This method doesn't do much\n     * in itself. The handler it receives does the hard work and it's\n     * implementation is left to the caller. This method simply wraps\n     * the handler into an error catching mechanism to update\n     * the transaction afterward. The caller needs to subscribe to this\n     * method's output (observable) for the commit to be performed.\n     * @param operations Operations to commit\n     * @param handler Function that handles the commit operation\n     * @returns The handler output (observable)\n     */\n    commit(operations, handler) {\n        this.inCommitPhase$.next(true);\n        return handler(this, operations)\n            .pipe(catchError(() => of(new Error())), tap((result) => {\n            if (result instanceof Error) {\n                this.onCommitError(operations);\n            }\n            else {\n                this.onCommitSuccess(operations);\n            }\n        }));\n    }\n    /**\n     * Commit all the operations of the transaction.\n     * @param handler Function that handles the commit operation\n     * @returns The handler output (observable)\n     */\n    commitAll(handler) {\n        const operations = this.getOperationsInCommit();\n        return this.commit(operations, handler);\n    }\n    /**\n     * Rollback this transaction\n     */\n    rollback() {\n        this.rollbackOperations(this.operations.all());\n    }\n    /**\n     * Rollback specific operations\n     */\n    rollbackOperations(operations) {\n        this.checkInCommitPhase();\n        const operationsFactory = () => new Map([\n            [EntityOperationType.Delete, []],\n            [EntityOperationType.Update, []],\n            [EntityOperationType.Insert, []]\n        ]);\n        const storesOperations = new Map();\n        // Group operations by store and by operation type.\n        // Grouping operations allows us to revert them in bacth, thus, triggering\n        // observables only one per operation type.\n        for (const operation of operations) {\n            const store = operation.store;\n            if (operation.store === undefined) {\n                continue;\n            }\n            let storeOperations = storesOperations.get(store);\n            if (storeOperations === undefined) {\n                storeOperations = operationsFactory();\n                storesOperations.set(store, storeOperations);\n            }\n            storeOperations.get(operation.type).push(operation);\n        }\n        Array.from(storesOperations.keys()).forEach((store) => {\n            const storeOperations = storesOperations.get(store);\n            const deletes = storeOperations.get(EntityOperationType.Delete);\n            store.insertMany(deletes.map((_delete) => _delete.previous));\n            const updates = storeOperations.get(EntityOperationType.Update);\n            store.updateMany(updates.map((_update) => _update.previous));\n            const inserts = storeOperations.get(EntityOperationType.Insert);\n            store.deleteMany(inserts.map((_insert) => _insert.current));\n        });\n        this.operations.deleteMany(operations);\n        this.inCommitPhase$.next(false);\n    }\n    /**\n     * Clear this transaction\n     * @todo Raise event and synchronize stores?\n     */\n    clear() {\n        this.operations.clear();\n        this.inCommitPhase$.next(false);\n    }\n    /**\n     * Get any existing operation on an entity\n     * @param entity Entity\n     * @returns Either an insert, update or delete operation\n     */\n    getOperationByEntity(entity) {\n        return this.operations.get(this.getKey(entity));\n    }\n    /**\n     * Merge another transaction in this one\n     * @param transaction Another transaction\n     */\n    mergeTransaction(transaction) {\n        this.checkInCommitPhase();\n        const operations = transaction.operations.all();\n        operations.forEach((operation) => {\n            this.addOperation(operation);\n        });\n    }\n    /**\n     * Create an insert operation and add an entity to the store\n     * @param current The entity to insert\n     * @param store Optional: The store to insert the entity into\n     * @param meta Optional: Any metadata on the operation\n     */\n    doInsert(current, store, meta) {\n        this.addOperation({\n            key: this.getKey(current),\n            type: EntityOperationType.Insert,\n            previous: undefined,\n            current,\n            store,\n            meta\n        });\n        if (store !== undefined) {\n            store.insert(current);\n        }\n    }\n    /**\n     * Create an update operation and update an entity into the store\n     * @param previous The entity before update\n     * @param current The entity after update\n     * @param store Optional: The store to update the entity into\n     * @param meta Optional: Any metadata on the operation\n     */\n    doUpdate(previous, current, store, meta) {\n        this.addOperation({\n            key: this.getKey(current),\n            type: EntityOperationType.Update,\n            previous,\n            current,\n            store,\n            meta\n        });\n        if (store !== undefined) {\n            store.update(current);\n        }\n    }\n    /**\n     * Create a delete operation and delete an entity from the store\n     * @param previous The entity before delete\n     * @param store Optional: The store to delete the entity from\n     * @param meta Optional: Any metadata on the operation\n     */\n    doDelete(previous, store, meta) {\n        this.addOperation({\n            key: this.getKey(previous),\n            type: EntityOperationType.Delete,\n            previous,\n            current: undefined,\n            store,\n            meta\n        });\n        if (store !== undefined) {\n            store.delete(previous);\n        }\n    }\n    /**\n     * Remove committed operations from store\n     * @param operations Commited operations\n     * @todo Raise event and synchronize stores?\n     */\n    resolveOperations(operations) {\n        this.operations.deleteMany(operations);\n    }\n    /**\n     * On commit success, resolve commited operations and exit commit phase\n     * @param operations Commited operations\n     */\n    onCommitSuccess(operations) {\n        this.resolveOperations(operations);\n        this.inCommitPhase$.next(false);\n    }\n    /**\n     * On commit error, abort transaction\n     * @param operations Commited operations\n     */\n    onCommitError(operations) {\n        this.inCommitPhase$.next(false);\n    }\n    /**\n     * Add an operation to the operations store\n     * @param operation Operation to add\n     */\n    addOperation(operation) {\n        this.checkInCommitPhase();\n        this.operations.insert(operation);\n        this.operations.state.update(operation, { added: true });\n    }\n    /**\n     * Remove an operation from the operations store\n     * @param operation Operation to remove\n     */\n    removeOperation(operation) {\n        this.checkInCommitPhase();\n        this.operations.delete(operation);\n        this.operations.state.update(operation, { added: false });\n    }\n    /**\n     * Get all the operations to commit\n     * @returns Operations to commit\n     */\n    getOperationsInCommit() {\n        return this.operations.stateView\n            .manyBy((value) => {\n            return value.state.added === true;\n        })\n            .map((value) => value.entity);\n    }\n    /**\n     * Check if the transaction is in the commit phase and throw an error if it is\n     */\n    checkInCommitPhase() {\n        if (this.inCommitPhase === true) {\n            throw new Error('This transaction is in the commit phase. Cannot complete this operation.');\n        }\n    }\n}\n\n/**\n * Entity store strategies. They can do pretty much anything during a store's\n * lifetime. For example, they may act as triggers when something happens.\n * Sharing a strategy is a good idea when multiple strategies would have\n * on cancelling effect on each other.\n *\n * At creation, strategy is inactive and needs to be manually activated.\n */\nclass EntityStoreStrategy {\n    constructor(options = {}) {\n        this.options = options;\n        /**\n         * Feature store\n         * @internal\n         */\n        this.stores = [];\n        this.active$ = new BehaviorSubject(false);\n        this.options = options;\n    }\n    /**\n     * Whether this strategy is active\n     * @internal\n     */\n    get active() { return this.active$.value; }\n    /**\n     * Activate the strategy. If it's already active, it'll be deactivated\n     * and activated again.\n     */\n    activate() {\n        if (this.active === true) {\n            this.doDeactivate();\n        }\n        this.active$.next(true);\n        this.doActivate();\n    }\n    /**\n     * Activate the strategy. If it's already active, it'll be deactivated\n     * and activated again.\n     */\n    deactivate() {\n        this.active$.next(false);\n        this.doDeactivate();\n    }\n    /**\n     * Bind this strategy to a store\n     * @param store Feature store\n     */\n    bindStore(store) {\n        if (this.stores.indexOf(store) < 0) {\n            this.stores.push(store);\n        }\n    }\n    /**\n     * Unbind this strategy from store\n     * @param store Feature store\n     */\n    unbindStore(store) {\n        const index = this.stores.indexOf(store);\n        if (index >= 0) {\n            this.stores.splice(index, 1);\n        }\n    }\n    /**\n     * Do the stataegy activation\n     * @internal\n     */\n    doActivate() { }\n    /**\n     * Do the strategy deactivation\n     * @internal\n     */\n    doDeactivate() { }\n}\n\n/**\n * When active, this strategy filters a store's stateView to return\n * selected entities only.\n */\nclass EntityStoreFilterCustomFuncStrategy extends EntityStoreStrategy {\n    constructor(options) {\n        super(options);\n        this.options = options;\n        /**\n         * Store / filter ids map\n         */\n        this.filters = new Map();\n    }\n    /**\n     * Bind this strategy to a store and start filtering it\n     * @param store Entity store\n     */\n    bindStore(store) {\n        super.bindStore(store);\n        if (this.active === true) {\n            this.filterStore(store);\n        }\n    }\n    /**\n     * Unbind this strategy from a store and stop filtering it\n     * @param store Entity store\n     */\n    unbindStore(store) {\n        super.unbindStore(store);\n        if (this.active === true) {\n            this.unfilterStore(store);\n        }\n    }\n    /**\n     * Start filtering all stores\n     * @internal\n     */\n    doActivate() {\n        this.filterAll();\n    }\n    /**\n     * Stop filtering all stores\n     * @internal\n     */\n    doDeactivate() {\n        this.unfilterAll();\n    }\n    /**\n     * Filter all stores\n     */\n    filterAll() {\n        this.stores.forEach((store) => this.filterStore(store));\n    }\n    /**\n     * Unfilter all stores\n     */\n    unfilterAll() {\n        this.stores.forEach((store) => this.unfilterStore(store));\n    }\n    /**\n     * Filter a store and add it to the filters map\n     */\n    filterStore(store) {\n        this.filters.set(store, store.stateView.addFilter(this.options.filterClauseFunc));\n    }\n    /**\n     * Unfilter a store and delete it from the filters map\n     */\n    unfilterStore(store) {\n        const filterId = this.filters.get(store);\n        if (filterId === undefined) {\n            return;\n        }\n        store.stateView.removeFilter(filterId);\n        this.filters.delete(store);\n    }\n}\n\n/**\n * When active, this strategy filters a store's stateView to return\n * selected entities only.\n */\nclass EntityStoreFilterSelectionStrategy extends EntityStoreStrategy {\n    constructor() {\n        super(...arguments);\n        /**\n         * Store / filter ids map\n         */\n        this.filters = new Map();\n    }\n    /**\n     * Bind this strategy to a store and start filtering it\n     * @param store Entity store\n     */\n    bindStore(store) {\n        super.bindStore(store);\n        if (this.active === true) {\n            this.filterStore(store);\n        }\n    }\n    /**\n     * Unbind this strategy from a store and stop filtering it\n     * @param store Entity store\n     */\n    unbindStore(store) {\n        super.unbindStore(store);\n        if (this.active === true) {\n            this.unfilterStore(store);\n        }\n    }\n    /**\n     * Start filtering all stores\n     * @internal\n     */\n    doActivate() {\n        this.filterAll();\n    }\n    /**\n     * Stop filtering all stores\n     * @internal\n     */\n    doDeactivate() {\n        this.unfilterAll();\n    }\n    /**\n     * Filter all stores\n     */\n    filterAll() {\n        this.stores.forEach((store) => this.filterStore(store));\n    }\n    /**\n     * Unfilter all stores\n     */\n    unfilterAll() {\n        this.stores.forEach((store) => this.unfilterStore(store));\n    }\n    /**\n     * Filter a store and add it to the filters map\n     */\n    filterStore(store) {\n        if (this.filters.has(store)) {\n            return;\n        }\n        const filter = (record) => {\n            return record.state.selected === true;\n        };\n        this.filters.set(store, store.stateView.addFilter(filter));\n    }\n    /**\n     * Unfilter a store and delete it from the filters map\n     */\n    unfilterStore(store) {\n        const filterId = this.filters.get(store);\n        if (filterId === undefined) {\n            return;\n        }\n        store.stateView.removeFilter(filterId);\n        this.filters.delete(store);\n    }\n}\n\nfunction EntitySelectorComponent_mat_option_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 4);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"value\", ctx_r0.emptyValue);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ctx_r0.emptyText);\n} }\nfunction EntitySelectorComponent_mat_option_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 4);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"value\", ctx_r1.multiSelectValue);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ɵɵpipeBind1(2, 2, ctx_r1.multiText$));\n} }\nfunction EntitySelectorComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 4);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const record_r3 = ctx.$implicit;\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵproperty(\"value\", record_r3.entity);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ctx_r2.titleAccessor(record_r3.entity), \" \");\n} }\nclass EntitySelectorComponent {\n    constructor(cdRef) {\n        this.cdRef = cdRef;\n        /**\n         * The selected entity\n         * @internal\n         */\n        this.selected$ = new BehaviorSubject(undefined);\n        /**\n         * The current multi select option text\n         * @internal\n         */\n        this.multiText$ = new BehaviorSubject(undefined);\n        this.multiSelectValue = { id: 'IGO_MULTI_SELECT' };\n        this.emptyValue = { id: 'IGO_EMPTY_SELECT' };\n        /**\n         * Title accessor\n         */\n        this.titleAccessor = getEntityTitle;\n        /**\n         * Text to display when nothing is selected\n         */\n        this.emptyText = undefined;\n        /**\n         * Wheter selecting many entities is allowed\n         */\n        this.multi = false;\n        /**\n         * Text to display for the select all option\n         */\n        this.multiAllText = 'All';\n        /**\n         * Text to display for the select none option\n         */\n        this.multiNoneText = 'None';\n        /**\n         * Wheter the selector is disabled or not\n         */\n        this.disabled = false;\n        /**\n         * Event emitted when the selection changes\n         */\n        this.selectedChange = new EventEmitter();\n    }\n    /**\n     * Create a store watcher and subscribe to the selected entity\n     * @internal\n     */\n    ngOnInit() {\n        this.watcher = new EntityStoreWatcher(this.store, this.cdRef);\n        this.selected$$ = this.store.stateView\n            .manyBy$((record) => record.state.selected === true)\n            .subscribe((records) => {\n            const entities = records.map((record) => record.entity);\n            this.onSelectFromStore(entities);\n        });\n    }\n    /**\n     * Unsubscribe to the selected entity and destroy the store watcher\n     * @internal\n     */\n    ngOnDestroy() {\n        this.watcher.destroy();\n        this.selected$$.unsubscribe();\n    }\n    /**\n     * On selection change, update the store's state and emit an event\n     * @internal\n     */\n    onSelectionChange(event) {\n        const values = event.value instanceof Array ? event.value : [event.value];\n        const multiSelect = values.find((_value) => _value === this.multiSelectValue);\n        let entities = values.filter((_value) => _value !== this.multiSelectValue);\n        if (multiSelect !== undefined) {\n            if (entities.length === this.store.count) {\n                entities = [];\n            }\n            else if (entities.length < this.store.count) {\n                entities = this.store.all();\n            }\n        }\n        entities = entities.filter((entity) => entity !== this.emptyValue);\n        if (entities.length === 0) {\n            this.store.state.updateAll({ selected: false });\n        }\n        else {\n            this.store.state.updateMany(entities, { selected: true }, true);\n        }\n        const value = this.multi ? entities : event.value;\n        this.selectedChange.emit({ selected: true, value });\n    }\n    onSelectFromStore(entities) {\n        if (this.multi === true) {\n            this.selected$.next(entities);\n        }\n        else {\n            const entity = entities.length > 0 ? entities[0] : undefined;\n            this.selected$.next(entity);\n        }\n        this.updateMultiToggleWithEntities(entities);\n    }\n    updateMultiToggleWithEntities(entities) {\n        if (entities.length === this.store.count && this.multiText$.value !== this.multiNoneText) {\n            this.multiText$.next(this.multiNoneText);\n        }\n        else if (entities.length < this.store.count && this.multiText$.value !== this.multiAllText) {\n            this.multiText$.next(this.multiAllText);\n        }\n    }\n}\nEntitySelectorComponent.ɵfac = function EntitySelectorComponent_Factory(t) { return new (t || EntitySelectorComponent)(ɵɵdirectiveInject(ChangeDetectorRef)); };\nEntitySelectorComponent.ɵcmp = ɵɵdefineComponent({ type: EntitySelectorComponent, selectors: [[\"igo-entity-selector\"]], inputs: { store: \"store\", titleAccessor: \"titleAccessor\", emptyText: \"emptyText\", multi: \"multi\", multiAllText: \"multiAllText\", multiNoneText: \"multiNoneText\", placeholder: \"placeholder\", disabled: \"disabled\" }, outputs: { selectedChange: \"selectedChange\" }, decls: 7, vars: 11, consts: [[1, \"igo-entity-selector\"], [3, \"disabled\", \"value\", \"multiple\", \"placeholder\", \"selectionChange\"], [3, \"value\", 4, \"ngIf\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [3, \"value\"]], template: function EntitySelectorComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-form-field\", 0);\n        ɵɵelementStart(1, \"mat-select\", 1);\n        ɵɵlistener(\"selectionChange\", function EntitySelectorComponent_Template_mat_select_selectionChange_1_listener($event) { return ctx.onSelectionChange($event); });\n        ɵɵpipe(2, \"async\");\n        ɵɵtemplate(3, EntitySelectorComponent_mat_option_3_Template, 2, 2, \"mat-option\", 2);\n        ɵɵtemplate(4, EntitySelectorComponent_mat_option_4_Template, 3, 4, \"mat-option\", 2);\n        ɵɵtemplate(5, EntitySelectorComponent_ng_template_5_Template, 2, 2, \"ng-template\", 3);\n        ɵɵpipe(6, \"async\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"disabled\", ctx.disabled)(\"value\", ɵɵpipeBind1(2, 7, ctx.selected$))(\"multiple\", ctx.multi)(\"placeholder\", ctx.placeholder);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ctx.emptyText !== undefined && ctx.multi === false);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.multi === true);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(6, 9, ctx.store.stateView.all$()));\n    } }, directives: [MatFormField, MatSelect, NgIf, NgForOf, MatOption], pipes: [AsyncPipe], styles: [\"mat-form-field[_ngcontent-%COMP%]{width:100%}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(EntitySelectorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-entity-selector',\n                templateUrl: './entity-selector.component.html',\n                styleUrls: ['./entity-selector.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ChangeDetectorRef }]; }, { store: [{\n            type: Input\n        }], titleAccessor: [{\n            type: Input\n        }], emptyText: [{\n            type: Input\n        }], multi: [{\n            type: Input\n        }], multiAllText: [{\n            type: Input\n        }], multiNoneText: [{\n            type: Input\n        }], placeholder: [{\n            type: Input\n        }], disabled: [{\n            type: Input\n        }], selectedChange: [{\n            type: Output\n        }] }); })();\n\nclass StopPropagationDirective {\n    onClick(event) {\n        event.stopPropagation();\n    }\n}\nStopPropagationDirective.ɵfac = function StopPropagationDirective_Factory(t) { return new (t || StopPropagationDirective)(); };\nStopPropagationDirective.ɵdir = ɵɵdefineDirective({ type: StopPropagationDirective, selectors: [[\"\", \"igoStopPropagation\", \"\"]], hostBindings: function StopPropagationDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"click\", function StopPropagationDirective_click_HostBindingHandler($event) { return ctx.onClick($event); });\n    } } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(StopPropagationDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoStopPropagation]'\n            }]\n    }], null, { onClick: [{\n            type: HostListener,\n            args: ['click', ['$event']]\n        }] }); })();\n\n/**\n * Directive that handles an entity table row click and selection.\n */\nclass EntityTableRowDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n        /**\n         * Whether a row supports selection\n         */\n        this.selection = false;\n        /**\n         * Whether clicking a row should select it (if selection is true)\n         */\n        this.selectOnClick = true;\n        /**\n         * Whether the selected row should be highlighted\n         */\n        this.highlightSelection = true;\n        this._selected = false;\n        /**\n         * Scroll behavior on selection\n         */\n        this.scrollBehavior = EntityTableScrollBehavior.Auto;\n        /**\n         * Event emitted when a row is selected\n         */\n        this.select = new EventEmitter();\n    }\n    /**\n     * Whether a row is selected\n     */\n    set selected(value) {\n        if (this.selection === false) {\n            return;\n        }\n        if (value === this._selected) {\n            return;\n        }\n        this.toggleSelected(value);\n        this.scroll();\n    }\n    get selected() {\n        return this._selected;\n    }\n    /**\n     * When a row is clicked, select it if it's supported\n     * @ignore\n     */\n    onClick() {\n        if (this.selection === false || this.selectOnClick === false) {\n            return;\n        }\n        this.toggleSelected(true);\n        this.select.emit(this);\n    }\n    /**\n     * Select a row and add or remove the selected class from it\n     * @param selected Whether the row should be selected\n     */\n    toggleSelected(selected) {\n        this._selected = selected;\n        if (selected === true) {\n            this.addCls(EntityTableRowDirective.selectedCls);\n            if (this.highlightSelection === true) {\n                this.addCls(EntityTableRowDirective.highlightedCls);\n            }\n        }\n        else {\n            this.removeCls(EntityTableRowDirective.selectedCls);\n            this.removeCls(EntityTableRowDirective.highlightedCls);\n        }\n    }\n    /**\n     * Scroll to the selected row\n     */\n    scroll() {\n        if (this._selected === true) {\n            scrollIntoView(this.el.nativeElement, {\n                scrollMode: 'if-needed',\n                behavior: 'smooth',\n                block: 'end',\n                inline: 'nearest'\n            });\n        }\n    }\n    /**\n     * Add the selected CSS class\n     */\n    addCls(cls) {\n        this.renderer.addClass(this.el.nativeElement, cls);\n    }\n    /**\n     * Remove the selected CSS class\n     */\n    removeCls(cls) {\n        this.renderer.removeClass(this.el.nativeElement, cls);\n    }\n}\n/**\n * Class added to a selected row\n */\nEntityTableRowDirective.selectedCls = 'igo-entity-table-row-selected';\n/**\n * Class added to a highlighted row\n */\nEntityTableRowDirective.highlightedCls = 'igo-entity-table-row-highlighted';\nEntityTableRowDirective.ɵfac = function EntityTableRowDirective_Factory(t) { return new (t || EntityTableRowDirective)(ɵɵdirectiveInject(Renderer2), ɵɵdirectiveInject(ElementRef)); };\nEntityTableRowDirective.ɵdir = ɵɵdefineDirective({ type: EntityTableRowDirective, selectors: [[\"\", \"igoEntityTableRow\", \"\"]], hostBindings: function EntityTableRowDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"click\", function EntityTableRowDirective_click_HostBindingHandler() { return ctx.onClick(); });\n    } }, inputs: { selection: \"selection\", selectOnClick: \"selectOnClick\", highlightSelection: \"highlightSelection\", selected: \"selected\", scrollBehavior: \"scrollBehavior\" }, outputs: { select: \"select\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(EntityTableRowDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoEntityTableRow]'\n            }]\n    }], function () { return [{ type: Renderer2 }, { type: ElementRef }]; }, { selection: [{\n            type: Input\n        }], selectOnClick: [{\n            type: Input\n        }], highlightSelection: [{\n            type: Input\n        }], selected: [{\n            type: Input\n        }], scrollBehavior: [{\n            type: Input\n        }], select: [{\n            type: Output\n        }], onClick: [{\n            type: HostListener,\n            args: ['click']\n        }] }); })();\n\nclass EntityTablePaginatorComponent {\n    constructor(languageService, mediaService) {\n        this.languageService = languageService;\n        this.mediaService = mediaService;\n        this.disabled = false;\n        this.hidePageSize = false;\n        this.pageIndex = 0;\n        this.pageSize = 50;\n        this.pageSizeOptions = [5, 10, 20, 50, 100, 200];\n        this.showFirstLastButtons = true;\n        this.paginationLabelTranslation$$ = [];\n        this.entitySortChange$ = new BehaviorSubject(false);\n        this.length = 0;\n        /**\n         * Paginator emitted.\n         */\n        this.paginatorChange = new EventEmitter();\n        this.rangeLabel = (page, pageSize, length) => {\n            const of = new BehaviorSubject('');\n            this.paginationLabelTranslation$$.push(this.languageService.translate.get('igo.common.paginator.of').subscribe((label) => {\n                of.next(label);\n            }));\n            if (length === 0 || pageSize === 0) {\n                return `0 ${of.value} ${length}`;\n            }\n            length = Math.max(length, 0);\n            const startIndex = page * pageSize;\n            const endIndex = startIndex < length ?\n                Math.min(startIndex + pageSize, length) :\n                startIndex + pageSize;\n            return `${startIndex + 1} - ${endIndex} ${of.value} ${length}`;\n        };\n    }\n    ngOnChanges() {\n        this.unsubscribeAll();\n        this.count$$ = this.store.stateView.count$.subscribe((count) => {\n            this.length = count;\n            this.emitPaginator();\n        });\n        this.entitySortChange$$ = this.entitySortChange$.subscribe(() => {\n            if (this.paginator) {\n                this.paginator.firstPage();\n            }\n        });\n        this.initPaginatorOptions();\n        this.translateLabels();\n    }\n    initPaginatorOptions() {\n        var _a, _b, _c, _d, _e, _f;\n        this.disabled = ((_a = this.paginatorOptions) === null || _a === void 0 ? void 0 : _a.disabled) || this.disabled;\n        this.pageIndex = ((_b = this.paginatorOptions) === null || _b === void 0 ? void 0 : _b.pageIndex) || this.pageIndex;\n        this.pageSize = ((_c = this.paginatorOptions) === null || _c === void 0 ? void 0 : _c.pageSize) || this.pageSize;\n        this.pageSizeOptions = ((_d = this.paginatorOptions) === null || _d === void 0 ? void 0 : _d.pageSizeOptions) || this.pageSizeOptions;\n        if (this.mediaService.isMobile()) {\n            this.showFirstLastButtons = false;\n            this.hidePageSize = true;\n        }\n        else {\n            this.showFirstLastButtons = ((_e = this.paginatorOptions) === null || _e === void 0 ? void 0 : _e.showFirstLastButtons) || this.showFirstLastButtons;\n            this.hidePageSize = ((_f = this.paginatorOptions) === null || _f === void 0 ? void 0 : _f.hidePageSize) || this.hidePageSize;\n        }\n    }\n    translateLabels() {\n        this.paginationLabelTranslation$$.push(this.languageService.translate.get('igo.common.paginator.firstPageLabel').subscribe((label) => {\n            this.paginator._intl.firstPageLabel = label;\n        }));\n        this.paginator._intl.getRangeLabel = this.rangeLabel;\n        this.paginationLabelTranslation$$.push(this.languageService.translate.get('igo.common.paginator.itemsPerPageLabel').subscribe((label) => {\n            this.paginator._intl.itemsPerPageLabel = label;\n        }));\n        this.paginationLabelTranslation$$.push(this.languageService.translate.get('igo.common.paginator.lastPageLabel').subscribe((label) => {\n            this.paginator._intl.lastPageLabel = label;\n        }));\n        this.paginationLabelTranslation$$.push(this.languageService.translate.get('igo.common.paginator.nextPageLabel').subscribe((label) => {\n            this.paginator._intl.nextPageLabel = label;\n        }));\n        this.paginationLabelTranslation$$.push(this.languageService.translate.get('igo.common.paginator.previousPageLabel').subscribe((label) => {\n            this.paginator._intl.previousPageLabel = label;\n        }));\n    }\n    unsubscribeAll() {\n        this.paginationLabelTranslation$$.map(sub => sub.unsubscribe());\n        if (this.count$$) {\n            this.count$$.unsubscribe();\n        }\n        if (this.entitySortChange$$) {\n            this.entitySortChange$$.unsubscribe();\n        }\n    }\n    ngOnDestroy() {\n        this.unsubscribeAll();\n    }\n    emitPaginator() {\n        this.paginatorChange.emit(this.paginator);\n    }\n}\nEntityTablePaginatorComponent.ɵfac = function EntityTablePaginatorComponent_Factory(t) { return new (t || EntityTablePaginatorComponent)(ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(MediaService)); };\nEntityTablePaginatorComponent.ɵcmp = ɵɵdefineComponent({ type: EntityTablePaginatorComponent, selectors: [[\"igo-entity-table-paginator\"]], viewQuery: function EntityTablePaginatorComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵstaticViewQuery(MatPaginator, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.paginator = _t.first);\n    } }, inputs: { entitySortChange$: \"entitySortChange$\", store: \"store\", paginatorOptions: \"paginatorOptions\" }, outputs: { page: \"page\", paginatorChange: \"paginatorChange\" }, features: [ɵɵNgOnChangesFeature], decls: 1, vars: 7, consts: [[3, \"disabled\", \"hidePageSize\", \"length\", \"pageIndex\", \"pageSize\", \"pageSizeOptions\", \"showFirstLastButtons\", \"page\"]], template: function EntityTablePaginatorComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-paginator\", 0);\n        ɵɵlistener(\"page\", function EntityTablePaginatorComponent_Template_mat_paginator_page_0_listener() { return ctx.emitPaginator(); });\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"disabled\", ctx.disabled)(\"hidePageSize\", ctx.hidePageSize)(\"length\", ctx.length)(\"pageIndex\", ctx.pageIndex)(\"pageSize\", ctx.pageSize)(\"pageSizeOptions\", ctx.pageSizeOptions)(\"showFirstLastButtons\", ctx.showFirstLastButtons);\n    } }, directives: [MatPaginator], styles: [\"[_nghost-%COMP%]{margin-top:-10px;padding-right:15px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]{margin-top:0;padding-right:5px}}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(EntityTablePaginatorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-entity-table-paginator',\n                templateUrl: './entity-table-paginator.component.html',\n                styleUrls: ['./entity-table-paginator.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: LanguageService }, { type: MediaService }]; }, { entitySortChange$: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], paginatorOptions: [{\n            type: Input\n        }], page: [{\n            type: Output\n        }], paginatorChange: [{\n            type: Output\n        }], paginator: [{\n            type: ViewChild,\n            args: [MatPaginator, { static: true }]\n        }] }); })();\n\nclass SecureImagePipe {\n    constructor(http) {\n        this.http = http;\n    }\n    transform(url) {\n        const headers = new HttpHeaders({\n            'Content-Type': 'text/plain',\n            activityInterceptor: 'false'\n        });\n        return this.http\n            .get(url, {\n            headers,\n            responseType: 'blob'\n        })\n            .pipe(switchMap((blob) => {\n            return new Observable((observer) => {\n                const reader = new FileReader();\n                reader.readAsDataURL(blob);\n                reader.onloadend = () => {\n                    observer.next(reader.result);\n                    observer.complete();\n                };\n            });\n        }));\n    }\n}\nSecureImagePipe.ɵfac = function SecureImagePipe_Factory(t) { return new (t || SecureImagePipe)(ɵɵdirectiveInject(HttpClient)); };\nSecureImagePipe.ɵpipe = ɵɵdefinePipe({ name: \"secureImage\", type: SecureImagePipe, pure: true });\n__decorate([\n    Cacheable({\n        maxCacheCount: 20\n    }),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [String]),\n    __metadata(\"design:returntype\", Observable)\n], SecureImagePipe.prototype, \"transform\", null);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SecureImagePipe, [{\n        type: Pipe,\n        args: [{\n                name: 'secureImage'\n            }]\n    }], function () { return [{ type: HttpClient }]; }, { transform: [] }); })();\n\nclass SanitizeHtmlPipe {\n    constructor(_sanitizer) {\n        this._sanitizer = _sanitizer;\n    }\n    transform(v) {\n        return this._sanitizer.bypassSecurityTrustHtml(v);\n    }\n}\nSanitizeHtmlPipe.ɵfac = function SanitizeHtmlPipe_Factory(t) { return new (t || SanitizeHtmlPipe)(ɵɵdirectiveInject(DomSanitizer)); };\nSanitizeHtmlPipe.ɵpipe = ɵɵdefinePipe({ name: \"sanitizeHtml\", type: SanitizeHtmlPipe, pure: true });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SanitizeHtmlPipe, [{\n        type: Pipe,\n        args: [{ name: 'sanitizeHtml' }]\n    }], function () { return [{ type: DomSanitizer }]; }, null); })();\n\nfunction EntityTableComponent_th_3_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵɵgetCurrentView();\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"mat-checkbox\", 11);\n    ɵɵlistener(\"change\", function EntityTableComponent_th_3_ng_container_1_ng_container_1_Template_mat_checkbox_change_1_listener($event) { ɵɵrestoreView(_r10); const ctx_r9 = ɵɵnextContext(3); return ctx_r9.onToggleRows($event.checked); });\n    ɵɵelementEnd();\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const selectionState_r8 = ctx.ngIf;\n    const ctx_r7 = ɵɵnextContext(3);\n    ɵɵadvance(1);\n    ɵɵproperty(\"checked\", selectionState_r8 === ctx_r7.entityTableSelectionState.All)(\"indeterminate\", selectionState_r8 === ctx_r7.entityTableSelectionState.Some);\n} }\nfunction EntityTableComponent_th_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, EntityTableComponent_th_3_ng_container_1_ng_container_1_Template, 2, 2, \"ng-container\", 10);\n    ɵɵpipe(2, \"async\");\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ɵɵpipeBind1(2, 1, ctx_r6.selectionState$));\n} }\nfunction EntityTableComponent_th_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"th\", 9);\n    ɵɵtemplate(1, EntityTableComponent_th_3_ng_container_1_Template, 3, 3, \"ng-container\", 10);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.selectMany);\n} }\nfunction EntityTableComponent_td_4_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"td\", 12);\n    ɵɵelementStart(1, \"mat-checkbox\", 13);\n    ɵɵlistener(\"mousedown\", function EntityTableComponent_td_4_Template_mat_checkbox_mousedown_1_listener($event) { ɵɵrestoreView(_r13); return $event.shiftKey ? $event.preventDefault() : null; })(\"click\", function EntityTableComponent_td_4_Template_mat_checkbox_click_1_listener($event) { ɵɵrestoreView(_r13); const record_r11 = ctx.$implicit; const ctx_r14 = ɵɵnextContext(); return $event.shiftKey ? ctx_r14.onShiftToggleRow(!ctx_r14.rowIsSelected(record_r11), record_r11, $event) : $event.stopPropagation(); })(\"change\", function EntityTableComponent_td_4_Template_mat_checkbox_change_1_listener($event) { ɵɵrestoreView(_r13); const record_r11 = ctx.$implicit; const ctx_r15 = ɵɵnextContext(); return ctx_r15.onToggleRow($event.checked, record_r11); });\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const record_r11 = ctx.$implicit;\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"checked\", ctx_r1.rowIsSelected(record_r11));\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_1_th_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"th\", 16);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const column_r16 = ɵɵnextContext(2).$implicit;\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", column_r16.title, \" \");\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_1_th_1_Template, 2, 1, \"th\", 15);\n    ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_2_th_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"th\", 9);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const column_r16 = ɵɵnextContext(2).$implicit;\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", column_r16.title, \" \");\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_2_th_1_Template, 2, 1, \"th\", 3);\n    ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"td\", 20);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const record_r31 = ɵɵnextContext().$implicit;\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r32 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r32.getCellClass(record_r31, column_r16));\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ctx_r32.getValue(record_r31, column_r16), \" \");\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_ng_template_2_img_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"img\", 24);\n    ɵɵpipe(1, \"async\");\n    ɵɵpipe(2, \"secureImage\");\n} if (rf & 2) {\n    const record_r31 = ɵɵnextContext(2).$implicit;\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r37 = ɵɵnextContext();\n    ɵɵpropertyInterpolate(\"src\", ɵɵpipeBind1(1, 1, ɵɵpipeBind1(2, 3, ctx_r37.getValue(record_r31, column_r16))), ɵɵsanitizeUrl);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_ng_template_2_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"span\");\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ɵɵpipeBind1(2, 1, \"igo.common.entity-table.targetHtmlUrl\"), \" \");\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    const _r43 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"td\", 20);\n    ɵɵelementStart(1, \"a\", 21);\n    ɵɵlistener(\"click\", function EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_ng_template_2_Template_a_click_1_listener($event) { ɵɵrestoreView(_r43); return $event.stopPropagation(); });\n    ɵɵtemplate(2, EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_ng_template_2_img_2_Template, 3, 5, \"img\", 22);\n    ɵɵtemplate(3, EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_ng_template_2_ng_template_3_Template, 3, 3, \"ng-template\", null, 23, ɵɵtemplateRefExtractor);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r38 = ɵɵreference(4);\n    const record_r31 = ɵɵnextContext().$implicit;\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r34 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r34.getCellClass(record_r31, column_r16));\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"href\", ctx_r34.getValue(record_r31, column_r16), ɵɵsanitizeUrl);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r34.isImg(ctx_r34.getValue(record_r31, column_r16)))(\"ngIfElse\", _r38);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_td_1_Template, 2, 2, \"td\", 18);\n    ɵɵtemplate(2, EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_ng_template_2_Template, 5, 4, \"ng-template\", null, 19, ɵɵtemplateRefExtractor);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const record_r31 = ctx.$implicit;\n    const _r33 = ɵɵreference(3);\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r30 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r30.isUrl(ctx_r30.getValue(record_r31, column_r16)))(\"ngIfElse\", _r33);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_ng_container_1_Template, 4, 2, \"ng-container\", 17);\n    ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"td\", 27);\n} if (rf & 2) {\n    const record_r48 = ɵɵnextContext().$implicit;\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r49 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r49.getCellClass(record_r48, column_r16))(\"innerHTML\", ctx_r49.getValue(record_r48, column_r16), ɵɵsanitizeHtml);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_ng_template_2_img_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"img\", 24);\n    ɵɵpipe(1, \"async\");\n    ɵɵpipe(2, \"secureImage\");\n} if (rf & 2) {\n    const record_r48 = ɵɵnextContext(2).$implicit;\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r54 = ɵɵnextContext();\n    ɵɵpropertyInterpolate(\"src\", ɵɵpipeBind1(1, 1, ɵɵpipeBind1(2, 3, ctx_r54.getValue(record_r48, column_r16))), ɵɵsanitizeUrl);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_ng_template_2_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"span\");\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ɵɵpipeBind1(2, 1, \"igo.geo.targetHtmlUrl\"), \" \");\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    const _r60 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"td\", 20);\n    ɵɵelementStart(1, \"a\", 21);\n    ɵɵlistener(\"click\", function EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_ng_template_2_Template_a_click_1_listener($event) { ɵɵrestoreView(_r60); return $event.stopPropagation(); });\n    ɵɵtemplate(2, EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_ng_template_2_img_2_Template, 3, 5, \"img\", 22);\n    ɵɵtemplate(3, EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_ng_template_2_ng_template_3_Template, 3, 3, \"ng-template\", null, 23, ɵɵtemplateRefExtractor);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r55 = ɵɵreference(4);\n    const record_r48 = ɵɵnextContext().$implicit;\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r51 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r51.getCellClass(record_r48, column_r16));\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"href\", ctx_r51.getValue(record_r48, column_r16), ɵɵsanitizeUrl);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r51.isImg(ctx_r51.getValue(record_r48, column_r16)))(\"ngIfElse\", _r55);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_td_1_Template, 1, 2, \"td\", 25);\n    ɵɵtemplate(2, EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_ng_template_2_Template, 5, 4, \"ng-template\", null, 26, ɵɵtemplateRefExtractor);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const record_r48 = ctx.$implicit;\n    const _r50 = ɵɵreference(3);\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r47 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r47.isUrl(ctx_r47.getValue(record_r48, column_r16)))(\"ngIfElse\", _r50);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_ng_container_1_Template, 4, 2, \"ng-container\", 17);\n    ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"td\", 27);\n    ɵɵpipe(1, \"sanitizeHtml\");\n} if (rf & 2) {\n    const record_r65 = ɵɵnextContext().$implicit;\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r66 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r66.getCellClass(record_r65, column_r16))(\"innerHTML\", ɵɵpipeBind1(1, 2, ctx_r66.getValue(record_r65, column_r16)), ɵɵsanitizeHtml);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_ng_template_2_img_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"img\", 24);\n    ɵɵpipe(1, \"async\");\n    ɵɵpipe(2, \"secureImage\");\n} if (rf & 2) {\n    const record_r65 = ɵɵnextContext(2).$implicit;\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r71 = ɵɵnextContext();\n    ɵɵpropertyInterpolate(\"src\", ɵɵpipeBind1(1, 1, ɵɵpipeBind1(2, 3, ctx_r71.getValue(record_r65, column_r16))), ɵɵsanitizeUrl);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_ng_template_2_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"span\");\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ɵɵpipeBind1(2, 1, \"igo.geo.targetHtmlUrl\"), \" \");\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    const _r77 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"td\", 20);\n    ɵɵelementStart(1, \"a\", 21);\n    ɵɵlistener(\"click\", function EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_ng_template_2_Template_a_click_1_listener($event) { ɵɵrestoreView(_r77); return $event.stopPropagation(); });\n    ɵɵtemplate(2, EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_ng_template_2_img_2_Template, 3, 5, \"img\", 22);\n    ɵɵtemplate(3, EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_ng_template_2_ng_template_3_Template, 3, 3, \"ng-template\", null, 23, ɵɵtemplateRefExtractor);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r72 = ɵɵreference(4);\n    const record_r65 = ɵɵnextContext().$implicit;\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r68 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r68.getCellClass(record_r65, column_r16));\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"href\", ctx_r68.getValue(record_r65, column_r16), ɵɵsanitizeUrl);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r68.isImg(ctx_r68.getValue(record_r65, column_r16)))(\"ngIfElse\", _r72);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_td_1_Template, 2, 4, \"td\", 25);\n    ɵɵtemplate(2, EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_ng_template_2_Template, 5, 4, \"ng-template\", null, 28, ɵɵtemplateRefExtractor);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const record_r65 = ctx.$implicit;\n    const _r67 = ɵɵreference(3);\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r64 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r64.isUrl(ctx_r64.getValue(record_r65, column_r16)))(\"ngIfElse\", _r67);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_ng_container_1_Template, 4, 2, \"ng-container\", 17);\n    ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_4_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"td\", 20);\n    ɵɵelement(1, \"mat-icon\", 30);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const record_r82 = ctx.$implicit;\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r81 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r81.getCellClass(record_r82, column_r16));\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"svgIcon\", ctx_r81.getValue(record_r82, column_r16));\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_4_td_1_Template, 2, 2, \"td\", 29);\n    ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r92 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 34);\n    ɵɵlistener(\"click\", function EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_1_Template_button_click_0_listener() { ɵɵrestoreView(_r92); const button_r87 = ɵɵnextContext().$implicit; const record_r85 = ɵɵnextContext().$implicit; const ctx_r90 = ɵɵnextContext(4); return ctx_r90.onButtonClick(button_r87.click, record_r85); });\n    ɵɵelement(1, \"mat-icon\", 30);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const button_r87 = ɵɵnextContext().$implicit;\n    ɵɵproperty(\"color\", button_r87.color);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"svgIcon\", button_r87.icon);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_2_Template(rf, ctx) { if (rf & 1) {\n    const _r97 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 35);\n    ɵɵlistener(\"click\", function EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_2_Template_button_click_0_listener() { ɵɵrestoreView(_r97); const button_r87 = ɵɵnextContext().$implicit; const record_r85 = ɵɵnextContext().$implicit; const ctx_r95 = ɵɵnextContext(4); return ctx_r95.onButtonClick(button_r87.click, record_r85); });\n    ɵɵelement(1, \"mat-icon\", 30);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const button_r87 = ɵɵnextContext().$implicit;\n    ɵɵproperty(\"color\", button_r87.color);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"svgIcon\", button_r87.icon);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"span\");\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_1_Template, 2, 2, \"button\", 32);\n    ɵɵtemplate(2, EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_2_Template, 2, 2, \"button\", 33);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const button_r87 = ctx.$implicit;\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", button_r87.style === \"mat-icon-button\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", button_r87.style !== \"mat-icon-button\");\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"td\", 20);\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_Template, 3, 2, \"span\", 31);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const record_r85 = ctx.$implicit;\n    const column_r16 = ɵɵnextContext(3).$implicit;\n    const ctx_r84 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r84.getCellClass(record_r85, column_r16));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r84.getValue(record_r85, column_r16));\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_Template, 2, 2, \"td\", 29);\n    ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_Template, 2, 0, \"ng-container\", 10);\n    ɵɵtemplate(2, EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_Template, 2, 0, \"ng-container\", 10);\n    ɵɵtemplate(3, EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_Template, 2, 0, \"ng-container\", 10);\n    ɵɵtemplate(4, EntityTableComponent_ng_container_5_ng_container_3_ng_container_4_Template, 2, 0, \"ng-container\", 10);\n    ɵɵtemplate(5, EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_Template, 2, 0, \"ng-container\", 10);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const columnRenderer_r24 = ctx.ngIf;\n    const ctx_r19 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", columnRenderer_r24 === ctx_r19.entityTableColumnRenderer.Default);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", columnRenderer_r24 === ctx_r19.entityTableColumnRenderer.HTML);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", columnRenderer_r24 === ctx_r19.entityTableColumnRenderer.UnsanitizedHTML);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", columnRenderer_r24 === ctx_r19.entityTableColumnRenderer.Icon);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", columnRenderer_r24 === ctx_r19.entityTableColumnRenderer.ButtonGroup);\n} }\nfunction EntityTableComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0, 14);\n    ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_1_Template, 2, 0, \"ng-container\", 10);\n    ɵɵtemplate(2, EntityTableComponent_ng_container_5_ng_container_2_Template, 2, 0, \"ng-container\", 10);\n    ɵɵtemplate(3, EntityTableComponent_ng_container_5_ng_container_3_Template, 6, 5, \"ng-container\", 10);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const column_r16 = ctx.$implicit;\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵproperty(\"matColumnDef\", column_r16.name);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r2.columnIsSortable(column_r16));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r2.columnIsSortable(column_r16));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r2.getColumnRenderer(column_r16));\n} }\nfunction EntityTableComponent_tr_6_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"tr\", 36);\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r3.getHeaderClass());\n} }\nfunction EntityTableComponent_tr_7_Template(rf, ctx) { if (rf & 1) {\n    const _r103 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"tr\", 37);\n    ɵɵlistener(\"select\", function EntityTableComponent_tr_7_Template_tr_select_0_listener() { ɵɵrestoreView(_r103); const record_r101 = ctx.$implicit; const ctx_r102 = ɵɵnextContext(); return ctx_r102.onRowSelect(record_r101); })(\"click\", function EntityTableComponent_tr_7_Template_tr_click_0_listener() { ɵɵrestoreView(_r103); const record_r101 = ctx.$implicit; const ctx_r104 = ɵɵnextContext(); return ctx_r104.onRowClick(record_r101); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const record_r101 = ctx.$implicit;\n    const ctx_r4 = ɵɵnextContext();\n    ɵɵproperty(\"scrollBehavior\", ctx_r4.scrollBehavior)(\"ngClass\", ctx_r4.getRowClass(record_r101))(\"selection\", ctx_r4.selection)(\"selected\", ctx_r4.rowIsSelected(record_r101));\n} }\nfunction EntityTableComponent_igo_entity_table_paginator_8_Template(rf, ctx) { if (rf & 1) {\n    const _r106 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-entity-table-paginator\", 38);\n    ɵɵlistener(\"paginatorChange\", function EntityTableComponent_igo_entity_table_paginator_8_Template_igo_entity_table_paginator_paginatorChange_0_listener($event) { ɵɵrestoreView(_r106); const ctx_r105 = ɵɵnextContext(); return ctx_r105.paginatorChange($event); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵɵnextContext();\n    ɵɵproperty(\"store\", ctx_r5.store)(\"paginatorOptions\", ctx_r5.paginatorOptions)(\"entitySortChange$\", ctx_r5.entitySortChange$);\n} }\nclass EntityTableComponent {\n    constructor(cdRef) {\n        this.cdRef = cdRef;\n        this.entitySortChange$ = new BehaviorSubject(false);\n        /**\n         * Reference to the column renderer types\n         * @internal\n         */\n        this.entityTableColumnRenderer = EntityTableColumnRenderer;\n        /**\n         * Reference to the selection's state\n         * @internal\n         */\n        this.entityTableSelectionState = EntityTableSelectionState;\n        /**\n         * Observable of the selection,s state\n         * @internal\n         */\n        this.selectionState$ = new BehaviorSubject(undefined);\n        /**\n         * Scroll behavior on selection\n         */\n        this.scrollBehavior = EntityTableScrollBehavior.Auto;\n        /**\n         * Whether nulls should be first when sorting\n         */\n        this.sortNullsFirst = false;\n        /**\n         * Show the table paginator or not. False by default.\n         */\n        this.withPaginator = false;\n        /**\n         * Event emitted when an entity (row) is clicked\n         */\n        this.entityClick = new EventEmitter();\n        /**\n         * Event emitted when an entity (row) is selected\n         */\n        this.entitySelectChange = new EventEmitter();\n        /**\n         * Event emitted when the table sort is changed.\n         */\n        this.entitySortChange = new EventEmitter(undefined);\n        /**\n         * Data source consumable by the underlying material table\n         * @internal\n         */\n        this.dataSource = new MatTableDataSource();\n    }\n    /**\n     * Table paginator\n     */\n    set paginator(value) {\n        this._paginator = value;\n        this.dataSource.paginator = value;\n    }\n    get paginator() {\n        return this._paginator;\n    }\n    /**\n     * Table headers\n     * @internal\n     */\n    get headers() {\n        let columns = this.template.columns\n            .filter((column) => column.visible !== false)\n            .map((column) => column.name);\n        if (this.selectionCheckbox === true) {\n            columns = ['selectionCheckbox'].concat(columns);\n        }\n        return columns;\n    }\n    /**\n     * Whether selection is supported\n     * @internal\n     */\n    get selection() { return this.template.selection || false; }\n    /**\n     * Whether a selection checkbox should be displayed\n     * @internal\n     */\n    get selectionCheckbox() { return this.template.selectionCheckbox || false; }\n    /**\n     * Whether selection many entities should eb supported\n     * @internal\n     */\n    get selectMany() { return this.template.selectMany || false; }\n    /**\n     * Whether selection many entities should eb supported\n     * @internal\n     */\n    get fixedHeader() { return this.template.fixedHeader === undefined ? true : this.template.fixedHeader; }\n    /**\n     * Track the selection state to properly display the selection checkboxes\n     * @internal\n     */\n    ngOnInit() {\n        this.handleDatasource();\n        this.dataSource.paginator = this.paginator;\n    }\n    /**\n     * @internal\n     */\n    ngOnChanges(changes) {\n        const store = changes.store;\n        if (store && store.currentValue !== store.previousValue) {\n            this.handleDatasource();\n        }\n    }\n    handleDatasource() {\n        this.unsubscribeStore();\n        this.selection$$ = this.store.stateView\n            .manyBy$((record) => record.state.selected === true)\n            .subscribe((records) => {\n            const firstSelected = records[0];\n            const firstSelectedStateviewPosition = this.store.stateView.all().indexOf(firstSelected);\n            const pageMax = this.paginator ? this.paginator.pageSize * (this.paginator.pageIndex + 1) : 0;\n            const pageMin = this.paginator ? pageMax - this.paginator.pageSize : 0;\n            if (this.paginator &&\n                (firstSelectedStateviewPosition < pageMin ||\n                    firstSelectedStateviewPosition >= pageMax)) {\n                const pageToReach = Math.floor(firstSelectedStateviewPosition / this.paginator.pageSize);\n                this.dataSource.paginator.pageIndex = pageToReach;\n            }\n            this.selectionState$.next(this.computeSelectionState(records));\n        });\n        this.dataSource$$ = this.store.stateView.all$().subscribe((all) => {\n            this.dataSource.data = all;\n        });\n    }\n    /**\n     * Unbind the store watcher\n     * @internal\n     */\n    ngOnDestroy() {\n        this.unsubscribeStore();\n    }\n    unsubscribeStore() {\n        if (this.selection$$) {\n            this.selection$$.unsubscribe();\n        }\n        if (this.dataSource$$) {\n            this.dataSource$$.unsubscribe();\n        }\n    }\n    /**\n     * Trackby function\n     * @param record Record\n     * @param index Record index\n     * @internal\n     */\n    getTrackByFunction() {\n        return (index, record) => {\n            return record.ref;\n        };\n    }\n    /**\n     * Trigger a refresh of thre table. This can be useful when\n     * the data source doesn't emit a new value but for some reason\n     * the records need an update.\n     * @internal\n     */\n    refresh() {\n        this.cdRef.detectChanges();\n    }\n    paginatorChange(event) {\n        this.paginator = event;\n    }\n    /**\n     * On sort, sort the store\n     * @param event Sort event\n     * @internal\n     */\n    onSort(event) {\n        const direction = event.direction;\n        const column = this.template.columns\n            .find((c) => c.name === event.active);\n        if (direction === 'asc' || direction === 'desc') {\n            this.store.stateView.sort({\n                valueAccessor: (record) => this.getValue(record, column),\n                direction,\n                nullsFirst: this.sortNullsFirst\n            });\n            this.entitySortChange.emit({ column, direction });\n            this.entitySortChange$.next(true);\n        }\n        else {\n            this.store.stateView.sort(undefined);\n        }\n    }\n    /**\n     * When an entity is clicked, emit an event\n     * @param record Record\n     * @internal\n     */\n    onRowClick(record) {\n        this.lastRecordCheckedKey = this.store.stateView.getKey(record);\n        this.entityClick.emit(record.entity);\n    }\n    /**\n     * When an entity is selected, select it in the store and emit an event. Even if\n     * \"many\" is set to true, this method always select a single, exclusive row. Selecting\n     * multiple rows should be achieved by using the checkboxes.\n     * @param record Record\n     * @internal\n     */\n    onRowSelect(record) {\n        if (this.selection === false) {\n            return;\n        }\n        const entity = record.entity;\n        this.store.state.update(entity, { selected: true }, true);\n        this.entitySelectChange.emit({ added: [entity] });\n    }\n    /**\n     * Select or unselect all rows at once. On select, emit an event.\n     * @param toggle Select or unselect\n     * @internal\n     */\n    onToggleRows(toggle) {\n        if (this.selection === false) {\n            return;\n        }\n        this.store.state.updateAll({ selected: toggle });\n        if (toggle === true) {\n            const entities = this.store.stateView\n                .all()\n                .map((record) => record.entity);\n            this.entitySelectChange.emit({ added: [entities] });\n        }\n    }\n    /**\n     * When an entity is toggled, select or unselect it in the store. On select,\n     * emit an event.\n     * @param toggle Select or unselect\n     * @param record Record\n     * @internal\n     */\n    onToggleRow(toggle, record) {\n        if (this.selection === false) {\n            return;\n        }\n        const entity = record.entity;\n        const exclusive = toggle === true && !this.selectMany;\n        this.store.state.update(entity, { selected: toggle }, exclusive);\n        if (toggle === true) {\n            this.entitySelectChange.emit({ added: [entity] });\n        }\n        this.lastRecordCheckedKey = this.store.stateView.getKey(record);\n    }\n    /**\n     * When an entity is toggled, select or unselect it in the store. On select,\n     * emit an event.\n     * @param toggle Select or unselect\n     * @param record Record\n     * @internal\n     */\n    onShiftToggleRow(toggle, record, event) {\n        if (this.selection === false) {\n            return;\n        }\n        if (this.selectMany === false || this.lastRecordCheckedKey === undefined) {\n            this.onToggleRow(toggle, record);\n            return;\n        }\n        // This is a workaround mat checkbox wrong behavior\n        // when the shift key is held.\n        // See https://github.com/angular/components/issues/6232\n        const range = window.document.createRange();\n        range.selectNode(event.target);\n        window.getSelection().removeAllRanges();\n        window.getSelection().addRange(range);\n        event.stopImmediatePropagation();\n        const records = this.store.stateView.all();\n        const recordIndex = records.indexOf(record);\n        const lastRecordChecked = this.store.stateView.get(this.lastRecordCheckedKey);\n        const lastRecordIndex = records.indexOf(lastRecordChecked);\n        const indexes = [recordIndex, lastRecordIndex];\n        const selectRecords = records.slice(Math.min(...indexes), Math.max(...indexes) + 1);\n        const entities = selectRecords.map((_record) => _record.entity);\n        this.store.state.updateMany(entities, { selected: toggle });\n        if (toggle === true) {\n            this.entitySelectChange.emit({ added: entities });\n        }\n        this.lastRecordCheckedKey = this.store.stateView.getKey(record);\n    }\n    /**\n     * Compute the selection state\n     * @returns Whether all, some or no rows are selected\n     * @internal\n     */\n    computeSelectionState(selectedRecords) {\n        const states = EntityTableSelectionState;\n        const selectionCount = selectedRecords.length;\n        return selectionCount === 0 ?\n            states.None :\n            (selectionCount === this.store.stateView.count ? states.All : states.Some);\n    }\n    /**\n     * Whether a column is sortable\n     * @param column Column\n     * @returns True if a column is sortable\n     * @internal\n     */\n    columnIsSortable(column) {\n        let sortable = column.sort;\n        if (sortable === undefined) {\n            sortable = this.template.sort === undefined ? false : this.template.sort;\n        }\n        return sortable;\n    }\n    /**\n     * Whether a row is should be selected based on the underlying entity state\n     * @param record Record\n     * @returns True if a row should be selected\n     * @internal\n     */\n    rowIsSelected(record) {\n        const state = record.state;\n        return state.selected ? state.selected : false;\n    }\n    isImg(value) {\n        if (this.isUrl(value)) {\n            return (['jpg', 'png', 'gif'].indexOf(value.split('.').pop().toLowerCase()) !== -1);\n        }\n        else {\n            return false;\n        }\n    }\n    isUrl(value) {\n        if (typeof value === 'string') {\n            return (value.slice(0, 8) === 'https://' || value.slice(0, 7) === 'http://');\n        }\n        else {\n            return false;\n        }\n    }\n    /**\n     * Method to access an entity's values\n     * @param record Record\n     * @param column Column\n     * @returns Any value\n     * @internal\n     */\n    getValue(record, column) {\n        const entity = record.entity;\n        if (column.valueAccessor !== undefined) {\n            return column.valueAccessor(entity, record);\n        }\n        if (this.template.valueAccessor !== undefined) {\n            return this.template.valueAccessor(entity, column.name, record);\n        }\n        return this.store.getProperty(entity, column.name);\n    }\n    /**\n     * Return the type of renderer of a column\n     * @param column Column\n     * @returns Renderer type\n     * @internal\n     */\n    getColumnRenderer(column) {\n        if (column.renderer !== undefined) {\n            return column.renderer;\n        }\n        return EntityTableColumnRenderer.Default;\n    }\n    /**\n     * Return the table ngClass\n     * @returns ngClass\n     * @internal\n     */\n    getTableClass() {\n        return {\n            'igo-entity-table-with-selection': this.selection\n        };\n    }\n    /**\n     * Return a header ngClass\n     * @returns ngClass\n     * @internal\n     */\n    getHeaderClass() {\n        const func = this.template.headerClassFunc;\n        if (func instanceof Function) {\n            return func();\n        }\n        return {};\n    }\n    /**\n     * Return a row ngClass\n     * @param record Record\n     * @returns ngClass\n     * @internal\n     */\n    getRowClass(record) {\n        const entity = record.entity;\n        const func = this.template.rowClassFunc;\n        if (func instanceof Function) {\n            return func(entity, record);\n        }\n        return {};\n    }\n    /**\n     * Return a row ngClass\n     * @param record Record\n     * @param column Column\n     * @returns ngClass\n     * @internal\n     */\n    getCellClass(record, column) {\n        const entity = record.entity;\n        const cls = {};\n        const tableFunc = this.template.cellClassFunc;\n        if (tableFunc instanceof Function) {\n            Object.assign(cls, tableFunc(entity, column, record));\n        }\n        const columnFunc = column.cellClassFunc;\n        if (columnFunc instanceof Function) {\n            Object.assign(cls, columnFunc(entity, record));\n        }\n        return cls;\n    }\n    /**\n     * When a button is clicked\n     * @param func Function\n     * @param record Record\n     * @internal\n     */\n    onButtonClick(clickFunc, record) {\n        if (typeof clickFunc === 'function') {\n            clickFunc(record.entity, record);\n        }\n    }\n}\nEntityTableComponent.ɵfac = function EntityTableComponent_Factory(t) { return new (t || EntityTableComponent)(ɵɵdirectiveInject(ChangeDetectorRef)); };\nEntityTableComponent.ɵcmp = ɵɵdefineComponent({ type: EntityTableComponent, selectors: [[\"igo-entity-table\"]], inputs: { store: \"store\", paginator: \"paginator\", template: \"template\", scrollBehavior: \"scrollBehavior\", sortNullsFirst: \"sortNullsFirst\", withPaginator: \"withPaginator\", paginatorOptions: \"paginatorOptions\" }, outputs: { entityClick: \"entityClick\", entitySelectChange: \"entitySelectChange\", entitySortChange: \"entitySortChange\" }, features: [ɵɵNgOnChangesFeature], decls: 9, vars: 8, consts: [[1, \"table-container\"], [\"mat-table\", \"\", \"matSort\", \"\", 3, \"ngClass\", \"dataSource\", \"trackBy\", \"matSortChange\"], [\"matColumnDef\", \"selectionCheckbox\", 1, \"mat-cell-checkbox\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [3, \"matColumnDef\", 4, \"ngFor\", \"ngForOf\"], [\"mat-header-row\", \"\", 3, \"ngClass\", 4, \"matHeaderRowDef\", \"matHeaderRowDefSticky\"], [\"mat-row\", \"\", \"igoEntityTableRow\", \"\", 3, \"scrollBehavior\", \"ngClass\", \"selection\", \"selected\", \"select\", \"click\", 4, \"matRowDef\", \"matRowDefColumns\"], [3, \"store\", \"paginatorOptions\", \"entitySortChange$\", \"paginatorChange\", 4, \"ngIf\"], [\"mat-header-cell\", \"\"], [4, \"ngIf\"], [3, \"checked\", \"indeterminate\", \"change\"], [\"mat-cell\", \"\"], [3, \"checked\", \"mousedown\", \"click\", \"change\"], [3, \"matColumnDef\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [4, \"matCellDef\"], [\"mat-cell\", \"\", \"class\", \"mat-cell-text\", 3, \"ngClass\", 4, \"ngIf\", \"ngIfElse\"], [\"isAnUrlDefault\", \"\"], [\"mat-cell\", \"\", 1, \"mat-cell-text\", 3, \"ngClass\"], [\"target\", \"_blank\", \"rel\", \"noopener noreferrer\", 3, \"href\", \"click\"], [\"width\", \"50\", \"heigth\", \"auto\", 3, \"src\", 4, \"ngIf\", \"ngIfElse\"], [\"notImg\", \"\"], [\"width\", \"50\", \"heigth\", \"auto\", 3, \"src\"], [\"mat-cell\", \"\", \"class\", \"mat-cell-text\", 3, \"ngClass\", \"innerHTML\", 4, \"ngIf\", \"ngIfElse\"], [\"isAnUrlHTML\", \"\"], [\"mat-cell\", \"\", 1, \"mat-cell-text\", 3, \"ngClass\", \"innerHTML\"], [\"isAnUrlUnsanitizedHTML\", \"\"], [\"mat-cell\", \"\", \"class\", \"mat-cell-text\", 3, \"ngClass\", 4, \"matCellDef\"], [3, \"svgIcon\"], [4, \"ngFor\", \"ngForOf\"], [\"igoStopPropagation\", \"\", \"mat-icon-button\", \"\", 3, \"color\", \"click\", 4, \"ngIf\"], [\"igoStopPropagation\", \"\", \"mat-mini-fab\", \"\", 3, \"color\", \"click\", 4, \"ngIf\"], [\"igoStopPropagation\", \"\", \"mat-icon-button\", \"\", 3, \"color\", \"click\"], [\"igoStopPropagation\", \"\", \"mat-mini-fab\", \"\", 3, \"color\", \"click\"], [\"mat-header-row\", \"\", 3, \"ngClass\"], [\"mat-row\", \"\", \"igoEntityTableRow\", \"\", 3, \"scrollBehavior\", \"ngClass\", \"selection\", \"selected\", \"select\", \"click\"], [3, \"store\", \"paginatorOptions\", \"entitySortChange$\", \"paginatorChange\"]], template: function EntityTableComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵelementStart(1, \"table\", 1);\n        ɵɵlistener(\"matSortChange\", function EntityTableComponent_Template_table_matSortChange_1_listener($event) { return ctx.onSort($event); });\n        ɵɵelementContainerStart(2, 2);\n        ɵɵtemplate(3, EntityTableComponent_th_3_Template, 2, 1, \"th\", 3);\n        ɵɵtemplate(4, EntityTableComponent_td_4_Template, 2, 1, \"td\", 4);\n        ɵɵelementContainerEnd();\n        ɵɵtemplate(5, EntityTableComponent_ng_container_5_Template, 4, 4, \"ng-container\", 5);\n        ɵɵtemplate(6, EntityTableComponent_tr_6_Template, 1, 1, \"tr\", 6);\n        ɵɵtemplate(7, EntityTableComponent_tr_7_Template, 1, 4, \"tr\", 7);\n        ɵɵelementEnd();\n        ɵɵtemplate(8, EntityTableComponent_igo_entity_table_paginator_8_Template, 1, 3, \"igo-entity-table-paginator\", 8);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngClass\", ctx.getTableClass())(\"dataSource\", ctx.dataSource)(\"trackBy\", ctx.getTrackByFunction());\n        ɵɵadvance(4);\n        ɵɵproperty(\"ngForOf\", ctx.template.columns);\n        ɵɵadvance(1);\n        ɵɵproperty(\"matHeaderRowDef\", ctx.headers)(\"matHeaderRowDefSticky\", ctx.fixedHeader);\n        ɵɵadvance(1);\n        ɵɵproperty(\"matRowDefColumns\", ctx.headers);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.withPaginator);\n    } }, directives: [MatTable, MatSort, NgClass, MatColumnDef, MatHeaderCellDef, MatCellDef, NgForOf, MatHeaderRowDef, MatRowDef, NgIf, MatHeaderCell, MatCheckbox, MatCell, MatSortHeader, MatIcon, MatButton, StopPropagationDirective, MatHeaderRow, MatRow, EntityTableRowDirective, EntityTablePaginatorComponent], pipes: [AsyncPipe, SecureImagePipe, TranslatePipe, SanitizeHtmlPipe], styles: [\"[_nghost-%COMP%]{display:block;height:100%;width:100%}.table-compact[_nghost-%COMP%]     .mat-checkbox .mat-checkbox-ripple, .table-compact[_nghost-%COMP%]   tr.mat-header-row[_ngcontent-%COMP%]{height:36px}.table-compact[_nghost-%COMP%]     .mat-checkbox .mat-checkbox-ripple, .table-compact[_nghost-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:28px}.table-container[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;height:100%;overflow:auto}.mat-cell-text[_ngcontent-%COMP%]{overflow:hidden;word-wrap:break-word}td.mat-cell[_ngcontent-%COMP%], td.mat-footer-cell[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{padding:0 3px}entity-table[_ngcontent-%COMP%]   table.igo-entity-table-with-selection[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{-o-box-shadow:2px 0 2px 0 #ddd;box-shadow:2px 0 2px 0 #ddd;cursor:pointer}table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:7px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(EntityTableComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-entity-table',\n                templateUrl: './entity-table.component.html',\n                styleUrls: ['./entity-table.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ChangeDetectorRef }]; }, { store: [{\n            type: Input\n        }], paginator: [{\n            type: Input\n        }], template: [{\n            type: Input\n        }], scrollBehavior: [{\n            type: Input\n        }], sortNullsFirst: [{\n            type: Input\n        }], withPaginator: [{\n            type: Input\n        }], paginatorOptions: [{\n            type: Input\n        }], entityClick: [{\n            type: Output\n        }], entitySelectChange: [{\n            type: Output\n        }], entitySortChange: [{\n            type: Output\n        }] }); })();\n\nvar ActionbarMode;\n(function (ActionbarMode) {\n    ActionbarMode[\"Dock\"] = \"dock\";\n    ActionbarMode[\"Overlay\"] = \"overlay\";\n    ActionbarMode[\"Context\"] = \"context\";\n})(ActionbarMode || (ActionbarMode = {}));\n\n/**\n * The class is a specialized version of an EntityStore that stores\n * actions.\n */\nclass ActionStore extends EntityStore {\n}\n\nfunction ActionbarItemComponent_mat_list_item_0_button_4_mat_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"mat-icon\", 7);\n    ɵɵpipe(1, \"async\");\n} if (rf & 2) {\n    const ctx_r4 = ɵɵnextContext(3);\n    ɵɵpropertyInterpolate(\"svgIcon\", ɵɵpipeBind1(1, 1, ctx_r4.icon$));\n} }\nfunction ActionbarItemComponent_mat_list_item_0_button_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 5);\n    ɵɵpipe(1, \"async\");\n    ɵɵtemplate(2, ActionbarItemComponent_mat_list_item_0_button_4_mat_icon_2_Template, 2, 3, \"mat-icon\", 6);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext(2);\n    ɵɵproperty(\"color\", ctx_r2.color)(\"disabled\", ɵɵpipeBind1(1, 3, ctx_r2.disabled$));\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r2.withIcon);\n} }\nfunction ActionbarItemComponent_mat_list_item_0_h4_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"h4\", 8);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ɵɵpipeBind1(2, 1, ctx_r3.title));\n} }\nfunction ActionbarItemComponent_mat_list_item_0_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\", 2);\n    ɵɵlistener(\"click\", function ActionbarItemComponent_mat_list_item_0_Template_mat_list_item_click_0_listener() { ɵɵrestoreView(_r6); const ctx_r5 = ɵɵnextContext(); return ctx_r5.onClick(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵpipe(2, \"async\");\n    ɵɵpipe(3, \"async\");\n    ɵɵtemplate(4, ActionbarItemComponent_mat_list_item_0_button_4_Template, 3, 5, \"button\", 3);\n    ɵɵtemplate(5, ActionbarItemComponent_mat_list_item_0_h4_5_Template, 3, 3, \"h4\", 4);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ctx_r0.withTooltip ? ɵɵpipeBind1(1, 4, ɵɵpipeBind1(2, 6, ctx_r0.tooltip$) || ctx_r0.title) : \"\")(\"ngClass\", ɵɵpipeBind1(3, 8, ctx_r0.ngClass$));\n    ɵɵadvance(4);\n    ɵɵproperty(\"ngIf\", ctx_r0.withIcon);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.withTitle);\n} }\nfunction ActionbarItemComponent_mat_list_item_1_mat_checkbox_4_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-checkbox\", 11);\n    ɵɵlistener(\"change\", function ActionbarItemComponent_mat_list_item_1_mat_checkbox_4_Template_mat_checkbox_change_0_listener() { ɵɵrestoreView(_r9); const ctx_r8 = ɵɵnextContext(2); return ctx_r8.action.handler(); });\n    ɵɵpipe(1, \"async\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r7 = ɵɵnextContext(2);\n    ɵɵproperty(\"checked\", ɵɵpipeBind1(1, 2, ctx_r7.checkCondition$));\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(3, 4, ctx_r7.title), \" \");\n} }\nfunction ActionbarItemComponent_mat_list_item_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-list-item\", 9);\n    ɵɵpipe(1, \"translate\");\n    ɵɵpipe(2, \"async\");\n    ɵɵpipe(3, \"async\");\n    ɵɵtemplate(4, ActionbarItemComponent_mat_list_item_1_mat_checkbox_4_Template, 4, 6, \"mat-checkbox\", 10);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ctx_r1.withTooltip ? ɵɵpipeBind1(1, 3, ɵɵpipeBind1(2, 5, ctx_r1.tooltip$) || ctx_r1.title) : \"\")(\"ngClass\", ɵɵpipeBind1(3, 7, ctx_r1.ngClass$));\n    ɵɵadvance(4);\n    ɵɵproperty(\"ngIf\", ctx_r1.withTitle);\n} }\n/**\n * An action button\n */\nclass ActionbarItemComponent {\n    constructor() {\n        this.disabled$ = new BehaviorSubject(false);\n        this.checkCondition$ = new BehaviorSubject(undefined);\n        this.icon$ = new BehaviorSubject(undefined);\n        this.tooltip$ = new BehaviorSubject(undefined);\n        this.noDisplay$ = new BehaviorSubject(false);\n        this.ngClass$ = new BehaviorSubject({});\n        /**\n         * Color\n         */\n        this.color = 'default';\n        /**\n         * Whether the action title is displayed\n         */\n        this.withTitle = true;\n        /**\n         * Whether the action icon is displayed\n         */\n        this.withIcon = true;\n        /**\n         * Whether a tooltip should be shown\n         */\n        this.withTooltip = true;\n        /**\n         * Event emitted when the action button is clicked\n         */\n        this.trigger = new EventEmitter();\n    }\n    /**\n     * Whether the action is disabled\n     */\n    set disabled(value) { this.disabled$.next(value); }\n    get disabled() { return this.disabled$.value; }\n    /**\n     * Whether the action is display or not\n     */\n    set noDisplay(value) { this.noDisplay$.next(value); }\n    get noDisplay() { return this.noDisplay$.value; }\n    /**\n     * @internal\n     */\n    get title() { return this.action.title; }\n    ngOnInit() {\n        const args = this.action.args || [];\n        if (this.action.ngClass !== undefined) {\n            this.ngClass$$ = this.action.ngClass(...args)\n                .subscribe((ngClass) => this.updateNgClass(ngClass));\n        }\n        if (isObservable(this.action.icon)) {\n            this.icon$$ = this.action.icon\n                .subscribe((icon) => this.updateIcon(icon));\n        }\n        else {\n            this.updateIcon(this.action.icon);\n        }\n        if (isObservable(this.action.checkCondition)) {\n            this.checkCondition$$ = this.action.checkCondition\n                .subscribe((checkCondition) => this.updateCheckCondition(checkCondition));\n        }\n        else {\n            this.updateCheckCondition(this.action.checkCondition);\n        }\n        if (isObservable(this.action.tooltip)) {\n            this.tooltip$$ = this.action.tooltip\n                .subscribe((tooltip) => this.updateTooltip(tooltip));\n        }\n        else {\n            this.updateTooltip(this.action.tooltip);\n        }\n        if (this.action.availability !== undefined) {\n            this.availability$$ = this.action.availability(...args)\n                .subscribe((available) => this.disabled = !available);\n        }\n        this.disabled$$ = this.disabled$\n            .subscribe((disabled) => this.updateNgClass({ 'igo-actionbar-item-disabled': disabled }));\n        if (this.action.display !== undefined) {\n            this.display$$ = this.action.display(...args)\n                .subscribe((display) => this.noDisplay = !display);\n        }\n        this.noDisplay$$ = this.noDisplay$\n            .subscribe((noDisplay) => this.updateNgClass({ 'igo-actionbar-item-no-display': noDisplay }));\n    }\n    ngOnDestroy() {\n        if (this.ngClass$$ !== undefined) {\n            this.ngClass$$.unsubscribe();\n            this.ngClass$$ = undefined;\n        }\n        if (this.availability$$ !== undefined) {\n            this.availability$$.unsubscribe();\n            this.availability$$ = undefined;\n        }\n        if (this.display$$ !== undefined) {\n            this.display$$.unsubscribe();\n            this.display$$ = undefined;\n        }\n        if (this.checkCondition$$ !== undefined) {\n            this.checkCondition$$.unsubscribe();\n            this.checkCondition$$ = undefined;\n        }\n        if (this.icon$$ !== undefined) {\n            this.icon$$.unsubscribe();\n            this.icon$$ = undefined;\n        }\n        if (this.tooltip$$ !== undefined) {\n            this.tooltip$$.unsubscribe();\n            this.tooltip$$ = undefined;\n        }\n        this.disabled$$.unsubscribe();\n        this.noDisplay$$.unsubscribe();\n    }\n    /**\n     * When the action button is clicked, emit the 'trigger' event but don't\n     * invoke the action handler. This is handled by the parent component.\n     * @internal\n     */\n    onClick() {\n        if (this.disabled === true) {\n            return;\n        }\n        this.trigger.emit(this.action);\n    }\n    updateNgClass(ngClass) {\n        this.ngClass$.next(Object.assign({}, this.ngClass$.value, ngClass));\n    }\n    updateTooltip(tooltip) {\n        this.tooltip$.next(tooltip);\n    }\n    updateCheckCondition(checkCondition) {\n        this.checkCondition$.next(checkCondition);\n    }\n    updateIcon(icon) {\n        this.icon$.next(icon);\n    }\n}\nActionbarItemComponent.ɵfac = function ActionbarItemComponent_Factory(t) { return new (t || ActionbarItemComponent)(); };\nActionbarItemComponent.ɵcmp = ɵɵdefineComponent({ type: ActionbarItemComponent, selectors: [[\"igo-actionbar-item\"]], inputs: { action: \"action\", color: \"color\", withTitle: \"withTitle\", withIcon: \"withIcon\", withTooltip: \"withTooltip\", disabled: \"disabled\", noDisplay: \"noDisplay\" }, outputs: { trigger: \"trigger\" }, decls: 2, vars: 2, consts: [[\"matTooltipClass\", \"actionbarItemTooltip\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"ngClass\", \"click\", 4, \"ngIf\"], [\"class\", \"item-checkbox\", \"matTooltipClass\", \"actionbarItemTooltip\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"ngClass\", 4, \"ngIf\"], [\"matTooltipClass\", \"actionbarItemTooltip\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"ngClass\", \"click\"], [\"mat-list-avatar\", \"\", \"mat-icon-button\", \"\", 3, \"color\", \"disabled\", 4, \"ngIf\"], [\"matLine\", \"\", 4, \"ngIf\"], [\"mat-list-avatar\", \"\", \"mat-icon-button\", \"\", 3, \"color\", \"disabled\"], [3, \"svgIcon\", 4, \"ngIf\"], [3, \"svgIcon\"], [\"matLine\", \"\"], [\"matTooltipClass\", \"actionbarItemTooltip\", \"matTooltipShowDelay\", \"500\", 1, \"item-checkbox\", 3, \"matTooltip\", \"ngClass\"], [3, \"checked\", \"change\", 4, \"ngIf\"], [3, \"checked\", \"change\"]], template: function ActionbarItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, ActionbarItemComponent_mat_list_item_0_Template, 6, 10, \"mat-list-item\", 0);\n        ɵɵtemplate(1, ActionbarItemComponent_mat_list_item_1_Template, 5, 9, \"mat-list-item\", 1);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", !ctx.action.checkbox);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.action.checkbox);\n    } }, directives: [NgIf, MatListItem, MatTooltip, NgClass, MatButton, MatListAvatarCssMatStyler, MatIcon, MatLine, MatCheckbox], pipes: [TranslatePipe, AsyncPipe], styles: [\"mat-list-item.igo-actionbar-item-disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.26);cursor:default!important}mat-list-item.igo-actionbar-item-no-display[_ngcontent-%COMP%]{display:none}mat-checkbox[_ngcontent-%COMP%]{padding:12px}.item-checkbox[_ngcontent-%COMP%]{height:56px}.item-checkbox[_ngcontent-%COMP%]     .mat-checkbox-label{margin-left:20px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ActionbarItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-actionbar-item',\n                templateUrl: './actionbar-item.component.html',\n                styleUrls: ['./actionbar-item.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { action: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }], withTitle: [{\n            type: Input\n        }], withIcon: [{\n            type: Input\n        }], withTooltip: [{\n            type: Input\n        }], disabled: [{\n            type: Input\n        }], noDisplay: [{\n            type: Input\n        }], trigger: [{\n            type: Output\n        }] }); })();\n\nfunction ActionbarComponent_mat_list_0_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 5);\n    ɵɵelementStart(1, \"button\", 6);\n    ɵɵlistener(\"click\", function ActionbarComponent_mat_list_0_div_1_Template_button_click_1_listener() { ɵɵrestoreView(_r8); const ctx_r7 = ɵɵnextContext(2); return ctx_r7.scrollUp(); });\n    ɵɵpipe(2, \"translate\");\n    ɵɵelement(3, \"mat-icon\", 7);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(2, 1, \"igo.common.actionbar.scrollUp\"));\n} }\nfunction ActionbarComponent_mat_list_0_igo_actionbar_item_2_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-actionbar-item\", 8);\n    ɵɵlistener(\"trigger\", function ActionbarComponent_mat_list_0_igo_actionbar_item_2_Template_igo_actionbar_item_trigger_0_listener() { ɵɵrestoreView(_r10); const ctx_r9 = ɵɵnextContext(2); return ctx_r9.onTriggerAction(ctx_r9.toggleCollapseAction); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵɵnextContext(2);\n    ɵɵproperty(\"withTitle\", false)(\"withIcon\", true)(\"color\", ctx_r4.color)(\"disabled\", ctx_r4.store.view.empty)(\"action\", ctx_r4.toggleCollapseAction);\n} }\nfunction ActionbarComponent_mat_list_0_3_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-actionbar-item\", 11);\n    ɵɵlistener(\"trigger\", function ActionbarComponent_mat_list_0_3_ng_template_0_Template_igo_actionbar_item_trigger_0_listener() { ɵɵrestoreView(_r15); const action_r13 = ctx.$implicit; const ctx_r14 = ɵɵnextContext(3); return ctx_r14.onTriggerAction(action_r13); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const action_r13 = ctx.$implicit;\n    const ctx_r12 = ɵɵnextContext(3);\n    ɵɵproperty(\"withTitle\", ctx_r12.withTitle)(\"withIcon\", ctx_r12.withIcon)(\"withTooltip\", ctx_r12.withTooltip)(\"color\", ctx_r12.color)(\"disabled\", ctx_r12.store.state.get(action_r13).disabled)(\"action\", action_r13);\n} }\nfunction ActionbarComponent_mat_list_0_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, ActionbarComponent_mat_list_0_3_ng_template_0_Template, 1, 6, \"ng-template\", 9, 10, ɵɵtemplateRefExtractor);\n    ɵɵpipe(2, \"async\");\n} if (rf & 2) {\n    const ctx_r5 = ɵɵnextContext(2);\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(2, 1, ctx_r5.store.view.all$()));\n} }\nfunction ActionbarComponent_mat_list_0_div_4_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 12);\n    ɵɵelementStart(1, \"button\", 6);\n    ɵɵlistener(\"click\", function ActionbarComponent_mat_list_0_div_4_Template_button_click_1_listener() { ɵɵrestoreView(_r17); const ctx_r16 = ɵɵnextContext(2); return ctx_r16.scrollDown(); });\n    ɵɵpipe(2, \"translate\");\n    ɵɵelement(3, \"mat-icon\", 13);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(2, 1, \"igo.common.actionbar.scrollDown\"));\n} }\nfunction ActionbarComponent_mat_list_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-list\");\n    ɵɵtemplate(1, ActionbarComponent_mat_list_0_div_1_Template, 4, 3, \"div\", 2);\n    ɵɵtemplate(2, ActionbarComponent_mat_list_0_igo_actionbar_item_2_Template, 1, 5, \"igo-actionbar-item\", 3);\n    ɵɵtemplate(3, ActionbarComponent_mat_list_0_3_Template, 3, 3, undefined, 0);\n    ɵɵtemplate(4, ActionbarComponent_mat_list_0_div_4_Template, 4, 3, \"div\", 4);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.heightCondition && ctx_r0.positionConditionTop && ctx_r0.isDesktop);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.withToggleButton);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r0.collapsed);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.heightCondition && ctx_r0.positionConditionLow && ctx_r0.isDesktop);\n} }\nfunction ActionbarComponent_div_1_ng_template_7_Template(rf, ctx) { if (rf & 1) {\n    const _r22 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-actionbar-item\", 18);\n    ɵɵlistener(\"trigger\", function ActionbarComponent_div_1_ng_template_7_Template_igo_actionbar_item_trigger_0_listener() { ɵɵrestoreView(_r22); const action_r20 = ctx.$implicit; const ctx_r21 = ɵɵnextContext(2); return ctx_r21.onTriggerAction(action_r20); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const action_r20 = ctx.$implicit;\n    const ctx_r19 = ɵɵnextContext(2);\n    ɵɵproperty(\"withTitle\", ctx_r19.withTitle)(\"withIcon\", ctx_r19.withIcon)(\"color\", ctx_r19.color)(\"action\", action_r20);\n} }\nfunction ActionbarComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\");\n    ɵɵelementStart(1, \"button\", 14);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelement(3, \"mat-icon\", 15);\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"mat-menu\", 16, 17);\n    ɵɵelementStart(6, \"mat-list\");\n    ɵɵtemplate(7, ActionbarComponent_div_1_ng_template_7_Template, 1, 4, \"ng-template\", 9);\n    ɵɵpipe(8, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r18 = ɵɵreference(5);\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(2, 10, \"igo.common.actionbar.icon\"))(\"matMenuTriggerFor\", _r18)(\"disabled\", ctx_r1.store.view.empty)(\"color\", ctx_r1.iconColor);\n    ɵɵadvance(2);\n    ɵɵproperty(\"svgIcon\", ctx_r1.icon);\n    ɵɵadvance(1);\n    ɵɵclassMap(ctx_r1.overlayClass);\n    ɵɵproperty(\"xPosition\", ctx_r1.xPosition)(\"yPosition\", ctx_r1.yPosition);\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(8, 12, ctx_r1.store.view.all$()));\n} }\nfunction ActionbarComponent_mat_card_2_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    const _r26 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-actionbar-item\", 18);\n    ɵɵlistener(\"trigger\", function ActionbarComponent_mat_card_2_ng_template_2_Template_igo_actionbar_item_trigger_0_listener() { ɵɵrestoreView(_r26); const action_r24 = ctx.$implicit; const ctx_r25 = ɵɵnextContext(2); return ctx_r25.onTriggerAction(action_r24); });\n    ɵɵelementEnd();\n    ɵɵelement(1, \"br\");\n} if (rf & 2) {\n    const action_r24 = ctx.$implicit;\n    const ctx_r23 = ɵɵnextContext(2);\n    ɵɵproperty(\"withTitle\", ctx_r23.withTitle)(\"withIcon\", ctx_r23.withIcon)(\"color\", ctx_r23.color)(\"action\", action_r24);\n} }\nfunction ActionbarComponent_mat_card_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-card\", 19);\n    ɵɵelementStart(1, \"mat-list\");\n    ɵɵtemplate(2, ActionbarComponent_mat_card_2_ng_template_2_Template, 2, 4, \"ng-template\", 9);\n    ɵɵpipe(3, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(3, 1, ctx_r2.store.view.all$()));\n} }\n/**\n * A list of action buttons.\n * This component can be displayed in one of two way: 'dock' or 'overlay'\n */\nclass ActionbarComponent {\n    constructor(overlay, elRef, cdRef, mediaService) {\n        this.overlay = overlay;\n        this.elRef = elRef;\n        this.cdRef = cdRef;\n        this.mediaService = mediaService;\n        /**\n         * Reference to the ActionbarMode enum for use in the template\n         * @internal\n         */\n        this.actionbarMode = ActionbarMode;\n        /**\n         * Whether the actionbar is collapsed (Dock mode)\n         * @internal\n         */\n        this.collapsed = false;\n        /**\n         * Toggle collapse action (Dock)\n         * @internal\n         */\n        this.toggleCollapseAction = {\n            id: 'actionbar_toggle',\n            icon: 'dots-vertical',\n            handler: () => {\n                this.collapsed = !this.collapsed;\n            }\n        };\n        /**\n         * Height Condition for scroll button\n         */\n        this.heightCondition$ = new BehaviorSubject(false);\n        /**\n         * Position Condition for top scroll button\n         */\n        this.positionConditionTop$ = new BehaviorSubject(true);\n        /**\n         * Position Condition for low scroll button\n         */\n        this.positionConditionLow$ = new BehaviorSubject(true);\n        /**\n         * Actionbar mode\n         */\n        this.mode = ActionbarMode.Dock;\n        /**\n         * Whether a toggle button should be displayed (Dock mode)\n         */\n        this.withToggleButton = false;\n        /**\n         * Whether a the actionbar should display buttons horizontally\n         */\n        this.horizontal = false;\n        /**\n         * Color\n         */\n        this.color = 'default';\n        /**\n         * Color of the button if action mode === overlay\n         */\n        this.iconColor = 'default';\n        /**\n         * Whether action titles are displayed\n         */\n        this.withTitle = true;\n        /**\n         * Whether action tooltips are displayed\n         */\n        this.withTooltip = true;\n        /**\n         * Whether action titles are displayed (condition for scroll button)\n         */\n        this.scrollActive = true;\n        /**\n         * Whether action icons are displayed\n         */\n        this.withIcon = true;\n        /**\n         * Which icon want to be shown\n         */\n        this.icon = 'dots-horizontal';\n        /**\n         * Overlay X position\n         */\n        this.xPosition = 'before';\n        /**\n         * Overlay Y position\n         */\n        this.yPosition = 'above';\n        this._overlayClass = '';\n    }\n    /**\n     * Class to add to the actionbar overlay\n     */\n    set overlayClass(value) {\n        this._overlayClass = value;\n    }\n    get overlayClass() {\n        return [this._overlayClass, 'igo-actionbar-overlay'].join(' ');\n    }\n    /**\n     * @ignore\n     */\n    get withTitleClass() {\n        return this.withTitle;\n    }\n    /**\n     * @ignore\n     */\n    get withIconClass() {\n        return this.withIcon;\n    }\n    /**\n     * @ignore\n     */\n    get horizontalClass() {\n        return this.horizontal;\n    }\n    get heightCondition() {\n        const el = this.elRef.nativeElement;\n        if (this.scrollActive === false) {\n            if (el.clientHeight < el.scrollHeight) {\n                return true;\n            }\n        }\n        return false;\n    }\n    get positionConditionTop() {\n        if (this.elRef.nativeElement.scrollTop === 0) {\n            return false;\n        }\n        return true;\n    }\n    get positionConditionLow() {\n        const el = this.elRef.nativeElement;\n        if (el.scrollTop >= (el.scrollHeight - el.clientHeight)) {\n            return false;\n        }\n        return true;\n    }\n    get isDesktop() {\n        return this.mediaService.getMedia() === Media.Desktop;\n    }\n    /**\n     * @internal\n     */\n    ngOnChanges(changes) {\n        const store = changes.store;\n        if (store && store.currentValue !== store.previousValue) {\n            if (this.watcher !== undefined) {\n                this.watcher.destroy();\n            }\n            this.watcher = new EntityStoreWatcher(this.store, this.cdRef);\n        }\n    }\n    /**\n     * @internal\n     */\n    ngOnDestroy() {\n        this.watcher.destroy();\n    }\n    /**\n     * Invoke the action handler\n     * @internal\n     */\n    onTriggerAction(action) {\n        const args = action.args || [];\n        action.handler(...args);\n    }\n    scrollDown() {\n        this.elRef.nativeElement.scrollBy(0, 52);\n    }\n    scrollUp() {\n        this.elRef.nativeElement.scrollBy(0, -52);\n    }\n}\nActionbarComponent.ɵfac = function ActionbarComponent_Factory(t) { return new (t || ActionbarComponent)(ɵɵdirectiveInject(Overlay), ɵɵdirectiveInject(ElementRef), ɵɵdirectiveInject(ChangeDetectorRef), ɵɵdirectiveInject(MediaService)); };\nActionbarComponent.ɵcmp = ɵɵdefineComponent({ type: ActionbarComponent, selectors: [[\"igo-actionbar\"]], hostVars: 6, hostBindings: function ActionbarComponent_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵɵclassProp(\"with-title\", ctx.withTitleClass)(\"with-icon\", ctx.withIconClass)(\"horizontal\", ctx.horizontalClass);\n    } }, inputs: { store: \"store\", mode: \"mode\", withToggleButton: \"withToggleButton\", horizontal: \"horizontal\", color: \"color\", iconColor: \"iconColor\", withTitle: \"withTitle\", withTooltip: \"withTooltip\", scrollActive: \"scrollActive\", withIcon: \"withIcon\", icon: \"icon\", xPosition: \"xPosition\", yPosition: \"yPosition\", overlayClass: \"overlayClass\" }, features: [ɵɵNgOnChangesFeature], decls: 3, vars: 3, consts: [[4, \"ngIf\"], [\"class\", \"context-menu-card mat-elevation-z4\", 4, \"ngIf\"], [\"id\", \"topChevron\", 4, \"ngIf\"], [\"color\", \"accent\", 3, \"withTitle\", \"withIcon\", \"color\", \"disabled\", \"action\", \"trigger\", 4, \"ngIf\"], [\"id\", \"lowChevron\", 4, \"ngIf\"], [\"id\", \"topChevron\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"chevron-up\"], [\"color\", \"accent\", 3, \"withTitle\", \"withIcon\", \"color\", \"disabled\", \"action\", \"trigger\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"buttonContent\", \"\"], [\"color\", \"accent\", 3, \"withTitle\", \"withIcon\", \"withTooltip\", \"color\", \"disabled\", \"action\", \"trigger\"], [\"id\", \"lowChevron\"], [\"svgIcon\", \"chevron-down\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"buttonOverlay\", 3, \"matTooltip\", \"matMenuTriggerFor\", \"disabled\", \"color\"], [3, \"svgIcon\"], [\"overlapTrigger\", \"true\", 1, \"igo-compact-menu\", \"igo-no-min-width-menu\", 3, \"xPosition\", \"yPosition\"], [\"actionbarMenu\", \"matMenu\"], [\"color\", \"accent\", 3, \"withTitle\", \"withIcon\", \"color\", \"action\", \"trigger\"], [1, \"context-menu-card\", \"mat-elevation-z4\"]], template: function ActionbarComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, ActionbarComponent_mat_list_0_Template, 5, 4, \"mat-list\", 0);\n        ɵɵtemplate(1, ActionbarComponent_div_1_Template, 9, 14, \"div\", 0);\n        ɵɵtemplate(2, ActionbarComponent_mat_card_2_Template, 4, 3, \"mat-card\", 1);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.mode === ctx.actionbarMode.Dock);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.mode === ctx.actionbarMode.Overlay);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.mode === ctx.actionbarMode.Context);\n    } }, directives: [NgIf, MatList, MatButton, MatTooltip, MatIcon, ActionbarItemComponent, NgForOf, MatMenuTrigger, _MatMenu, MatCard], pipes: [TranslatePipe, AsyncPipe], styles: [\"[_nghost-%COMP%]{display:block;height:100%;overflow:auto;position:relative}button[_ngcontent-%COMP%]{margin:4px}.buttonOverlay[_ngcontent-%COMP%]{margin:0}mat-list[_ngcontent-%COMP%]{padding-top:0}.horizontal[_nghost-%COMP%]{max-width:100%;overflow:unset}.horizontal[_nghost-%COMP%]   mat-list[_ngcontent-%COMP%]{white-space:nowrap;width:auto}.horizontal[_nghost-%COMP%]   igo-actionbar-item[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]     .mat-list .mat-list-item .mat-list-text>*{-webkit-box-orient:vertical;-webkit-line-clamp:2;display:-webkit-box;line-height:18px;max-height:36px;overflow:hidden;text-overflow:ellipsis;white-space:normal}[_nghost-%COMP%]     .mat-list-base .mat-list-item.mat-list-item-with-avatar{height:46px}[_nghost-%COMP%]     .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content{display:-webkit-flex;height:46px;padding:3px}[_nghost-%COMP%]     .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content>mat-icon{padding:8px}igo-actionbar-item[_ngcontent-%COMP%]     mat-list-item [mat-list-avatar]{height:auto;width:40px}igo-actionbar-item[_ngcontent-%COMP%]     mat-list-item:hover{cursor:pointer}.context-menu-card[_ngcontent-%COMP%]{margin:10px;padding:8px 3px}#topChevron[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:3}@media (-ms-high-contrast:active),(-ms-high-contrast:none){#topChevron[_ngcontent-%COMP%]{position:fixed;top:unset}}@supports (-ms-accelerator:true){#topChevron[_ngcontent-%COMP%]{position:fixed;top:unset}}#lowChevron[_ngcontent-%COMP%]{background-color:#fff;bottom:0;position:fixed;position:-webkit-sticky;position:sticky;z-index:3}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ActionbarComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-actionbar',\n                templateUrl: './actionbar.component.html',\n                styleUrls: ['./actionbar.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: Overlay }, { type: ElementRef }, { type: ChangeDetectorRef }, { type: MediaService }]; }, { store: [{\n            type: Input\n        }], mode: [{\n            type: Input\n        }], withToggleButton: [{\n            type: Input\n        }], horizontal: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }], iconColor: [{\n            type: Input\n        }], withTitle: [{\n            type: Input\n        }], withTooltip: [{\n            type: Input\n        }], scrollActive: [{\n            type: Input\n        }], withIcon: [{\n            type: Input\n        }], icon: [{\n            type: Input\n        }], xPosition: [{\n            type: Input\n        }], yPosition: [{\n            type: Input\n        }], overlayClass: [{\n            type: Input\n        }], withTitleClass: [{\n            type: HostBinding,\n            args: ['class.with-title']\n        }], withIconClass: [{\n            type: HostBinding,\n            args: ['class.with-icon']\n        }], horizontalClass: [{\n            type: HostBinding,\n            args: ['class.horizontal']\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoActionbarModule {\n}\nIgoActionbarModule.ɵmod = ɵɵdefineNgModule({ type: IgoActionbarModule });\nIgoActionbarModule.ɵinj = ɵɵdefineInjector({ factory: function IgoActionbarModule_Factory(t) { return new (t || IgoActionbarModule)(); }, imports: [[\n            CommonModule,\n            IgoLanguageModule,\n            MatButtonModule,\n            MatIconModule,\n            MatTooltipModule,\n            MatMenuModule,\n            MatListModule,\n            MatCardModule,\n            MatCheckboxModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoActionbarModule, { declarations: [ActionbarComponent, ActionbarItemComponent], imports: [CommonModule,\n        IgoLanguageModule,\n        MatButtonModule,\n        MatIconModule,\n        MatTooltipModule,\n        MatMenuModule,\n        MatListModule,\n        MatCardModule,\n        MatCheckboxModule], exports: [ActionbarComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoActionbarModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoLanguageModule,\n                    MatButtonModule,\n                    MatIconModule,\n                    MatTooltipModule,\n                    MatMenuModule,\n                    MatListModule,\n                    MatCardModule,\n                    MatCheckboxModule\n                ],\n                exports: [ActionbarComponent],\n                declarations: [ActionbarComponent, ActionbarItemComponent]\n            }]\n    }], null, null); })();\n\nclass IgoActionModule {\n}\nIgoActionModule.ɵmod = ɵɵdefineNgModule({ type: IgoActionModule });\nIgoActionModule.ɵinj = ɵɵdefineInjector({ factory: function IgoActionModule_Factory(t) { return new (t || IgoActionModule)(); }, providers: [], imports: [[\n            CommonModule,\n            IgoActionbarModule\n        ], IgoActionbarModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoActionModule, { imports: [CommonModule,\n        IgoActionbarModule], exports: [IgoActionbarModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoActionModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoActionbarModule\n                ],\n                exports: [\n                    IgoActionbarModule\n                ],\n                declarations: [],\n                providers: []\n            }]\n    }], null, null); })();\n\nconst _c0 = function (a0) { return { \"igo-backdrop-shown\": a0 }; };\nclass BackdropComponent {\n    constructor() { }\n    get shown() {\n        return this._shown;\n    }\n    set shown(value) {\n        this._shown = value;\n    }\n}\nBackdropComponent.ɵfac = function BackdropComponent_Factory(t) { return new (t || BackdropComponent)(); };\nBackdropComponent.ɵcmp = ɵɵdefineComponent({ type: BackdropComponent, selectors: [[\"igo-backdrop\"]], inputs: { shown: \"shown\" }, decls: 1, vars: 3, consts: [[3, \"ngClass\"]], template: function BackdropComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"div\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngClass\", ɵɵpureFunction1(1, _c0, ctx.shown));\n    } }, directives: [NgClass], styles: [\"[_nghost-%COMP%] > div[_ngcontent-%COMP%]{background-color:hsla(0,0%,39.2%,.5);bottom:0;display:none;left:0;position:absolute;right:0;top:0;z-index:2}[_nghost-%COMP%] > div.igo-backdrop-shown[_ngcontent-%COMP%]{display:block}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(BackdropComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-backdrop',\n                templateUrl: './backdrop.component.html',\n                styleUrls: ['./backdrop.component.scss']\n            }]\n    }], function () { return []; }, { shown: [{\n            type: Input\n        }] }); })();\n\nclass IgoBackdropModule {\n    static forRoot() {\n        return {\n            ngModule: IgoBackdropModule,\n            providers: []\n        };\n    }\n}\nIgoBackdropModule.ɵmod = ɵɵdefineNgModule({ type: IgoBackdropModule });\nIgoBackdropModule.ɵinj = ɵɵdefineInjector({ factory: function IgoBackdropModule_Factory(t) { return new (t || IgoBackdropModule)(); }, imports: [[CommonModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoBackdropModule, { declarations: [BackdropComponent], imports: [CommonModule], exports: [BackdropComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoBackdropModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule],\n                declarations: [BackdropComponent],\n                exports: [BackdropComponent]\n            }]\n    }], null, null); })();\n\nclass IgoBadgeIconDirective {\n    constructor(el, matIconRegistry) {\n        this.el = el;\n        this.matIconRegistry = matIconRegistry;\n        this.hidden = false;\n        this.disabled = false;\n        this.inverseColor = false;\n        this.inheritColor = false;\n    }\n    set igoMatBadgeIcon(value) {\n        this.matIconRegistry.getNamedSvgIcon(value).subscribe((svgObj) => {\n            this.svg = svgObj;\n            this.updateSvg();\n        });\n    }\n    set matBadgeHidden(value) {\n        this.hidden = value;\n        this.updateHidden();\n    }\n    set matBadgeDisabled(value) {\n        this.disabled = value;\n        this.updateDisabled();\n    }\n    set igoMatBadgeInverseColor(value) {\n        this.inverseColor = value;\n        this.updateColor();\n    }\n    set igoMatBadgeInheritColor(value) {\n        this.inheritColor = value;\n        this.updateColor();\n    }\n    get badge() {\n        return this.el.nativeElement.querySelector('.mat-badge-content');\n    }\n    ngOnInit() {\n        this.badge.style.alignItems = 'center';\n        this.badge.style.justifyContent = 'center';\n        this.updateHidden();\n        this.updateColor();\n        this.updateSvg();\n    }\n    updateSvg() {\n        if (!this.badge) {\n            return;\n        }\n        this.badge.innerHTML = '';\n        if (this.svg) {\n            this.badge.appendChild(this.svg);\n        }\n    }\n    updateColor() {\n        if (!this.badge) {\n            return;\n        }\n        if (this.inheritColor) {\n            if (this.inverseColor) {\n                this.badge.style.color = 'currentColor';\n                this.badge.style.background = 'none';\n            }\n            else {\n                this.badge.style.color = '';\n                this.badge.style.background = 'currentColor';\n            }\n        }\n        else {\n            if (this.inverseColor) {\n                this.badge.style.color = window\n                    .getComputedStyle(this.badge, null)\n                    .getPropertyValue('background-color');\n                this.badge.style.background = 'none';\n            }\n            else {\n                this.badge.style.color = '';\n                this.badge.style.background = '';\n            }\n        }\n        this.originalColor = this.badge.style.color;\n        this.updateDisabled();\n    }\n    updateHidden() {\n        if (!this.badge) {\n            return;\n        }\n        this.badge.style.display = this.hidden ? 'none' : 'flex';\n    }\n    updateDisabled() {\n        if (!this.badge || !this.inverseColor) {\n            return;\n        }\n        if (this.disabled) {\n            this.originalColor = this.badge.style.color;\n            this.badge.style.color = '#b9b9b9';\n        }\n        else {\n            this.badge.style.color = this.originalColor;\n        }\n    }\n}\nIgoBadgeIconDirective.ɵfac = function IgoBadgeIconDirective_Factory(t) { return new (t || IgoBadgeIconDirective)(ɵɵdirectiveInject(ElementRef), ɵɵdirectiveInject(MatIconRegistry)); };\nIgoBadgeIconDirective.ɵdir = ɵɵdefineDirective({ type: IgoBadgeIconDirective, selectors: [[\"\", \"igoMatBadgeIcon\", \"\"]], inputs: { igoMatBadgeIcon: \"igoMatBadgeIcon\", matBadgeHidden: \"matBadgeHidden\", matBadgeDisabled: \"matBadgeDisabled\", igoMatBadgeInverseColor: \"igoMatBadgeInverseColor\", igoMatBadgeInheritColor: \"igoMatBadgeInheritColor\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoBadgeIconDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoMatBadgeIcon]'\n            }]\n    }], function () { return [{ type: ElementRef }, { type: MatIconRegistry }]; }, { igoMatBadgeIcon: [{\n            type: Input\n        }], matBadgeHidden: [{\n            type: Input\n        }], matBadgeDisabled: [{\n            type: Input\n        }], igoMatBadgeInverseColor: [{\n            type: Input\n        }], igoMatBadgeInheritColor: [{\n            type: Input\n        }] }); })();\n\nclass IgoMatBadgeIconModule {\n    static forRoot() {\n        return {\n            ngModule: IgoMatBadgeIconModule,\n            providers: []\n        };\n    }\n}\nIgoMatBadgeIconModule.ɵmod = ɵɵdefineNgModule({ type: IgoMatBadgeIconModule });\nIgoMatBadgeIconModule.ɵinj = ɵɵdefineInjector({ factory: function IgoMatBadgeIconModule_Factory(t) { return new (t || IgoMatBadgeIconModule)(); }, imports: [[MatBadgeModule, MatIconModule], MatBadgeModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoMatBadgeIconModule, { declarations: [IgoBadgeIconDirective], imports: [MatBadgeModule, MatIconModule], exports: [MatBadgeModule, IgoBadgeIconDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoMatBadgeIconModule, [{\n        type: NgModule,\n        args: [{\n                imports: [MatBadgeModule, MatIconModule],\n                declarations: [IgoBadgeIconDirective],\n                exports: [MatBadgeModule, IgoBadgeIconDirective]\n            }]\n    }], null, null); })();\n\nclass ClickoutDirective {\n    constructor(el) {\n        this.el = el;\n        this.clickout = new EventEmitter();\n    }\n    handleMouseClick(event, target) {\n        if (!target) {\n            return;\n        }\n        if (!this.el.nativeElement.contains(target)) {\n            this.clickout.emit(event);\n        }\n    }\n}\nClickoutDirective.ɵfac = function ClickoutDirective_Factory(t) { return new (t || ClickoutDirective)(ɵɵdirectiveInject(ElementRef)); };\nClickoutDirective.ɵdir = ɵɵdefineDirective({ type: ClickoutDirective, selectors: [[\"\", \"igoClickout\", \"\"]], hostBindings: function ClickoutDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"click\", function ClickoutDirective_click_HostBindingHandler($event) { return ctx.handleMouseClick($event, $event.target); }, false, ɵɵresolveDocument);\n    } }, outputs: { clickout: \"clickout\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ClickoutDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoClickout]'\n            }]\n    }], function () { return [{ type: ElementRef }]; }, { clickout: [{\n            type: Output\n        }], handleMouseClick: [{\n            type: HostListener,\n            args: ['document:click', ['$event', '$event.target']]\n        }] }); })();\n\nclass IgoClickoutModule {\n    static forRoot() {\n        return {\n            ngModule: IgoClickoutModule,\n            providers: []\n        };\n    }\n}\nIgoClickoutModule.ɵmod = ɵɵdefineNgModule({ type: IgoClickoutModule });\nIgoClickoutModule.ɵinj = ɵɵdefineInjector({ factory: function IgoClickoutModule_Factory(t) { return new (t || IgoClickoutModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoClickoutModule, { declarations: [ClickoutDirective], exports: [ClickoutDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoClickoutModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [ClickoutDirective],\n                exports: [ClickoutDirective]\n            }]\n    }], null, null); })();\n\nclass ClonePipe {\n    transform(value, args) {\n        if (value === undefined) {\n            return value;\n        }\n        if (value instanceof Array) {\n            return value.map(obj => Object.assign(Object.create(obj), obj));\n        }\n        else {\n            return Object.assign(Object.create(value), value);\n        }\n    }\n}\nClonePipe.ɵfac = function ClonePipe_Factory(t) { return new (t || ClonePipe)(); };\nClonePipe.ɵpipe = ɵɵdefinePipe({ name: \"clone\", type: ClonePipe, pure: true });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ClonePipe, [{\n        type: Pipe,\n        args: [{\n                name: 'clone'\n            }]\n    }], null, null); })();\n\nclass IgoCloneModule {\n    static forRoot() {\n        return {\n            ngModule: IgoCloneModule,\n            providers: []\n        };\n    }\n}\nIgoCloneModule.ɵmod = ɵɵdefineNgModule({ type: IgoCloneModule });\nIgoCloneModule.ɵinj = ɵɵdefineInjector({ factory: function IgoCloneModule_Factory(t) { return new (t || IgoCloneModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoCloneModule, { declarations: [ClonePipe], exports: [ClonePipe] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoCloneModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [ClonePipe],\n                exports: [ClonePipe]\n            }]\n    }], null, null); })();\n\nclass CollapseDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n        this._collapsed = false;\n        this.toggle = new EventEmitter();\n    }\n    get target() {\n        return this._target;\n    }\n    set target(value) {\n        this._target = value;\n    }\n    get collapsed() {\n        return this._collapsed;\n    }\n    set collapsed(collapsed) {\n        collapsed ? this.collapseTarget() : this.expandTarget();\n        this._collapsed = collapsed;\n        this.toggle.emit(collapsed);\n    }\n    click() {\n        this.collapsed = !this.collapsed;\n    }\n    collapseTarget() {\n        this.renderer.addClass(this.target, 'igo-collapsed');\n        this.renderer.addClass(this.el.nativeElement, 'collapsed');\n    }\n    expandTarget() {\n        this.renderer.removeClass(this.target, 'igo-collapsed');\n        this.renderer.removeClass(this.el.nativeElement, 'collapsed');\n    }\n}\nCollapseDirective.ɵfac = function CollapseDirective_Factory(t) { return new (t || CollapseDirective)(ɵɵdirectiveInject(Renderer2), ɵɵdirectiveInject(ElementRef)); };\nCollapseDirective.ɵdir = ɵɵdefineDirective({ type: CollapseDirective, selectors: [[\"\", \"igoCollapse\", \"\"]], hostBindings: function CollapseDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"click\", function CollapseDirective_click_HostBindingHandler() { return ctx.click(); });\n    } }, inputs: { target: \"target\", collapsed: \"collapsed\" }, outputs: { toggle: \"toggle\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CollapseDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoCollapse]'\n            }]\n    }], function () { return [{ type: Renderer2 }, { type: ElementRef }]; }, { target: [{\n            type: Input\n        }], collapsed: [{\n            type: Input\n        }], toggle: [{\n            type: Output\n        }], click: [{\n            type: HostListener,\n            args: ['click']\n        }] }); })();\n\nconst _c0$1 = [\"*\"];\nclass CollapsibleComponent {\n    constructor() {\n        this._title = '';\n        this._collapsed = false;\n        this.toggle = new EventEmitter();\n    }\n    get title() {\n        return this._title;\n    }\n    set title(value) {\n        this._title = value;\n    }\n    get collapsed() {\n        return this._collapsed;\n    }\n    set collapsed(value) {\n        this._collapsed = value;\n        this.toggle.emit(value);\n    }\n}\nCollapsibleComponent.ɵfac = function CollapsibleComponent_Factory(t) { return new (t || CollapsibleComponent)(); };\nCollapsibleComponent.ɵcmp = ɵɵdefineComponent({ type: CollapsibleComponent, selectors: [[\"igo-collapsible\"]], inputs: { title: \"title\", collapsed: \"collapsed\" }, outputs: { toggle: \"toggle\" }, ngContentSelectors: _c0$1, decls: 7, vars: 3, consts: [[\"svgIcon\", \"chevron-up\", \"mat-list-avatar\", \"\", \"igoCollapse\", \"\", 1, \"igo-chevron\", 3, \"target\", \"collapsed\", \"toggle\"], [\"matLine\", \"\"], [\"content\", \"\"]], template: function CollapsibleComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵprojectionDef();\n        ɵɵelementStart(0, \"mat-list-item\");\n        ɵɵelementStart(1, \"mat-icon\", 0);\n        ɵɵlistener(\"toggle\", function CollapsibleComponent_Template_mat_icon_toggle_1_listener($event) { return ctx.collapsed = $event; });\n        ɵɵelementEnd();\n        ɵɵelementStart(2, \"h4\", 1);\n        ɵɵtext(3);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(4, \"div\", null, 2);\n        ɵɵprojection(6);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r0 = ɵɵreference(5);\n        ɵɵadvance(1);\n        ɵɵproperty(\"target\", _r0)(\"collapsed\", ctx.collapsed);\n        ɵɵadvance(2);\n        ɵɵtextInterpolate(ctx.title);\n    } }, directives: [MatListItem, MatIcon, MatListAvatarCssMatStyler, CollapseDirective, MatLine], styles: [\"[_nghost-%COMP%]     .mat-list .mat-list-item.mat-list-avatar{height:auto;padding:0;width:auto}mat-list-item[_ngcontent-%COMP%]{overflow:hidden}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CollapsibleComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-collapsible',\n                templateUrl: './collapsible.component.html',\n                styleUrls: ['./collapsible.component.scss']\n            }]\n    }], null, { title: [{\n            type: Input\n        }], collapsed: [{\n            type: Input\n        }], toggle: [{\n            type: Output\n        }] }); })();\n\nclass IgoCollapsibleModule {\n    static forRoot() {\n        return {\n            ngModule: IgoCollapsibleModule,\n            providers: []\n        };\n    }\n}\nIgoCollapsibleModule.ɵmod = ɵɵdefineNgModule({ type: IgoCollapsibleModule });\nIgoCollapsibleModule.ɵinj = ɵɵdefineInjector({ factory: function IgoCollapsibleModule_Factory(t) { return new (t || IgoCollapsibleModule)(); }, imports: [[MatIconModule, MatListModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoCollapsibleModule, { declarations: [CollapsibleComponent, CollapseDirective], imports: [MatIconModule, MatListModule], exports: [CollapsibleComponent, CollapseDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoCollapsibleModule, [{\n        type: NgModule,\n        args: [{\n                imports: [MatIconModule, MatListModule],\n                declarations: [CollapsibleComponent, CollapseDirective],\n                exports: [CollapsibleComponent, CollapseDirective]\n            }]\n    }], null, null); })();\n\nclass ConfirmDialogComponent {\n    constructor(dialogRef) {\n        this.dialogRef = dialogRef;\n    }\n}\nConfirmDialogComponent.ɵfac = function ConfirmDialogComponent_Factory(t) { return new (t || ConfirmDialogComponent)(ɵɵdirectiveInject(MatDialogRef)); };\nConfirmDialogComponent.ɵcmp = ɵɵdefineComponent({ type: ConfirmDialogComponent, selectors: [[\"igo-confirm-dialog\"]], decls: 12, vars: 10, consts: [[\"mat-dialog-title\", \"\", 1, \"mat-typography\"], [\"mat-dialog-content\", \"\", 1, \"mat-typography\"], [\"mat-dialog-actions\", \"\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-button\", \"\", 3, \"click\"]], template: function ConfirmDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"h2\", 0);\n        ɵɵtext(1);\n        ɵɵpipe(2, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(3, \"div\", 1);\n        ɵɵtext(4);\n        ɵɵelementEnd();\n        ɵɵelementStart(5, \"div\", 2);\n        ɵɵelementStart(6, \"button\", 3);\n        ɵɵlistener(\"click\", function ConfirmDialogComponent_Template_button_click_6_listener() { return ctx.dialogRef.close(true); });\n        ɵɵtext(7);\n        ɵɵpipe(8, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(9, \"button\", 4);\n        ɵɵlistener(\"click\", function ConfirmDialogComponent_Template_button_click_9_listener() { return ctx.dialogRef.close(false); });\n        ɵɵtext(10);\n        ɵɵpipe(11, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵtextInterpolate(ɵɵpipeBind1(2, 4, \"igo.common.confirmDialog.title\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ctx.confirmMessage);\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind1(8, 6, \"igo.common.confirmDialog.confirmBtn\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind1(11, 8, \"igo.common.confirmDialog.cancelBtn\"));\n    } }, directives: [MatDialogTitle, MatDialogContent, MatDialogActions, MatButton], pipes: [TranslatePipe], styles: [\"h2[_ngcontent-%COMP%]{margin:5px 0 10px}div[mat-dialog-content][_ngcontent-%COMP%]{max-width:200px}div[mat-dialog-actions][_ngcontent-%COMP%]{margin:10px 0 0}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ConfirmDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-confirm-dialog',\n                templateUrl: './confirm-dialog.component.html',\n                styleUrls: ['./confirm-dialog.component.scss']\n            }]\n    }], function () { return [{ type: MatDialogRef }]; }, null); })();\n\nclass ConfirmDialogService {\n    constructor(dialog) {\n        this.dialog = dialog;\n    }\n    open(message) {\n        const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n            disableClose: false\n        });\n        dialogRef.componentInstance.confirmMessage = message;\n        return dialogRef.afterClosed();\n    }\n}\nConfirmDialogService.ɵfac = function ConfirmDialogService_Factory(t) { return new (t || ConfirmDialogService)(ɵɵinject(MatDialog)); };\nConfirmDialogService.ɵprov = ɵɵdefineInjectable({ token: ConfirmDialogService, factory: ConfirmDialogService.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ConfirmDialogService, [{\n        type: Injectable\n    }], function () { return [{ type: MatDialog }]; }, null); })();\n\nclass IgoConfirmDialogModule {\n    static forRoot() {\n        return {\n            ngModule: IgoConfirmDialogModule,\n            providers: []\n        };\n    }\n}\nIgoConfirmDialogModule.ɵmod = ɵɵdefineNgModule({ type: IgoConfirmDialogModule });\nIgoConfirmDialogModule.ɵinj = ɵɵdefineInjector({ factory: function IgoConfirmDialogModule_Factory(t) { return new (t || IgoConfirmDialogModule)(); }, providers: [ConfirmDialogService], imports: [[MatButtonModule, MatDialogModule, IgoLanguageModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoConfirmDialogModule, { declarations: [ConfirmDialogComponent], imports: [MatButtonModule, MatDialogModule, IgoLanguageModule], exports: [ConfirmDialogComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoConfirmDialogModule, [{\n        type: NgModule,\n        args: [{\n                imports: [MatButtonModule, MatDialogModule, IgoLanguageModule],\n                declarations: [ConfirmDialogComponent],\n                exports: [ConfirmDialogComponent],\n                providers: [ConfirmDialogService]\n            }]\n    }], null, null); })();\n\nclass ContextMenuDirective {\n    constructor(overlay, viewContainerRef, elementRef) {\n        this.overlay = overlay;\n        this.viewContainerRef = viewContainerRef;\n        this.elementRef = elementRef;\n        this.menuPosition = new EventEmitter();\n    }\n    onContextMenu(e) {\n        const { x, y } = e;\n        this.close();\n        e.preventDefault();\n        this.menuPosition.emit({ x, y });\n        this.overlayRef = null;\n        const positionStrategy = this.overlay\n            .position()\n            .flexibleConnectedTo({ x, y })\n            .withPositions([\n            {\n                originX: 'end',\n                originY: 'bottom',\n                overlayX: 'start',\n                overlayY: 'top'\n            }\n        ]);\n        this.overlayRef = this.overlay.create({\n            positionStrategy,\n            scrollStrategy: this.overlay.scrollStrategies.close()\n        });\n        this.overlayRef.attach(new TemplatePortal(this.menuContext, this.viewContainerRef, {\n            $implicit: undefined\n        }));\n        this.sub = fromEvent(document, 'click')\n            .pipe(filter(event => {\n            const clickTarget = event.target;\n            this.close();\n            return (!!this.overlayRef &&\n                !this.overlayRef.overlayElement.contains(clickTarget));\n        }), take(1))\n            .subscribe(() => this.close());\n        this.sub = fromEvent(document, 'contextmenu')\n            .pipe(filter(event => {\n            const clickTarget = event.target;\n            if (clickTarget &&\n                !this.elementRef.nativeElement.contains(clickTarget) &&\n                !this.overlayRef.overlayElement.contains(clickTarget)) {\n                return true;\n            }\n            else {\n                event.preventDefault();\n            }\n        }), take(1))\n            .subscribe(() => this.close());\n    }\n    close() {\n        if (this.overlayRef) {\n            this.overlayRef.dispose();\n            this.overlayRef = null;\n        }\n        if (this.sub) {\n            this.sub.unsubscribe();\n        }\n    }\n}\nContextMenuDirective.ɵfac = function ContextMenuDirective_Factory(t) { return new (t || ContextMenuDirective)(ɵɵdirectiveInject(Overlay), ɵɵdirectiveInject(ViewContainerRef), ɵɵdirectiveInject(ElementRef)); };\nContextMenuDirective.ɵdir = ɵɵdefineDirective({ type: ContextMenuDirective, selectors: [[\"\", \"igoContextMenu\", \"\"]], hostBindings: function ContextMenuDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"contextmenu\", function ContextMenuDirective_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });\n    } }, inputs: { menuContext: [\"igoContextMenu\", \"menuContext\"] }, outputs: { menuPosition: \"menuPosition\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextMenuDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoContextMenu]'\n            }]\n    }], function () { return [{ type: Overlay }, { type: ViewContainerRef }, { type: ElementRef }]; }, { menuContext: [{\n            type: Input,\n            args: ['igoContextMenu']\n        }], menuPosition: [{\n            type: Output\n        }], onContextMenu: [{\n            type: HostListener,\n            args: ['contextmenu', ['$event']]\n        }] }); })();\n\nclass IgoContextMenuModule {\n    static forRoot() {\n        return {\n            ngModule: IgoContextMenuModule,\n            providers: []\n        };\n    }\n}\nIgoContextMenuModule.ɵmod = ɵɵdefineNgModule({ type: IgoContextMenuModule });\nIgoContextMenuModule.ɵinj = ɵɵdefineInjector({ factory: function IgoContextMenuModule_Factory(t) { return new (t || IgoContextMenuModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoContextMenuModule, { declarations: [ContextMenuDirective], exports: [ContextMenuDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoContextMenuModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [ContextMenuDirective],\n                exports: [ContextMenuDirective]\n            }]\n    }], null, null); })();\n\nclass CustomHtmlComponent {\n    constructor() {\n        this._html = '';\n    }\n    get html() {\n        return this._html;\n    }\n    set html(value) {\n        this._html = value;\n    }\n}\nCustomHtmlComponent.ɵfac = function CustomHtmlComponent_Factory(t) { return new (t || CustomHtmlComponent)(); };\nCustomHtmlComponent.ɵcmp = ɵɵdefineComponent({ type: CustomHtmlComponent, selectors: [[\"igo-custom-html\"]], inputs: { html: \"html\" }, decls: 2, vars: 3, consts: [[1, \"custom-html\", 3, \"innerHTML\"]], template: function CustomHtmlComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"div\", 0);\n        ɵɵpipe(1, \"sanitizeHtml\");\n    } if (rf & 2) {\n        ɵɵproperty(\"innerHTML\", ɵɵpipeBind1(1, 1, ctx.html), ɵɵsanitizeHtml);\n    } }, pipes: [SanitizeHtmlPipe], styles: [\".custom-html[_ngcontent-%COMP%]{padding:20px}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CustomHtmlComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-custom-html',\n                templateUrl: './custom-html.component.html',\n                styleUrls: ['./custom-html.component.scss']\n            }]\n    }], function () { return []; }, { html: [{\n            type: Input\n        }] }); })();\n\nclass IgoCustomHtmlModule {\n    static forRoot() {\n        return {\n            ngModule: IgoCustomHtmlModule\n        };\n    }\n}\nIgoCustomHtmlModule.ɵmod = ɵɵdefineNgModule({ type: IgoCustomHtmlModule });\nIgoCustomHtmlModule.ɵinj = ɵɵdefineInjector({ factory: function IgoCustomHtmlModule_Factory(t) { return new (t || IgoCustomHtmlModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatTooltipModule,\n            MatInputModule,\n            MatButtonModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoCustomHtmlModule, { declarations: [SanitizeHtmlPipe, CustomHtmlComponent], imports: [CommonModule,\n        MatIconModule,\n        MatTooltipModule,\n        MatInputModule,\n        MatButtonModule,\n        IgoLanguageModule], exports: [SanitizeHtmlPipe, CustomHtmlComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoCustomHtmlModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatTooltipModule,\n                    MatInputModule,\n                    MatButtonModule,\n                    IgoLanguageModule\n                ],\n                exports: [SanitizeHtmlPipe, CustomHtmlComponent],\n                declarations: [SanitizeHtmlPipe, CustomHtmlComponent]\n            }]\n    }], null, null); })();\n\nclass DragAndDropDirective {\n    constructor() {\n        this.allowedExtensions = [];\n        this.filesDropped = new EventEmitter();\n        this.filesInvalid = new EventEmitter();\n        this.background = 'inherit';\n    }\n    onDragOver(evt) {\n        evt.preventDefault();\n        evt.stopPropagation();\n        this.background = '#999';\n    }\n    onDragLeave(evt) {\n        evt.preventDefault();\n        evt.stopPropagation();\n        this.background = 'inherit';\n    }\n    onDrop(evt) {\n        evt.preventDefault();\n        evt.stopPropagation();\n        if (evt.alreadyFired) {\n            return;\n        }\n        evt.alreadyFired = true;\n        this.background = 'inherit';\n        const filesObj = this.validExtensions(evt);\n        if (filesObj.valid.length) {\n            this.filesDropped.emit(filesObj.valid);\n        }\n        if (filesObj.invalid.length) {\n            this.filesInvalid.emit(filesObj.invalid);\n        }\n    }\n    validExtensions(evt) {\n        const files = evt.dataTransfer.files;\n        const filesObj = {\n            valid: [],\n            invalid: []\n        };\n        if (files.length > 0) {\n            for (const file of files) {\n                const ext = file.name.split('.')[file.name.split('.').length - 1];\n                if (this.allowedExtensions.length === 0 ||\n                    (this.allowedExtensions.lastIndexOf(ext) !== -1 &&\n                        file.size !== 0)) {\n                    filesObj.valid.push(file);\n                }\n                else {\n                    filesObj.invalid.push(file);\n                }\n            }\n        }\n        return filesObj;\n    }\n}\nDragAndDropDirective.ɵfac = function DragAndDropDirective_Factory(t) { return new (t || DragAndDropDirective)(); };\nDragAndDropDirective.ɵdir = ɵɵdefineDirective({ type: DragAndDropDirective, selectors: [[\"\", \"igoDragAndDrop\", \"\"]], hostVars: 2, hostBindings: function DragAndDropDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"dragover\", function DragAndDropDirective_dragover_HostBindingHandler($event) { return ctx.onDragOver($event); })(\"dragleave\", function DragAndDropDirective_dragleave_HostBindingHandler($event) { return ctx.onDragLeave($event); })(\"drop\", function DragAndDropDirective_drop_HostBindingHandler($event) { return ctx.onDrop($event); });\n    } if (rf & 2) {\n        ɵɵstyleProp(\"background\", ctx.background);\n    } }, inputs: { allowedExtensions: \"allowedExtensions\" }, outputs: { filesDropped: \"filesDropped\", filesInvalid: \"filesInvalid\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DragAndDropDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoDragAndDrop]'\n            }]\n    }], null, { allowedExtensions: [{\n            type: Input\n        }], filesDropped: [{\n            type: Output\n        }], filesInvalid: [{\n            type: Output\n        }], background: [{\n            type: HostBinding,\n            args: ['style.background']\n        }], onDragOver: [{\n            type: HostListener,\n            args: ['dragover', ['$event']]\n        }], onDragLeave: [{\n            type: HostListener,\n            args: ['dragleave', ['$event']]\n        }], onDrop: [{\n            type: HostListener,\n            args: ['drop', ['$event']]\n        }] }); })();\n\nclass IgoDrapDropModule {\n    static forRoot() {\n        return {\n            ngModule: IgoDrapDropModule,\n            providers: []\n        };\n    }\n}\nIgoDrapDropModule.ɵmod = ɵɵdefineNgModule({ type: IgoDrapDropModule });\nIgoDrapDropModule.ɵinj = ɵɵdefineInjector({ factory: function IgoDrapDropModule_Factory(t) { return new (t || IgoDrapDropModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoDrapDropModule, { declarations: [DragAndDropDirective], exports: [DragAndDropDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoDrapDropModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [DragAndDropDirective],\n                exports: [DragAndDropDirective]\n            }]\n    }], null, null); })();\n\n/**\n * This class is used in the DynamicComponentOutlet component. It holds\n * a reference to a component factory and can render that component\n * in a target element on demand. It's also possible to set inputs\n * and to subscribe to outputs.\n */\nclass DynamicComponent {\n    constructor(componentFactory) {\n        this.componentFactory = componentFactory;\n        /**\n         * Subscriptions to the component's outputs. Those need\n         * to be unsubscribed when the component is destroyed.\n         */\n        this.subscriptions = [];\n        /**\n         * Component inputs\n         */\n        this.inputs = {};\n        /**\n         * Subscriptions to the component's async inputs\n         */\n        this.inputs$$ = {};\n        /**\n         * Subscribers to the component's outputs\n         */\n        this.subscribers = {};\n    }\n    /**\n     * Render the component to a target element.\n     * Set it's inputs and subscribe to it's outputs.\n     * @param target Target element\n     */\n    setTarget(target) {\n        this.target = target;\n        this.componentRef = target.createComponent(this.componentFactory);\n        this.updateInputs(this.inputs);\n        this.updateSubscribers(this.subscribers);\n    }\n    /**\n     * Destroy this component. That means, removing from it's target\n     * element and unsubscribing to it's outputs.\n     */\n    destroy() {\n        if (this.target !== undefined) {\n            this.target.clear();\n        }\n        if (this.componentRef !== undefined) {\n            this.componentRef.destroy();\n            this.componentRef = undefined;\n        }\n        this.unobserveAllInputs();\n        this.unsubscribeAll();\n    }\n    /**\n     * Update the component inputs. This is an update so any\n     * key not defined won't be overwritten.\n     */\n    updateInputs(inputs) {\n        this.inputs = inputs;\n        if (this.componentRef === undefined) {\n            return;\n        }\n        const instance = this.componentRef.instance;\n        const allowedInputs = this.componentFactory.inputs;\n        allowedInputs.forEach((value) => {\n            const key = value.propName;\n            this.unobserveInput(key);\n            const inputValue = inputs[key];\n            if (inputs.hasOwnProperty(key)) {\n                if (inputValue instanceof Observable) {\n                    this.observeInput(key, inputValue);\n                }\n                else {\n                    this.setInputValue(instance, key, inputValue);\n                }\n            }\n        });\n        if (typeof instance.onUpdateInputs === 'function') {\n            instance.onUpdateInputs();\n        }\n    }\n    /**\n     * Set an instance's input value\n     * @param instance Component instance\n     * @param key Input key\n     * @param value Input value\n     */\n    setInputValue(instance, key, value) {\n        const currentValue = instance[key];\n        if (value === currentValue) {\n            return;\n        }\n        const prototype = Object.getPrototypeOf(instance);\n        const descriptor = Object.getOwnPropertyDescriptor(prototype, key);\n        if (descriptor !== undefined && descriptor.set !== undefined) {\n            descriptor.set.call(instance, value);\n        }\n        else {\n            instance[key] = value;\n        }\n    }\n    /**\n     * Update the component subscribers. This is an update so any\n     * key not defined won't be overwritten.\n     */\n    updateSubscribers(subscribers) {\n        this.subscribers = subscribers;\n        if (this.componentRef === undefined) {\n            return;\n        }\n        const instance = this.componentRef.instance;\n        const allowedSubscribers = this.componentFactory.outputs;\n        allowedSubscribers.forEach((value) => {\n            const key = value.propName;\n            if (subscribers.hasOwnProperty(key)) {\n                const emitter = instance[key];\n                const subscriber = subscribers[key];\n                if (Array.isArray(subscriber)) {\n                    subscriber.forEach((_subscriber) => {\n                        this.subscriptions.push(emitter.subscribe(_subscriber));\n                    });\n                }\n                else {\n                    this.subscriptions.push(emitter.subscribe(subscriber));\n                }\n            }\n        });\n    }\n    /**\n     * Subscribe to an observable input and update the component's input value\n     * accordingly\n     * @param key Input key\n     * @param observable Observable\n     */\n    observeInput(key, observable) {\n        this.inputs$$[key] = observable.subscribe((value) => {\n            const instance = this.componentRef.instance;\n            this.setInputValue(instance, key, value);\n            if (typeof instance.onUpdateInputs === 'function') {\n                instance.onUpdateInputs();\n            }\n        });\n    }\n    /**\n     * Unsubscribe to an observable input\n     * @param key Input key\n     */\n    unobserveInput(key) {\n        if (this.inputs$$[key] !== undefined) {\n            this.inputs$$[key].unsubscribe();\n            this.inputs$$[key] = undefined;\n        }\n    }\n    /**\n     * Unsubscribe to all outputs.\n     */\n    unobserveAllInputs() {\n        Object.values(this.inputs$$).forEach((s) => {\n            if (s !== undefined) {\n                s.unsubscribe();\n            }\n        });\n        this.inputs$$ = {};\n    }\n    /**\n     * Unsubscribe to all outputs.\n     */\n    unsubscribeAll() {\n        this.subscriptions.forEach((s) => s.unsubscribe());\n        this.subscriptions = [];\n    }\n}\n\n/**\n * Service to creates DynamicComponent instances from base component classes\n */\nclass DynamicComponentService {\n    constructor(resolver) {\n        this.resolver = resolver;\n    }\n    /**\n     * Creates a DynamicComponent instance from a base component class\n     * @param componentCls The component class\n     * @returns DynamicComponent instance\n     */\n    create(componentCls) {\n        const factory = this.resolver.resolveComponentFactory(componentCls);\n        return new DynamicComponent(factory);\n    }\n}\nDynamicComponentService.ɵfac = function DynamicComponentService_Factory(t) { return new (t || DynamicComponentService)(ɵɵinject(ComponentFactoryResolver)); };\nDynamicComponentService.ɵprov = ɵɵdefineInjectable({ token: DynamicComponentService, factory: DynamicComponentService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DynamicComponentService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ComponentFactoryResolver }]; }, null); })();\n\nconst _c0$2 = [\"target\"];\nfunction DynamicOutletComponent_ng_template_0_Template(rf, ctx) { }\nclass DynamicOutletComponent {\n    constructor(dynamicComponentService, cdRef) {\n        this.dynamicComponentService = dynamicComponentService;\n        this.cdRef = cdRef;\n        /**\n         * The dynamic component inputs\n         */\n        this.inputs = {};\n        /**\n         * The subscribers to the dynamic component outputs\n         */\n        this.subscribers = {};\n    }\n    /**\n     * If the dynamic component changes, create it.\n     * If the inputs or subscribers change, update the current component's\n     * inputs or subscribers.\n     * @internal\n     */\n    ngOnChanges(changes) {\n        const component = changes.component;\n        const inputs = changes.inputs;\n        const subscribers = changes.subscribers;\n        const eq = ObjectUtils.objectsAreEquivalent;\n        if (component && component.currentValue !== component.previousValue) {\n            this.createComponent(component.currentValue);\n        }\n        else {\n            const inputsAreEquivalents = inputs && eq(inputs.currentValue || {}, inputs.previousValue || {});\n            const subscribersAreEquivalents = subscribers &&\n                eq(subscribers.currentValue || {}, subscribers.previousValue || {});\n            if (inputsAreEquivalents === false) {\n                this.updateInputs();\n            }\n            if (subscribersAreEquivalents === false) {\n                this.updateSubscribers();\n            }\n        }\n        this.cdRef.detectChanges();\n    }\n    /**\n     * Destroy the dynamic component and all it's subscribers\n     * @internal\n     */\n    ngOnDestroy() {\n        if (this.dynamicComponent) {\n            this.dynamicComponent.destroy();\n        }\n    }\n    /**\n     * Create a  DynamicComponent out of the component class and render it.\n     * @internal\n     */\n    createComponent(component) {\n        if (this.dynamicComponent !== undefined) {\n            this.dynamicComponent.destroy();\n        }\n        this.dynamicComponent =\n            component instanceof DynamicComponent\n                ? component\n                : this.dynamicComponentService.create(component);\n        this.renderComponent();\n    }\n    /**\n     * Create and render the dynamic component. Set it's inputs and subscribers\n     * @internal\n     */\n    renderComponent() {\n        this.updateInputs();\n        this.updateSubscribers();\n        this.dynamicComponent.setTarget(this.target);\n    }\n    /**\n     * Update the dynamic component inputs. This is an update so any\n     * key not defined won't be overwritten.\n     * @internal\n     */\n    updateInputs() {\n        this.dynamicComponent.updateInputs(this.inputs);\n    }\n    /**\n     * Update the dynamic component subscribers. This is an update so any\n     * key not defined won't be overwritten.\n     * @internal\n     */\n    updateSubscribers() {\n        this.dynamicComponent.updateSubscribers(this.subscribers);\n    }\n}\nDynamicOutletComponent.ɵfac = function DynamicOutletComponent_Factory(t) { return new (t || DynamicOutletComponent)(ɵɵdirectiveInject(DynamicComponentService), ɵɵdirectiveInject(ChangeDetectorRef)); };\nDynamicOutletComponent.ɵcmp = ɵɵdefineComponent({ type: DynamicOutletComponent, selectors: [[\"igo-dynamic-outlet\"]], viewQuery: function DynamicOutletComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵstaticViewQuery(_c0$2, true, ViewContainerRef);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.target = _t.first);\n    } }, inputs: { component: \"component\", inputs: \"inputs\", subscribers: \"subscribers\" }, features: [ɵɵNgOnChangesFeature], decls: 2, vars: 0, consts: [[\"target\", \"\"]], template: function DynamicOutletComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, DynamicOutletComponent_ng_template_0_Template, 0, 0, \"ng-template\", null, 0, ɵɵtemplateRefExtractor);\n    } }, styles: [\"[_nghost-%COMP%]{display:block;height:100%;width:100%}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DynamicOutletComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-dynamic-outlet',\n                templateUrl: 'dynamic-outlet.component.html',\n                styleUrls: ['dynamic-outlet.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: DynamicComponentService }, { type: ChangeDetectorRef }]; }, { component: [{\n            type: Input\n        }], inputs: [{\n            type: Input\n        }], subscribers: [{\n            type: Input\n        }], target: [{\n            type: ViewChild,\n            args: ['target', { read: ViewContainerRef, static: true }]\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoDynamicOutletModule {\n}\nIgoDynamicOutletModule.ɵmod = ɵɵdefineNgModule({ type: IgoDynamicOutletModule });\nIgoDynamicOutletModule.ɵinj = ɵɵdefineInjector({ factory: function IgoDynamicOutletModule_Factory(t) { return new (t || IgoDynamicOutletModule)(); }, imports: [[\n            CommonModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoDynamicOutletModule, { declarations: [DynamicOutletComponent], imports: [CommonModule], exports: [DynamicOutletComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoDynamicOutletModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    DynamicOutletComponent\n                ],\n                declarations: [\n                    DynamicOutletComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoDynamicComponentModule {\n}\nIgoDynamicComponentModule.ɵmod = ɵɵdefineNgModule({ type: IgoDynamicComponentModule });\nIgoDynamicComponentModule.ɵinj = ɵɵdefineInjector({ factory: function IgoDynamicComponentModule_Factory(t) { return new (t || IgoDynamicComponentModule)(); }, providers: [\n        DynamicComponentService\n    ], imports: [[\n            CommonModule,\n            IgoDynamicOutletModule\n        ], IgoDynamicOutletModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoDynamicComponentModule, { imports: [CommonModule,\n        IgoDynamicOutletModule], exports: [IgoDynamicOutletModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoDynamicComponentModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoDynamicOutletModule\n                ],\n                exports: [\n                    IgoDynamicOutletModule\n                ],\n                providers: [\n                    DynamicComponentService\n                ]\n            }]\n    }], null, null); })();\n\nconst _c0$3 = [\"flexibleMain\"];\nconst _c1 = [\"*\", [[\"\", \"igoFlexibleFill\", \"\"]]];\nconst _c2 = [\"*\", \"[igoFlexibleFill]\"];\nclass FlexibleComponent {\n    constructor(el, mediaService) {\n        this.el = el;\n        this.mediaService = mediaService;\n        this._initial = '0';\n        this._collapsed = '0';\n        this._expanded = '100%';\n        this._initialMobile = this.expanded;\n        this._collapsedMobile = this.collapsed;\n        this._expandedMobile = this.expanded;\n        this._direction = 'column';\n        this._state = 'initial';\n    }\n    get initial() {\n        return this._initial;\n    }\n    set initial(value) {\n        this._initial = value;\n    }\n    get collapsed() {\n        return this._collapsed;\n    }\n    set collapsed(value) {\n        this._collapsed = value;\n    }\n    get expanded() {\n        return this._expanded;\n    }\n    set expanded(value) {\n        this._expanded = value;\n    }\n    get initialMobile() {\n        return this._initialMobile;\n    }\n    set initialMobile(value) {\n        this._initialMobile = value;\n    }\n    get collapsedMobile() {\n        return this._collapsedMobile;\n    }\n    set collapsedMobile(value) {\n        this._collapsedMobile = value;\n    }\n    get expandedMobile() {\n        return this._expandedMobile;\n    }\n    set expandedMobile(value) {\n        this._expandedMobile = value;\n    }\n    get direction() {\n        return this._direction;\n    }\n    set direction(value) {\n        this._direction = value;\n    }\n    get state() {\n        return this._state;\n    }\n    set state(value) {\n        const sizes = {\n            initial: this.initial,\n            collapsed: this.collapsed,\n            expanded: this.expanded\n        };\n        if (this.mediaService.isMobile()) {\n            Object.assign(sizes, {\n                initial: this.initialMobile,\n                collapsed: this.collapsedMobile,\n                expanded: this.expandedMobile\n            });\n        }\n        const size = sizes[value];\n        if (size !== undefined) {\n            this.setSize(size);\n            setTimeout(() => {\n                this._state = value;\n            }, FlexibleComponent.transitionTime);\n        }\n    }\n    ngOnInit() {\n        this.el.nativeElement.className += this.direction;\n        // Since this component supports different sizes\n        // on mobile, force a redraw when the media changes\n        this.mediaService$$ = this.mediaService.media$.subscribe((media) => (this.state = this.state));\n    }\n    ngOnDestroy() {\n        if (this.mediaService$$) {\n            this.mediaService$$.unsubscribe();\n        }\n    }\n    setSize(size) {\n        this._state = 'transition';\n        if (this.direction === 'column') {\n            this.main.nativeElement.style.height = size;\n        }\n        else if (this.direction === 'row') {\n            this.main.nativeElement.style.width = size;\n        }\n    }\n}\nFlexibleComponent.transitionTime = 250;\nFlexibleComponent.ɵfac = function FlexibleComponent_Factory(t) { return new (t || FlexibleComponent)(ɵɵdirectiveInject(ElementRef), ɵɵdirectiveInject(MediaService)); };\nFlexibleComponent.ɵcmp = ɵɵdefineComponent({ type: FlexibleComponent, selectors: [[\"igo-flexible\"]], viewQuery: function FlexibleComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵstaticViewQuery(_c0$3, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.main = _t.first);\n    } }, inputs: { initial: \"initial\", collapsed: \"collapsed\", expanded: \"expanded\", initialMobile: \"initialMobile\", collapsedMobile: \"collapsedMobile\", expandedMobile: \"expandedMobile\", direction: \"direction\", state: \"state\" }, ngContentSelectors: _c2, decls: 8, vars: 4, consts: [[\"flexibleMain\", \"\"], [1, \"igo-container\"], [1, \"igo-flexible-fill\"]], template: function FlexibleComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵprojectionDef(_c1);\n        ɵɵelementStart(0, \"div\", null, 0);\n        ɵɵelementStart(2, \"div\", 1);\n        ɵɵprojection(3);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(4, \"div\", 2);\n        ɵɵelementStart(5, \"div\");\n        ɵɵelementStart(6, \"div\", 1);\n        ɵɵprojection(7, 1);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵclassMapInterpolate2(\"igo-flexible-main \", ctx.state, \" \", ctx.direction, \"\");\n    } }, styles: [\"[_nghost-%COMP%]{display:flex;height:100%;width:100%}.column[_nghost-%COMP%]{flex-direction:column}.row[_nghost-%COMP%]{flex-direction:row}.igo-flexible-main[_ngcontent-%COMP%]{flex:0 0 auto;overflow:hidden}.igo-flexible-main.column[_ngcontent-%COMP%]{transition:height .25s ease-in}.igo-flexible-main.row[_ngcontent-%COMP%]{transition:width .25s ease-in}.igo-flexible-fill[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute;right:0;top:0}.igo-container[_ngcontent-%COMP%]{height:100%;margin:0 5px;overflow:hidden;padding:5px 0;position:relative;width:calc(100% - 10px)}  .igo-flexible-fill{flex:1 1 auto;overflow:hidden;position:relative}  .igo-content{height:100%;overflow:auto;width:100%}  igo-panel{height:100%}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FlexibleComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-flexible',\n                templateUrl: './flexible.component.html',\n                styleUrls: ['./flexible.component.scss']\n            }]\n    }], function () { return [{ type: ElementRef }, { type: MediaService }]; }, { main: [{\n            type: ViewChild,\n            args: ['flexibleMain', { static: true }]\n        }], initial: [{\n            type: Input\n        }], collapsed: [{\n            type: Input\n        }], expanded: [{\n            type: Input\n        }], initialMobile: [{\n            type: Input\n        }], collapsedMobile: [{\n            type: Input\n        }], expandedMobile: [{\n            type: Input\n        }], direction: [{\n            type: Input\n        }], state: [{\n            type: Input\n        }] }); })();\n\nclass IgoFlexibleModule {\n    static forRoot() {\n        return {\n            ngModule: IgoFlexibleModule,\n            providers: []\n        };\n    }\n}\nIgoFlexibleModule.ɵmod = ɵɵdefineNgModule({ type: IgoFlexibleModule });\nIgoFlexibleModule.ɵinj = ɵɵdefineInjector({ factory: function IgoFlexibleModule_Factory(t) { return new (t || IgoFlexibleModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoFlexibleModule, { declarations: [FlexibleComponent], exports: [FlexibleComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoFlexibleModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [FlexibleComponent],\n                exports: [FlexibleComponent]\n            }]\n    }], null, null); })();\n\nfunction formControlIsRequired(control) {\n    if (control.validator) {\n        const validator = control.validator({});\n        if (validator && validator.required) {\n            return true;\n        }\n    }\n    if (control.controls) {\n        const requiredControl = Object.keys(control.controls).find((key) => {\n            return formControlIsRequired(control.controls[key]);\n        });\n        return requiredControl !== undefined;\n    }\n    return false;\n}\nfunction getDefaultErrorMessages() {\n    return {\n        required: 'igo.common.form.errors.required'\n    };\n}\nfunction getControlErrorMessage(control, messages) {\n    const errors = control.errors || {};\n    const errorKeys = Object.keys(errors);\n    const errorMessages = errorKeys\n        .map((key) => messages[key])\n        .filter((message) => message !== undefined);\n    return errorMessages.length > 0 ? errorMessages[0] : '';\n}\nfunction getAllFormFields(form) {\n    return form.groups.reduce((acc, group) => {\n        return acc.concat(group.fields);\n    }, [].concat(form.fields));\n}\nfunction getFormFieldByName(form, name) {\n    const fields = getAllFormFields(form);\n    return fields.find((field) => {\n        return field.name === name;\n    });\n}\n\nconst _c0$4 = [\"buttons\"];\nconst _c1$1 = [\"*\", [[\"\", \"formButtons\", \"\"]]];\nconst _c2$1 = function (a0) { return { \"igo-form-body-with-buttons\": a0 }; };\nconst _c3 = [\"*\", \"[formButtons]\"];\n/**\n * A configurable form\n */\nclass FormComponent {\n    constructor() {\n        /**\n         * Form autocomplete\n         */\n        this.autocomplete = 'off';\n        /**\n         * Event emitted when the form is submitted\n         */\n        this.submitForm = new EventEmitter();\n    }\n    get hasButtons() {\n        return this.buttons.nativeElement.children.length !== 0;\n    }\n    /**\n     * Is the entity or the template change, recreate the form or repopulate it.\n     * @internal\n     */\n    ngOnChanges(changes) {\n        const formData = changes.formData;\n        if (formData && formData.currentValue !== formData.previousValue) {\n            if (formData.currentValue === undefined) {\n                this.clear();\n            }\n            else {\n                this.setData(formData.currentValue);\n            }\n        }\n    }\n    /**\n     * Transform the form data to a feature and emit an event\n     * @param event Form submit event\n     * @internal\n     */\n    onSubmit() {\n        this.submitForm.emit(this.getData());\n    }\n    getData() {\n        const data = {};\n        getAllFormFields(this.form).forEach((field) => {\n            this.updateDataWithFormField(data, field);\n        });\n        return data;\n    }\n    setData(data) {\n        this.form.fields.forEach((field) => {\n            field.control.setValue(t(data, field.name).safeObject);\n        });\n        this.form.groups.forEach((group) => {\n            group.fields.forEach((field) => {\n                field.control.setValue(t(data, field.name).safeObject);\n            });\n        });\n    }\n    updateDataWithFormField(data, field) {\n        const control = field.control;\n        if (!control.disabled) {\n            data[field.name] = control.value;\n        }\n    }\n    /**\n     * Clear form\n     */\n    clear() {\n        this.form.control.reset();\n    }\n}\nFormComponent.ɵfac = function FormComponent_Factory(t) { return new (t || FormComponent)(); };\nFormComponent.ɵcmp = ɵɵdefineComponent({ type: FormComponent, selectors: [[\"igo-form\"]], viewQuery: function FormComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵstaticViewQuery(_c0$4, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.buttons = _t.first);\n    } }, inputs: { form: \"form\", formData: \"formData\", autocomplete: \"autocomplete\" }, outputs: { submitForm: \"submitForm\" }, features: [ɵɵNgOnChangesFeature], ngContentSelectors: _c3, decls: 7, vars: 5, consts: [[3, \"autocomplete\", \"formGroup\", \"ngSubmit\"], [1, \"igo-form-body\", 3, \"ngClass\"], [1, \"igo-form-content\"], [1, \"igo-form-buttons\"], [\"buttons\", \"\"]], template: function FormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵprojectionDef(_c1$1);\n        ɵɵelementStart(0, \"form\", 0);\n        ɵɵlistener(\"ngSubmit\", function FormComponent_Template_form_ngSubmit_0_listener() { return ctx.onSubmit(); });\n        ɵɵelementStart(1, \"div\", 1);\n        ɵɵelementStart(2, \"div\", 2);\n        ɵɵprojection(3);\n        ɵɵelementEnd();\n        ɵɵelementStart(4, \"div\", 3, 4);\n        ɵɵprojection(6, 1);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"autocomplete\", ctx.autocomplete)(\"formGroup\", ctx.form.control);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngClass\", ɵɵpureFunction1(3, _c2$1, ctx.hasButtons));\n    } }, directives: [ɵangular_packages_forms_forms_y, NgControlStatusGroup, FormGroupDirective, NgClass], styles: [\"[_nghost-%COMP%]{display:block}form[_ngcontent-%COMP%]{width:100%}.igo-form-body[_ngcontent-%COMP%], .igo-form-content[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{height:100%}.igo-form-body-with-buttons[_ngcontent-%COMP%]   .igo-form-content[_ngcontent-%COMP%]{height:calc(100% - 56px)}.igo-form-content[_ngcontent-%COMP%]{display:flex}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-form',\n                templateUrl: './form.component.html',\n                styleUrls: ['./form.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { form: [{\n            type: Input\n        }], formData: [{\n            type: Input\n        }], autocomplete: [{\n            type: Input\n        }], submitForm: [{\n            type: Output\n        }], buttons: [{\n            type: ViewChild,\n            args: ['buttons', { static: true }]\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoFormFormModule {\n}\nIgoFormFormModule.ɵmod = ɵɵdefineNgModule({ type: IgoFormFormModule });\nIgoFormFormModule.ɵinj = ɵɵdefineInjector({ factory: function IgoFormFormModule_Factory(t) { return new (t || IgoFormFormModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule\n        ], FormsModule,\n        ReactiveFormsModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoFormFormModule, { declarations: [FormComponent], imports: [CommonModule,\n        FormsModule,\n        ReactiveFormsModule], exports: [FormComponent,\n        FormsModule,\n        ReactiveFormsModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoFormFormModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule\n                ],\n                exports: [\n                    FormComponent,\n                    FormsModule,\n                    ReactiveFormsModule\n                ],\n                declarations: [\n                    FormComponent\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * Service where all available form fields are registered.\n */\nclass FormFieldService {\n    constructor() { }\n    static register(type, component) {\n        FormFieldService.fields[type] = component;\n    }\n    /**\n     * Return field component by type\n     * @param type Field type\n     * @returns Field component\n     */\n    getFieldByType(type) {\n        return FormFieldService.fields[type];\n    }\n}\nFormFieldService.fields = {};\nFormFieldService.ɵfac = function FormFieldService_Factory(t) { return new (t || FormFieldService)(); };\nFormFieldService.ɵprov = ɵɵdefineInjectable({ token: FormFieldService, factory: FormFieldService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FormFieldService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nclass FormService {\n    constructor(formBuilder) {\n        this.formBuilder = formBuilder;\n    }\n    form(fields, groups) {\n        const control = this.formBuilder.group({});\n        fields.forEach((field) => {\n            control.addControl(field.name, field.control);\n        });\n        groups.forEach((group) => {\n            control.addControl(group.name, group.control);\n        });\n        return { fields, groups, control };\n    }\n    group(config, fields) {\n        const options = config.options || {};\n        const control = this.formBuilder.group({});\n        fields.forEach((field) => {\n            control.addControl(field.name, field.control);\n        });\n        const validators = this.getValidators(options.validator); // convert string to actual validator\n        control.setValidators(validators);\n        return Object.assign({}, config, { fields, control });\n    }\n    field(config) {\n        const options = config.options || {};\n        const state = {\n            value: '',\n            disabled: options.disabled\n        };\n        const control = this.formBuilder.control(state);\n        const validators = this.getValidators(options.validator); // convert string to actual validator\n        control.setValidators(validators);\n        return Object.assign({ type: 'text' }, config, { control });\n    }\n    extendFieldConfig(config, partial) {\n        const options = Object.assign({}, config.options || {}, partial.options || {});\n        const inputs = Object.assign({}, config.inputs || {}, partial.inputs || {});\n        const subscribers = Object.assign({}, config.subscribers || {}, partial.subscribers || {});\n        return Object.assign({}, config, { options, inputs, subscribers });\n    }\n    getValidators(validatorOption) {\n        if (Array.isArray(validatorOption)) {\n            return validatorOption.map((validatorStr) => {\n                return this.getValidator(validatorStr);\n            });\n        }\n        return this.getValidator(validatorOption);\n    }\n    getValidator(validatorStr) {\n        if (typeof validatorStr !== 'string') {\n            return validatorStr;\n        }\n        // regex pattern to extract arguments from string for e.g applying on \"minLength(8)\" would extract 8\n        const re = /^([a-zA-Z]{3,15})\\((.{0,20})\\)$/;\n        const match = validatorStr.match(re);\n        if (!match) {\n            return Validators[validatorStr];\n        }\n        const name = match[1];\n        const args = match[2];\n        return Validators[name](args);\n    }\n}\nFormService.ɵfac = function FormService_Factory(t) { return new (t || FormService)(ɵɵinject(FormBuilder)); };\nFormService.ɵprov = ɵɵdefineInjectable({ token: FormService, factory: FormService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FormService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: FormBuilder }]; }, null); })();\n\nfunction IgoFormFieldComponent(type) {\n    return (compType) => {\n        FormFieldService.register(type, compType);\n    };\n}\n\nfunction FormFieldComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵelement(1, \"igo-dynamic-outlet\", 1);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"component\", ctx_r0.getFieldComponent())(\"inputs\", ctx_r0.getFieldInputs())(\"subscribers\", ctx_r0.getFieldSubscribers());\n} }\n/**\n * This component renders the proper form input based on\n * the field configuration it receives.\n */\nclass FormFieldComponent {\n    constructor(formFieldService) {\n        this.formFieldService = formFieldService;\n        /**\n         * Field inputs cache\n         */\n        this.fieldInputs = undefined;\n        /**\n         * Field subscribers cache\n         */\n        this.fieldSubscribers = undefined;\n    }\n    get fieldOptions() {\n        return this.field.options || {};\n    }\n    getFieldComponent() {\n        return this.formFieldService.getFieldByType(this.field.type || 'text');\n    }\n    getFieldInputs() {\n        if (this.fieldInputs !== undefined) {\n            return this.fieldInputs;\n        }\n        const errors = this.fieldOptions.errors || {};\n        this.fieldInputs = Object.assign({\n            placeholder: this.field.title,\n            disableSwitch: this.fieldOptions.disableSwitch || false\n        }, Object.assign({}, this.field.inputs || {}), {\n            formControl: this.field.control,\n            errors: Object.assign({}, getDefaultErrorMessages(), errors)\n        });\n        return this.fieldInputs;\n    }\n    getFieldSubscribers() {\n        if (this.fieldSubscribers !== undefined) {\n            return this.fieldSubscribers;\n        }\n        this.fieldSubscribers = Object.assign({}, this.field.subscribers || {});\n        return this.fieldSubscribers;\n    }\n}\nFormFieldComponent.ɵfac = function FormFieldComponent_Factory(t) { return new (t || FormFieldComponent)(ɵɵdirectiveInject(FormFieldService)); };\nFormFieldComponent.ɵcmp = ɵɵdefineComponent({ type: FormFieldComponent, selectors: [[\"igo-form-field\"]], inputs: { field: \"field\" }, decls: 1, vars: 1, consts: [[4, \"ngIf\"], [3, \"component\", \"inputs\", \"subscribers\"]], template: function FormFieldComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, FormFieldComponent_ng_container_0_Template, 2, 3, \"ng-container\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.field !== undefined);\n    } }, directives: [NgIf, DynamicOutletComponent], styles: [\"mat-form-field{width:100%}  .igo-form-disable-switch{margin-right:8px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FormFieldComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-form-field',\n                templateUrl: './form-field.component.html',\n                styleUrls: ['./form-field.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: FormFieldService }]; }, { field: [{\n            type: Input\n        }] }); })();\n\nfunction FormFieldSelectComponent_mat_option_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 4);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const choice_r3 = ctx.$implicit;\n    ɵɵproperty(\"value\", choice_r3.value);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", choice_r3.title, \" \");\n} }\nfunction FormFieldSelectComponent_mat_icon_4_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-icon\", 5);\n    ɵɵlistener(\"click\", function FormFieldSelectComponent_mat_icon_4_Template_mat_icon_click_0_listener() { ɵɵrestoreView(_r5); const ctx_r4 = ɵɵnextContext(); return ctx_r4.onDisableSwitchClick(); });\n    ɵɵpipe(1, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"svgIcon\", ɵɵpipeBind1(1, 1, ctx_r1.disabled$) === true ? \"checkbox-blank-outline\" : \"checkbox-marked-outline\");\n} }\nfunction FormFieldSelectComponent_mat_error_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-error\");\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ɵɵpipeBind1(2, 1, ctx_r2.getErrorMessage()));\n} }\n/**\n * This component renders a select field\n */\nlet FormFieldSelectComponent = class FormFieldSelectComponent {\n    constructor() {\n        this.disabled$ = new BehaviorSubject(false);\n        this.choices$ = new BehaviorSubject([]);\n        /**\n         * Wheter a disable switch should be available\n         */\n        this.disableSwitch = false;\n    }\n    /**\n     * Select input choices\n     */\n    set choices(value) { this.choices$.next(value); }\n    get choices() { return this.choices$.value; }\n    /**\n     * Whether the field is required\n     */\n    get required() {\n        return formControlIsRequired(this.formControl);\n    }\n    ngOnInit() {\n        this.disabled$.next(this.formControl.disabled);\n    }\n    /**\n     * Get error message\n     */\n    getErrorMessage() {\n        return getControlErrorMessage(this.formControl, this.errors);\n    }\n    onDisableSwitchClick() {\n        this.toggleDisabled();\n    }\n    toggleDisabled() {\n        const disabled = !this.disabled$.value;\n        if (disabled === true) {\n            this.formControl.disable();\n        }\n        else {\n            this.formControl.enable();\n        }\n        this.disabled$.next(disabled);\n    }\n};\nFormFieldSelectComponent.ɵfac = function FormFieldSelectComponent_Factory(t) { return new (t || FormFieldSelectComponent)(); };\nFormFieldSelectComponent.ɵcmp = ɵɵdefineComponent({ type: FormFieldSelectComponent, selectors: [[\"igo-form-field-select\"]], inputs: { choices: \"choices\", formControl: \"formControl\", placeholder: \"placeholder\", errors: \"errors\", disableSwitch: \"disableSwitch\" }, decls: 6, vars: 8, consts: [[3, \"required\", \"placeholder\", \"formControl\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"igo-form-disable-switch\", \"matPrefix\", \"\", 3, \"svgIcon\", \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"value\"], [\"matPrefix\", \"\", 1, \"igo-form-disable-switch\", 3, \"svgIcon\", \"click\"]], template: function FormFieldSelectComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-form-field\");\n        ɵɵelementStart(1, \"mat-select\", 0);\n        ɵɵtemplate(2, FormFieldSelectComponent_mat_option_2_Template, 2, 2, \"mat-option\", 1);\n        ɵɵpipe(3, \"async\");\n        ɵɵelementEnd();\n        ɵɵtemplate(4, FormFieldSelectComponent_mat_icon_4_Template, 2, 3, \"mat-icon\", 2);\n        ɵɵtemplate(5, FormFieldSelectComponent_mat_error_5_Template, 3, 3, \"mat-error\", 3);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"required\", ctx.required)(\"placeholder\", ctx.placeholder)(\"formControl\", ctx.formControl);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(3, 6, ctx.choices$));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ctx.disableSwitch === true);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.formControl.errors);\n    } }, directives: [MatFormField, MatSelect, RequiredValidator, NgControlStatus, FormControlDirective, NgForOf, NgIf, MatOption, MatIcon, MatPrefix, MatError], pipes: [AsyncPipe, TranslatePipe], encapsulation: 2, changeDetection: 0 });\nFormFieldSelectComponent = __decorate([\n    IgoFormFieldComponent('select')\n], FormFieldSelectComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FormFieldSelectComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-form-field-select',\n                templateUrl: './form-field-select.component.html',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], null, { choices: [{\n            type: Input\n        }], formControl: [{\n            type: Input\n        }], placeholder: [{\n            type: Input\n        }], errors: [{\n            type: Input\n        }], disableSwitch: [{\n            type: Input\n        }] }); })();\n\nfunction FormFieldTextComponent_mat_icon_2_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-icon\", 3);\n    ɵɵlistener(\"click\", function FormFieldTextComponent_mat_icon_2_Template_mat_icon_click_0_listener() { ɵɵrestoreView(_r3); const ctx_r2 = ɵɵnextContext(); return ctx_r2.onDisableSwitchClick(); });\n    ɵɵpipe(1, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"svgIcon\", ɵɵpipeBind1(1, 1, ctx_r0.disabled$) === true ? \"checkbox-blank-outline\" : \"checkbox-marked-outline\");\n} }\nfunction FormFieldTextComponent_mat_error_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-error\");\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ɵɵpipeBind1(2, 1, ctx_r1.getErrorMessage()));\n} }\n/**\n * This component renders a text field\n */\nlet FormFieldTextComponent = class FormFieldTextComponent {\n    constructor() {\n        this.disabled$ = new BehaviorSubject(false);\n        /**\n         * Wheter a disable switch should be available\n         */\n        this.disableSwitch = false;\n    }\n    /**\n     * Whether the field is required\n     */\n    get required() {\n        return formControlIsRequired(this.formControl);\n    }\n    ngOnInit() {\n        this.disabled$.next(this.formControl.disabled);\n    }\n    /**\n     * Get error message\n     */\n    getErrorMessage() {\n        return getControlErrorMessage(this.formControl, this.errors);\n    }\n    onDisableSwitchClick() {\n        this.toggleDisabled();\n    }\n    toggleDisabled() {\n        const disabled = !this.disabled$.value;\n        if (disabled === true) {\n            this.formControl.disable();\n        }\n        else {\n            this.formControl.enable();\n        }\n        this.disabled$.next(disabled);\n    }\n};\nFormFieldTextComponent.ɵfac = function FormFieldTextComponent_Factory(t) { return new (t || FormFieldTextComponent)(); };\nFormFieldTextComponent.ɵcmp = ɵɵdefineComponent({ type: FormFieldTextComponent, selectors: [[\"igo-form-field-text\"]], inputs: { formControl: \"formControl\", placeholder: \"placeholder\", errors: \"errors\", disableSwitch: \"disableSwitch\" }, decls: 4, vars: 5, consts: [[\"matInput\", \"\", 3, \"required\", \"placeholder\", \"formControl\"], [\"class\", \"igo-form-disable-switch\", \"matPrefix\", \"\", 3, \"svgIcon\", \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [\"matPrefix\", \"\", 1, \"igo-form-disable-switch\", 3, \"svgIcon\", \"click\"]], template: function FormFieldTextComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-form-field\");\n        ɵɵelement(1, \"input\", 0);\n        ɵɵtemplate(2, FormFieldTextComponent_mat_icon_2_Template, 2, 3, \"mat-icon\", 1);\n        ɵɵtemplate(3, FormFieldTextComponent_mat_error_3_Template, 3, 3, \"mat-error\", 2);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"required\", ctx.required)(\"placeholder\", ctx.placeholder)(\"formControl\", ctx.formControl);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.disableSwitch === true);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.formControl.errors);\n    } }, directives: [MatFormField, MatInput, DefaultValueAccessor, RequiredValidator, NgControlStatus, FormControlDirective, NgIf, MatIcon, MatPrefix, MatError], pipes: [AsyncPipe, TranslatePipe], encapsulation: 2, changeDetection: 0 });\nFormFieldTextComponent = __decorate([\n    IgoFormFieldComponent('text')\n], FormFieldTextComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FormFieldTextComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-form-field-text',\n                templateUrl: './form-field-text.component.html',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], null, { formControl: [{\n            type: Input\n        }], placeholder: [{\n            type: Input\n        }], errors: [{\n            type: Input\n        }], disableSwitch: [{\n            type: Input\n        }] }); })();\n\nfunction FormFieldTextareaComponent_mat_icon_3_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-icon\", 3);\n    ɵɵlistener(\"click\", function FormFieldTextareaComponent_mat_icon_3_Template_mat_icon_click_0_listener() { ɵɵrestoreView(_r3); const ctx_r2 = ɵɵnextContext(); return ctx_r2.onDisableSwitchClick(); });\n    ɵɵpipe(1, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"svgIcon\", ɵɵpipeBind1(1, 1, ctx_r0.disabled$) === true ? \"checkbox-blank-outline\" : \"checkbox-marked-outline\");\n} }\nfunction FormFieldTextareaComponent_mat_error_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-error\");\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ɵɵpipeBind1(2, 1, ctx_r1.getErrorMessage()));\n} }\n/**\n * This component renders a textarea field\n */\nlet FormFieldTextareaComponent = class FormFieldTextareaComponent {\n    constructor() {\n        this.disabled$ = new BehaviorSubject(false);\n        /**\n         * Wheter a disable switch should be available\n         */\n        this.disableSwitch = false;\n    }\n    /**\n     * Whether the field is required\n     */\n    get required() {\n        return formControlIsRequired(this.formControl);\n    }\n    ngOnInit() {\n        this.disabled$.next(this.formControl.disabled);\n    }\n    /**\n     * Get error message\n     */\n    getErrorMessage() {\n        return getControlErrorMessage(this.formControl, this.errors);\n    }\n    onDisableSwitchClick() {\n        this.toggleDisabled();\n    }\n    toggleDisabled() {\n        const disabled = !this.disabled$.value;\n        if (disabled === true) {\n            this.formControl.disable();\n        }\n        else {\n            this.formControl.enable();\n        }\n        this.disabled$.next(disabled);\n    }\n};\nFormFieldTextareaComponent.ɵfac = function FormFieldTextareaComponent_Factory(t) { return new (t || FormFieldTextareaComponent)(); };\nFormFieldTextareaComponent.ɵcmp = ɵɵdefineComponent({ type: FormFieldTextareaComponent, selectors: [[\"igo-form-field-textarea\"]], inputs: { formControl: \"formControl\", placeholder: \"placeholder\", errors: \"errors\", disableSwitch: \"disableSwitch\" }, decls: 5, vars: 5, consts: [[\"matInput\", \"\", 3, \"required\", \"placeholder\", \"formControl\"], [\"class\", \"igo-form-disable-switch\", \"matPrefix\", \"\", 3, \"svgIcon\", \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [\"matPrefix\", \"\", 1, \"igo-form-disable-switch\", 3, \"svgIcon\", \"click\"]], template: function FormFieldTextareaComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-form-field\");\n        ɵɵelementStart(1, \"textarea\", 0);\n        ɵɵtext(2, \"  \");\n        ɵɵelementEnd();\n        ɵɵtemplate(3, FormFieldTextareaComponent_mat_icon_3_Template, 2, 3, \"mat-icon\", 1);\n        ɵɵtemplate(4, FormFieldTextareaComponent_mat_error_4_Template, 3, 3, \"mat-error\", 2);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"required\", ctx.required)(\"placeholder\", ctx.placeholder)(\"formControl\", ctx.formControl);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ctx.disableSwitch === true);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.formControl.errors);\n    } }, directives: [MatFormField, MatInput, DefaultValueAccessor, RequiredValidator, NgControlStatus, FormControlDirective, NgIf, MatIcon, MatPrefix, MatError], pipes: [AsyncPipe, TranslatePipe], encapsulation: 2, changeDetection: 0 });\nFormFieldTextareaComponent = __decorate([\n    IgoFormFieldComponent('textarea')\n], FormFieldTextareaComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FormFieldTextareaComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-form-field-textarea',\n                templateUrl: './form-field-textarea.component.html',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], null, { formControl: [{\n            type: Input\n        }], placeholder: [{\n            type: Input\n        }], errors: [{\n            type: Input\n        }], disableSwitch: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoFormFieldModule {\n}\nIgoFormFieldModule.ɵmod = ɵɵdefineNgModule({ type: IgoFormFieldModule });\nIgoFormFieldModule.ɵinj = ɵɵdefineInjector({ factory: function IgoFormFieldModule_Factory(t) { return new (t || IgoFormFieldModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatIconModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatSelectModule,\n            IgoLanguageModule,\n            IgoDynamicOutletModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoFormFieldModule, { declarations: [FormFieldComponent,\n        FormFieldSelectComponent,\n        FormFieldTextComponent,\n        FormFieldTextareaComponent], imports: [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatIconModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatSelectModule,\n        IgoLanguageModule,\n        IgoDynamicOutletModule], exports: [FormFieldComponent,\n        FormFieldSelectComponent,\n        FormFieldTextComponent,\n        FormFieldTextareaComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoFormFieldModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatIconModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatSelectModule,\n                    IgoLanguageModule,\n                    IgoDynamicOutletModule\n                ],\n                exports: [\n                    FormFieldComponent,\n                    FormFieldSelectComponent,\n                    FormFieldTextComponent,\n                    FormFieldTextareaComponent\n                ],\n                declarations: [\n                    FormFieldComponent,\n                    FormFieldSelectComponent,\n                    FormFieldTextComponent,\n                    FormFieldTextareaComponent\n                ]\n            }]\n    }], null, null); })();\n\nfunction FormGroupComponent_div_0_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 5);\n    ɵɵelement(1, \"igo-form-field\", 6);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const field_r3 = ctx.$implicit;\n    const ctx_r2 = ɵɵnextContext(2);\n    ɵɵproperty(\"ngClass\", ctx_r2.getFieldNgClass(field_r3));\n    ɵɵadvance(1);\n    ɵɵproperty(\"field\", field_r3);\n} }\nfunction FormGroupComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 3);\n    ɵɵtemplate(1, FormGroupComponent_div_0_div_1_Template, 2, 2, \"div\", 4);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r0.group.fields);\n} }\nfunction FormGroupComponent_mat_error_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-error\");\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ɵɵpipeBind1(2, 1, ctx_r1.getErrorMessage()));\n} }\nconst _c0$5 = [\"*\"];\n/**\n * A configurable form, optionnally bound to an entity\n * (for example in case of un update). Submitting that form\n * emits an event with the form data but no other operation is performed.\n */\nclass FormGroupComponent {\n    constructor() { }\n    /**\n     * Form group control\n     */\n    get formControl() { return this.group.control; }\n    /**\n     * Return the number of columns a field should occupy.\n     * The maximum allowed is 2, even if the field config says more.\n     * @param field Field\n     * @returns Number of columns\n     * @internal\n     */\n    getFieldColSpan(field) {\n        let colSpan = 2;\n        const options = field.options || {};\n        if (options.cols && options.cols > 0) {\n            colSpan = Math.min(options.cols, 2);\n        }\n        return colSpan;\n    }\n    /**\n     * Return the number of columns a field should occupy.\n     * The maximum allowed is 2, even if the field config says more.\n     * @param field Field\n     * @returns Number of columns\n     * @internal\n     */\n    getFieldNgClass(field) {\n        const colspan = this.getFieldColSpan(field);\n        return { [`igo-form-field-colspan-${colspan}`]: true };\n    }\n    /**\n     * Get error message\n     */\n    getErrorMessage() {\n        const options = this.group.options || {};\n        return getControlErrorMessage(this.formControl, options.errors || {});\n    }\n}\nFormGroupComponent.ɵfac = function FormGroupComponent_Factory(t) { return new (t || FormGroupComponent)(); };\nFormGroupComponent.ɵcmp = ɵɵdefineComponent({ type: FormGroupComponent, selectors: [[\"igo-form-group\"]], inputs: { group: \"group\", errors: \"errors\" }, ngContentSelectors: _c0$5, decls: 4, vars: 2, consts: [[\"class\", \"igo-form-group-fields\", 4, \"ngIf\"], [1, \"igo-form-group-extra-content\"], [4, \"ngIf\"], [1, \"igo-form-group-fields\"], [\"class\", \"igo-form-field-wrapper\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"igo-form-field-wrapper\", 3, \"ngClass\"], [3, \"field\"]], template: function FormGroupComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵprojectionDef();\n        ɵɵtemplate(0, FormGroupComponent_div_0_Template, 2, 1, \"div\", 0);\n        ɵɵelementStart(1, \"div\", 1);\n        ɵɵprojection(2);\n        ɵɵelementEnd();\n        ɵɵtemplate(3, FormGroupComponent_mat_error_3_Template, 3, 3, \"mat-error\", 2);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.group && ctx.group.fields.length > 0);\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngIf\", ctx.formControl.errors);\n    } }, directives: [NgIf, NgForOf, NgClass, FormFieldComponent, MatError], pipes: [TranslatePipe], styles: [\"[_nghost-%COMP%]{display:block;height:100%;overflow:auto;padding:10px 5px;width:100%}.igo-form-field-wrapper[_ngcontent-%COMP%]{display:inline-block;padding:0 5px}.igo-form-field-colspan-2[_ngcontent-%COMP%]{width:100%}.igo-form-field-colspan-1[_ngcontent-%COMP%]{width:50%}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FormGroupComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-form-group',\n                templateUrl: './form-group.component.html',\n                styleUrls: ['./form-group.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { group: [{\n            type: Input\n        }], errors: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoFormGroupModule {\n}\nIgoFormGroupModule.ɵmod = ɵɵdefineNgModule({ type: IgoFormGroupModule });\nIgoFormGroupModule.ɵinj = ɵɵdefineInjector({ factory: function IgoFormGroupModule_Factory(t) { return new (t || IgoFormGroupModule)(); }, imports: [[\n            CommonModule,\n            MatFormFieldModule,\n            IgoLanguageModule,\n            IgoFormFieldModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoFormGroupModule, { declarations: [FormGroupComponent], imports: [CommonModule,\n        MatFormFieldModule,\n        IgoLanguageModule,\n        IgoFormFieldModule], exports: [FormGroupComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoFormGroupModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatFormFieldModule,\n                    IgoLanguageModule,\n                    IgoFormFieldModule\n                ],\n                exports: [\n                    FormGroupComponent\n                ],\n                declarations: [\n                    FormGroupComponent\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * @ignore\n */\nclass IgoFormModule {\n}\nIgoFormModule.ɵmod = ɵɵdefineNgModule({ type: IgoFormModule });\nIgoFormModule.ɵinj = ɵɵdefineInjector({ factory: function IgoFormModule_Factory(t) { return new (t || IgoFormModule)(); }, providers: [\n        FormService,\n        FormFieldService\n    ], imports: [[\n            CommonModule,\n            IgoFormGroupModule,\n            IgoFormFieldModule\n        ], IgoFormFormModule,\n        IgoFormGroupModule,\n        IgoFormFieldModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoFormModule, { imports: [CommonModule,\n        IgoFormGroupModule,\n        IgoFormFieldModule], exports: [IgoFormFormModule,\n        IgoFormGroupModule,\n        IgoFormFieldModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoFormModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoFormGroupModule,\n                    IgoFormFieldModule\n                ],\n                exports: [\n                    IgoFormFormModule,\n                    IgoFormGroupModule,\n                    IgoFormFieldModule\n                ],\n                declarations: [],\n                providers: [\n                    FormService,\n                    FormFieldService\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * @ignore\n */\nclass IgoEntitySelectorModule {\n}\nIgoEntitySelectorModule.ɵmod = ɵɵdefineNgModule({ type: IgoEntitySelectorModule });\nIgoEntitySelectorModule.ɵinj = ɵɵdefineInjector({ factory: function IgoEntitySelectorModule_Factory(t) { return new (t || IgoEntitySelectorModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            MatSelectModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoEntitySelectorModule, { declarations: [EntitySelectorComponent], imports: [CommonModule,\n        FormsModule,\n        MatSelectModule], exports: [EntitySelectorComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoEntitySelectorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    MatSelectModule\n                ],\n                exports: [EntitySelectorComponent],\n                declarations: [EntitySelectorComponent]\n            }]\n    }], null, null); })();\n\nclass StopDropPropagationDirective {\n    onDrop(event) {\n        event.preventDefault();\n        event.stopPropagation();\n    }\n}\nStopDropPropagationDirective.ɵfac = function StopDropPropagationDirective_Factory(t) { return new (t || StopDropPropagationDirective)(); };\nStopDropPropagationDirective.ɵdir = ɵɵdefineDirective({ type: StopDropPropagationDirective, selectors: [[\"\", \"igoStopDropPropagation\", \"\"]], hostBindings: function StopDropPropagationDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"drop\", function StopDropPropagationDirective_drop_HostBindingHandler($event) { return ctx.onDrop($event); });\n    } } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(StopDropPropagationDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoStopDropPropagation]'\n            }]\n    }], null, { onDrop: [{\n            type: HostListener,\n            args: ['drop', ['$event']]\n        }] }); })();\n\nclass IgoStopPropagationModule {\n    static forRoot() {\n        return {\n            ngModule: IgoStopPropagationModule,\n            providers: []\n        };\n    }\n}\nIgoStopPropagationModule.ɵmod = ɵɵdefineNgModule({ type: IgoStopPropagationModule });\nIgoStopPropagationModule.ɵinj = ɵɵdefineInjector({ factory: function IgoStopPropagationModule_Factory(t) { return new (t || IgoStopPropagationModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoStopPropagationModule, { declarations: [StopDropPropagationDirective, StopPropagationDirective], exports: [StopDropPropagationDirective, StopPropagationDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoStopPropagationModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [StopDropPropagationDirective, StopPropagationDirective],\n                exports: [StopDropPropagationDirective, StopPropagationDirective]\n            }]\n    }], null, null); })();\n\n/**\n * @ignore\n */\nclass IgoEntityTablePaginatorModule {\n}\nIgoEntityTablePaginatorModule.ɵmod = ɵɵdefineNgModule({ type: IgoEntityTablePaginatorModule });\nIgoEntityTablePaginatorModule.ɵinj = ɵɵdefineInjector({ factory: function IgoEntityTablePaginatorModule_Factory(t) { return new (t || IgoEntityTablePaginatorModule)(); }, imports: [[\n            MatPaginatorModule,\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoEntityTablePaginatorModule, { declarations: [EntityTablePaginatorComponent], imports: [MatPaginatorModule], exports: [EntityTablePaginatorComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoEntityTablePaginatorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    MatPaginatorModule,\n                ],\n                exports: [\n                    EntityTablePaginatorComponent\n                ],\n                declarations: [\n                    EntityTablePaginatorComponent,\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoImageModule {\n    static forRoot() {\n        return {\n            ngModule: IgoImageModule,\n            providers: []\n        };\n    }\n}\nIgoImageModule.ɵmod = ɵɵdefineNgModule({ type: IgoImageModule });\nIgoImageModule.ɵinj = ɵɵdefineInjector({ factory: function IgoImageModule_Factory(t) { return new (t || IgoImageModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoImageModule, { declarations: [SecureImagePipe], exports: [SecureImagePipe] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoImageModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [SecureImagePipe],\n                exports: [SecureImagePipe]\n            }]\n    }], null, null); })();\n\n/**\n * @ignore\n */\nclass IgoEntityTableModule {\n}\nIgoEntityTableModule.ɵmod = ɵɵdefineNgModule({ type: IgoEntityTableModule });\nIgoEntityTableModule.ɵinj = ɵɵdefineInjector({ factory: function IgoEntityTableModule_Factory(t) { return new (t || IgoEntityTableModule)(); }, imports: [[\n            CommonModule,\n            MatTableModule,\n            MatSortModule,\n            MatIconModule,\n            MatButtonModule,\n            MatCheckboxModule,\n            MatPaginatorModule,\n            IgoStopPropagationModule,\n            IgoCustomHtmlModule,\n            IgoEntityTablePaginatorModule,\n            IgoImageModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoEntityTableModule, { declarations: [EntityTableComponent,\n        EntityTableRowDirective], imports: [CommonModule,\n        MatTableModule,\n        MatSortModule,\n        MatIconModule,\n        MatButtonModule,\n        MatCheckboxModule,\n        MatPaginatorModule,\n        IgoStopPropagationModule,\n        IgoCustomHtmlModule,\n        IgoEntityTablePaginatorModule,\n        IgoImageModule,\n        IgoLanguageModule], exports: [EntityTableComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoEntityTableModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatTableModule,\n                    MatSortModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatCheckboxModule,\n                    MatPaginatorModule,\n                    IgoStopPropagationModule,\n                    IgoCustomHtmlModule,\n                    IgoEntityTablePaginatorModule,\n                    IgoImageModule,\n                    IgoLanguageModule\n                ],\n                exports: [\n                    EntityTableComponent\n                ],\n                declarations: [\n                    EntityTableComponent,\n                    EntityTableRowDirective\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoEntityModule {\n}\nIgoEntityModule.ɵmod = ɵɵdefineNgModule({ type: IgoEntityModule });\nIgoEntityModule.ɵinj = ɵɵdefineInjector({ factory: function IgoEntityModule_Factory(t) { return new (t || IgoEntityModule)(); }, imports: [[\n            CommonModule\n        ], IgoEntitySelectorModule,\n        IgoEntityTableModule,\n        IgoEntityTablePaginatorModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoEntityModule, { imports: [CommonModule], exports: [IgoEntitySelectorModule,\n        IgoEntityTableModule,\n        IgoEntityTablePaginatorModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoEntityModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    IgoEntitySelectorModule,\n                    IgoEntityTableModule,\n                    IgoEntityTablePaginatorModule\n                ],\n                declarations: []\n            }]\n    }], null, null); })();\n\nclass InteractiveTourLoader {\n    constructor(http, configService) {\n        this.http = http;\n        this.configService = configService;\n        this.jsonURL = this.getPathToConfigFile();\n    }\n    loadConfigTour() {\n        this.getJSON()\n            .subscribe((data) => {\n            this.allToursOptions = data;\n        }, (err) => {\n            throw new Error('Problem with Interactive tour configuration file: interactiveTour.json not find. Check if the file and is path is set correctly.');\n        });\n    }\n    getPathToConfigFile() {\n        return (this.configService.getConfig('interactiveTour.pathToConfigFile') ||\n            './config/interactiveTour.json');\n    }\n    getJSON() {\n        return this.http.get(this.jsonURL).pipe(catchError((e) => {\n            e.error.caught = true;\n            throw e;\n        }));\n    }\n    getTourOptionData(toolName) {\n        if (this.allToursOptions === undefined) {\n            return undefined;\n        }\n        let nameInConfigFile = toolName;\n        nameInConfigFile = nameInConfigFile.replace(/\\s/g, '');\n        return this.allToursOptions[nameInConfigFile];\n    }\n}\nInteractiveTourLoader.ɵfac = function InteractiveTourLoader_Factory(t) { return new (t || InteractiveTourLoader)(ɵɵinject(HttpClient), ɵɵinject(ConfigService)); };\nInteractiveTourLoader.ɵprov = ɵɵdefineInjectable({ token: InteractiveTourLoader, factory: InteractiveTourLoader.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(InteractiveTourLoader, [{\n        type: Injectable\n    }], function () { return [{ type: HttpClient }, { type: ConfigService }]; }, null); })();\n\nclass InteractiveTourService {\n    constructor(configService, mediaService, languageService, interactiveTourLoader, shepherdService) {\n        this.configService = configService;\n        this.mediaService = mediaService;\n        this.languageService = languageService;\n        this.interactiveTourLoader = interactiveTourLoader;\n        this.shepherdService = shepherdService;\n        this.nextIndex = 1;\n        if (this.isAppHaveTour()) {\n            this.interactiveTourLoader.loadConfigTour();\n        }\n    }\n    isAppHaveTour() {\n        const haveTour = this.configService.getConfig('interactiveTour.activateInteractiveTour');\n        if (haveTour === undefined) {\n            return true;\n        }\n        else {\n            return haveTour;\n        }\n    }\n    isToolHaveTourConfig(toolName) {\n        const checkTourActiveOptions = this.interactiveTourLoader.getTourOptionData(toolName);\n        if (checkTourActiveOptions === undefined) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n    disabledTourButton(toolName) {\n        const stepConfig = this.interactiveTourLoader.getTourOptionData(toolName);\n        if (stepConfig === null || stepConfig === void 0 ? void 0 : stepConfig.conditions) {\n            for (const condition of stepConfig === null || stepConfig === void 0 ? void 0 : stepConfig.conditions) {\n                if (document.querySelector(condition) === null) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    isMobile() {\n        return this.mediaService.isMobile();\n    }\n    isTourDisplayInMobile() {\n        const showInMobile = this.configService.getConfig('interactiveTour.tourInMobile');\n        if (showInMobile === undefined) {\n            return true;\n        }\n        return this.configService.getConfig('interactiveTour.tourInMobile');\n    }\n    getButtons(buttonKind) {\n        if (buttonKind === 'noBackButton') {\n            return [\n                {\n                    classes: 'shepherd-button-primary',\n                    text: this.languageService.translate.instant('igo.common.interactiveTour.nextButton'),\n                    type: 'next'\n                }\n            ];\n        }\n        if (buttonKind === 'first') {\n            return [\n                {\n                    classes: 'shepherd-button-secondary',\n                    text: this.languageService.translate.instant('igo.common.interactiveTour.exitButton'),\n                    type: 'cancel'\n                },\n                {\n                    classes: 'shepherd-button-primary',\n                    text: this.languageService.translate.instant('igo.common.interactiveTour.nextButton'),\n                    type: 'next'\n                }\n            ];\n        }\n        if (buttonKind === 'last') {\n            return [\n                {\n                    classes: 'shepherd-button-secondary',\n                    text: this.languageService.translate.instant('igo.common.interactiveTour.backButton'),\n                    type: 'back'\n                },\n                {\n                    classes: 'shepherd-button-primary',\n                    text: this.languageService.translate.instant('igo.common.interactiveTour.exitButton'),\n                    type: 'cancel'\n                }\n            ];\n        }\n        return [\n            {\n                classes: 'shepherd-button-secondary',\n                text: this.languageService.translate.instant('igo.common.interactiveTour.backButton'),\n                type: 'back'\n            },\n            {\n                classes: 'shepherd-button-primary',\n                text: this.languageService.translate.instant('igo.common.interactiveTour.nextButton'),\n                type: 'next'\n            }\n        ];\n    }\n    getAction(actionName) {\n        const action = {\n            click: 'click'\n        };\n        return action[actionName.toLowerCase()];\n    }\n    addProgress() {\n        const self = this;\n        let nbTry = 0;\n        const maxTry = 21;\n        const checkExist = setInterval(() => {\n            if (self.getCurrentStep()) {\n                if (self.getCurrentStep().options.attachTo.element && !document.querySelector(self.getCurrentStep().options.attachTo.element)) {\n                    self.cancel();\n                    clearInterval(checkExist);\n                    return;\n                }\n                else {\n                    const currentStepElement = self.getCurrentStep().getElement();\n                    if (currentStepElement) {\n                        const shepherdList = currentStepElement.querySelectorAll('.shepherd-content, .shepherd-text');\n                        shepherdList.forEach(element => {\n                            element.classList.add('mat-typography');\n                        });\n                    }\n                    const header = currentStepElement\n                        ? currentStepElement.querySelector('.shepherd-header')\n                        : undefined;\n                    nbTry++;\n                    if (header || nbTry > maxTry) {\n                        clearInterval(checkExist);\n                    }\n                    if (header) {\n                        const stepsArray = self.steps;\n                        const progress = document.createElement('span');\n                        progress.className = 'shepherd-progress';\n                        progress.innerText = `${stepsArray.indexOf(self.getCurrentStep()) + 1}/${stepsArray.length}`;\n                        header.insertBefore(progress, currentStepElement.querySelector('.shepherd-cancel-icon'));\n                    }\n                }\n            }\n        }, 100);\n    }\n    checkNext(index, tour, service) {\n        if (tour.getCurrentStep()) {\n            if (tour.getCurrentStep().options.attachTo.element && document.querySelector(tour.getCurrentStep().options.attachTo.element)) {\n                tour.complete();\n                return;\n            }\n            if (index.index === tour.steps.length - 1) {\n                tour.complete();\n                return;\n            }\n            tour.steps.splice(index.index, 1);\n            const nextStep = tour.steps[index.index];\n            if (nextStep.options.attachTo.element && !document.querySelector(nextStep.options.attachTo.element)) {\n                service.checkNext(index, tour, service);\n            }\n            else {\n                tour._setupModal();\n                tour.show(nextStep.id);\n            }\n        }\n    }\n    executeAction(step, actionConfig) {\n        if (!actionConfig) {\n            return;\n        }\n        if (actionConfig.condition &&\n            ((actionConfig.condition.charAt(0) === '!' &&\n                document.querySelector(actionConfig.condition.slice(1))) ||\n                (actionConfig.condition.charAt(0) !== '!' &&\n                    !document.querySelector(actionConfig.condition)))) {\n            return;\n        }\n        const element = document.querySelector(actionConfig.element || step.element);\n        const action = this.getAction(actionConfig.action);\n        if (element && action) {\n            element[action]();\n        }\n    }\n    executeActionPromise(step, actionConfig) {\n        return new Promise((resolve) => {\n            this.executeAction(step, actionConfig);\n            if (!actionConfig || !actionConfig.waitFor) {\n                resolve();\n                return;\n            }\n            let nbTry = 0;\n            const maxTry = actionConfig.maxWait ? actionConfig.maxWait / 100 : 20;\n            const checkExist = setInterval(() => {\n                nbTry++;\n                if (nbTry > maxTry || document.querySelector(actionConfig.waitFor)) {\n                    clearInterval(checkExist);\n                    resolve();\n                }\n            }, 100);\n        });\n    }\n    getShepherdSteps(stepConfig) {\n        const shepherdSteps = [];\n        let i = 0;\n        for (const step of stepConfig.steps) {\n            shepherdSteps.push({\n                attachTo: {\n                    element: step.element,\n                    on: step.position || stepConfig.position\n                },\n                popperOptions: {\n                    modifiers: [{ name: 'offset', options: { offset: [0, 15] } }]\n                },\n                beforeShowPromise: () => {\n                    return Promise.all([\n                        this.executeActionPromise(this.previousStep, this.previousStep ? this.previousStep.beforeChange : undefined),\n                        this.executeActionPromise(step, step.beforeShow)\n                    ]);\n                },\n                buttons: this.getButtons(i === 0\n                    ? 'first'\n                    : i + 1 === stepConfig.steps.length\n                        ? 'last'\n                        : stepConfig.steps[i].noBackButton\n                            ? 'noBackButton'\n                            : undefined),\n                classes: step.class,\n                highlightClass: step.highlightClass,\n                scrollTo: step.scrollToElement || stepConfig.scrollToElement || true,\n                canClickTarget: step.disableInteraction\n                    ? !step.disableInteraction\n                    : undefined,\n                title: this.languageService.translate.instant(step.title || stepConfig.title),\n                text: [this.languageService.translate.instant(step.text)],\n                when: {\n                    show: () => {\n                        this.executeAction(step, step.onShow);\n                    },\n                    hide: () => {\n                        this.previousStep = step;\n                        this.executeAction(step, step.onHide);\n                    }\n                }\n            });\n            i++;\n        }\n        return shepherdSteps;\n    }\n    startTour(toolName) {\n        const stepConfig = this.interactiveTourLoader.getTourOptionData(toolName);\n        this.shepherdService.defaultStepOptions = {\n            classes: stepConfig.class,\n            highlightClass: stepConfig.highlightClass,\n            canClickTarget: stepConfig.disableInteraction\n                ? !stepConfig.disableInteraction\n                : true,\n            cancelIcon: {\n                enabled: true\n            }\n        };\n        const shepherdSteps = this.getShepherdSteps(stepConfig);\n        this.shepherdService.modal = true;\n        this.shepherdService.confirmCancel = false;\n        this.shepherdService.addSteps(shepherdSteps);\n        this.shepherdService.tourObject.on('show', this.addProgress);\n        this.shepherdService.tourObject.on('cancel', (index) => {\n            this.checkNext(index, this.shepherdService.tourObject, this);\n        });\n        this.shepherdService.start();\n    }\n}\nInteractiveTourService.ɵfac = function InteractiveTourService_Factory(t) { return new (t || InteractiveTourService)(ɵɵinject(ConfigService), ɵɵinject(MediaService), ɵɵinject(LanguageService), ɵɵinject(InteractiveTourLoader), ɵɵinject(ShepherdService)); };\nInteractiveTourService.ɵprov = ɵɵdefineInjectable({ token: InteractiveTourService, factory: InteractiveTourService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(InteractiveTourService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ConfigService }, { type: MediaService }, { type: LanguageService }, { type: InteractiveTourLoader }, { type: ShepherdService }]; }, null); })();\n\n/**\n * Service where all available tools and their component are registered.\n */\nclass Toolbox {\n    constructor(options = {}) {\n        this.options = options;\n        /**\n         * Observable of the active tool\n         */\n        this.activeTool$ = new BehaviorSubject(undefined);\n        /**\n         * Ordered list of tool names to display in a toolbar\n         */\n        this.toolbar$ = new BehaviorSubject([]);\n        /**\n         * Active tool history. Useful for activating the previous tool.\n         */\n        this.activeToolHistory = [];\n        /**\n         * Tool store\n         */\n        this.store = new EntityStore([], {\n            getKey: (tool) => tool.name\n        });\n        this.setToolbar(options.toolbar);\n        this.initStore();\n    }\n    get tools$() {\n        return this.store.entities$;\n    }\n    /**\n     * Destroy the toolbox\n     */\n    destroy() {\n        this.activeTool$$.unsubscribe();\n        this.store.destroy();\n    }\n    /**\n     * Return a tool\n     * @param name Tool name\n     * @returns tool Tool\n     */\n    getTool(name) {\n        return this.store.get(name);\n    }\n    /**\n     * Return all tools\n     * @returns Array of tools\n     */\n    getTools() {\n        return this.store.all();\n    }\n    /**\n     * Set tool configurations\n     * @param tools Tools\n     */\n    setTools(tools) {\n        this.store.load(tools);\n    }\n    /**\n     * Get toolbar\n     * @returns Toolbar value\n     */\n    getToolbar() {\n        return this.toolbar$.getValue();\n    }\n    /**\n     * Set toolbar\n     * @param toolbar A list of tool names\n     */\n    setToolbar(toolbar) {\n        this.toolbar$.next(toolbar || []);\n    }\n    /**\n     * Activate a tool (and deactivate other tools)\n     * @param name Tool name\n     * @param options Tool options\n     */\n    activateTool(name, options = {}) {\n        const tool = this.getTool(name);\n        if (tool === undefined) {\n            return;\n        }\n        this.store.state.update(tool, { active: true, options }, true);\n    }\n    /**\n     * Activate the previous tool, if any\n     */\n    activatePreviousTool() {\n        if (this.activeToolHistory.length <= 1) {\n            this.deactivateTool();\n            return;\n        }\n        const [previous, current] = this.activeToolHistory.splice(-2, 2);\n        this.activateTool(previous);\n    }\n    /**\n     * Activate the tool below, if any\n     */\n    /* activateBelowTool() {\n      const arrayTools = this.getToolbar();\n      const index = arrayTools.findIndex(t => t === this.activeTool$.getValue().name);\n      if (arrayTools[index + 1] !== undefined) {\n        this.deactivateTool();\n        const below = arrayTools[index + 1];\n        this.activateTool(below);\n      } else {\n        this.deactivateTool();\n        const below = arrayTools[0];\n        this.activateTool(below);\n      }\n    } */\n    /**\n     * Activate the tool above, if any\n     */\n    /* activateAboveTool() {\n      const arrayTools = this.getToolbar();\n      const index = arrayTools.findIndex(t => t === this.activeTool$.getValue().name);\n      if (arrayTools[index - 1] !== undefined) {\n        this.deactivateTool();\n        const above = arrayTools[index - 1];\n        this.activateTool(above);\n      } else {\n        this.deactivateTool();\n        const above = arrayTools[arrayTools.length - 1];\n        this.activateTool(above);\n      }\n    } */\n    /**\n     * Deactivate the active tool\n     */\n    deactivateTool() {\n        this.clearActiveToolHistory();\n        this.store.state.updateAll({ active: false });\n    }\n    /**\n     * Initialize the tool store and start observing the active tool\n     */\n    initStore() {\n        this.store = new EntityStore([], {\n            getKey: (entity) => entity.name\n        });\n        this.activeTool$$ = this.store.stateView\n            .firstBy$((record) => record.state.active === true)\n            .subscribe((record) => {\n            if (record === undefined) {\n                this.setActiveTool(undefined);\n                return;\n            }\n            const tool = record.entity;\n            const options = Object.assign({}, tool.options || {}, record.state.options || {});\n            this.setActiveTool(Object.assign({}, tool, { options }));\n        });\n    }\n    /**\n     * Set the active tool and update the tool history\n     * @param tool Tool\n     */\n    setActiveTool(tool) {\n        this.activeTool$.next(tool);\n        if (tool === undefined) {\n            this.clearActiveToolHistory();\n        }\n        else {\n            this.activeToolHistory = this.activeToolHistory\n                .filter((name) => name !== tool.name)\n                .concat([tool.name]);\n        }\n    }\n    /**\n     * Clear the tool history\n     */\n    clearActiveToolHistory() {\n        this.activeToolHistory = [];\n    }\n}\n\n/**\n * Service where runtime tool configurations are registered\n */\nclass ToolService {\n    constructor() {\n        /**\n         * Toolbox that holds main tools\n         */\n        this.toolbox = new Toolbox();\n        this.toolbox.setTools(this.getTools());\n    }\n    static register(tool) {\n        ToolService.tools[tool.name] = tool;\n    }\n    /**\n     * Return a tool\n     * @param name Tool name\n     * @returns tool Tool\n     */\n    getTool(name) {\n        return ToolService.tools[name];\n    }\n    /**\n     * Return all tools\n     * @returns tTols\n     */\n    getTools() {\n        return Object.values(ToolService.tools);\n    }\n}\nToolService.tools = {};\nToolService.ɵfac = function ToolService_Factory(t) { return new (t || ToolService)(); };\nToolService.ɵprov = ɵɵdefineInjectable({ token: ToolService, factory: ToolService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ToolService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nfunction InteractiveTourComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 1);\n    ɵɵlistener(\"click\", function InteractiveTourComponent_button_0_Template_button_click_0_listener() { ɵɵrestoreView(_r2); const ctx_r1 = ɵɵnextContext(); return ctx_r1.startInteractiveTour(); });\n    ɵɵelementStart(1, \"span\", 2);\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵpipe(4, \"translate\");\n    ɵɵpipe(5, \"async\");\n    ɵɵelementEnd();\n    ɵɵelement(6, \"mat-icon\", 3);\n    ɵɵpipe(7, \"translate\");\n    ɵɵpipe(8, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r0.getClass())(\"disabled\", ctx_r0.disabledTourButton);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate2(\"\", ɵɵpipeBind1(3, 5, \"igo.common.interactiveTour.buttonTitle\"), \" \", ɵɵpipeBind1(4, 7, ɵɵpipeBind1(5, 9, ctx_r0.discoverTitleInLocale$)), \"\");\n    ɵɵadvance(4);\n    ɵɵproperty(\"matTooltip\", ctx_r0.disabledTourButton ? ɵɵpipeBind1(7, 11, \"igo.common.interactiveTour.disaledTooltipTourToolButton\") : ɵɵpipeBind1(8, 13, \"igo.common.interactiveTour.tooltipTourToolButton\"));\n} }\nclass InteractiveTourComponent {\n    constructor(interactiveTourService, toolService) {\n        this.interactiveTourService = interactiveTourService;\n        this.toolService = toolService;\n        /**\n         * Toolbox that holds main tools\n         */\n        this.tourToStart = '';\n        this.discoverTitleInLocale$ = of('IGO');\n    }\n    getClass() {\n        return {\n            'tour-button-tool-icon': this.styleButton === 'icon',\n            'tour-button-tool': this.styleButton === 'raised'\n        };\n    }\n    get toolbox() {\n        return this.toolService.toolbox;\n    }\n    getTourToStart() {\n        if (this.tourToStart) {\n            return this.tourToStart;\n        }\n        else {\n            return this.activeToolName;\n        }\n    }\n    get activeToolName() {\n        if (this.toolbox) {\n            if (this.isActiveTool) {\n                return this.toolbox.activeTool$.getValue().name;\n            }\n            else {\n                return 'global';\n            }\n        }\n        else {\n            return undefined;\n        }\n    }\n    get isActiveTool() {\n        if (this.toolbox) {\n            return this.toolbox.activeTool$.getValue() !== undefined;\n        }\n        else {\n            return undefined;\n        }\n    }\n    get isToolHaveTour() {\n        if (this.activeToolName === 'about' && !this.tourToStart) {\n            return false;\n        }\n        return this.interactiveTourService.isToolHaveTourConfig(this.getTourToStart());\n    }\n    get showTourButton() {\n        // 2 conditions to show: have Tour on tool in Config file and if we are in mobile displayInMobile= true\n        let haveTour;\n        haveTour = this.isToolHaveTour;\n        if (haveTour === false) {\n            return false;\n        }\n        let inMobileAndShow;\n        if (this.interactiveTourService.isMobile()) {\n            inMobileAndShow = this.isTourDisplayInMobile;\n            if (inMobileAndShow === false) {\n                return false;\n            }\n        }\n        return true;\n    }\n    get isTourDisplayInMobile() {\n        return this.interactiveTourService.isTourDisplayInMobile();\n    }\n    get disabledTourButton() {\n        return this.interactiveTourService.disabledTourButton(this.activeToolName);\n    }\n    startInteractiveTour() {\n        const tour = this.getTourToStart();\n        if (tour) {\n            this.interactiveTourService.startTour(tour);\n        }\n        else {\n            return;\n        }\n    }\n}\nInteractiveTourComponent.ɵfac = function InteractiveTourComponent_Factory(t) { return new (t || InteractiveTourComponent)(ɵɵdirectiveInject(InteractiveTourService), ɵɵdirectiveInject(ToolService)); };\nInteractiveTourComponent.ɵcmp = ɵɵdefineComponent({ type: InteractiveTourComponent, selectors: [[\"igo-interactive-tour\"]], inputs: { tourToStart: \"tourToStart\", styleButton: \"styleButton\", discoverTitleInLocale$: \"discoverTitleInLocale$\" }, decls: 1, vars: 1, consts: [[\"mat-raised-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"ngClass\", \"disabled\", \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"ngClass\", \"disabled\", \"click\"], [1, \"interactive-tour-button-title\"], [\"svgIcon\", \"presentation-play\", 3, \"matTooltip\"]], template: function InteractiveTourComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, InteractiveTourComponent_button_0_Template, 9, 15, \"button\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.showTourButton);\n    } }, directives: [NgIf, MatButton, NgClass, MatIcon, MatTooltip], pipes: [TranslatePipe, AsyncPipe], styles: [\".shepherd-has-title .shepherd-content .shepherd-header{padding:.5em .75em}.shepherd-title{font-weight:revert!important;margin:0!important}.shepherd-progress{color:#737373;margin-right:15px}.shepherd-text{font-size:14px!important}.shepherd-element{border:1px solid #474747;box-shadow:4px 5px hsla(0,0%,39.6%,.6)}\"], encapsulation: 2 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(InteractiveTourComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-interactive-tour',\n                templateUrl: './interactive-tour.component.html',\n                styleUrls: ['./interactive-tour.component.scss'],\n                encapsulation: ViewEncapsulation.None\n            }]\n    }], function () { return [{ type: InteractiveTourService }, { type: ToolService }]; }, { tourToStart: [{\n            type: Input\n        }], styleButton: [{\n            type: Input\n        }], discoverTitleInLocale$: [{\n            type: Input\n        }] }); })();\n\nclass IgoInteractiveTourModule {\n}\nIgoInteractiveTourModule.ɵmod = ɵɵdefineNgModule({ type: IgoInteractiveTourModule });\nIgoInteractiveTourModule.ɵinj = ɵɵdefineInjector({ factory: function IgoInteractiveTourModule_Factory(t) { return new (t || IgoInteractiveTourModule)(); }, providers: [InteractiveTourService, InteractiveTourLoader], imports: [[\n            CommonModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTooltipModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoInteractiveTourModule, { declarations: [InteractiveTourComponent], imports: [CommonModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTooltipModule,\n        IgoLanguageModule], exports: [InteractiveTourComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoInteractiveTourModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [InteractiveTourComponent],\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTooltipModule,\n                    IgoLanguageModule\n                ],\n                providers: [InteractiveTourService, InteractiveTourLoader],\n                exports: [InteractiveTourComponent]\n            }]\n    }], null, null); })();\n\nclass KeyValuePipe {\n    transform(value, args) {\n        const keyValues = [];\n        Object.getOwnPropertyNames(value).forEach((key) => keyValues.push({ key, value: value[key] }));\n        return keyValues;\n    }\n}\nKeyValuePipe.ɵfac = function KeyValuePipe_Factory(t) { return new (t || KeyValuePipe)(); };\nKeyValuePipe.ɵpipe = ɵɵdefinePipe({ name: \"keyvalue\", type: KeyValuePipe, pure: true });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KeyValuePipe, [{\n        type: Pipe,\n        args: [{\n                name: 'keyvalue'\n            }]\n    }], null, null); })();\n\nclass IgoKeyValueModule {\n    static forRoot() {\n        return {\n            ngModule: IgoKeyValueModule,\n            providers: []\n        };\n    }\n}\nIgoKeyValueModule.ɵmod = ɵɵdefineNgModule({ type: IgoKeyValueModule });\nIgoKeyValueModule.ɵinj = ɵɵdefineInjector({ factory: function IgoKeyValueModule_Factory(t) { return new (t || IgoKeyValueModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoKeyValueModule, { declarations: [KeyValuePipe], exports: [KeyValuePipe] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoKeyValueModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [KeyValuePipe],\n                exports: [KeyValuePipe]\n            }]\n    }], null, null); })();\n\nfunction JsonDialogComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainer(0);\n} }\nfunction JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainer(0);\n} }\nconst _c0$6 = function (a0, a1) { return { obj: a0, baseKey: a1 }; };\nfunction JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_ng_container_1_ng_container_1_Template, 1, 0, \"ng-container\", 2);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const property_r6 = ɵɵnextContext(2).$implicit;\n    const baseKey_r4 = ɵɵnextContext().baseKey;\n    const ctx_r8 = ɵɵnextContext();\n    const _r1 = ɵɵreference(5);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngTemplateOutlet\", _r1)(\"ngTemplateOutletContext\", ɵɵpureFunction2(2, _c0$6, property_r6.value, ctx_r8.getKey(baseKey_r4, property_r6.key)));\n} }\nfunction JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\");\n    ɵɵelementStart(1, \"span\");\n    ɵɵelementStart(2, \"b\");\n    ɵɵtext(3);\n    ɵɵelementEnd();\n    ɵɵtext(4, \" : \");\n    ɵɵelementEnd();\n    ɵɵelement(5, \"span\", 10);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const property_r6 = ɵɵnextContext(2).$implicit;\n    const baseKey_r4 = ɵɵnextContext().baseKey;\n    const ctx_r10 = ɵɵnextContext();\n    ɵɵadvance(3);\n    ɵɵtextInterpolate(ctx_r10.getKey(baseKey_r4, property_r6.key));\n    ɵɵadvance(2);\n    ɵɵproperty(\"innerHtml\", property_r6.value, ɵɵsanitizeHtml);\n} }\nfunction JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_ng_container_1_Template, 2, 5, \"ng-container\", 8);\n    ɵɵtemplate(2, JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_ng_template_2_Template, 6, 2, \"ng-template\", null, 9, ɵɵtemplateRefExtractor);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const _r9 = ɵɵreference(3);\n    const property_r6 = ɵɵnextContext().$implicit;\n    const ctx_r7 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r7.isObject(property_r6.value))(\"ngIfElse\", _r9);\n} }\nfunction JsonDialogComponent_ng_template_4_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_Template, 4, 2, \"ng-container\", 7);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const property_r6 = ctx.$implicit;\n    const baseKey_r4 = ɵɵnextContext().baseKey;\n    const ctx_r5 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r5.ignoreKeys.indexOf(ctx_r5.getKey(baseKey_r4, property_r6.key)) === -1);\n} }\nfunction JsonDialogComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, JsonDialogComponent_ng_template_4_ng_container_0_Template, 2, 1, \"ng-container\", 6);\n    ɵɵpipe(1, \"keyvalue\");\n} if (rf & 2) {\n    const obj_r3 = ctx.obj;\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(1, 1, obj_r3));\n} }\nconst _c1$2 = function (a0) { return { obj: a0 }; };\nclass JsonDialogComponent {\n    constructor(dialogRef) {\n        this.dialogRef = dialogRef;\n    }\n    isObject(val) {\n        return typeof val === 'object' && !Array.isArray(val);\n    }\n    getKey(baseKey, key) {\n        return (baseKey ? baseKey + '.' : '') + key;\n    }\n}\nJsonDialogComponent.ɵfac = function JsonDialogComponent_Factory(t) { return new (t || JsonDialogComponent)(ɵɵdirectiveInject(MatDialogRef)); };\nJsonDialogComponent.ɵcmp = ɵɵdefineComponent({ type: JsonDialogComponent, selectors: [[\"igo-json-dialog\"]], decls: 9, vars: 5, consts: [[\"mat-dialog-title\", \"\", 1, \"mat-typography\"], [\"mat-dialog-content\", \"\", 1, \"mat-typography\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"loopObject\", \"\"], [\"mat-dialog-actions\", \"\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"notObject\", \"\"], [1, \"propertyValue\", 3, \"innerHtml\"]], template: function JsonDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"h1\", 0);\n        ɵɵtext(1);\n        ɵɵelementEnd();\n        ɵɵelementStart(2, \"div\", 1);\n        ɵɵtemplate(3, JsonDialogComponent_ng_container_3_Template, 1, 0, \"ng-container\", 2);\n        ɵɵtemplate(4, JsonDialogComponent_ng_template_4_Template, 2, 3, \"ng-template\", null, 3, ɵɵtemplateRefExtractor);\n        ɵɵelementEnd();\n        ɵɵelementStart(6, \"div\", 4);\n        ɵɵelementStart(7, \"button\", 5);\n        ɵɵlistener(\"click\", function JsonDialogComponent_Template_button_click_7_listener() { return ctx.dialogRef.close(false); });\n        ɵɵtext(8, \" OK \");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r1 = ɵɵreference(5);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate(ctx.title);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngTemplateOutlet\", _r1)(\"ngTemplateOutletContext\", ɵɵpureFunction1(3, _c1$2, ctx.data));\n    } }, directives: [MatDialogTitle, MatDialogContent, NgTemplateOutlet, MatDialogActions, MatButton, NgForOf, NgIf], pipes: [KeyValuePipe], encapsulation: 2 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(JsonDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-json-dialog',\n                templateUrl: './json-dialog.component.html'\n            }]\n    }], function () { return [{ type: MatDialogRef }]; }, null); })();\n\nclass JsonDialogService {\n    constructor(dialog) {\n        this.dialog = dialog;\n    }\n    open(title, data, ignoreKeys) {\n        const dialogRef = this.dialog.open(JsonDialogComponent, {\n            disableClose: false\n        });\n        dialogRef.componentInstance.data = data;\n        dialogRef.componentInstance.title = title;\n        dialogRef.componentInstance.ignoreKeys = ignoreKeys;\n        return dialogRef.afterClosed();\n    }\n}\nJsonDialogService.ɵfac = function JsonDialogService_Factory(t) { return new (t || JsonDialogService)(ɵɵinject(MatDialog)); };\nJsonDialogService.ɵprov = ɵɵdefineInjectable({ token: JsonDialogService, factory: JsonDialogService.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(JsonDialogService, [{\n        type: Injectable\n    }], function () { return [{ type: MatDialog }]; }, null); })();\n\nclass IgoJsonDialogModule {\n    static forRoot() {\n        return {\n            ngModule: IgoJsonDialogModule\n        };\n    }\n}\nIgoJsonDialogModule.ɵmod = ɵɵdefineNgModule({ type: IgoJsonDialogModule });\nIgoJsonDialogModule.ɵinj = ɵɵdefineInjector({ factory: function IgoJsonDialogModule_Factory(t) { return new (t || IgoJsonDialogModule)(); }, providers: [JsonDialogService], imports: [[CommonModule, MatButtonModule, MatDialogModule, IgoKeyValueModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoJsonDialogModule, { declarations: [JsonDialogComponent], imports: [CommonModule, MatButtonModule, MatDialogModule, IgoKeyValueModule], exports: [JsonDialogComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoJsonDialogModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule, MatButtonModule, MatDialogModule, IgoKeyValueModule],\n                exports: [JsonDialogComponent],\n                declarations: [JsonDialogComponent],\n                providers: [JsonDialogService]\n            }]\n    }], null, null); })();\n\nclass ListItemDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n        this._color = 'primary';\n        this._focused = false;\n        this._selected = false;\n        this._disabled = false;\n        this.beforeSelect = new EventEmitter();\n        this.beforeFocus = new EventEmitter();\n        this.beforeUnselect = new EventEmitter();\n        this.beforeUnfocus = new EventEmitter();\n        this.beforeDisable = new EventEmitter();\n        this.beforeEnable = new EventEmitter();\n        this.focus = new EventEmitter();\n        this.unfocus = new EventEmitter();\n        this.select = new EventEmitter();\n        this.unselect = new EventEmitter();\n        this.disable = new EventEmitter();\n        this.enable = new EventEmitter();\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    get focused() {\n        return this._focused;\n    }\n    set focused(value) {\n        if (value === this._focused) {\n            return;\n        }\n        if (this.disabled) {\n            return;\n        }\n        value ? this.beforeFocus.emit(this) : this.beforeUnfocus.emit(this);\n        this._focused = value;\n        if (this.selected !== true) {\n            this.toggleFocusedClass();\n        }\n        value ? this.focus.emit(this) : this.unfocus.emit(this);\n    }\n    get selected() {\n        return this._selected;\n    }\n    set selected(value) {\n        if (value === this._selected) {\n            return;\n        }\n        if (this.disabled) {\n            return;\n        }\n        value ? this.beforeSelect.emit(this) : this.beforeUnselect.emit(this);\n        this._selected = value;\n        this._focused = value;\n        this.toggleSelectedClass();\n        value ? this.select.emit(this) : this.unselect.emit(this);\n    }\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        if (value === this._disabled) {\n            return;\n        }\n        if (value === true) {\n            this.selected = false;\n        }\n        value ? this.beforeDisable.emit(this) : this.beforeEnable.emit(this);\n        this._disabled = value;\n        this.toggleDisabledClass();\n        value ? this.disable.emit(this) : this.enable.emit(this);\n    }\n    onClick() {\n        this.selected = true;\n    }\n    getOffsetTop() {\n        const padding = 5;\n        return this.el.nativeElement.offsetTop - padding;\n    }\n    toggleFocusedClass() {\n        if (this.focused) {\n            this.addCls(ListItemDirective.focusedCls);\n        }\n        else {\n            this.removeCls(ListItemDirective.focusedCls);\n        }\n    }\n    toggleSelectedClass() {\n        if (this.selected) {\n            this.addCls(ListItemDirective.selectedCls);\n            this.removeCls(ListItemDirective.focusedCls);\n        }\n        else {\n            this.removeCls(ListItemDirective.selectedCls);\n        }\n    }\n    toggleDisabledClass() {\n        if (this.disabled) {\n            this.addCls(ListItemDirective.disabledCls);\n        }\n        else {\n            this.removeCls(ListItemDirective.disabledCls);\n        }\n    }\n    addCls(cls) {\n        this.renderer.addClass(this.el.nativeElement, cls);\n    }\n    removeCls(cls) {\n        this.renderer.removeClass(this.el.nativeElement, cls);\n    }\n}\nListItemDirective.focusedCls = 'igo-list-item-focused';\nListItemDirective.selectedCls = 'igo-list-item-selected';\nListItemDirective.disabledCls = 'igo-list-item-disabled';\nListItemDirective.ɵfac = function ListItemDirective_Factory(t) { return new (t || ListItemDirective)(ɵɵdirectiveInject(Renderer2), ɵɵdirectiveInject(ElementRef)); };\nListItemDirective.ɵdir = ɵɵdefineDirective({ type: ListItemDirective, selectors: [[\"\", \"igoListItem\", \"\"]], hostBindings: function ListItemDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"click\", function ListItemDirective_click_HostBindingHandler() { return ctx.onClick(); });\n    } }, inputs: { color: \"color\", focused: \"focused\", selected: \"selected\", disabled: \"disabled\" }, outputs: { beforeSelect: \"beforeSelect\", beforeFocus: \"beforeFocus\", beforeUnselect: \"beforeUnselect\", beforeUnfocus: \"beforeUnfocus\", beforeDisable: \"beforeDisable\", beforeEnable: \"beforeEnable\", focus: \"focus\", unfocus: \"unfocus\", select: \"select\", unselect: \"unselect\", disable: \"disable\", enable: \"enable\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ListItemDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoListItem]'\n            }]\n    }], function () { return [{ type: Renderer2 }, { type: ElementRef }]; }, { color: [{\n            type: Input\n        }], focused: [{\n            type: Input\n        }], selected: [{\n            type: Input\n        }], disabled: [{\n            type: Input\n        }], beforeSelect: [{\n            type: Output\n        }], beforeFocus: [{\n            type: Output\n        }], beforeUnselect: [{\n            type: Output\n        }], beforeUnfocus: [{\n            type: Output\n        }], beforeDisable: [{\n            type: Output\n        }], beforeEnable: [{\n            type: Output\n        }], focus: [{\n            type: Output\n        }], unfocus: [{\n            type: Output\n        }], select: [{\n            type: Output\n        }], unselect: [{\n            type: Output\n        }], disable: [{\n            type: Output\n        }], enable: [{\n            type: Output\n        }], onClick: [{\n            type: HostListener,\n            args: ['click']\n        }] }); })();\n\nconst _c0$7 = function (a0) { return { \"selectable\": a0 }; };\nconst _c1$3 = [\"*\"];\nclass ListComponent {\n    constructor(el) {\n        this.el = el;\n        this._navigation = true;\n        this._selection = true;\n        this.subscriptions = [];\n    }\n    get navigation() {\n        return this._navigation;\n    }\n    set navigation(value) {\n        this._navigation = value;\n    }\n    get selection() {\n        return this._selection;\n    }\n    set selection(value) {\n        this._selection = value;\n    }\n    get selectedItem() {\n        return this._selectedItem;\n    }\n    set selectedItem(value) {\n        this.focusedItem = value;\n        this._selectedItem = value;\n    }\n    get focusedItem() {\n        return this._focusedItem;\n    }\n    set focusedItem(value) {\n        this._focusedItem = value;\n    }\n    handleKeyboardEvent(event) {\n        // It would be nice to be able to unsubscribe to the event\n        // completely but until ES7 this won't be possible because\n        // document events are not observables\n        if (this.navigationEnabled) {\n            if (event.key === 'ArrowUp' || event.key === 'ArrowDown') {\n                event.preventDefault();\n                this.navigate(event.key);\n            }\n            else if (event.key === 'Enter') {\n                this.select(this.focusedItem);\n            }\n        }\n    }\n    ngOnInit() {\n        this.enableNavigation();\n    }\n    ngAfterViewInit() {\n        if (this.listItems.length) {\n            this.init();\n        }\n        this.listItems$$ = this.listItems.changes.subscribe((items) => this.init());\n    }\n    ngOnDestroy() {\n        this.listItems$$.unsubscribe();\n    }\n    focus(item) {\n        if (!this.selection) {\n            return;\n        }\n        this.unfocus();\n        // We need to make this check because dynamic\n        // lists such as in the search results list may fail\n        if (item !== undefined) {\n            item.focused = true;\n        }\n    }\n    unfocus() {\n        if (this.focusedItem !== undefined) {\n            this.focusedItem.focused = false;\n        }\n        this.focusedItem = undefined;\n    }\n    focusNext() {\n        const items = this.listItems.toArray();\n        let item;\n        const igoList = this.el.nativeElement;\n        let disabled = true;\n        let index = this.getFocusedIndex();\n        if (index === undefined) {\n            index = -1;\n        }\n        while (disabled && index < items.length - 1) {\n            index += 1;\n            item = items[index];\n            disabled = item.disabled;\n        }\n        if (item !== undefined) {\n            this.focus(item);\n        }\n        if (!items[index + 1]) {\n            igoList.scrollTop = igoList.scrollHeight - igoList.clientHeight;\n            return;\n        }\n        if (item !== undefined && !this.isScrolledIntoView(item.el.nativeElement)) {\n            igoList.scrollTop =\n                item.el.nativeElement.offsetTop +\n                    item.el.nativeElement.children[0].offsetHeight -\n                    igoList.clientHeight;\n        }\n    }\n    focusPrevious() {\n        const items = this.listItems.toArray();\n        let item;\n        const igoList = this.el.nativeElement;\n        let disabled = true;\n        let index = this.getFocusedIndex();\n        while (disabled && index > 0) {\n            index -= 1;\n            item = items[index];\n            disabled = item.disabled;\n        }\n        if (item !== undefined) {\n            this.focus(item);\n        }\n        if (!items[index - 1]) {\n            igoList.scrollTop = 0;\n            return;\n        }\n        if (item !== undefined && !this.isScrolledIntoView(item.el.nativeElement)) {\n            const padding = 3;\n            igoList.scrollTop = item.el.nativeElement.offsetTop - padding;\n        }\n    }\n    select(item) {\n        if (!this.selection) {\n            return;\n        }\n        this.unselect();\n        if (item !== undefined) {\n            item.selected = true;\n        }\n    }\n    unselect() {\n        this.unfocus();\n        if (this.selectedItem !== undefined) {\n            this.selectedItem.selected = false;\n        }\n        this.selectedItem = undefined;\n    }\n    enableNavigation() {\n        if (this.navigation) {\n            this.navigationEnabled = true;\n        }\n    }\n    disableNavigation() {\n        this.navigationEnabled = false;\n    }\n    scrollToItem(item) {\n        this.el.nativeElement.scrollTop = item.getOffsetTop();\n    }\n    isScrolledIntoView(elem) {\n        const docViewTop = this.el.nativeElement.scrollTop + this.el.nativeElement.offsetTop;\n        const docViewBottom = docViewTop + this.el.nativeElement.clientHeight;\n        const elemTop = elem.offsetTop;\n        const elemBottom = elemTop + elem.children[0].offsetHeight;\n        return elemBottom <= docViewBottom && elemTop >= docViewTop;\n    }\n    init() {\n        this.subscribe();\n        this.selectedItem = this.findSelectedItem();\n        this.focusedItem = this.findFocusedItem();\n        this.enableNavigation();\n    }\n    subscribe() {\n        this.unsubscribe();\n        this.listItems.toArray().forEach(item => {\n            this.subscriptions.push(item.beforeSelect.subscribe((item2) => this.handleItemBeforeSelect(item2)));\n            this.subscriptions.push(item.select.subscribe((item2) => this.handleItemSelect(item2)));\n            this.subscriptions.push(item.beforeFocus.subscribe((item2) => this.handleItemBeforeFocus(item2)));\n            this.subscriptions.push(item.focus.subscribe((item2) => this.handleItemFocus(item2)));\n        }, this);\n    }\n    unsubscribe() {\n        this.subscriptions.forEach((sub) => sub.unsubscribe());\n        this.subscriptions = [];\n    }\n    handleItemBeforeFocus(item) {\n        if (item !== this.focusedItem) {\n            this.unfocus();\n        }\n    }\n    handleItemFocus(item) {\n        this.focusedItem = item;\n    }\n    handleItemBeforeSelect(item) {\n        if (item !== this.focusedItem) {\n            this.unselect();\n        }\n    }\n    handleItemSelect(item) {\n        this.selectedItem = item;\n    }\n    findSelectedItem() {\n        return this.listItems.toArray().find(item => item.selected);\n    }\n    findFocusedItem() {\n        return this.listItems.toArray().find(item => item.focused);\n    }\n    getFocusedIndex() {\n        return this.listItems\n            .toArray()\n            .findIndex(item => item === this.focusedItem);\n    }\n    navigate(key) {\n        switch (key) {\n            case 'ArrowUp':\n                this.focusPrevious();\n                break;\n            case 'ArrowDown':\n                this.focusNext();\n                break;\n            default:\n                break;\n        }\n    }\n}\nListComponent.ɵfac = function ListComponent_Factory(t) { return new (t || ListComponent)(ɵɵdirectiveInject(ElementRef)); };\nListComponent.ɵcmp = ɵɵdefineComponent({ type: ListComponent, selectors: [[\"igo-list\"]], contentQueries: function ListComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ɵɵcontentQuery(dirIndex, ListItemDirective, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.listItems = _t);\n    } }, hostBindings: function ListComponent_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"keydown\", function ListComponent_keydown_HostBindingHandler($event) { return ctx.handleKeyboardEvent($event); }, false, ɵɵresolveDocument)(\"enter\", function ListComponent_enter_HostBindingHandler($event) { return ctx.handleKeyboardEvent($event); }, false, ɵɵresolveDocument);\n    } }, inputs: { navigation: \"navigation\", selection: \"selection\" }, ngContentSelectors: _c1$3, decls: 2, vars: 3, consts: [[\"igoClickout\", \"\", 3, \"ngClass\", \"clickout\", \"click\"]], template: function ListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵprojectionDef();\n        ɵɵelementStart(0, \"mat-list\", 0);\n        ɵɵlistener(\"clickout\", function ListComponent_Template_mat_list_clickout_0_listener() { return ctx.disableNavigation(); })(\"click\", function ListComponent_Template_mat_list_click_0_listener() { return ctx.enableNavigation(); });\n        ɵɵprojection(1);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"ngClass\", ɵɵpureFunction1(1, _c0$7, ctx.selection));\n    } }, directives: [MatList, ClickoutDirective, NgClass], styles: [\"[_nghost-%COMP%]{display:block;height:100%;overflow:auto;position:relative}mat-list[_ngcontent-%COMP%]{padding-top:0}[_nghost-%COMP%]{position:static}[_nghost-%COMP%]     .mat-list .mat-list-item .mat-list-text>*{-webkit-box-orient:vertical;-webkit-line-clamp:2;display:-webkit-box;line-height:18px;max-height:36px;overflow:hidden;text-overflow:ellipsis;white-space:normal}[_nghost-%COMP%]     .mat-list .mat-list-item.mat-list-item-avatar .mat-list-item-content{display:-webkit-flex;height:46px;padding:3px}[_nghost-%COMP%]     .mat-list .mat-list-item.mat-list-item-avatar{height:46px}[_nghost-%COMP%]     .mat-list   igo-collapsible>.mat-list-item>.mat-list-item-content>.mat-list-text>.mat-line{font-weight:700;opacity:.9}[_nghost-%COMP%]     .mat-list .mat-list-item.mat-list-item-avatar .mat-list-item-content>mat-icon{padding:8px}[_nghost-%COMP%]     [igolistitem] mat-list-item [mat-list-avatar]{height:auto;width:40px}[_nghost-%COMP%]   mat-list.selectable[_ngcontent-%COMP%]     [igolistitem]:not(.igo-list-item-disabled) mat-list-item:hover{cursor:pointer}[_nghost-%COMP%]     [igolistitem]:focus{outline:none}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-list',\n                templateUrl: './list.component.html',\n                styleUrls: ['./list.component.scss']\n            }]\n    }], function () { return [{ type: ElementRef }]; }, { navigation: [{\n            type: Input\n        }], selection: [{\n            type: Input\n        }], listItems: [{\n            type: ContentChildren,\n            args: [ListItemDirective, { descendants: true }]\n        }], handleKeyboardEvent: [{\n            type: HostListener,\n            args: ['document:keydown', ['$event']]\n        }, {\n            type: HostListener,\n            args: ['document:enter', ['$event']]\n        }] }); })();\n\nclass IgoListModule {\n    static forRoot() {\n        return {\n            ngModule: IgoListModule,\n            providers: []\n        };\n    }\n}\nIgoListModule.ɵmod = ɵɵdefineNgModule({ type: IgoListModule });\nIgoListModule.ɵinj = ɵɵdefineInjector({ factory: function IgoListModule_Factory(t) { return new (t || IgoListModule)(); }, imports: [[CommonModule, MatIconModule, MatListModule, IgoClickoutModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoListModule, { declarations: [ListItemDirective, ListComponent], imports: [CommonModule, MatIconModule, MatListModule, IgoClickoutModule], exports: [ListItemDirective, ListComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoListModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule, MatIconModule, MatListModule, IgoClickoutModule],\n                declarations: [ListItemDirective, ListComponent],\n                exports: [ListItemDirective, ListComponent]\n            }]\n    }], null, null); })();\n\nfunction PanelComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 2);\n    ɵɵelementStart(1, \"h3\");\n    ɵɵprojection(2, 1);\n    ɵɵelementStart(3, \"div\", 3);\n    ɵɵtext(4);\n    ɵɵprojection(5, 2);\n    ɵɵelementEnd();\n    ɵɵprojection(6, 3);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(4);\n    ɵɵtextInterpolate1(\" \", ctx_r0.title, \" \");\n} }\nconst _c0$8 = [\"*\", [[\"\", \"panelLeftButton\", \"\"]], [[\"\", \"panelHeader\", \"\"]], [[\"\", \"panelRightButton\", \"\"]]];\nconst _c1$4 = [\"*\", \"[panelLeftButton]\", \"[panelHeader]\", \"[panelRightButton]\"];\nclass PanelComponent {\n    constructor() {\n        this._withHeader = true;\n    }\n    get title() {\n        return this._title;\n    }\n    set title(value) {\n        this._title = value;\n    }\n    get withHeader() {\n        return this._withHeader;\n    }\n    set withHeader(value) {\n        this._withHeader = value;\n    }\n}\nPanelComponent.ɵfac = function PanelComponent_Factory(t) { return new (t || PanelComponent)(); };\nPanelComponent.ɵcmp = ɵɵdefineComponent({ type: PanelComponent, selectors: [[\"igo-panel\"]], hostVars: 2, hostBindings: function PanelComponent_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵɵclassProp(\"igo-panel-with-header\", ctx.withHeader);\n    } }, inputs: { title: \"title\", withHeader: \"withHeader\" }, ngContentSelectors: _c1$4, decls: 3, vars: 1, consts: [[\"class\", \"igo-panel-header mat-typography\", \"title\", \"\", 4, \"ngIf\"], [\"title\", \"\", 1, \"igo-panel-content\"], [\"title\", \"\", 1, \"igo-panel-header\", \"mat-typography\"], [1, \"igo-panel-title\"]], template: function PanelComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵprojectionDef(_c0$8);\n        ɵɵtemplate(0, PanelComponent_div_0_Template, 7, 1, \"div\", 0);\n        ɵɵelementStart(1, \"div\", 1);\n        ɵɵprojection(2);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.withHeader);\n    } }, directives: [NgIf], styles: [\"[_nghost-%COMP%]{display:block}.igo-panel-header[_ngcontent-%COMP%]{height:46px;padding:3px;text-align:center}.igo-panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{height:40px;margin:0}.igo-panel-header[_ngcontent-%COMP%]     [panelleftbutton]{float:left;margin-right:-40px}.igo-panel-header[_ngcontent-%COMP%]     [panelrightbutton]{float:right}.igo-panel-content[_ngcontent-%COMP%]{overflow:auto}.igo-panel-with-header[_nghost-%COMP%]   .igo-panel-content[_ngcontent-%COMP%]{height:calc(100% - 46px)}[_nghost-%COMP%]:not(.igo-panel-with-header)   .igo-panel-content[_ngcontent-%COMP%]{height:100%}.igo-panel-title[_ngcontent-%COMP%]{display:block;float:left;font-size:1.17em;font-weight:700;height:100%;line-height:40px;margin-left:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:calc(100% - 80px)}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(PanelComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-panel',\n                templateUrl: './panel.component.html',\n                styleUrls: ['./panel.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], null, { title: [{\n            type: Input\n        }], withHeader: [{\n            type: Input\n        }, {\n            type: HostBinding,\n            args: ['class.igo-panel-with-header']\n        }] }); })();\n\nclass IgoPanelModule {\n}\nIgoPanelModule.ɵmod = ɵɵdefineNgModule({ type: IgoPanelModule });\nIgoPanelModule.ɵinj = ɵɵdefineInjector({ factory: function IgoPanelModule_Factory(t) { return new (t || IgoPanelModule)(); }, imports: [[CommonModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoPanelModule, { declarations: [PanelComponent], imports: [CommonModule], exports: [PanelComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoPanelModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule],\n                exports: [PanelComponent],\n                declarations: [PanelComponent]\n            }]\n    }], null, null); })();\n\n/**\n * <igoSidenavShim> directive.\n *\n * This directive prevents a material sidenav with mode=\"side\"\n * from focusing an element after it's closed\n */\nclass SidenavShimDirective {\n    constructor(component, renderer) {\n        this.renderer = renderer;\n    }\n    onOpen() {\n        this.focusedElement = document.activeElement;\n    }\n    onCloseStart() {\n        const focusedElement = document.activeElement;\n        if (focusedElement !== this.focusedElement) {\n            this.blurElement = this.focusedElement;\n        }\n        else {\n            this.blurElement = undefined;\n        }\n    }\n    onClose() {\n        if (this.blurElement) {\n            this.renderer.selectRootElement(this.blurElement).blur();\n        }\n        this.blurElement = undefined;\n        this.focusedElement = undefined;\n    }\n}\nSidenavShimDirective.ɵfac = function SidenavShimDirective_Factory(t) { return new (t || SidenavShimDirective)(ɵɵdirectiveInject(MatSidenav, 2), ɵɵdirectiveInject(Renderer2)); };\nSidenavShimDirective.ɵdir = ɵɵdefineDirective({ type: SidenavShimDirective, selectors: [[\"\", \"igoSidenavShim\", \"\"]], hostBindings: function SidenavShimDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"open\", function SidenavShimDirective_open_HostBindingHandler($event) { return ctx.onOpen($event); })(\"close-start\", function SidenavShimDirective_close_start_HostBindingHandler($event) { return ctx.onCloseStart($event); })(\"close\", function SidenavShimDirective_close_HostBindingHandler($event) { return ctx.onClose($event); });\n    } } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SidenavShimDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoSidenavShim]'\n            }]\n    }], function () { return [{ type: MatSidenav, decorators: [{\n                type: Self\n            }] }, { type: Renderer2 }]; }, { onOpen: [{\n            type: HostListener,\n            args: ['open', ['$event']]\n        }], onCloseStart: [{\n            type: HostListener,\n            args: ['close-start', ['$event']]\n        }], onClose: [{\n            type: HostListener,\n            args: ['close', ['$event']]\n        }] }); })();\n\nclass IgoSidenavModule {\n    static forRoot() {\n        return {\n            ngModule: IgoSidenavModule,\n            providers: []\n        };\n    }\n}\nIgoSidenavModule.ɵmod = ɵɵdefineNgModule({ type: IgoSidenavModule });\nIgoSidenavModule.ɵinj = ɵɵdefineInjector({ factory: function IgoSidenavModule_Factory(t) { return new (t || IgoSidenavModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoSidenavModule, { declarations: [SidenavShimDirective], exports: [SidenavShimDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoSidenavModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [SidenavShimDirective],\n                exports: [SidenavShimDirective]\n            }]\n    }], null, null); })();\n\nconst _c0$9 = function (a1) { return { \"igo-spinner-container\": true, \"igo-spinner-shown\": a1 }; };\nclass SpinnerComponent {\n    constructor() {\n        this.shown$ = new BehaviorSubject(false);\n    }\n    set shown(value) { this.shown$.next(value); }\n    get shown() { return this.shown$.value; }\n    show() {\n        this.shown = true;\n    }\n    hide() {\n        this.shown = false;\n    }\n}\nSpinnerComponent.ɵfac = function SpinnerComponent_Factory(t) { return new (t || SpinnerComponent)(); };\nSpinnerComponent.ɵcmp = ɵɵdefineComponent({ type: SpinnerComponent, selectors: [[\"igo-spinner\"]], inputs: { shown: \"shown\" }, decls: 4, vars: 5, consts: [[3, \"ngClass\"], [1, \"igo-spinner-background\"], [\"diameter\", \"40\", \"mode\", \"indeterminate\"]], template: function SpinnerComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵpipe(1, \"async\");\n        ɵɵelement(2, \"div\", 1);\n        ɵɵelement(3, \"mat-progress-spinner\", 2);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"ngClass\", ɵɵpureFunction1(3, _c0$9, ɵɵpipeBind1(1, 1, ctx.shown$)));\n    } }, directives: [NgClass, MatProgressSpinner], pipes: [AsyncPipe], styles: [\".igo-spinner-container[_ngcontent-%COMP%]{display:none;pointer-events:none}.igo-spinner-container.igo-spinner-shown[_ngcontent-%COMP%]{display:block}mat-progress-spinner[_ngcontent-%COMP%]{border-radius:50%;height:40px;width:40px}.igo-spinner-background[_ngcontent-%COMP%]{border:4px solid #fff;border-radius:50%;height:36px;left:2px;position:absolute;top:2px;width:36px}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SpinnerComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-spinner',\n                templateUrl: './spinner.component.html',\n                styleUrls: ['./spinner.component.scss']\n            }]\n    }], function () { return []; }, { shown: [{\n            type: Input\n        }] }); })();\n\n/**\n * A directive to bind a SpinnerComponent to the activity service.\n * The activity service tracks any HTTP request and this directive\n * will display the spinner it's attached to when the activity counter\n * is greater than 0.\n */\nclass SpinnerActivityDirective {\n    constructor(spinner, activityService) {\n        this.spinner = spinner;\n        this.activityService = activityService;\n    }\n    /**\n     * Subscribe to the activity service counter and display the spinner\n     * when it's is greater than 0.\n     * @internal\n     */\n    ngOnInit() {\n        this.counter$$ = this.activityService.counter$\n            .pipe(debounceTime(50))\n            .subscribe((count) => {\n            count > 0 ? this.spinner.show() : this.spinner.hide();\n        });\n    }\n    /**\n     * Unsubcribe to the activity service counter.\n     * @internal\n     */\n    ngOnDestroy() {\n        this.counter$$.unsubscribe();\n    }\n}\nSpinnerActivityDirective.ɵfac = function SpinnerActivityDirective_Factory(t) { return new (t || SpinnerActivityDirective)(ɵɵdirectiveInject(SpinnerComponent, 2), ɵɵdirectiveInject(ActivityService)); };\nSpinnerActivityDirective.ɵdir = ɵɵdefineDirective({ type: SpinnerActivityDirective, selectors: [[\"\", \"igoSpinnerActivity\", \"\"]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SpinnerActivityDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoSpinnerActivity]'\n            }]\n    }], function () { return [{ type: SpinnerComponent, decorators: [{\n                type: Self\n            }] }, { type: ActivityService }]; }, null); })();\n\nclass IgoSpinnerModule {\n}\nIgoSpinnerModule.ɵmod = ɵɵdefineNgModule({ type: IgoSpinnerModule });\nIgoSpinnerModule.ɵinj = ɵɵdefineInjector({ factory: function IgoSpinnerModule_Factory(t) { return new (t || IgoSpinnerModule)(); }, imports: [[CommonModule, MatProgressSpinnerModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoSpinnerModule, { declarations: [SpinnerActivityDirective, SpinnerComponent], imports: [CommonModule, MatProgressSpinnerModule], exports: [SpinnerActivityDirective, SpinnerComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoSpinnerModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule, MatProgressSpinnerModule],\n                declarations: [SpinnerActivityDirective, SpinnerComponent],\n                exports: [SpinnerActivityDirective, SpinnerComponent]\n            }]\n    }], null, null); })();\n\nclass TableDatabase {\n    constructor(data) {\n        /** Stream that emits whenever the data has been modified. */\n        this.dataChange = new BehaviorSubject([]);\n        if (data) {\n            this.dataChange.next(data);\n        }\n    }\n    get data() {\n        return this.dataChange.value;\n    }\n    set(data) {\n        this.dataChange.next(data);\n    }\n    add(item) {\n        const copiedData = this.data.slice();\n        copiedData.push(item);\n        this.set(copiedData);\n    }\n    remove(item) {\n        const copiedData = this.data.slice();\n        const index = copiedData.indexOf(item);\n        copiedData.splice(index, 1);\n        this.set(copiedData);\n    }\n}\n\nclass TableDataSource extends DataSource {\n    constructor(_database, _model, _sort) {\n        super();\n        this._database = _database;\n        this._model = _model;\n        this._sort = _sort;\n        this._filterChange = new BehaviorSubject('');\n    }\n    get filter() {\n        return this._filterChange.value;\n    }\n    set filter(filter) {\n        this._filterChange.next(filter);\n    }\n    // Connect function called by the table to retrieve one stream containing\n    // the data to render.\n    connect() {\n        if (!this._database) {\n            return merge([]);\n        }\n        const displayDataChanges = [\n            this._database.dataChange,\n            this._filterChange,\n            this._sort.sortChange\n        ];\n        return merge(...displayDataChanges).pipe(map(() => {\n            return this.getFilteredData(this._database.data);\n        }), map(data => {\n            return this.getSortedData(data);\n        }));\n    }\n    disconnect() { }\n    getFilteredData(data) {\n        if (!this.filter) {\n            return data;\n        }\n        return data.slice().filter((item) => {\n            const searchStr = this._model.columns\n                .filter(c => c.filterable)\n                .map(c => ObjectUtils.resolve(item, c.name))\n                .join(' ')\n                .toLowerCase();\n            return searchStr.indexOf(this.filter.toLowerCase()) !== -1;\n        });\n    }\n    getSortedData(data) {\n        if (!this._sort.active || this._sort.direction === '') {\n            return data;\n        }\n        return data.sort((a, b) => {\n            const propertyA = ObjectUtils.resolve(a, this._sort.active);\n            const propertyB = ObjectUtils.resolve(b, this._sort.active);\n            return ObjectUtils.naturalCompare(propertyB, propertyA, this._sort.direction);\n        });\n    }\n}\n\nvar TableActionColor;\n(function (TableActionColor) {\n    TableActionColor[TableActionColor[\"primary\"] = 0] = \"primary\";\n    TableActionColor[TableActionColor[\"accent\"] = 1] = \"accent\";\n    TableActionColor[TableActionColor[\"warn\"] = 2] = \"warn\";\n})(TableActionColor || (TableActionColor = {}));\n\nconst _c0$a = [\"filter\"];\nfunction TableComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 12);\n    ɵɵelementStart(1, \"mat-form-field\", 13);\n    ɵɵelement(2, \"input\", 14, 15);\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(2);\n    ɵɵproperty(\"placeholder\", ɵɵpipeBind1(4, 1, \"igo.common.table.filter\"));\n} }\nfunction TableComponent_th_6_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"th\", 16);\n    ɵɵelementStart(1, \"mat-checkbox\", 17);\n    ɵɵlistener(\"change\", function TableComponent_th_6_Template_mat_checkbox_change_1_listener($event) { ɵɵrestoreView(_r11); const ctx_r10 = ɵɵnextContext(); return $event ? ctx_r10.masterToggle() : null; });\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"checked\", ctx_r2.selection.hasValue() && ctx_r2.isAllSelected())(\"indeterminate\", ctx_r2.selection.hasValue() && !ctx_r2.isAllSelected());\n} }\nfunction TableComponent_td_7_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"td\", 18);\n    ɵɵelementStart(1, \"mat-checkbox\", 19);\n    ɵɵlistener(\"click\", function TableComponent_td_7_Template_mat_checkbox_click_1_listener($event) { ɵɵrestoreView(_r14); return $event.stopPropagation(); })(\"change\", function TableComponent_td_7_Template_mat_checkbox_change_1_listener($event) { ɵɵrestoreView(_r14); const row_r12 = ctx.$implicit; const ctx_r15 = ɵɵnextContext(); return $event ? ctx_r15.selection.toggle(row_r12) : null; });\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const row_r12 = ctx.$implicit;\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"checked\", ctx_r3.selection.isSelected(row_r12));\n} }\nfunction TableComponent_ng_container_8_ng_container_1_th_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"th\", 25);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const column_r16 = ɵɵnextContext(2).$implicit;\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", column_r16.title, \" \");\n} }\nfunction TableComponent_ng_container_8_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, TableComponent_ng_container_8_ng_container_1_th_1_Template, 2, 1, \"th\", 24);\n    ɵɵelementContainerEnd();\n} }\nfunction TableComponent_ng_container_8_ng_container_2_th_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"th\", 16);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const column_r16 = ɵɵnextContext(2).$implicit;\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", column_r16.title, \" \");\n} }\nfunction TableComponent_ng_container_8_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, TableComponent_ng_container_8_ng_container_2_th_1_Template, 2, 1, \"th\", 6);\n    ɵɵelementContainerEnd();\n} }\nconst _c1$5 = function () { return {}; };\nfunction TableComponent_ng_container_8_ng_container_3_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"td\", 27);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const row_r27 = ctx.$implicit;\n    const column_r16 = ɵɵnextContext(2).$implicit;\n    const ctx_r26 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r26.model.cellClassFunc ? ctx_r26.model.cellClassFunc(row_r27, column_r16) : ɵɵpureFunction0(2, _c1$5));\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ctx_r26.getValue(row_r27, column_r16.name), \" \");\n} }\nfunction TableComponent_ng_container_8_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, TableComponent_ng_container_8_ng_container_3_td_1_Template, 2, 3, \"td\", 26);\n    ɵɵelementContainerEnd();\n} }\nfunction TableComponent_ng_container_8_ng_template_4_td_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"td\", 29);\n} if (rf & 2) {\n    const row_r30 = ctx.$implicit;\n    const column_r16 = ɵɵnextContext(2).$implicit;\n    const ctx_r29 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r29.model.cellClassFunc ? ctx_r29.model.cellClassFunc(row_r30, column_r16) : ɵɵpureFunction0(2, _c1$5))(\"innerHTML\", ctx_r29.getValue(row_r30, column_r16.name), ɵɵsanitizeHtml);\n} }\nfunction TableComponent_ng_container_8_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, TableComponent_ng_container_8_ng_template_4_td_0_Template, 1, 3, \"td\", 28);\n} }\nfunction TableComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0, 20);\n    ɵɵtemplate(1, TableComponent_ng_container_8_ng_container_1_Template, 2, 0, \"ng-container\", 21);\n    ɵɵtemplate(2, TableComponent_ng_container_8_ng_container_2_Template, 2, 0, \"ng-container\", 21);\n    ɵɵtemplate(3, TableComponent_ng_container_8_ng_container_3_Template, 2, 0, \"ng-container\", 22);\n    ɵɵtemplate(4, TableComponent_ng_container_8_ng_template_4_Template, 1, 0, \"ng-template\", null, 23, ɵɵtemplateRefExtractor);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const column_r16 = ctx.$implicit;\n    const _r20 = ɵɵreference(5);\n    ɵɵproperty(\"matColumnDef\", column_r16.name);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", column_r16.sortable);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !column_r16.sortable);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !column_r16.html)(\"ngIfElse\", _r20);\n} }\nfunction TableComponent_th_10_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"th\", 16);\n} }\nfunction TableComponent_td_11_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r36 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 31);\n    ɵɵlistener(\"click\", function TableComponent_td_11_button_1_Template_button_click_0_listener($event) { ɵɵrestoreView(_r36); const action_r34 = ctx.$implicit; const row_r32 = ɵɵnextContext().$implicit; const ctx_r35 = ɵɵnextContext(); return ctx_r35.handleClickAction($event, action_r34, row_r32); });\n    ɵɵelement(1, \"mat-icon\", 32);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const action_r34 = ctx.$implicit;\n    const ctx_r33 = ɵɵnextContext(2);\n    ɵɵproperty(\"color\", ctx_r33.getActionColor(action_r34.color));\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"svgIcon\", action_r34.icon);\n} }\nfunction TableComponent_td_11_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"td\", 18);\n    ɵɵtemplate(1, TableComponent_td_11_button_1_Template, 2, 2, \"button\", 30);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r6.model.actions);\n} }\nfunction TableComponent_tr_12_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"tr\", 33);\n} }\nfunction TableComponent_tr_13_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"tr\", 34);\n    ɵɵlistener(\"click\", function TableComponent_tr_13_Template_tr_click_0_listener() { ɵɵrestoreView(_r40); const row_r38 = ctx.$implicit; const ctx_r39 = ɵɵnextContext(); return ctx_r39.selection.toggle(row_r38); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const row_r38 = ctx.$implicit;\n    const ctx_r8 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r8.model.rowClassFunc ? ctx_r8.model.rowClassFunc(row_r38) : ɵɵpureFunction0(1, _c1$5));\n} }\nclass TableComponent {\n    constructor() {\n        this._hasFIlterInput = true;\n        this.selection = new SelectionModel(true, []);\n        this.select = new EventEmitter();\n    }\n    get database() {\n        return this._database;\n    }\n    set database(value) {\n        this._database = value;\n    }\n    get model() {\n        return this._model;\n    }\n    set model(value) {\n        this._model = value;\n    }\n    get hasFilterInput() {\n        return this._hasFIlterInput;\n    }\n    set hasFilterInput(value) {\n        this._hasFIlterInput = value;\n    }\n    ngOnInit() {\n        this.dataSource = new TableDataSource(this.database, this.model, this.sort);\n        if (this.model) {\n            this.displayedColumns = this.model.columns\n                .filter(c => c.displayed !== false)\n                .map(c => c.name);\n            if (this.model.selectionCheckbox) {\n                this.displayedColumns.unshift('selectionCheckbox');\n            }\n            if (this.model.actions && this.model.actions.length) {\n                this.displayedColumns.push('action');\n            }\n        }\n        this.selection.changed.subscribe(e => this.select.emit(e));\n    }\n    ngAfterViewInit() {\n        if (this.filter) {\n            fromEvent(this.filter.nativeElement, 'keyup')\n                .pipe(debounceTime(150), distinctUntilChanged())\n                .subscribe(() => {\n                if (!this.dataSource) {\n                    return;\n                }\n                this.dataSource.filter = this.filter.nativeElement.value;\n            });\n        }\n    }\n    ngOnChanges(change) {\n        if (change.database) {\n            this.dataSource = new TableDataSource(this.database, this.model, this.sort);\n            this.selection.clear();\n        }\n    }\n    getActionColor(colorId) {\n        return TableActionColor[colorId];\n    }\n    getValue(row, key) {\n        return ObjectUtils.resolve(row, key);\n    }\n    /** Whether the number of selected elements matches the total number of rows. */\n    isAllSelected() {\n        const numSelected = this.selection.selected.length;\n        const numRows = this.database.data.length;\n        return numSelected === numRows;\n    }\n    /** Selects all rows if they are not all selected; otherwise clear selection. */\n    masterToggle() {\n        this.isAllSelected()\n            ? this.selection.clear()\n            : this.database.data.forEach(row => this.selection.select(row));\n    }\n    handleClickAction(event, action, row) {\n        event.stopPropagation();\n        action.click(row);\n    }\n}\nTableComponent.ɵfac = function TableComponent_Factory(t) { return new (t || TableComponent)(); };\nTableComponent.ɵcmp = ɵɵdefineComponent({ type: TableComponent, selectors: [[\"igo-table\"]], viewQuery: function TableComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵviewQuery(_c0$a, true);\n        ɵɵstaticViewQuery(MatSort, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.filter = _t.first);\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.sort = _t.first);\n    } }, inputs: { database: \"database\", model: \"model\", hasFilterInput: \"hasFilterInput\" }, outputs: { select: \"select\" }, features: [ɵɵNgOnChangesFeature], decls: 14, vars: 5, consts: [[1, \"table-box\"], [\"class\", \"table-header\", 4, \"ngIf\"], [1, \"table-container\"], [\"mat-table\", \"\", \"matSort\", \"\", 3, \"dataSource\"], [\"table\", \"\"], [\"matColumnDef\", \"selectionCheckbox\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [3, \"matColumnDef\", 4, \"ngFor\", \"ngForOf\"], [\"matColumnDef\", \"action\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 3, \"ngClass\", \"click\", 4, \"matRowDef\", \"matRowDefColumns\"], [1, \"table-header\"], [\"floatPlaceholder\", \"never\"], [\"matInput\", \"\", 3, \"placeholder\"], [\"filter\", \"\"], [\"mat-header-cell\", \"\"], [3, \"checked\", \"indeterminate\", \"change\"], [\"mat-cell\", \"\"], [3, \"checked\", \"click\", \"change\"], [3, \"matColumnDef\"], [4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"cellHTML\", \"\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\", \"class\", \"mat-cell-text\", 3, \"ngClass\", 4, \"matCellDef\"], [\"mat-cell\", \"\", 1, \"mat-cell-text\", 3, \"ngClass\"], [\"mat-cell\", \"\", \"class\", \"mat-cell-text\", 3, \"ngClass\", \"innerHTML\", 4, \"matCellDef\"], [\"mat-cell\", \"\", 1, \"mat-cell-text\", 3, \"ngClass\", \"innerHTML\"], [\"mat-mini-fab\", \"\", 3, \"color\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"mat-mini-fab\", \"\", 3, \"color\", \"click\"], [3, \"svgIcon\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\", 3, \"ngClass\", \"click\"]], template: function TableComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵtemplate(1, TableComponent_div_1_Template, 5, 3, \"div\", 1);\n        ɵɵelementStart(2, \"div\", 2);\n        ɵɵelementStart(3, \"table\", 3, 4);\n        ɵɵelementContainerStart(5, 5);\n        ɵɵtemplate(6, TableComponent_th_6_Template, 2, 2, \"th\", 6);\n        ɵɵtemplate(7, TableComponent_td_7_Template, 2, 1, \"td\", 7);\n        ɵɵelementContainerEnd();\n        ɵɵtemplate(8, TableComponent_ng_container_8_Template, 6, 5, \"ng-container\", 8);\n        ɵɵelementContainerStart(9, 9);\n        ɵɵtemplate(10, TableComponent_th_10_Template, 1, 0, \"th\", 6);\n        ɵɵtemplate(11, TableComponent_td_11_Template, 2, 1, \"td\", 7);\n        ɵɵelementContainerEnd();\n        ɵɵtemplate(12, TableComponent_tr_12_Template, 1, 0, \"tr\", 10);\n        ɵɵtemplate(13, TableComponent_tr_13_Template, 1, 2, \"tr\", 11);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.hasFilterInput);\n        ɵɵadvance(2);\n        ɵɵproperty(\"dataSource\", ctx.dataSource);\n        ɵɵadvance(5);\n        ɵɵproperty(\"ngForOf\", ctx.model.columns);\n        ɵɵadvance(4);\n        ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        ɵɵadvance(1);\n        ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n    } }, directives: [NgIf, MatTable, MatSort, MatColumnDef, MatHeaderCellDef, MatCellDef, NgForOf, MatHeaderRowDef, MatRowDef, MatFormField, MatInput, MatHeaderCell, MatCheckbox, MatCell, MatSortHeader, NgClass, MatButton, MatIcon, MatHeaderRow, MatRow], pipes: [TranslatePipe], styles: [\"[_nghost-%COMP%]{display:block;height:100%;width:100%}.table-container[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;height:100%;overflow:auto}.table-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.table-header[_ngcontent-%COMP%]{align-items:baseline;display:flex;flex:0 1 auto;font-size:20px;justify-content:space-between;max-width:500px;min-height:64px;padding:8px 24px 0}tr[mat-header-row][_ngcontent-%COMP%], tr[mat-row][_ngcontent-%COMP%]{height:60px}.mat-cell-text[_ngcontent-%COMP%]{overflow:hidden;word-wrap:break-word}td[mat-cell][_ngcontent-%COMP%]{padding-right:15px}th.mat-header-cell[_ngcontent-%COMP%]{padding-right:5px}button[_ngcontent-%COMP%]{margin-right:10px}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(TableComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-table',\n                templateUrl: './table.component.html',\n                styleUrls: ['./table.component.scss']\n            }]\n    }], null, { database: [{\n            type: Input\n        }], model: [{\n            type: Input\n        }], hasFilterInput: [{\n            type: Input\n        }], select: [{\n            type: Output\n        }], filter: [{\n            type: ViewChild,\n            args: ['filter']\n        }], sort: [{\n            type: ViewChild,\n            args: [MatSort, { static: true }]\n        }] }); })();\n\nclass IgoTableModule {\n    static forRoot() {\n        return {\n            ngModule: IgoTableModule,\n            providers: []\n        };\n    }\n}\nIgoTableModule.ɵmod = ɵɵdefineNgModule({ type: IgoTableModule });\nIgoTableModule.ɵinj = ɵɵdefineInjector({ factory: function IgoTableModule_Factory(t) { return new (t || IgoTableModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            CdkTableModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTableModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatSortModule,\n            MatCheckboxModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoTableModule, { declarations: [TableComponent], imports: [CommonModule,\n        FormsModule,\n        CdkTableModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTableModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatSortModule,\n        MatCheckboxModule,\n        IgoLanguageModule], exports: [TableComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoTableModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    CdkTableModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTableModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatSortModule,\n                    MatCheckboxModule,\n                    IgoLanguageModule\n                ],\n                declarations: [TableComponent],\n                exports: [TableComponent]\n            }]\n    }], null, null); })();\n\nvar ToolboxColor;\n(function (ToolboxColor) {\n    ToolboxColor[\"White\"] = \"white\";\n    ToolboxColor[\"Grey\"] = \"grey\";\n    ToolboxColor[\"Primary\"] = \"primary\";\n})(ToolboxColor || (ToolboxColor = {}));\n\nfunction toolSlideInOut(speed = '300ms', type = 'ease-in-out') {\n    return trigger('toolSlideInOut', [\n        state('enter', style({\n            transform: 'translate3d(0, 0, 0)'\n        })),\n        transition('void => enter', animate(speed + ' ' + type))\n    ]);\n}\n\nfunction ToolboxComponent_igo_actionbar_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-actionbar\", 2);\n    ɵɵpipe(1, \"async\");\n    ɵɵpipe(2, \"async\");\n    ɵɵpipe(3, \"async\");\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"store\", ctx_r0.actionStore)(\"withIcon\", true)(\"withTitle\", ɵɵpipeBind1(1, 6, ctx_r0.toolbarWithTitle$))(\"withTooltip\", !ɵɵpipeBind1(2, 8, ctx_r0.toolbarWithTitle$))(\"scrollActive\", ɵɵpipeBind1(3, 10, ctx_r0.toolbarWithTitle$))(\"horizontal\", false);\n} }\nconst _c0$b = function (a0, a1) { return { \"igo-tool-container-with-toolbar\": a0, \"igo-tool-container-with-animation\": a1 }; };\nfunction ToolboxComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 3);\n    ɵɵlistener(\"@toolSlideInOut.start\", function ToolboxComponent_div_2_Template_div_animation_toolSlideInOut_start_0_listener() { ɵɵrestoreView(_r4); const ctx_r3 = ɵɵnextContext(); return ctx_r3.onAnimationStart(); })(\"@toolSlideInOut.done\", function ToolboxComponent_div_2_Template_div_animation_toolSlideInOut_done_0_listener() { ɵɵrestoreView(_r4); const ctx_r5 = ɵɵnextContext(); return ctx_r5.onAnimationComplete(); });\n    ɵɵpipe(1, \"async\");\n    ɵɵelement(2, \"igo-dynamic-outlet\", 4);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const tool_r2 = ctx.ngIf;\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ɵɵpureFunction2(6, _c0$b, !ctx_r1.actionStore.empty, ctx_r1.animate))(\"@toolSlideInOut\", ɵɵpipeBind1(1, 4, ctx_r1.animation$));\n    ɵɵadvance(2);\n    ɵɵproperty(\"component\", tool_r2.component)(\"inputs\", ctx_r1.getToolInputs(tool_r2));\n} }\nclass ToolboxComponent {\n    constructor() {\n        /**\n         * Observable of the active tool\n         */\n        this.activeTool$ = new BehaviorSubject(undefined);\n        /**\n         * Store of actions that toggle tools\n         */\n        this.actionStore = new ActionStore([]);\n        /**\n         * Observable of he anmation state\n         */\n        this.animation$ = new BehaviorSubject('none');\n        /**\n         * Observable of the toolbar\n         */\n        this.toolbar$ = new BehaviorSubject([]);\n        /**\n         * Whether the Toolbar should display actions' titles\n         */\n        this.toolbarWithTitle$ = this.activeTool$.pipe(map((tool) => tool === undefined));\n        /**\n         * Observable of the ongoing animation. This is useful when\n         * multiple animations are triggered at once i.e. when the user clicks\n         * too fast on different actions\n         */\n        this.animating$ = new BehaviorSubject(false);\n        /**\n         * Whether the toolbox should animate the first tool entering\n         */\n        this.animate = false;\n        /**\n         * Color of Toolbox\n         */\n        this.color = ToolboxColor.White;\n    }\n    /**\n     * @ignore\n     */\n    get classColorGrey() {\n        return this.color === ToolboxColor.Grey;\n    }\n    /**\n     * @ignore\n     */\n    get classColorPrimary() {\n        return this.color === ToolboxColor.Primary;\n    }\n    /**\n     * Initialize the toolbar and subscribe to the active tool\n     * @internal\n     */\n    ngOnInit() {\n        this.toolbar$$ = this.toolbox.toolbar$.subscribe((toolbar) => this.onToolbarChange(toolbar));\n        this.activeTool$$ = this.toolbox.activeTool$.subscribe((tool) => this.onActiveToolChange(tool));\n    }\n    /**\n     * Unsubscribe to the active tool and destroy the action store\n     * @internal\n     */\n    ngOnDestroy() {\n        this.toolbar$$.unsubscribe();\n        this.activeTool$$.unsubscribe();\n        this.actionStore.destroy();\n    }\n    /**\n     * Track the starting animation\n     * @internal\n     */\n    onAnimationStart() {\n        this.animating$.next(true);\n    }\n    /**\n     * Untrack the completed animation\n     * @internal\n     */\n    onAnimationComplete() {\n        this.animating$.next(false);\n    }\n    /**\n     * Return a tool's inputs\n     * @param tool Tool\n     * @returns Tool inputs\n     * @internal\n     */\n    getToolInputs(tool) {\n        return tool.options || {};\n    }\n    /**\n     * Initialize an action store\n     * @param toolbar Toolbar\n     */\n    onToolbarChange(toolbar) {\n        this.setToolbar(toolbar);\n    }\n    /**\n     * Activate a tool and trigger an animation or not\n     * @param tool Tool to activate\n     */\n    onActiveToolChange(tool) {\n        if (!this.animate) {\n            this.setActiveTool(tool);\n            return;\n        }\n        this.onAnimate(() => this.setActiveTool(tool));\n    }\n    /**\n     * Set the active tool\n     * @param tool Tool to activate\n     */\n    setActiveTool(tool) {\n        if (tool === undefined) {\n            this.actionStore.state.updateAll({ active: false });\n        }\n        else {\n            const action = this.actionStore.get(tool.name);\n            if (action !== undefined) {\n                this.actionStore.state.update(action, { active: true }, true);\n            }\n        }\n        this.activeTool$.next(tool);\n        if (this.animate) {\n            this.animation$.next('enter');\n        }\n    }\n    /**\n     * Initialize the toolbar\n     */\n    setToolbar(toolbar) {\n        const actions = toolbar.reduce((acc, toolName) => {\n            const tool = this.toolbox.getTool(toolName);\n            if (tool === undefined) {\n                return acc;\n            }\n            acc.push({\n                id: tool.name,\n                title: tool.title,\n                icon: tool.icon,\n                // iconImage: tool.iconImage,\n                tooltip: tool.tooltip,\n                args: [tool, this.toolbox],\n                handler: (_tool, _toolbox) => {\n                    _toolbox.activateTool(_tool.name);\n                },\n                ngClass: (_tool, _toolbox) => {\n                    return this.toolbox.activeTool$.pipe(map((activeTool) => {\n                        let toolActivated = false;\n                        if (activeTool !== undefined && _tool.name === activeTool.name) {\n                            toolActivated = true;\n                        }\n                        let childrenToolActivated = false;\n                        if (activeTool !== undefined &&\n                            _tool.name === activeTool.parent) {\n                            childrenToolActivated = true;\n                        }\n                        return {\n                            'tool-activated': toolActivated,\n                            'children-tool-activated': childrenToolActivated\n                        };\n                    }));\n                }\n            });\n            return acc;\n        }, []);\n        this.actionStore.load(actions);\n        this.toolbar$.next(toolbar);\n    }\n    /**\n     * Observe the ongoing animation and ignore any incoming animation\n     * while one is still ongoing.\n     * @param callback Callback to execute when the animation completes\n     */\n    onAnimate(callback) {\n        this.unAnimate();\n        this.animating$$ = this.animating$.subscribe((animation) => {\n            if (!animation) {\n                callback.call(this);\n                this.unAnimate();\n            }\n        });\n    }\n    /**\n     * Stop observing an animation when it's complete\n     */\n    unAnimate() {\n        if (this.animating$$) {\n            this.animating$$.unsubscribe();\n        }\n    }\n}\nToolboxComponent.ɵfac = function ToolboxComponent_Factory(t) { return new (t || ToolboxComponent)(); };\nToolboxComponent.ɵcmp = ɵɵdefineComponent({ type: ToolboxComponent, selectors: [[\"igo-toolbox\"]], hostVars: 4, hostBindings: function ToolboxComponent_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵɵclassProp(\"color-grey\", ctx.classColorGrey)(\"color-primary\", ctx.classColorPrimary);\n    } }, inputs: { toolbox: \"toolbox\", animate: \"animate\", color: \"color\" }, decls: 4, vars: 6, consts: [[3, \"store\", \"withIcon\", \"withTitle\", \"withTooltip\", \"scrollActive\", \"horizontal\", 4, \"ngIf\"], [\"class\", \"igo-tool-container\", 3, \"ngClass\", 4, \"ngIf\"], [3, \"store\", \"withIcon\", \"withTitle\", \"withTooltip\", \"scrollActive\", \"horizontal\"], [1, \"igo-tool-container\", 3, \"ngClass\"], [3, \"component\", \"inputs\"]], template: function ToolboxComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, ToolboxComponent_igo_actionbar_0_Template, 4, 12, \"igo-actionbar\", 0);\n        ɵɵpipe(1, \"async\");\n        ɵɵtemplate(2, ToolboxComponent_div_2_Template, 3, 9, \"div\", 1);\n        ɵɵpipe(3, \"async\");\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(1, 2, ctx.toolbar$).length > 0);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(3, 4, ctx.activeTool$));\n    } }, directives: [NgIf, ActionbarComponent, NgClass, DynamicOutletComponent], pipes: [AsyncPipe], styles: [\"[_nghost-%COMP%]{display:block;height:100%;overflow:hidden;position:relative;width:100%}.igo-tool-container[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute;right:0;top:0}.igo-tool-container-with-animation[_ngcontent-%COMP%]{transform:translate3d(100%,0,0)}.igo-tool-container-with-toolbar[_ngcontent-%COMP%]{left:50px}igo-actionbar[_ngcontent-%COMP%]{height:100%}igo-actionbar.with-title[_ngcontent-%COMP%]{overflow:auto;width:100%}igo-actionbar[_ngcontent-%COMP%]:not(.with-title){-o-box-shadow:2px 0 2px 0 #ddd;box-shadow:2px 0 2px 0 #ddd;overflow:hidden;width:48px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-actionbar[_ngcontent-%COMP%]:not(.with-title){overflow:auto}}igo-dynamic-outlet[_ngcontent-%COMP%]{overflow:auto}\"], data: { animation: [toolSlideInOut()] }, changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ToolboxComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-toolbox',\n                templateUrl: 'toolbox.component.html',\n                styleUrls: ['toolbox.component.scss'],\n                animations: [toolSlideInOut()],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], null, { toolbox: [{\n            type: Input\n        }], animate: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }], classColorGrey: [{\n            type: HostBinding,\n            args: ['class.color-grey']\n        }], classColorPrimary: [{\n            type: HostBinding,\n            args: ['class.color-primary']\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoToolboxModule {\n}\nIgoToolboxModule.ɵmod = ɵɵdefineNgModule({ type: IgoToolboxModule });\nIgoToolboxModule.ɵinj = ɵɵdefineInjector({ factory: function IgoToolboxModule_Factory(t) { return new (t || IgoToolboxModule)(); }, imports: [[\n            CommonModule,\n            IgoActionModule,\n            IgoDynamicComponentModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoToolboxModule, { declarations: [ToolboxComponent], imports: [CommonModule,\n        IgoActionModule,\n        IgoDynamicComponentModule], exports: [ToolboxComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoToolboxModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoActionModule,\n                    IgoDynamicComponentModule\n                ],\n                exports: [\n                    ToolboxComponent\n                ],\n                declarations: [\n                    ToolboxComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoToolModule {\n    static forRoot() {\n        return {\n            ngModule: IgoToolModule,\n            providers: [\n                ToolService\n            ]\n        };\n    }\n}\nIgoToolModule.ɵmod = ɵɵdefineNgModule({ type: IgoToolModule });\nIgoToolModule.ɵinj = ɵɵdefineInjector({ factory: function IgoToolModule_Factory(t) { return new (t || IgoToolModule)(); }, imports: [[\n            CommonModule\n        ], IgoToolboxModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoToolModule, { imports: [CommonModule], exports: [IgoToolboxModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoToolModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    IgoToolboxModule\n                ],\n                declarations: []\n            }]\n    }], null, null); })();\n\nfunction WidgetOutletComponent_igo_dynamic_outlet_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-dynamic-outlet\", 1);\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"component\", ctx_r0.widget)(\"inputs\", ctx_r0.inputs)(\"subscribers\", ctx_r0.getEffectiveSubscribers());\n} }\n/**\n * This component dynamically renders a widget. It also subscribes\n * to the widget's 'cancel' and 'complete' events and destroys it\n * when any of those event is emitted.\n */\nclass WidgetOutletComponent {\n    constructor() {\n        /**\n         * Widget subscribers to 'cancel' and 'complete'\n         * @internal\n         */\n        this.baseSubscribers = {\n            cancel: (event) => this.onCancel(event),\n            complete: (event) => this.onComplete(event)\n        };\n        /**\n         * Widget subscribers\n         */\n        this.subscribers = {};\n        /**\n         * Event emitted when the widget emits 'complete'\n         */\n        this.complete = new EventEmitter();\n        /**\n         * Event emitted when the widget emits 'cancel'\n         */\n        this.cancel = new EventEmitter();\n    }\n    /**\n     * Destroy the current widget and all it's inner subscriptions\n     * @internal\n     */\n    ngOnDestroy() {\n        this.destroyWidget();\n    }\n    /**\n     * Get the effective subscribers. That means a combination of the base\n     * subscribers and any subscriber given as input.\n     * @returns Combined subscribers\n     * @internal\n     */\n    getEffectiveSubscribers() {\n        const subscribers = Object.assign({}, this.subscribers);\n        // Base subscribers\n        Object.keys(this.baseSubscribers).forEach((key) => {\n            const subscriber = subscribers[key];\n            const baseSubscriber = this.baseSubscribers[key];\n            if (subscriber !== undefined) {\n                subscribers[key] = (event) => {\n                    subscriber(event);\n                    baseSubscriber(event);\n                };\n            }\n            else {\n                subscribers[key] = baseSubscriber;\n            }\n        });\n        return subscribers;\n    }\n    /**\n     * When the widget emits 'cancel', propagate that event and destroy\n     * the widget\n     */\n    onCancel(event) {\n        this.cancel.emit(event);\n        this.destroyWidget();\n    }\n    /**\n     * When the widget emits 'complete', propagate that event and destroy\n     * the widget\n     */\n    onComplete(event) {\n        this.complete.emit(event);\n        this.destroyWidget();\n    }\n    /**\n     * Destroy the current widget\n     */\n    destroyWidget() {\n        if (this.widget !== undefined) {\n            this.widget.destroy();\n        }\n        this.widget = undefined;\n    }\n}\nWidgetOutletComponent.ɵfac = function WidgetOutletComponent_Factory(t) { return new (t || WidgetOutletComponent)(); };\nWidgetOutletComponent.ɵcmp = ɵɵdefineComponent({ type: WidgetOutletComponent, selectors: [[\"igo-widget-outlet\"]], inputs: { widget: \"widget\", inputs: \"inputs\", subscribers: \"subscribers\" }, outputs: { complete: \"complete\", cancel: \"cancel\" }, decls: 1, vars: 1, consts: [[3, \"component\", \"inputs\", \"subscribers\", 4, \"ngIf\"], [3, \"component\", \"inputs\", \"subscribers\"]], template: function WidgetOutletComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, WidgetOutletComponent_igo_dynamic_outlet_0_Template, 1, 3, \"igo-dynamic-outlet\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.widget);\n    } }, directives: [NgIf, DynamicOutletComponent], styles: [\"igo-dynamic-outlet[_ngcontent-%COMP%]{height:100%}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(WidgetOutletComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-widget-outlet',\n                templateUrl: './widget-outlet.component.html',\n                styleUrls: ['./widget-outlet.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { widget: [{\n            type: Input\n        }], inputs: [{\n            type: Input\n        }], subscribers: [{\n            type: Input\n        }], complete: [{\n            type: Output\n        }], cancel: [{\n            type: Output\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoWidgetOutletModule {\n}\nIgoWidgetOutletModule.ɵmod = ɵɵdefineNgModule({ type: IgoWidgetOutletModule });\nIgoWidgetOutletModule.ɵinj = ɵɵdefineInjector({ factory: function IgoWidgetOutletModule_Factory(t) { return new (t || IgoWidgetOutletModule)(); }, imports: [[\n            CommonModule,\n            IgoDynamicComponentModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoWidgetOutletModule, { declarations: [WidgetOutletComponent], imports: [CommonModule,\n        IgoDynamicComponentModule], exports: [WidgetOutletComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoWidgetOutletModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoDynamicComponentModule\n                ],\n                exports: [\n                    WidgetOutletComponent\n                ],\n                declarations: [\n                    WidgetOutletComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass WidgetService {\n    constructor(dynamicComponentService) {\n        this.dynamicComponentService = dynamicComponentService;\n    }\n    create(widgetCls) {\n        return this.dynamicComponentService.create(widgetCls);\n    }\n}\nWidgetService.ɵfac = function WidgetService_Factory(t) { return new (t || WidgetService)(ɵɵinject(DynamicComponentService)); };\nWidgetService.ɵprov = ɵɵdefineInjectable({ token: WidgetService, factory: WidgetService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(WidgetService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: DynamicComponentService }]; }, null); })();\n\nclass IgoWidgetModule {\n}\nIgoWidgetModule.ɵmod = ɵɵdefineNgModule({ type: IgoWidgetModule });\nIgoWidgetModule.ɵinj = ɵɵdefineInjector({ factory: function IgoWidgetModule_Factory(t) { return new (t || IgoWidgetModule)(); }, providers: [\n        WidgetService\n    ], imports: [[\n            CommonModule,\n            IgoWidgetOutletModule\n        ], IgoWidgetOutletModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoWidgetModule, { imports: [CommonModule,\n        IgoWidgetOutletModule], exports: [IgoWidgetOutletModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoWidgetModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoWidgetOutletModule\n                ],\n                exports: [\n                    IgoWidgetOutletModule\n                ],\n                declarations: [],\n                providers: [\n                    WidgetService\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * The class is a specialized version of an EntityStore that stores\n * workspaces.\n */\nclass WorkspaceStore extends EntityStore {\n    constructor() {\n        super(...arguments);\n        this.activeWorkspace$ = new BehaviorSubject(undefined);\n    }\n    /**\n     * Activate the an workspace workspace and deactivate the one currently active\n     * @param workspace Workspace\n     */\n    activateWorkspace(workspace) {\n        const active = this.activeWorkspace$.value;\n        if (active !== undefined) {\n            active.deactivate();\n        }\n        this.deactivateWorkspace();\n        if (workspace !== undefined) {\n            this.state.update(workspace, { active: true, selected: true }, true);\n            this.activeWorkspace$.next(workspace);\n            workspace.activate();\n        }\n    }\n    /**\n     * Deactivate the current workspace\n     * @param workspace Workspace\n     */\n    deactivateWorkspace() {\n        const active = this.activeWorkspace$.value;\n        if (active !== undefined) {\n            active.deactivate();\n            this.activeWorkspace$.next(undefined);\n        }\n    }\n}\n\n/**\n * Drop list that activates the selected workspace emit an event.\n */\nclass WorkspaceSelectorComponent {\n    constructor() {\n        /**\n         * Event emitted when an workspace is selected or unselected\n         */\n        this.selectedChange = new EventEmitter();\n    }\n    /**\n     * @internal\n     */\n    getWorkspaceTitle(workspace) {\n        return getEntityTitle(workspace);\n    }\n    /**\n     * When an workspace is manually selected, select it into the\n     * store and emit an event.\n     * @internal\n     * @param event The selection change event\n     */\n    onSelectedChange(event) {\n        const workspace = event.value;\n        this.store.activateWorkspace(workspace);\n        this.selectedChange.emit({ selected: true, value: workspace });\n    }\n}\nWorkspaceSelectorComponent.ɵfac = function WorkspaceSelectorComponent_Factory(t) { return new (t || WorkspaceSelectorComponent)(); };\nWorkspaceSelectorComponent.ɵcmp = ɵɵdefineComponent({ type: WorkspaceSelectorComponent, selectors: [[\"igo-workspace-selector\"]], inputs: { store: \"store\" }, outputs: { selectedChange: \"selectedChange\" }, decls: 1, vars: 3, consts: [[3, \"store\", \"multi\", \"titleAccessor\", \"selectedChange\"]], template: function WorkspaceSelectorComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-entity-selector\", 0);\n        ɵɵlistener(\"selectedChange\", function WorkspaceSelectorComponent_Template_igo_entity_selector_selectedChange_0_listener($event) { return ctx.onSelectedChange($event); });\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"store\", ctx.store)(\"multi\", false)(\"titleAccessor\", ctx.getWorkspaceTitle);\n    } }, directives: [EntitySelectorComponent], styles: [\"igo-entity-selector[_ngcontent-%COMP%]     mat-form-field .mat-form-field-infix{padding:0}igo-entity-selector[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:1.75em}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(WorkspaceSelectorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-workspace-selector',\n                templateUrl: './workspace-selector.component.html',\n                styleUrls: ['./workspace-selector.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], null, { store: [{\n            type: Input\n        }], selectedChange: [{\n            type: Output\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoWorkspaceSelectorModule {\n}\nIgoWorkspaceSelectorModule.ɵmod = ɵɵdefineNgModule({ type: IgoWorkspaceSelectorModule });\nIgoWorkspaceSelectorModule.ɵinj = ɵɵdefineInjector({ factory: function IgoWorkspaceSelectorModule_Factory(t) { return new (t || IgoWorkspaceSelectorModule)(); }, imports: [[\n            CommonModule,\n            IgoEntitySelectorModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoWorkspaceSelectorModule, { declarations: [WorkspaceSelectorComponent], imports: [CommonModule,\n        IgoEntitySelectorModule], exports: [WorkspaceSelectorComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoWorkspaceSelectorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoEntitySelectorModule\n                ],\n                exports: [\n                    WorkspaceSelectorComponent\n                ],\n                declarations: [\n                    WorkspaceSelectorComponent\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * This class is responsible of managing the relations between\n * entities and the actions that consume them. It also defines an\n * entity table template that may be used by an entity table component.\n */\nclass Workspace {\n    constructor(options) {\n        this.options = options;\n        /**\n         * Observable of the selected widget\n         */\n        this.widget$ = new BehaviorSubject(undefined);\n        /**\n         * Observable of the selected widget's inputs\n         */\n        this.widgetInputs$ = new BehaviorSubject({});\n        /**\n         * Observable of the selected widget's subscribers\n         */\n        this.widgetSubscribers$ = new BehaviorSubject({});\n        /**\n         * State change that trigger an update of the actions availability\n         */\n        this.change = new Subject();\n        this.active$ = new BehaviorSubject(false);\n    }\n    /**\n     * Workspace id\n     */\n    get id() { return this.options.id; }\n    /**\n     * Workspace title\n     */\n    get title() { return this.options.title; }\n    /**\n     * Workspace title\n     */\n    get meta() { return this.options.meta || {}; }\n    /**\n     * Entities store\n     */\n    get entityStore() { return this.options.entityStore; }\n    /**\n     * Actions store (some actions activate a widget)\n     */\n    get actionStore() { return this.options.actionStore; }\n    /**\n     * Selected widget\n     */\n    get widget() { return this.widget$.value; }\n    /**\n     * Whether a widget is selected\n     */\n    get hasWidget() { return this.widget !== undefined; }\n    /**\n     * Whether this strategy is active\n     * @internal\n     */\n    get active() { return this.active$.value; }\n    /**\n     * Activate the workspace. By doing that, the workspace will observe\n     * the selected entity (from the store) and update the actions availability.\n     * For example, some actions require an entity to be selected.\n     */\n    activate() {\n        if (this.active === true) {\n            this.deactivate();\n        }\n        this.active$.next(true);\n        if (this.entityStore !== undefined) {\n            this.entities$$ = this.entityStore.stateView.all$()\n                .subscribe(() => this.onStateChange());\n        }\n        this.change.next();\n    }\n    /**\n     * Deactivate the workspace. Unsubcribe to the selected entity.\n     */\n    deactivate() {\n        this.active$.next(false);\n        this.deactivateWidget();\n        if (this.entities$$ !== undefined) {\n            this.entities$$.unsubscribe();\n        }\n        if (this.change$ !== undefined) {\n            this.change$.unsubscribe();\n        }\n    }\n    /**\n     * Activate a widget. In itself, activating a widget doesn't render it but,\n     * if an WorkspaceWidgetOutlet component is bound to this workspace, the widget will\n     * show up.\n     * @param widget Widget\n     * @param inputs Inputs the widget will receive\n     */\n    activateWidget(widget, inputs = {}, subscribers = {}) {\n        this.widget$.next(widget);\n        this.widgetInputs$.next(inputs);\n        this.widgetSubscribers$.next(subscribers);\n        this.change.next();\n    }\n    /**\n     * Deactivate a widget.\n     */\n    deactivateWidget() {\n        this.widget$.next(undefined);\n        this.change.next();\n    }\n    /**\n     * When the state changes, update the actions availability.\n     */\n    onStateChange() {\n        this.change.next();\n    }\n}\n\nfunction WorkspaceWidgetOutletComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵɵgetCurrentView();\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"igo-widget-outlet\", 1);\n    ɵɵlistener(\"cancel\", function WorkspaceWidgetOutletComponent_ng_container_0_Template_igo_widget_outlet_cancel_1_listener() { ɵɵrestoreView(_r3); const widget_r1 = ctx.ngIf; const ctx_r2 = ɵɵnextContext(); return ctx_r2.onWidgetCancel(widget_r1); })(\"complete\", function WorkspaceWidgetOutletComponent_ng_container_0_Template_igo_widget_outlet_complete_1_listener() { ɵɵrestoreView(_r3); const widget_r1 = ctx.ngIf; const ctx_r4 = ɵɵnextContext(); return ctx_r4.onWidgetComplete(widget_r1); });\n    ɵɵpipe(2, \"async\");\n    ɵɵpipe(3, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const widget_r1 = ctx.ngIf;\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"widget\", widget_r1)(\"inputs\", ɵɵpipeBind1(2, 3, ctx_r0.widgetInputs$))(\"subscribers\", ɵɵpipeBind1(3, 5, ctx_r0.widgetSubscribers$));\n} }\n/**\n * This component dynamically render an Workspace's active widget.\n * It also deactivate that widget whenever the widget's component\n * emit the 'cancel' or 'complete' event.\n */\nclass WorkspaceWidgetOutletComponent {\n    constructor() {\n        /**\n         * Event emitted when a widget is deactivate which happens\n         * when the widget's component emits the 'cancel' or 'complete' event.\n         */\n        this.deactivateWidget = new EventEmitter();\n    }\n    /**\n     * Observable of the workspace's active widget\n     * @internal\n     */\n    get widget$() { return this.workspace.widget$; }\n    /**\n     * Observable of the workspace's widget inputs\n     * @internal\n     */\n    get widgetInputs$() {\n        return this.workspace.widgetInputs$;\n    }\n    /**\n     * Observable of the workspace's widget inputs\n     * @internal\n     */\n    get widgetSubscribers$() {\n        return this.workspace.widgetSubscribers$;\n    }\n    /**\n     * When a widget's component emit the 'cancel' event,\n     * deactivate that widget and emit the 'deactivateWidget' event.\n     * @param widget Widget\n     * @internal\n     */\n    onWidgetCancel(widget) {\n        this.workspace.deactivateWidget();\n        this.deactivateWidget.emit(widget);\n    }\n    /**\n     * When a widget's component emit the 'cancel' event,\n     * deactivate that widget and emit the 'deactivateWidget' event.\n     * @param widget Widget\n     * @internal\n     */\n    onWidgetComplete(widget) {\n        this.workspace.deactivateWidget();\n        this.deactivateWidget.emit(widget);\n    }\n}\nWorkspaceWidgetOutletComponent.ɵfac = function WorkspaceWidgetOutletComponent_Factory(t) { return new (t || WorkspaceWidgetOutletComponent)(); };\nWorkspaceWidgetOutletComponent.ɵcmp = ɵɵdefineComponent({ type: WorkspaceWidgetOutletComponent, selectors: [[\"igo-workspace-widget-outlet\"]], inputs: { workspace: \"workspace\" }, outputs: { deactivateWidget: \"deactivateWidget\" }, decls: 2, vars: 3, consts: [[4, \"ngIf\"], [3, \"widget\", \"inputs\", \"subscribers\", \"cancel\", \"complete\"]], template: function WorkspaceWidgetOutletComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, WorkspaceWidgetOutletComponent_ng_container_0_Template, 4, 7, \"ng-container\", 0);\n        ɵɵpipe(1, \"async\");\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(1, 1, ctx.widget$));\n    } }, directives: [NgIf, WidgetOutletComponent], pipes: [AsyncPipe], styles: [\"igo-widget-outlet[_ngcontent-%COMP%]{height:100%}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(WorkspaceWidgetOutletComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-workspace-widget-outlet',\n                templateUrl: './workspace-widget-outlet.component.html',\n                styleUrls: ['./workspace-widget-outlet.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { workspace: [{\n            type: Input\n        }], deactivateWidget: [{\n            type: Output\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoWorkspaceWidgetOutletModule {\n}\nIgoWorkspaceWidgetOutletModule.ɵmod = ɵɵdefineNgModule({ type: IgoWorkspaceWidgetOutletModule });\nIgoWorkspaceWidgetOutletModule.ɵinj = ɵɵdefineInjector({ factory: function IgoWorkspaceWidgetOutletModule_Factory(t) { return new (t || IgoWorkspaceWidgetOutletModule)(); }, imports: [[\n            CommonModule,\n            IgoWidgetOutletModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoWorkspaceWidgetOutletModule, { declarations: [WorkspaceWidgetOutletComponent], imports: [CommonModule,\n        IgoWidgetOutletModule], exports: [WorkspaceWidgetOutletComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoWorkspaceWidgetOutletModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoWidgetOutletModule\n                ],\n                exports: [\n                    WorkspaceWidgetOutletComponent\n                ],\n                declarations: [\n                    WorkspaceWidgetOutletComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoWorkspaceModule {\n}\nIgoWorkspaceModule.ɵmod = ɵɵdefineNgModule({ type: IgoWorkspaceModule });\nIgoWorkspaceModule.ɵinj = ɵɵdefineInjector({ factory: function IgoWorkspaceModule_Factory(t) { return new (t || IgoWorkspaceModule)(); }, imports: [[\n            CommonModule\n        ], IgoWorkspaceSelectorModule,\n        IgoWorkspaceWidgetOutletModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoWorkspaceModule, { imports: [CommonModule], exports: [IgoWorkspaceSelectorModule,\n        IgoWorkspaceWidgetOutletModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoWorkspaceModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    IgoWorkspaceSelectorModule,\n                    IgoWorkspaceWidgetOutletModule\n                ],\n                declarations: []\n            }]\n    }], null, null); })();\n\nfunction ToolComponent(tool) {\n    return (compType) => {\n        ToolService.register(Object.assign({}, tool, {\n            component: compType\n        }));\n    };\n}\n\nclass Widget extends DynamicComponent {\n}\n\n/*\n * Public API Surface of common\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ActionStore, ActionbarComponent, ActionbarMode, BackdropComponent, ClickoutDirective, ClonePipe, CollapseDirective, CollapsibleComponent, ConfirmDialogComponent, ConfirmDialogService, ContextMenuDirective, CustomHtmlComponent, DragAndDropDirective, DynamicComponent, DynamicComponentService, DynamicOutletComponent, EntityOperationType, EntitySelectorComponent, EntityStateManager, EntityStore, EntityStoreFilterCustomFuncStrategy, EntityStoreFilterSelectionStrategy, EntityStoreStrategy, EntityStoreWatcher, EntityTableColumnRenderer, EntityTableComponent, EntityTablePaginatorComponent, EntityTableScrollBehavior, EntityTableSelectionState, EntityTransaction, EntityView, FlexibleComponent, FormComponent, FormFieldComponent, FormFieldSelectComponent, FormFieldService, FormFieldTextComponent, FormFieldTextareaComponent, FormGroupComponent, FormService, IgoActionModule, IgoActionbarModule, IgoBackdropModule, IgoBadgeIconDirective, IgoClickoutModule, IgoCloneModule, IgoCollapsibleModule, IgoConfirmDialogModule, IgoContextMenuModule, IgoCustomHtmlModule, IgoDrapDropModule, IgoDynamicComponentModule, IgoDynamicOutletModule, IgoEntityModule, IgoEntitySelectorModule, IgoEntityTableModule, IgoEntityTablePaginatorModule, IgoFlexibleModule, IgoFormFieldComponent, IgoFormFieldModule, IgoFormFormModule, IgoFormGroupModule, IgoFormModule, IgoImageModule, IgoInteractiveTourModule, IgoJsonDialogModule, IgoKeyValueModule, IgoListModule, IgoMatBadgeIconModule, IgoPanelModule, IgoSidenavModule, IgoSpinnerModule, IgoStopPropagationModule, IgoTableModule, IgoToolModule, IgoToolboxModule, IgoWidgetModule, IgoWidgetOutletModule, IgoWorkspaceModule, IgoWorkspaceSelectorModule, IgoWorkspaceWidgetOutletModule, InteractiveTourComponent, InteractiveTourLoader, InteractiveTourService, JsonDialogComponent, JsonDialogService, KeyValuePipe, ListComponent, ListItemDirective, PanelComponent, SanitizeHtmlPipe, SecureImagePipe, SidenavShimDirective, SpinnerActivityDirective, SpinnerComponent, StopDropPropagationDirective, StopPropagationDirective, TableActionColor, TableComponent, TableDataSource, TableDatabase, ToolComponent, ToolService, Toolbox, ToolboxColor, ToolboxComponent, Widget, WidgetOutletComponent, WidgetService, Workspace, WorkspaceSelectorComponent, WorkspaceStore, WorkspaceWidgetOutletComponent, formControlIsRequired, getAllFormFields, getControlErrorMessage, getDefaultErrorMessages, getEntityIcon, getEntityId, getEntityProperty, getEntityRevision, getEntityTitle, getEntityTitleHtml, getFormFieldByName };\n//# sourceMappingURL=igo2-common.js.map\n","import { Component } from '@angular/core';\nimport { InteractiveTourService } from '@igo2/common';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class AppHomeComponent {\n  constructor(private interactiveTourService: InteractiveTourService) {}\n\n  startTour() {\n    this.interactiveTourService.startTour('global');\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { AppHomeComponent } from './home.component';\nimport { AppHomeRoutingModule } from './home-routing.module';\nimport { IgoInteractiveTourModule } from '@igo2/common';\n\n@NgModule({\n  declarations: [AppHomeComponent],\n  imports: [\n    AppHomeRoutingModule,\n    IgoInteractiveTourModule,\n    MatTooltipModule,\n    MatIconModule,\n    MatButtonModule\n  ],\n  exports: [AppHomeComponent]\n})\nexport class AppHomeModule {}\n","import { Component } from '@angular/core';\n\nimport { ActivityService } from '@igo2/core';\n\n@Component({\n  selector: 'app-activity',\n  templateUrl: './activity.component.html',\n  styleUrls: ['./activity.component.scss']\n})\nexport class AppActivityComponent {\n  private idsActivity: string[] = [];\n\n  constructor(private activityService: ActivityService) {}\n\n  register() {\n    this.idsActivity.push(this.activityService.register());\n  }\n\n  unregister() {\n    this.activityService.unregister(this.idsActivity.pop());\n  }\n\n  get counter() {\n    return this.activityService.counter$.value;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoActivityModule } from '@igo2/core';\nimport { IgoSpinnerModule } from '@igo2/common';\n\nimport { AppActivityComponent } from './activity.component';\nimport { AppActivityRoutingModule } from './activity-routing.module';\n\n@NgModule({\n  declarations: [AppActivityComponent],\n  imports: [\n    AppActivityRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoActivityModule.forRoot(), // Only if you want register http calls\n    IgoSpinnerModule\n  ],\n  exports: [AppActivityComponent]\n})\nexport class AppActivityModule {}\n","import { Component } from '@angular/core';\nimport { ConfigService, LanguageOptions } from '@igo2/core';\n\n@Component({\n  selector: 'app-config',\n  templateUrl: './config.component.html',\n  styleUrls: ['./config.component.scss']\n})\nexport class AppConfigComponent {\n  public configLanguage: LanguageOptions;\n\n  constructor(private configService: ConfigService) {\n    this.configLanguage = this.configService.getConfig('language');\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoConfigModule, provideConfigOptions } from '@igo2/core';\n\nimport { environment } from '../../../environments/environment';\nimport { AppConfigComponent } from './config.component';\nimport { AppConfigRoutingModule } from './config-routing.module';\n\n@NgModule({\n  declarations: [AppConfigComponent],\n  imports: [\n    AppConfigRoutingModule,\n    CommonModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoConfigModule.forRoot()\n  ],\n  exports: [AppConfigComponent],\n  providers: [\n    provideConfigOptions({\n      default: environment.igo\n    })\n  ]\n})\nexport class AppConfigModule {}\n","import { Component } from '@angular/core';\nimport { LanguageService } from '@igo2/core';\n\n@Component({\n  selector: 'app-language',\n  templateUrl: './language.component.html',\n  styleUrls: ['./language.component.scss']\n})\nexport class AppLanguageComponent {\n  public app = {\n    title: 'IGO'\n  };\n  constructor(private languageService: LanguageService) {}\n\n  changeLanguage(language: string) {\n    this.languageService.setLanguage(language);\n    console.log(this.languageService);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoLanguageModule } from '@igo2/core';\n\nimport { AppLanguageComponent } from './language.component';\nimport { AppLanguageRoutingModule } from './language-routing.module';\n\n@NgModule({\n  declarations: [AppLanguageComponent],\n  imports: [\n    AppLanguageRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoLanguageModule.forRoot()\n  ],\n  exports: [AppLanguageComponent]\n})\nexport class AppLanguageModule {}\n","import { Component } from '@angular/core';\n\nimport { MediaService } from '@igo2/core';\n\n@Component({\n  selector: 'app-media',\n  templateUrl: './media.component.html',\n  styleUrls: ['./media.component.scss']\n})\nexport class AppMediaComponent {\n  constructor(private mediaService: MediaService) {}\n\n  get media() {\n    return this.mediaService.getMedia();\n  }\n\n  get orientation() {\n    return this.mediaService.getOrientation();\n  }\n\n  get isTouchScreen() {\n    return this.mediaService.isTouchScreen();\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { AppMediaComponent } from './media.component';\nimport { AppMediaRoutingModule } from './media-routing.module';\n\n@NgModule({\n  declarations: [AppMediaComponent],\n  imports: [AppMediaRoutingModule, MatCardModule],\n  exports: [AppMediaComponent]\n})\nexport class AppMediaModule {}\n","import { Component } from '@angular/core';\n\nimport { MessageService } from '@igo2/core';\n\n@Component({\n  selector: 'app-message',\n  templateUrl: './message.component.html',\n  styleUrls: ['./message.component.scss']\n})\nexport class AppMessageComponent {\n  constructor(private messageService: MessageService) {}\n\n  success() {\n    this.messageService.success('Congratulations', 'Success');\n  }\n\n  info() {\n    this.messageService.info('Welcome to IGO', 'Info');\n  }\n\n  alert() {\n    this.messageService.alert('Warning', 'Alert');\n  }\n  error() {\n    this.messageService.error('There is a bug', 'Error');\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMessageModule } from '@igo2/core';\n\nimport { AppMessageComponent } from './message.component';\nimport { AppMessageRoutingModule } from './message-routing.module';\n\n@NgModule({\n  declarations: [AppMessageComponent],\n  imports: [\n    AppMessageRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoMessageModule.forRoot()\n  ],\n  exports: [AppMessageComponent]\n})\nexport class AppMessageModule {}\n","import { Component } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { LanguageService } from '@igo2/core';\n\n@Component({\n  selector: 'app-request',\n  templateUrl: './request.component.html',\n  styleUrls: ['./request.component.scss']\n})\nexport class AppRequestComponent {\n  constructor(\n    private http: HttpClient,\n    public languageService: LanguageService\n  ) {}\n\n  callHttp() {\n    const url = 'https://geoegl.msp.gouv.qc.ca/apis/icherche/info';\n    this.http.get(url).subscribe(rep => {\n      console.log(rep);\n    });\n  }\n\n  callHttpError() {\n    const url = '404';\n    this.http.get(url).subscribe(rep => {\n      console.log(rep);\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoErrorModule, IgoLanguageModule } from '@igo2/core';\n\nimport { AppRequestComponent } from './request.component';\nimport { AppRequestRoutingModule } from './request-routing.module';\n\n@NgModule({\n  declarations: [AppRequestComponent],\n  imports: [\n    AppRequestRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    HttpClientModule,\n    IgoLanguageModule.forRoot(),\n    IgoErrorModule.forRoot() // Only if you want register errors from http call in console\n    // IgoLoggingModule.forRoot() // Only if you want register http calls in console\n  ],\n  exports: [AppRequestComponent]\n})\nexport class AppRequestModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppHomeComponent } from './home.component';\n\nconst routes: Routes = [\n  {\n    path: 'home',\n    component: AppHomeComponent\n  }\n];\n\nexport const AppHomeRoutingModule = RouterModule.forChild(\n  routes\n);\n","<div style=\"text-align:center\">\n  <h1 id=\"igo-title\">\n    Welcome to IGO\n  </h1>\n  <img  class=\"igo-logo\" width=\"180\" src=\"assets/igo2/core/logo.png\">\n</div>\n\n<p>\n  <igo-interactive-tour\n    tourToStart = \"global\"\n    menuIsOpen = true\n    styleButton = \"raised\">\n  </igo-interactive-tour>\n</p>\n\n<p>\n  IGO2 library contains many components and services that may benefit any web application. <br>\n  IGO2 library is open source project using Angular, Angular Material and OpenLayers.\n</p>\n\n<h3>IGO2 library is divided into several elements: </h3>\n<ul>\n  <li><b>@igo2/utils</b> : Basic utilies without dependency (ex: base64, clipboard, uuid)</li>\n  <li><b>@igo2/core</b> : Element affecting the core of the application (ex: config, language, message, media, request)</li>\n  <li><b>@igo2/common</b> : Library containing reusable components (ex: clickout, drag-drop, list, panel, spinner, table)</li>\n  <li><b>@igo2/auth</b> : Library grouping the authentication and security module</li>\n  <li><b>@igo2/geo</b> : Library containing the geomatic components. Depends on Openlayers.</li>\n  <li><b>@igo2/context</b> : Library of components uniting @igo2/geo and @igo2/auth</li>\n  <li><b>@igo2/integration</b> : Library integrate basic components</li>\n</ul>\n\n<h2>Here are some links to help you start: </h2>\n<ul>\n  <li>\n    <h2><a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/infra-geo-ouverte/igo2-lib/blob/master/README.md#user-installation\">Installation</a></h2>\n  </li>\n  <li>\n    <h2><a target=\"_blank\" rel=\"noopener\" href=\"https://angular.io/docs\">Angular Documentation</a></h2>\n  </li>\n</ul>\n\n*** Modules in <code>@igo2/core</code> must be imported only once\n","import { Routes, RouterModule } from '@angular/router';\n\nimport { AppActivityComponent } from './activity.component';\n\nconst routes: Routes = [\n  {\n    path: 'activity',\n    component: AppActivityComponent\n  }\n];\n\nexport const AppActivityRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Core</mat-card-subtitle>\n  <mat-card-title>Activity</mat-card-title>\n  <mat-card-content>\n    <p>Register activities in service. Use to display a loading icon</p>\n\n    <li>Import <code>IgoActivityModule</code> only if you want register http calls</li>\n    <li>Import <code>IgoActivityModule</code> only once</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/core/activity\"> code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <mat-card-actions>\n    <button mat-raised-button (click)=\"register()\">Register</button>\n    <button mat-raised-button (click)=\"unregister()\">Unregister</button>\n  </mat-card-actions>\n  <p>Counter: {{counter}}</p>\n\n  <igo-spinner igoSpinnerActivity></igo-spinner>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppConfigComponent } from './config.component';\n\nconst routes: Routes = [\n  {\n    path: 'config',\n    component: AppConfigComponent\n  }\n];\n\nexport const AppConfigRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Core</mat-card-subtitle>\n  <mat-card-title>config</mat-card-title>\n  <mat-card-content>\n    <p>Load config in your angular application</p>\n\n    <li>Import <code>IgoConfigModule</code> only once</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/core/config\"> code of this example</a> <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/environments\"> environment config</a>\n    <hr>\n  </mat-card-content>\n\n  <p>Config language: {{configLanguage | json }}<p>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppLanguageComponent } from './language.component';\n\nconst routes: Routes = [\n  {\n    path: 'language',\n    component: AppLanguageComponent\n  }\n];\n\nexport const AppLanguageRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Core</mat-card-subtitle>\n  <mat-card-title>language</mat-card-title>\n  <mat-card-content>\n    <p>Translate your angular application</p>\n\n    <li>Import <code>IgoLanguageModule</code> only once</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/core/language\">code of this example</a><br>\n    See language section of the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/environments\"> environment config</a><br>\n    See <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/locale\">locale files</a>\n    <hr>\n  </mat-card-content>\n\n  <mat-card-actions>\n    <button mat-raised-button (click)=\"changeLanguage('en')\">English</button>\n    <button mat-raised-button (click)=\"changeLanguage('fr')\">Français</button>\n  </mat-card-actions>\n\n  <p>{{'welcome' | translate: app}}<p>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppMediaComponent } from './media.component';\n\nconst routes: Routes = [\n  {\n    path: 'media',\n    component: AppMediaComponent\n  }\n];\n\nexport const AppMediaRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Core</mat-card-subtitle>\n  <mat-card-title>Media</mat-card-title>\n  <mat-card-content>\n    <p>Detect type of media (mobile, tablet, desktop)</p>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/core/media\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <p>Current media: {{media}}</p>\n  <p>Current orientation: {{orientation}}</p>\n  <p>Device mode:  {{isTouchScreen ? 'Touch device' : 'Not a touch device '}}</p>\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppMessageComponent } from './message.component';\n\nconst routes: Routes = [\n  {\n    path: 'message',\n    component: AppMessageComponent\n  }\n];\n\nexport const AppMessageRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Core</mat-card-subtitle>\n  <mat-card-title>Message</mat-card-title>\n  <mat-card-content>\n    <p>Show message to user.</p>\n\n    <li>Import <code>IgoMessageModule</code> only once</li>\n    <li>Dependencies: BrowserAnimationsModule </li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/core/message\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <mat-card-actions>\n    <button mat-raised-button (click)=\"success()\">Success message</button>\n    <button mat-raised-button color='primary' (click)=\"info()\">Info message</button>\n    <button mat-raised-button color='accent' (click)=\"alert()\">Alert message</button>\n    <button mat-raised-button color='warn' (click)=\"error()\">Error message</button>\n  </mat-card-actions>\n</mat-card>\n\n<igo-message-center></igo-message-center>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppRequestComponent } from './request.component';\n\nconst routes: Routes = [\n  {\n    path: 'request',\n    component: AppRequestComponent\n  }\n];\n\nexport const AppRequestRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Core</mat-card-subtitle>\n  <mat-card-title>Request</mat-card-title>\n  <mat-card-content>\n    <p>Register http calls in console</p>\n\n    <li>Import <code>IgoLoggingModule</code> only if you want register http calls in console</li>\n    <li>Import <code>IgoErrorModule</code> only if you want register errors from http call in console</li>\n    <li>Import modules only once</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/core/request\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <mat-card-actions>\n    <button mat-raised-button (click)=\"callHttp()\">Log</button>\n    <button mat-raised-button (click)=\"callHttpError()\">Error</button>\n  </mat-card-actions>\n\n</mat-card>\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Action</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/action\">code of this example</a>\n  </mat-card-content>\n\n  <igo-actionbar\n    [store]=\"store\"\n    [withIcon]=\"true\"\n    [withTitle]=\"actionbarMode === 'overlay'\"\n    [horizontal]=\"true\"\n    [mode]=\"actionbarMode\">\n  </igo-actionbar>\n\n</mat-card>\n<p></p>\n\n<mat-card [igoContextMenu]= actionbarMenu>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Action context-menu</mat-card-title>\n  <div></div>\n</mat-card>\n\n\n\n<ng-template #actionbarMenu>\n  <igo-actionbar\n    [store]=\"store\"\n    [withIcon]=\"true\"\n    [horizontal]=\"true\"\n    [mode]=\"'context'\">\n  </igo-actionbar>\n</ng-template>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppActionComponent } from './action.component';\n\nconst routes: Routes = [\n  {\n    path: 'action',\n    component: AppActionComponent\n  }\n];\n\nexport const AppActionRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit, OnDestroy } from '@angular/core';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport {\n  Media,\n  MediaOrientation,\n  MediaService,\n  LanguageService\n} from '@igo2/core';\nimport { ActionStore, ActionbarMode } from '@igo2/common';\nimport { Overlay } from '@angular/cdk/overlay';\n\n@Component({\n  selector: 'app-action',\n  templateUrl: './action.component.html',\n  styleUrls: ['./action.component.scss']\n})\nexport class AppActionComponent implements OnInit, OnDestroy {\n  public store = new ActionStore([]);\n\n  private added$ = new BehaviorSubject(false);\n\n  get actionbarMode(): ActionbarMode {\n    const media = this.mediaService.media$.value;\n    const orientation = this.mediaService.orientation$.value;\n    if (media === Media.Desktop && orientation === MediaOrientation.Landscape) {\n      return ActionbarMode.Dock;\n    }\n    return ActionbarMode.Overlay;\n  }\n\n  constructor(\n    public overlay: Overlay,\n    private mediaService: MediaService,\n    private languageService: LanguageService\n  ) {}\n\n  ngOnInit() {\n    this.store.load([\n      {\n        id: 'add',\n        title: 'Add',\n        icon: 'plus',\n        tooltip: 'Add Tooltip',\n        handler: () => {\n          alert('Add!');\n          this.added$.next(true);\n        }\n      },\n      {\n        id: 'edit',\n        title: 'Edit',\n        icon: 'pencil',\n        tooltip: 'Edit Tooltip',\n        args: ['1'],\n        handler: (item: string) => {\n          alert(`Edit item ${item}!`);\n        },\n        availability: () => this.added$\n      },\n      {\n        id: 'delete',\n        title: 'Delete',\n        tooltip: 'Delete Tooltip',\n        icon: 'delete',\n        handler: () => {\n          alert('Delete!');\n          this.added$.next(false);\n        },\n        availability: () => this.added$\n      }\n    ]);\n  }\n\n  ngOnDestroy() {\n    this.store.destroy();\n  }\n}\n","import { Component, Input, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\n\nimport { OnUpdateInputs } from '@igo2/common';\n\n@Component({\n  selector: 'app-salutation-component',\n  template: '<p>Hello, my name is {{name}}.</p>',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AppSalutationComponent implements OnUpdateInputs {\n\n  @Input() name: string;\n\n  constructor(private cdRef: ChangeDetectorRef) {}\n\n  onUpdateInputs() {\n    this.cdRef.detectChanges();\n  }\n\n}\n\n@Component({\n  selector: 'app-explanation-component',\n  template: '<p>I am a dynamic component, rendered into an IgoDynamicOutlet.</p>',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AppExplanationComponent implements OnUpdateInputs {\n\n  constructor(private cdRef: ChangeDetectorRef) {}\n\n  onUpdateInputs() {\n    this.cdRef.detectChanges();\n  }\n\n}\n\n@Component({\n  selector: 'app-dynamic-component',\n  templateUrl: './dynamic-component.component.html',\n  styleUrls: ['./dynamic-component.component.scss']\n})\nexport class AppDynamicComponentComponent {\n\n  component: any = AppSalutationComponent;\n\n  inputs = {name: 'Bob'};\n\n  toggleComponent() {\n    this.component = this.component === AppSalutationComponent ?\n      AppExplanationComponent :\n      AppSalutationComponent;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoActionModule, IgoContextMenuModule } from '@igo2/common';\n\nimport { AppActionComponent } from './action.component';\nimport { AppActionRoutingModule } from './action-routing.module';\n\n@NgModule({\n  declarations: [AppActionComponent],\n  imports: [\n    AppActionRoutingModule,\n    MatButtonModule,\n    MatCardModule,\n    IgoActionModule,\n    IgoContextMenuModule\n  ],\n  exports: [AppActionComponent]\n})\nexport class AppActionModule {}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoDynamicComponentModule } from '@igo2/common';\n\nimport {\n  AppSalutationComponent,\n  AppExplanationComponent,\n  AppDynamicComponentComponent\n} from './dynamic-component.component';\nimport { AppDynamicComponentRoutingModule } from './dynamic-component-routing.module';\n\n@NgModule({\n  declarations: [\n    AppSalutationComponent,\n    AppDynamicComponentComponent,\n    AppExplanationComponent\n  ],\n  imports: [\n    AppDynamicComponentRoutingModule,\n    MatButtonModule,\n    MatCardModule,\n    IgoDynamicComponentModule\n  ],\n  exports: [AppDynamicComponentComponent],\n  entryComponents: [\n    AppSalutationComponent,\n    AppExplanationComponent\n  ]\n})\nexport class AppDynamicComponentModule {}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  EntityStore,\n  EntityTableButton,\n  getEntityProperty,\n  EntityTableColumnRenderer,\n  EntityTablePaginatorOptions\n} from '@igo2/common';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { BehaviorSubject } from 'rxjs';\n\n@Component({\n  selector: 'app-entity-table',\n  templateUrl: './entity-table.component.html',\n  styleUrls: ['./entity-table.component.scss']\n})\nexport class AppEntityTableComponent implements OnInit, OnDestroy {\n  public store = new EntityStore([]);\n  public paginator: MatPaginator;\n  entitySortChange$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n\n  public paginatorOptions: EntityTablePaginatorOptions = {pageSize: 10};\n\n  public template = {\n    selection: true,\n    selectionCheckbox: true,\n    selectMany: true,\n    sort: true,\n    valueAccessor: (entity: object, name: string) => {\n      return getEntityProperty(entity, name);\n    },\n    columns: [\n      {\n        name: 'selected',\n        title: 'Selected',\n        valueAccessor: (entity: object) => {\n          return this.store.state.get(entity).selected\n            ? 'radiobox-marked'\n            : 'radiobox-blank';\n        },\n        renderer: EntityTableColumnRenderer.Icon\n      },\n      {\n        name: 'id',\n        title: 'ID'\n      },\n      {\n        name: 'name',\n        title: 'Name'\n      },\n      {\n        name: 'description',\n        title: 'Description',\n        renderer: EntityTableColumnRenderer.HTML\n      },\n      {\n        name: 'url',\n        title: 'Hyperlink'\n      },\n      {\n        name: 'image',\n        title: 'Image'\n      },\n      {\n        name: 'action',\n        title: '',\n        valueAccessor: (entity: object) => {\n          return [{\n            icon: 'home',\n            color: 'warn',\n            click: (row) => { console.log(row); }\n          }] as EntityTableButton[];\n        },\n        renderer: EntityTableColumnRenderer.ButtonGroup\n      }\n    ]\n  };\n\n  constructor(private languageService: LanguageService) {}\n\n  ngOnInit() {\n    const ids = [2, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13];\n\n    const entities = ids.map(id => {\n      return { id , name: `Name ${id}`, description: `<b>Description ${id}</b>`, url: 'https://igouverte.org', image: 'http://www.igouverte.org/assets/img/Igo_logoavec.png'};\n    });\n    this.store.load(entities);\n  }\n\n  entitySortChange() {\n    this.entitySortChange$.next(true);\n  }\n\n  paginatorChange(event: MatPaginator) {\n    this.paginator = event;\n  }\n\n  ngOnDestroy() {\n    this.store.destroy();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoEntityTableModule, IgoEntityTablePaginatorModule } from '@igo2/common';\n\nimport { AppEntityTableComponent } from './entity-table.component';\nimport { AppEntityTableRoutingModule } from './entity-table-routing.module';\n\n@NgModule({\n  declarations: [AppEntityTableComponent],\n  imports: [\n    AppEntityTableRoutingModule,\n    MatCardModule,\n    IgoEntityTableModule,\n    IgoEntityTablePaginatorModule\n  ],\n  exports: [AppEntityTableComponent]\n})\nexport class AppEntityTableModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppDynamicComponentComponent } from './dynamic-component.component';\n\nconst routes: Routes = [\n  {\n    path: 'dynamic-component',\n    component: AppDynamicComponentComponent\n  }\n];\n\nexport const AppDynamicComponentRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Dynamic Component</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/dynamic-component\">code of this example</a>\n  </mat-card-content>\n\n  <igo-dynamic-outlet\n    [component]=\"component\"\n    [inputs]=\"inputs\">\n  </igo-dynamic-outlet>\n\n  <button mat-flat-button color=\"primary\" (click)=\"toggleComponent()\">Toggle Component</button>\n</mat-card>\n\n\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppEntityTableComponent } from './entity-table.component';\n\nconst routes: Routes = [\n  {\n    path: 'entity-table',\n    component: AppEntityTableComponent\n  }\n];\n\nexport const AppEntityTableRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Entity Table</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/entity-table\">code of this example</a>\n  </mat-card-content>\n  <igo-entity-table\n    [store]=\"store\"\n    [withPaginator]=\"true\"\n    [paginatorOptions]=\"paginatorOptions\"\n    [template]=\"template\"\n    (entitySortChange)=\"entitySortChange()\">\n  </igo-entity-table>\n</mat-card>\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Entity Selector</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/entity-selector\">code of this example</a>\n  </mat-card-content>\n\n  <igo-entity-selector\n    [store]=\"store\"\n    [titleAccessor]=\"getTitle\"\n    [emptyText]=\"''\"\n    [placeholder]=\"'Select an entity'\"\n    (selectedChange)=\"onSelectedChange($event)\">\n  </igo-entity-selector>\n\n  <div *ngIf=\"selected$ | async as selected\">\n    <p>ID: {{selected.id}}</p>\n    <p>Name: {{selected.name}}</p>\n    <p>Description: <span [innerHtml]=\"selected.description\"></span></p>\n  </div>\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppEntitySelectorComponent } from './entity-selector.component';\n\nconst routes: Routes = [\n  {\n    path: 'entity-selector',\n    component: AppEntitySelectorComponent\n  }\n];\n\nexport const AppEntitySelectorRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit, OnDestroy } from '@angular/core';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport { LanguageService } from '@igo2/core';\nimport { EntityStore } from '@igo2/common';\n\ninterface DemoEntity {\n  id: string;\n  name: string;\n  description: string;\n}\n\n@Component({\n  selector: 'app-entity-selector',\n  templateUrl: './entity-selector.component.html',\n  styleUrls: ['./entity-selector.component.scss']\n})\nexport class AppEntitySelectorComponent implements OnInit, OnDestroy {\n\n  public store = new EntityStore([]);\n\n  public selected$ = new BehaviorSubject<DemoEntity>(undefined);\n\n  constructor(private languageService: LanguageService) {}\n\n  ngOnInit() {\n    this.store.load([\n      {id: '2', name: 'Name 2', description: '<b>Description 2</b>'},\n      {id: '1', name: 'Name 1', description: '<b>Description 1</b>'},\n      {id: '3', name: 'Name 3', description: '<b>Description 3</b>'}\n    ]);\n  }\n\n  ngOnDestroy() {\n    this.store.destroy();\n  }\n\n  getTitle(entity: DemoEntity): string {\n    return entity.name;\n  }\n\n  onSelectedChange(event: {selected: boolean; entity: DemoEntity}) {\n    this.selected$.next(event.entity);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoEntitySelectorModule } from '@igo2/common';\n\nimport { AppEntitySelectorComponent } from './entity-selector.component';\nimport { AppEntitySelectorRoutingModule } from './entity-selector-routing.module';\n\n@NgModule({\n  declarations: [AppEntitySelectorComponent],\n  imports: [\n    CommonModule,\n    AppEntitySelectorRoutingModule,\n    MatCardModule,\n    IgoEntitySelectorModule\n  ],\n  exports: [AppEntitySelectorComponent]\n})\nexport class AppEntitySelectorModule {}\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Form</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/form\">code of this example</a>\n  </mat-card-content>\n\n  <igo-form\n    *ngIf=\"form$ | async as form\"\n    [form]=\"form\"\n    [formData]=\"data$ | async\"\n    (submitForm)=\"onSubmit($event)\">\n\n    <igo-form-group [group]=\"form.groups[0]\"></igo-form-group>\n\n    <div formButtons>\n      <button\n        mat-stroked-button\n        type=\"button\"\n        color=\"primary\"\n        (click)=\"fillForm()\">\n        Fill Form\n      </button>\n      <button\n        mat-stroked-button\n        type=\"button\"\n        color=\"primary\"\n        (click)=\"clearForm()\">\n        Clear Form\n      </button>\n      <button\n        mat-flat-button\n        type=\"submit\"\n        color=\"primary\"\n        [disabled]=\"submitDisabled\">\n        Submit\n      </button>\n    </div>\n  </igo-form>\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppFormComponent } from './form.component';\n\nconst routes: Routes = [\n  {\n    path: 'form',\n    component: AppFormComponent\n  }\n];\n\nexport const AppFormRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { BehaviorSubject, Subscription } from 'rxjs';\n\nimport { LanguageService } from '@igo2/core';\nimport { Form, FormService } from '@igo2/common';\n\n@Component({\n  selector: 'app-form',\n  templateUrl: './form.component.html',\n  styleUrls: ['./form.component.scss']\n})\nexport class AppFormComponent implements OnInit, OnDestroy {\n\n  form$ = new BehaviorSubject<Form>(undefined);\n\n  data$ = new BehaviorSubject<{[key: string]: any}>(undefined);\n\n  submitDisabled = true;\n\n  private valueChanges$$: Subscription;\n\n  constructor(\n    private formService: FormService,\n    private languageService: LanguageService\n  ) {}\n\n  ngOnInit() {\n    const fieldConfigs = [\n      {\n        name: 'id',\n        title: 'ID',\n        options:  {\n          cols: 1,\n          validator: Validators.required\n        }\n      },\n      {\n        name: 'name',\n        title: 'Name',\n        options:  {\n          cols: 1,\n          validator: Validators.required\n        }\n      },\n      {\n        name: 'status',\n        title: 'Status',\n        type: 'select',\n        options:  {\n          cols: 2\n        },\n        inputs: {\n          choices: [\n            {value: 1, title: 'Single'},\n            {value: 2, title: 'Married'}\n          ]\n        }\n      }\n    ];\n\n    const fields = fieldConfigs.map((config) => this.formService.field(config));\n    const form = this.formService.form([], [this.formService.group({name: 'info'}, fields)]);\n\n    this.valueChanges$$ = form.control.valueChanges.subscribe(() => {\n      this.submitDisabled = !form.control.valid;\n    });\n\n    this.form$.next(form);\n  }\n\n  ngOnDestroy() {\n    this.valueChanges$$.unsubscribe();\n  }\n\n  fillForm() {\n    this.data$.next({\n      id: 1,\n      name: 'Bob',\n      status: 2\n    });\n  }\n\n  clearForm() {\n    this.form$.value.control.reset();\n  }\n\n  onSubmit(data: {[key: string]: any}) {\n    alert(JSON.stringify(data));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoFormModule } from '@igo2/common';\n\nimport { AppFormComponent } from './form.component';\nimport { AppFormRoutingModule } from './form-routing.module';\n\n@NgModule({\n  declarations: [AppFormComponent],\n  imports: [\n    CommonModule,\n    AppFormRoutingModule,\n    MatButtonModule,\n    MatCardModule,\n    IgoFormModule\n  ],\n  exports: [AppFormComponent]\n})\nexport class AppFormModule {}\n","import { Component, OnInit } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport { TableDatabase, TableActionColor } from '@igo2/common';\n\n@Component({\n  selector: 'app-table',\n  templateUrl: './table.component.html',\n  styleUrls: ['./table.component.scss']\n})\nexport class AppTableComponent implements OnInit {\n  public database: TableDatabase;\n\n  public model = {\n    columns: [\n      {\n        name: 'id',\n        title: 'ID',\n        sortable: false,\n        filterable: true\n      },\n      {\n        name: 'name',\n        title: 'Name',\n        sortable: true,\n        filterable: true\n      },\n      {\n        name: 'description',\n        title: 'Description',\n        sortable: true,\n        filterable: true\n      }\n    ],\n    actions: [\n      {\n        icon: 'file-document',\n        color: TableActionColor.primary,\n        click: row => this.showName(row.name)\n      }\n    ],\n    selectionCheckbox: true\n  };\n\n  constructor(private languageService: LanguageService) {}\n\n  ngOnInit() {\n    this.database = new TableDatabase([\n      { id: '2', name: 'Name 2', description: 'Hello 2' },\n      { id: '1', name: 'Name 1', description: 'Bonjour 1' },\n      { id: '3', name: 'Name 3', description: 'Hola 3' }\n    ]);\n  }\n\n  showName(name) {\n    alert(name);\n  }\n\n  handleSelect(rows) {\n    console.log(rows);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoTableModule } from '@igo2/common';\n\nimport { AppTableComponent } from './table.component';\nimport { AppTableRoutingModule } from './table-routing.module';\n\n@NgModule({\n  declarations: [AppTableComponent],\n  imports: [\n    AppTableRoutingModule,\n    MatCardModule,\n    IgoTableModule\n  ],\n  exports: [AppTableComponent]\n})\nexport class AppTableModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppTableComponent } from './table.component';\n\nconst routes: Routes = [\n  {\n    path: 'table',\n    component: AppTableComponent\n  }\n];\n\nexport const AppTableRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Table</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/table\">code of this example</a>\n  </mat-card-content>\n\n  <igo-table\n    [database]=\"database\"\n    [model]=\"model\"\n    [hasFilterInput]=\"true\"\n    (select)=\"handleSelect($event)\">\n  </igo-table>\n</mat-card>\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Tool</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/tool\">code of this example</a>\n  </mat-card-content>\n\n  <igo-panel [title]=\"panelTitle\">\n    <button\n      mat-icon-button\n      panelLeftButton\n      (click)=\"toolbox.activatePreviousTool()\"\n      *ngIf=\"activeTool$ | async\">\n      <mat-icon svgIcon=\"arrow-back\"></mat-icon>\n    </button>\n\n    <button\n      mat-icon-button\n      panelRightButton\n      (click)=\"toolbox.deactivateTool()\"\n      *ngIf=\"activeTool$ | async\">\n      <mat-icon svgIcon=\"menu\"></mat-icon>\n    </button>\n\n    <igo-toolbox [toolbox]=\"toolbox\" [animate]=\"true\"></igo-toolbox>\n  </igo-panel>\n\n  <button\n    mat-flat-button\n    type=\"button\"\n    color=\"primary\"\n    (click)=\"activateSalutationTool()\">\n    Activate Salutation Tool\n  </button>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppToolComponent } from './tool.component';\n\nconst routes: Routes = [\n  {\n    path: 'tool',\n    component: AppToolComponent\n  }\n];\n\nexport const AppToolRoutingModule = RouterModule.forChild(\n  routes\n);\n","import {\n  Component,\n  OnInit,\n  OnDestroy,\n  Input,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef\n} from '@angular/core';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  OnUpdateInputs,\n  Tool,\n  Toolbox,\n  ToolComponent,\n  ToolService\n} from '@igo2/common';\n\n@ToolComponent({\n  name: 'demo-salutation',\n  title: 'Salutation',\n  icon: 'account',\n  options: {name: 'Jack'}\n})\n@Component({\n  selector: 'app-salutation-tool',\n  template: `\n    <p>Hello, my name is {{name}}.</p>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AppSalutationToolComponent implements OnUpdateInputs {\n\n  @Input() name: string;\n\n  constructor(private cdRef: ChangeDetectorRef) {}\n\n  onUpdateInputs() {\n    this.cdRef.detectChanges();\n  }\n\n}\n\n@ToolComponent({\n  name: 'demo-about',\n  title: 'About',\n  icon: 'information'\n})\n@Component({\n  selector: 'app-about-tool',\n  template: `\n    <p>I'm a tool inside a toolbox.</p>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AppAboutToolComponent {}\n\n@Component({\n  selector: 'app-tool',\n  templateUrl: './tool.component.html',\n  styleUrls: ['./tool.component.scss']\n})\nexport class AppToolComponent implements OnInit, OnDestroy {\n\n  toolbox = new Toolbox();\n\n  get activeTool$(): BehaviorSubject<Tool> {\n    return this.toolbox.activeTool$;\n  }\n\n  get panelTitle(): string {\n    return this.activeTool$.value ? this.activeTool$.value.title : 'Toolbox';\n  }\n\n  constructor(\n    private toolService: ToolService,\n    private languageService: LanguageService\n  ) {}\n\n  ngOnInit() {\n    this.toolbox.setToolbar(['demo-salutation', 'demo-about']);\n    this.toolbox.setTools(this.toolService.getTools());\n  }\n\n  ngOnDestroy() {\n    this.toolbox.destroy();\n  }\n\n  activateSalutationTool() {\n    this.toolbox.activateTool('demo-salutation', {name: 'Bob'});\n  }\n\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef\n} from '@angular/core';\n\nimport { DynamicComponent, OnUpdateInputs, WidgetComponent, WidgetService } from '@igo2/common';\n\n@Component({\n  selector: 'app-salutation-widget',\n  template: `\n    <p>Hello, my name is {{name}}.</p>\n    <button mat-flat-button (click)=\"complete.emit(name)\">Nice to meet you</button>\n    <button mat-flat-button (click)=\"cancel.emit(name)\">Dismiss</button>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AppSalutationWidgetComponent implements OnUpdateInputs, WidgetComponent {\n\n  @Input() name: string;\n\n  @Output() complete = new EventEmitter<string>();\n\n  @Output() cancel = new EventEmitter<string>();\n\n  constructor(private cdRef: ChangeDetectorRef) {}\n\n  onUpdateInputs() {\n    this.cdRef.detectChanges();\n  }\n\n}\n\n@Component({\n  selector: 'app-widget',\n  templateUrl: './widget.component.html',\n  styleUrls: ['./widget.component.scss']\n})\nexport class AppWidgetComponent {\n\n  widget: DynamicComponent<WidgetComponent> = this.widgetService.create(AppSalutationWidgetComponent);\n\n  inputs = {name: 'Bob'};\n\n  constructor(private widgetService: WidgetService) {}\n\n  onWidgetComplete(name: string) {\n    alert(`${name} emitted event 'complete' then got automatically destroyed.`);\n  }\n\n  onWidgetCancel() {\n    alert(`Widget emitted event 'cancel' then got automatically destroyed.`);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoLanguageModule } from '@igo2/core';\nimport { IgoPanelModule, IgoToolModule } from '@igo2/common';\n\nimport {\n  AppToolComponent,\n  AppSalutationToolComponent,\n  AppAboutToolComponent\n} from './tool.component';\nimport { AppToolRoutingModule } from './tool-routing.module';\n\n@NgModule({\n  declarations: [\n    AppToolComponent,\n    AppSalutationToolComponent,\n    AppAboutToolComponent\n  ],\n  imports: [\n    CommonModule,\n    AppToolRoutingModule,\n    MatButtonModule,\n    MatIconModule,\n    MatCardModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoToolModule.forRoot()\n  ],\n  exports: [AppToolComponent],\n  entryComponents: [\n    AppSalutationToolComponent,\n    AppAboutToolComponent\n  ]\n})\nexport class AppToolModule {}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoWidgetModule } from '@igo2/common';\n\nimport {\n  AppSalutationWidgetComponent,\n  AppWidgetComponent\n} from './widget.component';\nimport { AppWidgetRoutingModule } from './widget-routing.module';\n\n@NgModule({\n  declarations: [\n    AppSalutationWidgetComponent,\n    AppWidgetComponent\n  ],\n  imports: [\n    AppWidgetRoutingModule,\n    MatButtonModule,\n    MatCardModule,\n    IgoWidgetModule\n  ],\n  exports: [AppWidgetComponent],\n  entryComponents: [\n    AppSalutationWidgetComponent\n  ]\n})\nexport class AppWidgetModule {}\n","import { ɵɵinject, Injector, ɵɵdefineInjectable, ɵsetClassMetadata, Injectable, Optional, EventEmitter, ɵɵdirectiveInject, ApplicationRef, ɵɵdefineComponent, ɵɵelement, Component, ChangeDetectionStrategy, Output, ɵɵelementStart, ɵɵlistener, ɵɵtext, ɵɵpipe, ɵɵelementEnd, ɵɵadvance, ɵɵtextInterpolate1, ɵɵpipeBind1, Inject, ɵɵgetCurrentView, ɵɵrestoreView, ɵɵnextContext, ɵɵproperty, ɵɵtextInterpolate, ɵɵtemplate, ɵɵpropertyInterpolate, Input, ɵɵpipeBind2, ElementRef, ɵɵdefineDirective, Directive, ɵɵdefineNgModule, ɵɵdefineInjector, ɵɵsetNgModuleScope, NgModule } from '@angular/core';\nimport { Router, NavigationStart, RouterModule } from '@angular/router';\nimport { tap, catchError, filter, takeUntil, map } from 'rxjs/operators';\nimport { ConfigService, LanguageService, MessageService, StorageService, StorageScope, IgoLanguageModule } from '@igo2/core';\nimport { HttpHeaders, HttpClient, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { BehaviorSubject, of, Subject, from } from 'rxjs';\nimport { globalCacheBusterNotifier } from 'ngx-cacheable';\nimport { Base64 } from '@igo2/utils';\nimport jwtDecode from 'jwt-decode';\nimport { Location, NgIf, CommonModule } from '@angular/common';\nimport { __awaiter } from 'tslib';\nimport { MsalBroadcastService, MsalService, MSAL_GUARD_CONFIG, MSAL_INSTANCE, MsalModule } from '@azure/msal-angular';\nimport { PublicClientApplication, InteractionStatus, InteractionRequiredAuthError, WrapperSKU, EventMessageUtils, InteractionType } from '@azure/msal-browser';\nimport { MatButton, MatButtonModule } from '@angular/material/button';\nimport { MatIcon, MatIconModule } from '@angular/material/icon';\nimport { TranslatePipe } from '@ngx-translate/core';\nimport { Validators, FormBuilder, ɵangular_packages_forms_forms_y, NgControlStatusGroup, FormGroupDirective, DefaultValueAccessor, RequiredValidator, NgControlStatus, FormControlName, ReactiveFormsModule } from '@angular/forms';\nimport { MatFormField, MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInput, MatInputModule } from '@angular/material/input';\nimport { Md5 } from 'ts-md5';\n\nclass TokenService {\n    constructor(injector) {\n        this.injector = injector;\n    }\n    set(token) {\n        localStorage.setItem(this.tokenKey, token);\n    }\n    remove() {\n        localStorage.removeItem(this.tokenKey);\n    }\n    get() {\n        return localStorage.getItem(this.tokenKey);\n    }\n    decode() {\n        const token = this.get();\n        if (!token) {\n            return;\n        }\n        return jwtDecode(token);\n    }\n    isExpired() {\n        const jwt = this.decode();\n        const currentTime = new Date().getTime() / 1000;\n        if (jwt && currentTime < jwt.exp) {\n            return false;\n        }\n        return true;\n    }\n    get tokenKey() {\n        const config = this.injector.get(ConfigService);\n        this.options = config.getConfig('auth') || {};\n        return this.options.tokenKey;\n    }\n}\nTokenService.ɵfac = function TokenService_Factory(t) { return new (t || TokenService)(ɵɵinject(Injector)); };\nTokenService.ɵprov = ɵɵdefineInjectable({ token: TokenService, factory: TokenService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(TokenService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: Injector }]; }, null); })();\n\nclass AuthService {\n    constructor(http, tokenService, config, languageService, messageService, router) {\n        this.http = http;\n        this.tokenService = tokenService;\n        this.config = config;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.router = router;\n        this.authenticate$ = new BehaviorSubject(undefined);\n        this.logged$ = new BehaviorSubject(undefined);\n        this.anonymous = false;\n        this.authenticate$.next(this.authenticated);\n        this.authenticate$.subscribe((authenticated) => {\n            this.logged$.next(authenticated);\n            globalCacheBusterNotifier.next();\n        });\n    }\n    get hasAuthService() {\n        return this.config.getConfig('auth.url') !== undefined;\n    }\n    login(username, password) {\n        const myHeader = new HttpHeaders({ 'Content-Type': 'application/json' });\n        const body = {\n            username,\n            password: this.encodePassword(password)\n        };\n        return this.loginCall(body, myHeader);\n    }\n    loginWithToken(token, type, infosUser) {\n        const myHeader = new HttpHeaders({ 'Content-Type': 'application/json' });\n        const body = {\n            token,\n            typeConnection: type,\n            infosUser\n        };\n        return this.loginCall(body, myHeader);\n    }\n    loginAnonymous() {\n        this.anonymous = true;\n        this.logged$.next(true);\n        return of(true);\n    }\n    refresh() {\n        const url = this.config.getConfig('auth.url');\n        return this.http.post(`${url}/refresh`, {}).pipe(tap((data) => {\n            this.tokenService.set(data.token);\n        }), catchError((err) => {\n            err.error.caught = true;\n            throw err;\n        }));\n    }\n    logout() {\n        this.anonymous = false;\n        this.tokenService.remove();\n        this.authenticate$.next(false);\n        return of(true);\n    }\n    isAuthenticated() {\n        return !this.tokenService.isExpired();\n    }\n    getToken() {\n        return this.tokenService.get();\n    }\n    decodeToken() {\n        if (this.isAuthenticated()) {\n            return this.tokenService.decode();\n        }\n        return false;\n    }\n    goToRedirectUrl() {\n        if (!this.router) {\n            return;\n        }\n        const redirectUrl = this.redirectUrl || this.router.url;\n        const options = this.config.getConfig('auth') || {};\n        if (redirectUrl === options.loginRoute) {\n            const homeRoute = options.homeRoute || '/';\n            this.router.navigateByUrl(homeRoute);\n        }\n        else if (redirectUrl) {\n            this.router.navigateByUrl(redirectUrl);\n        }\n    }\n    getUserInfo() {\n        const url = this.config.getConfig('auth.url') + '/info';\n        return this.http.get(url);\n    }\n    getProfils() {\n        const url = this.config.getConfig('auth.url');\n        return this.http.get(`${url}/profils`);\n    }\n    updateUser(user) {\n        const url = this.config.getConfig('auth.url');\n        return this.http.patch(url, user);\n    }\n    encodePassword(password) {\n        return Base64.encode(password);\n    }\n    // authenticated or anonymous\n    get logged() {\n        return this.authenticated || this.isAnonymous;\n    }\n    get isAnonymous() {\n        return this.anonymous;\n    }\n    get authenticated() {\n        return this.isAuthenticated();\n    }\n    get isAdmin() {\n        const token = this.decodeToken();\n        if (token && token.user && token.user.isAdmin) {\n            return true;\n        }\n        return false;\n    }\n    loginCall(body, headers) {\n        const url = this.config.getConfig('auth.url');\n        return this.http.post(`${url}/login`, body, { headers }).pipe(tap((data) => {\n            this.tokenService.set(data.token);\n            const tokenDecoded = this.decodeToken();\n            if (tokenDecoded && tokenDecoded.user) {\n                if (tokenDecoded.user.locale) {\n                    this.languageService.setLanguage(tokenDecoded.user.locale);\n                }\n                if (tokenDecoded.user.isExpired) {\n                    this.languageService.translate\n                        .get('igo.auth.error.Password expired')\n                        .subscribe((expiredAlert) => this.messageService.alert(expiredAlert));\n                }\n            }\n            this.authenticate$.next(true);\n        }), catchError((err) => {\n            err.error.caught = true;\n            throw err;\n        }));\n    }\n}\nAuthService.ɵfac = function AuthService_Factory(t) { return new (t || AuthService)(ɵɵinject(HttpClient), ɵɵinject(TokenService), ɵɵinject(ConfigService), ɵɵinject(LanguageService), ɵɵinject(MessageService), ɵɵinject(Router, 8)); };\nAuthService.ɵprov = ɵɵdefineInjectable({ token: AuthService, factory: AuthService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AuthService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: HttpClient }, { type: TokenService }, { type: ConfigService }, { type: LanguageService }, { type: MessageService }, { type: Router, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\nclass AuthGoogleComponent {\n    constructor(authService, config, languageService, appRef) {\n        this.authService = authService;\n        this.config = config;\n        this.languageService = languageService;\n        this.appRef = appRef;\n        this.login = new EventEmitter();\n        this.options = this.config.getConfig('auth.google') || {};\n        if (this.options.apiKey && this.options.clientId) {\n            this.loadSDKGoogle();\n            this.loadPlatform();\n        }\n        else {\n            console.warn('Google authentification needs \"apiKey\" and \"clientId\" options');\n        }\n    }\n    handleSignInClick() {\n        window.gapi.auth2.getAuthInstance().signIn();\n    }\n    handleSignOutClick() {\n        window.gapi.auth2.getAuthInstance().signOut();\n    }\n    handleClientLoad() {\n        window.gapi.load('client:auth2', () => this.initClient());\n    }\n    initClient() {\n        window.gapi.client\n            .init({\n            apiKey: this.options.apiKey,\n            clientId: this.options.clientId,\n            discoveryDocs: [\n                'https://people.googleapis.com/$discovery/rest?version=v1'\n            ],\n            scope: 'profile'\n        })\n            .then(() => {\n            this.handleSignOutClick();\n            this.updateTextButton();\n            window.gapi.auth2.getAuthInstance().isSignedIn.listen(rep => {\n                this.updateSigninStatus(rep);\n            });\n        });\n    }\n    updateSigninStatus(isSignedIn) {\n        this.updateTextButton();\n        if (isSignedIn) {\n            this.loginGoogle(window.gapi.client.getToken().access_token);\n        }\n    }\n    updateTextButton() {\n        const btn = document.querySelector('span[id^=\"not_signed_\"]');\n        if (btn && this.languageService.getLanguage() !== 'en') {\n            if (btn.innerHTML === 'Sign in with Google') {\n                btn.innerHTML = this.languageService.translate.instant('igo.auth.google.login');\n            }\n            else if (btn.innerHTML === 'Signed in with Google') {\n                btn.innerHTML = this.languageService.translate.instant('igo.auth.google.logged');\n            }\n        }\n    }\n    loginGoogle(token) {\n        this.authService.loginWithToken(token, 'google').subscribe(() => {\n            this.appRef.tick();\n            this.login.emit(true);\n        });\n    }\n    loadSDKGoogle() {\n        const fjs = document.getElementsByTagName('script')[0];\n        const js = document.createElement('script');\n        js.id = 'google-jssdk';\n        js.src = 'https://apis.google.com/js/api.js';\n        js.onload = () => {\n            this.handleClientLoad();\n        };\n        fjs.parentNode.insertBefore(js, fjs);\n    }\n    loadPlatform() {\n        const fjs = document.getElementsByTagName('script')[0];\n        const js = document.createElement('script');\n        js.id = 'google-platform';\n        js.src = 'https://apis.google.com/js/platform.js';\n        fjs.parentNode.insertBefore(js, fjs);\n    }\n}\nAuthGoogleComponent.ɵfac = function AuthGoogleComponent_Factory(t) { return new (t || AuthGoogleComponent)(ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(ConfigService), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(ApplicationRef)); };\nAuthGoogleComponent.ɵcmp = ɵɵdefineComponent({ type: AuthGoogleComponent, selectors: [[\"igo-auth-google\"]], outputs: { login: \"login\" }, decls: 1, vars: 0, consts: [[\"data-height\", \"40\", \"data-width\", \"265\", \"data-longtitle\", \"true\", 1, \"g-signin2\", \"google-login-button\"]], template: function AuthGoogleComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"div\", 0);\n    } }, styles: [\"[_nghost-%COMP%]{display:inline-block;padding:10px 10px 10px 0}.google-login-button[_ngcontent-%COMP%]     .abcRioButton{color:rgba(0,0,0,.87)}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AuthGoogleComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-auth-google',\n                templateUrl: './auth-google.component.html',\n                styleUrls: ['./auth-google.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: AuthService }, { type: ConfigService }, { type: LanguageService }, { type: ApplicationRef }]; }, { login: [{\n            type: Output\n        }] }); })();\n\nclass AuthMicrosoftComponent {\n    constructor(authService, config, appRef, msalService, msalGuardConfig) {\n        this.authService = authService;\n        this.config = config;\n        this.appRef = appRef;\n        this.msalService = msalService;\n        this.msalGuardConfig = msalGuardConfig;\n        this._destroying$ = new Subject();\n        this.login = new EventEmitter();\n        this.options = this.config.getConfig('auth.microsoft') || {};\n        this.msalService.instance = new PublicClientApplication({\n            auth: this.options,\n            cache: {\n                cacheLocation: 'sessionStorage'\n            }\n        });\n        this.broadcastService = new MsalBroadcastService(this.msalService.instance, this.msalService);\n        if (this.options.clientId) {\n            this.broadcastService.inProgress$\n                .pipe(filter((status) => status === InteractionStatus.None), takeUntil(this._destroying$))\n                .subscribe(() => {\n                this.checkAccount();\n            });\n        }\n        else {\n            console.warn('Microsoft authentification needs \"clientId\" option');\n        }\n    }\n    loginMicrosoft() {\n        this.msalService.loginPopup(Object.assign({}, this.getConf().authRequest))\n            .subscribe((response) => {\n            this.msalService.instance.setActiveAccount(response.account);\n            this.checkAccount();\n        });\n    }\n    checkAccount() {\n        this.msalService.instance\n            .acquireTokenSilent(this.getConf().authRequest)\n            .then((response) => {\n            const tokenAccess = response.accessToken;\n            const tokenId = response.idToken;\n            this.authService.loginWithToken(tokenAccess, 'microsoft', { tokenId }).subscribe(() => {\n                this.appRef.tick();\n                this.login.emit(true);\n            });\n        })\n            .catch((error) => __awaiter(this, void 0, void 0, function* () {\n            if (error instanceof InteractionRequiredAuthError) {\n                // fallback to interaction when silent call fails\n                return this.msalService.acquireTokenPopup(this.getConf().authRequest);\n            }\n            console.log(error);\n        })).catch(error => {\n            console.log('Silent token fails');\n        });\n    }\n    getConf() {\n        return this.msalGuardConfig.filter(conf => conf.type === 'add')[0];\n    }\n}\nAuthMicrosoftComponent.ɵfac = function AuthMicrosoftComponent_Factory(t) { return new (t || AuthMicrosoftComponent)(ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(ConfigService), ɵɵdirectiveInject(ApplicationRef), ɵɵdirectiveInject(MsalService), ɵɵdirectiveInject(MSAL_GUARD_CONFIG)); };\nAuthMicrosoftComponent.ɵcmp = ɵɵdefineComponent({ type: AuthMicrosoftComponent, selectors: [[\"igo-auth-microsoft\"]], outputs: { login: \"login\" }, decls: 4, vars: 3, consts: [[\"mat-raised-button\", \"\", 1, \"microsoft-login-button\", 3, \"click\"], [\"svgIcon\", \"microsoft\"]], template: function AuthMicrosoftComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"button\", 0);\n        ɵɵlistener(\"click\", function AuthMicrosoftComponent_Template_button_click_0_listener() { return ctx.loginMicrosoft(); });\n        ɵɵelement(1, \"mat-icon\", 1);\n        ɵɵtext(2);\n        ɵɵpipe(3, \"translate\");\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(2);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(3, 1, \"igo.auth.microsoft.login\"), \"\\n\");\n    } }, directives: [MatButton, MatIcon], pipes: [TranslatePipe], styles: [\"[_nghost-%COMP%]{display:inline-block;padding:10px 10px 10px 0;position:relative;top:-15px}[_nghost-%COMP%] > button[_ngcontent-%COMP%]{font-size:15px;height:40px;width:265px}mat-icon[_ngcontent-%COMP%]{margin-right:10px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AuthMicrosoftComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-auth-microsoft',\n                templateUrl: './auth-microsoft.component.html',\n                styleUrls: ['./auth-microsoft.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: AuthService }, { type: ConfigService }, { type: ApplicationRef }, { type: MsalService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [MSAL_GUARD_CONFIG]\n            }] }]; }, { login: [{\n            type: Output\n        }] }); })();\n\n/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\nclass MsalServiceb2c {\n    constructor(instance, location) {\n        this.instance = instance;\n        this.location = location;\n        this.name = '@azure/msal-angular';\n        this.version = '2.0.0-beta.2';\n        const hash = this.location.path(true).split('#').pop();\n        if (hash) {\n            this.redirectHash = `#${hash}`;\n        }\n        this.instance.initializeWrapperLibrary(WrapperSKU.Angular, this.version);\n    }\n    acquireTokenPopup(request) {\n        return from(this.instance.acquireTokenPopup(request));\n    }\n    acquireTokenRedirect(request) {\n        return from(this.instance.acquireTokenRedirect(request));\n    }\n    acquireTokenSilent(silentRequest) {\n        return from(this.instance.acquireTokenSilent(silentRequest));\n    }\n    handleRedirectObservable(hash) {\n        return from(this.instance.handleRedirectPromise(hash || this.redirectHash));\n    }\n    loginPopup(request) {\n        return from(this.instance.loginPopup(request));\n    }\n    loginRedirect(request) {\n        return from(this.instance.loginRedirect(request));\n    }\n    logout(logoutRequest) {\n        return from(this.instance.logout(logoutRequest));\n    }\n    logoutRedirect(logoutRequest) {\n        return from(this.instance.logoutRedirect(logoutRequest));\n    }\n    logoutPopup(logoutRequest) {\n        return from(this.instance.logoutPopup(logoutRequest));\n    }\n    ssoSilent(request) {\n        return from(this.instance.ssoSilent(request));\n    }\n    /**\n     * Gets logger for msal-angular.\n     * If no logger set, returns logger instance created with same options as msal-browser\n     */\n    getLogger() {\n        if (!this.logger) {\n            this.logger = this.instance.getLogger().clone(this.name, this.version);\n        }\n        return this.logger;\n    }\n    // Create a logger instance for msal-angular with the same options as msal-browser\n    setLogger(logger) {\n        this.logger = logger.clone(this.name, this.version);\n        this.instance.setLogger(logger);\n    }\n}\nMsalServiceb2c.ɵfac = function MsalServiceb2c_Factory(t) { return new (t || MsalServiceb2c)(ɵɵinject(MSAL_INSTANCE), ɵɵinject(Location)); };\nMsalServiceb2c.ɵprov = ɵɵdefineInjectable({ token: MsalServiceb2c, factory: MsalServiceb2c.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MsalServiceb2c, [{\n        type: Injectable\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [MSAL_INSTANCE]\n            }] }, { type: Location }]; }, null); })();\n\n/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\nclass MsalBroadcastServiceb2c {\n    constructor(msalInstance, authService) {\n        this.msalInstance = msalInstance;\n        this.authService = authService;\n        this._msalSubject = new Subject();\n        this.msalSubject$ = this._msalSubject.asObservable();\n        // InProgress as BehaviorSubject so most recent inProgress state will be available upon subscription\n        this._inProgress = new BehaviorSubject(InteractionStatus.Startup);\n        this.inProgress$ = this._inProgress.asObservable();\n        this.msalInstance.addEventCallback((message) => {\n            this._msalSubject.next(message);\n            const status = EventMessageUtils.getInteractionStatusFromEvent(message);\n            if (status !== null) {\n                this.authService.getLogger().verbose(`BroadcastService - ${message.eventType} results in setting inProgress to ${status}`);\n                this._inProgress.next(status);\n            }\n        });\n    }\n}\nMsalBroadcastServiceb2c.ɵfac = function MsalBroadcastServiceb2c_Factory(t) { return new (t || MsalBroadcastServiceb2c)(ɵɵinject(MSAL_INSTANCE), ɵɵinject(MsalServiceb2c)); };\nMsalBroadcastServiceb2c.ɵprov = ɵɵdefineInjectable({ token: MsalBroadcastServiceb2c, factory: MsalBroadcastServiceb2c.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MsalBroadcastServiceb2c, [{\n        type: Injectable\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [MSAL_INSTANCE]\n            }] }, { type: MsalServiceb2c }]; }, null); })();\n\nclass AuthMicrosoftb2cComponent {\n    constructor(authService, config, appRef, msalService, msalGuardConfig) {\n        this.authService = authService;\n        this.config = config;\n        this.appRef = appRef;\n        this.msalService = msalService;\n        this.msalGuardConfig = msalGuardConfig;\n        this._destroying$ = new Subject();\n        this.login = new EventEmitter();\n        this.options = this.config.getConfig('auth.microsoftb2c') || {};\n        this.msalService.instance = new PublicClientApplication({\n            auth: this.options.browserAuthOptions,\n            cache: {\n                cacheLocation: 'sessionStorage'\n            }\n        });\n        this.broadcastService = new MsalBroadcastServiceb2c(this.msalService.instance, this.msalService);\n        if (this.options.browserAuthOptions.clientId) {\n            this.broadcastService.inProgress$\n                .pipe(filter((status) => status === InteractionStatus.None), takeUntil(this._destroying$))\n                .subscribe(() => {\n                this.checkAccount();\n            });\n        }\n        else {\n            console.warn('Microsoft authentification needs \"clientId\" option');\n        }\n    }\n    loginMicrosoftb2c() {\n        this.msalService.loginPopup(Object.assign({}, this.getConf().authRequest))\n            .subscribe((response) => {\n            this.msalService.instance.setActiveAccount(response.account);\n            this.checkAccount();\n        });\n    }\n    checkAccount() {\n        this.msalService.instance\n            .acquireTokenSilent(this.getConf().authRequest)\n            .then((response) => {\n            const token = response.idToken;\n            this.authService.loginWithToken(token, 'microsoftb2c').subscribe(() => {\n                this.appRef.tick();\n                this.login.emit(true);\n            });\n        })\n            .catch((error) => __awaiter(this, void 0, void 0, function* () {\n            if (error instanceof InteractionRequiredAuthError) {\n                // fallback to interaction when silent call fails\n                return this.msalService.acquireTokenPopup(this.getConf().authRequest);\n            }\n        })).catch(error => {\n            console.log('Silent token fails');\n        });\n    }\n    getConf() {\n        return this.msalGuardConfig.filter(conf => conf.type === 'b2c')[0];\n    }\n}\nAuthMicrosoftb2cComponent.ɵfac = function AuthMicrosoftb2cComponent_Factory(t) { return new (t || AuthMicrosoftb2cComponent)(ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(ConfigService), ɵɵdirectiveInject(ApplicationRef), ɵɵdirectiveInject(MsalServiceb2c), ɵɵdirectiveInject(MSAL_GUARD_CONFIG)); };\nAuthMicrosoftb2cComponent.ɵcmp = ɵɵdefineComponent({ type: AuthMicrosoftb2cComponent, selectors: [[\"igo-auth-microsoftb2c\"]], outputs: { login: \"login\" }, decls: 4, vars: 3, consts: [[\"mat-raised-button\", \"\", 1, \"microsoft-login-button\", 3, \"click\"], [\"svgIcon\", \"microsoft\"]], template: function AuthMicrosoftb2cComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"button\", 0);\n        ɵɵlistener(\"click\", function AuthMicrosoftb2cComponent_Template_button_click_0_listener() { return ctx.loginMicrosoftb2c(); });\n        ɵɵelement(1, \"mat-icon\", 1);\n        ɵɵtext(2);\n        ɵɵpipe(3, \"translate\");\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(2);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(3, 1, \"igo.auth.microsoftb2c.login\"), \"\\n\");\n    } }, directives: [MatButton, MatIcon], pipes: [TranslatePipe], styles: [\"[_nghost-%COMP%]{display:inline-block;padding:10px 10px 10px 0;position:relative;top:-15px}[_nghost-%COMP%] > button[_ngcontent-%COMP%]{font-size:15px;height:40px;width:265px}mat-icon[_ngcontent-%COMP%]{margin-right:10px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AuthMicrosoftb2cComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-auth-microsoftb2c',\n                templateUrl: './auth-microsoftb2c.component.html',\n                styleUrls: ['./auth-microsoftb2c.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: AuthService }, { type: ConfigService }, { type: ApplicationRef }, { type: MsalServiceb2c }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [MSAL_GUARD_CONFIG]\n            }] }]; }, { login: [{\n            type: Output\n        }] }); })();\n\nclass AuthFacebookComponent {\n    constructor(authService, config, appRef) {\n        this.authService = authService;\n        this.config = config;\n        this.appRef = appRef;\n        this.login = new EventEmitter();\n        this.options = this.config.getConfig('auth.facebook') || {};\n        if (this.options.appId) {\n            this.loadSDKFacebook();\n        }\n        else {\n            console.warn('Facebook authentification needs \"appId\" option');\n        }\n    }\n    subscribeEvents() {\n        window.FB.Event.subscribe('auth.statusChange', rep => {\n            this.statusChangeCallback(rep);\n        });\n    }\n    statusChangeCallback(response) {\n        if (response.status === 'connected') {\n            const accessToken = response.authResponse.accessToken;\n            this.loginFacebook(accessToken);\n        }\n    }\n    loginFacebook(token) {\n        this.authService.loginWithToken(token, 'facebook').subscribe(() => {\n            this.appRef.tick();\n            this.login.emit(true);\n        });\n    }\n    loadSDKFacebook() {\n        if (document.getElementById('facebook-jssdk')) {\n            return;\n        }\n        const urlSDK = 'https://connect.facebook.net/fr_CA/sdk.js#xfbml=1&version=v2.9';\n        const fjs = document.getElementsByTagName('script')[0];\n        const js = document.createElement('script');\n        js.id = 'facebook-jssdk';\n        js.src = `${urlSDK}&appId=${this.options.appId}`;\n        js.onload = () => {\n            this.subscribeEvents();\n        };\n        fjs.parentNode.insertBefore(js, fjs);\n    }\n}\nAuthFacebookComponent.ɵfac = function AuthFacebookComponent_Factory(t) { return new (t || AuthFacebookComponent)(ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(ConfigService), ɵɵdirectiveInject(ApplicationRef)); };\nAuthFacebookComponent.ɵcmp = ɵɵdefineComponent({ type: AuthFacebookComponent, selectors: [[\"igo-auth-facebook\"]], outputs: { login: \"login\" }, decls: 1, vars: 0, consts: [[\"scope\", \"public_profile,email\", \"data-max-rows\", \"1\", \"data-size\", \"large\", \"data-button-type\", \"login_with\", \"data-show-faces\", \"false\", \"data-auto-logout-link\", \"false\", \"data-use-continue-as\", \"false\", 1, \"fb-login-button\"]], template: function AuthFacebookComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"div\", 0);\n    } }, styles: [\"[_nghost-%COMP%]{display:inline-block;padding:10px 10px 10px 0;position:relative;top:-3px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AuthFacebookComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-auth-facebook',\n                templateUrl: './auth-facebook.component.html',\n                styleUrls: ['./auth-facebook.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: AuthService }, { type: ConfigService }, { type: ApplicationRef }]; }, { login: [{\n            type: Output\n        }] }); })();\n\nfunction AuthInternComponent_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 7);\n    ɵɵlistener(\"click\", function AuthInternComponent_button_12_Template_button_click_0_listener() { ɵɵrestoreView(_r3); const ctx_r2 = ɵɵnextContext(); return ctx_r2.loginAnonymous(); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"disabled\", ctx_r0.loading);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.auth.accessAnonymous\"), \" \");\n} }\nfunction AuthInternComponent_div_13_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\");\n    ɵɵelement(1, \"br\");\n    ɵɵelementStart(2, \"font\", 8);\n    ɵɵtext(3);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(3);\n    ɵɵtextInterpolate(ctx_r1.error);\n} }\nclass AuthInternComponent {\n    constructor(auth, languageService, fb) {\n        this.auth = auth;\n        this.languageService = languageService;\n        this._allowAnonymous = true;\n        this.error = '';\n        this.loading = false;\n        this.login = new EventEmitter();\n        this.form = fb.group({\n            username: ['', Validators.required],\n            password: ['', Validators.required]\n        });\n    }\n    get allowAnonymous() {\n        return this._allowAnonymous;\n    }\n    set allowAnonymous(value) {\n        this._allowAnonymous = value;\n    }\n    loginUser(values) {\n        this.loading = true;\n        this.auth.login(values.username, values.password).subscribe(() => {\n            this.login.emit(true);\n            this.loading = false;\n        }, (error) => {\n            try {\n                this.languageService.translate\n                    .get('igo.auth.error.' + error.error.message)\n                    .subscribe(errorMsg => (this.error = errorMsg));\n            }\n            catch (e) {\n                this.error = error.error.message;\n            }\n            this.loading = false;\n        });\n        return false;\n    }\n    loginAnonymous() {\n        this.auth.loginAnonymous().subscribe(() => {\n            this.login.emit(true);\n        });\n    }\n}\nAuthInternComponent.ɵfac = function AuthInternComponent_Factory(t) { return new (t || AuthInternComponent)(ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(FormBuilder)); };\nAuthInternComponent.ɵcmp = ɵɵdefineComponent({ type: AuthInternComponent, selectors: [[\"igo-auth-intern\"]], inputs: { allowAnonymous: \"allowAnonymous\" }, outputs: { login: \"login\" }, decls: 14, vars: 13, consts: [[\"role\", \"form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"full-width\"], [\"matInput\", \"\", \"required\", \"\", \"formControlName\", \"username\", 3, \"placeholder\"], [\"matInput\", \"\", \"required\", \"\", \"type\", \"password\", \"formControlName\", \"password\", 3, \"placeholder\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", 3, \"disabled\"], [\"mat-raised-button\", \"\", \"class\", \"anonymous\", \"type\", \"button\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 1, \"anonymous\", 3, \"disabled\", \"click\"], [\"size\", \"3\", \"color\", \"red\"]], template: function AuthInternComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"form\", 0);\n        ɵɵlistener(\"ngSubmit\", function AuthInternComponent_Template_form_ngSubmit_0_listener() { return ctx.loginUser(ctx.form.value); });\n        ɵɵelementStart(1, \"div\");\n        ɵɵelementStart(2, \"mat-form-field\", 1);\n        ɵɵelement(3, \"input\", 2);\n        ɵɵpipe(4, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(5, \"div\");\n        ɵɵelementStart(6, \"mat-form-field\", 1);\n        ɵɵelement(7, \"input\", 3);\n        ɵɵpipe(8, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(9, \"button\", 4);\n        ɵɵtext(10);\n        ɵɵpipe(11, \"translate\");\n        ɵɵelementEnd();\n        ɵɵtemplate(12, AuthInternComponent_button_12_Template, 3, 4, \"button\", 5);\n        ɵɵtemplate(13, AuthInternComponent_div_13_Template, 4, 1, \"div\", 6);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"formGroup\", ctx.form);\n        ɵɵadvance(3);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(4, 7, \"igo.auth.user\"));\n        ɵɵadvance(4);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(8, 9, \"igo.auth.password\"));\n        ɵɵadvance(2);\n        ɵɵproperty(\"disabled\", !ctx.form.valid || ctx.loading);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate(ɵɵpipeBind1(11, 11, \"igo.auth.login\"));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ctx.allowAnonymous);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.error);\n    } }, directives: [ɵangular_packages_forms_forms_y, NgControlStatusGroup, FormGroupDirective, MatFormField, MatInput, DefaultValueAccessor, RequiredValidator, NgControlStatus, FormControlName, MatButton, NgIf], pipes: [TranslatePipe], styles: [\".full-width[_ngcontent-%COMP%]{width:100%}.anonymous[_ngcontent-%COMP%]{margin-left:10px}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AuthInternComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-auth-intern',\n                templateUrl: './auth-intern.component.html',\n                styleUrls: ['./auth-intern.component.scss'],\n                changeDetection: ChangeDetectionStrategy.Default\n            }]\n    }], function () { return [{ type: AuthService }, { type: LanguageService }, { type: FormBuilder }]; }, { allowAnonymous: [{\n            type: Input\n        }], login: [{\n            type: Output\n        }] }); })();\n\nfunction AuthFormComponent_div_0_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"div\", 3);\n} }\nfunction AuthFormComponent_div_0_div_2_igo_auth_google_4_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-auth-google\", 7);\n    ɵɵlistener(\"login\", function AuthFormComponent_div_0_div_2_igo_auth_google_4_Template_igo_auth_google_login_0_listener() { ɵɵrestoreView(_r11); const ctx_r10 = ɵɵnextContext(3); return ctx_r10.onLogin(); });\n    ɵɵelementEnd();\n} }\nfunction AuthFormComponent_div_0_div_2_igo_auth_microsoft_5_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-auth-microsoft\", 7);\n    ɵɵlistener(\"login\", function AuthFormComponent_div_0_div_2_igo_auth_microsoft_5_Template_igo_auth_microsoft_login_0_listener() { ɵɵrestoreView(_r13); const ctx_r12 = ɵɵnextContext(3); return ctx_r12.onLogin(); });\n    ɵɵelementEnd();\n} }\nfunction AuthFormComponent_div_0_div_2_igo_auth_microsoftb2c_6_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-auth-microsoftb2c\", 7);\n    ɵɵlistener(\"login\", function AuthFormComponent_div_0_div_2_igo_auth_microsoftb2c_6_Template_igo_auth_microsoftb2c_login_0_listener() { ɵɵrestoreView(_r15); const ctx_r14 = ɵɵnextContext(3); return ctx_r14.onLogin(); });\n    ɵɵelementEnd();\n} }\nfunction AuthFormComponent_div_0_div_2_igo_auth_facebook_7_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-auth-facebook\", 7);\n    ɵɵlistener(\"login\", function AuthFormComponent_div_0_div_2_igo_auth_facebook_7_Template_igo_auth_facebook_login_0_listener() { ɵɵrestoreView(_r17); const ctx_r16 = ɵɵnextContext(3); return ctx_r16.onLogin(); });\n    ɵɵelementEnd();\n} }\nfunction AuthFormComponent_div_0_div_2_igo_auth_intern_8_Template(rf, ctx) { if (rf & 1) {\n    const _r19 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-auth-intern\", 8);\n    ɵɵlistener(\"login\", function AuthFormComponent_div_0_div_2_igo_auth_intern_8_Template_igo_auth_intern_login_0_listener() { ɵɵrestoreView(_r19); const ctx_r18 = ɵɵnextContext(3); return ctx_r18.onLogin(); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r9 = ɵɵnextContext(3);\n    ɵɵproperty(\"allowAnonymous\", ctx_r9.options.allowAnonymous);\n} }\nfunction AuthFormComponent_div_0_div_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 4);\n    ɵɵelementStart(1, \"h1\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵtemplate(4, AuthFormComponent_div_0_div_2_igo_auth_google_4_Template, 1, 0, \"igo-auth-google\", 5);\n    ɵɵtemplate(5, AuthFormComponent_div_0_div_2_igo_auth_microsoft_5_Template, 1, 0, \"igo-auth-microsoft\", 5);\n    ɵɵtemplate(6, AuthFormComponent_div_0_div_2_igo_auth_microsoftb2c_6_Template, 1, 0, \"igo-auth-microsoftb2c\", 5);\n    ɵɵtemplate(7, AuthFormComponent_div_0_div_2_igo_auth_facebook_7_Template, 1, 0, \"igo-auth-facebook\", 5);\n    ɵɵtemplate(8, AuthFormComponent_div_0_div_2_igo_auth_intern_8_Template, 1, 1, \"igo-auth-intern\", 6);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(3, 6, \"igo.auth.connection\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r2.options.google && ctx_r2.options.google.enabled !== false);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r2.options.microsoft && ctx_r2.options.microsoft.enabled !== false);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r2.options.microsoftb2c && ctx_r2.options.microsoftb2c.enabled !== false);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r2.options.facebook && ctx_r2.options.facebook.enabled !== false);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r2.options.intern || ctx_r2.options.intern.enabled !== false);\n} }\nfunction AuthFormComponent_div_0_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r21 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 4);\n    ɵɵelementStart(1, \"p\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"button\", 9);\n    ɵɵlistener(\"click\", function AuthFormComponent_div_0_div_3_Template_button_click_4_listener() { ɵɵrestoreView(_r21); const ctx_r20 = ɵɵnextContext(2); return ctx_r20.logout(); });\n    ɵɵtext(5);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind2(3, 2, \"igo.auth.welcome\", ctx_r3.user));\n    ɵɵadvance(3);\n    ɵɵtextInterpolate(ɵɵpipeBind1(6, 5, \"igo.auth.signOut\"));\n} }\nfunction AuthFormComponent_div_0_div_4_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 9);\n    ɵɵlistener(\"click\", function AuthFormComponent_div_0_div_4_button_4_Template_button_click_0_listener() { ɵɵrestoreView(_r24); const ctx_r23 = ɵɵnextContext(3); return ctx_r23.home(); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ɵɵpipeBind1(2, 1, \"igo.auth.home\"));\n} }\nfunction AuthFormComponent_div_0_div_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 4);\n    ɵɵelementStart(1, \"p\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵtemplate(4, AuthFormComponent_div_0_div_4_button_4_Template, 3, 3, \"button\", 10);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(3, 2, \"igo.auth.deconnection\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r4.options.homeRoute);\n} }\nfunction AuthFormComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\");\n    ɵɵtemplate(1, AuthFormComponent_div_0_div_1_Template, 1, 0, \"div\", 1);\n    ɵɵtemplate(2, AuthFormComponent_div_0_div_2_Template, 9, 8, \"div\", 2);\n    ɵɵtemplate(3, AuthFormComponent_div_0_div_3_Template, 7, 7, \"div\", 2);\n    ɵɵtemplate(4, AuthFormComponent_div_0_div_4_Template, 5, 4, \"div\", 2);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r0.auth.logged && ctx_r0.backgroundDisable);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r0.auth.logged && ctx_r0.showLoginDiv);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.auth.logged && ctx_r0.showAlreadyConnectedDiv);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.showLogoutDiv);\n} }\nclass AuthFormComponent {\n    constructor(auth, config, router) {\n        this.auth = auth;\n        this.config = config;\n        this.router = router;\n        this._backgroundDisable = true;\n        this._hasAlreadyConnectedDiv = true;\n        this._hasLogoutDiv = true;\n        this._showAlreadyConnectedDiv = false;\n        this._showLogoutDiv = false;\n        this.login = new EventEmitter();\n        this.visible = true;\n        this.options = this.config.getConfig('auth') || {};\n        this.visible = Object.getOwnPropertyNames(this.options).length !== 0;\n    }\n    get backgroundDisable() {\n        if (this.isLogoutRoute || this.isLogoutRoute) {\n            return false;\n        }\n        return this._backgroundDisable;\n    }\n    set backgroundDisable(value) {\n        this._backgroundDisable = value.toString() === 'true';\n    }\n    get hasAlreadyConnectedDiv() {\n        return this._hasAlreadyConnectedDiv;\n    }\n    set hasAlreadyConnectedDiv(value) {\n        this._hasAlreadyConnectedDiv = value.toString() === 'true';\n    }\n    get hasLogoutDiv() {\n        return this._hasLogoutDiv;\n    }\n    set hasLogoutDiv(value) {\n        this._hasLogoutDiv = value.toString() === 'true';\n    }\n    get showAlreadyConnectedDiv() {\n        if (this.isLogoutRoute) {\n            return this.hasAlreadyConnectedDiv;\n        }\n        return this._showAlreadyConnectedDiv;\n    }\n    set showAlreadyConnectedDiv(value) {\n        this._showAlreadyConnectedDiv = value.toString() === 'true';\n    }\n    get showLogoutDiv() {\n        if (this.isLogoutRoute) {\n            return this.hasLogoutDiv;\n        }\n        return this._showLogoutDiv;\n    }\n    set showLogoutDiv(value) {\n        this._showLogoutDiv = value.toString() === 'true';\n    }\n    get showLoginDiv() {\n        if (!this.isLogoutRoute) {\n            return true;\n        }\n    }\n    ngOnInit() {\n        this.analyzeRoute();\n        this.getName();\n    }\n    onLogin() {\n        this.auth.goToRedirectUrl();\n        this.getName();\n        this.login.emit(true);\n    }\n    logout() {\n        this.auth.logout().subscribe(() => {\n            this.user = undefined;\n            if (this.router) {\n                if (this.options.logoutRoute) {\n                    this.router.navigate([this.options.logoutRoute]);\n                }\n                else if (this.options.homeRoute) {\n                    this.router.navigate([this.options.homeRoute]);\n                }\n            }\n        });\n    }\n    home() {\n        if (this.router && this.options.homeRoute) {\n            this.router.navigate([this.options.homeRoute]);\n        }\n    }\n    getName() {\n        const tokenDecoded = this.auth.decodeToken();\n        if (tokenDecoded) {\n            this.user = {\n                name: tokenDecoded.user.firstName || tokenDecoded.user.sourceId\n            };\n        }\n    }\n    analyzeRoute() {\n        if (!this.router) {\n            return;\n        }\n        this.router.events\n            .pipe(filter((event) => event instanceof NavigationStart))\n            .subscribe((changeEvent) => {\n            if (changeEvent.url) {\n                const currentRoute = changeEvent.url;\n                const logoutRoute = this.options.logoutRoute;\n                const loginRoute = this.options.loginRoute;\n                this.isLogoutRoute = currentRoute === logoutRoute;\n                this.isLoginRoute = currentRoute === loginRoute;\n                if (this.isLogoutRoute) {\n                    this.auth.logout();\n                }\n            }\n        });\n    }\n}\nAuthFormComponent.ɵfac = function AuthFormComponent_Factory(t) { return new (t || AuthFormComponent)(ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(ConfigService), ɵɵdirectiveInject(Router, 8)); };\nAuthFormComponent.ɵcmp = ɵɵdefineComponent({ type: AuthFormComponent, selectors: [[\"igo-auth-form\"]], inputs: { backgroundDisable: \"backgroundDisable\", hasAlreadyConnectedDiv: \"hasAlreadyConnectedDiv\", hasLogoutDiv: \"hasLogoutDiv\", showAlreadyConnectedDiv: \"showAlreadyConnectedDiv\", showLogoutDiv: \"showLogoutDiv\" }, outputs: { login: \"login\" }, decls: 1, vars: 1, consts: [[4, \"ngIf\"], [\"class\", \"backgroundDisable\", 4, \"ngIf\"], [\"class\", \"login center-block\", 4, \"ngIf\"], [1, \"backgroundDisable\"], [1, \"login\", \"center-block\"], [3, \"login\", 4, \"ngIf\"], [3, \"allowAnonymous\", \"login\", 4, \"ngIf\"], [3, \"login\"], [3, \"allowAnonymous\", \"login\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 3, \"click\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 3, \"click\", 4, \"ngIf\"]], template: function AuthFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, AuthFormComponent_div_0_Template, 5, 4, \"div\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.visible);\n    } }, directives: [NgIf, AuthGoogleComponent, AuthMicrosoftComponent, AuthMicrosoftb2cComponent, AuthFacebookComponent, AuthInternComponent, MatButton], pipes: [TranslatePipe], styles: [\"[_nghost-%COMP%]{z-index:999}div.login[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #888;max-width:600px;min-width:360px;padding:25px 50px;width:90%;z-index:200}.center-block[_ngcontent-%COMP%]{left:50%;position:fixed;top:20%;transform:translate(-50%)}.backgroundDisable[_ngcontent-%COMP%]{background:#000;height:100%;left:0;opacity:.8;position:fixed;top:0;width:100%;z-index:100}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AuthFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-auth-form',\n                templateUrl: './auth-form.component.html',\n                styleUrls: ['./auth-form.component.scss'],\n                changeDetection: ChangeDetectionStrategy.Default\n            }]\n    }], function () { return [{ type: AuthService }, { type: ConfigService }, { type: Router, decorators: [{\n                type: Optional\n            }] }]; }, { backgroundDisable: [{\n            type: Input\n        }], hasAlreadyConnectedDiv: [{\n            type: Input\n        }], hasLogoutDiv: [{\n            type: Input\n        }], showAlreadyConnectedDiv: [{\n            type: Input\n        }], showLogoutDiv: [{\n            type: Input\n        }], login: [{\n            type: Output\n        }] }); })();\n\nclass LoggedGuard {\n    constructor(authService, config, router) {\n        this.authService = authService;\n        this.config = config;\n        this.router = router;\n    }\n    canActivate(route, state) {\n        if (this.authService.logged) {\n            return true;\n        }\n        this.authService.redirectUrl = state.url;\n        const authConfig = this.config.getConfig('auth');\n        if (authConfig && authConfig.loginRoute) {\n            this.router.navigateByUrl(authConfig.loginRoute);\n        }\n        return false;\n    }\n}\nLoggedGuard.ɵfac = function LoggedGuard_Factory(t) { return new (t || LoggedGuard)(ɵɵinject(AuthService), ɵɵinject(ConfigService), ɵɵinject(Router)); };\nLoggedGuard.ɵprov = ɵɵdefineInjectable({ token: LoggedGuard, factory: LoggedGuard.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LoggedGuard, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: AuthService }, { type: ConfigService }, { type: Router }]; }, null); })();\n\nclass AuthGuard {\n    constructor(authService, config, router) {\n        this.authService = authService;\n        this.config = config;\n        this.router = router;\n    }\n    canActivate(route, state) {\n        if (this.authService.authenticated) {\n            return true;\n        }\n        this.authService.redirectUrl = state.url;\n        const authConfig = this.config.getConfig('auth');\n        if (authConfig && authConfig.loginRoute) {\n            this.router.navigateByUrl(authConfig.loginRoute);\n        }\n        return false;\n    }\n}\nAuthGuard.ɵfac = function AuthGuard_Factory(t) { return new (t || AuthGuard)(ɵɵinject(AuthService), ɵɵinject(ConfigService), ɵɵinject(Router)); };\nAuthGuard.ɵprov = ɵɵdefineInjectable({ token: AuthGuard, factory: AuthGuard.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AuthGuard, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: AuthService }, { type: ConfigService }, { type: Router }]; }, null); })();\n\nclass AdminGuard {\n    constructor(authService, config, router) {\n        this.authService = authService;\n        this.config = config;\n        this.router = router;\n    }\n    canActivate(route, state) {\n        const token = this.authService.decodeToken();\n        if (token && token.user && token.user.isAdmin) {\n            return true;\n        }\n        this.authService.redirectUrl = state.url;\n        const authConfig = this.config.getConfig('auth');\n        if (authConfig && authConfig.loginRoute) {\n            this.router.navigateByUrl(authConfig.loginRoute);\n        }\n        return false;\n    }\n}\nAdminGuard.ɵfac = function AdminGuard_Factory(t) { return new (t || AdminGuard)(ɵɵinject(AuthService), ɵɵinject(ConfigService), ɵɵinject(Router)); };\nAdminGuard.ɵprov = ɵɵdefineInjectable({ token: AdminGuard, factory: AdminGuard.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AdminGuard, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: AuthService }, { type: ConfigService }, { type: Router }]; }, null); })();\n\nclass ProfilsGuard {\n    constructor(authService, config, router) {\n        this.authService = authService;\n        this.config = config;\n        this.router = router;\n    }\n    canActivate(_route, state) {\n        return this.authService.getProfils().pipe(map((profils) => {\n            const authConfig = this.config.getConfig('auth');\n            if (profils &&\n                profils.profils &&\n                profils.profils.some(v => authConfig.profilsGuard.indexOf(v) !== -1)) {\n                return true;\n            }\n            this.authService.redirectUrl = state.url;\n            if (authConfig && authConfig.loginRoute) {\n                this.router.navigateByUrl(authConfig.loginRoute);\n            }\n            return false;\n        }));\n    }\n}\nProfilsGuard.ɵfac = function ProfilsGuard_Factory(t) { return new (t || ProfilsGuard)(ɵɵinject(AuthService), ɵɵinject(ConfigService), ɵɵinject(Router)); };\nProfilsGuard.ɵprov = ɵɵdefineInjectable({ token: ProfilsGuard, factory: ProfilsGuard.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ProfilsGuard, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: AuthService }, { type: ConfigService }, { type: Router }]; }, null); })();\n\nclass AuthInterceptor {\n    constructor(config, tokenService, http) {\n        this.config = config;\n        this.tokenService = tokenService;\n        this.http = http;\n        this.refreshInProgress = false;\n    }\n    get trustHosts() {\n        const trustHosts = this.config.getConfig('auth.trustHosts') || [];\n        trustHosts.push(window.location.hostname);\n        return trustHosts;\n    }\n    get hostsWithCredentials() {\n        return this.config.getConfig('auth.hostsWithCredentials') || [];\n    }\n    intercept(originalReq, next) {\n        const withCredentials = this.handleHostsWithCredentials(originalReq.url);\n        let req = originalReq.clone();\n        if (withCredentials) {\n            req = originalReq.clone({\n                withCredentials\n            });\n        }\n        this.refreshToken();\n        const token = this.tokenService.get();\n        const element = document.createElement('a');\n        element.href = req.url;\n        if (element.host === '') {\n            element.href = element.href; // FIX IE11, DO NOT REMOVE\n        }\n        if (!token || this.trustHosts.indexOf(element.hostname) === -1) {\n            return next.handle(req);\n        }\n        const authHeader = `Bearer ${token}`;\n        let authReq = req.clone({\n            headers: req.headers.set('Authorization', authHeader)\n        });\n        const tokenDecoded = this.tokenService.decode();\n        if (authReq.params.get('_i') === 'true' &&\n            tokenDecoded &&\n            tokenDecoded.user &&\n            tokenDecoded.user.sourceId) {\n            const hashUser = Md5.hashStr(tokenDecoded.user.sourceId);\n            authReq = authReq.clone({\n                params: authReq.params.set('_i', hashUser)\n            });\n        }\n        else if (authReq.params.get('_i') === 'true') {\n            authReq = authReq.clone({\n                params: authReq.params.delete('_i')\n            });\n        }\n        return next.handle(authReq);\n    }\n    interceptXhr(xhr, url) {\n        const withCredentials = this.handleHostsWithCredentials(url);\n        if (withCredentials) {\n            xhr.withCredentials = withCredentials;\n            return true;\n        }\n        this.refreshToken();\n        const element = document.createElement('a');\n        element.href = url;\n        const token = this.tokenService.get();\n        if (!token || this.trustHosts.indexOf(element.hostname) === -1) {\n            return false;\n        }\n        xhr.setRequestHeader('Authorization', 'Bearer ' + token);\n        return true;\n    }\n    handleHostsWithCredentials(reqUrl) {\n        let withCredentials = false;\n        for (const hostWithCredentials of this.hostsWithCredentials) {\n            const domainRegex = new RegExp(hostWithCredentials.domainRegFilters);\n            if (domainRegex.test(reqUrl)) {\n                withCredentials = hostWithCredentials.withCredentials !== undefined ? hostWithCredentials.withCredentials : undefined;\n                break;\n            }\n        }\n        return withCredentials;\n    }\n    refreshToken() {\n        const jwt = this.tokenService.decode();\n        const currentTime = new Date().getTime() / 1000;\n        if (!this.refreshInProgress &&\n            jwt &&\n            currentTime < jwt.exp &&\n            currentTime > jwt.exp - 1800) {\n            this.refreshInProgress = true;\n            const url = this.config.getConfig('auth.url');\n            return this.http.post(`${url}/refresh`, {}).subscribe((data) => {\n                this.tokenService.set(data.token);\n                this.refreshInProgress = false;\n            }, err => {\n                err.error.caught = true;\n                return err;\n            });\n        }\n    }\n}\nAuthInterceptor.ɵfac = function AuthInterceptor_Factory(t) { return new (t || AuthInterceptor)(ɵɵinject(ConfigService), ɵɵinject(TokenService), ɵɵinject(HttpClient)); };\nAuthInterceptor.ɵprov = ɵɵdefineInjectable({ token: AuthInterceptor, factory: AuthInterceptor.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AuthInterceptor, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ConfigService }, { type: TokenService }, { type: HttpClient }]; }, null); })();\n\nfunction MSALConfigFactory(config) {\n    const msConf = config.getConfig('auth.microsoft') || {};\n    msConf.redirectUri = msConf.redirectUri || window.location.href;\n    msConf.authority = msConf.authority || 'https://login.microsoftonline.com/organizations';\n    const myMsalObj = new PublicClientApplication({\n        auth: msConf,\n        cache: {\n            cacheLocation: 'sessionStorage'\n        }\n    });\n    return myMsalObj;\n}\nfunction MSALConfigFactoryb2c(config) {\n    const msConf = config.getConfig('auth.microsoftb2c.browserAuthOptions') || {};\n    msConf.redirectUri = msConf.redirectUri || window.location.href;\n    msConf.authority = msConf.authority || 'https://login.microsoftonline.com/organizations';\n    const myMsalObj = new PublicClientApplication({\n        auth: msConf,\n        cache: {\n            cacheLocation: 'sessionStorage'\n        }\n    });\n    return myMsalObj;\n}\nfunction MSALAngularConfigFactory(config) {\n    const msConf = config.getConfig('auth.microsoft') || {};\n    return {\n        interactionType: InteractionType.Popup,\n        authRequest: {\n            scopes: ['user.read'],\n            loginHint: 'todo',\n        },\n        type: 'add'\n    };\n}\nfunction MSALAngularConfigFactoryb2c(config) {\n    const msConf = config.getConfig('auth.microsoftb2c.browserAuthOptions') || {};\n    return {\n        interactionType: InteractionType.Popup,\n        authRequest: {\n            scopes: [msConf.clientId]\n        },\n        type: 'b2c'\n    };\n}\nfunction provideAuthMicrosoft(type) {\n    if (type === 'b2c') {\n        return [\n            {\n                provide: MSAL_INSTANCE,\n                useFactory: MSALConfigFactoryb2c,\n                deps: [ConfigService]\n            },\n            {\n                provide: MSAL_GUARD_CONFIG,\n                useFactory: MSALAngularConfigFactoryb2c,\n                deps: [ConfigService],\n                multi: true\n            },\n            MsalServiceb2c\n        ];\n    }\n    else {\n        return [\n            {\n                provide: MSAL_INSTANCE,\n                useFactory: MSALConfigFactory,\n                deps: [ConfigService]\n            },\n            {\n                provide: MSAL_GUARD_CONFIG,\n                useFactory: MSALAngularConfigFactory,\n                deps: [ConfigService],\n                multi: true\n            },\n            MsalService\n        ];\n    }\n}\n\nclass ProtectedDirective {\n    constructor(authentication, el) {\n        if (!authentication.isAuthenticated()) {\n            el.nativeElement.parentNode.removeChild(el.nativeElement);\n        }\n    }\n}\nProtectedDirective.ɵfac = function ProtectedDirective_Factory(t) { return new (t || ProtectedDirective)(ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(ElementRef)); };\nProtectedDirective.ɵdir = ɵɵdefineDirective({ type: ProtectedDirective, selectors: [[\"\", \"igoProtected\", \"\"]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ProtectedDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoProtected]'\n            }]\n    }], function () { return [{ type: AuthService }, { type: ElementRef }]; }, null); })();\n\nclass AuthStorageService extends StorageService {\n    constructor(config, http, authService, tokenService) {\n        super(config);\n        this.http = http;\n        this.authService = authService;\n        this.tokenService = tokenService;\n        this.authService.authenticate$.subscribe(isAuthenticated => {\n            if (isAuthenticated && this.options.url) {\n                this.http\n                    .get(this.options.url)\n                    .subscribe((userIgo) => {\n                    if (userIgo && userIgo.preference) {\n                        for (const key of Object.keys(userIgo.preference)) {\n                            const value = userIgo.preference[key];\n                            super.set(key, value);\n                        }\n                    }\n                });\n            }\n        });\n    }\n    set(key, value, scope = StorageScope.LOCAL) {\n        if (scope === StorageScope.LOCAL &&\n            this.authService.authenticated &&\n            this.options.url) {\n            const preference = {};\n            preference[key] = value;\n            this.http.patch(this.options.url, { preference }).subscribe();\n        }\n        super.set(key, value, scope);\n    }\n    remove(key, scope = StorageScope.LOCAL) {\n        if (scope === StorageScope.LOCAL &&\n            this.authService.authenticated &&\n            this.options.url) {\n            const preference = {};\n            preference[key] = undefined;\n            this.http.patch(this.options.url, { preference }).subscribe();\n        }\n        super.remove(key, scope);\n    }\n    clear(scope = StorageScope.LOCAL) {\n        if (scope === StorageScope.LOCAL &&\n            this.authService.authenticated &&\n            this.options.url) {\n            this.http.patch(this.options.url, { preference: {} }, {\n                params: {\n                    mergePreference: 'false'\n                }\n            }).subscribe();\n        }\n        let token;\n        if (scope === StorageScope.LOCAL) {\n            token = this.tokenService.get();\n        }\n        super.clear(scope);\n        if (token) {\n            this.tokenService.set(token);\n        }\n        if (scope === StorageScope.LOCAL &&\n            this.authService.authenticated &&\n            this.options.url) {\n            this.http\n                .get(this.options.url)\n                .subscribe((userIgo) => {\n                if (userIgo && userIgo.preference) {\n                    for (const key of Object.keys(userIgo.preference)) {\n                        const value = userIgo.preference[key];\n                        super.set(key, value);\n                    }\n                }\n            });\n        }\n    }\n}\nAuthStorageService.ɵfac = function AuthStorageService_Factory(t) { return new (t || AuthStorageService)(ɵɵinject(ConfigService), ɵɵinject(HttpClient), ɵɵinject(AuthService), ɵɵinject(TokenService)); };\nAuthStorageService.ɵprov = ɵɵdefineInjectable({ token: AuthStorageService, factory: AuthStorageService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AuthStorageService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ConfigService }, { type: HttpClient }, { type: AuthService }, { type: TokenService }]; }, null); })();\n\nconst routes = [\n    { path: 'login', component: AuthFormComponent },\n    { path: 'logout', component: AuthFormComponent }\n];\nclass AuthRoutingModule {\n}\nAuthRoutingModule.ɵmod = ɵɵdefineNgModule({ type: AuthRoutingModule });\nAuthRoutingModule.ɵinj = ɵɵdefineInjector({ factory: function AuthRoutingModule_Factory(t) { return new (t || AuthRoutingModule)(); }, providers: [], imports: [[RouterModule.forChild(routes)], RouterModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(AuthRoutingModule, { imports: [RouterModule], exports: [RouterModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AuthRoutingModule, [{\n        type: NgModule,\n        args: [{\n                imports: [RouterModule.forChild(routes)],\n                exports: [RouterModule],\n                providers: []\n            }]\n    }], null, null); })();\n\nclass IgoAuthModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAuthModule,\n            providers: [\n                {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: AuthInterceptor,\n                    multi: true\n                },\n                {\n                    provide: StorageService,\n                    useClass: AuthStorageService\n                },\n                ...provideAuthMicrosoft('add'),\n                ...provideAuthMicrosoft('b2c')\n            ]\n        };\n    }\n}\nIgoAuthModule.ɵmod = ɵɵdefineNgModule({ type: IgoAuthModule });\nIgoAuthModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAuthModule_Factory(t) { return new (t || IgoAuthModule)(); }, imports: [[\n            CommonModule,\n            ReactiveFormsModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatIconModule,\n            MatButtonModule,\n            IgoLanguageModule,\n            MsalModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAuthModule, { declarations: [AuthFormComponent,\n        AuthGoogleComponent,\n        AuthInternComponent,\n        AuthFacebookComponent,\n        AuthMicrosoftComponent,\n        AuthMicrosoftb2cComponent,\n        ProtectedDirective], imports: [CommonModule,\n        ReactiveFormsModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatIconModule,\n        MatButtonModule,\n        IgoLanguageModule,\n        MsalModule], exports: [AuthFormComponent, ProtectedDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAuthModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    ReactiveFormsModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    IgoLanguageModule,\n                    MsalModule\n                ],\n                declarations: [\n                    AuthFormComponent,\n                    AuthGoogleComponent,\n                    AuthInternComponent,\n                    AuthFacebookComponent,\n                    AuthMicrosoftComponent,\n                    AuthMicrosoftb2cComponent,\n                    ProtectedDirective\n                ],\n                exports: [AuthFormComponent, ProtectedDirective]\n            }]\n    }], null, null); })();\n\n/*\n * Public API Surface of auth\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AdminGuard, AuthFormComponent, AuthGuard, AuthInterceptor, AuthRoutingModule, AuthService, AuthStorageService, IgoAuthModule, LoggedGuard, MSALAngularConfigFactory, MSALAngularConfigFactoryb2c, MSALConfigFactory, MSALConfigFactoryb2c, ProfilsGuard, ProtectedDirective, TokenService, provideAuthMicrosoft };\n//# sourceMappingURL=igo2-auth.js.map\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppWidgetComponent } from './widget.component';\n\nconst routes: Routes = [\n  {\n    path: 'widget',\n    component: AppWidgetComponent\n  }\n];\n\nexport const AppWidgetRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Widget</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/widget\">code of this example</a>\n  </mat-card-content>\n\n  <igo-widget-outlet\n    [widget]=\"widget\"\n    [inputs]=\"inputs\"\n    (complete)=\"onWidgetComplete($event)\"\n    (cancel)=\"onWidgetCancel()\">\n  </igo-widget-outlet>\n\n</mat-card>\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\n\n@Component({\n  selector: 'app-auth-form',\n  templateUrl: './auth-form.component.html',\n  styleUrls: ['./auth-form.component.scss']\n})\nexport class AppAuthFormComponent {\n  private idsActivity: string[] = [];\n\n  constructor(private languageService: LanguageService) {}\n}\n","import { NgModule } from '@angular/core';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoAuthModule } from '@igo2/auth';\n\nimport { AppAuthFormComponent } from './auth-form.component';\nimport { AppAuthFormRoutingModule } from './auth-form-routing.module';\n\n@NgModule({\n  declarations: [AppAuthFormComponent],\n  imports: [AppAuthFormRoutingModule, MatCardModule, IgoAuthModule.forRoot()],\n  exports: [AppAuthFormComponent]\n})\nexport class AppAuthFormModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\nimport { AppAuthFormComponent } from './auth-form.component';\n\nconst routes: Routes = [\n  {\n    path: 'auth-form',\n    component: AppAuthFormComponent\n  }\n];\n\nexport const AppAuthFormRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Auth</mat-card-subtitle>\n  <mat-card-title>Authentification</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: ConfigService, LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/auth/auth-form\">code of this example</a><br>\n    See auth section of the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/environments\"> environment config</a>\n  </mat-card-content>\n</mat-card>\n\n<igo-auth-form></igo-auth-form>\n","import { ɵɵdefineInjectable, ɵsetClassMetadata, Injectable, ɵɵgetCurrentView, ɵɵelementStart, ɵɵlistener, ɵɵrestoreView, ɵɵnextContext, ɵɵpipe, ɵɵelement, ɵɵelementEnd, ɵɵproperty, ɵɵpipeBind1, ɵɵtext, ɵɵadvance, ɵɵtextInterpolate, ɵɵsanitizeHtml, ɵɵdirectiveInject, ɵɵdefineComponent, ɵɵtemplate, Component, ChangeDetectionStrategy, Input, ViewEncapsulation, Inject, ɵɵdefineNgModule, ɵɵdefineInjector, ɵɵsetNgModuleScope, NgModule, ɵɵinject, Optional, ɵɵprojectionDef, ɵɵprojection, ɵɵdefineDirective, Directive, EventEmitter, Self, Output, HostListener, ɵɵpipeBind2, ɵɵpureFunction1, ɵɵtextInterpolate1, ApplicationRef, ɵɵelementContainerStart, ɵɵelementContainerEnd, ChangeDetectorRef, ɵɵreference, ɵɵpropertyInterpolate, ɵɵsanitizeUrl, ɵɵtemplateRefExtractor, ɵɵviewQuery, ɵɵqueryRefresh, ɵɵloadQuery, ViewChildren, ɵɵelementContainer, Renderer2, ElementRef, ɵɵcontentQuery, ɵɵpureFunction3, ContentChild, ɵɵsetComponentScope, ɵɵpureFunction2, ɵɵdefinePipe, Pipe, ɵɵtextInterpolate2, ɵɵsanitizeResourceUrl, ɵɵstaticViewQuery, ViewChild, ɵɵstyleProp, ɵɵpureFunction0, ɵɵclassProp, ɵɵattribute, Injector, ɵɵInheritDefinitionFeature, InjectionToken, APP_INITIALIZER, ɵɵtextInterpolate3, ɵɵresolveDocument, ɵɵclassMap } from '@angular/core';\nimport { NgIf, CommonModule, NgClass, NgStyle, NgForOf, AsyncPipe, NgComponentOutlet, NgTemplateOutlet, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe } from '@angular/common';\nimport { MatBadge, MatBadgeModule } from '@angular/material/badge';\nimport { MatIcon, MatIconModule } from '@angular/material/icon';\nimport { MatListItem, MatListAvatarCssMatStyler, MatListModule, MatList, MatNavList, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatSelectionList, MatListOption } from '@angular/material/list';\nimport { MatTooltip, MatTooltipModule, TooltipComponent } from '@angular/material/tooltip';\nimport { getEntityId, getEntityTitle, getEntityProperty, getEntityRevision, getEntityIcon, EntityStore, EntityStoreStrategy, EntityStoreWatcher, SecureImagePipe, CollapseDirective, IgoBadgeIconDirective, ListItemDirective, IgoListModule, IgoCollapsibleModule, IgoImageModule, IgoPanelModule, IgoMatBadgeIconModule, ListComponent, CollapsibleComponent, PanelComponent, KeyValuePipe as KeyValuePipe$1, FormComponent, EntityTableComponent, IgoEntityTableModule, IgoKeyValueModule, IgoFormModule, IgoFormFieldComponent, EntityTableColumnRenderer, SpinnerComponent, DragAndDropDirective, IgoSpinnerModule, IgoDrapDropModule, IgoConfirmDialogModule, ConfirmDialogComponent, getEntityTitleHtml, StopPropagationDirective, EntityStoreFilterCustomFuncStrategy, IgoStopPropagationModule, FlexibleComponent, IgoFlexibleModule, WidgetService, Workspace, ActionStore, EntityStoreFilterSelectionStrategy, WorkspaceSelectorComponent, IgoWidgetModule } from '@igo2/common';\nimport { MatButton, MatButtonModule, MatAnchor } from '@angular/material/button';\nimport { IgoLanguageModule, ConfigService, LanguageService, MessageService, ActivityService, NetworkService, MediaService, Media, RouteService, StorageService, StorageScope } from '@igo2/core';\nimport { MatDialog, MAT_DIALOG_DATA, MatDialogTitle, MatDialogClose, MatDialogContent, MatDialogModule, MatDialogRef, MatDialogActions, MatDialogContainer } from '@angular/material/dialog';\nimport { BehaviorSubject, combineLatest, Observable, of, forkJoin, Subject, zip, EMPTY, ReplaySubject, timer, fromEvent, throwError } from 'rxjs';\nimport { first, map, concatMap, catchError, skipWhile, debounceTime, skip, distinctUntilChanged, take, mergeMap, debounce, takeUntil, delay } from 'rxjs/operators';\nimport { transform, METERS_PER_UNIT, transformExtent, get, fromLonLat } from 'ol/proj';\nimport { MAC } from 'ol/has';\nimport { uuid, ObjectUtils, Watcher, SubjectStatus, userAgent, downloadContent, strEnum, Clipboard } from '@igo2/utils';\nimport olSourceImageWMS from 'ol/source/ImageWMS';\nimport { Md5 } from 'ts-md5';\nimport { bbox, and, not, or, within, notEqualTo, like, lessThanOrEqualTo, lessThan, isNull, intersects, greaterThanOrEqualTo, greaterThan, equalTo, during, contains, between } from 'ol/format/filter';\nimport olWKT from 'ol/format/WKT';\nimport olFormatWFS from 'ol/format/WFS';\nimport * as moment_ from 'moment';\nimport { duration } from 'moment';\nimport * as olformat from 'ol/format';\nimport { WFS, TopoJSON, GeoJSON, EsriJSON, GPX, WKT, KML, WMSCapabilities, WMTSCapabilities, WMSGetFeatureInfo, GML } from 'ol/format';\nimport olFormatGML2 from 'ol/format/GML2';\nimport olFormatGML3 from 'ol/format/GML3';\nimport olFormatGML32 from 'ol/format/GML32';\nimport olFormatOSMXML from 'ol/format/OSMXML';\nimport { TranslatePipe, TranslateDirective } from '@ngx-translate/core';\nimport { HttpClient, HttpParams, HttpHeaders } from '@angular/common/http';\nimport stylefunction from 'ol-mapbox-style/dist/stylefunction';\nimport { AuthInterceptor, AuthService } from '@igo2/auth';\nimport OlVectorSource from 'ol/source/Vector';\nimport olSourceOSM from 'ol/source/OSM';\nimport olSourceXYZ from 'ol/source/XYZ';\nimport { bbox as bbox$1 } from 'ol/loadingstrategy';\nimport olProjection from 'ol/proj/Projection';\nimport olSourceWMTS from 'ol/source/WMTS';\nimport olTileGridWMTS from 'ol/tilegrid/WMTS';\nimport { getWidth, getTopLeft } from 'ol/extent.js';\nimport olSourceCarto from 'ol/source/CartoDB';\nimport olFormatEsriJSON from 'ol/format/EsriJSON';\nimport ImageArcGISRest from 'ol/source/ImageArcGISRest';\nimport olSourceTileArcGISRest from 'ol/source/TileArcGISRest';\nimport { TileDebug } from 'ol/source';\nimport TileGrid from 'ol/tilegrid/TileGrid';\nimport olFeature from 'ol/Feature';\nimport olSourceVectorTile from 'ol/source/VectorTile';\nimport olFormatMVT from 'ol/format/MVT';\nimport olSourceCluster from 'ol/source/Cluster';\nimport { __decorate, __metadata, __awaiter } from 'tslib';\nimport { Cacheable } from 'ngx-cacheable';\nimport { optionsFromCapabilities } from 'ol/source/WMTS.js';\nimport olAttribution from 'ol/control/Attribution';\nimport * as olstyle from 'ol/style';\nimport { Style, Text, Fill, Icon, Stroke, Circle, RegularShape } from 'ol/style';\nimport proj4 from 'proj4';\nimport { register } from 'ol/proj/proj4';\nimport olLayerImage from 'ol/layer/Image';\nimport olLayerTile from 'ol/layer/Tile';\nimport OlVectorLayer from 'ol/layer/Vector';\nimport { unByKey } from 'ol/Observable';\nimport { easeOut } from 'ol/easing';\nimport { asArray } from 'ol/color';\nimport { getVectorContext } from 'ol/render';\nimport FormatType from 'ol/format/FormatType';\nimport olLayerVectorTile from 'ol/layer/VectorTile';\nimport olMap from 'ol/Map';\nimport olView from 'ol/View';\nimport olGeolocation from 'ol/Geolocation';\nimport olControlScaleLine from 'ol/control/ScaleLine';\nimport { defaults, Select, Translate } from 'ol/interaction';\nimport OlCircle from 'ol/geom/Circle';\nimport { createEmpty, extend, getSize, containsExtent, getArea, intersects as intersects$1, buffer, boundingExtent, isEmpty, getCenter } from 'ol/extent';\nimport OlGeometryLayout from 'ol/geom/GeometryLayout';\nimport OlPolygon, { fromCircle } from 'ol/geom/Polygon';\nimport OlPoint from 'ol/geom/Point';\nimport OlLineString from 'ol/geom/LineString';\nimport OlGeoJSON from 'ol/format/GeoJSON';\nimport OlDragBoxInteraction from 'ol/interaction/DragBox';\nimport CircleStyle from 'ol/style/Circle';\nimport { GeometryCollection, LineString, Polygon, Point, MultiLineString, MultiPolygon } from 'ol/geom';\nimport { VectorTile } from 'ol/layer';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport OlRenderFeature from 'ol/render/Feature';\nimport { MatLine, MatOption, MatOptgroup, MatPseudoCheckbox, DateAdapter, MAT_DATE_LOCALE, MatOptionModule, MatNativeDateModule } from '@angular/material/core';\nimport { MatFormField, MatSuffix, MatFormFieldModule, MatError, MatHint, MatLabel, MatPlaceholder, MatPrefix } from '@angular/material/form-field';\nimport { MatSelect, MatSelectModule, MatSelectTrigger } from '@angular/material/select';\nimport { NgControlStatus, NgModel, DefaultValueAccessor, FormsModule, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModelGroup, NgForm, Validators, FormBuilder, FormGroupDirective, FormControlName, ReactiveFormsModule, FormControlDirective, FormGroupName, FormArrayName, NgControl, FormControl } from '@angular/forms';\nimport { MatCheckboxModule, MatCheckbox, MatCheckboxRequiredValidator } from '@angular/material/checkbox';\nimport { MatDividerModule, MatDivider } from '@angular/material/divider';\nimport { MatInput, MatInputModule, MatTextareaAutosize } from '@angular/material/input';\nimport { MatMenuModule, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent } from '@angular/material/menu';\nimport { MatSlideToggleModule, MatSlideToggleRequiredValidator, MatSlideToggle } from '@angular/material/slide-toggle';\nimport { MatSliderModule, MatSlider } from '@angular/material/slider';\nimport { CdkAutofill, CdkTextareaAutosize } from '@angular/cdk/text-field';\nimport { Dir } from '@angular/cdk/bidi';\nimport { CdkScrollable } from '@angular/cdk/scrolling';\nimport { MatAutocompleteTrigger, MatAutocomplete, MatAutocompleteModule, MatAutocompleteOrigin } from '@angular/material/autocomplete';\nimport { MatButtonToggleGroup, MatButtonToggle, MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { ColorPickerDirective, ColorPickerModule } from 'ngx-color-picker';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport OlDraw from 'ol/interaction/Draw';\nimport lineIntersect from '@turf/line-intersect';\nimport { lineString } from '@turf/helpers';\nimport OlStyle from 'ol/style/Style';\nimport { getLength, getArea as getArea$1, getDistance } from 'ol/sphere';\nimport OlOverlay from 'ol/Overlay';\nimport pointOnFeature from '@turf/point-on-feature';\nimport { MatDatepickerModule, MatCalendar, MatCalendarBody, MatDatepicker, MatDatepickerContent, MatDatepickerInput, MatDatepickerToggle, MatDatepickerToggleIcon, MatMonthView, MatYearView, MatMultiYearView, MatCalendarHeader, MatDateRangeInput, MatStartDate, MatEndDate, MatDateRangePicker } from '@angular/material/datepicker';\nimport { MatRadioModule, MatRadioGroup, MatRadioButton } from '@angular/material/radio';\nimport { MatTableModule, MatTable, MatHeaderCellDef, MatHeaderRowDef, MatColumnDef, MatCellDef, MatRowDef, MatFooterCellDef, MatFooterRowDef, MatHeaderCell, MatCell, MatFooterCell, MatHeaderRow, MatRow, MatFooterRow, MatNoDataRow, MatTextColumn } from '@angular/material/table';\nimport { MatTabsModule, MatTabGroup, MatTabLabel, MatTab, MatTabNav, MatTabLink, MatTabContent } from '@angular/material/tabs';\nimport { MatTreeNestedDataSource, MatTreeModule, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet } from '@angular/material/tree';\nimport { MatDatetimepickerToggle, MatDatetimepicker, MatDatetimepickerInput, MatDatetimepickerModule, MatNativeDatetimeModule, MatDatetimepickerCalendar, MatDatetimepickerCalendarBody, MatDatetimepickerClock, MatDatetimepickerContent, MatDatetimepickerMonthView, MatDatetimepickerYearView, ɵb } from '@mat-datetimepicker/core';\nimport OlModify from 'ol/interaction/Modify';\nimport OlTranslate from 'ol/interaction/Translate';\nimport OlLinearRing from 'ol/geom/LinearRing';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { NestedTreeControl } from '@angular/cdk/tree';\nimport { saveAs } from 'file-saver';\nimport * as jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport * as JSZip from 'jszip';\nimport { pointerMove, click } from 'ol/events/condition';\n\n/**\n * This method extracts a coordinate tuple from a string.\n * @param str Any string\n * @param mapProjection string Map Projection\n * @param opts.forceNA boolean Force North America Zone\n * @returns object:\n *             lonLat: Coordinate,\n *             message: Message of error,\n *             radius: radius of the confience of coordinate,\n *             conf: confidence of the coordinate}\n */\nfunction stringToLonLat(str, mapProjection, opts = {}) {\n    let lonLat;\n    let coordStr;\n    let negativeLon;\n    let degreesLon;\n    let minutesLon;\n    let secondsLon;\n    let directionLon;\n    let decimalLon;\n    let negativeLat;\n    let degreesLat;\n    let minutesLat;\n    let secondsLat;\n    let directionLat;\n    let decimalLat;\n    let zone;\n    let radius;\n    let conf;\n    let lon;\n    let lat;\n    const projectionPattern = '(\\\\s*;\\\\s*[\\\\d]{4,6})';\n    const toProjection = '4326';\n    let projectionStr;\n    const projectionRegex = new RegExp(projectionPattern, 'g');\n    const lonlatCoord = '([-+])?([\\\\d]{1,3})([,.](\\\\d+))?';\n    const lonLatPattern = `${lonlatCoord}[\\\\s,]+${lonlatCoord}`;\n    const lonLatRegex = new RegExp(`^${lonLatPattern}$`, 'g');\n    const dmsCoord = '([0-9]{1,2})[:|°]?\\\\s*([0-9]{1,2})?[:|\\'|′|’]?\\\\s*([0-9]{1,2}(?:.[0-9]+){0,1})?\\\\s*[\"|″|”]?\\\\s*';\n    const dmsCoordPattern = `${dmsCoord}([N|S|E|W|O]),?\\\\s*${dmsCoord}([N|S|E|W|O])`;\n    const dmsRegex = new RegExp(`^${dmsCoordPattern}$`, 'gi');\n    const patternUtm = '(UTM)-?(\\\\d{1,2})[\\\\s,]*(\\\\d+[.,]?\\\\d+)[\\\\s,]+(\\\\d+[.,]?\\\\d+)';\n    const utmRegex = new RegExp(`^${patternUtm}`, 'gi');\n    const patternMtm = '(MTM)-?(\\\\d{1,2})[\\\\s,]*(\\\\d+[.,]?\\\\d+)[\\\\s,]+(\\\\d+[.,]?\\\\d+)';\n    const mtmRegex = new RegExp(`^${patternMtm}`, 'gi');\n    const ddCoord = '([-+])?(\\\\d{1,3})[,.](\\\\d+)';\n    const patternDd = `${ddCoord}\\\\s*[,]?\\\\s*${ddCoord}`;\n    const ddRegex = new RegExp(`^${patternDd}`, 'g');\n    const dmdCoord = '([-+])?(\\\\d{1,3})[\\\\s,.]{1}(\\\\d{1,2})[\\\\s,.]{1}(\\\\d{1,2})[.,]?(\\\\d{1,5})?';\n    const patternDmd = `${dmdCoord}\\\\s*[,.]?\\\\s*${dmdCoord}`;\n    const dmdRegex = new RegExp(`^${patternDmd}`, 'g');\n    // tslint:disable:max-line-length\n    const patternBELL = 'LAT\\\\s*[\\\\s:]*\\\\s*([-+])?(\\\\d{1,2})[\\\\s.,]?(\\\\d+)?[\\\\s.,]?\\\\s*(\\\\d{1,2}([.,]\\\\d+)?)?\\\\s*(N|S|E|W)?\\\\s*LONG\\\\s*[\\\\s:]*\\\\s*([-+])?(\\\\d{1,3})[\\\\s.,]?(\\\\d+)?[\\\\s.,]?\\\\s*(\\\\d{1,2}([.,]\\\\d+)?)?\\\\s*(N|S|E|W)?\\\\s*UNC\\\\s*[\\\\s:]?\\\\s*(\\\\d+)\\\\s*CONF\\\\s*[\\\\s:]?\\\\s*(\\\\d{1,3})';\n    const bellRegex = new RegExp(`^${patternBELL}?`, 'gi');\n    const mmCoord = '([-+]?\\\\d+)[,.]?(\\\\d+)?';\n    const mmPattern = `${mmCoord}[\\\\s,]+${mmCoord}`;\n    const mmRegex = new RegExp(`^${mmPattern}$`, 'g');\n    let isXYCoords = false;\n    str = str.toLocaleUpperCase().trim();\n    // Extract projection\n    if (projectionRegex.test(str)) {\n        [coordStr, projectionStr] = str.split(';').map(s => s.trim());\n    }\n    else {\n        coordStr = str;\n    }\n    if (lonLatRegex.test(coordStr)) {\n        [\n            ,\n            negativeLon,\n            lon,\n            ,\n            decimalLon,\n            negativeLat,\n            lat,\n            ,\n            decimalLat\n        ] = coordStr.match(lonLatPattern);\n        lon = parseFloat((negativeLon ? negativeLon : '') + lon + '.' + decimalLon);\n        lat = parseFloat((negativeLat ? negativeLat : '') + lat + '.' + decimalLat);\n    }\n    else if (dmsRegex.test(coordStr)) {\n        [\n            ,\n            degreesLon,\n            minutesLon,\n            secondsLon,\n            directionLon,\n            degreesLat,\n            minutesLat,\n            secondsLat,\n            directionLat\n        ] = coordStr.match(dmsCoordPattern);\n        if (directionLon === 'S' || directionLon === 'N') {\n            degreesLon = [degreesLat, (degreesLat = degreesLon)][0];\n            minutesLon = [minutesLat, (minutesLat = minutesLon)][0];\n            secondsLon = [secondsLat, (secondsLat = secondsLon)][0];\n            directionLon = [directionLat, (directionLat = directionLon)][0];\n        }\n        lon = convertDMSToDD(parseFloat(degreesLon), parseFloat(minutesLon), parseFloat(secondsLon), directionLon);\n        lat = convertDMSToDD(parseFloat(degreesLat), parseFloat(minutesLat), parseFloat(secondsLat), directionLat);\n    }\n    else if (utmRegex.test(coordStr)) {\n        isXYCoords = true;\n        [, , zone, lon, lat] = coordStr.match(patternUtm);\n        const epsgUtm = Number(zone) < 10 ? `EPSG:3260${zone}` : `EPSG:326${zone}`;\n        [lon, lat] = transform([parseFloat(lon), parseFloat(lat)], epsgUtm, 'EPSG:4326');\n    }\n    else if (mtmRegex.test(coordStr)) {\n        isXYCoords = true;\n        [, , zone, lon, lat] = coordStr.match(patternMtm);\n        const epsgMtm = Number(zone) < 10 ? `EPSG:3218${zone}` : `EPSG:321${80 + Number(zone)}`;\n        [lon, lat] = transform([parseFloat(lon), parseFloat(lat)], epsgMtm, 'EPSG:4326');\n    }\n    else if (dmdRegex.test(coordStr)) {\n        [\n            ,\n            negativeLon,\n            degreesLon,\n            minutesLon,\n            secondsLon,\n            decimalLon,\n            negativeLat,\n            degreesLat,\n            minutesLat,\n            secondsLat,\n            decimalLat\n        ] = coordStr.match(patternDmd);\n        lon = convertDMSToDD(parseFloat((negativeLon ? negativeLon : '') + degreesLon), parseFloat(minutesLon), parseFloat(secondsLon), directionLon);\n        lat = convertDMSToDD(parseFloat((negativeLat ? negativeLat : '') + degreesLat), parseFloat(minutesLat), parseFloat(secondsLat), directionLat);\n    }\n    else if (ddRegex.test(coordStr)) {\n        [\n            ,\n            negativeLon,\n            degreesLon,\n            decimalLon,\n            negativeLat,\n            degreesLat,\n            decimalLat\n        ] = coordStr.match(patternDd);\n        lon = convertDMSToDD(parseFloat((negativeLon ? negativeLon : '') + degreesLon), parseFloat(minutesLon), parseFloat(secondsLon), directionLon);\n        lat = convertDMSToDD(parseFloat((negativeLat ? negativeLat : '') + degreesLat), parseFloat(minutesLat), parseFloat(secondsLat), directionLat);\n    }\n    else if (bellRegex.test(coordStr)) {\n        [\n            ,\n            negativeLat,\n            degreesLat,\n            minutesLat,\n            secondsLat,\n            ,\n            directionLat,\n            negativeLon,\n            degreesLon,\n            minutesLon,\n            secondsLon,\n            ,\n            directionLon,\n            radius,\n            conf\n        ] = coordStr.match(patternBELL);\n        // Set default value for North America\n        if (!directionLon) {\n            directionLon = 'W';\n        }\n        // Check if real minutes or decimals\n        if (minutesLon && minutesLon.length > 2) {\n            lon = parseFloat((negativeLon ? negativeLon : '') + degreesLon + '.' + minutesLon);\n        }\n        else {\n            lon = convertDMSToDD(parseFloat(degreesLon), parseFloat(minutesLon), parseFloat(secondsLon), directionLon);\n        }\n        if (minutesLat && minutesLat.length > 2) {\n            lat = parseFloat((negativeLat ? negativeLat : '') + degreesLat + '.' + minutesLat);\n        }\n        else {\n            lat = convertDMSToDD(parseFloat(degreesLat), parseFloat(minutesLat), parseFloat(secondsLat), directionLat);\n        }\n    }\n    else if (mmRegex.test(coordStr)) {\n        isXYCoords = true;\n        [, lon, decimalLon, lat, decimalLat] = coordStr.match(mmPattern);\n        if (decimalLon) {\n            lon = parseFloat(lon + '.' + decimalLon);\n        }\n        if (decimalLat) {\n            lat = parseFloat(lat + '.' + decimalLat);\n        }\n    }\n    else {\n        return {\n            lonLat: undefined,\n            message: '',\n            radius: undefined,\n            conf: undefined\n        };\n    }\n    if (opts.forceNA && !isXYCoords) {\n        // Set a negative coordinate for North America zone\n        if (lon > 0 && lat > 0) {\n            if (lon > lat) {\n                lon = -lon;\n            }\n            else {\n                lat = -lat;\n            }\n        }\n        // Reverse coordinate to respect lonLat convention\n        if (lon > lat) {\n            lon = [lat, (lat = lon)][0];\n        }\n    }\n    lonLat = [Number(lon), Number(lat)];\n    // Reproject the coordinate if projection parameter have been set and coord is not 4326\n    if ((projectionStr !== undefined && projectionStr !== toProjection) ||\n        (lonLat[0] > 180 || lonLat[0] < -180) ||\n        (lonLat[1] > 90 || lonLat[1] < -90)) {\n        const source = projectionStr ? 'EPSG:' + projectionStr : mapProjection;\n        const dest = 'EPSG:' + toProjection;\n        try {\n            lonLat = transform(lonLat, source, dest);\n        }\n        catch (e) {\n            return {\n                lonLat: undefined,\n                message: 'Projection ' + source + ' not supported',\n                radius: undefined,\n                conf: undefined\n            };\n        }\n    }\n    if (Math.abs(lonLat[0]) <= 180 && Math.abs(lonLat[1]) <= 90) {\n        return {\n            lonLat,\n            message: '',\n            radius: radius ? parseInt(radius, 10) : undefined,\n            conf: conf ? parseInt(conf, 10) : undefined\n        };\n    }\n    else {\n        return {\n            lonLat: undefined,\n            message: 'Coordinate out of Longitude/Latitude bounds',\n            radius: undefined,\n            conf: undefined\n        };\n    }\n}\n/**\n * Convert degrees minutes seconds to dd\n * @param degrees Degrees\n * @param minutes Minutes\n * @param seconds Seconds\n * @param direction Direction\n */\nfunction convertDMSToDD(degrees, minutes, seconds, direction) {\n    minutes = minutes || 0;\n    seconds = seconds || 0;\n    const neg = degrees < 0;\n    let dd = Math.abs(degrees) + minutes / 60 + seconds / 3600;\n    if (neg || direction === 'S' || direction === 'W') {\n        dd = -dd;\n    } // Don't do anything for N or E\n    return dd;\n}\n/**\n * Convert dd to degrees minutes seconds\n * @param lonLatDD longitude and latitude in dd\n * @param decimal number of decimals for seconds\n * @returns longitude and latitude in dms\n */\nfunction convertDDToDMS(lonLatDD, decimal = 3) {\n    const lonLatDMS = [];\n    lonLatDD.forEach(dd => {\n        const degrees = dd < 0 ? Math.ceil(dd) : Math.floor(dd);\n        const int = dd < 0 ? (degrees - dd) * 60 : (dd - degrees) * 60;\n        const minutes = Math.floor(int);\n        const seconds = ((int - minutes) * 60).toFixed(decimal);\n        lonLatDMS.push(`${degrees}° ${minutes}' ${seconds}\"`);\n    });\n    return lonLatDMS;\n}\n/**\n * Return true of two view states are equal.\n * @param state1 View state\n * @param state2 View state\n * @returns True if the view states are equal\n */\nfunction viewStatesAreEqual(state1, state2) {\n    if (state1 === undefined || state2 === undefined) {\n        return false;\n    }\n    const tolerance = 1 / 10000;\n    return (state1.zoom === state2.zoom &&\n        Math.trunc(state1.center[0] / tolerance) ===\n            Math.trunc(state2.center[0] / tolerance) &&\n        Math.trunc(state1.center[1] / tolerance) ===\n            Math.trunc(state2.center[1] / tolerance));\n}\n/**\n * Format the scale to a human readable text\n * @param Scale of the map\n * @returns Human readable scale text\n */\nfunction formatScale(scale) {\n    scale = Math.round(scale);\n    if (scale < 10000) {\n        return scale + '';\n    }\n    scale = Math.round(scale / 1000);\n    if (scale < 1000) {\n        return scale + 'K';\n    }\n    scale = Math.round(scale / 1000);\n    return scale + 'M';\n}\n/**\n * Return the resolution from a scale denom\n * @param scale Scale denom\n * @param dpi DPI\n * @returns Resolution\n */\nfunction getResolutionFromScale(scale, dpi = 96) {\n    const inchesPerMeter = 39.3701;\n    return scale / (inchesPerMeter * dpi);\n}\n/**\n * Return the resolution from a scale denom\n * @param Scale denom\n * @returns Resolution\n */\nfunction getScaleFromResolution(resolution, unit = 'm', dpi = 96) {\n    const inchesPerMeter = 39.3701;\n    return resolution * METERS_PER_UNIT[unit] * inchesPerMeter * dpi;\n}\n/**\n * Returns true if the CTRL key is pushed during an Ol MapBrowserPointerEvent\n * @param event OL MapBrowserPointerEvent\n * @returns Whether the CTRL key is pushed\n */\nfunction ctrlKeyDown(event) {\n    const originalEvent = event.originalEvent;\n    return (!originalEvent.altKey &&\n        (MAC ? originalEvent.metaKey : originalEvent.ctrlKey) &&\n        !originalEvent.shiftKey);\n}\nfunction roundCoordTo(coord, decimal = 3) {\n    return [coord[0].toFixed(decimal), coord[1].toFixed(decimal)];\n}\n/**\n * Returns an array of converted coordinates.\n * Conversion is done for every configured projections\n * and for the current UTM zone and MTM zone.\n * @param lonLat [number, number] array of the coordinate to transform.\n * @param projections  Projection[] Array of destination projection.\n * @returns Returns an array of converted coordinates.\n */\nfunction lonLatConversion(lonLat, projections) {\n    const rawCoord3857 = transform(lonLat, 'EPSG:4326', 'EPSG:3857');\n    const convertedLonLat = [\n        {\n            code: 'EPSG:3857',\n            alias: 'Web Mercator',\n            coord: rawCoord3857,\n            igo2CoordFormat: `${roundCoordTo(rawCoord3857).join(', ')} ; 3857`\n        }\n    ];\n    // detect the current utm zone.\n    const utmZone = utmZoneFromLonLat(lonLat);\n    const epsgUtm = utmZone < 10 ? `EPSG:3260${utmZone}` : `EPSG:326${utmZone}`;\n    const utmName = `UTM-${utmZone}`;\n    const rawCoordUtm = transform(lonLat, 'EPSG:4326', epsgUtm);\n    convertedLonLat.push({\n        code: epsgUtm,\n        alias: 'UTM',\n        coord: rawCoordUtm,\n        igo2CoordFormat: `${utmName} ${roundCoordTo(rawCoordUtm).join(', ')}`\n    });\n    // detect the current mtm zone.\n    const mtmZone = mtmZoneFromLonLat(lonLat);\n    if (mtmZone) {\n        const epsgMtm = mtmZone < 10 ? `EPSG:3218${mtmZone}` : `EPSG:321${80 + mtmZone}`;\n        const mtmName = `MTM-${mtmZone}`;\n        const rawCoordMtm = transform(lonLat, 'EPSG:4326', epsgMtm);\n        convertedLonLat.push({\n            code: epsgMtm,\n            alias: 'MTM',\n            coord: rawCoordMtm,\n            igo2CoordFormat: `${mtmName} ${roundCoordTo(rawCoordMtm).join(', ')}`\n        });\n    }\n    projections.forEach(projection => {\n        const rawCoord = transform(lonLat, 'EPSG:4326', projection.code);\n        const numericEpsgCode = projection.code.split(':')[1];\n        convertedLonLat.push({\n            code: projection.code,\n            alias: projection.alias || projection.code,\n            coord: rawCoord,\n            igo2CoordFormat: `${roundCoordTo(rawCoord).join(', ')} ; ${numericEpsgCode}`\n        });\n    });\n    return convertedLonLat;\n}\n/**\n * Detect the current utm zone of the lon/lat coordinate.\n * @param lonLat [number, number] array of the coordinate to detect the UTM zone.\n * @returns number The UTM zone.\n */\nfunction utmZoneFromLonLat(lonLat) {\n    return Math.ceil((lonLat[0] + 180) / 6);\n}\n/**\n * Detect the current mtm zone of the lon/lat coordinate.\n * @param lonLat [number, number] array of the coordinate to detect the MTM zone.\n * @returns number The MTM zone. Undefined if outside of the mtm application zone.\n */\nfunction mtmZoneFromLonLat(lonLat) {\n    const long = lonLat[0];\n    let mtmZone;\n    if (long < -51 && long > -54) {\n        mtmZone = 1;\n    }\n    if (long < -54 && long > -57) {\n        mtmZone = 2;\n    }\n    if (long < -57 && long > -60) {\n        mtmZone = 3;\n    }\n    if (long < -60 && long > -63) {\n        mtmZone = 4;\n    }\n    if (long < -63 && long > -66) {\n        mtmZone = 5;\n    }\n    if (long < -66 && long > -69) {\n        mtmZone = 6;\n    }\n    if (long < -69 && long > -72) {\n        mtmZone = 7;\n    }\n    if (long < -72 && long > -75) {\n        mtmZone = 8;\n    }\n    if (long < -75 && long > -78) {\n        mtmZone = 9;\n    }\n    if (long < -78 && long > -81) {\n        mtmZone = 10;\n    }\n    return mtmZone;\n}\n\nvar LinkedProperties;\n(function (LinkedProperties) {\n    LinkedProperties[\"OPACITY\"] = \"opacity\";\n    LinkedProperties[\"VISIBLE\"] = \"visible\";\n    LinkedProperties[\"OGCFILTERS\"] = \"ogcFilters\";\n    LinkedProperties[\"MINRESOLUTION\"] = \"minResolution\";\n    LinkedProperties[\"MAXRESOLUTION\"] = \"maxResolution\";\n    LinkedProperties[\"ZINDEX\"] = \"zIndex\";\n    LinkedProperties[\"TIMEFILTER\"] = \"timeFilter\";\n})(LinkedProperties || (LinkedProperties = {}));\nvar TooltipType;\n(function (TooltipType) {\n    TooltipType[\"TITLE\"] = \"title\";\n    TooltipType[\"ABSTRACT\"] = \"abstract\";\n    TooltipType[\"CUSTOM\"] = \"custom\";\n})(TooltipType || (TooltipType = {}));\n\n/**\n * Generate a id from it's datasource options.\n * @param options Data source options\n * @returns A id\n */\nfunction generateIdFromSourceOptions(options) {\n    const generators = {\n        wms: generateWMSIdFromSourceOptions,\n        wmts: generateWMTSIdFromSourceOptions,\n        xyz: generateXYZIdFromSourceOptions,\n        feature: generateFeatureIdFromSourceOptions,\n        wfs: generateWfsIdFromSourceOptions,\n        arcgisrest: generateArcgisRestIdFromSourceOptions,\n        imagearcgisrest: generateArcgisRestIdFromSourceOptions,\n        tilearcgisrest: generateArcgisRestIdFromSourceOptions,\n        osm: (_options) => 'OSM',\n        tiledebug: (_options) => 'tiledebug'\n    };\n    const generator = generators[options.type] || generateId;\n    return generator(options);\n}\n/**\n * Generate a id from WMS data source options\n * @param options WMS data source options\n * @returns A md5 hash of the the url and layers\n */\nfunction generateWMSIdFromSourceOptions(options) {\n    const layers = options.params.LAYERS;\n    const url = standardizeUrl(options.url);\n    const chain = 'wms' + url + layers;\n    return Md5.hashStr(chain);\n}\n/**\n * Generate a id from WMTS data source options\n * @param options WMTS data source options\n * @returns A md5 hash of the the url and layer\n */\nfunction generateWMTSIdFromSourceOptions(options) {\n    const layer = options.layer;\n    const url = standardizeUrl(options.url);\n    const chain = 'wmts' + url + layer;\n    return Md5.hashStr(chain);\n}\n/**\n * Generate a id from XYZ data source options\n * @param options XYZ data source options\n * @returns A md5 hash of the the url and layer\n */\nfunction generateXYZIdFromSourceOptions(options) {\n    const url = standardizeUrl(options.url);\n    const chain = 'xyz' + url;\n    return Md5.hashStr(chain);\n}\n/**\n * Generate a id from feature data source options\n * @param options XYZ data source options\n * @returns A md5 hash of the the url and layer\n */\nfunction generateFeatureIdFromSourceOptions(options) {\n    if (!options.url) {\n        return generateId(options);\n    }\n    const url = standardizeUrl(options.url);\n    const chain = 'feature' + url;\n    return Md5.hashStr(chain);\n}\n/**\n * Generate a id from feature data source options\n * @param options XYZ data source options\n * @returns A md5 hash of the the url and layer\n */\nfunction generateWfsIdFromSourceOptions(options) {\n    if (!options.url || !options.params) {\n        return generateId(options);\n    }\n    const url = standardizeUrl(options.url);\n    const chain = 'wfs' + url + options.params.featureTypes;\n    return Md5.hashStr(chain);\n}\n/**\n * Generate a id from ArcGIS Rest data source options\n * @param options ArcGIS Rest data source options\n * @returns A md5 hash of the url and layers\n */\nfunction generateArcgisRestIdFromSourceOptions(options) {\n    const layers = options.layer;\n    const url = standardizeUrl(options.url);\n    const chain = (options.type || 'arcgis') + url + layers;\n    return Md5.hashStr(chain);\n}\n/**\n * Generate a unique id\n * @returns A uuid\n */\nfunction generateId(_options) {\n    return uuid();\n}\nfunction standardizeUrl(url) {\n    const absUrl = url.charAt(0) === '/' ? window.location.origin + url : url;\n    const urlDecomposed = absUrl.split(/[?&]/);\n    let urlStandardized = urlDecomposed.shift();\n    const paramsToKeep = urlDecomposed.filter(p => p.length !== 0 && p.charAt(0) !== '_');\n    if (paramsToKeep.length) {\n        urlStandardized += '?' + paramsToKeep.join('&');\n    }\n    return urlStandardized;\n}\n\nclass DataSource {\n    constructor(options = {}, dataService) {\n        this.options = options;\n        this.dataService = dataService;\n        this.options = options;\n        this.id = this.options.id || this.generateId();\n        this.ol = this.createOlSource();\n    }\n    generateId() {\n        return generateIdFromSourceOptions(this.options);\n    }\n    getLegend(style, view) {\n        return this.legend ? this.legend : [];\n    }\n    setLegend(options) {\n        if (options.url) {\n            this.legend = [{ url: options.url }];\n        }\n        else if (options.html) {\n            this.legend = [{ html: options.html }];\n        }\n        else {\n            this.legend = [];\n        }\n        return this.legend;\n    }\n}\n\nvar OgcFilterOperatorType;\n(function (OgcFilterOperatorType) {\n    OgcFilterOperatorType[\"BasicNumericOperator\"] = \"basicnumericoperator\";\n    OgcFilterOperatorType[\"Basic\"] = \"basic\";\n    OgcFilterOperatorType[\"BasicAndSpatial\"] = \"basicandspatial\";\n    OgcFilterOperatorType[\"Spatial\"] = \"spatial\";\n    OgcFilterOperatorType[\"All\"] = \"all\";\n    OgcFilterOperatorType[\"Time\"] = \"time\";\n})(OgcFilterOperatorType || (OgcFilterOperatorType = {}));\nvar OgcFilterOperator;\n(function (OgcFilterOperator) {\n    OgcFilterOperator[\"BBOX\"] = \"BBox\";\n    OgcFilterOperator[\"PropertyIsBetween\"] = \"PropertyIsBetween\";\n    OgcFilterOperator[\"Contains\"] = \"Contains\";\n    OgcFilterOperator[\"During\"] = \"During\";\n    OgcFilterOperator[\"PropertyIsEqualTo\"] = \"PropertyIsEqualTo\";\n    OgcFilterOperator[\"PropertyIsGreaterThan\"] = \"PropertyIsGreaterThan\";\n    OgcFilterOperator[\"PropertyIsGreaterThanOrEqualTo\"] = \"PropertyIsGreaterThanOrEqualTo\";\n    OgcFilterOperator[\"Intersects\"] = \"Intersects\";\n    OgcFilterOperator[\"PropertyIsNull\"] = \"PropertyIsNull\";\n    OgcFilterOperator[\"PropertyIsLessThan\"] = \"PropertyIsLessThan\";\n    OgcFilterOperator[\"PropertyIsLessThanOrEqualTo\"] = \"PropertyIsLessThanOrEqualTo\";\n    OgcFilterOperator[\"PropertyIsLike\"] = \"PropertyIsLike\";\n    OgcFilterOperator[\"PropertyIsNotEqualTo\"] = \"PropertyIsNotEqualTo\";\n    OgcFilterOperator[\"Within\"] = \"Within\";\n    OgcFilterOperator[\"And\"] = \"And\";\n    OgcFilterOperator[\"Or\"] = \"Or\";\n    OgcFilterOperator[\"Not\"] = \"Not\";\n})(OgcFilterOperator || (OgcFilterOperator = {}));\n\nconst moment = moment_;\nclass OgcFilterWriter {\n    constructor() {\n        this.filterSequence = [];\n        this.operators = {\n            [OgcFilterOperator.PropertyIsEqualTo]: {\n                spatial: false,\n                fieldRestrict: []\n            },\n            [OgcFilterOperator.PropertyIsNotEqualTo]: {\n                spatial: false,\n                fieldRestrict: []\n            },\n            [OgcFilterOperator.PropertyIsLike]: {\n                spatial: false,\n                fieldRestrict: ['string']\n            },\n            [OgcFilterOperator.PropertyIsGreaterThan]: {\n                spatial: false,\n                fieldRestrict: ['number']\n            },\n            [OgcFilterOperator.PropertyIsGreaterThanOrEqualTo]: {\n                spatial: false,\n                fieldRestrict: ['number']\n            },\n            [OgcFilterOperator.PropertyIsLessThan]: {\n                spatial: false,\n                fieldRestrict: ['number']\n            },\n            [OgcFilterOperator.PropertyIsLessThanOrEqualTo]: {\n                spatial: false,\n                fieldRestrict: ['number']\n            },\n            [OgcFilterOperator.PropertyIsBetween]: {\n                spatial: false,\n                fieldRestrict: ['number']\n            },\n            [OgcFilterOperator.During]: { spatial: false, fieldRestrict: [] },\n            [OgcFilterOperator.PropertyIsNull]: {\n                spatial: false,\n                fieldRestrict: []\n            },\n            [OgcFilterOperator.Intersects]: {\n                spatial: true,\n                fieldRestrict: []\n            },\n            [OgcFilterOperator.Within]: { spatial: true, fieldRestrict: [] },\n            [OgcFilterOperator.Contains]: { spatial: true, fieldRestrict: [] }\n        };\n    }\n    defineOgcFiltersDefaultOptions(ogcFiltersOptions, fieldNameGeometry, srcType) {\n        let ogcFiltersDefaultValue = true; // default values for wfs.\n        if (srcType && srcType === 'wms') {\n            ogcFiltersDefaultValue = false;\n        }\n        ogcFiltersOptions = ogcFiltersOptions || {};\n        ogcFiltersOptions.enabled =\n            ogcFiltersOptions.enabled === undefined\n                ? ogcFiltersDefaultValue\n                : ogcFiltersOptions.enabled;\n        ogcFiltersOptions.editable =\n            ogcFiltersOptions.editable === undefined\n                ? ogcFiltersDefaultValue\n                : ogcFiltersOptions.editable;\n        ogcFiltersOptions.geometryName = fieldNameGeometry;\n        ogcFiltersOptions.advancedOgcFilters = true;\n        if (ogcFiltersOptions.enabled && (ogcFiltersOptions.pushButtons || ogcFiltersOptions.checkboxes\n            || ogcFiltersOptions.radioButtons || ogcFiltersOptions.select)) {\n            ogcFiltersOptions.advancedOgcFilters = false;\n        }\n        return ogcFiltersOptions;\n    }\n    buildFilter(filters, extent, proj, fieldNameGeometry, options) {\n        let ourBboxFilter;\n        let enableBbox;\n        if (/intersects|contains|within/gi.test(JSON.stringify(filters))) {\n            enableBbox = false;\n        }\n        else {\n            enableBbox = true;\n        }\n        if (filters) {\n            fieldNameGeometry =\n                filters.geometryName !== undefined\n                    ? filters.geometryName\n                    : fieldNameGeometry;\n        }\n        if (extent && filters) {\n            ourBboxFilter = bbox(fieldNameGeometry, extent, proj.getCode());\n        }\n        let filterAssembly;\n        if (filters) {\n            filters = this.checkIgoFiltersProperties(filters, fieldNameGeometry, proj);\n            if (extent && enableBbox) {\n                filterAssembly = and(ourBboxFilter, this.bundleFilter(filters, options));\n            }\n            else {\n                filterAssembly = this.bundleFilter(filters, options);\n            }\n        }\n        else {\n            return 'bbox=' + extent.join(',') + ',' + proj.getCode();\n        }\n        const wfsOptions = {\n            srsName: '',\n            featureNS: '',\n            featurePrefix: '',\n            featureTypes: ['featureTypes'],\n            filter: filterAssembly,\n            outputFormat: '',\n            geometryName: fieldNameGeometry\n        };\n        const query = new olFormatWFS().writeGetFeature(wfsOptions);\n        const str = new XMLSerializer().serializeToString(query);\n        const regexp1 = /typenames *=|typename *=\\\"featureTypes\\\" *>/gi;\n        const regexp2 = /<\\/Query><\\/GetFeature>/gi;\n        return 'filter=' + str.split(regexp1)[1].split(regexp2)[0];\n    }\n    bundleFilter(filterObject, options) {\n        if (filterObject instanceof Array) {\n            const logicalArray = [];\n            filterObject.forEach((element) => {\n                logicalArray.push(this.bundleFilter(element, options));\n            });\n            return logicalArray;\n        }\n        else {\n            if (filterObject.hasOwnProperty('logical')) {\n                return this.createFilter({\n                    operator: filterObject.logical,\n                    logicalArray: this.bundleFilter(filterObject.filters, options)\n                }, options);\n            }\n            else if (filterObject.hasOwnProperty('operator')) {\n                return this.createFilter(filterObject, options);\n            }\n        }\n    }\n    createFilter(filterOptions, options) {\n        const operator = filterOptions.operator;\n        const logicalArray = filterOptions.logicalArray;\n        const wfsPropertyName = filterOptions.propertyName;\n        const wfsPattern = filterOptions.pattern;\n        const wfsMatchCase = filterOptions.matchCase\n            ? filterOptions.matchCase\n            : true;\n        const wfsWildCard = filterOptions.wildCard ? filterOptions.wildCard : '*';\n        const wfsSingleChar = filterOptions.singleChar\n            ? filterOptions.singleChar\n            : '.';\n        const wfsEscapeChar = filterOptions.escapeChar\n            ? filterOptions.escapeChar\n            : '!';\n        const wfsLowerBoundary = filterOptions.lowerBoundary;\n        const wfsUpperBoundary = filterOptions.upperBoundary;\n        const wfsGeometryName = filterOptions.geometryName;\n        const wfsExtent = filterOptions.extent;\n        const wfsWktGeometry = filterOptions.wkt_geometry;\n        const wfsSrsName = filterOptions.srsName\n            ? filterOptions.srsName\n            : 'EPSG:3857';\n        const wfsBegin = this.parseFilterOptionDate(filterOptions.begin, options ? options.minDate : undefined);\n        const wfsEnd = this.parseFilterOptionDate(filterOptions.end, options ? options.maxDate : undefined);\n        const wfsExpression = filterOptions.expression;\n        let geometry;\n        if (wfsWktGeometry) {\n            const wkt = new olWKT();\n            geometry = wkt.readGeometry(wfsWktGeometry, {\n                dataProjection: wfsSrsName,\n                featureProjection: wfsSrsName || 'EPSG:3857'\n            });\n        }\n        switch (operator.toLowerCase()) {\n            case OgcFilterOperator.BBOX.toLowerCase():\n                return bbox(wfsGeometryName, wfsExtent, wfsSrsName);\n            case OgcFilterOperator.PropertyIsBetween.toLowerCase():\n                return between(wfsPropertyName, wfsLowerBoundary, wfsUpperBoundary);\n            case OgcFilterOperator.Contains.toLowerCase():\n                return contains(wfsGeometryName, geometry, wfsSrsName);\n            case OgcFilterOperator.During.toLowerCase():\n                return during(wfsPropertyName, wfsBegin, wfsEnd);\n            case OgcFilterOperator.PropertyIsEqualTo.toLowerCase():\n                return equalTo(wfsPropertyName, wfsExpression, wfsMatchCase);\n            case OgcFilterOperator.PropertyIsGreaterThan.toLowerCase():\n                return greaterThan(wfsPropertyName, wfsExpression);\n            case OgcFilterOperator.PropertyIsGreaterThanOrEqualTo.toLowerCase():\n                return greaterThanOrEqualTo(wfsPropertyName, wfsExpression);\n            case OgcFilterOperator.Intersects.toLowerCase():\n                return intersects(wfsGeometryName, geometry, wfsSrsName);\n            case OgcFilterOperator.PropertyIsNull.toLowerCase():\n                return isNull(wfsPropertyName);\n            case OgcFilterOperator.PropertyIsLessThan.toLowerCase():\n                return lessThan(wfsPropertyName, wfsExpression);\n            case OgcFilterOperator.PropertyIsLessThanOrEqualTo.toLowerCase():\n                return lessThanOrEqualTo(wfsPropertyName, wfsExpression);\n            case OgcFilterOperator.PropertyIsLike.toLowerCase():\n                return like(wfsPropertyName, wfsPattern.replace(/[()_]/gi, wfsSingleChar), wfsWildCard, wfsSingleChar, wfsEscapeChar, wfsMatchCase);\n            case OgcFilterOperator.PropertyIsNotEqualTo.toLowerCase():\n                return notEqualTo(wfsPropertyName, wfsExpression, wfsMatchCase);\n            case OgcFilterOperator.Within.toLowerCase():\n                return within(wfsGeometryName, geometry, wfsSrsName);\n            // LOGICAL\n            case OgcFilterOperator.And.toLowerCase():\n                return and.apply(null, logicalArray);\n            case OgcFilterOperator.Or.toLowerCase():\n                return or.apply(null, logicalArray);\n            case OgcFilterOperator.Not.toLowerCase():\n                return not.apply(null, logicalArray);\n            default:\n                return undefined;\n        }\n    }\n    defineInterfaceFilterSequence(filterObject, geometryName, logical = '', level = -1) {\n        if (filterObject instanceof Array) {\n            filterObject.forEach((element) => {\n                this.filterSequence.concat(this.defineInterfaceFilterSequence(element, geometryName, logical, level));\n            });\n        }\n        else {\n            if (filterObject.hasOwnProperty('logical')) {\n                level = level + 1;\n                this.filterSequence.concat(this.defineInterfaceFilterSequence(filterObject.filters, geometryName, filterObject.logical, level));\n            }\n            else if (filterObject.hasOwnProperty('operator')) {\n                this.filterSequence.push(this.addInterfaceFilter(filterObject, geometryName, level, logical));\n            }\n        }\n        return this.filterSequence;\n    }\n    computeAllowedOperators(fields, propertyName, defaultOperatorsType) {\n        let effectiveOperators = {};\n        let allowedOperators;\n        let fieldsHasSpatialOperator;\n        let includeContains;\n        if (fields && propertyName) {\n            const srcField = fields.find((field) => field.name === propertyName);\n            allowedOperators =\n                srcField && srcField.allowedOperatorsType\n                    ? srcField.allowedOperatorsType\n                    : defaultOperatorsType;\n        }\n        if (fields) {\n            fields.map((field) => {\n                if (!field.allowedOperatorsType) {\n                    return;\n                }\n                const allowedOperatorsType = field.allowedOperatorsType.toLowerCase();\n                if (allowedOperatorsType === OgcFilterOperatorType.All.toLowerCase() ||\n                    allowedOperatorsType ===\n                        OgcFilterOperatorType.Spatial.toLowerCase() ||\n                    allowedOperatorsType ===\n                        OgcFilterOperatorType.BasicAndSpatial.toLowerCase()) {\n                    fieldsHasSpatialOperator = true;\n                    if (allowedOperatorsType === OgcFilterOperatorType.All.toLowerCase()) {\n                        includeContains = true;\n                    }\n                }\n            });\n        }\n        allowedOperators = allowedOperators\n            ? allowedOperators\n            : OgcFilterOperatorType.BasicAndSpatial;\n        switch (allowedOperators.toLowerCase()) {\n            case OgcFilterOperatorType.All:\n                effectiveOperators = this.operators;\n                break;\n            case OgcFilterOperatorType.Spatial:\n                effectiveOperators = {\n                    [OgcFilterOperator.Intersects]: { spatial: true, fieldRestrict: [] },\n                    [OgcFilterOperator.Within]: { spatial: true, fieldRestrict: [] }\n                };\n                break;\n            case OgcFilterOperatorType.BasicAndSpatial:\n                effectiveOperators = {\n                    [OgcFilterOperator.PropertyIsEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.PropertyIsNotEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.Intersects]: { spatial: true, fieldRestrict: [] },\n                    [OgcFilterOperator.Within]: { spatial: true, fieldRestrict: [] }\n                };\n                break;\n            case OgcFilterOperatorType.Basic:\n                effectiveOperators = {\n                    [OgcFilterOperator.PropertyIsEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.PropertyIsNotEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    }\n                };\n                break;\n            case OgcFilterOperatorType.Time:\n                effectiveOperators = {\n                    [OgcFilterOperator.During]: { spatial: false, fieldRestrict: [] }\n                };\n                break;\n            case OgcFilterOperatorType.BasicNumericOperator:\n                effectiveOperators = {\n                    [OgcFilterOperator.PropertyIsEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.PropertyIsNotEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.PropertyIsGreaterThan]: {\n                        spatial: false,\n                        fieldRestrict: ['number']\n                    },\n                    [OgcFilterOperator.PropertyIsGreaterThanOrEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: ['number']\n                    },\n                    [OgcFilterOperator.PropertyIsLessThan]: {\n                        spatial: false,\n                        fieldRestrict: ['number']\n                    },\n                    [OgcFilterOperator.PropertyIsLessThanOrEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: ['number']\n                    }\n                };\n                break;\n            default:\n                effectiveOperators = {\n                    [OgcFilterOperator.PropertyIsEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.PropertyIsNotEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.Intersects]: { spatial: true, fieldRestrict: [] },\n                    [OgcFilterOperator.Within]: { spatial: true, fieldRestrict: [] }\n                };\n        }\n        if (fieldsHasSpatialOperator) {\n            effectiveOperators.Intersects = {\n                spatial: true,\n                fieldRestrict: []\n            };\n            effectiveOperators.Within = { spatial: true, fieldRestrict: [] };\n            if (includeContains) {\n                effectiveOperators.Contains = {\n                    spatial: true,\n                    fieldRestrict: []\n                };\n            }\n        }\n        return effectiveOperators;\n    }\n    addInterfaceFilter(igoOgcFilterObject, geometryName, level = 0, parentLogical = 'Or') {\n        if (!igoOgcFilterObject) {\n            igoOgcFilterObject = { operator: 'PropertyIsEqualTo' };\n        }\n        const f = {\n            propertyName: '',\n            operator: '',\n            active: '',\n            filterid: uuid(),\n            step: '',\n            begin: '',\n            end: '',\n            sliderOptions: {},\n            lowerBoundary: '',\n            upperBoundary: '',\n            expression: '',\n            pattern: '',\n            wildCard: '*',\n            singleChar: '.',\n            escapeChar: '!',\n            matchCase: true,\n            igoSpatialSelector: '',\n            igoSNRC: '',\n            geometryName: '',\n            geometry: '',\n            wkt_geometry: '',\n            extent: '',\n            srsName: '',\n            parentLogical: '',\n            level: 0\n        };\n        return Object.assign(f, {\n            parentLogical,\n            level,\n            geometryName\n        }, igoOgcFilterObject);\n    }\n    checkIgoFiltersProperties(filterObject, fieldNameGeometry, proj, active = false) {\n        const filterArray = [];\n        if (filterObject instanceof Array) {\n            filterObject.forEach((element) => {\n                filterArray.push(this.checkIgoFiltersProperties(element, fieldNameGeometry, proj, active));\n            });\n            return filterArray;\n        }\n        else {\n            if (filterObject.hasOwnProperty('logical')) {\n                return Object.assign({}, {\n                    logical: filterObject.logical,\n                    filters: this.checkIgoFiltersProperties(filterObject.filters, fieldNameGeometry, proj, active)\n                });\n            }\n            else if (filterObject.hasOwnProperty('operator')) {\n                return this.addFilterProperties(filterObject, fieldNameGeometry, proj, active);\n            }\n        }\n    }\n    addFilterProperties(igoOgcFilterObject, fieldNameGeometry, proj, active = false) {\n        const filterid = igoOgcFilterObject.hasOwnProperty('filterid')\n            ? igoOgcFilterObject.filterid\n            : uuid();\n        const status = igoOgcFilterObject.hasOwnProperty('active')\n            ? igoOgcFilterObject.active\n            : active;\n        const srsName = igoOgcFilterObject.hasOwnProperty('srsName')\n            ? igoOgcFilterObject.srsName\n            : proj\n                ? proj.getCode()\n                : 'EPSG:3857';\n        return Object.assign({}, {\n            filterid,\n            active: status,\n            igoSpatialSelector: 'fixedExtent',\n            srsName\n        }, igoOgcFilterObject, { geometryName: fieldNameGeometry });\n    }\n    rebuiltIgoOgcFilterObjectFromSequence(sequence) {\n        if (sequence instanceof Array) {\n            if (sequence.length >= 1) {\n                let lastParentLogical = sequence[0].parentLogical;\n                let nextElement;\n                let logicalArray = [];\n                let lastProcessedFilter;\n                sequence.forEach((uiFilter) => {\n                    const element = Object.assign({}, uiFilter);\n                    const index = sequence.indexOf(uiFilter);\n                    if (index >= 0 && index < sequence.length - 1) {\n                        nextElement = sequence[index + 1];\n                    }\n                    else {\n                        nextElement = element;\n                    }\n                    delete element.active;\n                    delete element.filterid;\n                    delete element.parentLogical;\n                    logicalArray.push(element);\n                    if (sequence.length === 1) {\n                        lastProcessedFilter = element;\n                    }\n                    else if (lastParentLogical !== nextElement.parentLogical) {\n                        if (logicalArray.length === 1) {\n                            console.log('You must set at ' +\n                                'least two operator in a logical (' +\n                                lastParentLogical +\n                                ')');\n                        }\n                        else {\n                            lastProcessedFilter = Object.assign({}, { logical: lastParentLogical, filters: logicalArray });\n                            logicalArray = [lastProcessedFilter];\n                            lastParentLogical = nextElement.parentLogical;\n                        }\n                    }\n                });\n                return lastProcessedFilter;\n            }\n            else {\n                return undefined;\n            }\n        }\n        else {\n            return undefined;\n        }\n    }\n    computeIgoSelector(selectors) {\n        if (selectors.groups.every((group) => group.computedSelectors !== undefined)) {\n            return selectors;\n        }\n        let selector;\n        if (selectors.groups && selectors.bundles) {\n            if (!selectors.bundles.every((bundle) => bundle.id !== undefined)) {\n                throw new Error('You must set an id for each of your bundles');\n            }\n            selector = ObjectUtils.copyDeep(selectors);\n            selector.groups.forEach((group) => {\n                group.title = group.title ? group.title : group.name;\n                group.enabled = group.enabled ? group.enabled : false;\n                group.computedSelectors = ObjectUtils.copyDeep(selector.bundles.filter((b) => group.ids.includes(b.id)));\n            });\n        }\n        else if (!selectors.groups && selectors.bundles) {\n            selector = ObjectUtils.copyDeep(selectors);\n            selector.groups = [\n                {\n                    title: 'group1',\n                    name: 'group1',\n                    computedSelectors: ObjectUtils.copyDeep(selector.bundles)\n                }\n            ];\n        }\n        else {\n            selector = {\n                bundles: selectors,\n                groups: [\n                    {\n                        title: 'group1',\n                        name: 'group1',\n                        computedSelectors: ObjectUtils.copyDeep(selectors)\n                    }\n                ],\n                selectorType: selector.selectorType\n            };\n        }\n        if (!selector.groups.find((selectorGroup) => selectorGroup.enabled)) {\n            selector.groups[0].enabled = true;\n        }\n        return selector;\n    }\n    handleOgcFiltersAppliedValue(options, fieldNameGeometry, extent, proj) {\n        const ogcFilters = options.ogcFilters;\n        if (!ogcFilters) {\n            return;\n        }\n        const conditions = [];\n        let filterQueryStringSelector = '';\n        let filterQueryStringAdvancedFilters = '';\n        if (ogcFilters.enabled && (ogcFilters.pushButtons || ogcFilters.checkboxes || ogcFilters.radioButtons || ogcFilters.select)) {\n            let selectors;\n            if (ogcFilters.pushButtons) {\n                selectors = ogcFilters.pushButtons;\n                const pushConditions = this.formatGroupAndFilter(ogcFilters, selectors);\n                for (const condition of pushConditions) {\n                    conditions.push(condition);\n                }\n            }\n            if (ogcFilters.checkboxes) {\n                selectors = ogcFilters.checkboxes;\n                const checkboxConditions = this.formatGroupAndFilter(ogcFilters, selectors);\n                for (const condition of checkboxConditions) {\n                    conditions.push(condition);\n                }\n            }\n            if (ogcFilters.radioButtons) {\n                selectors = ogcFilters.radioButtons;\n                const selectorsCorr = this.verifyMultipleEnableds(selectors);\n                const radioConditions = this.formatGroupAndFilter(ogcFilters, selectorsCorr);\n                for (const condition of radioConditions) {\n                    conditions.push(condition);\n                }\n            }\n            if (ogcFilters.select) {\n                selectors = ogcFilters.select;\n                const selectorsCorr = this.verifyMultipleEnableds(selectors);\n                const selectConditions = this.formatGroupAndFilter(ogcFilters, selectorsCorr);\n                for (const condition of selectConditions) {\n                    conditions.push(condition);\n                }\n            }\n            if (conditions.length >= 1) {\n                filterQueryStringSelector = this.buildFilter(conditions.length === 1\n                    ? conditions[0]\n                    : { logical: 'And', filters: conditions }, extent, proj, ogcFilters.geometryName);\n            }\n        }\n        if (ogcFilters.enabled && ogcFilters.filters) {\n            ogcFilters.geometryName = ogcFilters.geometryName || fieldNameGeometry;\n            const igoFilters = ogcFilters.filters;\n            filterQueryStringAdvancedFilters = this.buildFilter(igoFilters, extent, proj, ogcFilters.geometryName, options);\n        }\n        let filterQueryString = ogcFilters.advancedOgcFilters\n            ? filterQueryStringAdvancedFilters\n            : filterQueryStringSelector;\n        if (options.type === 'wms') {\n            filterQueryString = this.formatProcessedOgcFilter(filterQueryString, options.params.LAYERS);\n        }\n        if (options.type === 'wfs') {\n            filterQueryString = this.formatProcessedOgcFilter(filterQueryString, options.params.featureTypes);\n        }\n        return filterQueryString;\n    }\n    verifyMultipleEnableds(selectors) {\n        selectors.bundles.forEach(bundle => {\n            if (!bundle.multiple) {\n                const enableds = bundle.selectors.reduce((list, filter, index) => (filter.enabled) === true ? list.concat(index) : list, []);\n                if (enableds.length > 1) {\n                    enableds.splice(0, 1);\n                    enableds.forEach(index => {\n                        bundle.selectors[index].enabled = false;\n                    });\n                }\n            }\n        });\n        return selectors;\n    }\n    formatGroupAndFilter(ogcFilters, selectors) {\n        selectors = this.computeIgoSelector(selectors);\n        const selectorBundle = selectors.groups.find((g) => g.enabled).computedSelectors;\n        const conditions = [];\n        selectorBundle.map((bundle) => {\n            const bundleCondition = [];\n            const selectorsType = bundle.selectors;\n            if (!selectorsType) {\n                return;\n            }\n            selectorsType\n                .filter((ogcselector) => ogcselector.enabled === true)\n                .forEach((enabledSelector) => bundleCondition.push(enabledSelector.filters));\n            if (bundleCondition.length === 1) {\n                conditions.push(bundleCondition[0]);\n            }\n            else if (bundleCondition.length > 1) {\n                conditions.push({\n                    logical: bundle.logical,\n                    filters: bundleCondition\n                });\n            }\n        });\n        if (selectors.selectorType === 'pushButton') {\n            ogcFilters.pushButtons = selectors;\n        }\n        else if (selectors.selectorType === 'checkbox') {\n            ogcFilters.checkboxes = selectors;\n        }\n        else if (selectors.selectorType === 'radioButton') {\n            ogcFilters.radioButtons = selectors;\n        }\n        else if (selectors.selectorType === 'select') {\n            ogcFilters.select = selectors;\n        }\n        return conditions;\n    }\n    formatProcessedOgcFilter(processedFilter, layersOrTypenames) {\n        let appliedFilter = '';\n        if (processedFilter.length === 0 && layersOrTypenames.indexOf(',') === -1) {\n            appliedFilter = processedFilter;\n        }\n        else {\n            layersOrTypenames.split(',').forEach((layerOrTypenames) => {\n                appliedFilter = `${appliedFilter}(${processedFilter.replace('filter=', '')})`;\n            });\n        }\n        appliedFilter = appliedFilter.replace(/\\(\\)/g, '');\n        const filterValue = appliedFilter.length > 0\n            ? appliedFilter.replace('filter=', '')\n            : undefined;\n        return filterValue;\n    }\n    parseFilterOptionDate(value, defaultValue) {\n        if (!value) {\n            return defaultValue;\n        }\n        else if (moment(value).isValid()) {\n            return value;\n        }\n        else {\n            return undefined;\n        }\n    }\n}\n\nvar QueryFormat;\n(function (QueryFormat) {\n    QueryFormat[\"GML2\"] = \"gml2\";\n    QueryFormat[\"GML3\"] = \"gml3\";\n    QueryFormat[\"JSON\"] = \"json\";\n    QueryFormat[\"GEOJSON\"] = \"geojson\";\n    QueryFormat[\"GEOJSON2\"] = \"geojson2\";\n    QueryFormat[\"ESRIJSON\"] = \"esrijson\";\n    QueryFormat[\"TEXT\"] = \"text\";\n    QueryFormat[\"HTML\"] = \"html\";\n    QueryFormat[\"HTMLGML2\"] = \"htmlgml2\";\n})(QueryFormat || (QueryFormat = {}));\nvar QueryFormatMimeType;\n(function (QueryFormatMimeType) {\n    QueryFormatMimeType[\"GML2\"] = \"application/vnd.ogc.gml\";\n    QueryFormatMimeType[\"GML3\"] = \"application/vnd.ogc.gml/3.1.1\";\n    QueryFormatMimeType[\"JSON\"] = \"application/json\";\n    QueryFormatMimeType[\"GEOJSON\"] = \"application/geojson\";\n    QueryFormatMimeType[\"GEOJSON2\"] = \"geojson\";\n    QueryFormatMimeType[\"ESRIJSON\"] = \"application/json\";\n    QueryFormatMimeType[\"TEXT\"] = \"text/plain\";\n    QueryFormatMimeType[\"HTML\"] = \"text/html\";\n    QueryFormatMimeType[\"HTMLGML2\"] = \"text/html\";\n})(QueryFormatMimeType || (QueryFormatMimeType = {}));\nvar QueryHtmlTarget;\n(function (QueryHtmlTarget) {\n    QueryHtmlTarget[\"IFRAME\"] = \"iframe\";\n    QueryHtmlTarget[\"BLANK\"] = \"_blank\";\n})(QueryHtmlTarget || (QueryHtmlTarget = {}));\n\nconst defaultEpsg = 'EPSG:3857';\nconst defaultMaxFeatures = 5000;\nconst defaultWfsVersion = '2.0.0';\nconst defaultFieldNameGeometry = 'geometry';\nconst gmlRegex = new RegExp(/(.*)?gml(.*)?/gi);\nconst jsonRegex = new RegExp(/(.*)?json(.*)?/gi);\n/**\n * This method build/standardize WFS call query params based on the layer property.\n * @param wfsDataSourceOptions  WFSDataSourceOptions The common wfs datasource options interface\n * @param count  Number: Used to control the number of feature. Used to bypass whe wfs datasource options interface (maxFeatures)\n * @param epsg  String: Used to control the EPSG code (es: 'EPSG3857'). Used to bypass whe wfs datasource options interface (srsName)\n * @param properties  String: Used to control the queried fields  (WFS service).\n * @returns An array array of {name: '', value: ''} of predefined query params.\n */\nfunction formatWFSQueryString(dataSourceOptions, count, epsg, properties, startIndex = 0, forceDefaultOutputFormat = false) {\n    const versionWfs200 = '2.0.0'; // not the same usage as defaultWfsVersion.\n    const url = dataSourceOptions.urlWfs;\n    const paramsWFS = dataSourceOptions.paramsWFS;\n    const effectiveCount = count || defaultMaxFeatures;\n    const effectiveStartIndex = paramsWFS.version === versionWfs200 ? `startIndex=${startIndex}` : '';\n    const epsgCode = epsg || defaultEpsg;\n    let outputFormat = paramsWFS.outputFormat\n        ? `outputFormat=${paramsWFS.outputFormat}`\n        : '';\n    let version = paramsWFS.version\n        ? `version=${paramsWFS.version}`\n        : `version=${defaultWfsVersion}`;\n    const paramTypename = paramsWFS.version === versionWfs200 ? 'typenames' : 'typename';\n    const featureTypes = `${paramTypename}=${paramsWFS.featureTypes}`;\n    const paramMaxFeatures = paramsWFS.version === versionWfs200 ? 'count' : 'maxFeatures';\n    let cnt = count\n        ? `${paramMaxFeatures}=${effectiveCount}`\n        : paramsWFS.maxFeatures\n            ? `${paramMaxFeatures}=${paramsWFS.maxFeatures}`\n            : `${paramMaxFeatures}=${effectiveCount}`;\n    if (forceDefaultOutputFormat) {\n        outputFormat = '';\n        version = 'version=1.1.0';\n        cnt = cnt.replace('count', 'maxFeatures');\n    }\n    const srs = epsg\n        ? `srsname=${epsgCode}`\n        : paramsWFS.srsName\n            ? 'srsname=' + paramsWFS.srsName\n            : `srsname=${epsgCode}`;\n    let propertyName = '';\n    let valueReference = '';\n    if (properties) {\n        propertyName = `propertyName=${properties}`;\n        valueReference = `valueReference=${properties}`;\n    }\n    const sourceFields = dataSourceOptions.sourceFields;\n    if (!propertyName && sourceFields && sourceFields.length > 0) {\n        const fieldsNames = [];\n        dataSourceOptions.sourceFields.forEach(sourcefield => {\n            fieldsNames.push(sourcefield.name);\n        });\n        propertyName = `propertyName=${fieldsNames.join(',')},${paramsWFS.fieldNameGeometry}`;\n    }\n    const separator = url.indexOf('?') === -1 ? '?' : '&';\n    const getCapabilities = `${url}${separator}service=WFS&request=GetCapabilities&${version}`;\n    let getFeature = `${url}${separator}service=WFS&request=GetFeature&${version}&${featureTypes}&`;\n    getFeature += `${outputFormat}&${srs}&${cnt}&${propertyName}&${effectiveStartIndex}`;\n    let getpropertyvalue = `${url}?service=WFS&request=GetPropertyValue&version=${versionWfs200}&${featureTypes}&`;\n    getpropertyvalue += `&${cnt}&${valueReference}`;\n    return [\n        { name: 'outputformat', value: outputFormat },\n        { name: 'version', value: version },\n        { name: 'typename', value: featureTypes },\n        { name: 'count', value: cnt },\n        { name: 'srsname', value: srs },\n        { name: 'propertyname', value: propertyName },\n        { name: 'valuereference', value: valueReference },\n        { name: 'getcapabilities', value: getCapabilities.replace(/&&/g, '&') },\n        { name: 'getfeature', value: getFeature.replace(/&&/g, '&') },\n        { name: 'getpropertyvalue', value: getpropertyvalue.replace(/&&/g, '&') }\n    ];\n}\n/**\n * Validate/Modify layer's wfs options based on :\n * 1- an Openlayers's issue with GML provided from WFS. Refer to\n * https://github.com/openlayers/openlayers/pull/6400\n * 2- Set default values for optionals parameters.\n * @param wfsDataSourceOptions  WFSDataSourceOptions The common wfs datasource options interface\n * @returns An array array of {name: '', value: ''} of predefined query params.\n */\nfunction checkWfsParams(wfsDataSourceOptions, srcType) {\n    if (srcType && srcType === 'wfs') {\n        // reassignation of params to paramsWFS and url to urlWFS to have a common interface with wms-wfs datasources\n        wfsDataSourceOptions.paramsWFS = wfsDataSourceOptions.params;\n    }\n    const paramsWFS = wfsDataSourceOptions.paramsWFS;\n    wfsDataSourceOptions.urlWfs =\n        wfsDataSourceOptions.urlWfs || wfsDataSourceOptions.url;\n    paramsWFS.version = paramsWFS.version || defaultWfsVersion;\n    paramsWFS.fieldNameGeometry =\n        paramsWFS.fieldNameGeometry || defaultFieldNameGeometry;\n    paramsWFS.maxFeatures = paramsWFS.maxFeatures || defaultMaxFeatures;\n    let outputFormat;\n    if (paramsWFS.outputFormat) {\n        outputFormat = paramsWFS.outputFormat;\n    }\n    if (gmlRegex.test(outputFormat) || !outputFormat) {\n        paramsWFS.version = '1.1.0';\n    }\n    return Object.assign({}, wfsDataSourceOptions);\n}\nfunction getFormatFromOptions(options) {\n    const wfsOptions = options;\n    let olFormatCls = WFS;\n    const outputFormat = wfsOptions.paramsWFS.outputFormat\n        ? wfsOptions.paramsWFS.outputFormat\n        : undefined;\n    if (!outputFormat) {\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    if (olformat[outputFormat]) {\n        olFormatCls = olformat[outputFormat];\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('gml2')) {\n        olFormatCls = WFS;\n        return new olFormatCls(Object.assign(Object.assign({}, wfsOptions.formatOptions), { gmlFormat: olFormatGML2 }));\n    }\n    else if (outputFormat.toLowerCase().match('gml32')) {\n        olFormatCls = WFS;\n        return new olFormatCls(Object.assign(Object.assign({}, wfsOptions.formatOptions), { gmlFormat: olFormatGML32 }));\n    }\n    else if (outputFormat.toLowerCase().match('gml3')) {\n        olFormatCls = WFS;\n        return new olFormatCls(Object.assign(Object.assign({}, wfsOptions.formatOptions), { gmlFormat: olFormatGML3 }));\n    }\n    else if (outputFormat.toLowerCase().match('topojson')) {\n        olFormatCls = TopoJSON;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('geojson')) {\n        olFormatCls = GeoJSON;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('esrijson')) {\n        olFormatCls = EsriJSON;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('json')) {\n        olFormatCls = GeoJSON;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('gpx')) {\n        olFormatCls = GPX;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('WKT')) {\n        olFormatCls = WKT;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('osmxml')) {\n        olFormatCls = olFormatOSMXML;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('kml')) {\n        olFormatCls = KML;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    return new olFormatCls();\n}\n\nclass WMSDataSource extends DataSource {\n    constructor(options, wfsService) {\n        super(options);\n        this.options = options;\n        this.wfsService = wfsService;\n        this.ogcFilters$ = new BehaviorSubject(undefined);\n        this.timeFilter$ = new BehaviorSubject(undefined);\n        const sourceParams = options.params;\n        const dpi = sourceParams.DPI || 96;\n        sourceParams.DPI = dpi;\n        sourceParams.MAP_RESOLUTION = dpi;\n        sourceParams.FORMAT_OPTIONS = 'dpi:' + dpi;\n        if (options.refreshIntervalSec && options.refreshIntervalSec > 0) {\n            setInterval(() => {\n                this.refresh();\n            }, options.refreshIntervalSec * 1000); // Convert seconds to MS\n        }\n        let fieldNameGeometry = defaultFieldNameGeometry;\n        // ####   START if paramsWFS\n        if (options.paramsWFS) {\n            const wfsCheckup = checkWfsParams(options, 'wms');\n            ObjectUtils.mergeDeep(options.paramsWFS, wfsCheckup.paramsWFS);\n            fieldNameGeometry =\n                options.paramsWFS.fieldNameGeometry || fieldNameGeometry;\n            options.download = Object.assign({}, options.download, {\n                dynamicUrl: this.buildDynamicDownloadUrlFromParamsWFS(options)\n            });\n        } //  ####   END  if paramsWFS\n        if (!options.sourceFields || options.sourceFields.length === 0) {\n            options.sourceFields = [];\n        }\n        else {\n            options.sourceFields.forEach(sourceField => {\n                sourceField.alias = sourceField.alias\n                    ? sourceField.alias\n                    : sourceField.name;\n                // to allow only a list of sourcefield with names\n            });\n        }\n        const initOgcFilters = options\n            .ogcFilters;\n        const ogcFilterWriter = new OgcFilterWriter();\n        if (!initOgcFilters) {\n            options.ogcFilters = ogcFilterWriter.defineOgcFiltersDefaultOptions(initOgcFilters, fieldNameGeometry, 'wms');\n        }\n        else {\n            initOgcFilters.advancedOgcFilters = (initOgcFilters.pushButtons || initOgcFilters.checkboxes\n                || initOgcFilters.radioButtons || initOgcFilters.select)\n                ? false\n                : true;\n            if (initOgcFilters.pushButtons) {\n                initOgcFilters.pushButtons.selectorType = 'pushButton';\n            }\n            if (initOgcFilters.checkboxes) {\n                initOgcFilters.checkboxes.selectorType = 'checkbox';\n            }\n            if (initOgcFilters.radioButtons) {\n                initOgcFilters.radioButtons.selectorType = 'radioButton';\n            }\n            if (initOgcFilters.select) {\n                initOgcFilters.select.selectorType = 'select';\n            }\n        }\n        if (sourceParams.LAYERS.split(',').length > 1 &&\n            initOgcFilters &&\n            initOgcFilters.enabled) {\n            console.log('*******************************');\n            console.log('BE CAREFULL, YOUR WMS LAYERS (' +\n                sourceParams.LAYERS +\n                ') MUST SHARE THE SAME FIELDS TO ALLOW ogcFilters TO WORK !! ');\n            console.log('*******************************');\n        }\n        if (options.paramsWFS &&\n            initOgcFilters &&\n            initOgcFilters.enabled &&\n            initOgcFilters.editable &&\n            (options.sourceFields || []).filter(sf => !sf.values).length > 0) {\n            this.wfsService.getSourceFieldsFromWFS(options);\n        }\n        const filterQueryString = ogcFilterWriter.handleOgcFiltersAppliedValue(options, fieldNameGeometry);\n        sourceParams.FILTER = filterQueryString;\n        this.setOgcFilters(initOgcFilters, true);\n        const timeFilterableDataSourceOptions = options;\n        if ((timeFilterableDataSourceOptions === null || timeFilterableDataSourceOptions === void 0 ? void 0 : timeFilterableDataSourceOptions.timeFilterable) && (timeFilterableDataSourceOptions === null || timeFilterableDataSourceOptions === void 0 ? void 0 : timeFilterableDataSourceOptions.timeFilter)) {\n            this.setTimeFilter(timeFilterableDataSourceOptions.timeFilter, true);\n        }\n    }\n    get params() {\n        return this.options.params;\n    }\n    get queryTitle() {\n        return this.options.queryTitle\n            ? this.options.queryTitle\n            : 'title';\n    }\n    get mapLabel() {\n        return this.options.mapLabel;\n    }\n    get queryHtmlTarget() {\n        return this.options.queryHtmlTarget\n            ? this.options.queryHtmlTarget\n            : QueryHtmlTarget.BLANK;\n    }\n    set ogcFilters(value) {\n        this.options.ogcFilters = value;\n    }\n    get ogcFilters() {\n        return this.options.ogcFilters;\n    }\n    set timeFilter(value) {\n        this.options.timeFilter = value;\n    }\n    get timeFilter() {\n        return this.options.timeFilter;\n    }\n    refresh() {\n        this.ol.updateParams({ igoRefresh: Math.random() });\n    }\n    buildDynamicDownloadUrlFromParamsWFS(asWFSDataSourceOptions) {\n        const queryStringValues = formatWFSQueryString(asWFSDataSourceOptions);\n        const downloadUrl = queryStringValues.find(f => f.name === 'getfeature')\n            .value;\n        return downloadUrl;\n    }\n    createOlSource() {\n        return new olSourceImageWMS(Object.assign({ ratio: 1 }, this.options));\n    }\n    setOgcFilters(ogcFilters, triggerEvent = false) {\n        this.ogcFilters = ogcFilters;\n        if (triggerEvent) {\n            this.ogcFilters$.next(this.ogcFilters);\n        }\n    }\n    setTimeFilter(timeFilter, triggerEvent = false) {\n        this.timeFilter = timeFilter;\n        if (triggerEvent) {\n            this.timeFilter$.next(this.timeFilter);\n        }\n    }\n    getLegend(style, view) {\n        let legend = super.getLegend();\n        if (legend.length > 0 && (style === undefined && !(view === null || view === void 0 ? void 0 : view.scale))) {\n            return legend;\n        }\n        let contentDependent = false;\n        let projParam;\n        if ((view === null || view === void 0 ? void 0 : view.size) && (view === null || view === void 0 ? void 0 : view.extent) && (view === null || view === void 0 ? void 0 : view.projection) && this.options.contentDependentLegend) {\n            projParam = this.params.VERSION === '1.3.0' || this.params.VERSION === undefined ? 'CRS' : 'SRS';\n            contentDependent = true;\n        }\n        const sourceParams = this.params;\n        let layers = [];\n        if (sourceParams.LAYERS !== undefined) {\n            layers = sourceParams.LAYERS.split(',');\n        }\n        const baseUrl = this.options.url.replace(/\\?$/, '');\n        const params = [\n            'REQUEST=GetLegendGraphic',\n            'SERVICE=WMS',\n            'FORMAT=image/png',\n            'SLD_VERSION=1.1.0',\n            `VERSION=${sourceParams.VERSION || '1.3.0'}`\n        ];\n        if (style !== undefined) {\n            params.push(`STYLE=${style}`);\n        }\n        if ((view === null || view === void 0 ? void 0 : view.scale) !== undefined) {\n            params.push(`SCALE=${view.scale}`);\n        }\n        if (contentDependent) {\n            params.push(`WIDTH=${view.size[0]}`);\n            params.push(`HEIGHT=${view.size[1]}`);\n            params.push(`BBOX=${view.extent.join(',')}`);\n            params.push(`${projParam}=${view.projection}`);\n        }\n        legend = layers.map((layer) => {\n            const separator = baseUrl.match(/\\?/) ? '&' : '?';\n            return {\n                url: `${baseUrl}${separator}${params.join('&')}&LAYER=${layer}`,\n                title: layers.length > 1 ? layer : undefined,\n                currentStyle: style === undefined ? undefined : style\n            };\n        });\n        return legend;\n    }\n    onUnwatch() { }\n}\n\nclass LayerSyncWatcher extends Watcher {\n    constructor(layer, map) {\n        super();\n        this.ol = layer.ol;\n        this.layer = layer;\n        this.dataSource = layer.options.source;\n        this.map = map;\n        this.ogcFilterWriter = new OgcFilterWriter();\n    }\n    watch() {\n        this.ol.on('propertychange', evt => this.transferCommonProperties(evt));\n        if (this.dataSource.ogcFilters$) {\n            this.ogcFilters$$ = this.dataSource.ogcFilters$\n                .subscribe(ogcFilters => this.transferOgcFiltersProperties(ogcFilters));\n        }\n        if (this.dataSource.timeFilter$) {\n            this.timeFilter$$ = this.dataSource.timeFilter$\n                .subscribe(timeFilter => this.transferTimeFilterProperties(timeFilter));\n        }\n        this.syncChildLayers();\n    }\n    unwatch() {\n        this.ol.un('propertychange', evt => this.transferCommonProperties(evt));\n        if (this.ogcFilters$$) {\n            this.ogcFilters$$.unsubscribe();\n        }\n        if (this.timeFilter$$) {\n            this.timeFilter$$.unsubscribe();\n        }\n    }\n    syncChildLayers() {\n        // Force the sync the child layers with parent on the first load.\n        if (!this.map) {\n            return;\n        }\n        this.map.status$\n            .pipe(first())\n            .subscribe(() => {\n            this.map.layers\n                .filter(layer => { var _a; return (_a = layer.options.linkedLayers) === null || _a === void 0 ? void 0 : _a.links; })\n                .map(layer => {\n                layer.options.linkedLayers.links.map(link => {\n                    var _a, _b, _c, _d, _e, _f;\n                    if (((_a = link.properties) === null || _a === void 0 ? void 0 : _a.indexOf(LinkedProperties.VISIBLE)) !== -1) {\n                        layer.ol.set('visible', !(layer.visible), false);\n                        layer.ol.set('visible', !(layer.visible), false);\n                        layer.visible = layer.visible;\n                    }\n                    if (((_b = link.properties) === null || _b === void 0 ? void 0 : _b.indexOf(LinkedProperties.OPACITY)) !== -1) {\n                        const baseOpacity = layer.ol.get('opacity');\n                        layer.ol.set('opacity', 0, false);\n                        layer.ol.set('opacity', baseOpacity, false);\n                        layer.opacity = layer.opacity;\n                    }\n                    if (((_c = link.properties) === null || _c === void 0 ? void 0 : _c.indexOf(LinkedProperties.MINRESOLUTION)) !== -1) {\n                        const baseMinResolution = layer.ol.get('minResolution');\n                        layer.ol.set('minResolution', 0, false);\n                        layer.ol.set('minResolution', baseMinResolution, false);\n                        layer.minResolution = layer.minResolution;\n                    }\n                    if (((_d = link.properties) === null || _d === void 0 ? void 0 : _d.indexOf(LinkedProperties.MAXRESOLUTION)) !== -1) {\n                        const baseMaxResolution = layer.ol.get('maxResolution');\n                        layer.ol.set('maxResolution', 0, false);\n                        layer.ol.set('maxResolution', baseMaxResolution, false);\n                        layer.minResolution = layer.minResolution;\n                    }\n                    if (((_e = link.properties) === null || _e === void 0 ? void 0 : _e.indexOf(LinkedProperties.OGCFILTERS)) !== -1) {\n                        const ogcFilters$ = layer.dataSource.ogcFilters$;\n                        ogcFilters$.next(ogcFilters$.value);\n                    }\n                    if (((_f = link.properties) === null || _f === void 0 ? void 0 : _f.indexOf(LinkedProperties.TIMEFILTER)) !== -1) {\n                        const timeFilter$ = layer.dataSource.timeFilter$;\n                        timeFilter$.next(timeFilter$.value);\n                    }\n                });\n            });\n        });\n    }\n    transferCommonProperties(layerChange) {\n        const key = layerChange.key;\n        const layerChangeProperties = layerChange.target.getProperties();\n        const newValue = layerChangeProperties[key];\n        if (['visible', 'opacity', 'minResolution', 'maxResolution'].indexOf(key) === -1) {\n            return;\n        }\n        const linkedLayers = layerChangeProperties.linkedLayers;\n        if (!linkedLayers) {\n            return;\n        }\n        const currentLinkedId = linkedLayers.linkId;\n        const currentLinks = linkedLayers.links;\n        const isParentLayer = currentLinks ? true : false;\n        if (isParentLayer) {\n            // search for child layers\n            const silent = true;\n            currentLinks.map(link => {\n                if (!link.properties || link.properties.indexOf(key) === -1) {\n                    return;\n                }\n                link.linkedIds.map(linkedId => {\n                    const layerToApply = this.map.layers.find(layer => { var _a; return ((_a = layer.options.linkedLayers) === null || _a === void 0 ? void 0 : _a.linkId) === linkedId; });\n                    if (layerToApply) {\n                        layerToApply.ol.set(key, newValue, silent);\n                        if (key === 'visible') {\n                            layerToApply.visible$.next(newValue);\n                        }\n                    }\n                });\n            });\n        }\n        else {\n            // search for parent layer\n            const silent = false;\n            this.map.layers.map(layer => {\n                var _a;\n                if ((_a = layer.options.linkedLayers) === null || _a === void 0 ? void 0 : _a.links) {\n                    layer.options.linkedLayers.links.map(l => {\n                        if (l.properties && l.properties.indexOf(key) !== -1 &&\n                            l.bidirectionnal !== false && l.linkedIds.indexOf(currentLinkedId) !== -1) {\n                            layer.ol.set(key, newValue, silent);\n                            if (key === 'visible') {\n                                layer.visible$.next(newValue);\n                            }\n                        }\n                    });\n                }\n            });\n        }\n    }\n    transferOgcFiltersProperties(ogcFilters) {\n        const linkedLayers = this.ol.getProperties().linkedLayers;\n        if (!linkedLayers) {\n            return;\n        }\n        const currentLinkedId = linkedLayers.linkId;\n        const currentLinks = linkedLayers.links;\n        const isParentLayer = currentLinks ? true : false;\n        if (isParentLayer) {\n            // search for child layers\n            currentLinks.map(link => {\n                if (!link.properties || link.properties.indexOf(LinkedProperties.OGCFILTERS) === -1) {\n                    return;\n                }\n                link.linkedIds.map(linkedId => {\n                    const layerToApply = this.map.layers.find(layer => { var _a; return ((_a = layer.options.linkedLayers) === null || _a === void 0 ? void 0 : _a.linkId) === linkedId; });\n                    if (layerToApply) {\n                        const layerType = layerToApply.ol.getProperties().sourceOptions.type;\n                        layerToApply.dataSource.setOgcFilters(ogcFilters, false);\n                        if (layerType === 'wfs') {\n                            layerToApply.ol.getSource().clear();\n                            layerToApply.ol.getSource().refresh();\n                        }\n                        if (layerType === 'wms') {\n                            let appliedOgcFilter;\n                            if (this.ol.getProperties().sourceOptions.type === 'wfs') {\n                                appliedOgcFilter = this.ogcFilterWriter.handleOgcFiltersAppliedValue(this.layer.dataSource.options, this.dataSource.options.fieldNameGeometry, undefined, this.map.viewController.getOlProjection());\n                            }\n                            else if (this.ol.getProperties().sourceOptions.type === 'wms') {\n                                appliedOgcFilter = this.dataSource.ol.getParams().FILTER;\n                            }\n                            layerToApply.dataSource.ol.updateParams({ FILTER: appliedOgcFilter });\n                        }\n                    }\n                });\n            });\n        }\n        else {\n            // search for parent layer\n            this.map.layers.map(layer => {\n                var _a;\n                if ((_a = layer.options.linkedLayers) === null || _a === void 0 ? void 0 : _a.links) {\n                    layer.options.linkedLayers.links.map(l => {\n                        if (l.properties && l.properties.indexOf(LinkedProperties.OGCFILTERS) !== -1 &&\n                            l.bidirectionnal !== false && l.linkedIds.indexOf(currentLinkedId) !== -1) {\n                            const layerType = layer.ol.getProperties().sourceOptions.type;\n                            if (layerType === 'wfs') {\n                                layer.dataSource.setOgcFilters(ogcFilters, true);\n                                layer.ol.getSource().clear();\n                                layer.ol.getSource().refresh();\n                            }\n                            if (layerType === 'wms') {\n                                let appliedOgcFilter;\n                                if (this.ol.getProperties().sourceOptions.type === 'wfs') {\n                                    appliedOgcFilter = this.ogcFilterWriter.handleOgcFiltersAppliedValue(layer.dataSource.options, this.dataSource.options.fieldNameGeometry, undefined, this.map.viewController.getOlProjection());\n                                }\n                                else if (this.ol.getProperties().sourceOptions.type === 'wms') {\n                                    appliedOgcFilter = this.dataSource.ol.getParams().FILTER;\n                                }\n                                layer.dataSource.ol.updateParams({ FILTER: appliedOgcFilter });\n                                layer.dataSource.setOgcFilters(ogcFilters, true);\n                            }\n                        }\n                    });\n                }\n            });\n        }\n    }\n    transferTimeFilterProperties(timeFilter) {\n        const linkedLayers = this.ol.getProperties().linkedLayers;\n        if (!linkedLayers) {\n            return;\n        }\n        const currentLinkedId = linkedLayers.linkId;\n        const currentLinks = linkedLayers.links;\n        const isParentLayer = currentLinks ? true : false;\n        if (isParentLayer) {\n            // search for child layers\n            currentLinks.map(link => {\n                if (!link.properties || link.properties.indexOf(LinkedProperties.TIMEFILTER) === -1) {\n                    return;\n                }\n                link.linkedIds.map(linkedId => {\n                    const childLayer = this.map.layers.find(layer => {\n                        var _a;\n                        return layer.dataSource instanceof WMSDataSource &&\n                            ((_a = layer.options.linkedLayers) === null || _a === void 0 ? void 0 : _a.linkId) === linkedId;\n                    });\n                    if (childLayer) {\n                        childLayer.dataSource.setTimeFilter(timeFilter, false);\n                        const appliedTimeFilter = this.ol.values_.source.getParams().TIME;\n                        childLayer.dataSource.ol.updateParams({ TIME: appliedTimeFilter });\n                    }\n                });\n            });\n        }\n        else {\n            // search for parent layer\n            this.map.layers\n                .filter(layer => layer.dataSource instanceof WMSDataSource)\n                .map(parentLayer => {\n                var _a;\n                if ((_a = parentLayer.options.linkedLayers) === null || _a === void 0 ? void 0 : _a.links) {\n                    parentLayer.options.linkedLayers.links.map(l => {\n                        if (l.properties && l.properties.indexOf(LinkedProperties.TIMEFILTER) !== -1 &&\n                            l.bidirectionnal !== false && l.linkedIds.indexOf(currentLinkedId) !== -1) {\n                            const appliedTimeFilter = this.ol.values_.source.getParams().TIME;\n                            parentLayer.dataSource.ol.updateParams({ TIME: appliedTimeFilter });\n                            parentLayer.dataSource.setTimeFilter(timeFilter, true);\n                        }\n                    });\n                }\n            });\n        }\n    }\n}\n\nclass Layer {\n    constructor(options, messageService, authInterceptor) {\n        this.options = options;\n        this.messageService = messageService;\n        this.authInterceptor = authInterceptor;\n        this.legendCollapsed = true;\n        this.firstLoadComponent = true;\n        this.hasBeenVisible$ = new BehaviorSubject(undefined);\n        this.isInResolutionsRange$ = new BehaviorSubject(false);\n        this.visible$ = new BehaviorSubject(undefined);\n        this.displayed$ = combineLatest([\n            this.isInResolutionsRange$,\n            this.visible$\n        ]).pipe(map((bunch) => bunch[0] && bunch[1]));\n        this.dataSource = options.source;\n        this.ol = this.createOlLayer();\n        if (options.zIndex !== undefined) {\n            this.zIndex = options.zIndex;\n        }\n        if (options.baseLayer && options.visible === undefined) {\n            options.visible = false;\n        }\n        this.maxResolution = options.maxResolution || getResolutionFromScale(Number(options.maxScaleDenom));\n        this.minResolution = options.minResolution || getResolutionFromScale(Number(options.minScaleDenom));\n        this.visible = options.visible === undefined ? true : options.visible;\n        this.opacity = options.opacity === undefined ? 1 : options.opacity;\n        if (options.legendOptions &&\n            (options.legendOptions.url || options.legendOptions.html)) {\n            this.legend = this.dataSource.setLegend(options.legendOptions);\n        }\n        this.legendCollapsed = options.legendOptions\n            ? options.legendOptions.collapsed\n                ? options.legendOptions.collapsed\n                : true\n            : true;\n        this.ol.set('_layer', this, true);\n    }\n    get id() {\n        return this.options.id || this.dataSource.id;\n    }\n    get alias() {\n        return this.options.alias;\n    }\n    get title() {\n        return this.options.title;\n    }\n    set title(title) {\n        this.options.title = title;\n    }\n    get zIndex() {\n        return this.ol.getZIndex();\n    }\n    set zIndex(zIndex) {\n        this.ol.setZIndex(zIndex);\n    }\n    get baseLayer() {\n        return this.options.baseLayer;\n    }\n    set baseLayer(baseLayer) {\n        this.options.baseLayer = baseLayer;\n    }\n    get opacity() {\n        return this.ol.get('opacity');\n    }\n    set opacity(opacity) {\n        this.ol.setOpacity(opacity);\n    }\n    set isInResolutionsRange(value) {\n        this.isInResolutionsRange$.next(value);\n    }\n    get isInResolutionsRange() {\n        return this.isInResolutionsRange$.value;\n    }\n    set maxResolution(value) {\n        this.ol.setMaxResolution(value || Infinity);\n        this.updateInResolutionsRange();\n    }\n    get maxResolution() {\n        return this.ol.getMaxResolution();\n    }\n    set minResolution(value) {\n        this.ol.setMinResolution(value || 0);\n        this.updateInResolutionsRange();\n    }\n    get minResolution() {\n        return this.ol.getMinResolution();\n    }\n    set visible(value) {\n        this.ol.setVisible(value);\n        this.visible$.next(value);\n        if (!this.hasBeenVisible$.value && value && this.messageService) {\n            this.hasBeenVisible$.next(value);\n        }\n    }\n    get visible() {\n        return this.visible$.value;\n    }\n    get displayed() {\n        return this.visible && this.isInResolutionsRange;\n    }\n    get showInLayerList() {\n        return this.options.showInLayerList !== false;\n    }\n    setMap(igoMap) {\n        this.map = igoMap;\n        this.unobserveResolution();\n        if (igoMap !== undefined) {\n            this.observeResolution();\n            this.layerSyncWatcher = new LayerSyncWatcher(this, this.map);\n            this.layerSyncWatcher.subscribe(() => { });\n            this.hasBeenVisible$$ = this.hasBeenVisible$.subscribe(() => {\n                if (this.options.messages && this.visible) {\n                    this.options.messages.map(message => {\n                        message.title = message.title;\n                        message.text = message.text;\n                        this.messageService.message(message);\n                    });\n                }\n            });\n        }\n        else {\n            this.layerSyncWatcher.unsubscribe();\n        }\n    }\n    observeResolution() {\n        this.resolution$$ = this.map.viewController.resolution$.subscribe(() => this.updateInResolutionsRange());\n    }\n    unobserveResolution() {\n        if (this.resolution$$ !== undefined) {\n            this.resolution$$.unsubscribe();\n            this.resolution$$ = undefined;\n        }\n    }\n    updateInResolutionsRange() {\n        if (this.map !== undefined) {\n            const resolution = this.map.viewController.getResolution();\n            const minResolution = this.minResolution;\n            const maxResolution = this.maxResolution === undefined ? Infinity : this.maxResolution;\n            this.isInResolutionsRange = resolution >= minResolution && resolution <= maxResolution;\n        }\n        else {\n            this.isInResolutionsRange = false;\n        }\n    }\n}\n\nclass MetadataService {\n    constructor() { }\n    open(metadata) {\n        if (metadata.extern) {\n            window.open(metadata.url, '_blank');\n        }\n    }\n}\nMetadataService.ɵfac = function MetadataService_Factory(t) { return new (t || MetadataService)(); };\nMetadataService.ɵprov = ɵɵdefineInjectable({ token: MetadataService, factory: MetadataService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MetadataService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nfunction MetadataButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 1);\n    ɵɵlistener(\"click\", function MetadataButtonComponent_button_0_Template_button_click_0_listener() { ɵɵrestoreView(_r2); const ctx_r1 = ɵɵnextContext(); return ctx_r1.openMetadata(ctx_r1.options.metadata); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 2);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.geo.metadata.show\"))(\"color\", ctx_r0.color);\n} }\nfunction MetadataAbstractComponent_mat_dialog_content_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-dialog-content\", 3);\n    ɵɵelementStart(1, \"h3\");\n    ɵɵtext(2);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ctx_r0.data.abstract);\n} }\nfunction MetadataAbstractComponent_mat_dialog_content_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-dialog-content\", 3);\n    ɵɵelement(1, \"h3\", 4);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"innerHTML\", ctx_r1.data.abstract, ɵɵsanitizeHtml);\n} }\nclass MetadataButtonComponent {\n    constructor(metadataService, dialog) {\n        this.metadataService = metadataService;\n        this.dialog = dialog;\n        this._color = 'primary';\n    }\n    get layer() {\n        return this._layer;\n    }\n    set layer(value) {\n        this._layer = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    openMetadata(metadata) {\n        if (metadata.extern) {\n            this.metadataService.open(metadata);\n        }\n        else if (!metadata.extern && metadata.abstract) {\n            this.dialog.open(MetadataAbstractComponent, {\n                data: {\n                    layerTitle: this.layer.title,\n                    abstract: metadata.abstract,\n                    type: metadata.type\n                }\n            });\n        }\n    }\n    get options() {\n        if (!this.layer) {\n            return;\n        }\n        return this.layer.options;\n    }\n}\nMetadataButtonComponent.ɵfac = function MetadataButtonComponent_Factory(t) { return new (t || MetadataButtonComponent)(ɵɵdirectiveInject(MetadataService), ɵɵdirectiveInject(MatDialog)); };\nMetadataButtonComponent.ɵcmp = ɵɵdefineComponent({ type: MetadataButtonComponent, selectors: [[\"igo-metadata-button\"]], inputs: { layer: \"layer\", color: \"color\" }, decls: 1, vars: 1, consts: [[\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"information-outline\"]], template: function MetadataButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, MetadataButtonComponent_button_0_Template, 3, 4, \"button\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.options && ctx.options.metadata && ctx.options.metadata.url || ctx.options && ctx.options.metadata && ctx.options.metadata.abstract);\n    } }, directives: [NgIf, MatButton, MatTooltip, MatIcon], pipes: [TranslatePipe], styles: [\"\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MetadataButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-metadata-button',\n                templateUrl: './metadata-button.component.html',\n                styleUrls: ['./metadata-button.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: MetadataService }, { type: MatDialog }]; }, { layer: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\nclass MetadataAbstractComponent {\n    constructor(data) {\n        this.data = data;\n    }\n}\nMetadataAbstractComponent.ɵfac = function MetadataAbstractComponent_Factory(t) { return new (t || MetadataAbstractComponent)(ɵɵdirectiveInject(MAT_DIALOG_DATA)); };\nMetadataAbstractComponent.ɵcmp = ɵɵdefineComponent({ type: MetadataAbstractComponent, selectors: [[\"igo-metadata-abstract\"]], decls: 6, vars: 3, consts: [[\"mat-dialog-title\", \"\"], [\"mat-button\", \"\", \"mat-dialog-close\", \"\", 1, \"close-button\"], [\"class\", \"mat-typography\", 4, \"ngIf\"], [1, \"mat-typography\"], [3, \"innerHTML\"]], template: function MetadataAbstractComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"h2\", 0);\n        ɵɵtext(1);\n        ɵɵelementEnd();\n        ɵɵelementStart(2, \"button\", 1);\n        ɵɵtext(3, \"X\");\n        ɵɵelementEnd();\n        ɵɵtemplate(4, MetadataAbstractComponent_mat_dialog_content_4_Template, 3, 1, \"mat-dialog-content\", 2);\n        ɵɵtemplate(5, MetadataAbstractComponent_mat_dialog_content_5_Template, 2, 1, \"mat-dialog-content\", 2);\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵtextInterpolate(ctx.data.layerTitle);\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngIf\", ctx.data.type !== \"arcgisrest\");\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.data.type === \"arcgisrest\");\n    } }, directives: [MatDialogTitle, MatButton, MatDialogClose, NgIf, MatDialogContent], styles: [\".close-button{line-height:10px;min-width:auto;padding:7px;position:absolute!important;right:5px;top:5px}mat-dialog-container{position:relative}\"], encapsulation: 2 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MetadataAbstractComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-metadata-abstract',\n                templateUrl: './metadata-abstract.component.html',\n                styleUrls: ['./metadata-abstract.component.scss'],\n                encapsulation: ViewEncapsulation.None\n            }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [MAT_DIALOG_DATA]\n            }] }]; }, null); })();\n\nclass IgoMetadataModule {\n    static forRoot() {\n        return {\n            ngModule: IgoMetadataModule,\n            providers: []\n        };\n    }\n}\nIgoMetadataModule.ɵmod = ɵɵdefineNgModule({ type: IgoMetadataModule });\nIgoMetadataModule.ɵinj = ɵɵdefineInjector({ factory: function IgoMetadataModule_Factory(t) { return new (t || IgoMetadataModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTooltipModule,\n            IgoLanguageModule,\n            MatDialogModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoMetadataModule, { declarations: [MetadataButtonComponent,\n        MetadataAbstractComponent], imports: [CommonModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTooltipModule,\n        IgoLanguageModule,\n        MatDialogModule], exports: [MetadataButtonComponent,\n        MetadataAbstractComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoMetadataModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTooltipModule,\n                    IgoLanguageModule,\n                    MatDialogModule\n                ],\n                exports: [\n                    MetadataButtonComponent,\n                    MetadataAbstractComponent\n                ],\n                declarations: [\n                    MetadataButtonComponent,\n                    MetadataAbstractComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass DataService {\n}\n\nclass FeatureDataSource extends DataSource {\n    createOlSource() {\n        const sourceOptions = {\n            format: this.getSourceFormatFromOptions(this.options)\n        };\n        return new OlVectorSource(Object.assign(sourceOptions, this.options));\n    }\n    getSourceFormatFromOptions(options) {\n        if (options.format) {\n            return options.format;\n        }\n        let olFormatCls;\n        const formatType = options.formatType;\n        if (!formatType) {\n            olFormatCls = GeoJSON;\n        }\n        else {\n            olFormatCls = olformat[formatType];\n            if (olFormatCls === undefined) {\n                throw new Error('Invalid vector source format ${formatType}.');\n            }\n        }\n        const formatOptions = options.formatOptions;\n        let format;\n        if (formatOptions) {\n            format = new olFormatCls(formatOptions);\n        }\n        else {\n            format = new olFormatCls();\n        }\n        return format;\n    }\n    onUnwatch() { }\n    get queryTitle() {\n        return this.options.queryTitle\n            ? this.options.queryTitle\n            : 'title';\n    }\n}\n\nclass OSMDataSource extends DataSource {\n    createOlSource() {\n        if (!this.options.url) {\n            this.options.url = 'https://tile.openstreetmap.org/{z}/{x}/{y}.png';\n        }\n        return new olSourceOSM(this.options);\n    }\n    onUnwatch() { }\n}\n\nclass XYZDataSource extends DataSource {\n    createOlSource() {\n        return new olSourceXYZ(this.options);\n    }\n    onUnwatch() { }\n}\n\nclass WFSDataSource extends DataSource {\n    constructor(options, wfsService, authInterceptor) {\n        super(checkWfsParams(options, 'wfs'));\n        this.options = options;\n        this.wfsService = wfsService;\n        this.authInterceptor = authInterceptor;\n        this.ogcFilters$ = new BehaviorSubject(undefined);\n        const ogcFilters = this.options.ogcFilters;\n        const fieldNameGeometry = this.options.paramsWFS.fieldNameGeometry || defaultFieldNameGeometry;\n        const ogcFilterWriter = new OgcFilterWriter();\n        this.options.ogcFilters =\n            ogcFilterWriter.defineOgcFiltersDefaultOptions(ogcFilters, fieldNameGeometry);\n        if (this.options.ogcFilters.enabled &&\n            this.options.ogcFilters.editable &&\n            (options.sourceFields || []).filter(sf => !sf.values).length > 0) {\n            this.wfsService.getSourceFieldsFromWFS(this.options);\n        }\n        if (ogcFilters === null || ogcFilters === void 0 ? void 0 : ogcFilters.pushButtons) {\n            ogcFilters.pushButtons.selectorType = 'pushButton';\n        }\n        if (ogcFilters === null || ogcFilters === void 0 ? void 0 : ogcFilters.checkboxes) {\n            ogcFilters.checkboxes.selectorType = 'checkbox';\n        }\n        if (ogcFilters === null || ogcFilters === void 0 ? void 0 : ogcFilters.radioButtons) {\n            ogcFilters.radioButtons.selectorType = 'radioButton';\n        }\n        if (ogcFilters === null || ogcFilters === void 0 ? void 0 : ogcFilters.select) {\n            ogcFilters.select.selectorType = 'select';\n        }\n        this.setOgcFilters(this.options.ogcFilters, true);\n    }\n    set ogcFilters(value) {\n        this.options.ogcFilters = value;\n    }\n    get ogcFilters() {\n        return this.options.ogcFilters;\n    }\n    createOlSource() {\n        const vectorSource = new OlVectorSource({\n            format: getFormatFromOptions(this.options),\n            loader: (extent, resolution, proj) => {\n                vectorSource.dispatchEvent({ type: 'vectorloading' });\n                const paramsWFS = this.options.paramsWFS;\n                const wfsProj = paramsWFS.srsName ? new olProjection({ code: paramsWFS.srsName }) : proj;\n                const currentExtent = transformExtent(extent, proj, wfsProj);\n                paramsWFS.srsName = paramsWFS.srsName || proj.getCode();\n                const url = this.buildUrl(currentExtent, wfsProj, this.options.ogcFilters);\n                let startIndex = 0;\n                if (paramsWFS.version === '2.0.0' && paramsWFS.maxFeatures > defaultMaxFeatures) {\n                    const nbOfFeature = 1000;\n                    while (startIndex < paramsWFS.maxFeatures) {\n                        let alteredUrl = url.replace('count=' + paramsWFS.maxFeatures, 'count=' + nbOfFeature);\n                        alteredUrl = alteredUrl.replace('startIndex=0', '0');\n                        alteredUrl += '&startIndex=' + startIndex;\n                        alteredUrl.replace(/&&/g, '&');\n                        this.getFeatures(vectorSource, currentExtent, wfsProj, proj, alteredUrl, nbOfFeature);\n                        startIndex += nbOfFeature;\n                    }\n                }\n                else {\n                    this.getFeatures(vectorSource, currentExtent, wfsProj, proj, url, paramsWFS.maxFeatures);\n                }\n            },\n            strategy: bbox$1\n        });\n        vectorSource.addEventListener('vectorloading');\n        vectorSource.addEventListener('vectorloaded');\n        vectorSource.addEventListener('vectorloaderror');\n        return vectorSource;\n    }\n    getFeatures(vectorSource, extent, dataProjection, featureProjection, url, threshold) {\n        const xhr = new XMLHttpRequest();\n        xhr.open('GET', url);\n        if (this.authInterceptor) {\n            this.authInterceptor.interceptXhr(xhr, url);\n        }\n        const onError = () => {\n            vectorSource.dispatchEvent({ type: 'vectorloaderror' });\n            vectorSource.removeLoadedExtent(extent);\n        };\n        xhr.onerror = onError;\n        xhr.onload = () => {\n            if (xhr.status === 200 && xhr.responseText.length > 0) {\n                const features = vectorSource.getFormat().readFeatures(xhr.responseText, { dataProjection, featureProjection });\n                // TODO Manage \"More feature\"\n                /*if (features.length === 0 || features.length < threshold ) {\n                  console.log('No more data to download at this resolution');\n                }*/\n                vectorSource.addFeatures(features);\n                vectorSource.dispatchEvent({ type: 'vectorloaded' });\n            }\n            else {\n                onError();\n            }\n        };\n        xhr.send();\n    }\n    setOgcFilters(ogcFilters, triggerEvent = false) {\n        this.ogcFilters = ogcFilters;\n        if (triggerEvent) {\n            this.ogcFilters$.next(this.ogcFilters);\n        }\n    }\n    buildUrl(extent, proj, ogcFilters) {\n        const paramsWFS = this.options.paramsWFS;\n        const queryStringValues = formatWFSQueryString(this.options, undefined, this.options.paramsWFS.srsName);\n        let igoFilters;\n        if (ogcFilters && ogcFilters.enabled) {\n            igoFilters = ogcFilters.filters;\n        }\n        const ogcFilterWriter = new OgcFilterWriter();\n        const filterOrBox = ogcFilterWriter.buildFilter(igoFilters, extent, proj, ogcFilters.geometryName, this.options);\n        let filterOrPush = ogcFilterWriter.handleOgcFiltersAppliedValue(this.options, ogcFilters.geometryName, extent, proj);\n        let prefix = 'filter';\n        if (!filterOrPush) {\n            prefix = 'bbox';\n            filterOrPush = extent.join(',') + ',' + proj.getCode();\n        }\n        paramsWFS.xmlFilter = ogcFilters.advancedOgcFilters ? filterOrBox : `${prefix}=${filterOrPush}`;\n        let baseUrl = queryStringValues.find(f => f.name === 'getfeature').value;\n        const patternFilter = /(filter|bbox)=.*/gi;\n        baseUrl = patternFilter.test(paramsWFS.xmlFilter) ? `${baseUrl}&${paramsWFS.xmlFilter}` : baseUrl;\n        this.options.download = Object.assign({}, this.options.download, { dynamicUrl: baseUrl });\n        return baseUrl.replace(/&&/g, '&');\n    }\n    onUnwatch() { }\n}\n\nclass WFSService extends DataService {\n    constructor(http) {\n        super();\n        this.http = http;\n    }\n    getData() {\n        console.log('This is defining a data service.');\n        return 'This is defining a data service.';\n    }\n    getSourceFieldsFromWFS(dataSourceOptions) {\n        if (!dataSourceOptions.sourceFields || dataSourceOptions.sourceFields.length === 0) {\n            dataSourceOptions.sourceFields = [];\n            this.defineFieldAndValuefromWFS(dataSourceOptions).subscribe(getfeatureSourceField => {\n                dataSourceOptions.sourceFields = getfeatureSourceField;\n            });\n        }\n        else {\n            this.defineFieldAndValuefromWFS(dataSourceOptions).subscribe(getfeatureSourceField => {\n                dataSourceOptions.sourceFields.forEach(sourcefield => {\n                    if (sourcefield.alias === undefined) {\n                        sourcefield.alias = sourcefield.name; // to allow only a list of sourcefield with names\n                    }\n                    if (sourcefield.values === undefined || sourcefield.values.length === 0) {\n                        sourcefield.values = getfeatureSourceField.find(sf => sf.name === sourcefield.name).values;\n                    }\n                });\n            });\n        }\n    }\n    wfsGetFeature(dataSourceOptions, nb = defaultMaxFeatures, epsgCode = defaultEpsg, propertyName, startIndex = 0, forceDefaultOutputFormat = false) {\n        const queryStringValues = formatWFSQueryString(dataSourceOptions, nb, epsgCode, propertyName, startIndex, forceDefaultOutputFormat);\n        const baseUrl = queryStringValues.find(f => f.name === 'getfeature').value;\n        const outputFormat = dataSourceOptions.paramsWFS.outputFormat;\n        if (forceDefaultOutputFormat || gmlRegex.test(outputFormat) || !outputFormat) {\n            return this.http.get(baseUrl, { responseType: 'text' });\n        }\n        else {\n            return this.http.get(baseUrl);\n        }\n    }\n    defineFieldAndValuefromWFS(dataSourceOptions) {\n        return new Observable(d => {\n            var _a;\n            const sourceFields = [];\n            let fieldList;\n            let fieldListWoGeom;\n            let fieldListWoGeomStr;\n            let olFormats;\n            let effectiveOlFormats;\n            olFormats = getFormatFromOptions(dataSourceOptions);\n            const gmlDataSourceOptions = JSON.parse(JSON.stringify(dataSourceOptions));\n            delete gmlDataSourceOptions.paramsWFS.outputFormat;\n            delete gmlDataSourceOptions.formatOptions;\n            effectiveOlFormats = getFormatFromOptions(gmlDataSourceOptions);\n            let sourceFieldsToRetrieveValues = (_a = dataSourceOptions.sourceFields) === null || _a === void 0 ? void 0 : _a.filter(f => !f.values).map(f => f.name);\n            // Validate if the service manage no outputformat (wfs 1.0.0 and GML is the default return)\n            this.wfsGetFeature(dataSourceOptions, 1, undefined, undefined, 0, true).pipe(concatMap(res => String(res).toLowerCase().includes('exception') ? of(false) : of(true)), concatMap(allowGml => {\n                // If the service return GML (return no exception)\n                return this.wfsGetFeature(dataSourceOptions, 1).pipe(concatMap(firstFeature => {\n                    const features = olFormats.readFeatures(firstFeature);\n                    fieldList = features[0].getKeys();\n                    if (dataSourceOptions.sourceFields || dataSourceOptions.sourceFields.length === 0) {\n                        sourceFieldsToRetrieveValues = fieldList;\n                    }\n                    fieldListWoGeom = fieldList.filter(field => sourceFieldsToRetrieveValues.includes(field) &&\n                        field !== features[0].getGeometryName() &&\n                        !field.match(/boundedby/gi));\n                    fieldListWoGeomStr = fieldListWoGeom.join(',');\n                    const processingArray = [];\n                    let startIndex = 0;\n                    // If the service do not allow gml return, dice the call in multiple\n                    // calls by increment of chunkSize with the original outputFormat\n                    if (!allowGml && dataSourceOptions.paramsWFS.version === '2.0.0' &&\n                        dataSourceOptions.paramsWFS.maxFeatures > defaultMaxFeatures) {\n                        const chunkSize = 1000;\n                        while (startIndex < dataSourceOptions.paramsWFS.maxFeatures) {\n                            processingArray.push(this.wfsGetFeature(dataSourceOptions, chunkSize, dataSourceOptions.paramsWFS.srsName, fieldListWoGeomStr, startIndex));\n                            startIndex += chunkSize;\n                        }\n                        effectiveOlFormats = olFormats;\n                    }\n                    else {\n                        processingArray.push(this.wfsGetFeature(dataSourceOptions, dataSourceOptions.paramsWFS.maxFeatures || defaultMaxFeatures, dataSourceOptions.paramsWFS.srsName, fieldListWoGeomStr, 0, true));\n                    }\n                    return combineLatest(processingArray);\n                }));\n            })).subscribe((results) => {\n                let mfeatures = [];\n                results.map((result) => {\n                    const loopFeatures = effectiveOlFormats.readFeatures(result);\n                    mfeatures = mfeatures.concat(loopFeatures);\n                });\n                this.built_properties_value(mfeatures).forEach(element => {\n                    sourceFields.push(element);\n                });\n                d.next(sourceFields);\n                d.complete();\n            });\n        });\n    }\n    built_properties_value(features) {\n        if (features.length === 0) {\n            return [];\n        }\n        const kv = Object.assign({}, features[0].getProperties());\n        delete kv[features[0].getGeometryName()];\n        delete kv.boundedBy;\n        const sourceFields = [];\n        for (const property in kv) {\n            if (kv.hasOwnProperty(property)) {\n                const fieldType = typeof features[0].get(property) === 'object'\n                    ? undefined\n                    : typeof features[0].get(property);\n                sourceFields.push({\n                    name: property,\n                    alias: property,\n                    type: fieldType,\n                    values: [kv[property]]\n                });\n            }\n        }\n        features.every((element) => {\n            const featureProperties = element.getProperties();\n            for (const key in featureProperties) {\n                if (featureProperties.hasOwnProperty(key) && key in kv) {\n                    sourceFields.filter(f => f.name === key).forEach(v => {\n                        if (v.values.indexOf(featureProperties[key]) === -1) {\n                            v.values.push(featureProperties[key]);\n                        }\n                    });\n                }\n            }\n            return true;\n        });\n        return sourceFields;\n    }\n}\nWFSService.ɵfac = function WFSService_Factory(t) { return new (t || WFSService)(ɵɵinject(HttpClient)); };\nWFSService.ɵprov = ɵɵdefineInjectable({ token: WFSService, factory: WFSService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(WFSService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: HttpClient }]; }, null); })();\n\nfunction createDefaultTileGrid(epsg) {\n    const projection = epsg ? get(epsg) : get('EPSG:3857');\n    const projectionExtent = projection.getExtent();\n    const size = getWidth(projectionExtent) / 256;\n    const resolutions = new Array(20);\n    const matrixIds = new Array(20);\n    for (let z = 0; z < 20; ++z) {\n        resolutions[z] = size / Math.pow(2, z);\n        matrixIds[z] = z;\n    }\n    return new olTileGridWMTS({\n        origin: getTopLeft(projectionExtent),\n        resolutions,\n        matrixIds\n    });\n}\n\nclass WMTSDataSource extends DataSource {\n    constructor(options) {\n        super(options);\n    }\n    createOlSource() {\n        const sourceOptions = Object.assign({\n            tileGrid: createDefaultTileGrid(this.options.projection)\n        }, this.options);\n        return new olSourceWMTS(sourceOptions);\n    }\n    onUnwatch() { }\n}\n\nclass CartoDataSource extends DataSource {\n    get params() {\n        return this.options.params;\n    }\n    get queryTitle() {\n        return this.options.queryTitle\n            ? this.options.queryTitle\n            : 'title';\n    }\n    get mapLabel() {\n        return this.options.mapLabel;\n    }\n    get queryHtmlTarget() {\n        return this.options.queryHtmlTarget\n            ? this.options.queryHtmlTarget\n            : QueryHtmlTarget.BLANK;\n    }\n    createOlSource() {\n        const crossOrigin = this.options.crossOrigin\n            ? this.options.crossOrigin\n            : 'anonymous';\n        const sourceOptions = Object.assign({\n            crossOrigin\n        }, this.options);\n        return new olSourceCarto(sourceOptions);\n    }\n    getLegend() {\n        const legend = super.getLegend();\n        if (legend.length > 0) {\n            return legend;\n        }\n        let htmlString = '<table>';\n        if (this.options.config.layers[0].legend != null) {\n            this.options.config.layers[0].legend.items.forEach(f => {\n                if (f.visible === true) {\n                    htmlString +=\n                        '<tr><td>' +\n                            '<p><font size=\"5\" color=\"' +\n                            f.value +\n                            '\"> &#9679</font></p></td>' +\n                            '<td>' +\n                            f.name +\n                            '</td></tr>';\n                }\n            });\n            htmlString += '</table>';\n            return [{ html: htmlString }];\n        }\n        else {\n            // Try to build the legend from the cartocss options\n            const layerOptions = this.options.config.layers[0].options;\n            // All available cartocss style options\n            const types = [\n                'polygon-fill:',\n                'marker-fill:',\n                'shield-fill:',\n                'building-fill:',\n                'line-color:'\n            ];\n            for (const oneType of types) {\n                if (layerOptions.cartocss.includes(oneType)) {\n                    const type = layerOptions.cartocss.split(oneType).pop();\n                    const color = type.substr(0, type.indexOf(';'));\n                    if (color.includes('ramp')) {\n                        const colors = color.split(', (')[1].split(',');\n                        const data = color.split(', (')[2].split(',');\n                        for (let j = 0; j < colors.length; j++) {\n                            colors[j] = colors[j].replace(/(\"|\\))/g, '');\n                            data[j] = data[j].replace(/(\"|\\))/g, '');\n                            if (data[j].replace(/\\s+/g, '') === '=') {\n                                data[j] = 'Autres';\n                            }\n                            htmlString +=\n                                '<tr><td>' +\n                                    '<p><font size=\"5\" color=\"' +\n                                    colors[j] +\n                                    '\"> &#9679</font></p></td>' +\n                                    '<td>' +\n                                    data[j] +\n                                    '</td></tr>';\n                        }\n                        break;\n                    }\n                    else {\n                        const title = layerOptions.layer_name\n                            ? layerOptions.layer_name\n                            : '';\n                        htmlString +=\n                            '<tr><td>' +\n                                '<p><font size=\"5\" color=\"' +\n                                color +\n                                '\"> &#9679</font></p>' +\n                                '</td><td>' +\n                                title +\n                                '</td></tr>';\n                        break;\n                    }\n                }\n            }\n            htmlString += '</table>';\n            return [{ html: htmlString }];\n        }\n    }\n    onUnwatch() { }\n}\n\nclass ArcGISRestDataSource extends DataSource {\n    createOlSource() {\n        const esrijsonFormat = new olFormatEsriJSON();\n        return new OlVectorSource({\n            attributions: this.options.params.attributions,\n            overlaps: false,\n            format: esrijsonFormat,\n            url: function (extent, resolution, proj) {\n                const baseUrl = this.options.url + '/' + this.options.layer + '/query/';\n                const geometry = encodeURIComponent('{\"xmin\":' +\n                    extent[0] +\n                    ',\"ymin\":' +\n                    extent[1] +\n                    ',\"xmax\":' +\n                    extent[2] +\n                    ',\"ymax\":' +\n                    extent[3] +\n                    ',\"spatialReference\":{\"wkid\":102100}}');\n                const params = [\n                    'f=json',\n                    `geometry=${geometry}`,\n                    'geometryType=esriGeometryEnvelope',\n                    'inSR=102100',\n                    'spatialRel=esriSpatialRelIntersects',\n                    'outFields=*',\n                    'returnGeometry=true',\n                    'outSR=102100'\n                ];\n                if (this.options.params.time) {\n                    const time = `time=${this.options.params.time}`;\n                    params.push(time);\n                }\n                if (this.options.params.customParams) {\n                    this.options.params.customParams.forEach(element => {\n                        params.push(element);\n                    });\n                }\n                return `${baseUrl}?${params.join('&')}`;\n            }.bind(this),\n            strategy: bbox$1\n        });\n    }\n    getLegend() {\n        const legendInfo = this.options.legendInfo;\n        const legend = super.getLegend();\n        if (legendInfo === undefined || legend.length > 0) {\n            return legend;\n        }\n        const id = parseInt(this.options.layer, 10);\n        const lyr = legendInfo.layers.find(layer => layer.layerId === id);\n        if (!lyr) {\n            return;\n        }\n        let htmlString = '<table>';\n        for (const lyrLegend of lyr.legend) {\n            const modifiedUrl = this.options.url.replace('FeatureServer', 'MapServer');\n            const src = `${modifiedUrl}/${lyr.layerId}/images/${lyrLegend.url}`;\n            const label = lyrLegend.label.replace('<Null>', 'Null');\n            htmlString +=\n                `<tr><td align='left'><img src=\"` +\n                    src +\n                    `\" alt ='' /></td><td>` +\n                    label +\n                    '</td></tr>';\n        }\n        htmlString += '</table>';\n        return [{ html: htmlString }];\n    }\n    onUnwatch() { }\n}\n\nclass ImageArcGISRestDataSource extends DataSource {\n    get params() {\n        return this.options.params;\n    }\n    get queryTitle() {\n        return this.options.queryTitle\n            ? this.options.queryTitle\n            : 'title';\n    }\n    get mapLabel() {\n        return this.options.mapLabel;\n    }\n    get queryHtmlTarget() {\n        return this.options.queryHtmlTarget\n            ? this.options.queryHtmlTarget\n            : QueryHtmlTarget.BLANK;\n    }\n    createOlSource() {\n        const params = this.options.layer === undefined ? this.options.params : Object.assign({ LAYERS: `show:${this.options.layer}` }, this.options.params);\n        if (typeof params.renderingRule === 'object') {\n            params.renderingRule = JSON.stringify(params.renderingRule);\n        }\n        return new ImageArcGISRest({\n            ratio: 1,\n            params,\n            url: this.options.url\n        });\n    }\n    getLegend() {\n        var _a, _b;\n        const legendInfo = ((_a = this.options.options) === null || _a === void 0 ? void 0 : _a.legendInfo) || ((_b = this.params) === null || _b === void 0 ? void 0 : _b.legendInfo);\n        const legend = super.getLegend();\n        if (legendInfo === undefined || this.options.layer === undefined || legend.length > 0) {\n            return legend;\n        }\n        const id = parseInt(this.options.layer, 10);\n        const lyr = legendInfo.layers.find(layer => layer.layerId === id);\n        if (!lyr) {\n            return;\n        }\n        let htmlString = '<table>';\n        for (const lyrLegend of lyr.legend) {\n            const src = `${this.options.url}/${lyr.layerId}/images/${lyrLegend.url}`;\n            const label = lyrLegend.label.replace('<Null>', 'Null');\n            htmlString +=\n                `<tr><td align='left'><img src=\"` +\n                    src +\n                    `\" alt ='' /></td><td>` +\n                    label +\n                    '</td></tr>';\n        }\n        htmlString += '</table>';\n        return [{ html: htmlString }];\n    }\n    onUnwatch() { }\n}\n\nclass TileArcGISRestDataSource extends DataSource {\n    get params() {\n        return this.options.params;\n    }\n    get queryTitle() {\n        return this.options.queryTitle\n            ? this.options.queryTitle\n            : 'title';\n    }\n    get mapLabel() {\n        return this.options.mapLabel;\n    }\n    get queryHtmlTarget() {\n        return this.options.queryHtmlTarget\n            ? this.options.queryHtmlTarget\n            : QueryHtmlTarget.BLANK;\n    }\n    createOlSource() {\n        return new olSourceTileArcGISRest(this.options);\n    }\n    getLegend() {\n        const legendInfo = this.options.legendInfo;\n        const legend = super.getLegend();\n        if (legendInfo === undefined || legend.length > 0) {\n            return legend;\n        }\n        const id = parseInt(this.options.layer, 10);\n        const lyr = legendInfo.layers.find(layer => layer.layerId === id);\n        if (!lyr) {\n            return;\n        }\n        let htmlString = '<table>';\n        for (const lyrLegend of lyr.legend) {\n            const src = `${this.options.url}/${lyr.layerId}/images/${lyrLegend.url}`;\n            const label = lyrLegend.label.replace('<Null>', 'Null');\n            htmlString +=\n                `<tr><td align='left'><img src=\"` +\n                    src +\n                    `\" alt ='' /></td><td>` +\n                    label +\n                    '</td></tr>';\n        }\n        htmlString += '</table>';\n        return [{ html: htmlString }];\n    }\n    onUnwatch() { }\n}\n\nclass TileDebugDataSource extends DataSource {\n    createOlSource() {\n        const baseOptions = JSON.parse(JSON.stringify(this.options)); // to avoid to alter the original options\n        if (this.options.tileGrid) {\n            delete baseOptions.tileGrid;\n            baseOptions.tileGrid = new TileGrid(this.options.tileGrid);\n        }\n        return new TileDebug(baseOptions);\n    }\n    onUnwatch() { }\n}\n\nclass WebSocketDataSource extends FeatureDataSource {\n    createOlSource() {\n        this.createWebSocket();\n        this.options.format = this.getSourceFormatFromOptions(this.options);\n        return super.createOlSource();\n    }\n    createWebSocket() {\n        this.ws = new WebSocket(this.options.url);\n        this.ws.onmessage = this.onMessage.bind(this);\n        if (this.options.onclose) {\n            this.ws.onclose = this.onClose.bind(this);\n        }\n        if (this.options.onerror) {\n            this.ws.onerror = this.onError.bind(this);\n        }\n        if (this.options.onopen) {\n            this.ws.onopen = this.onOpen.bind(this);\n        }\n    }\n    onMessage(event) {\n        const featureAdded = this.options.format.readFeature(event.data);\n        switch (this.options.onmessage) {\n            case 'update':\n                // ol don't add if same ID\n                const featureToRemove = this.ol.getFeatureById(featureAdded.getId());\n                if (featureToRemove) {\n                    this.ol.removeFeature(featureToRemove);\n                }\n                this.ol.addFeature(featureAdded);\n                break;\n            case 'delete':\n                this.ol.clear(true);\n                this.ol.addFeature(featureAdded);\n                break;\n            case 'add':\n            default:\n                this.ol.addFeature(featureAdded);\n        }\n    }\n    onClose(event) {\n        // thrown message to user\n    }\n    onError(event) {\n        // thrown message to user\n    }\n    onOpen(event) {\n        // thrown message to user ?\n    }\n    onUnwatch() {\n        this.ws.close();\n    }\n}\n\nclass MVTDataSource extends DataSource {\n    createOlSource() {\n        let mvtFormat;\n        if (this.options.featureClass === 'feature') {\n            mvtFormat = new olFormatMVT({ featureClass: olFeature });\n        }\n        else if (this.options.featureClass === undefined) {\n            mvtFormat = new olFormatMVT();\n        }\n        this.options.format = mvtFormat;\n        return new olSourceVectorTile(this.options);\n    }\n    generateId() {\n        if (!this.options.url) {\n            return uuid();\n        }\n        const chain = 'mvt' + this.options.url;\n        return Md5.hashStr(chain);\n    }\n    onUnwatch() { }\n}\n\nclass ClusterDataSource extends FeatureDataSource {\n    createOlSource() {\n        this.options.format = this.getSourceFormatFromOptions(this.options);\n        this.options.source = super.createOlSource();\n        return new olSourceCluster(this.options);\n    }\n    generateId() {\n        return uuid();\n    }\n    onUnwatch() { }\n}\n\n/**\n * MapService\n *\n * This service tracks the IgoMap instance, if any.\n * Currently, only one map instance is supported\n * but support for multiple maps may be added in the future.\n * This will impact other services such as the OverlayService\n * because these maps won't be sharing overlayed features.\n */\nclass MapService {\n    constructor() { }\n    getMap() {\n        return this.map;\n    }\n    setMap(map) {\n        this.map = map;\n    }\n}\nMapService.ɵfac = function MapService_Factory(t) { return new (t || MapService)(); };\nMapService.ɵprov = ɵɵdefineInjectable({ token: MapService, factory: MapService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MapService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nclass EsriStyleGenerator {\n    constructor() {\n        this._converters = {};\n        this._converters.esriPMS = EsriStyleGenerator._convertEsriPMS;\n        this._converters.esriSFS = EsriStyleGenerator._convertEsriSFS;\n        this._converters.esriSLS = EsriStyleGenerator._convertEsriSLS;\n        this._converters.esriSMS = EsriStyleGenerator._convertEsriSMS;\n        this._converters.esriTS = EsriStyleGenerator._convertEsriTS;\n        this._renderers = {};\n        this._renderers.uniqueValue = this._renderUniqueValue;\n        this._renderers.simple = this._renderSimple;\n        this._renderers.classBreaks = this._renderClassBreaks;\n    }\n    static _convertPointToPixel(point) {\n        return point / 0.75;\n    }\n    static _transformColor(color) {\n        // alpha channel is different, runs from 0-255 but in ol3 from 0-1\n        return [color[0], color[1], color[2], color[3] / 255];\n    }\n    static _getResolutionForScale(scale, units) {\n        const dpi = 96;\n        const mpu = METERS_PER_UNIT[units];\n        const inchesPerMeter = 39.3701;\n        return parseFloat(scale) / (mpu * inchesPerMeter * dpi);\n    }\n    /* convert an Esri Text Symbol */\n    static _convertEsriTS(symbol) {\n        const rotation = EsriStyleGenerator._transformAngle(symbol.angle);\n        const text = symbol.text !== undefined ? symbol.text : undefined;\n        return new Style({\n            text: new Text({\n                fill: new Fill({\n                    color: EsriStyleGenerator._transformColor(symbol.color)\n                }),\n                font: symbol.font.style +\n                    ' ' +\n                    symbol.font.weight +\n                    ' ' +\n                    symbol.font.size +\n                    ' px ' +\n                    symbol.font.family,\n                textBaseline: symbol.verticalAlignment,\n                textAlign: symbol.horizontalAlignment,\n                offsetX: EsriStyleGenerator._convertPointToPixel(symbol.xoffset),\n                offsetY: EsriStyleGenerator._convertPointToPixel(symbol.yoffset),\n                rotation,\n                text\n            })\n        });\n    }\n    /* convert an Esri Picture Marker Symbol */\n    static _convertEsriPMS(symbol) {\n        const src = 'data:' + symbol.contentType + ';base64, ' + symbol.imageData;\n        const rotation = EsriStyleGenerator._transformAngle(symbol.angle);\n        return new Style({\n            image: new Icon({\n                src,\n                rotation\n            })\n        });\n    }\n    /* convert an Esri Simple Fill Symbol */\n    static _convertEsriSFS(symbol) {\n        // there is no support in openlayers currently for fill patterns, so style is not interpreted\n        const fill = new Fill({\n            color: EsriStyleGenerator._transformColor(symbol.color)\n        });\n        const stroke = symbol.outline\n            ? EsriStyleGenerator._convertOutline(symbol.outline)\n            : undefined;\n        return new Style({\n            fill,\n            stroke\n        });\n    }\n    static _convertOutline(outline) {\n        let lineDash;\n        const color = EsriStyleGenerator._transformColor(outline.color);\n        if (outline.style === 'esriSLSDash') {\n            lineDash = [5];\n        }\n        else if (outline.style === 'esriSLSDashDot') {\n            lineDash = [5, 5, 1, 2];\n        }\n        else if (outline.style === 'esriSLSDashDotDot') {\n            lineDash = [5, 5, 1, 2, 1, 2];\n        }\n        else if (outline.style === 'esriSLSDot') {\n            lineDash = [1, 2];\n        }\n        else if (outline.style === 'esriSLSNull') {\n            // line not visible, make color fully transparent\n            color[3] = 0;\n        }\n        return new Stroke({\n            color,\n            lineDash,\n            width: EsriStyleGenerator._convertPointToPixel(outline.width)\n        });\n    }\n    /* convert an Esri Simple Line Symbol */\n    static _convertEsriSLS(symbol) {\n        return new Style({\n            stroke: EsriStyleGenerator._convertOutline(symbol)\n        });\n    }\n    static _transformAngle(angle) {\n        if (angle === 0 || angle === undefined) {\n            return undefined;\n        }\n        const normalRad = (angle * Math.PI) / 180;\n        const ol3Rad = -normalRad + Math.PI / 2;\n        if (ol3Rad < 0) {\n            return 2 * Math.PI + ol3Rad;\n        }\n        else {\n            return ol3Rad;\n        }\n    }\n    /* convert an Esri Simple Marker Symbol */\n    static _convertEsriSMS(symbol) {\n        const fill = new Fill({\n            color: EsriStyleGenerator._transformColor(symbol.color)\n        });\n        const stroke = symbol.outline\n            ? EsriStyleGenerator._convertOutline(symbol.outline)\n            : undefined;\n        const radius = EsriStyleGenerator._convertPointToPixel(symbol.size) / 2;\n        const rotation = EsriStyleGenerator._transformAngle(symbol.angle);\n        if (symbol.style === 'esriSMSCircle') {\n            return new Style({\n                image: new Circle({\n                    radius,\n                    fill,\n                    stroke\n                })\n            });\n        }\n        else if (symbol.style === 'esriSMSCross') {\n            return new Style({\n                image: new RegularShape({\n                    fill,\n                    stroke,\n                    points: 4,\n                    radius,\n                    radius2: 0,\n                    angle: 0,\n                    rotation\n                })\n            });\n        }\n        else if (symbol.style === 'esriSMSDiamond') {\n            return new Style({\n                image: new RegularShape({\n                    fill,\n                    stroke,\n                    points: 4,\n                    radius,\n                    rotation\n                })\n            });\n        }\n        else if (symbol.style === 'esriSMSSquare') {\n            return new Style({\n                image: new RegularShape({\n                    fill,\n                    stroke,\n                    points: 4,\n                    radius,\n                    angle: Math.PI / 4,\n                    rotation\n                })\n            });\n        }\n        else if (symbol.style === 'esriSMSX') {\n            return new Style({\n                image: new RegularShape({\n                    fill,\n                    stroke,\n                    points: 4,\n                    radius,\n                    radius2: 0,\n                    angle: Math.PI / 4,\n                    rotation\n                })\n            });\n        }\n        else if (symbol.style === 'esriSMSTriangle') {\n            return new Style({\n                image: new RegularShape({\n                    fill,\n                    stroke,\n                    points: 3,\n                    radius,\n                    angle: 0,\n                    rotation\n                })\n            });\n        }\n    }\n    _convertLabelingInfo(labelingInfo, mapUnits) {\n        const styles = [];\n        for (let i = 0, ii = labelingInfo.length; i < ii; ++i) {\n            const labelExpression = labelingInfo[i].labelExpression;\n            // only limited support for label expressions\n            const field = labelExpression.substr(labelExpression.indexOf('[') + 1, labelExpression.indexOf(']') - 1);\n            const symbol = labelingInfo[i].symbol;\n            const maxScale = labelingInfo[i].maxScale;\n            const minScale = labelingInfo[i].minScale;\n            let minResolution = null;\n            if (maxScale !== 0) {\n                minResolution = EsriStyleGenerator._getResolutionForScale(maxScale, mapUnits);\n            }\n            let maxResolution = null;\n            if (minScale !== 0) {\n                maxResolution = EsriStyleGenerator._getResolutionForScale(minScale, mapUnits);\n            }\n            const style = this._converters[symbol.type].call(this, symbol);\n            styles.push((() => {\n                return function (feature, resolution) {\n                    let visible = true;\n                    if (this.minResolution !== null && this.maxResolution !== null) {\n                        visible =\n                            resolution < this.maxResolution &&\n                                resolution >= this.minResolution;\n                    }\n                    else if (this.minResolution !== null) {\n                        visible = resolution >= this.minResolution;\n                    }\n                    else if (this.maxResolution !== null) {\n                        visible = resolution < this.maxResolution;\n                    }\n                    if (visible) {\n                        const value = feature.get(this.field);\n                        this.style.getText().setText(value);\n                        return [this.style];\n                    }\n                };\n            })().bind({\n                minResolution,\n                maxResolution,\n                field,\n                style\n            }));\n        }\n        return styles;\n    }\n    _renderSimple(renderer) {\n        const style = this._converters[renderer.symbol.type].call(this, renderer.symbol);\n        return (() => {\n            return () => {\n                return [style];\n            };\n        })();\n    }\n    _renderClassBreaks(renderer) {\n        const defaultSymbol = renderer.defaultSymbol;\n        const defaultStyle = this._converters[defaultSymbol.type].call(this, defaultSymbol);\n        const field = renderer.field;\n        const classes = [];\n        for (let i = 0, ii = renderer.classBreakInfos.length; i < ii; ++i) {\n            const classBreakInfo = renderer.classBreakInfos[i];\n            let min;\n            if (classBreakInfo.classMinValue === null ||\n                classBreakInfo.classMinValue === undefined) {\n                if (i === 0) {\n                    min = renderer.minValue;\n                }\n                else {\n                    min = renderer.classBreakInfos[i - 1].classMaxValue;\n                }\n            }\n            else {\n                min = classBreakInfo.classMinValue;\n            }\n            const max = classBreakInfo.classMaxValue;\n            const symbol = classBreakInfo.symbol;\n            const style = this._converters[symbol.type].call(this, symbol);\n            classes.push({ min, max, style });\n        }\n        return (() => {\n            return (feature) => {\n                const value = feature.get(field);\n                for (let i = 0, ii = classes.length; i < ii; ++i) {\n                    let condition;\n                    if (i === 0) {\n                        condition = value >= classes[i].min && value <= classes[i].max;\n                    }\n                    else {\n                        condition = value > classes[i].min && value <= classes[i].max;\n                    }\n                    if (condition) {\n                        return [classes[i].style];\n                    }\n                }\n                return [defaultStyle];\n            };\n        })();\n    }\n    _renderUniqueValue(renderer) {\n        const defaultSymbol = renderer.defaultSymbol;\n        let defaultStyle = [];\n        if (defaultSymbol) {\n            defaultStyle = [\n                this._converters[defaultSymbol.type].call(this, defaultSymbol)\n            ];\n        }\n        const field = renderer.field1;\n        const infos = renderer.uniqueValueInfos;\n        const me = this;\n        return (() => {\n            const hash = {};\n            for (let i = 0, ii = infos.length; i < ii; ++i) {\n                const info = infos[i];\n                const symbol = info.symbol;\n                hash[info.value] = [me._converters[symbol.type].call(me, symbol)];\n            }\n            return (feature) => {\n                const style = hash[feature.get(field)];\n                return style ? style : defaultStyle;\n            };\n        })();\n    }\n    generateStyle(layerInfo, mapUnits) {\n        const drawingInfo = layerInfo.drawingInfo;\n        let styleFunctions = [];\n        const drawingInfoStyle = this._renderers[drawingInfo.renderer.type].call(this, drawingInfo.renderer);\n        if (drawingInfoStyle !== undefined) {\n            styleFunctions.push(drawingInfoStyle);\n        }\n        if (layerInfo.labelingInfo) {\n            const labelingInfoStyleFunctions = this._convertLabelingInfo(layerInfo.labelingInfo, mapUnits);\n            styleFunctions = styleFunctions.concat(labelingInfoStyleFunctions);\n        }\n        if (styleFunctions.length === 1) {\n            return styleFunctions[0];\n        }\n        else {\n            return (() => {\n                return (feature, resolution) => {\n                    let styles = [];\n                    for (let i = 0, ii = styleFunctions.length; i < ii; ++i) {\n                        const result = styleFunctions[i].call(null, feature, resolution);\n                        if (result) {\n                            styles = styles.concat(result);\n                        }\n                    }\n                    return styles;\n                };\n            })();\n        }\n    }\n}\n\nvar TimeFilterType;\n(function (TimeFilterType) {\n    TimeFilterType[\"DATE\"] = \"date\";\n    TimeFilterType[\"TIME\"] = \"time\";\n    TimeFilterType[\"DATETIME\"] = \"datetime\";\n    TimeFilterType[\"YEAR\"] = \"year\";\n})(TimeFilterType || (TimeFilterType = {}));\nvar TimeFilterStyle;\n(function (TimeFilterStyle) {\n    TimeFilterStyle[\"CALENDAR\"] = \"calendar\";\n    TimeFilterStyle[\"SLIDER\"] = \"slider\";\n})(TimeFilterStyle || (TimeFilterStyle = {}));\n\nvar TypeCapabilities;\n(function (TypeCapabilities) {\n    TypeCapabilities[\"wms\"] = \"wms\";\n    TypeCapabilities[\"wmts\"] = \"wmts\";\n    TypeCapabilities[\"arcgisrest\"] = \"esriJSON\";\n    TypeCapabilities[\"imagearcgisrest\"] = \"esriJSON\";\n    TypeCapabilities[\"tilearcgisrest\"] = \"esriJSON\";\n})(TypeCapabilities || (TypeCapabilities = {}));\nclass CapabilitiesService {\n    constructor(http, mapService) {\n        this.http = http;\n        this.mapService = mapService;\n        this.parsers = {\n            wms: new WMSCapabilities(),\n            wmts: new WMTSCapabilities(),\n            esriJSON: new EsriJSON()\n        };\n    }\n    getWMSOptions(baseOptions) {\n        const url = baseOptions.url;\n        const version = baseOptions.params.VERSION;\n        return this.getCapabilities('wms', url, version).pipe(map((capabilities) => {\n            return capabilities\n                ? this.parseWMSOptions(baseOptions, capabilities)\n                : undefined;\n        }));\n    }\n    getWMTSOptions(baseOptions) {\n        const url = baseOptions.url;\n        const version = baseOptions.version;\n        const options = this.getCapabilities('wmts', url, version).pipe(map((capabilities) => {\n            return capabilities\n                ? this.parseWMTSOptions(baseOptions, capabilities)\n                : undefined;\n        }));\n        return options;\n    }\n    getCartoOptions(baseOptions) {\n        const baseUrl = 'https://' +\n            baseOptions.account +\n            '.carto.com/api/v2/viz/' +\n            baseOptions.mapId +\n            '/viz.json';\n        return this.http\n            .jsonp(baseUrl, 'callback')\n            .pipe(map((cartoOptions) => this.parseCartoOptions(baseOptions, cartoOptions)));\n    }\n    getArcgisOptions(baseOptions) {\n        const baseUrl = baseOptions.url + '/' + baseOptions.layer + '?f=json';\n        const modifiedUrl = baseOptions.url.replace('FeatureServer', 'MapServer');\n        const legendUrl = modifiedUrl + '/legend?f=json';\n        const arcgisOptions = this.http.get(baseUrl);\n        const legend = this.http.get(legendUrl).pipe(map((res) => res), catchError((err) => {\n            console.log('No legend associated with this Feature Service');\n            return of(err);\n        }));\n        return forkJoin([arcgisOptions, legend]).pipe(map((res) => {\n            return this.parseArcgisOptions(baseOptions, res[0], res[1]);\n        }));\n    }\n    getImageArcgisOptions(baseOptions) {\n        const baseUrl = baseOptions.url + '/' + baseOptions.layer + '?f=json';\n        const modifiedUrl = baseOptions.url.replace('FeatureServer', 'MapServer');\n        const legendUrl = modifiedUrl + '/legend?f=json';\n        const arcgisOptions = this.http.get(baseUrl);\n        const legend = this.http.get(legendUrl).pipe(map((res) => res), catchError((err) => {\n            console.log('No legend associated with this Image Service');\n            return of(err);\n        }));\n        return forkJoin([arcgisOptions, legend]).pipe(map((res) => {\n            return this.parseTileOrImageArcgisOptions(baseOptions, res[0], res[1]);\n        }));\n    }\n    getTileArcgisOptions(baseOptions) {\n        const baseUrl = baseOptions.url + '/' + baseOptions.layer + '?f=json';\n        const legendUrl = baseOptions.url + '/legend?f=json';\n        const arcgisOptions = this.http.get(baseUrl);\n        const legendInfo = this.http.get(legendUrl).pipe(map((res) => res), catchError((err) => {\n            console.log('No legend associated with this Tile Service');\n            return of(err);\n        }));\n        return forkJoin([arcgisOptions, legendInfo]).pipe(map((res) => this.parseTileOrImageArcgisOptions(baseOptions, res[0], res[1])));\n    }\n    getCapabilities(service, baseUrl, version) {\n        const params = new HttpParams({\n            fromObject: {\n                request: 'GetCapabilities',\n                service: service.toUpperCase(),\n                version: version || '1.3.0',\n                _i: 'true'\n            }\n        });\n        let request;\n        if (service === 'esriJSON') {\n            request = this.http.get(baseUrl + '?f=json');\n        }\n        else {\n            request = this.http.get(baseUrl, {\n                params,\n                responseType: 'text'\n            });\n        }\n        return request.pipe(map((res) => {\n            if (service === 'esriJSON') {\n                return res;\n            }\n            if (String(res).toLowerCase().includes('serviceexception') &&\n                String(res).toLowerCase().includes('access denied')) {\n                throw {\n                    error: {\n                        message: 'Service error getCapabilities: Access is denied'\n                    }\n                };\n            }\n            else {\n                return this.parsers[service].read(res);\n            }\n        }), catchError((e) => {\n            if (typeof e.error !== 'undefined') {\n                e.error.caught = true;\n            }\n            throw e;\n        }));\n    }\n    parseWMSOptions(baseOptions, capabilities) {\n        const layers = baseOptions.params.LAYERS;\n        const layer = this.findDataSourceInCapabilities(capabilities.Capability.Layer, layers);\n        if (!layer) {\n            throw {\n                error: {\n                    message: 'Layer not found'\n                }\n            };\n        }\n        const metadata = layer.DataURL ? layer.DataURL[0] : undefined;\n        const abstract = layer.Abstract ? layer.Abstract : undefined;\n        const keywordList = layer.KeywordList ? layer.KeywordList : undefined;\n        let queryable = layer.queryable;\n        const timeFilter = this.getTimeFilter(layer);\n        const timeFilterable = timeFilter && Object.keys(timeFilter).length > 0;\n        const legendOptions = layer.Style ? this.getStyle(layer.Style) : undefined;\n        let isExtentInGeographic = true;\n        if (layer.EX_GeographicBoundingBox) {\n            layer.EX_GeographicBoundingBox.forEach((coord, index) => {\n                if (index < 2 && (coord > 180 || coord < -180)) {\n                    isExtentInGeographic = false;\n                }\n                if (index >= 2 && (coord > 90 || coord < -90)) {\n                    isExtentInGeographic = false;\n                }\n            });\n        }\n        else {\n            isExtentInGeographic = false;\n        }\n        const extent = isExtentInGeographic ?\n            transformExtent(layer.EX_GeographicBoundingBox, 'EPSG:4326', this.mapService.getMap().projection) :\n            undefined;\n        let queryFormat;\n        const queryFormatMimeTypePriority = [\n            QueryFormatMimeType.GEOJSON,\n            QueryFormatMimeType.GEOJSON2,\n            QueryFormatMimeType.GML3,\n            QueryFormatMimeType.GML2,\n            QueryFormatMimeType.JSON,\n            QueryFormatMimeType.HTML\n        ];\n        for (const mimeType of queryFormatMimeTypePriority) {\n            if (capabilities.Capability.Request.GetFeatureInfo.Format.indexOf(mimeType) !== -1) {\n                const keyEnum = Object.keys(QueryFormatMimeType).find((key) => QueryFormatMimeType[key] === mimeType);\n                queryFormat = QueryFormat[keyEnum];\n                break;\n            }\n        }\n        if (!queryFormat) {\n            queryable = false;\n        }\n        const options = ObjectUtils.removeUndefined({\n            _layerOptionsFromSource: {\n                title: layer.Title,\n                maxResolution: getResolutionFromScale(layer.MaxScaleDenominator),\n                minResolution: getResolutionFromScale(layer.MinScaleDenominator),\n                extent,\n                metadata: {\n                    url: metadata ? metadata.OnlineResource : undefined,\n                    extern: metadata ? true : undefined,\n                    abstract,\n                    keywordList\n                },\n                legendOptions\n            },\n            queryable,\n            queryFormat,\n            timeFilter: timeFilterable ? timeFilter : undefined,\n            timeFilterable: timeFilterable ? true : undefined,\n            minDate: timeFilterable ? timeFilter.min : undefined,\n            maxDate: timeFilterable ? timeFilter.max : undefined,\n            stepDate: timeFilterable ? timeFilter.step : undefined\n        });\n        return ObjectUtils.mergeDeep(options, baseOptions);\n    }\n    parseWMTSOptions(baseOptions, capabilities) {\n        // Put Title source in _layerOptionsFromSource. (For source & catalog in _layerOptionsFromSource, if not already on config)\n        const layer = capabilities.Contents.Layer.find((el) => el.Identifier === baseOptions.layer);\n        const options = optionsFromCapabilities(capabilities, baseOptions);\n        const ouputOptions = Object.assign(options, baseOptions);\n        const sourceOptions = ObjectUtils.removeUndefined({\n            _layerOptionsFromSource: {\n                title: layer.Title\n            }\n        });\n        return ObjectUtils.mergeDeep(sourceOptions, ouputOptions);\n    }\n    parseCartoOptions(baseOptions, cartoOptions) {\n        const layers = [];\n        const params = cartoOptions.layers[1].options.layer_definition;\n        params.layers.forEach((element) => {\n            layers.push({\n                type: element.type.toLowerCase(),\n                options: element.options,\n                legend: element.legend\n            });\n        });\n        const options = ObjectUtils.removeUndefined({\n            config: {\n                version: params.version,\n                layers\n            }\n        });\n        return ObjectUtils.mergeDeep(options, baseOptions);\n    }\n    parseArcgisOptions(baseOptions, arcgisOptions, legend) {\n        const title = arcgisOptions.name;\n        const legendInfo = legend.layers ? legend : undefined;\n        const styleGenerator = new EsriStyleGenerator();\n        const units = arcgisOptions.units === 'esriMeters' ? 'm' : 'degrees';\n        const style = styleGenerator.generateStyle(arcgisOptions, units);\n        const attributions = new olAttribution({\n            html: arcgisOptions.copyrightText\n        });\n        let timeExtent;\n        let timeFilter;\n        if (arcgisOptions.timeInfo) {\n            const time = arcgisOptions.timeInfo.timeExtent;\n            timeExtent = time[0] + ',' + time[1];\n            const min = new Date();\n            min.setTime(time[0]);\n            const max = new Date();\n            max.setTime(time[1]);\n            timeFilter = {\n                min: min.toUTCString(),\n                max: max.toUTCString(),\n                range: true,\n                type: TimeFilterType.DATETIME,\n                style: TimeFilterStyle.CALENDAR\n            };\n        }\n        const params = Object.assign({}, {\n            legendInfo,\n            style,\n            timeFilter,\n            timeExtent,\n            attributions\n        });\n        const options = ObjectUtils.removeUndefined({\n            params,\n            _layerOptionsFromSource: {\n                title,\n                minResolution: getResolutionFromScale(arcgisOptions.maxScale),\n                maxResolution: getResolutionFromScale(arcgisOptions.minScale)\n            },\n            sourceFields: arcgisOptions.fields,\n            queryTitle: arcgisOptions.displayField\n        });\n        return ObjectUtils.mergeDeep(options, baseOptions);\n    }\n    parseTileOrImageArcgisOptions(baseOptions, arcgisOptions, legend) {\n        const title = arcgisOptions.name;\n        const legendInfo = legend.layers ? legend : undefined;\n        const attributions = new olAttribution({\n            html: arcgisOptions.copyrightText\n        });\n        let timeExtent;\n        let timeFilter;\n        if (arcgisOptions.timeInfo) {\n            const time = arcgisOptions.timeInfo.timeExtent;\n            timeExtent = time[0] + ',' + time[1];\n            const min = new Date();\n            min.setTime(time[0]);\n            const max = new Date();\n            max.setTime(time[1]);\n            timeFilter = {\n                min: min.toUTCString(),\n                max: max.toUTCString(),\n                range: true,\n                type: TimeFilterType.DATETIME,\n                style: TimeFilterStyle.CALENDAR\n            };\n        }\n        const params = Object.assign({}, {\n            LAYERS: baseOptions.layer ? 'show:' + baseOptions.layer : undefined,\n            time: timeExtent\n        });\n        const options = ObjectUtils.removeUndefined({\n            params,\n            _layerOptionsFromSource: {\n                title,\n                minResolution: getResolutionFromScale(arcgisOptions.maxScale),\n                maxResolution: getResolutionFromScale(arcgisOptions.minScale)\n            },\n            legendInfo,\n            timeFilter,\n            attributions,\n            sourceFields: arcgisOptions.fields,\n            queryTitle: arcgisOptions.displayField\n        });\n        return ObjectUtils.mergeDeep(options, baseOptions);\n    }\n    findDataSourceInCapabilities(layerArray, name) {\n        if (Array.isArray(layerArray)) {\n            let layer;\n            layerArray.find((value) => {\n                layer = this.findDataSourceInCapabilities(value, name);\n                return layer !== undefined;\n            }, this);\n            return layer;\n        }\n        else if (layerArray.Layer) {\n            return this.findDataSourceInCapabilities(layerArray.Layer, name);\n        }\n        else {\n            if (layerArray.Name && layerArray.Name === name) {\n                return layerArray;\n            }\n            return undefined;\n        }\n    }\n    getTimeFilter(layer) {\n        let dimension;\n        if (layer.Dimension) {\n            const timeFilter = {};\n            dimension = layer.Dimension[0];\n            if (dimension.values) {\n                const minMaxDim = dimension.values.split('/');\n                timeFilter.min = minMaxDim[0] !== undefined ? minMaxDim[0] : undefined;\n                timeFilter.max = minMaxDim[1] !== undefined ? minMaxDim[1] : undefined;\n                timeFilter.step = minMaxDim[2] !== undefined ? minMaxDim[2] : undefined;\n            }\n            if (dimension.default) {\n                timeFilter.value = dimension.default;\n            }\n            return timeFilter;\n        }\n    }\n    getStyle(Style) {\n        const styleOptions = Style.map((style) => {\n            return {\n                name: style.Name,\n                title: style.Title\n            };\n        })\n            // Handle repeat the style \"default\" in output  (MapServer or OpenLayer)\n            .filter((item, index, self) => self.findIndex((i) => i.name === item.name) ===\n            index);\n        const legendOptions = {\n            stylesAvailable: styleOptions\n        };\n        return legendOptions;\n    }\n}\nCapabilitiesService.ɵfac = function CapabilitiesService_Factory(t) { return new (t || CapabilitiesService)(ɵɵinject(HttpClient), ɵɵinject(MapService)); };\nCapabilitiesService.ɵprov = ɵɵdefineInjectable({ token: CapabilitiesService, factory: CapabilitiesService.ɵfac, providedIn: 'root' });\n__decorate([\n    Cacheable({\n        maxCacheCount: 20\n    }),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [String, String, String]),\n    __metadata(\"design:returntype\", Observable)\n], CapabilitiesService.prototype, \"getCapabilities\", null);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CapabilitiesService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: HttpClient }, { type: MapService }]; }, { getCapabilities: [] }); })();\n\nclass OptionsService {\n}\n\n/**\n * When injected, this service automatically registers and\n * projection defined in the application config. A custom projection\n * needs to be registered to be usable by OL.\n */\nclass ProjectionService {\n    constructor(config) {\n        this.config = config;\n        const projections = this.config.getConfig('projections') || [];\n        projections.forEach((projection) => {\n            projection.alias = projection.alias ? projection.alias : projection.code;\n            this.registerProjection(projection);\n        });\n        // register all utm zones\n        for (let utmZone = 1; utmZone < 61; utmZone++) {\n            const code = utmZone < 10 ? `EPSG:3260${utmZone}` : `EPSG:326${utmZone}`;\n            const def = `+proj=utm +zone=${utmZone} +datum=WGS84 +units=m +no_defs`;\n            const proj = { code, def, extent: undefined };\n            this.registerProjection(proj);\n        }\n        // register all mtm zones\n        for (let mtmZone = 1; mtmZone < 11; mtmZone++) {\n            const code = mtmZone < 10 ? `EPSG:3218${mtmZone}` : `EPSG:321${80 + mtmZone}`;\n            let lon0;\n            if (Number(mtmZone) <= 2) {\n                lon0 = -50 - Number(mtmZone) * 3;\n            }\n            else if (Number(mtmZone) >= 12) {\n                lon0 = -81 - (Number(mtmZone) - 12) * 3;\n            }\n            else {\n                lon0 = -49.5 - Number(mtmZone) * 3;\n            }\n            const def = `+proj=tmerc +lat_0=0 +lon_0=${lon0} +k=0.9999 +x_0=304800 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\"`;\n            const proj = { code, def, extent: undefined };\n            this.registerProjection(proj);\n        }\n    }\n    /**\n     * Define a proj4 projection and register it in OL\n     * @param projection Projection\n     */\n    registerProjection(projection) {\n        proj4.defs(projection.code, projection.def);\n        register(proj4);\n        if (projection.extent) {\n            get(projection.code).setExtent(projection.extent);\n        }\n    }\n}\nProjectionService.ɵfac = function ProjectionService_Factory(t) { return new (t || ProjectionService)(ɵɵinject(ConfigService)); };\nProjectionService.ɵprov = ɵɵdefineInjectable({ token: ProjectionService, factory: ProjectionService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ProjectionService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ConfigService }]; }, null); })();\n\nclass DataSourceService {\n    constructor(capabilitiesService, optionsService, wfsDataSourceService, languageService, messageService, projectionService, authInterceptor) {\n        this.capabilitiesService = capabilitiesService;\n        this.optionsService = optionsService;\n        this.wfsDataSourceService = wfsDataSourceService;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.projectionService = projectionService;\n        this.authInterceptor = authInterceptor;\n        this.datasources$ = new BehaviorSubject([]);\n    }\n    createAsyncDataSource(context, detailedContextUri) {\n        if (!context.type) {\n            console.error(context);\n            throw new Error('Datasource needs a type');\n        }\n        let dataSource;\n        switch (context.type.toLowerCase()) {\n            case 'osm':\n                dataSource = this.createOSMDataSource(context);\n                break;\n            case 'vector':\n                dataSource = this.createFeatureDataSource(context);\n                break;\n            case 'wfs':\n                dataSource = this.createWFSDataSource(context);\n                break;\n            case 'wms':\n                const wmsContext = context;\n                ObjectUtils.removeDuplicateCaseInsensitive(wmsContext.params);\n                dataSource = this.createWMSDataSource(wmsContext, detailedContextUri);\n                break;\n            case 'wmts':\n                dataSource = this.createWMTSDataSource(context);\n                break;\n            case 'xyz':\n                dataSource = this.createXYZDataSource(context);\n                break;\n            case 'tiledebug':\n                dataSource = this.createTileDebugDataSource(context);\n                break;\n            case 'carto':\n                dataSource = this.createCartoDataSource(context);\n                break;\n            case 'arcgisrest':\n                dataSource = this.createArcGISRestDataSource(context, detailedContextUri);\n                break;\n            case 'imagearcgisrest':\n                dataSource = this.createArcGISRestImageDataSource(context, detailedContextUri);\n                break;\n            case 'websocket':\n                dataSource = this.createWebSocketDataSource(context);\n                break;\n            case 'mvt':\n                dataSource = this.createMVTDataSource(context);\n                break;\n            case 'tilearcgisrest':\n                dataSource = this.createTileArcGISRestDataSource(context, detailedContextUri);\n                break;\n            case 'cluster':\n                dataSource = this.createClusterDataSource(context);\n                break;\n            default:\n                console.error(context);\n                throw new Error('Invalid datasource type');\n        }\n        this.datasources$.next(this.datasources$.value.concat([dataSource]));\n        return dataSource;\n    }\n    createOSMDataSource(context) {\n        return new Observable(d => d.next(new OSMDataSource(context)));\n    }\n    createFeatureDataSource(context) {\n        return new Observable(d => d.next(new FeatureDataSource(context)));\n    }\n    createWebSocketDataSource(context) {\n        return new Observable(d => d.next(new WebSocketDataSource(context)));\n    }\n    createWFSDataSource(context) {\n        return new Observable(d => d.next(new WFSDataSource(context, this.wfsDataSourceService, this.authInterceptor)));\n    }\n    createWMSDataSource(context, detailedContextUri) {\n        const observables = [];\n        if (context.optionsFromCapabilities) {\n            observables.push(this.capabilitiesService.getWMSOptions(context).pipe(catchError(e => {\n                const title = this.languageService.translate.instant('igo.geo.dataSource.unavailableTitle');\n                const message = this.languageService.translate.instant('igo.geo.dataSource.unavailable', { value: context.params.LAYERS });\n                this.messageService.error(message, title);\n                throw e;\n            })));\n        }\n        if (this.optionsService && context.optionsFromApi === true) {\n            observables.push(this.optionsService.getWMSOptions(context, detailedContextUri).pipe(catchError(e => {\n                e.error.toDisplay = true;\n                e.error.title = this.languageService.translate.instant('igo.geo.dataSource.unavailableTitle');\n                e.error.message = this.languageService.translate.instant('igo.geo.dataSource.optionsApiUnavailable');\n                return of({});\n            })));\n        }\n        observables.push(of(context));\n        return forkJoin(observables).pipe(map((options) => {\n            const optionsMerged = options.reduce((a, b) => ObjectUtils.mergeDeep(a, b));\n            return new WMSDataSource(optionsMerged, this.wfsDataSourceService);\n        }), catchError(() => {\n            return of(undefined);\n        }));\n    }\n    createWMTSDataSource(context) {\n        if (context.optionsFromCapabilities) {\n            return this.capabilitiesService.getWMTSOptions(context).pipe(map((options) => {\n                return options ? new WMTSDataSource(options) : undefined;\n            }), catchError(() => {\n                const title = this.languageService.translate.instant('igo.geo.dataSource.unavailableTitle');\n                const message = this.languageService.translate.instant('igo.geo.dataSource.unavailable', { value: context.layer });\n                this.messageService.error(message, title);\n                return of(undefined);\n            }));\n        }\n        return new Observable(d => d.next(new WMTSDataSource(context)));\n    }\n    createXYZDataSource(context) {\n        return new Observable(d => d.next(new XYZDataSource(context)));\n    }\n    createTileDebugDataSource(context) {\n        return new Observable(d => d.next(new TileDebugDataSource(context)));\n    }\n    createCartoDataSource(context) {\n        if (context.mapId) {\n            return this.capabilitiesService\n                .getCartoOptions(context)\n                .pipe(map((options) => new CartoDataSource(options)));\n        }\n        return new Observable(d => d.next(new CartoDataSource(context)));\n    }\n    createArcGISRestDataSource(context, detailedContextUri) {\n        const observables = [];\n        observables.push(this.capabilitiesService.getArcgisOptions(context).pipe(catchError(e => {\n            const title = this.languageService.translate.instant('igo.geo.dataSource.unavailableTitle');\n            const message = this.languageService.translate.instant('igo.geo.dataSource.unavailable', { value: context.layer });\n            this.messageService.error(message, title);\n            throw e;\n        })));\n        if (this.optionsService && context.optionsFromApi === true) {\n            observables.push(this.optionsService.getArcgisRestOptions(context, detailedContextUri).pipe(catchError(e => {\n                e.error.toDisplay = true;\n                e.error.title = this.languageService.translate.instant('igo.geo.dataSource.unavailableTitle');\n                e.error.message = this.languageService.translate.instant('igo.geo.dataSource.optionsApiUnavailable');\n                return of({});\n            })));\n        }\n        observables.push(of(context));\n        return forkJoin(observables).pipe(map((options) => {\n            const optionsMerged = options.reduce((a, b) => ObjectUtils.mergeDeep(a, b));\n            return new ArcGISRestDataSource(optionsMerged);\n        }), catchError(() => {\n            return of(undefined);\n        }));\n    }\n    createArcGISRestImageDataSource(context, detailedContextUri) {\n        const observables = [];\n        observables.push(this.capabilitiesService.getImageArcgisOptions(context).pipe(catchError(e => {\n            const title = this.languageService.translate.instant('igo.geo.dataSource.unavailableTitle');\n            const message = this.languageService.translate.instant('igo.geo.dataSource.unavailable', { value: context.params.LAYERS });\n            this.messageService.error(message, title);\n            throw e;\n        })));\n        if (this.optionsService && context.optionsFromApi === true) {\n            observables.push(this.optionsService.getArcgisRestOptions(context, detailedContextUri).pipe(catchError(e => {\n                e.error.toDisplay = true;\n                e.error.title = this.languageService.translate.instant('igo.geo.dataSource.unavailableTitle');\n                e.error.message = this.languageService.translate.instant('igo.geo.dataSource.optionsApiUnavailable');\n                return of({});\n            })));\n        }\n        observables.push(of(context));\n        return forkJoin(observables).pipe(map((options) => {\n            const optionsMerged = options.reduce((a, b) => ObjectUtils.mergeDeep(a, b));\n            return new ImageArcGISRestDataSource(optionsMerged);\n        }), catchError(() => {\n            return of(undefined);\n        }));\n    }\n    createTileArcGISRestDataSource(context, detailedContextUri) {\n        const observables = [];\n        observables.push(this.capabilitiesService.getImageArcgisOptions(context).pipe(catchError(e => {\n            const title = this.languageService.translate.instant('igo.geo.dataSource.unavailableTitle');\n            const message = this.languageService.translate.instant('igo.geo.dataSource.unavailable', { value: context.params.LAYERS });\n            this.messageService.error(message, title);\n            throw e;\n        })));\n        if (this.optionsService && context.optionsFromApi === true) {\n            observables.push(this.optionsService.getArcgisRestOptions(context, detailedContextUri).pipe(catchError(e => {\n                e.error.toDisplay = true;\n                e.error.title = this.languageService.translate.instant('igo.geo.dataSource.unavailableTitle');\n                e.error.message = this.languageService.translate.instant('igo.geo.dataSource.optionsApiUnavailable');\n                return of({});\n            })));\n        }\n        observables.push(of(context));\n        return forkJoin(observables).pipe(map((options) => {\n            const optionsMerged = options.reduce((a, b) => ObjectUtils.mergeDeep(a, b));\n            return new TileArcGISRestDataSource(optionsMerged);\n        }), catchError(() => {\n            return of(undefined);\n        }));\n    }\n    createMVTDataSource(context) {\n        return new Observable(d => d.next(new MVTDataSource(context)));\n    }\n    createClusterDataSource(context) {\n        return new Observable(d => d.next(new ClusterDataSource(context)));\n    }\n}\nDataSourceService.ɵfac = function DataSourceService_Factory(t) { return new (t || DataSourceService)(ɵɵinject(CapabilitiesService), ɵɵinject(OptionsService, 8), ɵɵinject(WFSService), ɵɵinject(LanguageService), ɵɵinject(MessageService), ɵɵinject(ProjectionService), ɵɵinject(AuthInterceptor)); };\nDataSourceService.ɵprov = ɵɵdefineInjectable({ token: DataSourceService, factory: DataSourceService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DataSourceService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: CapabilitiesService }, { type: OptionsService, decorators: [{\n                type: Optional\n            }] }, { type: WFSService }, { type: LanguageService }, { type: MessageService }, { type: ProjectionService }, { type: AuthInterceptor }]; }, null); })();\n\nclass OptionsApiService extends OptionsService {\n    constructor(http, options = {}) {\n        super();\n        this.http = http;\n        this.urlApi = options.url || this.urlApi;\n        this.provideContextUri = options.provideContextUri || this.provideContextUri;\n    }\n    getWMSOptions(baseOptions, detailedContextUri) {\n        if (!this.urlApi) {\n            return of({});\n        }\n        let params = new HttpParams({\n            fromObject: {\n                type: baseOptions.type,\n                url: baseOptions.url,\n                layers: baseOptions.params.LAYERS\n            }\n        });\n        if (detailedContextUri && this.provideContextUri) {\n            params = params.append('context', detailedContextUri);\n        }\n        const request = this.http.get(this.urlApi, {\n            params\n        });\n        return request.pipe(map((res) => {\n            if (!res || !res.sourceOptions) {\n                return {};\n            }\n            if (res.layerOptions) {\n                res.sourceOptions._layerOptionsFromSource = res.layerOptions;\n            }\n            return res.sourceOptions;\n        }));\n    }\n    getArcgisRestOptions(baseOptions, detailedContextUri) {\n        if (!this.urlApi) {\n            return of({});\n        }\n        let params = new HttpParams({\n            fromObject: {\n                type: baseOptions.type,\n                url: baseOptions.url,\n                layers: baseOptions.layer\n            }\n        });\n        if (detailedContextUri && this.provideContextUri) {\n            params = params.append('context', detailedContextUri);\n        }\n        const request = this.http.get(this.urlApi, {\n            params\n        });\n        return request.pipe(map((res) => {\n            if (!res || !res.sourceOptions) {\n                return {};\n            }\n            if (res.layerOptions) {\n                res.sourceOptions._layerOptionsFromSource = res.layerOptions;\n            }\n            return res.sourceOptions;\n        }));\n    }\n}\nOptionsApiService.ɵfac = function OptionsApiService_Factory(t) { return new (t || OptionsApiService)(ɵɵinject(HttpClient), ɵɵinject('options')); };\nOptionsApiService.ɵprov = ɵɵdefineInjectable({ token: OptionsApiService, factory: OptionsApiService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OptionsApiService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: HttpClient }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }]; }, null); })();\n\nfunction optionsApiFactory(http, configService) {\n    return new OptionsApiService(http, configService.getConfig('optionsApi'));\n}\nfunction provideOptionsApi() {\n    return {\n        provide: OptionsService,\n        useFactory: optionsApiFactory,\n        deps: [HttpClient, ConfigService]\n    };\n}\n\nclass ImageWatcher extends Watcher {\n    constructor(layer) {\n        super();\n        this.loaded = 0;\n        this.loading = 0;\n        this.source = layer.options.source.ol;\n        this.id = uuid();\n    }\n    watch() {\n        this.source.on(`imageloadstart`, e => this.handleLoadStart(e));\n        this.source.on(`imageloadend`, e => this.handleLoadEnd(e));\n        this.source.on(`imageloaderror`, e => this.handleLoadEnd(e));\n    }\n    unwatch() {\n        this.source.un(`imageloadstart`, e => this.handleLoadStart(e));\n        this.source.un(`imageloadend`, e => this.handleLoadEnd(e));\n        this.source.un(`imageloaderror`, e => this.handleLoadEnd(e));\n    }\n    handleLoadStart(event) {\n        if (!event.image.__watchers__) {\n            event.image.__watchers__ = [];\n        }\n        event.image.__watchers__.push(this.id);\n        this.loading += 1;\n        this.status = SubjectStatus.Working;\n    }\n    handleLoadEnd(event) {\n        if (!event.image.__watchers__) {\n            return;\n        }\n        const watcherIndex = event.image.__watchers__.indexOf(this.id);\n        if (watcherIndex < 0) {\n            return;\n        }\n        event.image.__watchers__.splice(watcherIndex, 1);\n        this.loaded += 1;\n        const loading = this.loading;\n        if (this.loaded >= loading) {\n            if (loading === this.loading) {\n                this.status = SubjectStatus.Done;\n                this.loaded = this.loading = 0;\n            }\n        }\n    }\n}\n\nclass TileWatcher extends Watcher {\n    constructor(layer) {\n        super();\n        this.loaded = 0;\n        this.loading = 0;\n        this.source = layer.options.source.ol;\n        this.id = uuid();\n    }\n    watch() {\n        this.source.on(`tileloadstart`, e => this.handleLoadStart(e));\n        this.source.on(`tileloadend`, e => this.handleLoadEnd(e));\n        this.source.on(`tileloaderror`, e => this.handleLoadEnd(e));\n    }\n    unwatch() {\n        this.source.un(`tileloadstart`, e => this.handleLoadStart(e));\n        this.source.un(`tileloadend`, e => this.handleLoadEnd(e));\n        this.source.un(`tileloaderror`, e => this.handleLoadEnd(e));\n    }\n    handleLoadStart(event) {\n        // This is to avoid increasing\n        // the number of loaded tiles if a tile was loading\n        // before subscribing to this watcher\n        if (!event.tile.__watchers__) {\n            event.tile.__watchers__ = [];\n        }\n        event.tile.__watchers__.push(this.id);\n        this.loading += 1;\n        this.status = SubjectStatus.Working;\n    }\n    handleLoadEnd(event) {\n        if (!event.tile.__watchers__) {\n            return;\n        }\n        const watcherIndex = event.tile.__watchers__.indexOf(this.id);\n        if (watcherIndex < 0) {\n            return;\n        }\n        event.tile.__watchers__.splice(watcherIndex, 1);\n        this.loaded += 1;\n        const loading = this.loading;\n        if (this.loaded >= loading) {\n            if (loading === this.loading) {\n                this.status = SubjectStatus.Done;\n                this.loaded = this.loading = 0;\n            }\n        }\n    }\n}\n\n/**\n * Get all the layers legend\n * @return Array of legend\n */\nfunction getLayersLegends(layers, view) {\n    const legends = [];\n    for (const layer of layers) {\n        if (layer.visible === false) {\n            continue;\n        }\n        const legendUrls = layer.dataSource.getLegend(undefined, view) || [];\n        for (const legendUrl of legendUrls) {\n            if (legendUrl.url === undefined) {\n                continue;\n            }\n            // Add legend info to the list\n            legends.push({\n                title: layer.title,\n                url: legendUrl.url\n            });\n        }\n    }\n    return legends;\n}\n\nclass VectorWatcher extends Watcher {\n    constructor(layer) {\n        super();\n        this.loaded = 0;\n        this.loading = 0;\n        this.layer = layer;\n        this.id = uuid();\n    }\n    watch() {\n        let olSource = this.layer.options.source.ol;\n        if (this.layer.dataSource instanceof ClusterDataSource) {\n            olSource = this.layer.options.source.options.source;\n        }\n        olSource.on(`vectorloading`, e => this.handleLoadStart(e));\n        olSource.on(`vectorloaded`, e => this.handleLoadEnd(e));\n        olSource.on(`vectorloaderror`, e => this.handleLoadEnd(e));\n    }\n    unwatch() {\n        let olSource = this.layer.options.source.ol;\n        if (this.layer.dataSource instanceof ClusterDataSource) {\n            olSource = this.layer.options.source.options.source;\n        }\n        olSource.un(`vectorloading`, e => this.handleLoadStart(e));\n        olSource.un(`vectorloaded`, e => this.handleLoadEnd(e));\n        olSource.un(`vectorloaderror`, e => this.handleLoadEnd(e));\n    }\n    handleLoadStart(event) {\n        this.loading += 1;\n        this.status = SubjectStatus.Working;\n    }\n    handleLoadEnd(event) {\n        this.loaded += 1;\n        const loading = this.loading;\n        if (this.loaded >= loading) {\n            if (loading === this.loading) {\n                this.status = SubjectStatus.Done;\n                this.loaded = this.loading = 0;\n            }\n        }\n    }\n}\n\nclass ImageLayer extends Layer {\n    constructor(options, messageService, languageService, authInterceptor) {\n        super(options, messageService, authInterceptor);\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.authInterceptor = authInterceptor;\n        this.watcher = new ImageWatcher(this);\n        this.status$ = this.watcher.status$;\n    }\n    createOlLayer() {\n        const olOptions = Object.assign({}, this.options, {\n            source: this.options.source.ol\n        });\n        const image = new olLayerImage(olOptions);\n        if (this.authInterceptor) {\n            image.getSource().setImageLoadFunction((tile, src) => {\n                this.customLoader(tile, src, this.authInterceptor, this.messageService, this.languageService);\n            });\n        }\n        return image;\n    }\n    setMap(map) {\n        if (map === undefined) {\n            this.watcher.unsubscribe();\n        }\n        else {\n            this.watcher.subscribe(() => { });\n        }\n        super.setMap(map);\n    }\n    customLoader(tile, src, interceptor, messageService, languageService) {\n        const xhr = new XMLHttpRequest();\n        xhr.open('GET', src);\n        const intercepted = interceptor.interceptXhr(xhr, src);\n        if (!intercepted) {\n            xhr.abort();\n            tile.getImage().src = src;\n            return;\n        }\n        xhr.responseType = 'arraybuffer';\n        xhr.onload = function () {\n            const arrayBufferView = new Uint8Array(this.response);\n            const responseString = new TextDecoder().decode(arrayBufferView);\n            if (responseString.includes('ServiceExceptionReport')) {\n                messageService.error(languageService.translate.instant('igo.geo.dataSource.optionsApiUnavailable'), languageService.translate.instant('igo.geo.dataSource.unavailableTitle'));\n            }\n            const blob = new Blob([arrayBufferView], { type: 'image/png' });\n            const urlCreator = window.URL;\n            const imageUrl = urlCreator.createObjectURL(blob);\n            tile.getImage().src = imageUrl;\n        };\n        xhr.send();\n    }\n}\n\nclass TileLayer extends Layer {\n    constructor(options, messageService) {\n        super(options, messageService);\n        this.messageService = messageService;\n        this.watcher = new TileWatcher(this);\n        this.status$ = this.watcher.status$;\n    }\n    createOlLayer() {\n        const olOptions = Object.assign({}, this.options, {\n            source: this.options.source.ol\n        });\n        return new olLayerTile(olOptions);\n    }\n    setMap(map) {\n        if (map === undefined) {\n            this.watcher.unsubscribe();\n        }\n        else {\n            this.watcher.subscribe(() => { });\n        }\n        super.setMap(map);\n    }\n}\n\nclass VectorLayer extends Layer {\n    constructor(options, messageService, authInterceptor) {\n        super(options, messageService, authInterceptor);\n        this.messageService = messageService;\n        this.authInterceptor = authInterceptor;\n        this.watcher = new VectorWatcher(this);\n        this.status$ = this.watcher.status$;\n    }\n    get browsable() {\n        return this.options.browsable !== false;\n    }\n    get exportable() {\n        return this.options.exportable !== false;\n    }\n    createOlLayer() {\n        const olOptions = Object.assign({}, this.options, {\n            source: this.options.source.ol\n        });\n        if (this.options.animation) {\n            this.dataSource.ol.on('addfeature', function (e) {\n                this.flash(e.feature);\n            }.bind(this));\n        }\n        if (this.options.trackFeature) {\n            this.enableTrackFeature(this.options.trackFeature);\n        }\n        const vector = new OlVectorLayer(olOptions);\n        const vectorSource = (this.dataSource instanceof ClusterDataSource\n            ? vector.getSource().getSource()\n            : vector.getSource());\n        const url = vectorSource.getUrl();\n        vectorSource.addEventListener('vectorloading');\n        vectorSource.addEventListener('vectorloaded');\n        vectorSource.addEventListener('vectorloaderror');\n        if (url) {\n            const loader = (extent, resolution, proj) => {\n                this.customLoader(vectorSource, url, this.authInterceptor, extent, resolution, proj);\n            };\n            if (loader) {\n                vectorSource.setLoader(loader);\n            }\n        }\n        return vector;\n    }\n    flash(feature) {\n        const start = new Date().getTime();\n        const listenerKey = this.ol.on('postrender', animate.bind(this));\n        function animate(event) {\n            const vectorContext = getVectorContext(event);\n            const frameState = event.frameState;\n            const flashGeom = feature.getGeometry().clone();\n            const elapsed = frameState.time - start;\n            const elapsedRatio = elapsed / this.options.animation.duration;\n            const opacity = easeOut(1 - elapsedRatio);\n            const newColor = asArray(this.options.animation.color || 'red');\n            newColor[3] = opacity;\n            let style = this.ol\n                .getStyleFunction()\n                .call(this, feature)\n                .find((style2) => {\n                return style2.getImage();\n            });\n            if (!style) {\n                style = this.ol.getStyleFunction().call(this, feature)[0];\n            }\n            const styleClone = style.clone();\n            switch (feature.getGeometry().getType()) {\n                case 'Point':\n                    const radius = easeOut(elapsedRatio) * (styleClone.getImage().getRadius() * 3);\n                    styleClone.getImage().setRadius(radius);\n                    styleClone.getImage().setOpacity(opacity);\n                    break;\n                case 'LineString':\n                    // TODO\n                    if (styleClone.getImage()) {\n                        styleClone.getImage().getStroke().setColor(newColor);\n                        styleClone\n                            .getImage()\n                            .getStroke()\n                            .setWidth(easeOut(elapsedRatio) *\n                            (styleClone.getImage().getStroke().getWidth() * 3));\n                    }\n                    if (styleClone.getStroke()) {\n                        styleClone.getStroke().setColor(newColor);\n                        styleClone\n                            .getStroke()\n                            .setWidth(easeOut(elapsedRatio) * (styleClone.getStroke().getWidth() * 3));\n                    }\n                    break;\n                case 'Polygon':\n                    // TODO\n                    if (styleClone.getImage()) {\n                        styleClone.getImage().getFill().setColor(newColor);\n                    }\n                    if (styleClone.getFill()) {\n                        styleClone.getFill().setColor(newColor);\n                    }\n                    break;\n            }\n            styleClone.setText('');\n            vectorContext.setStyle(styleClone);\n            vectorContext.drawGeometry(flashGeom);\n            if (elapsed > this.options.animation.duration) {\n                unByKey(listenerKey);\n                // remove last geometry\n                // there is a little flash before feature disappear, better solution ?\n                this.map.ol.render();\n                return;\n            }\n            // tell OpenLayers to continue postcompose animation\n            this.map.ol.render();\n        }\n    }\n    setMap(map) {\n        if (map === undefined) {\n            this.watcher.unsubscribe();\n        }\n        else {\n            this.watcher.subscribe(() => { });\n        }\n        super.setMap(map);\n    }\n    onUnwatch() {\n        this.dataSource.onUnwatch();\n        this.stopAnimation();\n    }\n    stopAnimation() {\n        this.dataSource.ol.un('addfeature', function (e) {\n            if (this.visible) {\n                this.flash(e.feature);\n            }\n        }.bind(this));\n    }\n    enableTrackFeature(id) {\n        this.trackFeatureListenerId = this.dataSource.ol.on('addfeature', this.trackFeature.bind(this, id));\n    }\n    centerMapOnFeature(id) {\n        const feat = this.dataSource.ol.getFeatureById(id);\n        if (feat) {\n            this.map.ol.getView().setCenter(feat.getGeometry().getCoordinates());\n        }\n    }\n    trackFeature(id, feat) {\n        if (feat.feature.getId() === id && this.visible) {\n            this.centerMapOnFeature(id);\n        }\n    }\n    disableTrackFeature(id) {\n        unByKey(this.trackFeatureListenerId);\n    }\n    /**\n     * Custom loader for vector layer.\n     * @internal\n     * @param vectorSource the vector source to be created\n     * @param url the url string or function to retrieve the data\n     * @param interceptor the interceptor of the data\n     * @param extent the extent of the requested data\n     * @param resolution the current resolution\n     * @param projection the projection to retrieve the data\n     */\n    customLoader(vectorSource, url, interceptor, extent, resolution, projection) {\n        vectorSource.dispatchEvent({ type: 'vectorloading' });\n        const xhr = new XMLHttpRequest();\n        xhr.open('GET', typeof url === 'function'\n            ? (url = url(extent, resolution, projection))\n            : url);\n        const format = vectorSource.getFormat();\n        if (format.getType() === FormatType.ARRAY_BUFFER) {\n            xhr.responseType = 'arraybuffer';\n        }\n        if (interceptor) {\n            interceptor.interceptXhr(xhr, url);\n        }\n        const onError = () => {\n            vectorSource.dispatchEvent({ type: 'vectorloaderror' });\n            vectorSource.removeLoadedExtent(extent);\n        };\n        xhr.onerror = onError;\n        xhr.onload = () => {\n            // status will be 0 for file:// urls\n            if (!xhr.status || (xhr.status >= 200 && xhr.status < 300)) {\n                const type = format.getType();\n                let source;\n                if (type === FormatType.JSON || type === FormatType.TEXT) {\n                    source = xhr.responseText;\n                }\n                else if (type === FormatType.XML) {\n                    source = xhr.responseXML;\n                    if (!source) {\n                        source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n                    }\n                }\n                else if (type === FormatType.ARRAY_BUFFER) {\n                    source = xhr.response;\n                }\n                if (source) {\n                    vectorSource.addFeatures(format.readFeatures(source, {\n                        extent,\n                        featureProjection: projection\n                    }), format.readProjection(source));\n                    vectorSource.dispatchEvent({ type: 'vectorloaded' });\n                }\n                else {\n                    onError();\n                }\n            }\n            else {\n                onError();\n            }\n        };\n        xhr.send();\n    }\n}\n\nclass VectorTileLayer extends Layer {\n    constructor(options, messageService, authInterceptor) {\n        super(options, messageService, authInterceptor);\n        this.messageService = messageService;\n        this.authInterceptor = authInterceptor;\n        this.watcher = new TileWatcher(this);\n        this.status$ = this.watcher.status$;\n    }\n    createOlLayer() {\n        const olOptions = Object.assign({}, this.options, {\n            source: this.options.source.ol\n        });\n        const vectorTile = new olLayerVectorTile(olOptions);\n        const vectorTileSource = vectorTile.getSource();\n        vectorTileSource.setTileLoadFunction((tile, url) => {\n            const loader = this.customLoader(url, tile.getFormat(), this.authInterceptor, tile.onLoad.bind(tile));\n            if (loader) {\n                tile.setLoader(loader);\n            }\n        });\n        return vectorTile;\n    }\n    /**\n     * Custom loader for vector tile layer. Modified from the loadFeaturesXhr function in ol\\featureloader.js\n     * @internal\n     * @param url the url string or function to retrieve the data\n     * @param format the format of the tile\n     * @param interceptor the interceptor of the data\n     * @param success On success event action to trigger\n     * @param failure On failure event action to trigger TODO\n     */\n    customLoader(url, format, interceptor, success, failure) {\n        return ((extent, resolution, projection) => {\n            const xhr = new XMLHttpRequest();\n            xhr.open('GET', typeof url === 'function' ? url = url(extent, resolution, projection) : url);\n            if (interceptor) {\n                interceptor.interceptXhr(xhr, url);\n            }\n            if (format.getType() === 'arraybuffer') {\n                xhr.responseType = 'arraybuffer';\n            }\n            xhr.onload = (event) => {\n                if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {\n                    const type = format.getType();\n                    let source;\n                    if (type === 'json' || type === 'text') {\n                        source = xhr.responseText;\n                    }\n                    else if (type === 'xml') {\n                        source = xhr.responseXML;\n                        if (!source) {\n                            source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n                        }\n                    }\n                    else if (type === 'arraybuffer') {\n                        source = xhr.response;\n                    }\n                    if (source) {\n                        success.call(this, format.readFeatures(source, {\n                            extent,\n                            featureProjection: projection\n                        }), format.readProjection(source));\n                    }\n                    else {\n                        // TODO\n                        failure.call(this);\n                    }\n                }\n                else {\n                    // TODO\n                    failure.call(this);\n                }\n            };\n            xhr.onerror = () => {\n                // TODO\n                failure.call(this);\n            };\n            xhr.send();\n        });\n    }\n    setMap(map) {\n        if (map === undefined) {\n            this.watcher.unsubscribe();\n        }\n        else {\n            this.watcher.subscribe(() => { });\n        }\n        super.setMap(map);\n    }\n}\n\n/**\n * Create a marker style for points\n * @returns Style\n */\nfunction createOverlayMarkerStyle({ text, opacity = 1, markerColor = [0, 161, 222], markerOutlineColor = [255, 255, 255] } = {}) {\n    let iconColor;\n    let svgIconColor;\n    let svgOutlineColor;\n    let svg;\n    const isIE = /msie\\s|trident\\/|edge\\//i.test(window.navigator.userAgent); // To fix IE11 svg bug (temporarly)\n    const newColor = asArray(markerColor).slice(0);\n    const newOutlineColor = asArray(markerOutlineColor).slice(0);\n    if (newColor.length === 4 && (typeof markerColor !== 'string' || /^#[0-9A-F]{8}$/i.test(markerColor))) {\n        opacity = newColor[3];\n    }\n    svgIconColor = `\"rgba(${newColor[0]},${newColor[1]},${newColor[2]},${opacity})\"`;\n    iconColor = markerColor;\n    svgOutlineColor = `\"rgb(${newOutlineColor[0]},${newOutlineColor[1]},${newOutlineColor[2]})\"`;\n    svg =\n        'data:image/svg+xml;utf8,<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" height=\"36\" width=\"36\" viewBox=\"0 0 36 36\">' +\n            '<path fill=' +\n            svgIconColor +\n            ' stroke=' +\n            svgOutlineColor +\n            ' stroke-width=\"2\" d=\"M 17.692635,32.565644 C 15.71852,30.330584 13.290925,27.058065 11.6766,24.455732 9.3398623,20.688851 7.8905694,17.205334 7.6297492,14.728733 7.5616025,14.081649 7.5739557,12.528552 7.6513363,12.014724 8.1013861,9.0262716 9.8047068,6.3655569 12.310675,4.7364878 c 1.113691,-0.7239832 2.508083,-1.2834131 3.776687,-1.5152052 0.242945,-0.044389 0.451656,-0.09393 0.463804,-0.1100911 0.01215,-0.016161 0.638282,-0.025502 1.391411,-0.02076 1.088235,0.00685 1.450932,0.024316 1.766871,0.085071 2.650763,0.5097353 4.947142,1.8701891 6.498786,3.8501033 0.628018,0.8013587 1.297046,2.0200608 1.640967,2.9891872 0.191065,0.538399 0.427644,1.447408 0.477391,1.834287 0.0164,0.127546 0.0434,0.231902 0.06,0.231902 0.0166,0 0.03122,0.626135 0.03249,1.391411 0.0013,0.765276 -0.011,1.391411 -0.02726,1.391411 -0.01626,0 -0.05449,0.154049 -0.08495,0.342331 -0.08815,0.544879 -0.387235,1.721449 -0.604837,2.379406 -1.209421,3.656888 -4.014463,8.349762 -7.849521,13.132357 -0.790496,0.985807 -1.795217,2.167992 -1.842543,2.167992 -0.01896,0 -0.161766,-0.144111 -0.317336,-0.320246 z m 1.066937,-15.36525 c 0.133519,-0.02121 0.248766,-0.05657 0.256105,-0.07859 0.0073,-0.02202 0.04918,-0.03066 0.09298,-0.0192 0.0438,0.01145 0.107628,-0.0072 0.141834,-0.04137 0.03421,-0.03421 0.08456,-0.05474 0.111888,-0.04563 0.02733,0.0091 0.07703,-0.01077 0.110429,-0.04417 0.03341,-0.03341 0.08416,-0.05293 0.112796,-0.04338 0.02863,0.0095 0.08974,-0.01867 0.135802,-0.06271 0.04606,-0.04403 0.111902,-0.08625 0.146319,-0.09381 0.204084,-0.04483 0.762371,-0.519108 1.079463,-0.917027 0.26749,-0.335672 0.570987,-0.878795 0.529019,-0.946701 -0.01496,-0.0242 -0.0067,-0.044 0.01835,-0.044 0.05645,0 0.196809,-0.467982 0.158801,-0.529481 -0.01521,-0.02461 -0.0043,-0.04475 0.02427,-0.04475 0.03157,0 0.04365,-0.04329 0.03082,-0.11043 -0.01161,-0.06074 -0.0066,-0.110429 0.01124,-0.110429 0.01779,0 0.03235,-0.258405 0.03235,-0.574233 0,-0.315829 -0.01545,-0.574234 -0.03434,-0.574234 -0.01889,0 -0.02437,-0.03811 -0.01219,-0.08469 0.04412,-0.168712 -0.336329,-1.152668 -0.481536,-1.245401 -0.02327,-0.01486 -0.04022,-0.03992 -0.03765,-0.05568 0.01222,-0.07498 -0.156557,-0.318365 -0.406379,-0.586027 -0.295921,-0.317054 -0.773059,-0.690104 -0.83427,-0.652274 -0.0206,0.01273 -0.03745,0.0024 -0.03745,-0.02289 0,-0.06107 -0.433076,-0.2789369 -0.487546,-0.245273 -0.02338,0.01445 -0.04251,0.0068 -0.04251,-0.01695 0,-0.056281 -0.393995,-0.1865457 -0.613804,-0.2029397 -0.0943,-0.00703 -0.188579,-0.023183 -0.209503,-0.035888 -0.02092,-0.012705 -0.276571,-0.023337 -0.568105,-0.023627 -0.534044,-5.301e-4 -1.12638,0.091025 -1.12638,0.1741017 0,0.023781 -0.01713,0.032648 -0.03808,0.019705 -0.05054,-0.031232 -0.403641,0.1088602 -0.403641,0.1601422 0,0.02204 -0.01988,0.02779 -0.04417,0.01278 -0.0243,-0.01501 -0.04417,-0.0051 -0.04417,0.02209 0,0.02716 -0.01988,0.0371 -0.04417,0.02209 -0.0243,-0.01501 -0.04417,-0.0051 -0.04417,0.02209 0,0.02716 -0.01915,0.03755 -0.04256,0.02308 -0.02341,-0.01447 -0.08138,0.01252 -0.128834,0.05997 -0.04745,0.04745 -0.0974,0.07515 -0.111001,0.06155 -0.0136,-0.0136 -0.03722,0.0078 -0.05248,0.0476 -0.01526,0.03978 -0.0411,0.06408 -0.0574,0.054 -0.03277,-0.02025 -0.462299,0.323995 -0.491977,0.394291 -0.01026,0.02429 -0.07454,0.0912 -0.142856,0.148686 -0.248033,0.208705 -0.730279,0.974169 -0.672565,1.067553 0.0145,0.02346 0.0059,0.04266 -0.01914,0.04266 -0.05907,0 -0.241471,0.599428 -0.208527,0.685278 0.01385,0.0361 0.0044,0.06564 -0.02098,0.06564 -0.02539,0 -0.04169,0.0646 -0.03622,0.143558 0.0055,0.07896 -0.0042,0.213129 -0.02144,0.29816 -0.04741,0.233576 0.0511,1.055502 0.167516,1.397721 0.126048,0.370516 0.310099,0.740163 0.426484,0.856548 0.04776,0.04776 0.07554,0.08684 0.06174,0.08684 -0.0138,0 0.01516,0.05653 0.06436,0.125632 0.131301,0.184396 0.499365,0.587266 0.518785,0.567846 0.0092,-0.0092 0.09821,0.06081 0.197812,0.155562 0.09961,0.09475 0.190589,0.162786 0.202187,0.151188 0.0116,-0.0116 0.05991,0.01774 0.107361,0.06519 0.04745,0.04745 0.105426,0.07444 0.128834,0.05997 0.02341,-0.01447 0.04256,-0.0057 0.04256,0.01958 0,0.06106 0.344664,0.23496 0.399061,0.201341 0.02346,-0.0145 0.04266,-0.0059 0.04266,0.01914 0,0.05907 0.599429,0.241471 0.685279,0.208527 0.0361,-0.01385 0.06564,-0.0065 0.06564,0.01645 0,0.05196 1.079115,0.04833 1.413314,-0.0048 z\"></path>' +\n            '</svg>';\n    let src;\n    if (isIE) {\n        switch (markerColor) {\n            case 'blue' || [0, 161, 222] || '#00a1de':\n                iconColor = 'blue';\n                break;\n            case 'red' || '#f64139':\n                iconColor = 'red';\n                break;\n            case 'yellow' || '#ffd700':\n                iconColor = 'yellow';\n                break;\n            case 'green' || '#008000':\n                iconColor = 'green';\n                break;\n            default:\n                iconColor = 'blue';\n                break;\n        }\n        src = './assets/igo2/geo/icons/place_' + iconColor + '_36px.svg';\n    }\n    else {\n        src = svg;\n    }\n    return new Style({\n        image: new Icon({\n            src: svg,\n            opacity,\n            imgSize: [36, 36],\n            anchor: [0.5, 0.92]\n        }),\n        text: new Text({\n            text,\n            font: '12px Calibri,sans-serif',\n            fill: new Fill({ color: '#000' }),\n            stroke: new Stroke({ color: '#fff', width: 3 }),\n            overflow: true\n        })\n    });\n}\n\nclass StyleService {\n    createStyle(options) {\n        if (!options) {\n            return createOverlayMarkerStyle();\n        }\n        if (typeof options === 'function' || options instanceof Style) {\n            return options;\n        }\n        return this.parseStyle('style', options);\n    }\n    parseStyle(key, value) {\n        const styleOptions = {};\n        const olCls = this.getOlCls(key);\n        if (olCls && value instanceof Object) {\n            Object.keys(value).forEach(_key => {\n                const olKey = this.getOlKey(_key);\n                styleOptions[olKey] = this.parseStyle(_key, value[_key]);\n            });\n            return new olCls(styleOptions);\n        }\n        else {\n            return value;\n        }\n    }\n    getOlKey(key) {\n        let olKey;\n        switch (key.toLowerCase()) {\n            case 'circle':\n            case 'regularshape':\n            case 'icon':\n                olKey = 'image';\n                break;\n            default:\n                break;\n        }\n        return olKey || key;\n    }\n    getOlCls(key) {\n        let olCls = olstyle[key.charAt(0).toUpperCase() + key.slice(1)];\n        if (key === 'regularshape') {\n            olCls = RegularShape;\n        }\n        if (key === 'backgroundFill') {\n            olCls = Fill;\n        }\n        if (key === 'backgroundStroke') {\n            olCls = Stroke;\n        }\n        return olCls;\n    }\n    createStyleByAttribute(feature, styleByAttribute) {\n        let style;\n        const type = styleByAttribute.type ? styleByAttribute.type : this.guessTypeFeature(feature);\n        const attribute = styleByAttribute.attribute;\n        const data = styleByAttribute.data;\n        const stroke = styleByAttribute.stroke;\n        const width = styleByAttribute.width;\n        const fill = styleByAttribute.fill;\n        const radius = styleByAttribute.radius;\n        const icon = styleByAttribute.icon;\n        const scale = styleByAttribute.scale;\n        const size = data ? data.length : 0;\n        const label = styleByAttribute.label ? (styleByAttribute.label.attribute || styleByAttribute.label) : undefined;\n        const labelStyle = styleByAttribute.label ?\n            this.parseStyle('text', styleByAttribute.label.style) ||\n                new Text() : undefined;\n        const baseStyle = styleByAttribute.baseStyle;\n        if (labelStyle) {\n            labelStyle.setText(this.getLabel(feature, label));\n        }\n        if (type === 'circle') {\n            for (let i = 0; i < size; i++) {\n                const val = typeof feature.get(attribute) !== 'undefined'\n                    ? feature.get(attribute)\n                    : '';\n                if (val === data[i] || val.toString().match(data[i])) {\n                    if (icon) {\n                        style = [\n                            new Style({\n                                image: new Icon({\n                                    src: icon[i],\n                                    scale: scale ? scale[i] : 1\n                                })\n                            })\n                        ];\n                        return style;\n                    }\n                    style = [\n                        new Style({\n                            image: new Circle({\n                                radius: radius ? radius[i] : 4,\n                                stroke: new Stroke({\n                                    color: stroke ? stroke[i] : 'black',\n                                    width: width ? width[i] : 1\n                                }),\n                                fill: new Fill({\n                                    color: fill ? fill[i] : 'black'\n                                })\n                            }),\n                            text: labelStyle\n                        })\n                    ];\n                    return style;\n                }\n            }\n            if (!feature.getStyle()) {\n                if (baseStyle) {\n                    style = this.createStyle(baseStyle);\n                    if (labelStyle) {\n                        style.setText(labelStyle);\n                    }\n                    return style;\n                }\n                style = [\n                    new Style({\n                        image: new Circle({\n                            radius: 4,\n                            stroke: new Stroke({\n                                color: 'black'\n                            }),\n                            fill: new Fill({\n                                color: '#bbbbf2'\n                            })\n                        })\n                    })\n                ];\n                return style;\n            }\n        }\n        else if (type === 'regular') {\n            for (let i = 0; i < size; i++) {\n                const val = typeof feature.get(attribute) !== 'undefined'\n                    ? feature.get(attribute)\n                    : '';\n                if (val === data[i] || val.toString().match(data[i])) {\n                    style = [\n                        new Style({\n                            stroke: new Stroke({\n                                color: stroke ? stroke[i] : 'black',\n                                width: width ? width[i] : 1\n                            }),\n                            fill: new Fill({\n                                color: fill ? fill[i] : 'rgba(255,255,255,0.4)'\n                            }),\n                            text: labelStyle\n                        })\n                    ];\n                    return style;\n                }\n            }\n            if (feature instanceof olFeature) {\n                if (!feature.getStyle()) {\n                    if (baseStyle) {\n                        style = this.createStyle(baseStyle);\n                        if (labelStyle) {\n                            style.setText(labelStyle);\n                        }\n                        return style;\n                    }\n                    style = [\n                        new Style({\n                            stroke: new Stroke({\n                                color: 'black'\n                            }),\n                            fill: new Fill({\n                                color: '#bbbbf2'\n                            })\n                        })\n                    ];\n                    return style;\n                }\n            }\n        }\n    }\n    createClusterStyle(feature, clusterParam = {}, layerStyle) {\n        let style;\n        const size = feature.get('features').length;\n        if (size !== 1) {\n            if (clusterParam.clusterRanges) {\n                for (const r of clusterParam.clusterRanges) {\n                    if ((!r.minRadius || r.minRadius <= size) &&\n                        (!r.maxRadius || r.maxRadius >= size)) {\n                        style = this.createStyle(r.style);\n                        if (r.showRange) {\n                            const text = new Text({\n                                text: size.toString(),\n                                fill: new Fill({\n                                    color: '#fff'\n                                })\n                            });\n                            style.setText(text);\n                        }\n                        if (r.dynamicRadius) {\n                            let clusterRadius;\n                            const radiusMin = style.image_.getRadius();\n                            clusterRadius = 5 * Math.log(size);\n                            if (clusterRadius < radiusMin) {\n                                clusterRadius = radiusMin;\n                            }\n                            style.image_.setRadius(clusterRadius);\n                        }\n                        break;\n                    }\n                }\n            }\n            if (!style) {\n                let clusterRadius;\n                if (clusterParam.radiusCalc) {\n                    clusterRadius = clusterParam.radiusCalc(size);\n                }\n                else {\n                    const radiusMin = 6;\n                    clusterRadius = 5 * Math.log(size);\n                    if (clusterRadius < radiusMin) {\n                        clusterRadius = radiusMin;\n                    }\n                }\n                style = [\n                    new Style({\n                        image: new Circle({\n                            radius: clusterRadius,\n                            opacity: 0.4,\n                            stroke: new Stroke({\n                                color: 'black'\n                            }),\n                            fill: new Fill({\n                                color: 'rgba(24, 134, 45, 0.5)'\n                            })\n                        }),\n                        text: new Text({\n                            text: size.toString(),\n                            fill: new Fill({\n                                color: '#fff'\n                            })\n                        })\n                    })\n                ];\n            }\n        }\n        else {\n            style = this.createStyle(layerStyle);\n        }\n        return style;\n    }\n    getLabel(feature, labelMatch) {\n        let label = labelMatch;\n        const labelToGet = Array.from(labelMatch.matchAll(/\\$\\{([^\\{\\}]+)\\}/g));\n        labelToGet.forEach(v => {\n            label = label.replace(v[0], feature.get(v[1]));\n        });\n        // Nothing done? check feature's attribute\n        if (labelToGet.length === 0 && label === labelMatch) {\n            label = feature.get(labelMatch) || labelMatch;\n        }\n        return label;\n    }\n    guessTypeFeature(feature) {\n        switch (feature.getGeometry().getType()) {\n            case 'Point':\n            case 'MultiPoint':\n            case 'Circle':\n                return 'circle';\n            default:\n                return 'regular';\n        }\n    }\n}\nStyleService.ɵfac = function StyleService_Factory(t) { return new (t || StyleService)(); };\nStyleService.ɵprov = ɵɵdefineInjectable({ token: StyleService, factory: StyleService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(StyleService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], null, null); })();\n\nclass LayerService {\n    constructor(http, styleService, dataSourceService, messageService, languageService, authInterceptor) {\n        this.http = http;\n        this.styleService = styleService;\n        this.dataSourceService = dataSourceService;\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.authInterceptor = authInterceptor;\n    }\n    createLayer(layerOptions) {\n        if (!layerOptions.source) {\n            return;\n        }\n        if (layerOptions.source.options &&\n            layerOptions.source.options._layerOptionsFromSource) {\n            layerOptions = ObjectUtils.mergeDeep(layerOptions.source.options._layerOptionsFromSource, layerOptions || {});\n        }\n        let layer;\n        switch (layerOptions.source.constructor) {\n            case OSMDataSource:\n            case WMTSDataSource:\n            case XYZDataSource:\n            case TileDebugDataSource:\n            case CartoDataSource:\n            case TileArcGISRestDataSource:\n                layer = this.createTileLayer(layerOptions);\n                break;\n            case FeatureDataSource:\n            case WFSDataSource:\n            case ArcGISRestDataSource:\n            case WebSocketDataSource:\n            case ClusterDataSource:\n                layer = this.createVectorLayer(layerOptions);\n                break;\n            case ImageArcGISRestDataSource:\n            case WMSDataSource:\n                layer = this.createImageLayer(layerOptions);\n                break;\n            case MVTDataSource:\n                layer = this.createVectorTileLayer(layerOptions);\n                break;\n            default:\n                break;\n        }\n        return layer;\n    }\n    createAsyncLayer(layerOptions, detailedContextUri) {\n        if (layerOptions.source) {\n            return new Observable(d => d.next(this.createLayer(layerOptions)));\n        }\n        return this.dataSourceService\n            .createAsyncDataSource(layerOptions.sourceOptions, detailedContextUri)\n            .pipe(map(source => {\n            if (source === undefined) {\n                return undefined;\n            }\n            return this.createLayer(Object.assign(layerOptions, { source }));\n        }));\n    }\n    createImageLayer(layerOptions) {\n        return new ImageLayer(layerOptions, this.messageService, this.languageService, this.authInterceptor);\n    }\n    createTileLayer(layerOptions) {\n        return new TileLayer(layerOptions, this.messageService);\n    }\n    createVectorLayer(layerOptions) {\n        let style;\n        let olLayer;\n        if (layerOptions.style !== undefined) {\n            style = this.styleService.createStyle(layerOptions.style);\n        }\n        if (layerOptions.source instanceof ArcGISRestDataSource) {\n            const source = layerOptions.source;\n            style = source.options.params.style;\n        }\n        else if (layerOptions.styleByAttribute) {\n            const serviceStyle = this.styleService;\n            layerOptions.style = feature => {\n                return serviceStyle.createStyleByAttribute(feature, layerOptions.styleByAttribute);\n            };\n            olLayer = new VectorLayer(layerOptions, this.messageService, this.authInterceptor);\n        }\n        if (layerOptions.source instanceof ClusterDataSource) {\n            const serviceStyle = this.styleService;\n            const baseStyle = layerOptions.clusterBaseStyle;\n            layerOptions.style = feature => {\n                return serviceStyle.createClusterStyle(feature, layerOptions.clusterParam, baseStyle);\n            };\n            olLayer = new VectorLayer(layerOptions, this.messageService, this.authInterceptor);\n        }\n        const layerOptionsOl = Object.assign({}, layerOptions, {\n            style\n        });\n        if (!olLayer) {\n            olLayer = new VectorLayer(layerOptionsOl, this.messageService, this.authInterceptor);\n        }\n        this.applyMapboxStyle(olLayer, layerOptionsOl);\n        return olLayer;\n    }\n    createVectorTileLayer(layerOptions) {\n        let style;\n        let olLayer;\n        if (layerOptions.style !== undefined) {\n            style = this.styleService.createStyle(layerOptions.style);\n        }\n        if (layerOptions.styleByAttribute) {\n            const serviceStyle = this.styleService;\n            layerOptions.style = feature => {\n                return serviceStyle.createStyleByAttribute(feature, layerOptions.styleByAttribute);\n            };\n            olLayer = new VectorTileLayer(layerOptions, this.messageService, this.authInterceptor);\n        }\n        const layerOptionsOl = Object.assign({}, layerOptions, {\n            style\n        });\n        if (!olLayer) {\n            olLayer = new VectorTileLayer(layerOptionsOl, this.messageService, this.authInterceptor);\n        }\n        this.applyMapboxStyle(olLayer, layerOptionsOl);\n        return olLayer;\n    }\n    applyMapboxStyle(layer, layerOptions) {\n        if (layerOptions.mapboxStyle) {\n            this.getMapboxGlStyle(layerOptions.mapboxStyle.url).subscribe(res => {\n                stylefunction(layer.ol, res, layerOptions.mapboxStyle.source);\n            });\n        }\n    }\n    getMapboxGlStyle(url) {\n        return this.http.get(url).pipe(map((res) => res), catchError(err => {\n            console.log('No style was found');\n            return of(err);\n        }));\n    }\n}\nLayerService.ɵfac = function LayerService_Factory(t) { return new (t || LayerService)(ɵɵinject(HttpClient), ɵɵinject(StyleService), ɵɵinject(DataSourceService), ɵɵinject(MessageService), ɵɵinject(LanguageService), ɵɵinject(AuthInterceptor, 8)); };\nLayerService.ɵprov = ɵɵdefineInjectable({ token: LayerService, factory: LayerService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LayerService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: HttpClient }, { type: StyleService }, { type: DataSourceService }, { type: MessageService }, { type: LanguageService }, { type: AuthInterceptor, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\nconst FEATURE = 'Feature';\nvar FeatureMotion;\n(function (FeatureMotion) {\n    FeatureMotion[FeatureMotion[\"None\"] = 0] = \"None\";\n    FeatureMotion[FeatureMotion[\"Move\"] = 1] = \"Move\";\n    FeatureMotion[FeatureMotion[\"Zoom\"] = 2] = \"Zoom\";\n    FeatureMotion[FeatureMotion[\"Default\"] = 3] = \"Default\";\n})(FeatureMotion || (FeatureMotion = {}));\n\n/**\n * Create an Openlayers feature object out of a feature definition.\n * The output object has a reference to the feature id.\n * @param feature Feature definition\n * @param projectionOut Feature object projection\n * @returns OpenLayers feature object\n */\nfunction featureToOl(feature, projectionOut, getId) {\n    getId = getId ? getId : getEntityId;\n    const olFormat = new OlGeoJSON();\n    const olFeature = olFormat.readFeature(feature, {\n        dataProjection: feature.projection,\n        featureProjection: projectionOut\n    });\n    olFeature.setId(getId(feature));\n    const title = getEntityTitle(feature);\n    if (title !== undefined) {\n        olFeature.set('_title', title, true);\n    }\n    if (feature.extent !== undefined) {\n        olFeature.set('_extent', feature.extent, true);\n    }\n    if (feature.projection !== undefined) {\n        olFeature.set('_projection', feature.projection, true);\n    }\n    const mapTitle = getEntityProperty(feature, 'meta.mapTitle');\n    if (mapTitle !== undefined) {\n        olFeature.set('_mapTitle', mapTitle, true);\n    }\n    olFeature.set('_entityRevision', getEntityRevision(feature), true);\n    const icon = getEntityIcon(feature);\n    if (icon !== undefined) {\n        olFeature.set('_icon', icon, true);\n    }\n    if (feature.meta && feature.meta.style) {\n        olFeature.set('_style', feature.meta.style, true);\n    }\n    if (feature.sourceId) {\n        olFeature.set('_sourceId', feature.sourceId, true);\n    }\n    return olFeature;\n}\nfunction renderFeatureFromOl(olRenderFeature, projectionIn, olLayer, projectionOut = 'EPSG:4326') {\n    let geom;\n    let title;\n    let exclude;\n    let excludeOffline;\n    if (olLayer) {\n        title = olLayer.get('title');\n        if (olLayer.get('sourceOptions')) {\n            exclude = olLayer.get('sourceOptions').excludeAttribute;\n            excludeOffline = olLayer.get('sourceOptions').excludeAttributeOffline;\n        }\n    }\n    else {\n        title = olRenderFeature.get('_title');\n    }\n    const olFormat = new OlGeoJSON();\n    const properties = olRenderFeature.getProperties();\n    const geometryType = olRenderFeature.getType();\n    if (geometryType === 'Polygon') {\n        const ends = olRenderFeature.ends_;\n        geom = new OlPolygon(olRenderFeature.flatCoordinates_, OlGeometryLayout.XY, ends);\n    }\n    else if (geometryType === 'Point') {\n        geom = new OlPoint(olRenderFeature.flatCoordinates_, OlGeometryLayout.XY);\n    }\n    else if (geometryType === 'LineString') {\n        geom = new OlLineString(olRenderFeature.flatCoordinates_, OlGeometryLayout.XY);\n    }\n    const geometry = olFormat.writeGeometryObject(geom, {\n        dataProjection: projectionOut,\n        featureProjection: projectionIn\n    });\n    const id = olRenderFeature.getId() ? olRenderFeature.getId() : uuid();\n    const mapTitle = olRenderFeature.get('_mapTitle');\n    const extent = transformExtent(olRenderFeature.getExtent(), projectionIn, projectionOut);\n    return {\n        type: FEATURE,\n        projection: projectionOut,\n        extent,\n        meta: {\n            id,\n            title: title ? title : mapTitle ? mapTitle : id,\n            mapTitle,\n            excludeAttribute: exclude,\n            excludeAttributeOffline: excludeOffline\n        },\n        properties,\n        geometry,\n        ol: olRenderFeature\n    };\n}\n/**\n * Create a feature object out of an OL feature\n * The output object has a reference to the feature id.\n * @param olFeature OL Feature\n * @param projectionIn OL feature projection\n * @param olLayer OL Layer\n * @param projectionOut Feature projection\n * @returns Feature\n */\nfunction featureFromOl(olFeature, projectionIn, olLayer, projectionOut = 'EPSG:4326') {\n    let title;\n    let exclude;\n    let excludeOffline;\n    let idColumn; // for arcgisrest and tilearcgisrest source\n    const olFormat = new OlGeoJSON();\n    const keys = olFeature.getKeys().filter((key) => {\n        return !key.startsWith('_') && key !== 'geometry';\n    });\n    const properties = keys.reduce((acc, key) => {\n        acc[key] = olFeature.get(key);\n        return acc;\n    }, {});\n    const geometry = olFormat.writeGeometryObject(olFeature.getGeometry(), {\n        dataProjection: projectionOut,\n        featureProjection: projectionIn\n    });\n    if (olLayer) {\n        title = olLayer.get('title');\n        const sourceOptions = olLayer.get('sourceOptions');\n        if (sourceOptions) {\n            exclude = sourceOptions.excludeAttribute;\n            excludeOffline = sourceOptions.excludeAttributeOffline;\n            idColumn =\n                sourceOptions.idColumn ||\n                    ((sourceOptions.type === 'arcgisrest' || sourceOptions.type === 'tilearcgisrest') ? 'OBJECTID' : undefined);\n        }\n    }\n    else {\n        title = olFeature.get('_title');\n    }\n    const mapTitle = olFeature.get('_mapTitle');\n    const id = olFeature.getId() ? olFeature.getId() : olFeature.get(idColumn) ? olFeature.get(idColumn) : uuid();\n    return {\n        type: FEATURE,\n        projection: projectionOut,\n        extent: olFeature.get('_extent'),\n        meta: {\n            id,\n            title: title ? title : mapTitle ? mapTitle : id,\n            mapTitle,\n            revision: olFeature.getRevision(),\n            style: olFeature.get('_style'),\n            excludeAttribute: exclude,\n            excludeAttributeOffline: excludeOffline\n        },\n        properties,\n        geometry,\n        ol: olFeature\n    };\n}\n/**\n * Compute an OL feature extent in it's map projection\n * @param map Map\n * @param olFeature OL feature\n * @returns Extent in the map projection\n */\nfunction computeOlFeatureExtent(map, olFeature) {\n    let olExtent = createEmpty();\n    const olFeatureExtent = olFeature.get('_extent');\n    const olFeatureProjection = olFeature.get('_projection');\n    if (olFeatureExtent !== undefined && olFeatureProjection !== undefined) {\n        olExtent = transformExtent(olFeatureExtent, olFeatureProjection, map.projection);\n    }\n    else {\n        const olGeometry = olFeature.getGeometry();\n        if (olGeometry !== null) {\n            olExtent = olGeometry.getExtent();\n        }\n    }\n    return olExtent;\n}\n/**\n * Compute a multiple OL features extent in their map projection\n * @param map Map\n * @param olFeatures OL features\n * @returns Extent in the map projection\n */\nfunction computeOlFeaturesExtent(map, olFeatures) {\n    const extent = createEmpty();\n    olFeatures.forEach((olFeature) => {\n        const featureExtent = computeOlFeatureExtent(map, olFeature);\n        extend(extent, featureExtent);\n    });\n    return extent;\n}\n/**\n * Scale an extent.\n * @param extent Extent\n * @param Scaling factors for top, right, bottom and left directions, in that order\n * @returns Scaled extent\n */\nfunction scaleExtent(extent, scale) {\n    const [width, height] = getSize(extent);\n    return [\n        scale[3] ? extent[0] - width * scale[3] : extent[0],\n        scale[2] ? extent[1] - height * scale[2] : extent[1],\n        scale[1] ? extent[2] + width * scale[1] : extent[2],\n        scale[0] ? extent[3] + height * scale[0] : extent[3]\n    ];\n}\n/**\n * Return true if features are out of view.\n * If features are too close to the edge, they are considered out of view.\n * We define the edge as 5% of the extent size.\n * @param map Map\n * @param featuresExtent The features's extent\n * @returns Return true if features are out of view\n */\nfunction featuresAreOutOfView(map, featuresExtent) {\n    const mapExtent = map.viewController.getExtent();\n    const edgeRatio = 0.05;\n    const scale = [-1, -1, -1, -1].map(x => x * edgeRatio);\n    const viewExtent = scaleExtent(mapExtent, scale);\n    return !containsExtent(viewExtent, featuresExtent);\n}\n/**\n * Return true if features are too deep into the view. This results\n * in features being too small.\n * Features are considered too small if their extent occupies less than\n * 1% of the map extent.\n * @param map Map\n * @param featuresExtent The features's extent\n * @param areaRatio The features extent to view extent acceptable ratio\n * @returns Return true if features are too deep in the view\n */\nfunction featuresAreTooDeepInView(map, featuresExtent, areaRatio) {\n    // An area ratio of 0.004 means that the feature extent's width and height\n    // should be about 1/16 of the map extent's width and height\n    areaRatio = areaRatio ? areaRatio : 0.004;\n    const mapExtent = map.viewController.getExtent();\n    const mapExtentArea = getArea(mapExtent);\n    const featuresExtentArea = getArea(featuresExtent);\n    if (featuresExtentArea === 0 && map.viewController.getZoom() > 13) {\n        // In case it's a point\n        return false;\n    }\n    return featuresExtentArea / mapExtentArea < areaRatio;\n}\n/**\n * Fit view to include the features extent.\n * By default, this method will let the features occupy about 50% of the viewport.\n * @param map Map\n * @param olFeatures OL features\n * @param motion To motion to the new map view\n * @param scale If this is defined, the original view will be scaled\n *  by that factor before any logic is applied.\n */\nfunction moveToOlFeatures(map, olFeatures, motion = FeatureMotion.Default, scale, areaRatio) {\n    const featuresExtent = computeOlFeaturesExtent(map, olFeatures);\n    let viewExtent = featuresExtent;\n    if (scale !== undefined) {\n        viewExtent = scaleExtent(viewExtent, scale);\n    }\n    if (motion === FeatureMotion.Zoom) {\n        map.viewController.zoomToExtent(viewExtent);\n    }\n    else if (motion === FeatureMotion.Move) {\n        map.viewController.moveToExtent(viewExtent);\n    }\n    else if (motion === FeatureMotion.Default) {\n        if (featuresAreOutOfView(map, featuresExtent) ||\n            featuresAreTooDeepInView(map, featuresExtent, areaRatio)) {\n            map.viewController.zoomToExtent(viewExtent);\n        }\n    }\n}\n/**\n * Hide an OL feature\n * @param olFeature OL feature\n */\nfunction hideOlFeature(olFeature) {\n    olFeature.setStyle(new Style({}));\n}\n/**\n * Try to bind a layer to a store if none is bound already.\n * The layer will also be added to the store's map.\n * If no layer is given to that function, a basic one will be created.\n * @param store The store to bind the layer\n * @param layer An optional VectorLayer\n */\nfunction tryBindStoreLayer(store, layer) {\n    if (store.layer !== undefined) {\n        if (store.layer.map === undefined) {\n            store.map.addLayer(store.layer);\n        }\n        return;\n    }\n    layer = layer\n        ? layer\n        : new VectorLayer({\n            source: new FeatureDataSource()\n        });\n    store.bindLayer(layer);\n    if (store.layer.map === undefined) {\n        store.map.addLayer(store.layer);\n    }\n}\n/**\n * Compute a diff between a source array of Ol features and a target array\n * @param source Source array of OL features\n * @param starget Target array of OL features\n * @returns Features to add and remove\n */\nfunction computeOlFeaturesDiff(source, target) {\n    const olFeaturesMap = new Map();\n    target.forEach((olFeature) => {\n        olFeaturesMap.set(olFeature.getId(), olFeature);\n    });\n    const olFeaturesToRemove = [];\n    source.forEach((olFeature) => {\n        const newOlFeature = olFeaturesMap.get(olFeature.getId());\n        if (newOlFeature === undefined) {\n            olFeaturesToRemove.push(olFeature);\n        }\n        else if (newOlFeature.get('_entityRevision') !== olFeature.get('_entityRevision')) {\n            olFeaturesToRemove.push(olFeature);\n        }\n        else {\n            olFeaturesMap.delete(newOlFeature.getId());\n        }\n    });\n    const olFeaturesToAddIds = Array.from(olFeaturesMap.keys());\n    const olFeaturesToAdd = target.filter((olFeature) => {\n        return olFeaturesToAddIds.indexOf(olFeature.getId()) >= 0;\n    });\n    return {\n        add: olFeaturesToAdd,\n        remove: olFeaturesToRemove\n    };\n}\n\n/**\n * The class is a specialized version of an EntityStore that stores\n * features and the map layer to display them on. Synchronization\n * between the store and the layer is handled by strategies.\n */\nclass FeatureStore extends EntityStore {\n    constructor(entities, options) {\n        super(entities, options);\n        this.map = options.map;\n    }\n    /**\n     * The layer's data source\n     */\n    get source() {\n        return this.layer ? this.layer.dataSource : undefined;\n    }\n    /**\n     * Bind this store to a vector layer\n     * @param layer Vector layer\n     * @returns Feature store\n     */\n    bindLayer(layer) {\n        this.layer = layer;\n        return this;\n    }\n    /**\n     * Set the layer's features and perform a motion to make them visible. Strategies\n     * make extensive use of that method.\n     * @param features Features\n     * @param motion Optional: The type of motion to perform\n     */\n    setLayerFeatures(features, motion = FeatureMotion.Default, viewScale, areaRatio, getId) {\n        getId = getId ? getId : getEntityId;\n        this.checkLayer();\n        const olFeatures = features\n            .map((feature) => featureToOl(feature, this.map.projection, getId));\n        this.setLayerOlFeatures(olFeatures, motion, viewScale, areaRatio);\n    }\n    /**\n     * Set the store's features from an array of OL features.\n     * @param olFeatures Ol features\n     */\n    setStoreOlFeatures(olFeatures) {\n        this.checkLayer();\n        const features = olFeatures.map((olFeature) => {\n            olFeature.set('_featureStore', this, true);\n            return featureFromOl(olFeature, this.layer.map.projection);\n        });\n        this.load(features);\n    }\n    /**\n     * Remove all features from the layer\n     */\n    clearLayer() {\n        this.checkLayer();\n        this.source.ol.clear();\n    }\n    /**\n     * Check wether a layer is bound or not and throw an error if not.\n     */\n    checkLayer() {\n        if (this.layer === undefined) {\n            throw new Error('This FeatureStore is not bound to a layer.');\n        }\n    }\n    /**\n     * Set the layer's features and perform a motion to make them visible.\n     * @param features Openlayers feature objects\n     * @param motion Optional: The type of motion to perform\n     */\n    setLayerOlFeatures(olFeatures, motion = FeatureMotion.Default, viewScale, areaRatio) {\n        const olSource = this.layer.ol.getSource();\n        const diff = computeOlFeaturesDiff(olSource.getFeatures(), olFeatures);\n        if (diff.remove.length > 0) {\n            this.removeOlFeaturesFromLayer(diff.remove);\n        }\n        if (diff.add.length > 0) {\n            this.addOlFeaturesToLayer(diff.add);\n        }\n        if (diff.add.length > 0) {\n            // If features are added, do a motion toward the newly added features\n            moveToOlFeatures(this.map, diff.add, motion, viewScale, areaRatio);\n        }\n        else if (diff.remove.length > 0) {\n            // Else, do a motion toward all the features\n            moveToOlFeatures(this.map, olFeatures, motion, viewScale, areaRatio);\n        }\n    }\n    /**\n     * Add features to the the layer\n     * @param features Openlayers feature objects\n     */\n    addOlFeaturesToLayer(olFeatures) {\n        olFeatures.forEach((olFeature) => {\n            olFeature.set('_featureStore', this, true);\n        });\n        this.source.ol.addFeatures(olFeatures);\n    }\n    /**\n     * Remove features from the the layer\n     * @param features Openlayers feature objects\n     */\n    removeOlFeaturesFromLayer(olFeatures) {\n        olFeatures.forEach((olFeature) => {\n            this.source.ol.removeFeature(olFeature);\n        });\n    }\n}\n\n/**\n * This strategy maintain the store features updated while the map is moved.\n * The features's state inside the map are tagged inMapExtent = true;\n */\nclass FeatureStoreInMapExtentStrategy extends EntityStoreStrategy {\n    constructor(options) {\n        super(options);\n        this.options = options;\n        /**\n         * Subscription to the store's OL source changes\n         */\n        this.stores$$ = new Map();\n        this.states$$ = [];\n    }\n    /**\n     * Bind this strategy to a store and start watching for Ol source changes\n     * @param store Feature store\n     */\n    bindStore(store) {\n        super.bindStore(store);\n        if (this.active === true) {\n            this.watchStore(store);\n        }\n        this.empty$$ = store.empty$\n            .pipe(skipWhile((empty) => !empty))\n            .subscribe(() => this.updateEntitiesInExtent(store));\n    }\n    /**\n     * Unbind this strategy from a store and stop watching for Ol source changes\n     * @param store Feature store\n     */\n    unbindStore(store) {\n        super.unbindStore(store);\n        if (this.active === true) {\n            this.unwatchStore(store);\n        }\n    }\n    /**\n     * Start watching all stores already bound to that strategy at once.\n     * @internal\n     */\n    doActivate() {\n        this.stores.forEach((store) => this.watchStore(store));\n    }\n    /**\n     * Stop watching all stores bound to that strategy\n     * @internal\n     */\n    doDeactivate() {\n        this.unwatchAll();\n    }\n    /**\n     * Watch for a store's  OL source changes\n     * @param store Feature store\n     */\n    watchStore(store) {\n        if (this.stores$$.has(store)) {\n            return;\n        }\n        this.updateEntitiesInExtent(store);\n        this.states$$.push(store.layer.map.viewController.state$.subscribe(() => {\n            this.updateEntitiesInExtent(store);\n        }));\n    }\n    updateEntitiesInExtent(store) {\n        var _a, _b;\n        if ((_b = (_a = store === null || store === void 0 ? void 0 : store.layer) === null || _a === void 0 ? void 0 : _a.map) === null || _b === void 0 ? void 0 : _b.viewController) {\n            store.state.updateAll({ inMapExtent: false });\n            const mapExtent = store.layer.map.viewController.getExtent();\n            const entitiesInMapExtent = store.entities$.value\n                .filter((entity) => intersects$1(entity.ol.getGeometry().getExtent(), mapExtent));\n            if (entitiesInMapExtent.length > 0) {\n                store.state.updateMany(entitiesInMapExtent, { inMapExtent: true }, true);\n            }\n        }\n    }\n    /**\n     * Stop watching for a store's OL source changes\n     * @param store Feature store\n     */\n    unwatchStore(store) {\n        const key = this.stores$$.get(store);\n        if (key !== undefined) {\n            unByKey(key);\n            this.stores$$.delete(store);\n        }\n    }\n    /**\n     * Stop watching for OL source changes in all stores.\n     */\n    unwatchAll() {\n        Array.from(this.stores$$.entries()).forEach((entries) => {\n            unByKey(entries[1]);\n        });\n        this.stores$$.clear();\n        this.states$$.map(state => state.unsubscribe());\n        if (this.empty$$) {\n            this.empty$$.unsubscribe();\n        }\n    }\n}\n\n/**\n * This strategy maintain the store features updated while the map is scrolled.\n * The features's state inside the map's resolution are tagged inMapResolution = true;\n */\nclass FeatureStoreInMapResolutionStrategy extends EntityStoreStrategy {\n    constructor(options) {\n        super(options);\n        this.options = options;\n        /**\n         * Subscription to the store's OL source changes\n         */\n        this.stores$$ = new Map();\n        this.resolution$$ = [];\n    }\n    /**\n     * Bind this strategy to a store and start watching for Ol source changes\n     * @param store Feature store\n     */\n    bindStore(store) {\n        super.bindStore(store);\n        if (this.active === true) {\n            this.watchStore(store);\n        }\n        this.empty$$ = store.empty$\n            .subscribe(() => this.updateEntitiesInResolution(store, store.layer.map.viewController.getResolution()));\n    }\n    /**\n     * Unbind this strategy from a store and stop watching for Ol source changes\n     * @param store Feature store\n     */\n    unbindStore(store) {\n        super.unbindStore(store);\n        if (this.active === true) {\n            this.unwatchStore(store);\n        }\n    }\n    /**\n     * Start watching all stores already bound to that strategy at once.\n     * @internal\n     */\n    doActivate() {\n        this.stores.forEach((store) => this.watchStore(store));\n    }\n    /**\n     * Stop watching all stores bound to that strategy\n     * @internal\n     */\n    doDeactivate() {\n        this.unwatchAll();\n    }\n    /**\n     * Watch for a store's  OL source changes\n     * @param store Feature store\n     */\n    watchStore(store) {\n        if (this.stores$$.has(store)) {\n            return;\n        }\n        this.updateEntitiesInResolution(store, store.layer.map.viewController.getResolution());\n        this.resolution$$.push(store.layer.map.viewController.resolution$.subscribe((res) => {\n            this.updateEntitiesInResolution(store, res);\n        }));\n    }\n    updateEntitiesInResolution(store, mapResolution) {\n        if (mapResolution > store.layer.minResolution && mapResolution < store.layer.maxResolution) {\n            store.state.updateAll({ inMapResolution: true });\n        }\n        else {\n            store.state.updateAll({ inMapResolution: false });\n        }\n    }\n    /**\n     * Stop watching for a store's OL source changes\n     * @param store Feature store\n     */\n    unwatchStore(store) {\n        const key = this.stores$$.get(store);\n        if (key !== undefined) {\n            unByKey(key);\n            this.stores$$.delete(store);\n        }\n    }\n    /**\n     * Stop watching for OL source changes in all stores.\n     */\n    unwatchAll() {\n        Array.from(this.stores$$.entries()).forEach((entries) => {\n            unByKey(entries[1]);\n        });\n        this.stores$$.clear();\n        this.resolution$$.map(state => state.unsubscribe());\n        if (this.empty$$) {\n            this.empty$$.unsubscribe();\n        }\n    }\n}\n\n/**\n * This strategy loads a store's features into it's layer counterpart.\n * The store -> layer binding is a one-way binding. That means any entity\n * added to the store will be added to the layer but the opposite is false.\n *\n * Important: This strategy observes filtered entities, not raw entities. This\n * is not configurable yet.\n */\nclass FeatureStoreLoadingStrategy extends EntityStoreStrategy {\n    constructor(options) {\n        super(options);\n        this.options = options;\n        /**\n         * Subscription to the store's features\n         */\n        this.stores$$ = new Map();\n        this.setMotion(options.motion);\n    }\n    /**\n     * Bind this strategy to a store and start watching for entities changes\n     * @param store Feature store\n     */\n    bindStore(store) {\n        super.bindStore(store);\n        if (this.active === true) {\n            this.watchStore(store);\n        }\n    }\n    /**\n     * Unbind this strategy from a store and stop watching for entities changes\n     * @param store Feature store\n     */\n    unbindStore(store) {\n        super.unbindStore(store);\n        if (this.active === true) {\n            this.unwatchStore(store);\n        }\n    }\n    /**\n     * Define the motion to apply on load\n     * @param motion Feature motion\n     */\n    setMotion(motion) {\n        this.motion = motion;\n    }\n    /**\n     * Start watching all stores already bound to that strategy at once.\n     * @internal\n     */\n    doActivate() {\n        this.stores.forEach((store) => this.watchStore(store));\n    }\n    /**\n     * Stop watching all stores bound to that strategy\n     * @internal\n     */\n    doDeactivate() {\n        this.unwatchAll();\n    }\n    /**\n     * Watch for entities changes in a store.\n     * Important: Never observe a store's sorted entities. It makes no sense\n     * to display sorted entities (instead of unsorted) on a layer and it\n     * would potentially result in a lot of useless computation.\n     * @param store Feature store\n     */\n    watchStore(store) {\n        if (this.stores$$.has(store)) {\n            return;\n        }\n        const subscription = store.view.all$()\n            .subscribe((features) => this.onFeaturesChange(features, store));\n        this.stores$$.set(store, subscription);\n    }\n    /**\n     * Stop watching for entities changes in a store.\n     * @param store Feature store\n     */\n    unwatchStore(store) {\n        const subscription = this.stores$$.get(store);\n        if (subscription !== undefined) {\n            subscription.unsubscribe();\n            this.stores$$.delete(store);\n        }\n    }\n    /**\n     * Stop watching for entities changes in all stores.\n     */\n    unwatchAll() {\n        Array.from(this.stores$$.entries()).forEach((entries) => {\n            entries[1].unsubscribe();\n        });\n        this.stores$$.clear();\n    }\n    /**\n     * Load features into a layer or clear the layer if the array of features is empty.\n     * @param features Store filtered features\n     * @param store Feature store\n     */\n    onFeaturesChange(features, store) {\n        if (features.length === 0) {\n            store.clearLayer();\n        }\n        else {\n            store.setLayerFeatures(features, this.selectMotion(store), this.options.viewScale, this.options.areaRatio, this.options.getFeatureId);\n        }\n    }\n    /**\n     * Selects the best motion\n     * @param store A FeatureStore to apply the motion\n     * @returns The motion selected\n     */\n    selectMotion(store) {\n        if (this.motion !== undefined) {\n            return this.motion;\n        }\n        if (store.pristine === true) {\n            // If features have just been loaded into the store, move/zoom on them\n            return FeatureMotion.Default;\n        }\n        else if (store.count > store.view.count) {\n            // If features have been filtered, move/zoom on the remaining ones\n            return FeatureMotion.Default;\n        }\n        else {\n            // On insert, update or delete, do nothing\n            return FeatureMotion.None;\n        }\n    }\n}\n\n/**\n * This strategy loads a layer's features into it's store counterpart.\n * The layer -> store binding is a one-way binding. That means any OL feature\n * added to the layer will be added to the store but the opposite is false.\n *\n * Important: In it's current state, this strategy is to meant to be combined\n * with a standard Loading strategy and it would probably cause recursion issues.\n */\nclass FeatureStoreLoadingLayerStrategy extends EntityStoreStrategy {\n    constructor(options) {\n        super(options);\n        this.options = options;\n        /**\n         * Subscription to the store's OL source changes\n         */\n        this.stores$$ = new Map();\n    }\n    /**\n     * Bind this strategy to a store and start watching for Ol source changes\n     * @param store Feature store\n     */\n    bindStore(store) {\n        super.bindStore(store);\n        if (this.active === true) {\n            this.watchStore(store);\n        }\n    }\n    /**\n     * Unbind this strategy from a store and stop watching for Ol source changes\n     * @param store Feature store\n     */\n    unbindStore(store) {\n        super.unbindStore(store);\n        if (this.active === true) {\n            this.unwatchStore(store);\n        }\n    }\n    /**\n     * Start watching all stores already bound to that strategy at once.\n     * @internal\n     */\n    doActivate() {\n        this.stores.forEach((store) => this.watchStore(store));\n    }\n    /**\n     * Stop watching all stores bound to that strategy\n     * @internal\n     */\n    doDeactivate() {\n        this.unwatchAll();\n    }\n    /**\n     * Watch for a store's  OL source changes\n     * @param store Feature store\n     */\n    watchStore(store) {\n        if (this.stores$$.has(store)) {\n            return;\n        }\n        this.onSourceChanges(store);\n        const olSource = store.layer.ol.getSource();\n        olSource.on('change', (event) => {\n            this.onSourceChanges(store);\n        });\n    }\n    /**\n     * Stop watching for a store's OL source changes\n     * @param store Feature store\n     */\n    unwatchStore(store) {\n        const key = this.stores$$.get(store);\n        if (key !== undefined) {\n            unByKey(key);\n            this.stores$$.delete(store);\n        }\n    }\n    /**\n     * Stop watching for OL source changes in all stores.\n     */\n    unwatchAll() {\n        Array.from(this.stores$$.entries()).forEach((entries) => {\n            unByKey(entries[1]);\n        });\n        this.stores$$.clear();\n    }\n    /**\n     * Load features from an OL source into a  store or clear the store if the source is empty\n     * @param features Store filtered features\n     * @param store Feature store\n     */\n    onSourceChanges(store) {\n        let olFeatures = store.layer.ol.getSource().getFeatures();\n        if (store.layer.dataSource instanceof ClusterDataSource) {\n            olFeatures = olFeatures.flatMap((cluster) => cluster.get('features'));\n        }\n        if (olFeatures.length === 0) {\n            store.clear();\n        }\n        else {\n            store.setStoreOlFeatures(olFeatures);\n        }\n    }\n}\n\nclass OlDragSelectInteraction extends OlDragBoxInteraction {\n    constructor(options) {\n        super(options);\n    }\n}\n/**\n * This strategy synchronizes a store and a layer selected entities.\n * The store <-> layer binding is a two-way binding.\n *\n * In many cases, a single strategy bound to multiple stores\n * will yield better results that multiple strategies with each their\n * own store. In the latter scenario, a click on overlapping features\n * would trigger the strategy of each layer and they would cancel\n * each other as well as move the map view around needlessly.\n */\nclass FeatureStoreSelectionStrategy extends EntityStoreStrategy {\n    constructor(options) {\n        super(options);\n        this.options = options;\n        this.setMotion(options.motion);\n        this._overlayStore = this.createOverlayStore();\n    }\n    /**\n     * The map the layers belong to\n     */\n    get map() {\n        return this.options.map;\n    }\n    /**\n     * A feature store that'll contain the selected features. It has it's own\n     * layer, shared by all the stores this staretgy is bound to.\n     */\n    get overlayStore() {\n        return this._overlayStore;\n    }\n    /**\n     * Bind this strategy to a store and force this strategy's\n     * reactivation to properly setup watchers.\n     * @param store Feature store\n     */\n    bindStore(store) {\n        super.bindStore(store);\n        if (this.active === true) {\n            // Force reactivation\n            this.activate();\n        }\n    }\n    /**\n     * Unbind this strategy from a store and force this strategy's\n     * reactivation to properly setup watchers.\n     * @param store Feature store\n     */\n    unbindStore(store) {\n        super.unbindStore(store);\n        if (this.active === true) {\n            // Force reactivation\n            this.activate();\n        }\n    }\n    /**\n     * Define the motion to apply on select\n     * @param motion Feature motion\n     */\n    setMotion(motion) {\n        this.motion = motion;\n    }\n    /**\n     * Unselect all entities, from all stores\n     */\n    unselectAll() {\n        this.stores.forEach((store) => {\n            store.state.updateAll({ selected: false });\n        });\n    }\n    /**\n     * Clear the overlay\n     */\n    clear() {\n        this.overlayStore.source.ol.clear();\n        this.overlayStore.clear();\n    }\n    /**\n     * Deactivate the selection without removing the selection\n     * overlay.\n     */\n    deactivateSelection() {\n        this.unlistenToMapClick();\n        this.removeDragBoxInteraction();\n        this.unwatchAll();\n    }\n    /**\n     * Add the overlay layer, setup the map click lsitener and\n     * start watching for stores selection\n     * @internal\n     */\n    doActivate() {\n        this.addOverlayLayer();\n        this.listenToMapClick();\n        if (this.options.dragBox === true) {\n            this.addDragBoxInteraction();\n        }\n        this.watchAll();\n    }\n    /**\n     * Remove the overlay layer, remove the map click lsitener and\n     * stop watching for stores selection\n     * @internal\n     */\n    doDeactivate() {\n        this.deactivateSelection();\n        this.removeOverlayLayer();\n    }\n    /**\n     * Create a single observable of all the stores. With a single observable,\n     * features can be added all at once to the overlay layer and a single\n     * motion can be performed. Multiple observable would have\n     * a cancelling effect on each other.\n     */\n    watchAll() {\n        this.unwatchAll();\n        const stores$ = this.stores.map((store) => {\n            return store.stateView\n                .manyBy$((record) => {\n                return record.state.selected === true;\n            })\n                .pipe(map((records) => records.map((record) => record.entity)));\n        });\n        this.stores$$ = combineLatest(stores$)\n            .pipe(debounceTime(5), skip(1), // Skip intial selection\n        map((features) => features.reduce((a, b) => a.concat(b))))\n            .subscribe((features) => this.onSelectFromStore(features));\n    }\n    /**\n     * Stop watching for selection in all stores.\n     */\n    unwatchAll() {\n        if (this.stores$$ !== undefined) {\n            this.stores$$.unsubscribe();\n        }\n    }\n    /**\n     * Add a 'singleclick' listener to the map that'll allow selecting\n     * features by clicking on the map. The selection will be performed\n     * only on the layers bound to this strategy.\n     */\n    listenToMapClick() {\n        this.mapClickListener = this.map.ol.on('singleclick', (event) => {\n            this.onMapClick(event);\n        });\n    }\n    /**\n     * Remove the map click listener\n     */\n    unlistenToMapClick() {\n        if (this.mapClickListener !== undefined) {\n            this.map.ol.un(this.mapClickListener.type, this.mapClickListener.listener);\n        }\n    }\n    /**\n     * On map click, select feature at pixel\n     * @param event OL MapBrowserPointerEvent\n     */\n    onMapClick(event) {\n        const exclusive = !ctrlKeyDown(event);\n        const reverse = !exclusive;\n        const olFeatures = event.map.getFeaturesAtPixel(event.pixel, {\n            hitTolerance: this.options.hitTolerance || 0,\n            layerFilter: olLayer => {\n                const storeOlLayer = this.stores.find((store) => {\n                    return store.layer.ol === olLayer;\n                });\n                return storeOlLayer !== undefined;\n            }\n        });\n        this.onSelectFromMap(olFeatures, exclusive, reverse);\n    }\n    /**\n     * Add a drag box interaction and, on drag box end, select features\n     */\n    addDragBoxInteraction() {\n        let olDragSelectInteraction;\n        const olInteractions = this.map.ol.getInteractions().getArray();\n        // There can only be one dragbox interaction, so find the current one, if any\n        // Don't keep a reference to the current dragbox because we don't want\n        // to remove it when this startegy is deactivated\n        for (const olInteraction of olInteractions) {\n            if (olInteraction instanceof OlDragSelectInteraction) {\n                olDragSelectInteraction = olInteraction;\n                break;\n            }\n        }\n        // If no drag box interaction is found, create a new one and add it to the map\n        if (olDragSelectInteraction === undefined) {\n            olDragSelectInteraction = new OlDragSelectInteraction({\n                condition: ctrlKeyDown\n            });\n            this.map.ol.addInteraction(olDragSelectInteraction);\n            this.olDragSelectInteraction = olDragSelectInteraction;\n        }\n        this.olDragSelectInteractionEndKey = olDragSelectInteraction.on('boxend', (event) => this.onDragBoxEnd(event));\n    }\n    /**\n     * Remove drag box interaction\n     */\n    removeDragBoxInteraction() {\n        if (this.olDragSelectInteractionEndKey !== undefined) {\n            unByKey(this.olDragSelectInteractionEndKey);\n        }\n        if (this.olDragSelectInteraction !== undefined) {\n            this.map.ol.removeInteraction(this.olDragSelectInteraction);\n        }\n        this.olDragSelectInteraction = undefined;\n    }\n    /**\n     * On dragbox end, select features in drag box\n     * @param event OL MapBrowserPointerEvent\n     */\n    onDragBoxEnd(event) {\n        const exclusive = !ctrlKeyDown(event.mapBrowserEvent);\n        const extent = event.target.getGeometry().getExtent();\n        const olFeatures = this.stores.reduce((acc, store) => {\n            const olSource = store.layer.ol.getSource();\n            acc.push(...olSource.getFeaturesInExtent(extent));\n            return acc;\n        }, []);\n        this.onSelectFromMap(olFeatures, exclusive, false);\n    }\n    /**\n     * When features are selected from the store, add\n     * them to this startegy's overlay layer (select on map)\n     * @param features Store features\n     */\n    onSelectFromStore(features) {\n        const motion = this.motion;\n        const olOverlayFeatures = this.overlayStore.layer.ol\n            .getSource()\n            .getFeatures();\n        const overlayFeaturesKeys = olOverlayFeatures.map((olFeature) => olFeature.getId());\n        const featuresKeys = features.map(this.overlayStore.getKey);\n        let doMotion;\n        if (features.length === 0) {\n            doMotion = false;\n        }\n        else {\n            doMotion =\n                overlayFeaturesKeys.length !== featuresKeys.length ||\n                    !overlayFeaturesKeys.every((key) => featuresKeys.indexOf(key) >= 0);\n        }\n        this.overlayStore.setLayerFeatures(features, doMotion ? motion : FeatureMotion.None, this.options.viewScale, this.options.areaRatio, this.options.getFeatureId);\n    }\n    /**\n     * When features are selected from the map, also select them\n     * in their store.\n     * @param olFeatures OL feature objects\n     */\n    onSelectFromMap(olFeatures, exclusive, reverse) {\n        const groupedFeatures = this.groupFeaturesByStore(olFeatures);\n        this.stores.forEach((store) => {\n            const features = groupedFeatures.get(store);\n            if (features === undefined && exclusive === true) {\n                this.unselectAllFeaturesFromStore(store);\n            }\n            else if (features === undefined && exclusive === false) {\n                // Do nothing\n            }\n            else {\n                this.selectFeaturesFromStore(store, features, exclusive, reverse);\n            }\n        });\n    }\n    /**\n     * Select features in store\n     * @param store: Feature store\n     * @param features Features\n     */\n    selectFeaturesFromStore(store, features, exclusive, reverse) {\n        if (reverse === true) {\n            store.state.reverseMany(features, ['selected']);\n        }\n        else {\n            store.state.updateMany(features, { selected: true }, exclusive);\n        }\n    }\n    /**\n     * Unselect all features from store\n     * @param store: Feature store\n     */\n    unselectAllFeaturesFromStore(store) {\n        store.state.updateAll({ selected: false });\n    }\n    /**\n     * This method returns a store -> features mapping from a list\n     * of OL selected features. OL features keep a reference to the store\n     * they are from.\n     * @param olFeatures: OL feature objects\n     * @returns Store -> features mapping\n     */\n    groupFeaturesByStore(olFeatures) {\n        const groupedFeatures = new Map();\n        if (olFeatures === null || olFeatures === undefined) {\n            return groupedFeatures;\n        }\n        olFeatures.forEach((olFeature) => {\n            const store = olFeature.get('_featureStore');\n            if (store === undefined) {\n                return;\n            }\n            let features = groupedFeatures.get(store);\n            if (features === undefined) {\n                features = [];\n                groupedFeatures.set(store, features);\n            }\n            const feature = store.get(olFeature.getId());\n            if (feature !== undefined) {\n                features.push(feature);\n            }\n        });\n        return groupedFeatures;\n    }\n    /**\n     * Create an overlay store that'll contain the selected features.\n     * @returns Overlay store\n     */\n    createOverlayStore() {\n        const overlayLayer = this.options.layer\n            ? this.options.layer\n            : this.createOverlayLayer();\n        return new FeatureStore([], { map: this.map }).bindLayer(overlayLayer);\n    }\n    /**\n     * Create an overlay store that'll contain the selected features.\n     * @returns Overlay layer\n     */\n    createOverlayLayer() {\n        return new VectorLayer({\n            zIndex: 300,\n            source: new FeatureDataSource(),\n            style: undefined,\n            showInLayerList: false,\n            exportable: false,\n            browsable: false\n        });\n    }\n    /**\n     * Add the overlay store's layer to the map to display the selected\n     * features.\n     */\n    addOverlayLayer() {\n        if (this.overlayStore.layer.map === undefined) {\n            this.map.addLayer(this.overlayStore.layer);\n        }\n    }\n    /**\n     * Remove the overlay layer from the map\n     */\n    removeOverlayLayer() {\n        this.overlayStore.source.ol.clear();\n        this.map.removeLayer(this.overlayStore.layer);\n    }\n}\n\n/**\n * Try to add a loading strategy to a store and activate it.\n * If no strategy is given to that function, a basic one will be created.\n * @param store The store to bind the loading strategy\n * @param strategy An optional loading strategy\n */\nfunction tryAddLoadingStrategy(store, strategy) {\n    if (store.getStrategyOfType(FeatureStoreLoadingStrategy) !== undefined) {\n        store.activateStrategyOfType(FeatureStoreLoadingStrategy);\n        return;\n    }\n    strategy = strategy ? strategy : new FeatureStoreLoadingStrategy({});\n    store.addStrategy(strategy);\n    strategy.activate();\n}\n/**\n * Try to add a selection strategy to a store and activate it.\n * If no strategy is given to that function, a basic one will be created.\n * @param store The store to bind the selection strategy\n * @param [strategy] An optional selection strategy\n */\nfunction tryAddSelectionStrategy(store, strategy) {\n    if (store.getStrategyOfType(FeatureStoreSelectionStrategy) !== undefined) {\n        store.activateStrategyOfType(FeatureStoreSelectionStrategy);\n        return;\n    }\n    strategy = strategy\n        ? strategy\n        : new FeatureStoreSelectionStrategy({\n            map: store.map\n        });\n    store.addStrategy(strategy);\n    strategy.activate();\n}\n\n/**\n * Create an overlay layer and it's source\n * @returns Overlay layer\n */\nfunction createOverlayLayer() {\n    const overlayDataSource = new FeatureDataSource();\n    return new VectorLayer({\n        title: 'Overlay',\n        zIndex: 300,\n        source: overlayDataSource,\n        style: createOverlayLayerStyle()\n    });\n}\n/**\n * Create an overlay style with markers for points and a basic stroke/fill\n * combination for lines and polygons\n * @returns Style function\n */\nfunction createOverlayLayerStyle() {\n    const defaultStyle = createOverlayDefaultStyle();\n    const markerStyle = createOverlayMarkerStyle();\n    let style;\n    return (olFeature) => {\n        if (olFeature.getId() === 'bufferFeature') {\n            style = createBufferStyle(olFeature.get('bufferStroke'), 2, olFeature.get('bufferFill'), olFeature.get('bufferText'));\n            return style;\n        }\n        else {\n            const customStyle = olFeature.get('_style');\n            if (customStyle) {\n                const styleService = new StyleService();\n                return styleService.createStyle(customStyle);\n            }\n            const geometryType = olFeature.getGeometry().getType();\n            style = geometryType === 'Point' ? markerStyle : defaultStyle;\n            style.getText().setText(olFeature.get('_mapTitle'));\n            return style;\n        }\n    };\n}\n/**\n * Create a basic style for lines and polygons\n * @returns Style\n */\nfunction createOverlayDefaultStyle({ text, strokeWidth = 2, fillColor = [0, 161, 222, 0.3], strokeColor = [0, 161, 222, 0.9], } = {}) {\n    const fillWithOpacity = asArray(fillColor).slice(0);\n    const strokeWithOpacity = asArray(strokeColor).slice(0);\n    const stroke = new Stroke({\n        width: strokeWidth,\n        color: strokeWithOpacity\n    });\n    const fill = new Fill({\n        color: fillWithOpacity\n    });\n    return new Style({\n        stroke,\n        fill,\n        image: new Circle({\n            radius: 5,\n            stroke,\n            fill\n        }),\n        text: new Text({\n            text,\n            font: '12px Calibri,sans-serif',\n            fill: new Fill({ color: '#000' }),\n            stroke: new Stroke({ color: '#fff', width: 3 }),\n            overflow: true\n        })\n    });\n}\nfunction createBufferStyle(strokeRGBA = [0, 161, 222, 1], strokeWidth = 2, fillRGBA = [0, 161, 222, 0.15], bufferRadius) {\n    const stroke = new Stroke({\n        width: strokeWidth,\n        color: strokeRGBA\n    });\n    const fill = new Stroke({\n        color: fillRGBA\n    });\n    return new Style({\n        stroke,\n        fill,\n        image: new Circle({\n            radius: 5,\n            stroke,\n            fill\n        }),\n        text: new Text({\n            font: '12px Calibri,sans-serif',\n            text: bufferRadius,\n            fill: new Fill({ color: '#000' }),\n            stroke: new Stroke({ color: '#fff', width: 3 }),\n            overflow: true\n        })\n    });\n}\n\n/**\n * This class is simply a shortcut for adding features to a map.\n * It does nothing more than a standard layer but it's shipped with\n * a defautl style based on the geometry type of the features it contains.\n * @todo Enhance that by using a FeatureStore and strategies.\n */\nclass Overlay {\n    constructor(map) {\n        this.layer = createOverlayLayer();\n        this.setMap(map);\n    }\n    /**\n     * Overlay layer's data source\n     */\n    get dataSource() {\n        return this.layer.dataSource;\n    }\n    /**\n     * Bind this to a map and add the overlay layer to that map\n     * @param map Map\n     */\n    setMap(map) {\n        if (map === undefined) {\n            if (this.map !== undefined) {\n                this.map.ol.removeLayer(this.layer.ol);\n            }\n        }\n        else {\n            map.ol.addLayer(this.layer.ol);\n        }\n        this.map = map;\n    }\n    /**\n     * Set the overlay features and, optionally, move to them\n     * @param features Features\n     * @param motion Optional: Apply this motion to the map view\n     * @param sourceId Optional: Remove features of certain sourceId (ex: 'Map' for query features)\n     */\n    setFeatures(features, motion = FeatureMotion.Default, sourceId) {\n        if (sourceId) {\n            for (const olFeature of this.dataSource.ol.getFeatures()) {\n                if (olFeature.get('_sourceId') === sourceId) {\n                    this.removeOlFeature(olFeature);\n                }\n            }\n        }\n        else {\n            this.clear();\n        }\n        this.addFeatures(features, motion);\n    }\n    /**\n     * Add a feature to the  overlay and, optionally, move to it\n     * @param feature Feature\n     * @param motion Optional: Apply this motion to the map view\n     */\n    addFeature(feature, motion = FeatureMotion.Default) {\n        this.addFeatures([feature], motion);\n    }\n    /**\n     * Add features to the  overlay and, optionally, move to them\n     * @param features Features\n     * @param motion Optional: Apply this motion to the map view\n     */\n    addFeatures(features, motion = FeatureMotion.Default) {\n        const olFeatures = [];\n        features.forEach((feature) => {\n            const olFeature = featureToOl(feature, this.map.projection);\n            const olGeometry = olFeature.getGeometry();\n            if (olGeometry === null) {\n                return;\n            }\n            olFeatures.push(olFeature);\n        });\n        this.addOlFeatures(olFeatures, motion);\n    }\n    /**\n     * Add a OpenLayers feature to the  overlay and, optionally, move to it\n     * @param olFeature OpenLayers Feature\n     * @param motion Optional: Apply this motion to the map view\n     */\n    addOlFeature(olFeature, motion = FeatureMotion.Default) {\n        this.addOlFeatures([olFeature], motion);\n    }\n    /**\n     * Add OpenLayers features to the overlay and, optionally, move to them\n     * @param olFeatures OpenLayers Features\n     * @param motion Optional: Apply this motion to the map view\n     */\n    addOlFeatures(olFeatures, motion = FeatureMotion.Default) {\n        this.dataSource.ol.addFeatures(olFeatures);\n        moveToOlFeatures(this.map, olFeatures, motion);\n    }\n    /**\n     * Remove a feature from the overlay\n     * @param feature Feature\n     */\n    removeFeature(feature) {\n        this.removeFeatures([feature]);\n    }\n    /**\n     * Remove features from the overlay\n     * @param features Features\n     */\n    removeFeatures(features) {\n        features.forEach((feature) => {\n            if (feature.meta) {\n                if (this.dataSource.ol.getFeatureById(feature.meta.id)) {\n                    this.removeOlFeature(this.dataSource.ol.getFeatureById(feature.meta.id));\n                }\n            }\n        });\n    }\n    /**\n     * Remove an OpenLayers feature from the overlay\n     * @param olFeature OpenLayers Feature\n     */\n    removeOlFeature(olFeature) {\n        this.dataSource.ol.removeFeature(olFeature);\n    }\n    /**\n     * Clear the overlay\n     */\n    clear() {\n        this.dataSource.ol.clear();\n    }\n}\n\nclass LayerWatcher extends Watcher {\n    constructor() {\n        super();\n        this.loaded = 0;\n        this.loading = 0;\n        this.layers = [];\n        this.subscriptions = [];\n    }\n    watch() { }\n    unwatch() {\n        this.layers.forEach(layer => this.unwatchLayer(layer), this);\n    }\n    watchLayer(layer) {\n        if (layer.status$ === undefined) {\n            return;\n        }\n        this.layers.push(layer);\n        const layer$$ = layer.status$\n            .pipe(distinctUntilChanged())\n            .subscribe(status => {\n            if (status === SubjectStatus.Working) {\n                this.loading += 1;\n            }\n            else if (status === SubjectStatus.Done) {\n                this.loaded += 1;\n            }\n            if (this.loaded >= this.loading) {\n                this.loading = this.loaded = 0;\n                this.status = SubjectStatus.Done;\n            }\n            else if (this.loading > 0) {\n                this.status = SubjectStatus.Working;\n            }\n        });\n        this.subscriptions.push(layer$$);\n    }\n    unwatchLayer(layer) {\n        layer.status$.next(SubjectStatus.Done);\n        const index = this.layers.indexOf(layer);\n        if (index >= 0) {\n            const status = layer.watcher.status;\n            if ([SubjectStatus.Working, SubjectStatus.Waiting].indexOf(status) !== -1) {\n                this.loaded += 1;\n            }\n            this.subscriptions[index].unsubscribe();\n            this.subscriptions.splice(index, 1);\n            this.layers.splice(index, 1);\n            layer.watcher.unwatch();\n        }\n    }\n}\n\nvar MapViewAction;\n(function (MapViewAction) {\n    MapViewAction[MapViewAction[\"Move\"] = 0] = \"Move\";\n    MapViewAction[MapViewAction[\"Zoom\"] = 1] = \"Zoom\";\n})(MapViewAction || (MapViewAction = {}));\n\n/**\n * Base map controller\n */\nclass MapController {\n    constructor() {\n        /**\n         * Array of observer keys\n         */\n        this.observerKeys = [];\n    }\n    /**\n     * Return the OL map this controller is bound to\n     * @returns OL Map\n     */\n    getOlMap() {\n        return this.olMap;\n    }\n    /**\n     * Add or remove this controller to/from a map.\n     * @param map OL Map\n     */\n    setOlMap(olMap) {\n        if (olMap !== undefined && this.getOlMap() !== undefined) {\n            throw new Error('This controller is already bound to a map.');\n        }\n        if (olMap === undefined) {\n            this.teardownObservers();\n            this.olMap = olMap;\n            return;\n        }\n        this.olMap = olMap;\n    }\n    /**\n     * Teardown any observers\n     */\n    teardownObservers() {\n        this.observerKeys.forEach((key) => unByKey(key));\n        this.observerKeys = [];\n    }\n}\n\n/**\n * Controller to handle map view interactions\n */\nclass MapViewController extends MapController {\n    constructor(options) {\n        super();\n        this.options = options;\n        /**\n         * Observable of the current resolution\n         */\n        this.resolution$ = new BehaviorSubject(undefined);\n        /**\n         * Observable of the current state\n         */\n        this.state$ = new BehaviorSubject(undefined);\n        /**\n         * View Padding\n         */\n        this.padding = [0, 0, 0, 0];\n        /**\n         * Max zoom after set extent\n         */\n        this.maxZoomOnExtent = 19;\n        /**\n         * Extent stream\n         */\n        this.extent$ = new Subject();\n        /**\n         * History of states\n         */\n        this.states = [];\n        /**\n         * Current state index\n         */\n        this.stateIndex = 0;\n    }\n    /**\n     * Whether the view controller should keep the view's state history\n     */\n    get stateHistory() {\n        return this.options ? this.options.stateHistory === true : false;\n    }\n    /**\n     * OL View\n     */\n    get olView() {\n        return this.olMap.getView();\n    }\n    /**\n     * Add or remove this controller to/from a map.\n     * @param map OL Map\n     */\n    setOlMap(olMap) {\n        super.setOlMap(olMap);\n        this.setupObservers();\n    }\n    /**\n     * Observe move moveend and subscribe to the extent stream\n     */\n    setupObservers() {\n        if (this.stateHistory === true) {\n            this.observerKeys.push(this.olMap.on('moveend', (event) => this.onMoveEnd(event)));\n        }\n        this.extent$$ = this.extent$\n            .pipe(debounceTime(25))\n            .subscribe((value) => {\n            this.setExtent(value.extent, value.action);\n        });\n    }\n    /**\n     * Teardown any observers\n     */\n    teardownObservers() {\n        super.teardownObservers();\n        if (this.extent$$ !== undefined) {\n            this.extent$$.unsubscribe();\n            this.extent$$ = undefined;\n        }\n    }\n    /**\n     * Get the view's OL projection\n     * @returns OL projection\n     */\n    getOlProjection() {\n        return this.olView.getProjection();\n    }\n    /**\n     * Get the current map view center\n     * @param projection Output projection\n     * @returns Center\n     */\n    getCenter(projection) {\n        let center = this.olView.getCenter();\n        if (projection && center) {\n            center = transform(center, this.getOlProjection(), projection);\n        }\n        return center;\n    }\n    /**\n     * Get the current view extent\n     * @param projection Output projection\n     * @returns Extent\n     */\n    getExtent(projection) {\n        let extent = this.olView.calculateExtent(this.olMap.getSize());\n        if (projection && extent) {\n            extent = transformExtent(extent, this.getOlProjection(), projection);\n        }\n        return extent;\n    }\n    /**\n     * Get the current scale\n     * @param dpi Dot per inches\n     * @returns View scale\n     */\n    getScale(dpi = 96) {\n        return getScaleFromResolution(this.getResolution(), this.getOlProjection().getUnits(), dpi);\n    }\n    /**\n     * Get the current resolution\n     * @returns Projection denominator\n     */\n    getResolution() {\n        return this.olView.getResolution();\n    }\n    /**\n     * Get the current zoom level\n     * @returns Zoom level\n     */\n    getZoom() {\n        return Math.round(this.olView.getZoom());\n    }\n    /**\n     * Zoom in\n     */\n    zoomIn() {\n        this.zoomTo(this.olView.getZoom() + 1);\n    }\n    /**\n     * Zoom out\n     */\n    zoomOut() {\n        this.zoomTo(this.olView.getZoom() - 1);\n    }\n    /**\n     * Zoom to specific zoom level\n     * @param zoom Zoom level\n     */\n    zoomTo(zoom) {\n        this.olView.cancelAnimations();\n        this.olView.animate({\n            zoom,\n            duration: 250,\n            easing: easeOut\n        });\n    }\n    /**\n     * Move to extent after a short delay (100ms) unless\n     * a new movement gets registered in the meantime.\n     * @param extent Extent to move to\n     */\n    moveToExtent(extent) {\n        this.extent$.next({ extent, action: MapViewAction.Move });\n    }\n    /**\n     * Zoom to extent after a short delay (100ms) unless\n     * a new movement gets registered in the meantime.\n     * @param extent Extent to zoom to\n     */\n    zoomToExtent(extent) {\n        this.extent$.next({ extent, action: MapViewAction.Zoom });\n    }\n    /**\n     * Return the current view rotation\n     * @returns Rotation angle in degrees\n     */\n    getRotation() {\n        return this.olView.getRotation();\n    }\n    /**\n     * Reset the view rotation to 0\n     */\n    resetRotation() {\n        this.olView.animate({ rotation: 0 });\n    }\n    /**\n     * Whether the view has a previous state\n     * @returns True if the view has a previous state\n     */\n    hasPreviousState() {\n        return this.states.length > 1 && this.stateIndex > 0;\n    }\n    /**\n     * Whether the view has a next state\n     * @returns True if the view has a next state\n     */\n    hasNextState() {\n        return this.states.length > 1 && this.stateIndex < this.states.length - 1;\n    }\n    /**\n     * Restore the previous view state\n     */\n    previousState() {\n        if (this.hasPreviousState()) {\n            this.setStateIndex(this.stateIndex - 1);\n        }\n    }\n    /**\n     * Restore the next view state\n     */\n    nextState() {\n        if (this.hasNextState()) {\n            this.setStateIndex(this.stateIndex + 1);\n        }\n    }\n    /**\n     * Clear the state history\n     */\n    clearStateHistory() {\n        this.states = [];\n        this.stateIndex = 0;\n    }\n    /**\n     * Update the the view to it's intial state\n     */\n    setInitialState() {\n        if (this.states.length > 0) {\n            this.setStateIndex(0);\n        }\n    }\n    /**\n     * Move to the extent retrieved from the stream\n     * @param extent Extent\n     * @param action Either zoom or move\n     * @param animation With or without animation to the target extent.\n     */\n    setExtent(extent, action, animation = true) {\n        const olView = this.olView;\n        olView.cancelAnimations();\n        const duration = animation ? 500 : 0;\n        const zoom = olView.getZoom();\n        const fromCenter = olView.getCenter();\n        const toCenter = [\n            extent[0] + (extent[2] - extent[0]) / 2,\n            extent[1] + (extent[3] - extent[1]) / 2\n        ];\n        const distCenter = Math.sqrt(Math.pow(fromCenter[0] - toCenter[0], 2) +\n            Math.pow(fromCenter[1] - toCenter[1], 2));\n        const fromExtent = olView.calculateExtent();\n        const fromSize = Math.sqrt(Math.pow(fromExtent[2] - fromExtent[0], 2) +\n            Math.pow(fromExtent[3] - fromExtent[1], 2));\n        const toSize = Math.sqrt(Math.pow(extent[2] - extent[0], 2) + Math.pow(extent[3] - extent[1], 2));\n        const moySize = (toSize + fromSize) / 2;\n        const xSize = distCenter / moySize;\n        const maxZoom = action === MapViewAction.Move || zoom > this.maxZoomOnExtent\n            ? zoom\n            : this.maxZoomOnExtent;\n        olView.fit(extent, {\n            size: this.olMap.getSize(),\n            maxZoom,\n            padding: this.padding,\n            duration: xSize > 4 ? 0 : duration,\n            callback: (isFinished) => {\n                if (!isFinished) {\n                    olView.fit(extent, {\n                        size: this.olMap.getSize(),\n                        maxZoom,\n                        padding: this.padding,\n                        duration: xSize > 4 ? 0 : duration\n                    });\n                }\n            }\n        });\n    }\n    /**\n     * Set the view state index\n     * @param index State index\n     */\n    setStateIndex(index) {\n        this.stateIndex = index;\n        this.setState(this.states[index]);\n    }\n    /**\n     * Set the view state\n     * @param state View state\n     */\n    setState(state) {\n        this.olView.animate({\n            resolution: state.resolution,\n            center: state.center,\n            duration: 0\n        });\n    }\n    /**\n     * On move end, get the view state and record it.\n     * @param event Map event\n     */\n    onMoveEnd(event) {\n        const resolution = this.getResolution();\n        if (this.resolution$.value !== resolution) {\n            this.resolution$.next(resolution);\n        }\n        const state = {\n            resolution,\n            center: this.getCenter(),\n            zoom: this.getZoom()\n        };\n        if (this.stateHistory === true) {\n            const stateIndex = this.stateIndex;\n            const stateAtIndex = this.states.length === 0 ? undefined : this.states[stateIndex];\n            if (!viewStatesAreEqual(state, stateAtIndex)) {\n                this.states = this.states.slice(0, stateIndex + 1).concat([state]);\n                this.stateIndex = this.states.length - 1;\n            }\n        }\n        this.state$.next(state);\n    }\n}\n\n// TODO: This class is messy. Clearly define it's scope and the map browser's.\n// Move some stuff into controllers.\nclass IgoMap {\n    constructor(options) {\n        this.offlineButtonToggle$ = new BehaviorSubject(false);\n        this.layers$ = new BehaviorSubject([]);\n        this.positionFollower = true;\n        this.geolocation$ = new BehaviorSubject(undefined);\n        this.defaultOptions = {\n            controls: { attribution: false }\n        };\n        this.options = Object.assign({}, this.defaultOptions, options);\n        this.layerWatcher = new LayerWatcher();\n        this.status$ = this.layerWatcher.status$;\n        register(proj4);\n        this.init();\n    }\n    get layers() {\n        return this.layers$.value;\n    }\n    get projection() {\n        return this.viewController.getOlProjection().getCode();\n    }\n    init() {\n        const controls = [];\n        if (this.options.controls) {\n            if (this.options.controls.attribution) {\n                const attributionOpt = (this.options.controls.attribution === true\n                    ? {}\n                    : this.options.controls.attribution);\n                controls.push(new olAttribution(attributionOpt));\n            }\n            if (this.options.controls.scaleLine) {\n                const scaleLineOpt = (this.options.controls.scaleLine === true\n                    ? {}\n                    : this.options.controls.scaleLine);\n                controls.push(new olControlScaleLine(scaleLineOpt));\n            }\n        }\n        let interactions = {};\n        if (this.options.interactions === false) {\n            interactions = {\n                altShiftDragRotate: false,\n                doubleClickZoom: false,\n                keyboard: false,\n                mouseWheelZoom: false,\n                shiftDragZoom: false,\n                dragPan: false,\n                pinchRotate: false,\n                pinchZoom: false\n            };\n        }\n        this.ol = new olMap({\n            interactions: defaults(interactions),\n            controls\n        });\n        this.setView(this.options.view || {});\n        this.viewController = new MapViewController({\n            stateHistory: true\n        });\n        this.viewController.setOlMap(this.ol);\n        this.overlay = new Overlay(this);\n        this.queryResultsOverlay = new Overlay(this);\n        this.searchResultsOverlay = new Overlay(this);\n        this.buffer = new Overlay(this);\n    }\n    setTarget(id) {\n        this.ol.setTarget(id);\n        if (id !== undefined) {\n            this.layerWatcher.subscribe(() => { }, null);\n        }\n        else {\n            this.layerWatcher.unsubscribe();\n        }\n    }\n    updateView(options) {\n        const currentView = this.ol.getView();\n        const viewOptions = Object.assign({\n            zoom: currentView.getZoom()\n        }, currentView.getProperties());\n        this.setView(Object.assign(viewOptions, options));\n        if (options.maxZoomOnExtent) {\n            this.viewController.maxZoomOnExtent = options.maxZoomOnExtent;\n        }\n    }\n    /**\n     * Set the map view\n     * @param options Map view options\n     */\n    setView(options) {\n        if (this.viewController !== undefined) {\n            this.viewController.clearStateHistory();\n        }\n        options = Object.assign({ constrainResolution: true }, options);\n        const view = new olView(options);\n        this.ol.setView(view);\n        this.unsubscribeGeolocate();\n        if (options) {\n            if (options.maxLayerZoomExtent) {\n                this.viewController.maxLayerZoomExtent = options.maxLayerZoomExtent;\n            }\n            if (options.center) {\n                const projection = view.getProjection().getCode();\n                const center = fromLonLat(options.center, projection);\n                view.setCenter(center);\n            }\n            if (options.geolocate) {\n                this.geolocate(true);\n            }\n            if (options.alwaysTracking) {\n                this.alwaysTracking = true;\n            }\n        }\n    }\n    updateControls(value) {\n        if (value === undefined) {\n            return;\n        }\n        const controls = [];\n        if (value.attribution) {\n            const attributionOpt = (value.attribution === true\n                ? {}\n                : value.attribution);\n            controls.push(new olAttribution(attributionOpt));\n        }\n        if (value.scaleLine) {\n            const scaleLineOpt = (value.scaleLine === true\n                ? {}\n                : value.scaleLine);\n            controls.push(new olControlScaleLine(scaleLineOpt));\n        }\n        const currentControls = Object.assign([], this.ol.getControls().array_);\n        currentControls.forEach(control => {\n            this.ol.removeControl(control);\n        });\n        controls.forEach(control => {\n            this.ol.addControl(control);\n        });\n    }\n    /**\n     * Deprecated\n     * TODO: Move to ViewController and update every place it's used\n     */\n    getCenter(projection) {\n        return this.viewController.getCenter(projection);\n    }\n    /**\n     * Deprecated\n     * TODO: Move to ViewController and update every place it's used\n     */\n    getExtent(projection) {\n        return this.viewController.getExtent(projection);\n    }\n    // TODO: Move to ViewController and update every place it's used\n    getZoom() {\n        return this.viewController.getZoom();\n    }\n    changeBaseLayer(baseLayer) {\n        if (!baseLayer) {\n            return;\n        }\n        for (const bl of this.getBaseLayers()) {\n            bl.visible = false;\n        }\n        baseLayer.visible = true;\n        this.viewController.olView.setMinZoom(baseLayer.dataSource.options.minZoom || (this.options.view || {}).minZoom);\n        this.viewController.olView.setMaxZoom(baseLayer.dataSource.options.maxZoom || (this.options.view || {}).maxZoom);\n    }\n    getBaseLayers() {\n        return this.layers.filter((layer) => layer.baseLayer === true);\n    }\n    getLayerById(id) {\n        return this.layers.find((layer) => layer.id && layer.id === id);\n    }\n    getLayerByAlias(alias) {\n        return this.layers.find((layer) => layer.alias && layer.alias === alias);\n    }\n    getLayerByOlUId(olUId) {\n        return this.layers.find((layer) => layer.ol.ol_uid && layer.ol.ol_uid === olUId);\n    }\n    /**\n     * Add a single layer\n     * @param layer Layer to add\n     * @param push DEPRECATED\n     */\n    addLayer(layer, push = true) {\n        this.addLayers([layer]);\n    }\n    /**\n     * Add many layers\n     * @param layers Layers to add\n     * @param push DEPRECATED\n     */\n    addLayers(layers, push = true) {\n        let offsetZIndex = 0;\n        let offsetBaseLayerZIndex = 0;\n        const addedLayers = layers\n            .map((layer) => {\n            const offset = layer.zIndex\n                ? 0\n                : layer.baseLayer\n                    ? offsetBaseLayerZIndex++\n                    : offsetZIndex++;\n            return this.doAddLayer(layer, offset);\n        })\n            .filter((layer) => layer !== undefined);\n        this.setLayers([].concat(this.layers, addedLayers));\n    }\n    /**\n     * Remove a single layer\n     * @param layer Layer to remove\n     */\n    removeLayer(layer) {\n        this.removeLayers([layer]);\n    }\n    /**\n     * Remove many layers\n     * @param layers Layers to remove\n     */\n    removeLayers(layers) {\n        const newLayers = this.layers$.value.slice(0);\n        const layersToRemove = [];\n        layers.forEach((layer) => {\n            const index = newLayers.indexOf(layer);\n            if (index >= 0) {\n                layersToRemove.push(layer);\n                newLayers.splice(index, 1);\n                this.handleLinkedLayersDeletion(layer, layersToRemove);\n                layersToRemove.map(linkedLayer => {\n                    layersToRemove.push(linkedLayer);\n                    const linkedIndex = newLayers.indexOf(linkedLayer);\n                    if (linkedIndex >= 0) {\n                        newLayers.splice(linkedIndex, 1);\n                    }\n                });\n            }\n        });\n        layersToRemove.forEach((layer) => this.doRemoveLayer(layer));\n        this.setLayers(newLayers);\n    }\n    /**\n     * Build a list of linked layers to delete\n     * @param srcLayer Layer that has triggered the deletion\n     * @param layersToRemove list to append the layer to delete into\n     */\n    handleLinkedLayersDeletion(srcLayer, layersToRemove) {\n        const linkedLayers = srcLayer.options.linkedLayers;\n        if (!linkedLayers) {\n            return;\n        }\n        const currentLinkedId = linkedLayers.linkId;\n        const currentLinks = linkedLayers.links;\n        const isParentLayer = currentLinks ? true : false;\n        if (isParentLayer) {\n            // search for child layers\n            currentLinks.map(link => {\n                if (!link.syncedDelete) {\n                    return;\n                }\n                link.linkedIds.map(linkedId => {\n                    const layerToApply = this.layers.find(layer => { var _a; return ((_a = layer.options.linkedLayers) === null || _a === void 0 ? void 0 : _a.linkId) === linkedId; });\n                    if (layerToApply) {\n                        layersToRemove.push(layerToApply);\n                    }\n                });\n            });\n        }\n        else {\n            // search for parent layer\n            this.layers.map(layer => {\n                var _a;\n                if ((_a = layer.options.linkedLayers) === null || _a === void 0 ? void 0 : _a.links) {\n                    layer.options.linkedLayers.links.map(l => {\n                        if (l.syncedDelete && l.bidirectionnal !== false &&\n                            l.linkedIds.indexOf(currentLinkedId) !== -1) {\n                            layersToRemove.push(layer);\n                            this.handleLinkedLayersDeletion(layer, layersToRemove);\n                        }\n                    });\n                }\n            });\n        }\n    }\n    /**\n     * Remove all layers\n     */\n    removeAllLayers() {\n        this.layers.forEach((layer) => this.doRemoveLayer(layer));\n        this.layers$.next([]);\n    }\n    raiseLayer(layer) {\n        const index = this.getLayerIndex(layer);\n        if (index > 1) {\n            this.moveLayer(layer, index, index - 1);\n        }\n    }\n    raiseLayers(layers) {\n        for (const layer of layers) {\n            this.raiseLayer(layer);\n        }\n    }\n    lowerLayer(layer) {\n        const index = this.getLayerIndex(layer);\n        if (index < this.layers.length - 1) {\n            this.moveLayer(layer, index, index + 1);\n        }\n    }\n    lowerLayers(layers) {\n        const reverseLayers = layers.reverse();\n        for (const layer of reverseLayers) {\n            this.lowerLayer(layer);\n        }\n    }\n    moveLayer(layer, from, to) {\n        const layerTo = this.layers[to];\n        const zIndexTo = layerTo.zIndex;\n        const zIndexFrom = layer.zIndex;\n        if (layerTo.baseLayer || layer.baseLayer) {\n            return;\n        }\n        layer.zIndex = zIndexTo;\n        layerTo.zIndex = zIndexFrom;\n        this.layers[to] = layer;\n        this.layers[from] = layerTo;\n        this.layers$.next(this.layers.slice(0));\n    }\n    /**\n     * Add a layer to the OL map and start watching. If the layer is already\n     * added to this map, make it visible but don't add it one again.\n     * @param layer Layer\n     * @returns The layer added, if any\n     */\n    doAddLayer(layer, offsetZIndex) {\n        if (layer.baseLayer && layer.visible) {\n            this.changeBaseLayer(layer);\n        }\n        const existingLayer = this.getLayerById(layer.id);\n        if (existingLayer !== undefined) {\n            existingLayer.visible = true;\n            return;\n        }\n        if (!layer.baseLayer && layer.zIndex) {\n            layer.zIndex += 10;\n        }\n        if (layer.zIndex === undefined || layer.zIndex === 0) {\n            const maxZIndex = Math.max(layer.baseLayer ? 0 : 10, ...this.layers\n                .filter((l) => l.baseLayer === layer.baseLayer && l.zIndex < 200 // zIndex > 200 = system layer\n            )\n                .map((l) => l.zIndex));\n            layer.zIndex = maxZIndex + 1 + offsetZIndex;\n        }\n        if (layer.baseLayer && layer.zIndex > 9) {\n            layer.zIndex = 10; // baselayer must have zIndex < 10\n        }\n        layer.setMap(this);\n        this.layerWatcher.watchLayer(layer);\n        this.ol.addLayer(layer.ol);\n        return layer;\n    }\n    /**\n     * Remove a layer from the OL map and stop watching\n     * @param layer Layer\n     */\n    doRemoveLayer(layer) {\n        this.layerWatcher.unwatchLayer(layer);\n        this.ol.removeLayer(layer.ol);\n        layer.setMap(undefined);\n    }\n    /**\n     * Update the layers observable\n     * @param layers Layers\n     */\n    setLayers(layers) {\n        this.layers$.next(this.sortLayersByZIndex(layers).slice(0));\n    }\n    /**\n     * Sort layers by descending zIndex\n     * @param layers Array of layers\n     * @returns The original array, sorted by zIndex\n     */\n    sortLayersByZIndex(layers) {\n        // Sort by descending zIndex\n        return layers.sort((layer1, layer2) => layer2.zIndex - layer1.zIndex);\n    }\n    /**\n     * Get layer index in the map's inenr array of layers\n     * @param layer Layer\n     * @returns The layer index\n     */\n    getLayerIndex(layer) {\n        return this.layers.findIndex((_layer) => _layer === layer);\n    }\n    // TODO: Create a GeolocationController with everything below\n    geolocate(track = false) {\n        let first = true;\n        if (this.geolocation$$) {\n            track = this.geolocation.getTracking();\n            this.unsubscribeGeolocate();\n        }\n        this.startGeolocation();\n        this.geolocation$$ = this.geolocation$.subscribe((geolocation) => {\n            if (!geolocation) {\n                return;\n            }\n            const accuracy = geolocation.getAccuracy();\n            if (accuracy < 10000) {\n                const geometry = geolocation.getAccuracyGeometry();\n                const extent = geometry.getExtent();\n                if (this.geolocationFeature &&\n                    this.overlay.dataSource.ol.getFeatureById(this.geolocationFeature.getId())) {\n                    this.overlay.dataSource.ol.removeFeature(this.geolocationFeature);\n                }\n                if (this.bufferFeature) {\n                    this.buffer.dataSource.ol.removeFeature(this.bufferFeature);\n                }\n                this.geolocationFeature = new olFeature({ geometry });\n                this.geolocationFeature.setId('geolocationFeature');\n                if (this.alwaysTracking) {\n                    this.overlay.addOlFeature(this.geolocationFeature, this.positionFollower ? FeatureMotion.Move : FeatureMotion.None);\n                }\n                else {\n                    this.overlay.addOlFeature(this.geolocationFeature);\n                }\n                if (this.ol.getView().options_.buffer) {\n                    const bufferRadius = this.ol.getView().options_.buffer.bufferRadius;\n                    const coordinates = geolocation.getPosition();\n                    this.bufferGeom = new OlCircle(coordinates, bufferRadius);\n                    const bufferStroke = this.ol.getView().options_.buffer.bufferStroke;\n                    const bufferFill = this.ol.getView().options_.buffer.bufferFill;\n                    let bufferText;\n                    if (this.ol.getView().options_.buffer.showBufferRadius) {\n                        bufferText = bufferRadius.toString() + 'm';\n                    }\n                    else {\n                        bufferText = '';\n                    }\n                    this.bufferFeature = new olFeature(this.bufferGeom);\n                    this.bufferFeature.setId('bufferFeature');\n                    this.bufferFeature.set('bufferStroke', bufferStroke);\n                    this.bufferFeature.set('bufferFill', bufferFill);\n                    this.bufferFeature.set('bufferText', bufferText);\n                    this.buffer.addOlFeature(this.bufferFeature, FeatureMotion.None);\n                }\n                if (first) {\n                    this.viewController.zoomToExtent(extent);\n                    this.positionFollower = !this.positionFollower;\n                }\n            }\n            else if (first) {\n                const view = this.ol.getView();\n                const coordinates = geolocation.getPosition();\n                view.setCenter(coordinates);\n                view.setZoom(14);\n            }\n            if (track !== true && this.alwaysTracking !== true) {\n                this.unsubscribeGeolocate();\n            }\n            first = false;\n        });\n    }\n    unsubscribeGeolocate() {\n        this.stopGeolocation();\n        if (this.geolocation$$) {\n            this.geolocation$$.unsubscribe();\n            this.geolocation$$ = undefined;\n        }\n    }\n    startGeolocation() {\n        if (!this.geolocation) {\n            this.geolocation = new olGeolocation({\n                trackingOptions: {\n                    enableHighAccuracy: true\n                },\n                projection: this.projection,\n                tracking: true\n            });\n            this.geolocation.on('change', (evt) => {\n                this.geolocation$.next(this.geolocation);\n            });\n        }\n        else {\n            this.geolocation.setTracking(true);\n        }\n    }\n    stopGeolocation() {\n        if (this.geolocation) {\n            this.geolocation.setTracking(false);\n        }\n    }\n    onOfflineToggle(offline) {\n        this.offlineButtonToggle$.next(offline);\n    }\n}\n\nconst _c0 = [\"*\"];\nclass MapBrowserComponent {\n    constructor(activityService) {\n        this.activityService = activityService;\n        this.id = `igo-map-target-${new Date().getTime()}`;\n    }\n    get view() {\n        return this._view;\n    }\n    set view(value) {\n        this._view = value;\n        if (this.map !== undefined) {\n            this.map.updateView(value);\n        }\n    }\n    get controls() {\n        return this._controls;\n    }\n    set controls(value) {\n        this._controls = value;\n        if (this.map !== undefined) {\n            this.map.updateControls(value);\n        }\n    }\n    ngOnInit() {\n        this.status$$ = this.map.status$.subscribe(status => this.handleStatusChange(status));\n    }\n    ngAfterViewInit() {\n        this.map.setTarget(this.id);\n    }\n    ngOnDestroy() {\n        this.map.setTarget(undefined);\n        this.activityService.unregister(this.activityId);\n        this.status$$.unsubscribe();\n    }\n    handleStatusChange(status) {\n        if (status === SubjectStatus.Working && this.activityId === undefined) {\n            this.activityId = this.activityService.register();\n        }\n        else if (status === SubjectStatus.Done && this.activityId !== undefined) {\n            this.activityService.unregister(this.activityId);\n            this.activityId = undefined;\n        }\n    }\n}\nMapBrowserComponent.ɵfac = function MapBrowserComponent_Factory(t) { return new (t || MapBrowserComponent)(ɵɵdirectiveInject(ActivityService)); };\nMapBrowserComponent.ɵcmp = ɵɵdefineComponent({ type: MapBrowserComponent, selectors: [[\"igo-map-browser\"]], inputs: { map: \"map\", view: \"view\" }, ngContentSelectors: _c0, decls: 2, vars: 1, consts: [[1, \"igo-map-browser-target\", 3, \"id\"]], template: function MapBrowserComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵprojectionDef();\n        ɵɵelement(0, \"div\", 0);\n        ɵɵprojection(1);\n    } if (rf & 2) {\n        ɵɵproperty(\"id\", ctx.id);\n    } }, styles: [\"[_nghost-%COMP%]{display:block;position:relative}.igo-map-browser-target[_ngcontent-%COMP%], [_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]     igo-zoom-button{bottom:5px;position:absolute;right:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     igo-zoom-button{display:none}}[_nghost-%COMP%]     igo-offline-button{bottom:15px;position:absolute;right:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     igo-offline-button{bottom:5px}}[_nghost-%COMP%]     igo-geolocate-button{bottom:5px;position:absolute;right:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     igo-geolocate-button{bottom:5px}}[_nghost-%COMP%]     igo-rotation-button{position:absolute;right:5px;top:50px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     igo-rotation-button{top:50px}}[_nghost-%COMP%]     igo-user-button{bottom:5px;position:absolute;right:55px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     igo-user-button{right:95px}}[_nghost-%COMP%]     igo-baselayers-switcher{bottom:5px;left:5px;position:absolute}[_nghost-%COMP%]     .ol-attribution{background-color:hsla(0,0%,100%,0);bottom:5px;left:5px;margin-right:90px;padding:0;text-align:left;width:calc(100% - 100px)}[_nghost-%COMP%]     .ol-attribution.ol-logo-only{height:inherit}[_nghost-%COMP%]     .ol-attribution.ol-collapsed{background:none}[_nghost-%COMP%]     .ol-attribution.ol-collapsed button{transform:none}[_nghost-%COMP%]     .ol-attribution button{background-color:#fff;cursor:pointer;outline:none;transform:rotate(180deg)}[_nghost-%COMP%]     .ol-scale-line-inner{border-color:#000;box-shadow:0 1px 0 1px hsla(0,0%,100%,.6);color:#000;text-shadow:#fff -1px -1px 3px,#fff 1px -1px 3px,#fff -1px 1px 3px,#fff 1px 1px 4px}[_nghost-%COMP%]     .ol-scale-bar, [_nghost-%COMP%]     .ol-scale-line{background-color:hsla(0,0%,100%,0);bottom:4px;left:50%;transform:translate(-50%)}[_nghost-%COMP%]     .ol-scale-step-text, [_nghost-%COMP%]     .ol-scale-text{text-shadow:#fff -1px -1px 3px,#fff 1px -1px 3px,#fff -1px 1px 3px,#fff 1px 1px 4px}[_nghost-%COMP%]     canvas{display:block}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MapBrowserComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-map-browser',\n                templateUrl: './map-browser.component.html',\n                styleUrls: ['./map-browser.component.scss']\n            }]\n    }], function () { return [{ type: ActivityService }]; }, { map: [{\n            type: Input\n        }], view: [{\n            type: Input\n        }] }); })();\n\nclass MapOfflineDirective {\n    constructor(component, networkService, messageService, languageService) {\n        this.networkService = networkService;\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.offlineButtonStatus = false;\n        this.networkState = {\n            connection: true\n        };\n        this.offlineButtonState = {\n            connection: true\n        };\n        this.component = component;\n    }\n    get map() {\n        return this.component.map;\n    }\n    ngAfterViewInit() {\n        this.map.offlineButtonToggle$.subscribe((offlineButtonToggle) => {\n            this.offlineButtonStatus = offlineButtonToggle;\n            const translate = this.languageService.translate;\n            if (this.offlineButtonStatus && this.networkState.connection) {\n                const message = translate.instant('igo.geo.network.offline.message');\n                const title = translate.instant('igo.geo.network.offline.title');\n                this.messageService.info(message, title);\n                this.offlineButtonState.connection = false;\n                this.changeLayer();\n            }\n            else if (!this.offlineButtonStatus && !this.networkState.connection) {\n                const message = translate.instant('igo.geo.network.offline.message');\n                const title = translate.instant('igo.geo.network.offline.title');\n                this.messageService.info(message, title);\n                this.offlineButtonState.connection = false;\n                this.changeLayer();\n            }\n            else if (!this.offlineButtonStatus && this.networkState.connection) {\n                let message;\n                let title;\n                const messageObs = translate.get('igo.geo.network.online.message');\n                const titleObs = translate.get('igo.geo.network.online.title');\n                messageObs.subscribe((message1) => {\n                    message = message1;\n                });\n                titleObs.subscribe((title1) => {\n                    title = title1;\n                });\n                this.messageService.info(message, title);\n                this.offlineButtonState.connection = true;\n                this.changeLayer();\n            }\n        });\n        this.networkService.currentState().subscribe((state) => {\n            this.networkState = state;\n            if (!this.offlineButtonStatus) {\n                this.changeLayer();\n            }\n        });\n        this.map.layers$.subscribe((layers) => {\n            this.changeLayer();\n        });\n    }\n    changeLayer() {\n        let sourceOptions;\n        const layerList = this.map.layers$.value;\n        layerList.forEach(layer => {\n            if (layer.options.source instanceof MVTDataSource) {\n                sourceOptions = layer.options.sourceOptions;\n                layer.ol.getSource().clear();\n            }\n            else if (layer.options.source instanceof XYZDataSource) {\n                sourceOptions = layer.options.sourceOptions;\n            }\n            else if (layer.options.source instanceof ClusterDataSource) {\n                sourceOptions = layer.options.sourceOptions;\n            }\n            else if (layer.options.source instanceof FeatureDataSource) {\n                sourceOptions = layer.options.sourceOptions;\n            }\n            else {\n                if (this.networkState.connection === false ||\n                    this.offlineButtonState.connection === false) {\n                    layer.ol.setMaxResolution(0);\n                    return;\n                }\n                else if (this.networkState.connection === true ||\n                    this.offlineButtonState.connection === true) {\n                    layer.ol.setMaxResolution(Infinity);\n                    return;\n                }\n            }\n            if (sourceOptions) {\n                if ((sourceOptions.pathOffline &&\n                    this.networkState.connection === false) ||\n                    (sourceOptions.pathOffline &&\n                        this.offlineButtonState.connection === false)) {\n                    if (sourceOptions.type === 'vector' ||\n                        sourceOptions.type === 'cluster') {\n                        return;\n                    }\n                    layer.ol.getSource().setUrl(sourceOptions.pathOffline);\n                }\n                else if ((sourceOptions.pathOffline &&\n                    this.networkState.connection === false) ||\n                    (sourceOptions.pathOffline &&\n                        this.offlineButtonState.connection === true)) {\n                    if (sourceOptions.type === 'vector' ||\n                        sourceOptions.type === 'cluster') {\n                        return;\n                    }\n                    layer.ol.getSource().setUrl(sourceOptions.url);\n                }\n                else {\n                    if (this.networkState.connection === false ||\n                        this.offlineButtonState.connection === false) {\n                        layer.ol.setMaxResolution(0);\n                    }\n                    else if (this.networkState.connection === true ||\n                        this.offlineButtonState.connection === true) {\n                        layer.ol.setMaxResolution(Infinity);\n                    }\n                }\n            }\n            else {\n                if (this.networkState.connection === false ||\n                    this.offlineButtonState.connection === false) {\n                    layer.ol.setMaxResolution(0);\n                }\n                else if (this.networkState.connection === true ||\n                    this.offlineButtonState.connection === true) {\n                    layer.ol.setMaxResolution(Infinity);\n                }\n            }\n        });\n    }\n}\nMapOfflineDirective.ɵfac = function MapOfflineDirective_Factory(t) { return new (t || MapOfflineDirective)(ɵɵdirectiveInject(MapBrowserComponent), ɵɵdirectiveInject(NetworkService), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(LanguageService)); };\nMapOfflineDirective.ɵdir = ɵɵdefineDirective({ type: MapOfflineDirective, selectors: [[\"\", \"igoMapOffline\", \"\"]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MapOfflineDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoMapOffline]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent }, { type: NetworkService }, { type: MessageService }, { type: LanguageService }]; }, null); })();\n\n/**\n * This directive return the pointer coordinate (on click or pointermove)\n * in [longitude, latitude], delayed by in input (pointerMoveDelay)\n * to avoid too many emitted values.\n */\nclass PointerPositionDirective {\n    constructor(component, mediaService) {\n        this.component = component;\n        this.mediaService = mediaService;\n        /**\n         * Delay before emitting an event\n         */\n        this.pointerPositionDelay = 1000;\n        /**\n         * Event emitted when the pointer move, delayed by pointerMoveDelay\n         */\n        this.pointerPositionCoord = new EventEmitter();\n    }\n    /**\n     * IGO map\n     * @internal\n     */\n    get map() {\n        return this.component.map;\n    }\n    get mapProjection() {\n        return this.component.map.projection;\n    }\n    /**\n     * Start listening to pointermove\n     * @internal\n     */\n    ngOnInit() {\n        this.listenToMapPointerMove();\n        this.listenToMapClick();\n    }\n    /**\n     * Stop listening to pointermove\n     * @internal\n     */\n    ngOnDestroy() {\n        this.unlistenToMapPointerMove();\n        this.unlistenToMapClick();\n    }\n    /**\n     * On map pointermove\n     */\n    listenToMapPointerMove() {\n        this.pointerMoveListener = this.map.ol.on('pointermove', (event) => this.onPointerEvent(event, this.pointerPositionDelay));\n    }\n    /**\n     * On map click\n     */\n    listenToMapClick() {\n        this.mapClickListener = this.map.ol.on('singleclick', (event) => this.onPointerEvent(event, 0));\n    }\n    /**\n     * Stop listening for map pointermove\n     */\n    unlistenToMapPointerMove() {\n        this.map.ol.un(this.pointerMoveListener.type, this.pointerMoveListener.listener);\n        this.pointerMoveListener = undefined;\n    }\n    /**\n     * Stop listening for map clicks\n     */\n    unlistenToMapClick() {\n        this.map.ol.un(this.mapClickListener.type, this.mapClickListener.listener);\n        this.mapClickListener = undefined;\n    }\n    /**\n     * emit delayed coordinate (longitude, latitude array) based on pointerMoveDelay or on click\n     * @param event OL map browser pointer event\n     */\n    onPointerEvent(event, delay) {\n        if (event.dragging || this.mediaService.isTouchScreen()) {\n            return;\n        }\n        if (typeof this.lastTimeoutRequest !== 'undefined') { // cancel timeout when the mouse moves\n            clearTimeout(this.lastTimeoutRequest);\n        }\n        const lonlat = transform(event.coordinate, this.mapProjection, 'EPSG:4326');\n        this.lastTimeoutRequest = setTimeout(() => {\n            this.pointerPositionCoord.emit(lonlat);\n        }, delay);\n    }\n}\nPointerPositionDirective.ɵfac = function PointerPositionDirective_Factory(t) { return new (t || PointerPositionDirective)(ɵɵdirectiveInject(MapBrowserComponent, 2), ɵɵdirectiveInject(MediaService)); };\nPointerPositionDirective.ɵdir = ɵɵdefineDirective({ type: PointerPositionDirective, selectors: [[\"\", \"igoPointerPosition\", \"\"]], inputs: { pointerPositionDelay: \"pointerPositionDelay\" }, outputs: { pointerPositionCoord: \"pointerPositionCoord\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(PointerPositionDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoPointerPosition]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent, decorators: [{\n                type: Self\n            }] }, { type: MediaService }]; }, { pointerPositionDelay: [{\n            type: Input\n        }], pointerPositionCoord: [{\n            type: Output\n        }] }); })();\n\n/**\n * This directive makes the mouse coordinate trigger a reverse search on available search sources.\n * The search results are placed into a label, on a cross icon, representing the mouse coordinate.\n * By default, no search sources. Config in config file must be defined.\n * the layer level.\n */\nclass HoverFeatureDirective {\n    constructor(component, mediaService, styleService) {\n        this.component = component;\n        this.mediaService = mediaService;\n        this.styleService = styleService;\n        this.pointerHoverFeatureStore = new EntityStore([]);\n        this.hoverFeatureId = 'hoverFeatureId';\n        /**\n         * The delay where the mouse must be motionless before trigger the reverse search\n         */\n        this.igoHoverFeatureDelay = 1000;\n        /**\n         * If the user has enabled or not the directive\n         */\n        this.igoHoverFeatureEnabled = false;\n    }\n    mouseout() {\n        clearTimeout(this.lastTimeoutRequest);\n        this.clearLayer();\n    }\n    /**\n     * IGO map\n     * @internal\n     */\n    get map() {\n        return this.component.map;\n    }\n    get mapProjection() {\n        return this.component.map.projection;\n    }\n    /**\n     * Start listening to pointermove and reverse search results.\n     * @internal\n     */\n    ngOnInit() {\n        this.listenToMapPointerMove();\n        this.subscribeToPointerStore();\n        this.listenToMapClick();\n        this.map.status$.pipe(take(1)).subscribe(() => {\n            this.store = new FeatureStore([], { map: this.map });\n            this.initStore();\n        });\n        // To handle context change without using the contextService.\n        this.layers$$ = this.map.layers$.subscribe((layers) => {\n            if (this.store && !layers.find(l => l.id === 'hoverFeatureId')) {\n                this.initStore();\n            }\n        });\n    }\n    /**\n     * Initialize the pointer position store\n     * @internal\n     */\n    initStore(layerSource) {\n        const store = this.store;\n        const layer = new VectorLayer({\n            id: 'hoverFeatureId',\n            title: 'hoverFeature',\n            zIndex: 900,\n            source: new FeatureDataSource(),\n            showInLayerList: false,\n            exportable: false,\n            browsable: false,\n            style: hoverFeatureMarker\n        });\n        tryBindStoreLayer(store, layer);\n    }\n    /**\n     * Stop listening to pointermove and reverse search results.\n     * @internal\n     */\n    ngOnDestroy() {\n        this.unlistenToMapPointerMove();\n        this.unsubscribeToPointerStore();\n        this.unlistenToMapSingleClick();\n        this.layers$$.unsubscribe();\n    }\n    /**\n     * Subscribe to pointermove result store\n     * @internal\n     */\n    subscribeToPointerStore() {\n        this.store$$ = this.pointerHoverFeatureStore.entities$.subscribe(resultsUnderPointerPosition => {\n            this.entitiesToPointerOverlay(resultsUnderPointerPosition);\n        });\n    }\n    /**\n     * convert store entities to a pointer position overlay with label summary on.\n     * @param event OL map browser pointer event\n     */\n    entitiesToPointerOverlay(resultsUnderPointerPosition) {\n        this.addFeatureOverlay(resultsUnderPointerPosition);\n    }\n    /**\n     * On map pointermove\n     */\n    listenToMapPointerMove() {\n        this.pointerMoveListener = this.map.ol.on('pointermove', (event) => this.onMapEvent(event));\n    }\n    /**\n     * On map singleclick\n     */\n    listenToMapClick() {\n        this.singleClickMapListener = this.map.ol.on('singleclick', (event) => this.onMapSingleClickEvent(event));\n    }\n    /**\n     * Unsubscribe to pointer store.\n     * @internal\n     */\n    unsubscribeToPointerStore() {\n        this.store$$.unsubscribe();\n    }\n    /**\n     * Stop listening for map pointermove\n     * @internal\n     */\n    unlistenToMapPointerMove() {\n        this.map.ol.un(this.pointerMoveListener.type, this.pointerMoveListener.listener);\n        this.pointerMoveListener = undefined;\n    }\n    /**\n     * Stop listening for map singleclick\n     * @internal\n     */\n    unlistenToMapSingleClick() {\n        this.map.ol.un(this.singleClickMapListener.type, this.singleClickMapListener.listener);\n        this.singleClickMapListener = undefined;\n    }\n    /**\n     * Trigger clear layer on singleclick.\n     * @param event OL map browser singleclick event\n     */\n    onMapSingleClickEvent(event) {\n        this.clearLayer();\n    }\n    /**\n     * Trigger hover when the mouse is motionless during the defined delay (pointerMoveDelay).\n     * @param event OL map browser pointer event\n     */\n    onMapEvent(event) {\n        if (event.dragging || !this.igoHoverFeatureEnabled ||\n            this.mediaService.isTouchScreen()) {\n            this.clearLayer();\n            return;\n        }\n        if (typeof this.lastTimeoutRequest !== 'undefined') { // cancel timeout when the mouse moves\n            clearTimeout(this.lastTimeoutRequest);\n        }\n        const pixel = this.map.ol.getPixelFromCoordinate(event.coordinate);\n        this.lastTimeoutRequest = setTimeout(() => {\n            this.map.ol.forEachFeatureAtPixel(pixel, function (f, l) {\n                if (f.get('hoverSummary') === undefined) {\n                    const igoLayer = this.map.getLayerByOlUId(l.ol_uid);\n                    this.setLayerStyleFromOptions(igoLayer, f);\n                    this.pointerHoverFeatureStore.load([{ layer: igoLayer, feature: f }]);\n                }\n                return true;\n            }.bind(this));\n        }, this.igoHoverFeatureDelay);\n    }\n    /**\n     * Add a feature to the pointer store\n     * @param text string\n     */\n    addFeatureOverlay(results) {\n        if (results.length > 0) {\n            results = results[0];\n            this.clearLayer();\n            let geom = this.getGeometry(results.feature);\n            // si vector tile, merge avec les polygones voisins possiblement meme entité\n            if (results.layer.ol instanceof VectorTile) {\n                geom = [geom];\n                const neighbourCollection = this.getSameFeatureNeighbour(results.feature, results.layer);\n                neighbourCollection.forEach((n) => {\n                    geom.push(n.getGeometry());\n                });\n            }\n            const feature = new olFeature({\n                geometry: geom instanceof Array ? new GeometryCollection(geom) : geom,\n                meta: { id: this.hoverFeatureId },\n                hoverSummary: this.getHoverSummary(results.feature.getProperties())\n            });\n            this.store.setLayerOlFeatures([feature], FeatureMotion.None);\n        }\n    }\n    setLayerStyleFromOptions(igoLayer, feat) {\n        var _a, _b;\n        if ((_b = (_a = igoLayer.options) === null || _a === void 0 ? void 0 : _a.styleByAttribute) === null || _b === void 0 ? void 0 : _b.hoverStyle) {\n            this.store.layer.ol.setStyle(this.styleService.createStyleByAttribute(feat, igoLayer.options.styleByAttribute.hoverStyle));\n        }\n        else {\n            this.store.layer.ol.setStyle(hoverFeatureMarker);\n        }\n    }\n    getHoverSummary(properties) {\n        let summary = '';\n        for (const [key, value] of Object.entries(properties)) {\n            summary += `${key}: ${value}` + '\\n';\n        }\n        return summary;\n    }\n    getGeometry(feature) {\n        let geom;\n        if (!feature.getOrientedFlatCoordinates) {\n            geom = feature.getGeometry();\n        }\n        else {\n            const coords = feature.getOrientedFlatCoordinates();\n            const flatCoords = [];\n            coords.forEach((c, idx) => {\n                if (idx % 2 === 0) {\n                    flatCoords.push([parseFloat(coords[idx]), parseFloat(coords[idx + 1])]);\n                }\n            });\n            // TODO: test MultiX\n            switch (feature.getType()) {\n                case 'Point':\n                    geom = new Point([flatCoords]);\n                    break;\n                case 'Polygon':\n                    geom = new Polygon([flatCoords]);\n                    break;\n                case 'LineString':\n                    geom = new LineString([flatCoords]);\n                    break;\n            }\n        }\n        return geom;\n    }\n    getSameFeatureNeighbour(feature, layer, neighbourCollection = []) {\n        if (neighbourCollection.length === 0) {\n            neighbourCollection.push(new olFeature({\n                geometry: this.getGeometry(feature),\n                meta: { id: this.hoverFeatureId }\n            }));\n        }\n        const toDoNeighbour = [];\n        const neighbourFeatures = layer.ol.getSource().getFeaturesInExtent(feature.getGeometry().getExtent());\n        neighbourFeatures.forEach(f => {\n            const checkIf = neighbourCollection.find(x => {\n                return x === f;\n            });\n            if (f.getId() === feature.getId() && !checkIf) {\n                toDoNeighbour.push(f);\n                neighbourCollection.push(f);\n            }\n        });\n        return neighbourCollection.map(f => {\n            return new olFeature({\n                geometry: this.getGeometry(f),\n                meta: { id: this.hoverFeatureId }\n            });\n        });\n    }\n    /**\n     * Clear the pointer store features\n     */\n    clearLayer() {\n        if (this.store) {\n            this.store.clearLayer();\n        }\n    }\n}\nHoverFeatureDirective.ɵfac = function HoverFeatureDirective_Factory(t) { return new (t || HoverFeatureDirective)(ɵɵdirectiveInject(MapBrowserComponent, 2), ɵɵdirectiveInject(MediaService), ɵɵdirectiveInject(StyleService)); };\nHoverFeatureDirective.ɵdir = ɵɵdefineDirective({ type: HoverFeatureDirective, selectors: [[\"\", \"igoHoverFeature\", \"\"]], hostBindings: function HoverFeatureDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"mouseout\", function HoverFeatureDirective_mouseout_HostBindingHandler() { return ctx.mouseout(); });\n    } }, inputs: { igoHoverFeatureDelay: \"igoHoverFeatureDelay\", igoHoverFeatureEnabled: \"igoHoverFeatureEnabled\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(HoverFeatureDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoHoverFeature]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent, decorators: [{\n                type: Self\n            }] }, { type: MediaService }, { type: StyleService }]; }, { igoHoverFeatureDelay: [{\n            type: Input\n        }], igoHoverFeatureEnabled: [{\n            type: Input\n        }], mouseout: [{\n            type: HostListener,\n            args: ['mouseout']\n        }] }); })();\n/**\n * Create a default style for the pointer position and it's label summary.\n * @param feature OlFeature\n * @returns OL style function\n */\nfunction hoverFeatureMarker(feature, resolution) {\n    const olStyleText = new Style({\n        text: new Text({\n            text: feature.get('hoverSummary'),\n            textAlign: 'left',\n            textBaseline: 'bottom',\n            font: '12px Calibri,sans-serif',\n            fill: new Fill({ color: '#000' }),\n            backgroundFill: new Fill({ color: 'rgba(255, 255, 255, 0.5)' }),\n            backgroundStroke: new Stroke({ color: 'rgba(200, 200, 200, 0.75)', width: 2 }),\n            stroke: new Stroke({ color: '#fff', width: 3 }),\n            overflow: true,\n            offsetX: 10,\n            offsetY: -10,\n            padding: [2.5, 2.5, 2.5, 2.5]\n        })\n    });\n    const olStyle = [olStyleText];\n    switch (feature.getGeometry().getType()) {\n        case 'Point':\n            olStyle.push(new Style({\n                image: new CircleStyle({\n                    radius: 10,\n                    stroke: new Stroke({\n                        color: 'blue',\n                        width: 3\n                    })\n                })\n            }));\n            break;\n        default:\n            olStyle.push(new Style({\n                stroke: new Stroke({\n                    color: 'white',\n                    width: 5\n                })\n            }));\n            olStyle.push(new Style({\n                stroke: new Stroke({\n                    color: 'blue',\n                    width: 3\n                })\n            }));\n    }\n    return olStyle;\n}\n\nconst _c0$1 = function (a0) { return { zoom: a0 }; };\nclass ZoomButtonComponent {\n    constructor() { }\n    get zoom() { return this.map.viewController.getZoom(); }\n    get minZoom() { return this.map.viewController.olView.getMinZoom() || 1; }\n    get maxZoom() { return this.map.viewController.olView.getMaxZoom(); }\n}\nZoomButtonComponent.ɵfac = function ZoomButtonComponent_Factory(t) { return new (t || ZoomButtonComponent)(); };\nZoomButtonComponent.ɵcmp = ɵɵdefineComponent({ type: ZoomButtonComponent, selectors: [[\"igo-zoom-button\"]], inputs: { map: \"map\", color: \"color\" }, decls: 7, vars: 16, consts: [[1, \"igo-zoom-button-container\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"left\", 3, \"matTooltip\", \"color\", \"disabled\", \"click\"], [\"svgIcon\", \"plus\"], [\"svgIcon\", \"minus\"]], template: function ZoomButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵelementStart(1, \"button\", 1);\n        ɵɵlistener(\"click\", function ZoomButtonComponent_Template_button_click_1_listener() { return ctx.map.viewController.zoomIn(); });\n        ɵɵpipe(2, \"translate\");\n        ɵɵelement(3, \"mat-icon\", 2);\n        ɵɵelementEnd();\n        ɵɵelementStart(4, \"button\", 1);\n        ɵɵlistener(\"click\", function ZoomButtonComponent_Template_button_click_4_listener() { return ctx.map.viewController.zoomOut(); });\n        ɵɵpipe(5, \"translate\");\n        ɵɵelement(6, \"mat-icon\", 3);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"matTooltip\", ɵɵpipeBind2(2, 6, \"igo.geo.mapButtons.zoomIn\", ɵɵpureFunction1(12, _c0$1, ctx.zoom + 1)))(\"color\", ctx.color)(\"disabled\", ctx.zoom >= ctx.maxZoom);\n        ɵɵadvance(3);\n        ɵɵproperty(\"matTooltip\", ɵɵpipeBind2(5, 9, \"igo.geo.mapButtons.zoomOut\", ɵɵpureFunction1(14, _c0$1, ctx.zoom - 1)))(\"color\", ctx.color)(\"disabled\", ctx.zoom <= ctx.minZoom);\n    } }, directives: [MatButton, MatTooltip, MatIcon], pipes: [TranslatePipe], styles: [\".igo-zoom-button-container[_ngcontent-%COMP%]{width:40px}.igo-zoom-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff}.igo-zoom-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#efefef}.igo-zoom-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-bottom:2px}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ZoomButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-zoom-button',\n                templateUrl: './zoom-button.component.html',\n                styleUrls: ['./zoom-button.component.scss']\n            }]\n    }], function () { return []; }, { map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\nclass GeolocateButtonComponent {\n    constructor() { }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n}\nGeolocateButtonComponent.ɵfac = function GeolocateButtonComponent_Factory(t) { return new (t || GeolocateButtonComponent)(); };\nGeolocateButtonComponent.ɵcmp = ɵɵdefineComponent({ type: GeolocateButtonComponent, selectors: [[\"igo-geolocate-button\"]], inputs: { map: \"map\", color: \"color\" }, decls: 4, vars: 4, consts: [[1, \"igo-geolocate-button-container\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"left\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"crosshairs-gps\"]], template: function GeolocateButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵelementStart(1, \"button\", 1);\n        ɵɵlistener(\"click\", function GeolocateButtonComponent_Template_button_click_1_listener() { return ctx.map.geolocate(); });\n        ɵɵpipe(2, \"translate\");\n        ɵɵelement(3, \"mat-icon\", 2);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(2, 2, \"igo.geo.mapButtons.geolocate\"))(\"color\", ctx.color);\n    } }, directives: [MatButton, MatTooltip, MatIcon], pipes: [TranslatePipe], styles: [\".igo-geolocate-button-container[_ngcontent-%COMP%]{background-color:#fff;width:40px}.igo-geolocate-button-container[_ngcontent-%COMP%]:hover{background-color:#efefef}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(GeolocateButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-geolocate-button',\n                templateUrl: './geolocate-button.component.html',\n                styleUrls: ['./geolocate-button.component.scss']\n            }]\n    }], function () { return []; }, { map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\nconst _c0$2 = function (a0) { return [a0]; };\nfunction OfflineButtonComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 1);\n    ɵɵelementStart(1, \"div\");\n    ɵɵelementStart(2, \"button\", 2);\n    ɵɵlistener(\"click\", function OfflineButtonComponent_div_0_Template_button_click_2_listener() { ɵɵrestoreView(_r2); const ctx_r1 = ɵɵnextContext(); return ctx_r1.onToggle(); })(\"click\", function OfflineButtonComponent_div_0_Template_button_click_2_listener() { ɵɵrestoreView(_r2); const ctx_r3 = ɵɵnextContext(); return ctx_r3.map.onOfflineToggle(ctx_r3.check); });\n    ɵɵpipe(3, \"translate\");\n    ɵɵpipe(4, \"translate\");\n    ɵɵelement(5, \"mat-icon\", 3);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵproperty(\"matTooltip\", ctx_r0.checked ? ɵɵpipeBind1(3, 3, \"igo.geo.mapButtons.online\") : ɵɵpipeBind1(4, 5, \"igo.geo.mapButtons.offline\"))(\"ngClass\", ɵɵpureFunction1(7, _c0$2, ctx_r0.btnStyle))(\"color\", ctx_r0.checked ? ctx_r0.color : ɵɵpureFunction1(9, _c0$2, ctx_r0.colorOff));\n} }\nclass OfflineButtonComponent {\n    constructor(config) {\n        this.config = config;\n        this.btnStyle = 'baseStyle';\n        this.colorOff = 'rgb(255,255,255)';\n        this.change = new EventEmitter();\n        this.check = false;\n        this.visible = false;\n        this.visible = this.config.getConfig('offlineButton') ? true : false;\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    get checked() {\n        return this.check;\n    }\n    onToggle() {\n        this.check = !this.check;\n        if (this.check) {\n            this.btnStyle = 'toggleStyle';\n        }\n        else {\n            this.btnStyle = 'baseStyle';\n        }\n    }\n}\nOfflineButtonComponent.ɵfac = function OfflineButtonComponent_Factory(t) { return new (t || OfflineButtonComponent)(ɵɵdirectiveInject(ConfigService)); };\nOfflineButtonComponent.ɵcmp = ɵɵdefineComponent({ type: OfflineButtonComponent, selectors: [[\"igo-offline-button\"]], inputs: { map: \"map\", color: \"color\", check: \"check\" }, outputs: { change: \"change\" }, decls: 1, vars: 1, consts: [[\"class\", \"igo-user-button-container\", 4, \"ngIf\"], [1, \"igo-user-button-container\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"left\", 3, \"matTooltip\", \"ngClass\", \"color\", \"click\"], [\"svgIcon\", \"wifi-strength-off\"]], template: function OfflineButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, OfflineButtonComponent_div_0_Template, 6, 11, \"div\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.visible);\n    } }, directives: [NgIf, MatButton, MatTooltip, NgClass, MatIcon], pipes: [TranslatePipe], styles: [\".baseStyle[_ngcontent-%COMP%]{background-color:#fff;width:40px}.baseStyle[_ngcontent-%COMP%]:hover{background-color:#efefef}.toggleStyle[_ngcontent-%COMP%]{background-color:#b9b9b9;width:40px}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OfflineButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-offline-button',\n                templateUrl: './offline-button.component.html',\n                styleUrls: ['./offline-button.component.scss']\n            }]\n    }], function () { return [{ type: ConfigService }]; }, { change: [{\n            type: Output\n        }], map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }], check: [{\n            type: Input\n        }] }); })();\n\nfunction baseLayersSwitcherSlideInOut() {\n    return trigger('baseLayerSwitcherState', [\n        state('collapseIcon', style({\n            height: '40px',\n            width: '40px',\n            overflow: 'hidden'\n        })),\n        state('collapseMap', style({\n            height: '85px',\n            overflow: 'hidden'\n        })),\n        state('expand', style({\n            overflow: 'hidden'\n        })),\n        transition('collapse => expand', animate('200ms')),\n        transition('expand => collapse', animate('200ms'))\n    ]);\n}\n\nfunction BaseLayersSwitcherComponent_div_0_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 6);\n    ɵɵelementStart(1, \"button\", 7);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelement(3, \"mat-icon\", 8);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(2, 1, \"igo.geo.mapButtons.baselayerSwitcher\"));\n} }\nfunction BaseLayersSwitcherComponent_div_0_igo_mini_basemap_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-mini-basemap\", 9);\n    ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    const baseLayer_r3 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    const ctx_r2 = ɵɵnextContext(2);\n    ɵɵproperty(\"map\", ctx_r2.map)(\"baseLayer\", baseLayer_r3)(\"title\", ctx_r2.baseLayers.length > 2 && !ctx_r2.expand ? ɵɵpipeBind1(1, 5, \"igo.geo.baselayersSwitcher.title\") : baseLayer_r3.title)(\"display\", ctx_r2.expand || i_r4 === 0 && !ctx_r2.useStaticIcon)(\"disabled\", !ctx_r2.expand && ctx_r2.baseLayers.length > 1);\n} }\nconst _c0$3 = function (a0) { return { \"container-expand\": a0 }; };\nfunction BaseLayersSwitcherComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 1);\n    ɵɵlistener(\"@baseLayerSwitcherState.start\", function BaseLayersSwitcherComponent_div_0_Template_div_animation_baseLayerSwitcherState_start_0_listener() { ɵɵrestoreView(_r6); const ctx_r5 = ɵɵnextContext(); return ctx_r5.showButton = false; })(\"@baseLayerSwitcherState.done\", function BaseLayersSwitcherComponent_div_0_Template_div_animation_baseLayerSwitcherState_done_0_listener() { ɵɵrestoreView(_r6); const ctx_r7 = ɵɵnextContext(); return ctx_r7.showButton = true; })(\"click\", function BaseLayersSwitcherComponent_div_0_Template_div_click_0_listener() { ɵɵrestoreView(_r6); const ctx_r8 = ɵɵnextContext(); return ctx_r8.collapseOrExpand(); });\n    ɵɵtemplate(1, BaseLayersSwitcherComponent_div_0_div_1_Template, 4, 3, \"div\", 2);\n    ɵɵtemplate(2, BaseLayersSwitcherComponent_div_0_igo_mini_basemap_2_Template, 2, 7, \"igo-mini-basemap\", 3);\n    ɵɵelementStart(3, \"div\", 4);\n    ɵɵelement(4, \"mat-icon\", 5);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ɵɵpureFunction1(4, _c0$3, ctx_r0.expand))(\"@baseLayerSwitcherState\", ctx_r0.expand ? \"expand\" : ctx_r0.useStaticIcon ? \"collapseIcon\" : \"collapseMap\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.useStaticIcon && !ctx_r0.expand && ctx_r0.showButton);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r0.baseLayers);\n} }\nclass BaseLayersSwitcherComponent {\n    constructor(mediaService) {\n        this.mediaService = mediaService;\n        this._baseLayers = [];\n        this.expand = false;\n        this.showButton = true;\n        const media = this.mediaService.media$.value;\n        if (media === Media.Mobile && this.useStaticIcon === undefined) {\n            this.useStaticIcon = true;\n        }\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get useStaticIcon() {\n        return this._useStaticIcon;\n    }\n    set useStaticIcon(value) {\n        this._useStaticIcon = value;\n    }\n    ngAfterViewInit() {\n        this.layers$$ = this.map.layers$.subscribe(arrayLayers => {\n            this._baseLayers = arrayLayers.filter(l => l.baseLayer);\n        });\n    }\n    ngOnDestroy() {\n        this.layers$$.unsubscribe();\n    }\n    collapseOrExpand() {\n        if (this.baseLayers.length > 1 || this.useStaticIcon) {\n            this.expand = !this.expand;\n        }\n        else {\n            this.expand = false;\n        }\n    }\n    get baseLayers() {\n        const mapResolution = this.map.viewController.getResolution();\n        const mapZoom = this.map.viewController.getZoom();\n        const bl = this._baseLayers.filter(l => {\n            return ((!l.options.maxResolution ||\n                mapResolution <= l.options.maxResolution) &&\n                (!l.options.minResolution || mapResolution >= l.options.minResolution) &&\n                (!l.options.source.options.maxZoom || mapZoom <= l.options.source.options.maxZoom) &&\n                (!l.options.source.options.minZoom || mapZoom >= l.options.source.options.minZoom));\n        });\n        const blHidden = bl.filter(l => !l.visible);\n        return blHidden.length + 1 === bl.length ? blHidden : bl;\n    }\n}\nBaseLayersSwitcherComponent.ɵfac = function BaseLayersSwitcherComponent_Factory(t) { return new (t || BaseLayersSwitcherComponent)(ɵɵdirectiveInject(MediaService)); };\nBaseLayersSwitcherComponent.ɵcmp = ɵɵdefineComponent({ type: BaseLayersSwitcherComponent, selectors: [[\"igo-baselayers-switcher\"]], inputs: { map: \"map\", useStaticIcon: \"useStaticIcon\" }, decls: 1, vars: 1, consts: [[\"class\", \"igo-baselayers-switcher-container\", 3, \"ngClass\", \"click\", 4, \"ngIf\"], [1, \"igo-baselayers-switcher-container\", 3, \"ngClass\", \"click\"], [\"class\", \"igo-baselayers-switcher-button-container\", 4, \"ngIf\"], [\"class\", \"mat-typography\", 3, \"map\", \"baseLayer\", \"title\", \"display\", \"disabled\", 4, \"ngFor\", \"ngForOf\"], [1, \"more-baselayers\"], [\"color\", \"primary\", \"svgIcon\", \"menu-down\", 1, \"material-icons\", \"mat-icon\", \"mat-list-avatar\"], [1, \"igo-baselayers-switcher-button-container\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"right\", \"color\", \"primary\", 3, \"matTooltip\"], [\"svgIcon\", \"image-multiple\"], [1, \"mat-typography\", 3, \"map\", \"baseLayer\", \"title\", \"display\", \"disabled\"]], template: function BaseLayersSwitcherComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, BaseLayersSwitcherComponent_div_0_Template, 5, 6, \"div\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.baseLayers.length > 0);\n    } }, styles: [\".igo-baselayers-switcher-container[_ngcontent-%COMP%]{height:auto;position:relative}.container-expand[_ngcontent-%COMP%]{border-width:0;overflow:hidden}.more-baselayers[_ngcontent-%COMP%]{background-color:#fff;cursor:pointer;height:20px;text-align:center;width:80px}.more-baselayers[_ngcontent-%COMP%]:hover{background-color:#efefef}.igo-baselayers-switcher-button-container[_ngcontent-%COMP%]{background-color:#fff;width:40px}.igo-baselayers-switcher-button-container[_ngcontent-%COMP%]:hover{background-color:#efefef}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}\"], data: { animation: [baseLayersSwitcherSlideInOut()] } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(BaseLayersSwitcherComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-baselayers-switcher',\n                templateUrl: './baselayers-switcher.component.html',\n                styleUrls: ['./baselayers-switcher.component.scss'],\n                animations: [baseLayersSwitcherSlideInOut()]\n            }]\n    }], function () { return [{ type: MediaService }]; }, { map: [{\n            type: Input\n        }], useStaticIcon: [{\n            type: Input\n        }] }); })();\n\nconst LAYER = 'Layer';\n\nfunction MiniBaseMapComponent_div_1_div_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 5);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ctx_r1.title, \" \");\n} }\nfunction MiniBaseMapComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 2);\n    ɵɵlistener(\"click\", function MiniBaseMapComponent_div_1_Template_div_click_0_listener() { ɵɵrestoreView(_r3); const ctx_r2 = ɵɵnextContext(); return ctx_r2.changeBaseLayer(ctx_r2.baseLayer); });\n    ɵɵelement(1, \"igo-map-browser\", 3);\n    ɵɵtemplate(2, MiniBaseMapComponent_div_1_div_2_Template, 2, 1, \"div\", 4);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"map\", ctx_r0.basemap);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.title);\n} }\nclass MiniBaseMapComponent {\n    constructor(layerService, appRef) {\n        this.layerService = layerService;\n        this.appRef = appRef;\n        this.basemap = new IgoMap({\n            controls: {},\n            interactions: false\n        });\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n        this.handleMoveEnd();\n    }\n    get baseLayer() {\n        return this._baseLayer;\n    }\n    set baseLayer(value) {\n        this._baseLayer = value;\n        this.handleBaseLayerChanged(value);\n    }\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = value;\n    }\n    get display() {\n        return this._display;\n    }\n    set display(value) {\n        this._display = value;\n    }\n    ngAfterViewInit() {\n        this.map.ol.on('moveend', () => this.handleMoveEnd());\n        this.handleMoveEnd();\n    }\n    ngOnDestroy() {\n        this.map.ol.un('moveend', () => this.handleMoveEnd());\n    }\n    changeBaseLayer(baseLayer) {\n        if (this.disabled) {\n            return;\n        }\n        this.map.changeBaseLayer(baseLayer);\n        this.appRef.tick();\n    }\n    handleMoveEnd() {\n        this.basemap.ol.setView(this.map.ol.getView());\n    }\n    handleBaseLayerChanged(baselayer) {\n        this.basemap.removeAllLayers();\n        const options = Object.assign(Object.create(baselayer.options), baselayer.options, {\n            visible: true,\n            baseLayer: false\n        });\n        const layer = this.layerService.createLayer(options);\n        this.basemap.addLayer(layer);\n        this.handleLinkedBaseLayer(layer);\n    }\n    handleLinkedBaseLayer(baselayer) {\n        const linkedLayers = baselayer.options.linkedLayers;\n        if (!linkedLayers) {\n            return;\n        }\n        const currentLinkedId = linkedLayers.linkId;\n        const currentLinks = linkedLayers.links;\n        const isParentLayer = currentLinks ? true : false;\n        if (isParentLayer && currentLinkedId === baselayer.options.linkedLayers.linkId) {\n            // search for child layers\n            currentLinks.map(link => {\n                link.linkedIds.map(linkedId => {\n                    const layerToApply = this.map.layers.find(l => { var _a; return ((_a = l.options.linkedLayers) === null || _a === void 0 ? void 0 : _a.linkId) === linkedId; });\n                    if (layerToApply) {\n                        const linkedLayerOptions = Object.assign(Object.create(layerToApply.options), layerToApply.options, {\n                            zIndex: 9000,\n                            visible: true,\n                            baseLayer: false,\n                        });\n                        this.basemap.addLayer(this.layerService.createLayer(linkedLayerOptions));\n                    }\n                });\n            });\n        }\n    }\n}\nMiniBaseMapComponent.ɵfac = function MiniBaseMapComponent_Factory(t) { return new (t || MiniBaseMapComponent)(ɵɵdirectiveInject(LayerService), ɵɵdirectiveInject(ApplicationRef)); };\nMiniBaseMapComponent.ɵcmp = ɵɵdefineComponent({ type: MiniBaseMapComponent, selectors: [[\"igo-mini-basemap\"]], inputs: { map: \"map\", baseLayer: \"baseLayer\", disabled: \"disabled\", display: \"display\", title: \"title\" }, decls: 2, vars: 1, consts: [[1, \"igo-mini-basemap-container\"], [3, \"click\", 4, \"ngIf\"], [3, \"click\"], [3, \"map\"], [\"class\", \"igo-mini-basemap-title\", 4, \"ngIf\"], [1, \"igo-mini-basemap-title\"]], template: function MiniBaseMapComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵtemplate(1, MiniBaseMapComponent_div_1_Template, 3, 2, \"div\", 1);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.display);\n    } }, styles: [\".igo-mini-basemap-container[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.01);border:2px solid #fff;box-shadow:0 1px 4px rgba(0,0,0,.3);cursor:pointer;height:80px;margin-top:5px;width:80px}.igo-mini-basemap-container[_ngcontent-%COMP%]:hover   .igo-mini-basemap-title[_ngcontent-%COMP%]{color:#000;text-shadow:0 0 5px #fff}.igo-mini-basemap-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%;width:100%}.igo-mini-basemap-title[_ngcontent-%COMP%]{align-items:flex-end;color:#fff;display:flex;height:76px;justify-content:center;position:relative;text-align:center;text-shadow:0 0 5px #000;top:-76px;vertical-align:bottom;white-space:normal;width:76px}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MiniBaseMapComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-mini-basemap',\n                templateUrl: './mini-basemap.component.html',\n                styleUrls: ['./mini-basemap.component.scss']\n            }]\n    }], function () { return [{ type: LayerService }, { type: ApplicationRef }]; }, { map: [{\n            type: Input\n        }], baseLayer: [{\n            type: Input\n        }], disabled: [{\n            type: Input\n        }], display: [{\n            type: Input\n        }], title: [{\n            type: Input\n        }] }); })();\n\nfunction RotationButtonComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 1);\n    ɵɵpipe(1, \"translate\");\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementStart(3, \"button\", 2);\n    ɵɵlistener(\"click\", function RotationButtonComponent_div_0_Template_button_click_3_listener() { ɵɵrestoreView(_r3); const ctx_r2 = ɵɵnextContext(); return ctx_r2.map.viewController.resetRotation(); });\n    ɵɵelement(4, \"mat-icon\", 3);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ctx_r0.rotated ? ɵɵpipeBind1(1, 4, \"igo.geo.mapButtons.resetRotation\") : ɵɵpipeBind1(2, 6, \"igo.geo.mapButtons.tipRotation\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"color\", ctx_r0.color)(\"disabled\", !ctx_r0.rotated);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngStyle\", ctx_r0.rotationStyle(ctx_r0.map.viewController.getRotation()));\n} }\nfunction RotationButtonComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 1);\n    ɵɵpipe(1, \"translate\");\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementStart(3, \"button\", 2);\n    ɵɵlistener(\"click\", function RotationButtonComponent_div_1_Template_button_click_3_listener() { ɵɵrestoreView(_r5); const ctx_r4 = ɵɵnextContext(); return ctx_r4.map.viewController.resetRotation(); });\n    ɵɵelement(4, \"mat-icon\", 3);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ctx_r1.rotated ? ɵɵpipeBind1(1, 4, \"igo.geo.mapButtons.resetRotation\") : ɵɵpipeBind1(2, 6, \"igo.geo.mapButtons.tipRotation\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"color\", ctx_r1.color)(\"disabled\", !ctx_r1.rotated);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngStyle\", ctx_r1.rotationStyle(ctx_r1.map.viewController.getRotation()));\n} }\nclass RotationButtonComponent {\n    constructor() { }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get showIfNoRotation() {\n        return this._showIfNoRotation;\n    }\n    set showIfNoRotation(value) {\n        this._showIfNoRotation = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    get rotated() {\n        return this.map.viewController.getRotation() !== 0;\n    }\n    rotationStyle(radians) {\n        const rotation = 'rotate(' + radians + 'rad)';\n        return {\n            transform: rotation\n        };\n    }\n}\nRotationButtonComponent.ɵfac = function RotationButtonComponent_Factory(t) { return new (t || RotationButtonComponent)(); };\nRotationButtonComponent.ɵcmp = ɵɵdefineComponent({ type: RotationButtonComponent, selectors: [[\"igo-rotation-button\"]], inputs: { map: \"map\", showIfNoRotation: \"showIfNoRotation\", color: \"color\" }, decls: 2, vars: 2, consts: [[\"class\", \"igo-rotation-button-container\", \"matTooltipPosition\", \"left\", 3, \"matTooltip\", 4, \"ngIf\"], [\"matTooltipPosition\", \"left\", 1, \"igo-rotation-button-container\", 3, \"matTooltip\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"left\", 3, \"color\", \"disabled\", \"click\"], [\"svgIcon\", \"navigation\", 3, \"ngStyle\"]], template: function RotationButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, RotationButtonComponent_div_0_Template, 5, 8, \"div\", 0);\n        ɵɵtemplate(1, RotationButtonComponent_div_1_Template, 5, 8, \"div\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.rotated && !ctx.showIfNoRotation);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.showIfNoRotation);\n    } }, directives: [NgIf, MatTooltip, MatButton, MatIcon, NgStyle], pipes: [TranslatePipe], styles: [\".igo-rotation-button-container[_ngcontent-%COMP%]{background-color:#fff;width:40px}.igo-rotation-button-container[_ngcontent-%COMP%]:hover{background-color:#efefef}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     button .mat-button-ripple-round:disabled, button[_ngcontent-%COMP%]:disabled{display:none}}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(RotationButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-rotation-button',\n                templateUrl: './rotation-button.component.html',\n                styleUrls: ['./rotation-button.component.scss']\n            }]\n    }], function () { return []; }, { map: [{\n            type: Input\n        }], showIfNoRotation: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\nvar CatalogItemType;\n(function (CatalogItemType) {\n    CatalogItemType[\"Layer\"] = \"layer\";\n    CatalogItemType[\"Group\"] = \"group\";\n})(CatalogItemType || (CatalogItemType = {}));\nvar TypeCatalog;\n(function (TypeCatalog) {\n    TypeCatalog[TypeCatalog[\"wms\"] = 0] = \"wms\";\n    TypeCatalog[TypeCatalog[\"wmts\"] = 1] = \"wmts\";\n    TypeCatalog[TypeCatalog[\"baselayers\"] = 2] = \"baselayers\";\n    TypeCatalog[TypeCatalog[\"arcgisrest\"] = 3] = \"arcgisrest\";\n    TypeCatalog[TypeCatalog[\"tilearcgisrest\"] = 4] = \"tilearcgisrest\";\n    TypeCatalog[TypeCatalog[\"imagearcgisrest\"] = 5] = \"imagearcgisrest\";\n    TypeCatalog[TypeCatalog[\"composite\"] = 6] = \"composite\";\n})(TypeCatalog || (TypeCatalog = {}));\n\nclass Catalog {\n    constructor(options, service) {\n        Object.assign(this, options);\n        this.catalogService = service;\n    }\n}\nclass WMSCatalog extends Catalog {\n    constructor(options, service) {\n        super(options, service);\n        const sType = TypeCatalog[TypeCatalog.wms];\n        this.type = TypeCatalog[sType];\n    }\n    collectCatalogItems() {\n        return this.catalogService.loadCatalogWMSLayerItems(this);\n    }\n}\nclass WMTSCatalog extends Catalog {\n    constructor(options, service) {\n        super(options, service);\n        const sType = TypeCatalog[TypeCatalog.wmts];\n        this.type = TypeCatalog[sType];\n    }\n    collectCatalogItems() {\n        return this.catalogService.loadCatalogWMTSLayerItems(this);\n    }\n}\nclass BaselayersCatalog extends Catalog {\n    constructor(options, service) {\n        super(options, service);\n        const sType = TypeCatalog[TypeCatalog.baselayers];\n        this.type = TypeCatalog[sType];\n    }\n    collectCatalogItems() {\n        return this.catalogService.loadCatalogBaseLayerItems(this);\n    }\n}\nclass ArcGISRestCatalog extends Catalog {\n    constructor(options, service) {\n        super(options, service);\n        const sType = TypeCatalog[TypeCatalog.arcgisrest];\n        this.type = TypeCatalog[sType];\n    }\n    collectCatalogItems() {\n        return this.catalogService.loadCatalogArcGISRestItems(this);\n    }\n}\nclass TileOrImageArcGISRestCatalog extends Catalog {\n    constructor(options, service, typeCatalog) {\n        super(options, service);\n        this.type = TypeCatalog[TypeCatalog[typeCatalog]];\n    }\n    collectCatalogItems() {\n        return this.catalogService.loadCatalogArcGISRestItems(this);\n    }\n}\nclass CompositeCatalog extends Catalog {\n    constructor(options, service) {\n        super(options, service);\n        const sType = TypeCatalog[TypeCatalog.composite];\n        this.type = TypeCatalog[sType];\n        this.url = null;\n    }\n    collectCatalogItems() {\n        return this.catalogService.loadCatalogCompositeLayerItems(this);\n    }\n}\nclass CatalogFactory {\n    static createInstanceCatalog(options, service) {\n        let catalog;\n        if (options.hasOwnProperty('composite')) {\n            catalog = new CompositeCatalog(options, service);\n        }\n        else if (options.type === TypeCatalog[TypeCatalog.baselayers]) {\n            catalog = new BaselayersCatalog(options, service);\n        }\n        else if (options.type === TypeCatalog[TypeCatalog.arcgisrest]) {\n            catalog = new ArcGISRestCatalog(options, service);\n        }\n        else if (options.type === TypeCatalog[TypeCatalog.tilearcgisrest]) {\n            catalog = new TileOrImageArcGISRestCatalog(options, service, TypeCatalog.tilearcgisrest);\n        }\n        else if (options.type === TypeCatalog[TypeCatalog.imagearcgisrest]) {\n            catalog = new TileOrImageArcGISRestCatalog(options, service, TypeCatalog.imagearcgisrest);\n        }\n        else if (options.type === TypeCatalog[TypeCatalog.wmts]) {\n            catalog = new WMTSCatalog(options, service);\n        }\n        else {\n            catalog = new WMSCatalog(options, service);\n        }\n        return catalog;\n    }\n}\n\nclass QueryService {\n    constructor(http) {\n        this.http = http;\n        this.queryEnabled = true;\n    }\n    query(layers, options) {\n        return layers\n            .filter((layer) => layer.visible && layer.isInResolutionsRange)\n            .map((layer) => this.queryLayer(layer, options));\n    }\n    queryLayer(layer, options) {\n        const url = this.getQueryUrl(layer.dataSource, options, false, layer.map.viewController.getExtent());\n        if (!url) {\n            return of([]);\n        }\n        if (layer.dataSource.options.queryFormat ===\n            QueryFormat.HTMLGML2) {\n            const urlGml = this.getQueryUrl(layer.dataSource, options, true);\n            return this.http.get(urlGml, { responseType: 'text' }).pipe(mergeMap(gmlRes => {\n                const imposedGeom = this.mergeGML(gmlRes, url);\n                return this.http\n                    .get(url, { responseType: 'text' })\n                    .pipe(map(res => this.extractData(res, layer, options, url, imposedGeom)));\n            }));\n        }\n        const request = this.http.get(url, { responseType: 'text' });\n        return request.pipe(map(res => this.extractData(res, layer, options, url)));\n    }\n    mergeGML(gmlRes, url) {\n        let parser = new olFormatGML2();\n        let features = parser.readFeatures(gmlRes);\n        // Handle non standard GML output (MapServer)\n        if (features.length === 0) {\n            parser = new WMSGetFeatureInfo();\n            features = parser.readFeatures(gmlRes);\n        }\n        const olmline = new MultiLineString([]);\n        let pts;\n        const ptsArray = [];\n        let olmpoly = new MultiPolygon([]);\n        let firstFeatureType;\n        const nbFeatures = features.length;\n        // Check if geometry intersect bbox\n        // for geoserver getfeatureinfo response in data projection, not call projection\n        const searchParams = this.getQueryParams(url.toLowerCase());\n        const bboxRaw = searchParams.bbox;\n        const bbox = bboxRaw.split(',');\n        const bboxExtent = createEmpty();\n        extend(bboxExtent, bbox);\n        const outBboxExtent = false;\n        features.map(feature => {\n            /*  if (!feature.getGeometry().simplify(100).intersectsExtent(bboxExtent)) {\n              outBboxExtent = true;\n              // TODO: Check to project the geometry?\n            }*/\n            const featureGeometryCoordinates = feature.getGeometry().getCoordinates();\n            const featureGeometryType = feature.getGeometry().getType();\n            if (!firstFeatureType && !outBboxExtent) {\n                firstFeatureType = featureGeometryType;\n            }\n            if (!outBboxExtent) {\n                switch (featureGeometryType) {\n                    case 'Point':\n                        if (nbFeatures === 1) {\n                            pts = new Point(featureGeometryCoordinates, 'XY');\n                        }\n                        else {\n                            ptsArray.push(featureGeometryCoordinates);\n                        }\n                        break;\n                    case 'LineString':\n                        olmline.appendLineString(new LineString(featureGeometryCoordinates, 'XY'));\n                        break;\n                    case 'Polygon':\n                        olmpoly.appendPolygon(new Polygon(featureGeometryCoordinates, 'XY'));\n                        break;\n                    case 'MultiPolygon':\n                        olmpoly = new MultiPolygon(featureGeometryCoordinates, 'XY');\n                        break;\n                    default:\n                        return;\n                }\n            }\n        });\n        let olmpts;\n        if (ptsArray.length === 0 && pts) {\n            olmpts = {\n                type: pts.getType(),\n                coordinates: pts.getCoordinates()\n            };\n        }\n        else {\n            olmpts = {\n                type: 'Polygon',\n                coordinates: [this.convexHull(ptsArray)]\n            };\n        }\n        switch (firstFeatureType) {\n            case 'LineString':\n                return {\n                    type: olmline.getType(),\n                    coordinates: olmline.getCoordinates()\n                };\n            case 'Point':\n                return olmpts;\n            case 'Polygon':\n                return {\n                    type: olmpoly.getType(),\n                    coordinates: olmpoly.getCoordinates()\n                };\n            case 'MultiPolygon':\n                return {\n                    type: olmpoly.getType(),\n                    coordinates: olmpoly.getCoordinates()\n                };\n            default:\n                return;\n        }\n    }\n    cross(a, b, o) {\n        return (a[0] - o[0]) * (b[1] - o[1]) - (a[1] - o[1]) * (b[0] - o[0]);\n    }\n    /**\n     * @param points An array of [X, Y] coordinates\n     * This method is use instead of turf.js convexHull because Turf needs at least 3 point to make a hull.\n     * https://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain#JavaScript\n     */\n    convexHull(points) {\n        points.sort((a, b) => {\n            return a[0] === b[0] ? a[1] - b[1] : a[0] - b[0];\n        });\n        const lower = [];\n        for (const point of points) {\n            while (lower.length >= 2 &&\n                this.cross(lower[lower.length - 2], lower[lower.length - 1], point) <= 0) {\n                lower.pop();\n            }\n            lower.push(point);\n        }\n        const upper = [];\n        for (let i = points.length - 1; i >= 0; i--) {\n            while (upper.length >= 2 &&\n                this.cross(upper[upper.length - 2], upper[upper.length - 1], points[i]) <= 0) {\n                upper.pop();\n            }\n            upper.push(points[i]);\n        }\n        upper.pop();\n        lower.pop();\n        return lower.concat(upper);\n    }\n    extractData(res, layer, options, url, imposedGeometry) {\n        const queryDataSource = layer.dataSource;\n        const allowedFieldsAndAlias = this.getAllowedFieldsAndAlias(layer);\n        let features = [];\n        switch (queryDataSource.options.queryFormat) {\n            case QueryFormat.GML3:\n                features = this.extractGML3Data(res, layer.zIndex, allowedFieldsAndAlias);\n                break;\n            case QueryFormat.JSON:\n            case QueryFormat.GEOJSON:\n            case QueryFormat.GEOJSON2:\n                features = this.extractGeoJSONData(res, layer.zIndex, allowedFieldsAndAlias);\n                break;\n            case QueryFormat.ESRIJSON:\n                features = this.extractEsriJSONData(res, layer.zIndex, allowedFieldsAndAlias);\n                break;\n            case QueryFormat.TEXT:\n                features = this.extractTextData(res);\n                break;\n            case QueryFormat.HTML:\n                features = this.extractHtmlData(res, queryDataSource.queryHtmlTarget, url);\n                break;\n            case QueryFormat.HTMLGML2:\n                features = this.extractHtmlData(res, queryDataSource.queryHtmlTarget, url, imposedGeometry);\n                break;\n            case QueryFormat.GML2:\n            default:\n                features = this.extractGML2Data(res, layer, allowedFieldsAndAlias);\n                break;\n        }\n        if (features.length > 0 && features[0].geometry == null) {\n            const geomToAdd = this.createGeometryFromUrlClick(url);\n            for (const feature of features) {\n                feature.geometry = geomToAdd;\n            }\n        }\n        return features.map((feature, index) => {\n            const mapLabel = feature.properties[queryDataSource.mapLabel];\n            let exclude;\n            if (layer.options.sourceOptions.type === 'wms') {\n                const sourceOptions = layer.options\n                    .sourceOptions;\n                exclude = sourceOptions ? sourceOptions.excludeAttribute : undefined;\n            }\n            let title = this.getQueryTitle(feature, layer);\n            if (!title && features.length > 1) {\n                title = `${layer.title} (${index + 1})`;\n            }\n            else if (!title) {\n                title = layer.title;\n            }\n            const meta = Object.assign({}, feature.meta || {}, {\n                id: uuid(),\n                title,\n                mapTitle: mapLabel,\n                sourceTitle: layer.title,\n                order: 1000 - layer.zIndex,\n                excludeAttribute: exclude\n            });\n            return Object.assign(feature, {\n                meta,\n                projection: queryDataSource.options.type === 'carto'\n                    ? 'EPSG:4326'\n                    : options.projection\n            });\n        });\n    }\n    createGeometryFromUrlClick(url) {\n        const searchParams = this.getQueryParams(url.toLowerCase());\n        const bboxRaw = searchParams.bbox;\n        const width = parseInt(searchParams.width, 10);\n        const height = parseInt(searchParams.height, 10);\n        const xPosition = parseInt(searchParams.i || searchParams.x, 10);\n        const yPosition = parseInt(searchParams.j || searchParams.y, 10);\n        const bbox = bboxRaw.split(',');\n        let threshold = (Math.abs(parseFloat(bbox[0])) - Math.abs(parseFloat(bbox[2]))) * 0.05;\n        // for context in degree (EPSG:4326,4269...)\n        if (Math.abs(parseFloat(bbox[0])) < 180) {\n            threshold = 0.045;\n        }\n        const clickx = parseFloat(bbox[0]) +\n            (Math.abs(parseFloat(bbox[0]) - parseFloat(bbox[2])) * xPosition) /\n                width -\n            threshold;\n        const clicky = parseFloat(bbox[1]) +\n            (Math.abs(parseFloat(bbox[1]) - parseFloat(bbox[3])) * yPosition) /\n                height -\n            threshold;\n        const clickx1 = clickx + threshold * 2;\n        const clicky1 = clicky + threshold * 2;\n        const wktPoly = 'POLYGON((' +\n            clickx +\n            ' ' +\n            clicky +\n            ', ' +\n            clickx +\n            ' ' +\n            clicky1 +\n            ', ' +\n            clickx1 +\n            ' ' +\n            clicky1 +\n            ', ' +\n            clickx1 +\n            ' ' +\n            clicky +\n            ', ' +\n            clickx +\n            ' ' +\n            clicky +\n            '))';\n        const format = new WKT();\n        const tenPercentWidthGeom = format.readFeature(wktPoly);\n        const f = tenPercentWidthGeom.getGeometry();\n        const newGeom = {\n            type: f.getType(),\n            coordinates: f.getCoordinates()\n        };\n        return newGeom;\n    }\n    extractGML2Data(res, zIndex, allowedFieldsAndAlias) {\n        let parser = new olFormatGML2();\n        let features = parser.readFeatures(res);\n        // Handle non standard GML output (MapServer)\n        if (features.length === 0) {\n            parser = new WMSGetFeatureInfo();\n            try {\n                features = parser.readFeatures(res);\n            }\n            catch (e) {\n                console.warn('query.service: Multipolygons are badly managed in mapserver in GML2. Use another format.');\n            }\n        }\n        return features.map(feature => this.featureToResult(feature, zIndex, allowedFieldsAndAlias));\n    }\n    extractGML3Data(res, zIndex, allowedFieldsAndAlias) {\n        const parser = new olFormatGML3();\n        let features = [];\n        try {\n            features = parser.readFeatures(res);\n        }\n        catch (e) {\n            console.warn('query.service: GML3 is not well supported');\n        }\n        return features.map(feature => this.featureToResult(feature, zIndex, allowedFieldsAndAlias));\n    }\n    extractGeoJSONData(res, zIndex, allowedFieldsAndAlias) {\n        let features = [];\n        try {\n            features = JSON.parse(res).features;\n        }\n        catch (e) {\n            console.warn('query.service: Unable to parse geojson', '\\n', res);\n        }\n        features.map(feature => feature.meta = {\n            id: uuid(),\n            order: 1000 - zIndex,\n            alias: allowedFieldsAndAlias\n        });\n        return features;\n    }\n    extractEsriJSONData(res, zIndex, allowedFieldsAndAlias) {\n        if (res) {\n            try {\n                if (JSON.parse(res).error) {\n                    return [];\n                }\n            }\n            catch (e) { }\n        }\n        const parser = new olFormatEsriJSON();\n        const features = parser.readFeatures(res);\n        return features.map(feature => this.featureToResult(feature, zIndex, allowedFieldsAndAlias));\n    }\n    extractTextData(res) {\n        // TODO\n        return [];\n    }\n    extractHtmlData(res, htmlTarget, url, imposedGeometry) {\n        const searchParams = this.getQueryParams(url.toLowerCase());\n        const projection = searchParams.crs || searchParams.srs || 'EPSG:3857';\n        const geomToAdd = this.createGeometryFromUrlClick(url);\n        if (htmlTarget !== QueryHtmlTarget.BLANK &&\n            htmlTarget !== QueryHtmlTarget.IFRAME) {\n            htmlTarget = QueryHtmlTarget.IFRAME;\n        }\n        const bodyTagStart = res.toLowerCase().indexOf('<body>');\n        const bodyTagEnd = res.toLowerCase().lastIndexOf('</body>') + 7;\n        // replace \\r \\n  and ' ' with '' to validate if the body is really empty.\n        const body = res.slice(bodyTagStart, bodyTagEnd).replace(/(\\r|\\n|\\s)/g, '');\n        if (body === '<body></body>' || res === '') {\n            return [];\n        }\n        return [\n            {\n                type: FEATURE,\n                projection,\n                properties: { target: htmlTarget, body: res, url },\n                geometry: imposedGeometry || geomToAdd\n            }\n        ];\n    }\n    getQueryParams(url) {\n        const queryString = url.split('?');\n        if (!queryString[1]) {\n            return;\n        }\n        const pairs = queryString[1].split('&');\n        const result = {};\n        pairs.forEach(pair => {\n            pair = pair.split('=');\n            result[pair[0]] = decodeURIComponent(pair[1] || '');\n        });\n        return result;\n    }\n    featureToResult(featureOL, zIndex, allowedFieldsAndAlias) {\n        const featureGeometry = featureOL.getGeometry();\n        const properties = Object.assign({}, featureOL.getProperties());\n        delete properties.geometry;\n        delete properties.boundedBy;\n        delete properties.shape;\n        delete properties.SHAPE;\n        delete properties.the_geom;\n        delete properties.geom;\n        let geometry;\n        if (featureGeometry) {\n            geometry = {\n                type: featureGeometry.getType(),\n                coordinates: featureGeometry.getCoordinates()\n            };\n        }\n        return {\n            type: FEATURE,\n            projection: undefined,\n            properties,\n            geometry,\n            meta: {\n                id: uuid(),\n                order: 1000 - zIndex,\n                alias: allowedFieldsAndAlias\n            }\n        };\n    }\n    getQueryUrl(datasource, options, forceGML2 = false, mapExtent) {\n        let url;\n        switch (datasource.constructor) {\n            case WMSDataSource:\n                const wmsDatasource = datasource;\n                const WMSGetFeatureInfoOptions = {\n                    INFO_FORMAT: wmsDatasource.params.INFO_FORMAT ||\n                        this.getMimeInfoFormat(datasource.options.queryFormat),\n                    QUERY_LAYERS: wmsDatasource.params.LAYERS,\n                    FEATURE_COUNT: wmsDatasource.params.FEATURE_COUNT || '5'\n                };\n                if (forceGML2) {\n                    WMSGetFeatureInfoOptions.INFO_FORMAT = this.getMimeInfoFormat(QueryFormat.GML2);\n                }\n                url = wmsDatasource.ol.getFeatureInfoUrl(options.coordinates, options.resolution, options.projection, WMSGetFeatureInfoOptions);\n                // const wmsVersion =\n                //   wmsDatasource.params.VERSION ||\n                //   wmsDatasource.params.version ||\n                //   '1.3.0';\n                // if (wmsVersion !== '1.3.0') {\n                //   url = url.replace('&I=', '&X=');\n                //   url = url.replace('&J=', '&Y=');\n                // }\n                break;\n            case CartoDataSource:\n                const cartoDatasource = datasource;\n                const baseUrl = 'https://' +\n                    cartoDatasource.options.account +\n                    '.carto.com/api/v2/sql?';\n                const format = 'format=GeoJSON';\n                const sql = '&q=' + cartoDatasource.options.config.layers[0].options.sql;\n                const clause = ' WHERE ST_Intersects(the_geom_webmercator,ST_BUFFER(ST_SetSRID(ST_POINT(';\n                const meters = cartoDatasource.options.queryPrecision\n                    ? cartoDatasource.options.queryPrecision\n                    : '1000';\n                const coordinates = options.coordinates[0] +\n                    ',' +\n                    options.coordinates[1] +\n                    '),3857),' +\n                    meters +\n                    '))';\n                url = `${baseUrl}${format}${sql}${clause}${coordinates}`;\n                break;\n            case ImageArcGISRestDataSource:\n            case TileArcGISRestDataSource:\n                const tileArcGISRestDatasource = datasource;\n                const deltaX = Math.abs(mapExtent[0] - mapExtent[2]);\n                const deltaY = Math.abs(mapExtent[1] - mapExtent[3]);\n                const maxDelta = deltaX > deltaY ? deltaX : deltaY;\n                const clickBuffer = maxDelta * 0.005;\n                const threshold = tileArcGISRestDatasource.options.queryPrecision ? tileArcGISRestDatasource.options.queryPrecision : clickBuffer;\n                const extent = buffer(boundingExtent([options.coordinates]), threshold);\n                const serviceUrl = tileArcGISRestDatasource.options.url +\n                    '/' +\n                    tileArcGISRestDatasource.options.layer +\n                    '/query/';\n                const geometry = encodeURIComponent('{\"xmin\":' +\n                    extent[0] +\n                    ',\"ymin\":' +\n                    extent[1] +\n                    ',\"xmax\":' +\n                    extent[2] +\n                    ',\"ymax\":' +\n                    extent[3] +\n                    ',\"spatialReference\":{\"wkid\":102100}}');\n                const params = [\n                    'f=json',\n                    `geometry=${geometry}`,\n                    'geometryType=esriGeometryEnvelope',\n                    'inSR=102100',\n                    'spatialRel=esriSpatialRelIntersects',\n                    'outFields=*',\n                    'returnGeometry=true',\n                    'outSR=102100'\n                ];\n                url = `${serviceUrl}?${params.join('&')}`;\n                break;\n            default:\n                break;\n        }\n        return url;\n    }\n    getMimeInfoFormat(queryFormat) {\n        let mime = 'application/vnd.ogc.gml';\n        const keyEnum = Object.keys(QueryFormat).find(key => QueryFormat[key] === queryFormat);\n        if (keyEnum) {\n            mime = QueryFormatMimeType[keyEnum];\n        }\n        return mime;\n    }\n    getAllowedFieldsAndAlias(layer) {\n        var _a, _b, _c;\n        let allowedFieldsAndAlias;\n        if (((_c = (_b = (_a = layer.options) === null || _a === void 0 ? void 0 : _a.source) === null || _b === void 0 ? void 0 : _b.options) === null || _c === void 0 ? void 0 : _c.sourceFields) &&\n            layer.options.source.options.sourceFields.length >= 1) {\n            allowedFieldsAndAlias = {};\n            layer.options.source.options.sourceFields.forEach(sourceField => {\n                const alias = sourceField.alias ? sourceField.alias : sourceField.name;\n                allowedFieldsAndAlias[sourceField.name] = alias;\n            });\n        }\n        return allowedFieldsAndAlias;\n    }\n    getQueryTitle(feature, layer) {\n        var _a, _b;\n        let title;\n        if ((_b = (_a = layer.options) === null || _a === void 0 ? void 0 : _a.source) === null || _b === void 0 ? void 0 : _b.options) {\n            const dataSourceOptions = layer.options.source\n                .options;\n            if (dataSourceOptions.queryTitle) {\n                title = this.getLabelMatch(feature, dataSourceOptions.queryTitle);\n            }\n        }\n        return title;\n    }\n    getLabelMatch(feature, labelMatch) {\n        let label = labelMatch;\n        const labelToGet = Array.from(labelMatch.matchAll(/\\$\\{([^\\{\\}]+)\\}/g));\n        labelToGet.forEach(v => {\n            label = label.replace(v[0], feature.properties[v[1]]);\n        });\n        // Nothing done? check feature's attribute\n        if (labelToGet.length === 0 && label === labelMatch) {\n            label = feature.properties[labelMatch] || labelMatch;\n        }\n        return label;\n    }\n}\nQueryService.ɵfac = function QueryService_Factory(t) { return new (t || QueryService)(ɵɵinject(HttpClient)); };\nQueryService.ɵprov = ɵɵdefineInjectable({ token: QueryService, factory: QueryService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(QueryService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: HttpClient }]; }, null); })();\n\n/**\n * Whether a layer is queryable\n * @param layer Layer\n * @returns True if the layer s squeryable\n */\nfunction layerIsQueryable(layer) {\n    const dataSource = layer.dataSource;\n    return dataSource.options.queryable === true;\n}\n/**\n * Whether an OL layer is queryable\n * @param layer Layer\n * @returns True if the ol layer is queryable\n */\nfunction olLayerIsQueryable(olLayer) {\n    const layer = olLayer.get('_layer');\n    return layer === undefined ? false : layerIsQueryable(layer);\n}\n\n/**\n * This directive makes a map queryable with a click of with a drag box.\n * By default, all layers are queryable but this can ben controlled at\n * the layer level.\n */\nclass QueryDirective {\n    constructor(component, queryService) {\n        this.component = component;\n        this.queryService = queryService;\n        /**\n         * Subscriptions to ongoing queries\n         */\n        this.queries$$ = [];\n        /**\n         * Whter to query features or not\n         */\n        this.queryFeatures = false;\n        /**\n         * Feature query hit tolerance\n         */\n        this.queryFeaturesHitTolerance = 0;\n        /**\n         * Whether all query should complete before emitting an event\n         */\n        this.waitForAllQueries = true;\n        /**\n         * Event emitted when a query (or all queries) complete\n         */\n        this.query = new EventEmitter();\n    }\n    /**\n     * IGO map\n     * @internal\n     */\n    get map() {\n        return this.component.map;\n    }\n    /**\n     * Start listening to click and drag box events\n     * @internal\n     */\n    ngAfterViewInit() {\n        this.listenToMapClick();\n        this.addDragBoxInteraction();\n    }\n    /**\n     * Stop listening to click and drag box events and cancel ongoind requests\n     * @internal\n     */\n    ngOnDestroy() {\n        this.cancelOngoingQueries();\n        this.unlistenToMapClick();\n        this.removeDragBoxInteraction();\n    }\n    /**\n     * On map click, issue queries\n     */\n    listenToMapClick() {\n        this.mapClickListener = this.map.ol.on('singleclick', (event) => this.onMapEvent(event));\n    }\n    /**\n     * Stop listening for map clicks\n     */\n    unlistenToMapClick() {\n        this.map.ol.un(this.mapClickListener.type, this.mapClickListener.listener);\n        this.mapClickListener = undefined;\n    }\n    /**\n     * Issue queries from a map event and emit events with the results\n     * @param event OL map browser pointer event\n     */\n    onMapEvent(event) {\n        this.cancelOngoingQueries();\n        if (!this.queryService.queryEnabled) {\n            return;\n        }\n        const queries$ = [];\n        if (this.queryFeatures) {\n            queries$.push(this.doQueryFeatures(event));\n        }\n        const resolution = this.map.ol.getView().getResolution();\n        const queryLayers = this.map.layers.filter(layerIsQueryable);\n        queries$.push(...this.queryService.query(queryLayers, {\n            coordinates: event.coordinate,\n            projection: this.map.projection,\n            resolution\n        }));\n        if (queries$.length === 0) {\n            return;\n        }\n        if (this.waitForAllQueries) {\n            this.queries$$.push(zip(...queries$).subscribe((results) => {\n                const features = [].concat(...results);\n                this.query.emit({ features, event });\n            }));\n        }\n        else {\n            this.queries$$ = queries$.map((query$) => {\n                return query$.subscribe((features) => {\n                    this.query.emit({ features, event });\n                });\n            });\n        }\n    }\n    /**\n     * Query features already present on the map\n     * @param event OL map browser pointer event\n     */\n    doQueryFeatures(event) {\n        const clickedFeatures = [];\n        if (event.type === 'singleclick') {\n            this.map.ol.forEachFeatureAtPixel(event.pixel, (featureOL, layerOL) => {\n                const layer = this.map.getLayerById(layerOL.values_._layer.id);\n                if (featureOL) {\n                    if (featureOL.get('features')) {\n                        for (const feature of featureOL.get('features')) {\n                            const newFeature = featureFromOl(feature, this.map.projection);\n                            newFeature.meta = {\n                                title: feature.values_.nom,\n                                id: layerOL.values_._layer.id + '.' + feature.id_,\n                                icon: feature.values_._icon,\n                                sourceTitle: layerOL.values_.title,\n                                alias: this.queryService.getAllowedFieldsAndAlias(layer),\n                            };\n                            clickedFeatures.push(newFeature);\n                        }\n                    }\n                    else if (featureOL instanceof OlRenderFeature) {\n                        const newFeature = renderFeatureFromOl(featureOL, this.map.projection, layerOL);\n                        newFeature.meta = {\n                            id: layerOL.values_._layer.id + '.' + newFeature.meta.id,\n                            sourceTitle: layerOL.values_.title,\n                            alias: this.queryService.getAllowedFieldsAndAlias(layer),\n                            title: this.queryService.getQueryTitle(newFeature, layer) || newFeature.meta.title\n                        };\n                        clickedFeatures.push(newFeature);\n                    }\n                    else {\n                        const newFeature = featureFromOl(featureOL, this.map.projection, layerOL);\n                        newFeature.meta = {\n                            id: layerOL.values_._layer.id + '.' + newFeature.meta.id,\n                            sourceTitle: layerOL.values_.title,\n                            alias: this.queryService.getAllowedFieldsAndAlias(layer),\n                            title: this.queryService.getQueryTitle(newFeature, layer) || newFeature.meta.title\n                        };\n                        clickedFeatures.push(newFeature);\n                    }\n                }\n            }, {\n                hitTolerance: this.queryFeaturesHitTolerance || 0,\n                layerFilter: this.queryFeaturesCondition\n                    ? this.queryFeaturesCondition\n                    : olLayerIsQueryable\n            });\n        }\n        else if (event.type === 'boxend') {\n            const dragExtent = event.target.getGeometry().getExtent();\n            this.map.layers\n                .filter(layerIsQueryable)\n                .filter(layer => layer instanceof VectorLayer && layer.visible)\n                .map(layer => {\n                const featuresOL = layer.dataSource.ol;\n                featuresOL.forEachFeatureIntersectingExtent(dragExtent, (olFeature) => {\n                    const newFeature = featureFromOl(olFeature, this.map.projection, layer.ol);\n                    newFeature.meta = {\n                        id: layer.id + '.' + olFeature.id_,\n                        icon: olFeature.values_._icon,\n                        sourceTitle: layer.title,\n                        alias: this.queryService.getAllowedFieldsAndAlias(layer),\n                        title: this.queryService.getQueryTitle(newFeature, layer) || newFeature.meta.title\n                    };\n                    clickedFeatures.push(newFeature);\n                });\n            });\n        }\n        return of(clickedFeatures);\n    }\n    /**\n     * Cancel ongoing requests, if any\n     */\n    cancelOngoingQueries() {\n        this.queries$$.forEach((sub) => sub.unsubscribe());\n        this.queries$$ = [];\n    }\n    /**\n     * Add a drag box interaction and, on drag box end, select features\n     */\n    addDragBoxInteraction() {\n        let olDragSelectInteractionOnQuery;\n        const olInteractions = this.map.ol.getInteractions().getArray();\n        // There can only be one dragbox interaction, so find the current one, if any\n        // Don't keep a reference to the current dragbox because we don't want\n        // to remove it when this startegy is deactivated\n        for (const olInteraction of olInteractions) {\n            if (olInteraction instanceof OlDragSelectInteraction) {\n                olDragSelectInteractionOnQuery = olInteraction;\n                break;\n            }\n        }\n        // If no drag box interaction is found, create a new one and add it to the map\n        if (olDragSelectInteractionOnQuery === undefined) {\n            olDragSelectInteractionOnQuery = new OlDragSelectInteraction({\n                condition: ctrlKeyDown\n            });\n            this.map.ol.addInteraction(olDragSelectInteractionOnQuery);\n            this.olDragSelectInteraction = olDragSelectInteractionOnQuery;\n        }\n        this.olDragSelectInteractionEndKey = olDragSelectInteractionOnQuery.on('boxend', (event) => this.onMapEvent(event));\n    }\n    /**\n     * Remove drag box interaction\n     */\n    removeDragBoxInteraction() {\n        if (this.olDragSelectInteractionEndKey !== undefined) {\n            unByKey(this.olDragSelectInteractionEndKey);\n        }\n        if (this.olDragSelectInteraction !== undefined) {\n            this.map.ol.removeInteraction(this.olDragSelectInteraction);\n        }\n        this.olDragSelectInteraction = undefined;\n    }\n}\nQueryDirective.ɵfac = function QueryDirective_Factory(t) { return new (t || QueryDirective)(ɵɵdirectiveInject(MapBrowserComponent, 2), ɵɵdirectiveInject(QueryService)); };\nQueryDirective.ɵdir = ɵɵdefineDirective({ type: QueryDirective, selectors: [[\"\", \"igoQuery\", \"\"]], inputs: { queryFeatures: \"queryFeatures\", queryFeaturesHitTolerance: \"queryFeaturesHitTolerance\", queryFeaturesCondition: \"queryFeaturesCondition\", waitForAllQueries: \"waitForAllQueries\" }, outputs: { query: \"query\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(QueryDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoQuery]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent, decorators: [{\n                type: Self\n            }] }, { type: QueryService }]; }, { queryFeatures: [{\n            type: Input\n        }], queryFeaturesHitTolerance: [{\n            type: Input\n        }], queryFeaturesCondition: [{\n            type: Input\n        }], waitForAllQueries: [{\n            type: Input\n        }], query: [{\n            type: Output\n        }] }); })();\n\n/**\n * Base search source class\n */\nclass SearchSource {\n    constructor(options, storageService) {\n        this.storageService = storageService;\n        this.options = options;\n        if (this.storageService) {\n            const storageOptions = this.storageService.get(this.getId() + '.options');\n            if (storageOptions) {\n                this.options = ObjectUtils.mergeDeep(this.options, storageOptions);\n            }\n        }\n        this.options = ObjectUtils.mergeDeep(this.getDefaultOptions(), this.options);\n        // Set Default Params from Settings\n        this.settings.forEach(setting => {\n            this.setParamFromSetting(setting, false);\n        });\n    }\n    /**\n     * Get search source's id\n     * @returns Search source's id\n     */\n    getId() {\n        throw new Error('You have to implement the method \"getId\".');\n    }\n    /**\n     * Get search source's type\n     * @returns Search source's type\n     */\n    getType() {\n        throw new Error('You have to implement the method \"getType\".');\n    }\n    /**\n     * Get search source's default options\n     * @returns Search source default options\n     */\n    getDefaultOptions() {\n        throw new Error('You have to implement the method \"getDefaultOptions\".');\n    }\n    /**\n     * Search source's title\n     */\n    get title() {\n        return this.options.title;\n    }\n    /**\n     * Whether the search source is available\n     */\n    get available() {\n        return this.options.available !== false;\n    }\n    /**\n     * Whether the search source is enabled\n     */\n    set enabled(value) {\n        this.options.enabled = value;\n    }\n    get enabled() {\n        return this.available && this.options.enabled !== false;\n    }\n    get showInPointerSummary() {\n        const showInPointerSummary = this.options.showInPointerSummary;\n        return showInPointerSummary ? showInPointerSummary : false;\n    }\n    get showInSettings() {\n        const showInSettings = this.options.showInSettings;\n        return showInSettings === undefined ? true : showInSettings;\n    }\n    /**\n     * Search url\n     */\n    get searchUrl() {\n        return this.options.searchUrl;\n    }\n    /**\n     * Search query params\n     */\n    get params() {\n        return this.options.params === undefined ? {} : this.options.params;\n    }\n    /**\n     * Search settings\n     */\n    get settings() {\n        return this.options.settings === undefined ? [] : this.options.settings;\n    }\n    /**\n     * Set params from selected settings\n     */\n    setParamFromSetting(setting, saveInStorage = true) {\n        switch (setting.type) {\n            case 'radiobutton':\n                setting.values.forEach(conf => {\n                    if (conf.enabled) {\n                        this.options.params = Object.assign(this.options.params || {}, {\n                            [setting.name]: conf.value\n                        });\n                    }\n                });\n                break;\n            case 'checkbox':\n                let confValue = '';\n                setting.values\n                    .filter(s => s.available !== false)\n                    .forEach(conf => {\n                    if (conf.enabled) {\n                        confValue += conf.value + ',';\n                    }\n                });\n                confValue = confValue.slice(0, -1);\n                this.options.params = Object.assign(this.options.params || {}, {\n                    [setting.name]: confValue\n                });\n                break;\n        }\n        if (saveInStorage && this.storageService) {\n            this.storageService.set(this.getId() + '.options', { params: this.options.params });\n        }\n    }\n    /**\n     * Search results display order\n     */\n    get displayOrder() {\n        return this.options.order === undefined ? 99 : this.options.order;\n    }\n    /**\n     * Get hashtags valid\n     * @param hashtag hashtag from query\n     */\n    getHashtagsValid(term, settingsName) {\n        const hashtags = term.match(/(#[A-Za-z]+)/g);\n        if (!hashtags) {\n            return undefined;\n        }\n        const searchSourceSetting = this.getSettingsValues(settingsName);\n        const hashtagsValid = [];\n        hashtags.forEach(hashtag => {\n            searchSourceSetting.values.forEach(conf => {\n                const hashtagKey = hashtag.substring(1);\n                if (typeof conf.value === 'string') {\n                    const types = conf.value\n                        .toLowerCase()\n                        .normalize('NFD')\n                        .replace(/[\\u0300-\\u036f]/g, '')\n                        .split(',');\n                    const index = types.indexOf(hashtagKey\n                        .toLowerCase()\n                        .normalize('NFD')\n                        .replace(/[\\u0300-\\u036f]/g, ''));\n                    if (index !== -1) {\n                        hashtagsValid.push(types[index]);\n                    }\n                }\n                if (conf.hashtags && conf.hashtags.indexOf(hashtagKey) !== -1) {\n                    hashtagsValid.push(conf.value);\n                }\n            });\n        });\n        return hashtagsValid.filter((a, b) => hashtagsValid.indexOf(a) === b);\n    }\n    getSettingsValues(search) {\n        return this.getDefaultOptions().settings.find((value) => {\n            return value.name === search;\n        });\n    }\n}\n/**\n * Search source ID\n * @internal\n */\nSearchSource.id = '';\n/**\n * Search source type\n * @internal\n */\nSearchSource.type = '';\n\n/**\n * Map search source. For now it has no search capability. All it does\n * is act as a placeholder for the map query results' \"search source\".\n */\nclass QuerySearchSource extends SearchSource {\n    constructor(options) {\n        super(options);\n    }\n    getId() {\n        return QuerySearchSource.id;\n    }\n    getType() {\n        return QuerySearchSource.type;\n    }\n    getDefaultOptions() {\n        return {\n            title: 'Carte'\n        };\n    }\n}\nQuerySearchSource.id = 'map';\nQuerySearchSource.type = FEATURE;\nQuerySearchSource.ɵfac = function QuerySearchSource_Factory(t) { return new (t || QuerySearchSource)(ɵɵinject('options')); };\nQuerySearchSource.ɵprov = ɵɵdefineInjectable({ token: QuerySearchSource, factory: QuerySearchSource.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(QuerySearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }]; }, null); })();\n\nclass GoogleLinks {\n    static getGoogleMapsCoordLink(lon, lat) {\n        return 'https://www.google.com/maps?q=' + lat + ',' + lon;\n    }\n    static getGoogleStreetViewLink(lon, lat) {\n        return 'https://www.google.com/maps?q=&layer=c&cbll=' + lat + ',' + lon;\n    }\n    static getGoogleMapsNameLink(name) {\n        const encodedName = encodeURI(name);\n        return 'https://www.google.com/maps?q=' + encodedName;\n    }\n}\n\n/**\n * Generate a style for selected features\n * @param feature The feature to generate the style\n * @returns A olStyle\n */\nfunction getCommonVectorSelectedStyle({ feature, markerColor = [0, 161, 222], markerOpacity = 1, markerOutlineColor = [0, 255, 255], fillColor, fillOpacity = 0.15, strokeColor = [0, 255, 255], strokeOpacity = 0.5, strokeWidth = 4 }) {\n    return getCommonVectorStyle({\n        feature,\n        markerColor,\n        markerOpacity,\n        markerOutlineColor,\n        fillColor,\n        fillOpacity,\n        strokeColor,\n        strokeOpacity,\n        strokeWidth\n    });\n}\n/**\n * Generate a basic style for features\n * @param feature The feature to generate the style\n * @returns A olStyle\n */\nfunction getCommonVectorStyle({ feature, markerColor = [0, 161, 222], markerOpacity = 0.5, markerOutlineColor, fillColor = [0, 161, 222], fillOpacity = 0.15, strokeColor = [0, 161, 222], strokeOpacity = 0.5, strokeWidth = 2 }) {\n    const isOlFeature = feature instanceof olFeature;\n    const geometry = isOlFeature ? feature.getGeometry() : feature.geometry;\n    const geometryType = isOlFeature ? geometry.getType() : geometry.type;\n    if (!geometry || geometryType === 'Point') {\n        const markerColorAsArray = asArray(markerColor).slice(0);\n        const markerColorRGB = markerColorAsArray.slice(0, 3);\n        if (markerColorAsArray.length === 4 &&\n            (typeof markerColor !== 'string' || /^#[0-9A-F]{8}$/i.test(markerColor))) {\n            markerOpacity = markerColorAsArray[3];\n        }\n        return createOverlayMarkerStyle({\n            text: isOlFeature ? undefined : feature.meta.mapTitle,\n            opacity: markerOpacity,\n            markerOutlineColor,\n            markerColor: markerColorRGB\n        });\n    }\n    else {\n        const fillWithOpacity = asArray(fillColor).slice(0);\n        const strokeWithOpacity = asArray(strokeColor).slice(0);\n        if (!(fillWithOpacity.length === 4 &&\n            (typeof fillColor !== 'string' || /^#[0-9A-F]{8}$/i.test(fillColor)))) {\n            fillWithOpacity[3] = fillOpacity;\n        }\n        if (!(strokeWithOpacity.length === 4 &&\n            (typeof strokeColor !== 'string' || /^#[0-9A-F]{8}$/i.test(strokeColor)))) {\n            strokeWithOpacity[3] = strokeOpacity;\n        }\n        return createOverlayDefaultStyle({\n            text: isOlFeature ? undefined : feature.meta.mapTitle,\n            strokeWidth,\n            strokeColor: strokeWithOpacity,\n            fillColor: fillWithOpacity\n        });\n    }\n}\n\nclass OsmLinks {\n    static getOpenStreetMapLink(lon, lat, zoom = 17) {\n        // return 'https://www.google.com/maps?q=' + lat + ',' + lon;\n        return `https://www.openstreetmap.org/?mlat=${lat}&mlon=${lon}#map=${zoom}/${lat}/${lon}`;\n    }\n    static getOpenStreetCamLink(lon, lat, zoom = 17) {\n        return `https://openstreetcam.org/map/@${lat},${lon},${zoom}z`;\n    }\n}\n\nclass CatalogService {\n    constructor(http, config, languageService, messageService, capabilitiesService) {\n        this.http = http;\n        this.config = config;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.capabilitiesService = capabilitiesService;\n    }\n    loadCatalogs() {\n        const contextConfig = this.config.getConfig('context') || {};\n        const catalogConfig = this.config.getConfig('catalog') || {};\n        const apiUrl = catalogConfig.url || contextConfig.url;\n        const catalogsFromConfig = catalogConfig.sources || [];\n        const observables$ = [];\n        if (apiUrl) {\n            // Base layers catalog\n            if (catalogConfig.baseLayers) {\n                const translate = this.languageService.translate;\n                const title = translate.instant('igo.geo.catalog.baseLayers');\n                const baseLayersCatalog = [\n                    {\n                        id: 'catalog.baselayers',\n                        title,\n                        url: `${apiUrl}/baselayers`,\n                        type: 'baselayers'\n                    }\n                ];\n                observables$.push(of(baseLayersCatalog));\n            }\n            // Catalogs from API\n            const catalogsFromApi$ = this.http\n                .get(`${apiUrl}/catalogs`)\n                .pipe(map((catalogs) => catalogs.map((c) => Object.assign(c, c.options))), catchError((_response) => EMPTY));\n            observables$.push(catalogsFromApi$);\n        }\n        // Catalogs from config\n        if (catalogsFromConfig.length > 0) {\n            observables$.push(of(catalogsFromConfig).pipe(map((catalogs) => catalogs.map((c) => {\n                if (!c.id) {\n                    c.id = uuid();\n                }\n                return c;\n            }))));\n        }\n        return zip(...observables$).pipe(map((catalogs) => [].concat.apply([], catalogs)));\n    }\n    loadCatalogItems(catalog) {\n        let newCatalog;\n        newCatalog = CatalogFactory.createInstanceCatalog(catalog, this);\n        return newCatalog.collectCatalogItems();\n    }\n    loadCatalogBaseLayerItems(catalog) {\n        return this.getCatalogBaseLayersOptions(catalog).pipe(map((layersOptions) => {\n            const items = layersOptions.map((layerOptions) => {\n                return {\n                    id: generateIdFromSourceOptions(layerOptions.sourceOptions),\n                    title: layerOptions.title,\n                    type: CatalogItemType.Layer,\n                    externalProvider: catalog.externalProvider,\n                    options: layerOptions\n                };\n            });\n            return [\n                {\n                    id: 'catalog.group.baselayers',\n                    type: CatalogItemType.Group,\n                    title: catalog.title,\n                    items\n                }\n            ];\n        }));\n    }\n    getCatalogBaseLayersOptions(catalog) {\n        return this.http.get(catalog.url);\n    }\n    loadCatalogWMSLayerItems(catalog) {\n        return this.getCatalogCapabilities(catalog).pipe(map((capabilities) => {\n            const items = [];\n            if (capabilities.Service && capabilities.Service.Abstract && capabilities.Service.Abstract.length) {\n                catalog.abstract = capabilities.Service.Abstract;\n            }\n            const finalLayers = [];\n            this.flattenWmsCapabilities(capabilities.Capability.Layer, 0, finalLayers, catalog.groupSeparator);\n            const capabilitiesCapabilityLayer = Object.assign({}, capabilities.Capability.Layer);\n            capabilitiesCapabilityLayer.Layer = finalLayers.filter(f => f.Layer.length !== 0);\n            this.includeRecursiveItems(catalog, capabilitiesCapabilityLayer, items);\n            return items;\n        }));\n    }\n    flattenWmsCapabilities(parent, level = 0, finalLayers, separator = ' / ') {\n        if (!finalLayers.includes(parent.Title)) {\n            const modifiedParent = Object.assign({}, parent);\n            modifiedParent.Layer = [];\n            finalLayers.push(modifiedParent);\n        }\n        for (const layer of parent.Layer) {\n            const modifiedLayer = Object.assign({}, layer);\n            if (level > 0) {\n                modifiedLayer.Title = parent.Title + separator + layer.Title;\n            }\n            if (layer.Layer) {\n                this.flattenWmsCapabilities(modifiedLayer, level + 1, finalLayers, separator);\n            }\n            else {\n                finalLayers.find(ff => ff.Title === parent.Title).Layer.push(layer);\n            }\n        }\n    }\n    loadCatalogWMTSLayerItems(catalog) {\n        return this.getCatalogCapabilities(catalog).pipe(map((capabilities) => this.getWMTSItems(catalog, capabilities)));\n    }\n    loadCatalogArcGISRestItems(catalog) {\n        return this.getCatalogCapabilities(catalog).pipe(map((capabilities) => {\n            return this.getArcGISRESTItems(catalog, capabilities);\n        }));\n    }\n    loadCatalogCompositeLayerItems(catalog) {\n        const compositeCatalog = catalog.composite;\n        const catalogsFromInstance = [];\n        compositeCatalog.map((component) => catalogsFromInstance.push(CatalogFactory.createInstanceCatalog(component, this)));\n        // get CatalogItems for each original Catalog-----------------------------------------------------\n        const request1$ = [];\n        catalogsFromInstance.map((component) => request1$.push(component.collectCatalogItems()));\n        // integrate imposed group -----------------------------------------------------\n        let request2$ = [];\n        function flatDeepLayer(arr) {\n            return arr.reduce((acc, val) => acc.concat(val.type === CatalogItemType.Group ? flatDeepLayer(val.items) : val), []);\n        }\n        if (Object.keys(compositeCatalog).find((k) => compositeCatalog[k].groupImpose)) {\n            const pushImposeGroup = (item, index) => {\n                const c = catalogsFromInstance[index];\n                const outGroupImpose = Object.assign({}, c.groupImpose);\n                outGroupImpose.address = c.id;\n                outGroupImpose.type = CatalogItemType.Group;\n                outGroupImpose.items = [];\n                const flatLayer = flatDeepLayer(item);\n                flatLayer.map((v) => (v.address = `${outGroupImpose.address}.${outGroupImpose.id}`));\n                outGroupImpose.items = flatLayer;\n                return outGroupImpose;\n            };\n            request2$ = request1$.map((obs, idx) => obs.pipe(map((items) => compositeCatalog[idx].groupImpose\n                ? pushImposeGroup(items, idx)\n                : items)));\n        }\n        else {\n            request2$ = request1$;\n        }\n        // concat Group -----------------------------------------------------\n        const request3$ = zip(...request2$).pipe(map((output) => [].concat(...output) // [].concat.apply([], result1\n        ));\n        // merge Group (first level only) -----------------------------------------------------\n        const groupByGroupId = (data, keyFn) => data.reduce((acc, group) => {\n            const groupId = keyFn(group);\n            const ind = acc.find((x) => x.id === groupId);\n            if (!ind) {\n                acc[acc.length] = group;\n            }\n            else {\n                const ix = acc.indexOf(ind);\n                if (acc[ix].address.split('|').indexOf(group.address) === -1) {\n                    acc[ix].address = `${acc[ix].address}|${group.address}`;\n                }\n                acc[ix].items.push(...group.items);\n            }\n            return acc;\n        }, []);\n        // merge Layer for each Level (catalog, group(recursive))\n        const recursiveGroupByLayerAddress = (items, keyFn) => items.reduce((acc, item, idx, arr) => {\n            const layerTitle = keyFn(item);\n            const outItem = Object.assign({}, item);\n            if (item.type === CatalogItemType.Layer) {\n                // same title, same address => result: only one item is keep\n                // same title, address diff\n                const indicesMatchTitle = [];\n                const diffAddress = arr.filter((x, i) => {\n                    let bInd = false;\n                    if (x.title === layerTitle && x.type === CatalogItemType.Layer) {\n                        if (i !== idx && x.address !== item.address) {\n                            bInd = true;\n                        }\n                        indicesMatchTitle.push(i);\n                    }\n                    return bInd;\n                }); // $& i !== idx\n                if (diffAddress.length > 0) {\n                    const nPosition = indicesMatchTitle.findIndex((x) => x === idx) + 1;\n                    outItem.title = `${item.title} (${nPosition})`; // source: ${item.address.split('.')[0]}\n                }\n                const exist = acc.find((x) => x.title === outItem.title && x.type === CatalogItemType.Layer);\n                if (!exist) {\n                    acc[acc.length] = outItem;\n                }\n            }\n            else if (item.type === CatalogItemType.Group) {\n                outItem.items = recursiveGroupByLayerAddress(item.items, (layer) => layer.title);\n                acc[acc.length] = outItem;\n            }\n            return acc;\n        }, []);\n        const request4$ = request3$.pipe(map((output) => groupByGroupId(output, (group) => group.id)), map((output) => [].concat(...output)), map((data) => recursiveGroupByLayerAddress(data, (layer) => layer.title)));\n        return request4$;\n    }\n    getCatalogCapabilities(catalog) {\n        const sType = TypeCatalog[catalog.type];\n        return this.capabilitiesService\n            .getCapabilities(TypeCapabilities[sType], catalog.url, catalog.version)\n            .pipe(catchError((e) => {\n            const title = this.languageService.translate.instant('igo.geo.catalog.unavailableTitle');\n            const message = this.languageService.translate.instant('igo.geo.catalog.unavailable', { value: catalog.title });\n            this.messageService.error(message, title);\n            throw e;\n        }));\n    }\n    prepareCatalogItemLayer(layer, idParent, layersQueryFormat, catalog) {\n        const configuredQueryFormat = this.retriveLayerInfoFormat(layer.Name, layersQueryFormat);\n        const metadata = layer.DataURL ? layer.DataURL[0] : undefined;\n        const legendOptions = catalog.showLegend && layer.Style\n            ? this.capabilitiesService.getStyle(layer.Style)\n            : undefined;\n        const params = Object.assign({}, catalog.queryParams, {\n            LAYERS: layer.Name,\n            VERSION: catalog.version\n        });\n        const baseSourceOptions = {\n            type: 'wms',\n            url: catalog.url,\n            crossOrigin: catalog.setCrossOriginAnonymous ? 'anonymous' : undefined,\n            queryFormat: configuredQueryFormat,\n            queryHtmlTarget: configuredQueryFormat === QueryFormat.HTML ||\n                configuredQueryFormat === QueryFormat.HTMLGML2\n                ? 'iframe'\n                : undefined,\n            optionsFromCapabilities: true\n        };\n        const sourceOptions = Object.assign({}, baseSourceOptions, catalog.sourceOptions, { params });\n        let layerTitle;\n        if (catalog.forcedProperties) {\n            for (const property of catalog.forcedProperties) {\n                if (layer.Name === property.layerName && property.title) {\n                    layerTitle = property.title;\n                }\n            }\n        }\n        let abstract;\n        if (layer.Abstract) {\n            abstract = layer.Abstract;\n        }\n        else if (!layer.Abstract && catalog.abstract) {\n            abstract = catalog.abstract;\n        }\n        const layerPrepare = {\n            id: generateIdFromSourceOptions(sourceOptions),\n            type: CatalogItemType.Layer,\n            title: layerTitle !== undefined ? layerTitle : layer.Title,\n            address: idParent,\n            externalProvider: catalog.externalProvider || false,\n            options: {\n                maxResolution: getResolutionFromScale(layer.MaxScaleDenominator),\n                minResolution: getResolutionFromScale(layer.MinScaleDenominator),\n                metadata: {\n                    url: metadata ? metadata.OnlineResource : undefined,\n                    extern: metadata ? true : undefined,\n                    abstract,\n                    type: baseSourceOptions.type\n                },\n                legendOptions,\n                tooltip: { type: catalog.tooltipType },\n                sourceOptions\n            }\n        };\n        return ObjectUtils.removeUndefined(layerPrepare);\n    }\n    prepareCatalogItemGroup(itemListIn, regexes, idGroup, layersQueryFormat, catalog) {\n        const groupPrepare = {\n            id: idGroup,\n            type: CatalogItemType.Group,\n            title: itemListIn.Title,\n            address: catalog.id,\n            items: itemListIn.Layer.reduce((items, layer) => {\n                if (layer.Layer !== undefined) {\n                    // recursive, check next level\n                    const idGroupItemNextLevel = idGroup + `.group.${layer.Name || layer.Layer[0].Name}`;\n                    const groupItem = this.prepareCatalogItemGroup(layer, regexes, idGroupItemNextLevel, layersQueryFormat, catalog);\n                    items.push(groupItem);\n                }\n                else {\n                    if (this.testLayerRegexes(layer.Name, regexes) === false) {\n                        return items;\n                    }\n                    const layerItem = this.prepareCatalogItemLayer(layer, idGroup, layersQueryFormat, catalog);\n                    items.push(layerItem);\n                }\n                return items;\n            }, [])\n        };\n        return groupPrepare;\n    }\n    includeRecursiveItems(catalog, itemListIn, itemsPrepare, loopLevel = 0) {\n        // Dig all levels until last level (layer object are not defined on last level)\n        const regexes = (catalog.regFilters || []).map((pattern) => new RegExp(pattern));\n        if (!itemListIn.Layer) {\n            return;\n        }\n        for (const item of itemListIn.Layer) {\n            if (item.Layer !== undefined) {\n                // recursive, check next level\n                this.includeRecursiveItems(catalog, item, itemsPrepare, loopLevel + 1);\n                continue;\n            }\n            const layersQueryFormat = this.findCatalogInfoFormat(catalog);\n            // group(with layers) and layer(without group) level 1\n            if (loopLevel !== 0) {\n                // TODO: Slice that into multiple methods\n                // Define object of group layer\n                const idGroupItem = `catalog.group.${itemListIn.Name || item.Name}`;\n                const groupItem = this.prepareCatalogItemGroup(itemListIn, regexes, idGroupItem, layersQueryFormat, catalog);\n                if (groupItem.items.length !== 0) {\n                    itemsPrepare.push(groupItem);\n                }\n                // Break the group (don't add a group of layer for each of their layer!)\n                break;\n            }\n            else {\n                // layer without group\n                if (this.testLayerRegexes(item.Name, regexes) !== false) {\n                    const layerItem = this.prepareCatalogItemLayer(item, catalog.id, layersQueryFormat, catalog);\n                    itemsPrepare.push(layerItem);\n                }\n            }\n        }\n    }\n    getWMTSItems(catalog, capabilities) {\n        const layers = capabilities.Contents.Layer;\n        const regexes = (catalog.regFilters || []).map((pattern) => new RegExp(pattern));\n        if (capabilities.ServiceIdentification &&\n            capabilities.ServiceIdentification.Abstract &&\n            capabilities.ServiceIdentification.Abstract.length) {\n            catalog.abstract = capabilities.ServiceIdentification.Abstract;\n        }\n        return layers\n            .map((layer) => {\n            let forcedTitle;\n            if (catalog.forcedProperties) {\n                for (const property of catalog.forcedProperties) {\n                    if (layer.Title === property.layerName && property.title) {\n                        forcedTitle = property.title;\n                    }\n                }\n            }\n            if (this.testLayerRegexes(layer.Identifier, regexes) === false) {\n                return undefined;\n            }\n            const params = Object.assign({}, catalog.queryParams, {\n                version: '1.0.0'\n            });\n            const baseSourceOptions = {\n                type: 'wmts',\n                url: catalog.url,\n                crossOrigin: catalog.setCrossOriginAnonymous\n                    ? 'anonymous'\n                    : undefined,\n                layer: layer.Identifier,\n                matrixSet: catalog.matrixSet,\n                optionsFromCapabilities: true,\n                requestEncoding: catalog.requestEncoding || 'KVP',\n                style: 'default'\n            };\n            const sourceOptions = Object.assign({}, baseSourceOptions, catalog.sourceOptions, { params });\n            return ObjectUtils.removeUndefined({\n                id: generateIdFromSourceOptions(sourceOptions),\n                type: CatalogItemType.Layer,\n                title: forcedTitle !== undefined ? forcedTitle : layer.Title,\n                address: catalog.id,\n                externalProvider: catalog.externalProvider,\n                options: {\n                    sourceOptions,\n                    metadata: {\n                        url: undefined,\n                        extern: undefined,\n                        abstract: catalog.abstract,\n                        type: baseSourceOptions.type\n                    }\n                }\n            });\n        })\n            .filter((item) => item !== undefined);\n    }\n    getArcGISRESTItems(catalog, capabilities) {\n        const layers = capabilities.layers.filter(layer => !layer.type || layer.type === 'Feature Layer');\n        const regexes = (catalog.regFilters || []).map((pattern) => new RegExp(pattern));\n        let abstract;\n        if (capabilities.serviceDescription && capabilities.serviceDescription.length) {\n            abstract = capabilities.serviceDescription;\n        }\n        return layers\n            .map((layer) => {\n            let forcedTitle;\n            if (catalog.forcedProperties) {\n                for (const property of catalog.forcedProperties) {\n                    if (layer.name === property.layerName && property.title) {\n                        forcedTitle = property.title;\n                    }\n                }\n            }\n            if (this.testLayerRegexes(layer.id, regexes) === false) {\n                return undefined;\n            }\n            const baseSourceOptions = {\n                type: TypeCatalog[catalog.type],\n                url: catalog.url,\n                crossOrigin: catalog.setCrossOriginAnonymous\n                    ? 'anonymous'\n                    : undefined,\n                layer: layer.id,\n                queryable: true,\n                queryFormat: 'esrijson',\n                matrixSet: catalog.matrixSet,\n                optionsFromCapabilities: true,\n                style: 'default'\n            };\n            const sourceOptions = Object.assign({}, baseSourceOptions, catalog.sourceOptions);\n            return ObjectUtils.removeUndefined({\n                id: generateIdFromSourceOptions(sourceOptions),\n                type: CatalogItemType.Layer,\n                title: forcedTitle !== undefined ? forcedTitle : layer.name,\n                externalProvider: catalog.externalProvider,\n                address: catalog.id,\n                options: {\n                    sourceOptions,\n                    minResolution: getResolutionFromScale(layer.maxScale),\n                    maxResolution: getResolutionFromScale(layer.minScale),\n                    metadata: {\n                        url: undefined,\n                        extern: undefined,\n                        abstract,\n                        type: baseSourceOptions.type\n                    },\n                    title: forcedTitle !== undefined ? forcedTitle : layer.name\n                }\n            });\n        })\n            .filter((item) => item !== undefined);\n    }\n    testLayerRegexes(layerName, regexes) {\n        if (regexes.length === 0) {\n            return true;\n        }\n        return regexes.find((regex) => regex.test(layerName)) !== undefined;\n    }\n    retriveLayerInfoFormat(layerNameFromCatalog, layersQueryFormat) {\n        const currentLayerInfoFormat = layersQueryFormat.find((f) => f.layer === layerNameFromCatalog);\n        const baseInfoFormat = layersQueryFormat.find((f) => f.layer === '*');\n        let queryFormat;\n        if (currentLayerInfoFormat) {\n            queryFormat = currentLayerInfoFormat.queryFormat;\n        }\n        else if (baseInfoFormat) {\n            queryFormat = baseInfoFormat.queryFormat;\n        }\n        return queryFormat;\n    }\n    findCatalogInfoFormat(catalog) {\n        const layersQueryFormat = [];\n        if (!catalog.queryFormat) {\n            return layersQueryFormat;\n        }\n        Object.keys(catalog.queryFormat).forEach((configuredInfoFormat) => {\n            if (catalog.queryFormat[configuredInfoFormat] instanceof Array) {\n                catalog.queryFormat[configuredInfoFormat].forEach((layerName) => {\n                    if (!layersQueryFormat.find((specific) => specific.layer === layerName)) {\n                        layersQueryFormat.push({\n                            layer: layerName,\n                            queryFormat: configuredInfoFormat\n                        });\n                    }\n                });\n            }\n            else {\n                if (!layersQueryFormat.find((specific) => specific.layer === catalog.queryFormat[configuredInfoFormat])) {\n                    layersQueryFormat.push({\n                        layer: catalog.queryFormat[configuredInfoFormat],\n                        queryFormat: configuredInfoFormat\n                    });\n                }\n            }\n        });\n        return layersQueryFormat;\n    }\n}\nCatalogService.ɵfac = function CatalogService_Factory(t) { return new (t || CatalogService)(ɵɵinject(HttpClient), ɵɵinject(ConfigService), ɵɵinject(LanguageService), ɵɵinject(MessageService), ɵɵinject(CapabilitiesService)); };\nCatalogService.ɵprov = ɵɵdefineInjectable({ token: CatalogService, factory: CatalogService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CatalogService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: HttpClient }, { type: ConfigService }, { type: LanguageService }, { type: MessageService }, { type: CapabilitiesService }]; }, null); })();\n\nfunction CatalogBrowserComponent_ng_template_1_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵɵgetCurrentView();\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"igo-catalog-browser-group\", 3);\n    ɵɵlistener(\"addedChange\", function CatalogBrowserComponent_ng_template_1_ng_container_0_Template_igo_catalog_browser_group_addedChange_1_listener($event) { ɵɵrestoreView(_r5); const ctx_r4 = ɵɵnextContext(2); return ctx_r4.onGroupAddedChange($event); })(\"layerAddedChange\", function CatalogBrowserComponent_ng_template_1_ng_container_0_Template_igo_catalog_browser_group_layerAddedChange_1_listener($event) { ɵɵrestoreView(_r5); const ctx_r6 = ɵɵnextContext(2); return ctx_r6.onLayerAddedChange($event); });\n    ɵɵpipe(2, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const item_r1 = ɵɵnextContext().$implicit;\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"catalog\", ctx_r2.catalog)(\"group\", item_r1)(\"state\", ctx_r2.store.state)(\"resolution\", ɵɵpipeBind1(2, 6, ctx_r2.resolution$))(\"catalogAllowLegend\", ctx_r2.catalogAllowLegend)(\"toggleCollapsed\", ctx_r2.toggleCollapsedGroup);\n} }\nfunction CatalogBrowserComponent_ng_template_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵɵgetCurrentView();\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"igo-catalog-browser-layer\", 4);\n    ɵɵlistener(\"addedChange\", function CatalogBrowserComponent_ng_template_1_ng_container_1_Template_igo_catalog_browser_layer_addedChange_1_listener($event) { ɵɵrestoreView(_r9); const ctx_r8 = ɵɵnextContext(2); return ctx_r8.onLayerAddedChange($event); });\n    ɵɵpipe(2, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const item_r1 = ɵɵnextContext().$implicit;\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"layer\", item_r1)(\"resolution\", ɵɵpipeBind1(2, 4, ctx_r3.resolution$))(\"catalogAllowLegend\", ctx_r3.catalogAllowLegend)(\"added\", ctx_r3.store.state.get(item_r1).added);\n} }\nfunction CatalogBrowserComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, CatalogBrowserComponent_ng_template_1_ng_container_0_Template, 3, 8, \"ng-container\", 2);\n    ɵɵtemplate(1, CatalogBrowserComponent_ng_template_1_ng_container_1_Template, 3, 6, \"ng-container\", 2);\n} if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"ngIf\", ctx_r0.isGroup(item_r1));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.isLayer(item_r1));\n} }\n/**\n * Component to browse a catalog's groups and layers and display them on a map.\n */\nclass CatalogBrowserComponent {\n    constructor(layerService, cdRef) {\n        this.layerService = layerService;\n        this.cdRef = cdRef;\n        this.catalogAllowLegend = false;\n        /**\n         * Whether a group can be toggled when it's collapsed\n         */\n        this.toggleCollapsedGroup = true;\n    }\n    // private resolution$$: Subscription;\n    get resolution$() { return this.map.viewController.resolution$; }\n    /**\n     * @internal\n     */\n    ngOnInit() {\n        const currentItems = this.map.layers.map((layer) => {\n            return {\n                id: layer.options.source.id,\n                title: layer.title,\n                type: CatalogItemType.Layer\n            };\n        });\n        this.store.state.updateMany(currentItems, { added: true }, true);\n        if (this.catalog && this.catalog.sortDirection !== undefined) {\n            this.store.view.sort({\n                direction: this.catalog.sortDirection,\n                valueAccessor: (item) => item.title\n            });\n        }\n        const catalogShowLegend = this.catalog ? this.catalog.showLegend : false;\n        this.catalogAllowLegend = catalogShowLegend ? catalogShowLegend : this.catalogAllowLegend;\n        this.watcher = new EntityStoreWatcher(this.store, this.cdRef);\n    }\n    ngOnDestroy() {\n        this.watcher.destroy();\n    }\n    /**\n     * @internal\n     */\n    isGroup(item) {\n        return item.type === CatalogItemType.Group;\n    }\n    /**\n     * @internal\n     */\n    isLayer(item) {\n        return item.type === CatalogItemType.Layer;\n    }\n    /**\n     * When a layer is added or removed, add or remove it from the map\n     * @internal\n     * @param event Layer added event\n     */\n    onLayerAddedChange(event) {\n        const layer = event.layer;\n        this.store.state.update(layer, { added: event.added }, false);\n        event.added ? this.addLayerToMap(layer) : this.removeLayerFromMap(layer);\n    }\n    /**\n     * When a froup is added or removed, add or remove it from the map\n     * @internal\n     * @param event Group added event\n     */\n    onGroupAddedChange(event) {\n        const group = event.group;\n        this.store.state.update(group, { added: event.added }, false);\n        event.added ? this.addGroupToMap(group) : this.removeGroupFromMap(group);\n    }\n    /**\n     * Add layer to map\n     * @param layer Catalog layer\n     */\n    addLayerToMap(layer) {\n        this.addLayersToMap([layer]);\n    }\n    /**\n     * Remove layer from map\n     * @param layer Catalog layer\n     */\n    removeLayerFromMap(layer) {\n        this.removeLayersFromMap([layer]);\n    }\n    /**\n     * Add multiple layers to map\n     * @param layers Catalog layers\n     */\n    addLayersToMap(layers) {\n        const layers$ = layers.map((layer) => {\n            if (layer.options.sourceOptions.optionsFromApi === undefined) {\n                layer.options.sourceOptions.optionsFromApi = true;\n            }\n            return this.layerService.createAsyncLayer(layer.options);\n        });\n        zip(...layers$).subscribe((oLayers) => {\n            this.store.state.updateMany(layers, { added: true });\n            this.map.addLayers(oLayers);\n        });\n    }\n    /**\n     * Remove multiple layers from map\n     * @param layers Catalog layers\n     */\n    removeLayersFromMap(layers) {\n        layers.forEach((layer) => {\n            this.store.state.update(layer, { added: false });\n            if (layer.options.baseLayer === true) {\n                const oLayer = this.map.getLayerById(layer.options.id);\n                if (oLayer !== undefined) {\n                    this.map.removeLayer(oLayer);\n                }\n            }\n            else {\n                const oLayer = this.map.getLayerById(layer.id);\n                if (oLayer !== undefined) {\n                    this.map.removeLayer(oLayer);\n                }\n            }\n        });\n    }\n    /**\n     * Sort the layers by title. asc or desc.\n     * @internal\n     */\n    sortCatalogItemsByTitle(items, direction) {\n        const returnItem = items.sort((a, b) => {\n            const titleA = a.title.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n            const titleB = b.title.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n            if (titleA < titleB) {\n                return -1;\n            }\n            if (titleA > titleB) {\n                return 1;\n            }\n            return 0;\n        });\n        switch (direction) {\n            case 'asc':\n                return returnItem;\n            case 'desc':\n                return returnItem.reverse();\n            default:\n                return items;\n        }\n    }\n    /**\n     * Add all the layers of a group to map\n     * @param group Catalog group\n     */\n    addGroupToMap(group) {\n        let layers = group.items.filter((item) => {\n            const added = this.store.state.get(item).added || false;\n            return this.isLayer(item) && added === false;\n        });\n        if (this.catalog && this.catalog.sortDirection !== undefined) {\n            layers = this.sortCatalogItemsByTitle(layers, this.catalog.sortDirection);\n        }\n        this.addLayersToMap(layers.reverse());\n    }\n    /**\n     * Remove all the layers of a group from map\n     * @param group Catalog group\n     */\n    removeGroupFromMap(group) {\n        const layers = group.items.filter((item) => {\n            const added = this.store.state.get(item).added || false;\n            return this.isLayer(item) && added === true;\n        });\n        this.removeLayersFromMap(layers);\n    }\n}\nCatalogBrowserComponent.ɵfac = function CatalogBrowserComponent_Factory(t) { return new (t || CatalogBrowserComponent)(ɵɵdirectiveInject(LayerService), ɵɵdirectiveInject(ChangeDetectorRef)); };\nCatalogBrowserComponent.ɵcmp = ɵɵdefineComponent({ type: CatalogBrowserComponent, selectors: [[\"igo-catalog-browser\"]], inputs: { catalogAllowLegend: \"catalogAllowLegend\", catalog: \"catalog\", store: \"store\", map: \"map\", toggleCollapsedGroup: \"toggleCollapsedGroup\" }, decls: 3, vars: 5, consts: [[3, \"navigation\", \"selection\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [4, \"ngIf\"], [3, \"catalog\", \"group\", \"state\", \"resolution\", \"catalogAllowLegend\", \"toggleCollapsed\", \"addedChange\", \"layerAddedChange\"], [\"igoListItem\", \"\", 3, \"layer\", \"resolution\", \"catalogAllowLegend\", \"added\", \"addedChange\"]], template: function CatalogBrowserComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-list\", 0);\n        ɵɵtemplate(1, CatalogBrowserComponent_ng_template_1_Template, 2, 2, \"ng-template\", 1);\n        ɵɵpipe(2, \"async\");\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"navigation\", false)(\"selection\", false);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(2, 3, ctx.store.view.all$()));\n    } }, encapsulation: 2, changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CatalogBrowserComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-browser',\n                templateUrl: './catalog-browser.component.html',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: LayerService }, { type: ChangeDetectorRef }]; }, { catalogAllowLegend: [{\n            type: Input\n        }], catalog: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], toggleCollapsedGroup: [{\n            type: Input\n        }] }); })();\n\nconst _c0$4 = [\"renderedLegend\"];\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_mat_list_item_1_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\");\n    ɵɵelementStart(1, \"mat-icon\", 7);\n    ɵɵlistener(\"toggle\", function LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_mat_list_item_1_Template_mat_icon_toggle_1_listener($event) { ɵɵrestoreView(_r14); const item_r6 = ɵɵnextContext(2).$implicit; const ctx_r13 = ɵɵnextContext(3); return ctx_r13.toggleLegendItem($event, item_r6); });\n    ɵɵelementEnd();\n    ɵɵelementStart(2, \"h4\", 8);\n    ɵɵtext(3);\n    ɵɵpipe(4, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵnextContext();\n    const _r10 = ɵɵreference(3);\n    const item_r6 = ɵɵnextContext().$implicit;\n    const ctx_r9 = ɵɵnextContext(3);\n    ɵɵadvance(1);\n    ɵɵproperty(\"target\", _r10)(\"collapsed\", item_r6.collapsed);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\"\", ɵɵpipeBind1(4, 3, ctx_r9.computeItemTitle(item_r6)), \" \");\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_4_mat_option_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 11);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const style_r18 = ctx.$implicit;\n    ɵɵproperty(\"value\", style_r18.name);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(style_r18.title);\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_4_Template(rf, ctx) { if (rf & 1) {\n    const _r20 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\");\n    ɵɵelementStart(1, \"mat-form-field\");\n    ɵɵelementStart(2, \"mat-select\", 9);\n    ɵɵlistener(\"ngModelChange\", function LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_4_Template_mat_select_ngModelChange_2_listener($event) { ɵɵrestoreView(_r20); const ctx_r19 = ɵɵnextContext(5); return ctx_r19.currentStyle = $event; })(\"selectionChange\", function LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_4_Template_mat_select_selectionChange_2_listener() { ɵɵrestoreView(_r20); const ctx_r21 = ɵɵnextContext(5); return ctx_r21.onChangeStyle(); });\n    ɵɵpipe(3, \"translate\");\n    ɵɵtemplate(4, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_4_mat_option_4_Template, 2, 2, \"mat-option\", 10);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r11 = ɵɵnextContext(5);\n    ɵɵadvance(2);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(3, 3, \"igo.geo.layer.legend.selectStyle\"))(\"ngModel\", ctx_r11.currentStyle);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", ctx_r11.styles);\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_5_div_1_small_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"small\");\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, \"igo.geo.layer.legend.noLegendScale\"), \" \");\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_5_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\");\n    ɵɵelementStart(1, \"img\", 13, 14);\n    ɵɵlistener(\"load\", function LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_5_div_1_Template_img_load_1_listener() { ɵɵrestoreView(_r28); const item_r6 = ɵɵnextContext(3).$implicit; const ctx_r26 = ɵɵnextContext(3); return ctx_r26.onLoadImage(item_r6.title); });\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵtemplate(4, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_5_div_1_small_4_Template, 3, 3, \"small\", 0);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r6 = ɵɵnextContext(3).$implicit;\n    const ctx_r22 = ɵɵnextContext(3);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"id\", item_r6.title);\n    ɵɵpropertyInterpolate(\"src\", ctx_r22.legendGraphic, ɵɵsanitizeUrl);\n    ɵɵpropertyInterpolate(\"alt\", ɵɵpipeBind1(3, 4, \"igo.geo.layer.legend.loadingLegendText\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngIf\", ctx_r22.imagesHeight[item_r6.title] < 16);\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_5_div_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"div\", 15);\n} if (rf & 2) {\n    const item_r6 = ɵɵnextContext(3).$implicit;\n    ɵɵproperty(\"ngStyle\", item_r6.style)(\"innerHTML\", item_r6.html, ɵɵsanitizeHtml);\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\");\n    ɵɵtemplate(1, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_5_div_1_Template, 5, 6, \"div\", 0);\n    ɵɵtemplate(2, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_5_div_2_Template, 1, 2, \"div\", 12);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r6 = ɵɵnextContext(2).$implicit;\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", item_r6.url);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", item_r6.html);\n} }\nconst _c1 = function (a0) { return { \"with-title\": a0 }; };\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\");\n    ɵɵtemplate(1, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_mat_list_item_1_Template, 5, 5, \"mat-list-item\", 0);\n    ɵɵelementStart(2, \"div\", 5, 6);\n    ɵɵtemplate(4, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_4_Template, 5, 5, \"div\", 0);\n    ɵɵtemplate(5, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_div_5_Template, 3, 2, \"div\", 0);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r6 = ɵɵnextContext().$implicit;\n    const ctx_r8 = ɵɵnextContext(3);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", item_r6.title);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngClass\", ɵɵpureFunction1(4, _c1, item_r6.title));\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r8.currentStyle !== undefined);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !item_r6.collapsed);\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0, null, 4);\n    ɵɵtemplate(2, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_2_Template, 6, 6, \"div\", 1);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    ɵɵnextContext(2);\n    const _r3 = ɵɵreference(3);\n    const ctx_r5 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r5.getLegend)(\"ngIfElse\", _r3);\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_Template, 3, 2, \"ng-container\", 3);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const items_r1 = ɵɵnextContext().ngIf;\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", items_r1.slice().reverse());\n} }\nfunction LayerLegendComponent_ng_container_0_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"small\");\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, \"igo.geo.layer.legend.noLegendText\"), \" \");\n} }\nfunction LayerLegendComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, LayerLegendComponent_ng_container_0_ng_container_1_Template, 2, 1, \"ng-container\", 1);\n    ɵɵtemplate(2, LayerLegendComponent_ng_container_0_ng_template_2_Template, 3, 3, \"ng-template\", null, 2, ɵɵtemplateRefExtractor);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const items_r1 = ctx.ngIf;\n    const _r3 = ɵɵreference(3);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", items_r1.length)(\"ngIfElse\", _r3);\n} }\nclass LayerLegendComponent {\n    constructor(capabilitiesService, languageService, http, cdRef) {\n        this.capabilitiesService = capabilitiesService;\n        this.languageService = languageService;\n        this.http = http;\n        this.cdRef = cdRef;\n        this.updateLegendOnResolutionChange = false;\n        /**\n         * Observable of the legend items\n         */\n        this.legendItems$ = new BehaviorSubject([]);\n        /**\n         * The scale used to make the legend\n         */\n        this.scale = undefined;\n        /**\n         * The extent used to make the legend\n         */\n        this.view = undefined;\n        /**\n         * List of size of images displayed\n         */\n        this.imagesHeight = {};\n        /**\n         * if getLegendGraphic is authorized\n         */\n        this.getLegend = true;\n    }\n    /**\n     * On init, subscribe to the map's resolution and update the legend accordingly\n     */\n    ngOnInit() {\n        let lastlLegend = this.layer.legend;\n        this.styles = this.listStyles();\n        const sourceOptions = this.layer.options.source.options;\n        if (sourceOptions &&\n            sourceOptions.params &&\n            sourceOptions.params.STYLES) {\n            // if a styles is provided into the layers wms params\n            this.currentStyle = this.styles.find(style => style.name === sourceOptions.params.STYLES).name;\n        }\n        else if (!this.layer.legend) {\n            // if no legend is manually provided\n            if (this.styles && this.styles.length > 1) {\n                this.currentStyle = this.styles[0].name;\n            }\n        }\n        else if (this.styles && this.styles.length > 1) {\n            this.currentStyle = lastlLegend[0].currentStyle;\n        }\n        if (typeof this.layer.options.legendOptions !== 'undefined' && this.layer.options.legendOptions.display === false) {\n            lastlLegend = [];\n        }\n        else {\n            lastlLegend = this.layer.dataSource.getLegend(this.currentStyle, this.view);\n        }\n        if (this.updateLegendOnResolutionChange === true || sourceOptions.contentDependentLegend) {\n            const state$ = this.layer.map.viewController.state$;\n            this.state$$ = state$\n                .subscribe(() => this.onViewControllerStateChange());\n        }\n        else if (lastlLegend && lastlLegend.length !== 0) {\n            this.legendItems$.next(lastlLegend);\n            for (const legend of lastlLegend) {\n                this.getLegendGraphic(legend);\n            }\n        }\n    }\n    /**\n     * On destroy, unsubscribe to the map's view state\n     */\n    ngOnDestroy() {\n        if (this.state$$ !== undefined) {\n            this.state$$.unsubscribe();\n        }\n    }\n    getLegendGraphic(item) {\n        const secureIMG = new SecureImagePipe(this.http);\n        secureIMG.transform(item.url).pipe(catchError((err) => {\n            if (err.error) {\n                err.error.caught = true;\n                this.getLegend = false;\n                this.cdRef.detectChanges();\n                return err;\n            }\n        })).subscribe((legend) => {\n            this.legendGraphic = legend;\n            this.cdRef.detectChanges();\n        });\n    }\n    toggleLegendItem(collapsed, item) {\n        item.collapsed = collapsed;\n    }\n    transfertToggleLegendItem(newLegends) {\n        const outLegends = newLegends;\n        const lastLegends = this.layer.legend;\n        for (let i = 0; i < lastLegends.length; i++) {\n            outLegends[i].collapsed = lastLegends[i].collapsed;\n        }\n        return outLegends;\n    }\n    computeItemTitle(layerLegend) {\n        const layerOptions = this.layer.dataSource.options;\n        if (layerOptions.type !== 'wms') {\n            return of(layerLegend.title);\n        }\n        const layers = layerOptions.params.LAYERS.split(',');\n        const localLayerOptions = JSON.parse(JSON.stringify(layerOptions)); // to avoid to alter the original options.\n        localLayerOptions.params.LAYERS = layers.find(layer => layer === layerLegend.title);\n        return this.capabilitiesService\n            .getWMSOptions(localLayerOptions)\n            .pipe(map(wmsDataSourceOptions => {\n            return wmsDataSourceOptions._layerOptionsFromSource.title;\n        }));\n    }\n    /**\n     * On resolution change, compute the effective scale level and update the\n     * legend accordingly.\n     * @param resolution Map resolution\n     */\n    onViewControllerStateChange() {\n        this.view = {\n            resolution: this.layer.map.viewController.getResolution(),\n            extent: this.layer.map.viewController.getExtent(),\n            projection: this.layer.map.viewController.getOlProjection().getCode(),\n            scale: this.layer.map.viewController.getScale(),\n            size: this.layer.map.ol.getSize()\n        };\n        this.updateLegend();\n    }\n    /**\n     * Update the legend with scale level and style define\n     */\n    updateLegend() {\n        let legendItems = this.layer.dataSource.getLegend(this.currentStyle, this.view);\n        if (this.layer.legend && this.layer.legend.length > 1) {\n            legendItems = this.transfertToggleLegendItem(legendItems);\n        }\n        this.layer.legend = legendItems;\n        if (legendItems.length === 0 && this.legendItems$.value.length === 0) {\n            return;\n        }\n        this.legendItems$.next(legendItems);\n        for (const legend of this.legendItems$.value) {\n            this.getLegendGraphic(legend);\n        }\n    }\n    listStyles() {\n        const layerOptions = this.layer.options;\n        if (layerOptions && layerOptions.legendOptions) {\n            const translate = this.languageService.translate;\n            const title = translate.instant('igo.geo.layer.legend.default');\n            let stylesAvailable = [{ name: '', title }];\n            if (layerOptions.legendOptions.stylesAvailable) {\n                stylesAvailable = stylesAvailable.concat(layerOptions.legendOptions.stylesAvailable.filter(sA => (sA.name.normalize('NFD').replace(/[\\u0300-\\u036f]/gi, '') !== 'default' &&\n                    sA.name.normalize('NFD').replace(/[\\u0300-\\u036f]/gi, '') !== 'defaut')));\n            }\n            stylesAvailable.filter(sa => !sa.title).map((sa) => sa.title = sa.name);\n            stylesAvailable.map(s => s.title = s.title.charAt(0).toUpperCase() + s.title.slice(1).replace(/_/g, ' '));\n            return stylesAvailable;\n        }\n        return;\n    }\n    onChangeStyle() {\n        this.updateLegend();\n        let STYLES = '';\n        this.layer.dataSource.ol.getParams().LAYERS.split(',').map(layer => STYLES += this.currentStyle + ',');\n        STYLES = STYLES.slice(0, -1);\n        this.layer.dataSource.ol.updateParams({ STYLES });\n    }\n    onLoadImage(id) {\n        let elemRef;\n        if (this.renderedLegends.length === 1) {\n            elemRef = this.renderedLegends.first.nativeElement;\n        }\n        else {\n            elemRef = this.renderedLegends.find(renderedLegend => renderedLegend.nativeElement.id === id).nativeElement;\n        }\n        this.imagesHeight[id] = elemRef.height;\n    }\n}\nLayerLegendComponent.ɵfac = function LayerLegendComponent_Factory(t) { return new (t || LayerLegendComponent)(ɵɵdirectiveInject(CapabilitiesService), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(HttpClient), ɵɵdirectiveInject(ChangeDetectorRef)); };\nLayerLegendComponent.ɵcmp = ɵɵdefineComponent({ type: LayerLegendComponent, selectors: [[\"igo-layer-legend\"]], viewQuery: function LayerLegendComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵviewQuery(_c0$4, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.renderedLegends = _t);\n    } }, inputs: { updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", layer: \"layer\" }, decls: 2, vars: 3, consts: [[4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"noItems\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"renderedLegends\", \"\"], [1, \"igo-layer-legend\", 3, \"ngClass\"], [\"legend\", \"\"], [\"id\", \"legend-toggle\", \"mat-list-avatar\", \"\", \"igoCollapse\", \"\", \"svgIcon\", \"chevron-up\", 1, \"igo-chevron\", 3, \"target\", \"collapsed\", \"toggle\"], [\"matLine\", \"\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"ngModel\", \"ngModelChange\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [3, \"ngStyle\", \"innerHTML\", 4, \"ngIf\"], [3, \"id\", \"src\", \"alt\", \"load\"], [\"renderedLegend\", \"\"], [3, \"ngStyle\", \"innerHTML\"]], template: function LayerLegendComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, LayerLegendComponent_ng_container_0_Template, 4, 2, \"ng-container\", 0);\n        ɵɵpipe(1, \"async\");\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(1, 1, ctx.legendItems$));\n    } }, directives: [NgIf, NgForOf, NgClass, MatListItem, MatIcon, MatListAvatarCssMatStyler, CollapseDirective, MatLine, MatFormField, MatSelect, MatTooltip, NgControlStatus, NgModel, MatOption, NgStyle], pipes: [AsyncPipe, TranslatePipe], styles: [\".igo-layer-legend.with-title[_ngcontent-%COMP%]{padding-left:18px}img[_ngcontent-%COMP%]:after{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite;background-color:#fff;border:3px solid #f3f3f3;border-radius:50%;content:\\\" \\\";float:left;height:17px;position:relative;right:19px;top:-3px;width:17px}@-moz-document url-prefix(){img:after{margin-left:19px}}@-webkit-keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LayerLegendComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-layer-legend',\n                templateUrl: './layer-legend.component.html',\n                styleUrls: ['./layer-legend.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: CapabilitiesService }, { type: LanguageService }, { type: HttpClient }, { type: ChangeDetectorRef }]; }, { updateLegendOnResolutionChange: [{\n            type: Input\n        }], renderedLegends: [{\n            type: ViewChildren,\n            args: ['renderedLegend']\n        }], layer: [{\n            type: Input\n        }] }); })();\n\nfunction CatalogBrowserLayerComponent_mat_icon_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"mat-icon\", 9);\n} }\nfunction CatalogBrowserLayerComponent_button_4_mat_icon_1_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-icon\", 12);\n    ɵɵlistener(\"click\", function CatalogBrowserLayerComponent_button_4_mat_icon_1_Template_mat_icon_click_0_listener($event) { ɵɵrestoreView(_r6); return $event.stopPropagation(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.catalog.externalProvider.layer\"));\n} }\nfunction CatalogBrowserLayerComponent_button_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 10);\n    ɵɵtemplate(1, CatalogBrowserLayerComponent_button_4_mat_icon_1_Template, 2, 3, \"mat-icon\", 11);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r1.layer.externalProvider);\n} }\nfunction CatalogBrowserLayerComponent_igo_layer_legend_13_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-layer-legend\", 3);\n    ɵɵpipe(1, \"async\");\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵproperty(\"layer\", ɵɵpipeBind1(1, 1, ctx_r3.igoLayer$));\n} }\n/**\n * Catalog browser layer item\n */\nclass CatalogBrowserLayerComponent {\n    constructor(layerService) {\n        this.layerService = layerService;\n        this.inRange$ = new BehaviorSubject(true);\n        this.isPreview$ = new BehaviorSubject(false);\n        this.layerLegendShown$ = new BehaviorSubject(false);\n        this.igoLayer$ = new BehaviorSubject(undefined);\n        this.mouseInsideAdd = false;\n        this.catalogAllowLegend = false;\n        /**\n         * Whether the layer is already added to the map\n         */\n        this.added = false;\n        /**\n         * Event emitted when the add/remove button is clicked\n         */\n        this.addedChange = new EventEmitter();\n        this.addedLayerIsPreview = new EventEmitter();\n    }\n    /**\n     * @internal\n     */\n    get title() {\n        return getEntityTitle(this.layer);\n    }\n    /**\n     * @internal\n     */\n    get icon() {\n        return getEntityIcon(this.layer) || 'layers';\n    }\n    ngOnInit() {\n        this.isInResolutionsRange();\n        this.isPreview$$ = this.isPreview$.subscribe(value => this.addedLayerIsPreview.emit(value));\n    }\n    ngOnDestroy() {\n        this.isPreview$$.unsubscribe();\n    }\n    computeTitleTooltip() {\n        const layerOptions = this.layer.options;\n        if (!layerOptions.tooltip) {\n            return getEntityTitle(this.layer);\n        }\n        const layerTooltip = layerOptions.tooltip;\n        const layerMetadata = layerOptions.metadata;\n        switch (layerOptions.tooltip.type) {\n            case TooltipType.TITLE:\n                return this.layer.title;\n            case TooltipType.ABSTRACT:\n                if (layerMetadata && layerMetadata.abstract) {\n                    return layerMetadata.abstract;\n                }\n                else {\n                    return this.layer.title;\n                }\n            case TooltipType.CUSTOM:\n                if (layerTooltip && layerTooltip.text) {\n                    return layerTooltip.text;\n                }\n                else {\n                    return this.layer.title;\n                }\n            default:\n                return this.layer.title;\n        }\n    }\n    /**\n     * On mouse event, mouseenter /mouseleave\n     * @internal\n     */\n    onMouseEvent(event) {\n        this.onToggleClick(event);\n    }\n    askForLegend(event) {\n        this.layerLegendShown$.next(!this.layerLegendShown$.value);\n        this.layerService.createAsyncLayer(this.layer.options).pipe(first())\n            .subscribe(layer => this.igoLayer$.next(layer));\n    }\n    /**\n     * On toggle button click, emit the added change event\n     * @internal\n     */\n    onToggleClick(event) {\n        if (typeof this.lastTimeoutRequest !== 'undefined') {\n            clearTimeout(this.lastTimeoutRequest);\n        }\n        if (event.type === 'mouseenter' && this.mouseInsideAdd) {\n            return;\n        }\n        switch (event.type) {\n            case 'click':\n                if (!this.isPreview$.value) {\n                    if (this.added) {\n                        this.remove();\n                    }\n                    else {\n                        this.add();\n                    }\n                }\n                this.isPreview$.next(false);\n                break;\n            case 'mouseenter':\n                if (!this.isPreview$.value && !this.added) {\n                    this.lastTimeoutRequest = setTimeout(() => {\n                        this.add();\n                        this.isPreview$.next(true);\n                    }, 500);\n                }\n                this.mouseInsideAdd = true;\n                break;\n            case 'mouseleave':\n                if (this.isPreview$.value) {\n                    this.remove();\n                    this.isPreview$.next(false);\n                }\n                this.mouseInsideAdd = false;\n                break;\n            default:\n                break;\n        }\n    }\n    /**\n     * Emit added change event with added = true\n     */\n    add() {\n        if (!this.added) {\n            this.added = true;\n            this.addedChange.emit({ added: true, layer: this.layer });\n        }\n    }\n    /**\n     * Emit added change event with added = false\n     */\n    remove() {\n        if (this.added) {\n            this.added = false;\n            this.addedChange.emit({ added: false, layer: this.layer });\n        }\n    }\n    haveGroup() {\n        return !(!this.layer.address || this.layer.address.split('.').length === 1);\n    }\n    isInResolutionsRange() {\n        const minResolution = this.layer.options.minResolution || 0;\n        const maxResolution = this.layer.options.maxResolution || Infinity;\n        this.inRange$.next(this.resolution >= minResolution && this.resolution <= maxResolution);\n        return this.inRange$.value;\n    }\n    computeTooltip() {\n        if (this.added) {\n            return this.isPreview$.value\n                ? 'igo.geo.catalog.layer.addToMap'\n                : this.inRange$.value\n                    ? 'igo.geo.catalog.layer.removeFromMap'\n                    : 'igo.geo.catalog.layer.removeFromMapOutRange';\n        }\n        else {\n            return this.inRange$.value\n                ? 'igo.geo.catalog.layer.addToMap'\n                : 'igo.geo.catalog.layer.addToMapOutRange';\n        }\n    }\n}\nCatalogBrowserLayerComponent.ɵfac = function CatalogBrowserLayerComponent_Factory(t) { return new (t || CatalogBrowserLayerComponent)(ɵɵdirectiveInject(LayerService)); };\nCatalogBrowserLayerComponent.ɵcmp = ɵɵdefineComponent({ type: CatalogBrowserLayerComponent, selectors: [[\"igo-catalog-browser-layer\"]], inputs: { resolution: \"resolution\", catalogAllowLegend: \"catalogAllowLegend\", layer: \"layer\", added: \"added\" }, outputs: { addedChange: \"addedChange\", addedLayerIsPreview: \"addedLayerIsPreview\" }, decls: 16, vars: 21, consts: [[\"mat-list-avatar\", \"\", \"svgIcon\", \"blank\", 4, \"ngIf\"], [\"mat-line\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"ngClass\", \"matTooltip\", \"click\"], [\"disabled\", \"true\", \"mat-icon-button\", \"\", 4, \"ngIf\"], [3, \"layer\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"mouseenter\", \"mouseleave\", \"click\"], [\"matBadge\", \"\", \"igoMatBadgeIcon\", \"eye-off\", \"igoMatBadgeInverseColor\", \"true\", \"matBadgeDisabled\", \"true\", \"matBadgeSize\", \"small\", \"matBadgePosition\", \"after\", 3, \"matBadgeHidden\", \"svgIcon\"], [1, \"igo-cataloglayer-legend-container\"], [\"legend\", \"\"], [3, \"layer\", 4, \"ngIf\"], [\"mat-list-avatar\", \"\", \"svgIcon\", \"blank\"], [\"disabled\", \"true\", \"mat-icon-button\", \"\"], [\"class\", \"igo-cataloglayer-external-icon\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"primary\", \"svgIcon\", \"earth-arrow-right\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"primary\", \"svgIcon\", \"earth-arrow-right\", 1, \"igo-cataloglayer-external-icon\", 3, \"matTooltip\", \"click\"]], template: function CatalogBrowserLayerComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-list-item\");\n        ɵɵtemplate(1, CatalogBrowserLayerComponent_mat_icon_1_Template, 1, 0, \"mat-icon\", 0);\n        ɵɵelementStart(2, \"h4\", 1);\n        ɵɵlistener(\"click\", function CatalogBrowserLayerComponent_Template_h4_click_2_listener($event) { return ctx.askForLegend($event); });\n        ɵɵtext(3);\n        ɵɵelementEnd();\n        ɵɵtemplate(4, CatalogBrowserLayerComponent_button_4_Template, 2, 1, \"button\", 2);\n        ɵɵelement(5, \"igo-metadata-button\", 3);\n        ɵɵelementStart(6, \"button\", 4);\n        ɵɵlistener(\"mouseenter\", function CatalogBrowserLayerComponent_Template_button_mouseenter_6_listener($event) { return ctx.onMouseEvent($event); })(\"mouseleave\", function CatalogBrowserLayerComponent_Template_button_mouseleave_6_listener($event) { return ctx.onMouseEvent($event); })(\"click\", function CatalogBrowserLayerComponent_Template_button_click_6_listener($event) { return ctx.onToggleClick($event); });\n        ɵɵpipe(7, \"translate\");\n        ɵɵpipe(8, \"async\");\n        ɵɵelement(9, \"mat-icon\", 5);\n        ɵɵpipe(10, \"async\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(11, \"div\", 6, 7);\n        ɵɵtemplate(13, CatalogBrowserLayerComponent_igo_layer_legend_13_Template, 2, 3, \"igo-layer-legend\", 8);\n        ɵɵpipe(14, \"async\");\n        ɵɵpipe(15, \"async\");\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.haveGroup());\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngClass\", ctx.catalogAllowLegend ? \"igo-cataloglayer-title\" : \"\")(\"matTooltip\", ctx.computeTitleTooltip());\n        ɵɵadvance(1);\n        ɵɵtextInterpolate(ctx.title);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.layer.externalProvider);\n        ɵɵadvance(1);\n        ɵɵproperty(\"layer\", ctx.layer);\n        ɵɵadvance(1);\n        ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(7, 11, ctx.computeTooltip()))(\"color\", ɵɵpipeBind1(8, 13, ctx.isPreview$) ? \"\" : ctx.added ? \"warn\" : \"\");\n        ɵɵadvance(3);\n        ɵɵproperty(\"matBadgeHidden\", ctx.isInResolutionsRange())(\"svgIcon\", ɵɵpipeBind1(10, 15, ctx.isPreview$) ? \"plus\" : ctx.added ? \"delete\" : \"plus\");\n        ɵɵadvance(4);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(14, 17, ctx.layerLegendShown$) && ɵɵpipeBind1(15, 19, ctx.igoLayer$) && ctx.catalogAllowLegend);\n    } }, directives: [MatListItem, NgIf, MatLine, NgClass, MatTooltip, MetadataButtonComponent, MatButton, MatIcon, MatBadge, IgoBadgeIconDirective, MatListAvatarCssMatStyler, LayerLegendComponent], pipes: [TranslatePipe, AsyncPipe], styles: [\".igo-cataloglayer-title[_ngcontent-%COMP%]{cursor:pointer}.igo-cataloglayer-legend-container[_ngcontent-%COMP%]{margin-left:40px;padding-left:18px;width:calc(100% - 18px)}.igo-cataloglayer-external-icon[_ngcontent-%COMP%]{cursor:help}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CatalogBrowserLayerComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-browser-layer',\n                templateUrl: './catalog-browser-layer.component.html',\n                styleUrls: ['./catalog-browser-layer.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: LayerService }]; }, { resolution: [{\n            type: Input\n        }], catalogAllowLegend: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }], added: [{\n            type: Input\n        }], addedChange: [{\n            type: Output\n        }], addedLayerIsPreview: [{\n            type: Output\n        }] }); })();\n\nfunction CatalogBrowserGroupComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵɵgetCurrentView();\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"button\", 6);\n    ɵɵlistener(\"click\", function CatalogBrowserGroupComponent_ng_container_4_Template_button_click_1_listener() { ɵɵrestoreView(_r6); const ctx_r5 = ɵɵnextContext(); return ctx_r5.onToggleClick(); });\n    ɵɵpipe(2, \"translate\");\n    ɵɵpipe(3, \"async\");\n    ɵɵelement(4, \"mat-icon\", 7);\n    ɵɵelementEnd();\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(2, 2, \"igo.geo.catalog.group.removeFromMap\"))(\"disabled\", ɵɵpipeBind1(3, 4, ctx_r0.disabled$));\n} }\nfunction CatalogBrowserGroupComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 8);\n    ɵɵlistener(\"click\", function CatalogBrowserGroupComponent_ng_template_7_Template_button_click_0_listener() { ɵɵrestoreView(_r8); const ctx_r7 = ɵɵnextContext(); return ctx_r7.onToggleClick(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵpipe(2, \"async\");\n    ɵɵelement(3, \"mat-icon\", 9);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.geo.catalog.group.addToMap\"))(\"disabled\", ɵɵpipeBind1(2, 4, ctx_r2.disabled$));\n} }\nfunction CatalogBrowserGroupComponent_ng_template_11_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainer(0);\n} }\nfunction CatalogBrowserGroupComponent_ng_template_11_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵɵgetCurrentView();\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"igo-catalog-browser-layer\", 11);\n    ɵɵlistener(\"addedLayerIsPreview\", function CatalogBrowserGroupComponent_ng_template_11_ng_container_1_Template_igo_catalog_browser_layer_addedLayerIsPreview_1_listener($event) { ɵɵrestoreView(_r13); const ctx_r12 = ɵɵnextContext(2); return ctx_r12.onLayerPreview($event); })(\"addedChange\", function CatalogBrowserGroupComponent_ng_template_11_ng_container_1_Template_igo_catalog_browser_layer_addedChange_1_listener($event) { ɵɵrestoreView(_r13); const ctx_r14 = ɵɵnextContext(2); return ctx_r14.onLayerAddedChange($event); });\n    ɵɵelementEnd();\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const item_r9 = ɵɵnextContext().$implicit;\n    const ctx_r11 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"layer\", item_r9)(\"resolution\", ctx_r11.resolution)(\"catalogAllowLegend\", ctx_r11.catalogAllowLegend)(\"added\", ctx_r11.state.get(item_r9).added);\n} }\nfunction CatalogBrowserGroupComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, CatalogBrowserGroupComponent_ng_template_11_ng_container_0_Template, 1, 0, \"ng-container\", 10);\n    ɵɵtemplate(1, CatalogBrowserGroupComponent_ng_template_11_ng_container_1_Template, 2, 4, \"ng-container\", 10);\n} if (rf & 2) {\n    const item_r9 = ctx.$implicit;\n    const ctx_r4 = ɵɵnextContext();\n    ɵɵproperty(\"ngIf\", ctx_r4.isGroup(item_r9));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r4.isLayer(item_r9));\n} }\n/**\n * Catalog browser group item\n */\nclass CatalogBrowserGroupComponent {\n    constructor() {\n        /**\n         * Group's items store\n         * @internal\n         */\n        this.store = new EntityStore([]);\n        /**\n         * Whether all the layers of the group are added\n         * @internal\n         */\n        this.added$ = new BehaviorSubject(false);\n        this.preview$ = new BehaviorSubject(false);\n        /**\n         * Whether the toggle button is disabled\n         * @internal\n         */\n        this.disabled$ = new BehaviorSubject(false);\n        /**\n         * Whether the group is collapsed\n         */\n        this.collapsed = true;\n        this.catalogAllowLegend = false;\n        /**\n         * Whether the group can be toggled when it's collapsed\n         */\n        this.toggleCollapsed = true;\n        /**\n         * Event emitted when the add/remove button of the group is clicked\n         */\n        this.addedChange = new EventEmitter();\n        /**\n         * Event emitted when the add/remove button of a layer is clicked\n         */\n        this.layerAddedChange = new EventEmitter();\n    }\n    /**\n     * @internal\n     */\n    get title() {\n        return this.group.title;\n    }\n    /**\n     * @internal\n     */\n    ngOnInit() {\n        this.store.load(this.group.items);\n        this.evaluateAdded();\n        this.evaluateDisabled(this.collapsed);\n        if (this.catalog && this.catalog.sortDirection !== undefined) {\n            this.store.view.sort({\n                direction: this.catalog.sortDirection,\n                valueAccessor: (item) => item.title\n            });\n        }\n    }\n    ngOnDestroy() {\n        this.store.destroy();\n    }\n    /**\n     * @internal\n     */\n    isGroup(item) {\n        return item.type === CatalogItemType.Group;\n    }\n    /**\n     * @internal\n     */\n    isLayer(item) {\n        return item.type === CatalogItemType.Layer;\n    }\n    /**\n     * On toggle button click, emit the added change event\n     * @internal\n     */\n    onToggleClick() {\n        this.added$.value ? this.remove() : this.add();\n    }\n    /**\n     * On toggle button click, emit the added change event\n     * @internal\n     */\n    onToggleCollapsed(collapsed) {\n        this.evaluateDisabled(collapsed);\n    }\n    /**\n     * When a layer is added or removed, evaluate if all the layers of the group\n     * are now added or removed. If so, consider that the group itself is added\n     * or removed.\n     * @internal\n     * @param event Layer added change event\n     */\n    onLayerAddedChange(event) {\n        this.layerAddedChange.emit(event);\n        this.tryToggleGroup(event);\n    }\n    /**\n     * Emit added change event with added = true\n     */\n    add() {\n        this.added$.next(true);\n        this.addedChange.emit({\n            added: true,\n            group: this.group\n        });\n    }\n    /**\n     * Emit added change event with added = true\n     */\n    remove() {\n        this.added$.next(false);\n        this.addedChange.emit({\n            added: false,\n            group: this.group\n        });\n    }\n    onLayerPreview(event) {\n        this.preview$.next(event);\n    }\n    /**\n     * If all the layers of the group added or removed, add or remove the group itself.\n     * @param event The last layer added change event to occur\n     */\n    tryToggleGroup(event) {\n        const added = event.added;\n        const layer = event.layer;\n        const layersAdded = this.store.view\n            .all()\n            .filter((item) => item.id !== layer.id)\n            .map((item) => this.state.get(item).added || false);\n        if (layersAdded.every(value => value === added)) {\n            added ? this.add() : this.remove();\n        }\n        else if (this.added$.value === true) {\n            this.added$.next(false);\n        }\n    }\n    evaluateAdded() {\n        const added = this.store.all().every((item) => {\n            return (this.state.get(item).added || false) === true;\n        });\n        this.added$.next(added);\n    }\n    evaluateDisabled(collapsed) {\n        let disabled = false;\n        if (this.toggleCollapsed === false) {\n            disabled = collapsed;\n        }\n        this.disabled$.next(disabled);\n    }\n    onTitleClick() {\n        this.collapsed = !this.collapsed;\n    }\n}\nCatalogBrowserGroupComponent.ɵfac = function CatalogBrowserGroupComponent_Factory(t) { return new (t || CatalogBrowserGroupComponent)(); };\nCatalogBrowserGroupComponent.ɵcmp = ɵɵdefineComponent({ type: CatalogBrowserGroupComponent, selectors: [[\"igo-catalog-browser-group\"]], inputs: { catalog: \"catalog\", group: \"group\", collapsed: \"collapsed\", resolution: \"resolution\", catalogAllowLegend: \"catalogAllowLegend\", toggleCollapsed: \"toggleCollapsed\", state: \"state\" }, outputs: { addedChange: \"addedChange\", layerAddedChange: \"layerAddedChange\" }, decls: 13, vars: 13, consts: [[\"mat-list-avatar\", \"\", \"svgIcon\", \"chevron-up\", \"igoCollapse\", \"\", 1, \"igo-chevron\", 3, \"target\", \"collapsed\", \"toggle\"], [\"id\", \"catalog-group-title\", \"mat-line\", \"\", \"matTooltipShowDelay\", \"500\", 1, \"igo-catalog-group-title\", 3, \"matTooltip\", \"click\"], [4, \"ngIf\", \"ngIfElse\"], [\"notadded\", \"\"], [\"items\", \"\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"disabled\", \"click\"], [\"svgIcon\", \"delete\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"disabled\", \"click\"], [\"svgIcon\", \"plus\"], [4, \"ngIf\"], [\"igoListItem\", \"\", 3, \"layer\", \"resolution\", \"catalogAllowLegend\", \"added\", \"addedLayerIsPreview\", \"addedChange\"]], template: function CatalogBrowserGroupComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-list-item\");\n        ɵɵelementStart(1, \"mat-icon\", 0);\n        ɵɵlistener(\"toggle\", function CatalogBrowserGroupComponent_Template_mat_icon_toggle_1_listener($event) { return ctx.onToggleCollapsed($event); });\n        ɵɵelementEnd();\n        ɵɵelementStart(2, \"h4\", 1);\n        ɵɵlistener(\"click\", function CatalogBrowserGroupComponent_Template_h4_click_2_listener() { return ctx.onTitleClick(); });\n        ɵɵtext(3);\n        ɵɵelementEnd();\n        ɵɵtemplate(4, CatalogBrowserGroupComponent_ng_container_4_Template, 5, 6, \"ng-container\", 2);\n        ɵɵpipe(5, \"async\");\n        ɵɵpipe(6, \"async\");\n        ɵɵtemplate(7, CatalogBrowserGroupComponent_ng_template_7_Template, 4, 6, \"ng-template\", null, 3, ɵɵtemplateRefExtractor);\n        ɵɵelementEnd();\n        ɵɵelementStart(9, \"div\", null, 4);\n        ɵɵtemplate(11, CatalogBrowserGroupComponent_ng_template_11_Template, 2, 2, \"ng-template\", 5);\n        ɵɵpipe(12, \"async\");\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r1 = ɵɵreference(8);\n        const _r3 = ɵɵreference(10);\n        ɵɵadvance(1);\n        ɵɵproperty(\"target\", _r3)(\"collapsed\", ctx.collapsed);\n        ɵɵadvance(1);\n        ɵɵproperty(\"matTooltip\", ctx.title);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate(ctx.title);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(5, 7, ctx.added$) && !ɵɵpipeBind1(6, 9, ctx.preview$))(\"ngIfElse\", _r1);\n        ɵɵadvance(7);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(12, 11, ctx.store.view.all$()));\n    } }, directives: [MatListItem, MatIcon, MatListAvatarCssMatStyler, CollapseDirective, MatLine, MatTooltip, NgIf, NgForOf, MatButton, CatalogBrowserLayerComponent, ListItemDirective], pipes: [AsyncPipe, TranslatePipe], styles: [\".igo-catalog-group-title[_ngcontent-%COMP%]{cursor:pointer;opacity:.9}#catalog-group-title[_ngcontent-%COMP%]{font-weight:700}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CatalogBrowserGroupComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-browser-group',\n                templateUrl: './catalog-browser-group.component.html',\n                styleUrls: ['./catalog-browser-group.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], null, { catalog: [{\n            type: Input\n        }], group: [{\n            type: Input\n        }], collapsed: [{\n            type: Input\n        }], resolution: [{\n            type: Input\n        }], catalogAllowLegend: [{\n            type: Input\n        }], toggleCollapsed: [{\n            type: Input\n        }], state: [{\n            type: Input\n        }], addedChange: [{\n            type: Output\n        }], layerAddedChange: [{\n            type: Output\n        }] }); })();\n\nclass LayerListToolService {\n    constructor() {\n        this.sortAlpha = false;\n        this.onlyVisible = false;\n        this.onlyInRange = false;\n        this.keywordInitialized = false;\n        this.sortedAlphaInitialized = false;\n        this.onlyVisibleInitialized = false;\n        this.onlyInRangeInitialized = false;\n    }\n}\nLayerListToolService.ɵfac = function LayerListToolService_Factory(t) { return new (t || LayerListToolService)(); };\nLayerListToolService.ɵprov = ɵɵdefineInjectable({ token: LayerListToolService, factory: LayerListToolService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LayerListToolService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nfunction LayerItemComponent_mat_checkbox_1_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-checkbox\", 9);\n    ɵɵlistener(\"change\", function LayerItemComponent_mat_checkbox_1_Template_mat_checkbox_change_0_listener() { ɵɵrestoreView(_r7); const ctx_r6 = ɵɵnextContext(); return ctx_r6.check(); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"checked\", ctx_r0.layerCheck);\n} }\nconst _c0$5 = function (a0) { return { disabled: a0 }; };\nfunction LayerItemComponent_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 10);\n    ɵɵlistener(\"click\", function LayerItemComponent_button_4_Template_button_click_0_listener() { ɵɵrestoreView(_r9); const ctx_r8 = ɵɵnextContext(); return ctx_r8.toggleVisibility(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵpipe(2, \"translate\");\n    ɵɵelement(3, \"mat-icon\", 11);\n    ɵɵpipe(4, \"async\");\n    ɵɵpipe(5, \"async\");\n    ɵɵpipe(6, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"color\", ctx_r1.layer.visible ? \"primary\" : \"default\")(\"matTooltip\", ctx_r1.layer.visible ? ɵɵpipeBind1(1, 5, \"igo.geo.layer.hideLayer\") : ɵɵpipeBind1(2, 7, \"igo.geo.layer.showLayer\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"matBadgeHidden\", ɵɵpipeBind1(4, 9, ctx_r1.queryBadgeHidden$))(\"ngClass\", ɵɵpureFunction1(15, _c0$5, !ɵɵpipeBind1(5, 11, ctx_r1.inResolutionRange$)))(\"svgIcon\", ɵɵpipeBind1(6, 13, ctx_r1.layer.visible$) ? \"eye\" : \"eye-off\");\n} }\nfunction LayerItemComponent_button_5_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 12);\n    ɵɵlistener(\"click\", function LayerItemComponent_button_5_Template_button_click_0_listener() { ɵɵrestoreView(_r11); const ctx_r10 = ɵɵnextContext(); return ctx_r10.toggleVisibility(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵpipe(2, \"translate\");\n    ɵɵelement(3, \"mat-icon\", 11);\n    ɵɵpipe(4, \"async\");\n    ɵɵpipe(5, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵproperty(\"color\", ctx_r2.layer.visible ? \"primary\" : \"default\")(\"matTooltip\", ctx_r2.layer.visible ? ɵɵpipeBind1(1, 5, \"igo.geo.layer.hideLayer\") : ɵɵpipeBind1(2, 7, \"igo.geo.layer.showLayer\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"matBadgeHidden\", ɵɵpipeBind1(4, 9, ctx_r2.queryBadgeHidden$))(\"ngClass\", ɵɵpureFunction1(13, _c0$5, !ɵɵpipeBind1(5, 11, ctx_r2.inResolutionRange$)))(\"svgIcon\", ctx_r2.layer.visible ? \"eye\" : \"eye-off\");\n} }\nfunction LayerItemComponent_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 13);\n    ɵɵlistener(\"click\", function LayerItemComponent_button_6_Template_button_click_0_listener() { ɵɵrestoreView(_r13); const ctx_r12 = ɵɵnextContext(); return ctx_r12.toggleLayerTool(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 14);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.layer.moreOptions\"));\n} }\nfunction LayerItemComponent_igo_layer_legend_9_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-layer-legend\", 15);\n} if (rf & 2) {\n    const ctx_r5 = ɵɵnextContext();\n    ɵɵproperty(\"layer\", ctx_r5.layer)(\"updateLegendOnResolutionChange\", ctx_r5.updateLegendOnResolutionChange);\n} }\nclass LayerItemComponent {\n    constructor(networkService, renderer, elRef, cdRef) {\n        this.networkService = networkService;\n        this.renderer = renderer;\n        this.elRef = elRef;\n        this.cdRef = cdRef;\n        this.focusedCls = 'igo-layer-item-focused';\n        this.layerTool$ = new BehaviorSubject(false);\n        this.showLegend$ = new BehaviorSubject(true);\n        this.inResolutionRange$ = new BehaviorSubject(true);\n        this.queryBadgeHidden$ = new BehaviorSubject(true);\n        this._selectAll = false;\n        this.layers$ = new BehaviorSubject(undefined);\n        this.toggleLegendOnVisibilityChange = false;\n        this.expandLegendIfVisible = false;\n        this.updateLegendOnResolutionChange = false;\n        this.orderable = true;\n        this.lowerDisabled = false;\n        this.raiseDisabled = false;\n        this.queryBadge = false;\n        this.action = new EventEmitter(undefined);\n        this.checkbox = new EventEmitter();\n    }\n    get activeLayer() {\n        return this._activeLayer;\n    }\n    set activeLayer(value) {\n        if (value && this.layer && value.id === this.layer.id && !this.selectionMode) {\n            this.layerTool$.next(true);\n            this.renderer.addClass(this.elRef.nativeElement, this.focusedCls);\n        }\n        else {\n            this.renderer.removeClass(this.elRef.nativeElement, this.focusedCls);\n        }\n    }\n    get selectAll() {\n        return this._selectAll;\n    }\n    set selectAll(value) {\n        this._selectAll = value;\n        if (value === true) {\n            this.layerCheck = true;\n        }\n    }\n    get layer() {\n        return this._layer;\n    }\n    set layer(value) {\n        this._layer = value;\n        this.layers$.next(value);\n    }\n    get opacity() {\n        return this.layer.opacity * 100;\n    }\n    set opacity(opacity) {\n        this.layer.opacity = opacity / 100;\n    }\n    ngOnInit() {\n        if (this.layer.visible &&\n            this.expandLegendIfVisible &&\n            this.layer.firstLoadComponent === true) {\n            this.layer.firstLoadComponent = false;\n            this.layer.legendCollapsed = false;\n        }\n        this.toggleLegend(this.layer.legendCollapsed);\n        this.updateQueryBadge();\n        const resolution$ = this.layer.map.viewController.resolution$;\n        this.resolution$$ = resolution$.subscribe(() => {\n            this.onResolutionChange();\n        });\n        this.tooltipText = this.computeTooltip();\n        this.network$$ = this.networkService.currentState().subscribe((state) => {\n            this.state = state;\n            this.onResolutionChange();\n        });\n        this.layers$$ = this.layers$.subscribe(() => {\n            if (this.layer && this.layer.options.active) {\n                this.layerTool$.next(true);\n                this.renderer.addClass(this.elRef.nativeElement, this.focusedCls);\n            }\n        });\n        if (this.changeDetection) {\n            this.changeDetection.subscribe(() => this.cdRef.detectChanges());\n        }\n    }\n    ngOnDestroy() {\n        this.resolution$$.unsubscribe();\n        this.network$$.unsubscribe();\n        this.layers$$.unsubscribe();\n    }\n    toggleLegend(collapsed) {\n        this.layer.legendCollapsed = collapsed;\n        this.showLegend$.next(!collapsed);\n    }\n    toggleLegendOnClick() {\n        this.toggleLegend(this.showLegend$.value);\n    }\n    toggleVisibility() {\n        this.layer.visible = !this.layer.visible;\n        if (this.toggleLegendOnVisibilityChange) {\n            this.toggleLegend(!this.layer.visible);\n        }\n        this.updateQueryBadge();\n    }\n    computeTooltip() {\n        const layerOptions = this.layer.options;\n        if (!layerOptions.tooltip) {\n            return this.layer.title;\n        }\n        const layerTooltip = layerOptions.tooltip;\n        const layerMetadata = layerOptions.metadata;\n        switch (layerOptions.tooltip.type) {\n            case TooltipType.TITLE:\n                return this.layer.title;\n            case TooltipType.ABSTRACT:\n                if (layerMetadata && layerMetadata.abstract) {\n                    return layerMetadata.abstract;\n                }\n                else {\n                    return this.layer.title;\n                }\n            case TooltipType.CUSTOM:\n                if (layerTooltip && layerTooltip.text) {\n                    return layerTooltip.text;\n                }\n                else {\n                    return this.layer.title;\n                }\n            default:\n                return this.layer.title;\n        }\n    }\n    onResolutionChange() {\n        const inResolutionRange = this.layer.isInResolutionsRange;\n        if (inResolutionRange === false &&\n            this.updateLegendOnResolutionChange === true) {\n            this.toggleLegend(true);\n        }\n        this.inResolutionRange$.next(inResolutionRange);\n    }\n    updateQueryBadge() {\n        const hidden = this.queryBadge === false ||\n            this.layer.visible === false ||\n            !layerIsQueryable(this.layer);\n        this.queryBadgeHidden$.next(hidden);\n    }\n    toggleLayerTool() {\n        this.layerTool$.next(!this.layerTool$.getValue());\n        if (this.layerTool$.getValue() === true) {\n            this.renderer.addClass(this.elRef.nativeElement, this.focusedCls);\n        }\n        else {\n            this.renderer.removeClass(this.elRef.nativeElement, this.focusedCls);\n        }\n        this.action.emit(this.layer);\n    }\n    check() {\n        this.layerCheck = !this.layerCheck;\n        this.checkbox.emit({ layer: this.layer, check: this.layerCheck });\n    }\n}\nLayerItemComponent.ɵfac = function LayerItemComponent_Factory(t) { return new (t || LayerItemComponent)(ɵɵdirectiveInject(NetworkService), ɵɵdirectiveInject(Renderer2), ɵɵdirectiveInject(ElementRef), ɵɵdirectiveInject(ChangeDetectorRef)); };\nLayerItemComponent.ɵcmp = ɵɵdefineComponent({ type: LayerItemComponent, selectors: [[\"igo-layer-item\"]], inputs: { activeLayer: \"activeLayer\", selectAll: \"selectAll\", layerCheck: \"layerCheck\", layer: \"layer\", toggleLegendOnVisibilityChange: \"toggleLegendOnVisibilityChange\", expandLegendIfVisible: \"expandLegendIfVisible\", updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", orderable: \"orderable\", lowerDisabled: \"lowerDisabled\", raiseDisabled: \"raiseDisabled\", queryBadge: \"queryBadge\", selectionMode: \"selectionMode\", changeDetection: \"changeDetection\" }, outputs: { action: \"action\", checkbox: \"checkbox\" }, decls: 11, vars: 9, consts: [[1, \"igo-layer-list-item\"], [\"class\", \"layerCheck\", \"mat-list-icon\", \"\", 3, \"checked\", \"change\", 4, \"ngIf\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", 1, \"igo-layer-title\", 3, \"matTooltip\", \"click\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"class\", \"selection-eye\", \"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"class\", \"actions-button\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [1, \"igo-layer-legend-container\"], [\"legend\", \"\"], [3, \"layer\", \"updateLegendOnResolutionChange\", 4, \"ngIf\"], [\"mat-list-icon\", \"\", 1, \"layerCheck\", 3, \"checked\", \"change\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\"], [\"matBadge\", \"?\", \"matBadgeColor\", \"accent\", \"matBadgeSize\", \"small\", \"matBadgePosition\", \"after\", 3, \"matBadgeHidden\", \"ngClass\", \"svgIcon\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"selection-eye\", 3, \"color\", \"matTooltip\", \"click\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"mat-icon-button\", \"\", \"color\", \"primary\", 1, \"actions-button\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"dots-horizontal\"], [3, \"layer\", \"updateLegendOnResolutionChange\"]], template: function LayerItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-list-item\", 0);\n        ɵɵtemplate(1, LayerItemComponent_mat_checkbox_1_Template, 1, 1, \"mat-checkbox\", 1);\n        ɵɵelementStart(2, \"h4\", 2);\n        ɵɵlistener(\"click\", function LayerItemComponent_Template_h4_click_2_listener() { return ctx.toggleLegendOnClick(); });\n        ɵɵtext(3);\n        ɵɵelementEnd();\n        ɵɵtemplate(4, LayerItemComponent_button_4_Template, 7, 17, \"button\", 3);\n        ɵɵtemplate(5, LayerItemComponent_button_5_Template, 6, 15, \"button\", 4);\n        ɵɵtemplate(6, LayerItemComponent_button_6_Template, 3, 3, \"button\", 5);\n        ɵɵelementEnd();\n        ɵɵelementStart(7, \"div\", 6, 7);\n        ɵɵtemplate(9, LayerItemComponent_igo_layer_legend_9_Template, 1, 2, \"igo-layer-legend\", 8);\n        ɵɵpipe(10, \"async\");\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.selectionMode);\n        ɵɵadvance(1);\n        ɵɵproperty(\"matTooltip\", ctx.tooltipText);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate(ctx.layer.title);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", !ctx.selectionMode);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.selectionMode);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", !ctx.selectionMode);\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(10, 7, ctx.showLegend$));\n    } }, styles: [\"[_nghost-%COMP%]{overflow:hidden}mat-list-item[_ngcontent-%COMP%]     .mat-list-item-content .layerCheck{align-self:baseline;padding-right:0;width:16px}.igo-layer-list-item[_ngcontent-%COMP%]{clear:both;height:46px}.igo-layer-title[_ngcontent-%COMP%]{cursor:pointer}.igo-layer-legend-container[_ngcontent-%COMP%]{padding-left:18px;width:calc(100% - 18px)}mat-icon.disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}mat-icon[matBadge][_ngcontent-%COMP%]     .mat-badge-content{font-size:12px}.selection-eye[_ngcontent-%COMP%]{padding-right:45px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LayerItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-layer-item',\n                templateUrl: './layer-item.component.html',\n                styleUrls: ['./layer-item.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: NetworkService }, { type: Renderer2 }, { type: ElementRef }, { type: ChangeDetectorRef }]; }, { activeLayer: [{\n            type: Input\n        }], selectAll: [{\n            type: Input\n        }], layerCheck: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }], toggleLegendOnVisibilityChange: [{\n            type: Input\n        }], expandLegendIfVisible: [{\n            type: Input\n        }], updateLegendOnResolutionChange: [{\n            type: Input\n        }], orderable: [{\n            type: Input\n        }], lowerDisabled: [{\n            type: Input\n        }], raiseDisabled: [{\n            type: Input\n        }], queryBadge: [{\n            type: Input\n        }], selectionMode: [{\n            type: Input\n        }], changeDetection: [{\n            type: Input\n        }], action: [{\n            type: Output\n        }], checkbox: [{\n            type: Output\n        }] }); })();\n\nvar LayerListControlsEnum;\n(function (LayerListControlsEnum) {\n    LayerListControlsEnum[\"always\"] = \"always\";\n    LayerListControlsEnum[\"never\"] = \"never\";\n    LayerListControlsEnum[\"default\"] = \"default\";\n})(LayerListControlsEnum || (LayerListControlsEnum = {}));\nvar LayerListSelectVisibleEnum;\n(function (LayerListSelectVisibleEnum) {\n    LayerListSelectVisibleEnum[\"ALL_VISIBLE\"] = \"ALL_VISIBLE\";\n    LayerListSelectVisibleEnum[\"ALL_HIDDEN\"] = \"ALL_HIDDEN\";\n    LayerListSelectVisibleEnum[\"MIXED\"] = \"MIXED\";\n    LayerListSelectVisibleEnum[\"NULL\"] = \"NULL\";\n})(LayerListSelectVisibleEnum || (LayerListSelectVisibleEnum = {}));\nvar LayerListDisplacement;\n(function (LayerListDisplacement) {\n    LayerListDisplacement[\"Raise\"] = \"raise\";\n    LayerListDisplacement[\"Lower\"] = \"lower\";\n})(LayerListDisplacement || (LayerListDisplacement = {}));\n\nconst _c0$6 = [\"igoLayerItemToolbar\"];\nfunction LayerListComponent_igo_layer_list_tool_1_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-layer-list-tool\", 6);\n    ɵɵlistener(\"appliedFilterAndSort\", function LayerListComponent_igo_layer_list_tool_1_Template_igo_layer_list_tool_appliedFilterAndSort_0_listener($event) { ɵɵrestoreView(_r7); const ctx_r6 = ɵɵnextContext(); return ctx_r6.onAppliedFilterAndSortChange($event); })(\"selection\", function LayerListComponent_igo_layer_list_tool_1_Template_igo_layer_list_tool_selection_0_listener($event) { ɵɵrestoreView(_r7); const ctx_r8 = ɵɵnextContext(); return ctx_r8.toggleSelectionMode($event); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"layersAreAllVisible\", ctx_r0.layersAreAllVisible)(\"term\", ctx_r0.layerFilterAndSortOptions.keyword)(\"onlyVisible\", ctx_r0.layerFilterAndSortOptions.onlyVisible)(\"sortAlpha\", ctx_r0.layerFilterAndSortOptions.sortAlpha);\n} }\nfunction LayerListComponent_mat_list_item_3_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\");\n    ɵɵelementStart(1, \"mat-checkbox\", 7);\n    ɵɵlistener(\"change\", function LayerListComponent_mat_list_item_3_Template_mat_checkbox_change_1_listener() { ɵɵrestoreView(_r10); const ctx_r9 = ɵɵnextContext(); return ctx_r9.selectAll(); });\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"color\", !ctx_r1.selectAllCheck && ctx_r1.layersChecked.length > 0 ? \"accent\" : \"primary\")(\"checked\", ctx_r1.selectAllCheck)(\"indeterminate\", !ctx_r1.selectAllCheck && ctx_r1.layersChecked.length > 0);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ctx_r1.selectAllCheck ? ɵɵpipeBind1(3, 4, \"igo.geo.layer.deselectAll\") : ɵɵpipeBind1(4, 6, \"igo.geo.layer.selectAll\"), \" \");\n} }\nfunction LayerListComponent_ng_template_7_igo_layer_item_0_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-layer-item\", 9);\n    ɵɵlistener(\"action\", function LayerListComponent_ng_template_7_igo_layer_item_0_Template_igo_layer_item_action_0_listener($event) { ɵɵrestoreView(_r15); const ctx_r14 = ɵɵnextContext(2); return ctx_r14.toggleLayerTool($event); })(\"checkbox\", function LayerListComponent_ng_template_7_igo_layer_item_0_Template_igo_layer_item_checkbox_0_listener($event) { ɵɵrestoreView(_r15); const ctx_r16 = ɵɵnextContext(2); return ctx_r16.layersCheck($event); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const layer_r11 = ɵɵnextContext().$implicit;\n    const ctx_r13 = ɵɵnextContext();\n    ɵɵproperty(\"layer\", layer_r11)(\"activeLayer\", ctx_r13.activeLayer)(\"orderable\", ctx_r13.orderable && !layer_r11.baseLayer)(\"lowerDisabled\", ctx_r13.getLowerLayer().id === layer_r11.id)(\"raiseDisabled\", ctx_r13.getUpperLayer().id === layer_r11.id)(\"queryBadge\", ctx_r13.queryBadge)(\"expandLegendIfVisible\", ctx_r13.expandLegendOfVisibleLayers)(\"updateLegendOnResolutionChange\", ctx_r13.updateLegendOnResolutionChange)(\"toggleLegendOnVisibilityChange\", ctx_r13.toggleLegendOnVisibilityChange)(\"selectionMode\", ctx_r13.selection)(\"selectAll\", ctx_r13.selectAllCheck)(\"layerCheck\", layer_r11.options.check)(\"changeDetection\", ctx_r13.layerItemChangeDetection$);\n} }\nfunction LayerListComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, LayerListComponent_ng_template_7_igo_layer_item_0_Template, 1, 13, \"igo-layer-item\", 8);\n} if (rf & 2) {\n    const layer_r11 = ctx.$implicit;\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵproperty(\"ngIf\", !(ctx_r3.excludeBaseLayers && layer_r11.baseLayer));\n} }\nfunction LayerListComponent_igo_panel_9_button_2_Template(rf, ctx) { if (rf & 1) {\n    const _r22 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 25);\n    ɵɵlistener(\"click\", function LayerListComponent_igo_panel_9_button_2_Template_button_click_0_listener() { ɵɵrestoreView(_r22); const ctx_r21 = ɵɵnextContext(2); return ctx_r21.removeLayers(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 26);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.layer.removeLayer\"));\n} }\nfunction LayerListComponent_igo_panel_9_button_19_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 27);\n    ɵɵlistener(\"click\", function LayerListComponent_igo_panel_9_button_19_Template_button_click_0_listener() { ɵɵrestoreView(_r24); const ctx_r23 = ɵɵnextContext(2); return ctx_r23.zoomLayerExtents(ctx_r23.activeLayer); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 28);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.layer.zoomLayer\"));\n} }\nconst _c1$1 = function (a0) { return { layer: a0 }; };\nfunction LayerListComponent_igo_panel_9_Template(rf, ctx) { if (rf & 1) {\n    const _r26 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-panel\", 10);\n    ɵɵelementStart(1, \"div\", 11);\n    ɵɵtemplate(2, LayerListComponent_igo_panel_9_button_2_Template, 3, 3, \"button\", 12);\n    ɵɵelementStart(3, \"button\", 13);\n    ɵɵlistener(\"click\", function LayerListComponent_igo_panel_9_Template_button_click_3_listener() { ɵɵrestoreView(_r26); const ctx_r25 = ɵɵnextContext(); return ctx_r25.moveActiveLayer(ctx_r25.activeLayer, ctx_r25.layerListDisplacement.Lower); });\n    ɵɵpipe(4, \"translate\");\n    ɵɵpipe(5, \"translate\");\n    ɵɵelement(6, \"mat-icon\", 14);\n    ɵɵelementEnd();\n    ɵɵelementStart(7, \"button\", 15);\n    ɵɵlistener(\"click\", function LayerListComponent_igo_panel_9_Template_button_click_7_listener() { ɵɵrestoreView(_r26); const ctx_r27 = ɵɵnextContext(); return ctx_r27.moveActiveLayer(ctx_r27.activeLayer, ctx_r27.layerListDisplacement.Raise); });\n    ɵɵpipe(8, \"translate\");\n    ɵɵpipe(9, \"translate\");\n    ɵɵelement(10, \"mat-icon\", 16);\n    ɵɵelementEnd();\n    ɵɵelementStart(11, \"button\", 17);\n    ɵɵpipe(12, \"translate\");\n    ɵɵelement(13, \"mat-icon\", 18);\n    ɵɵelementEnd();\n    ɵɵelementStart(14, \"mat-menu\", 19, 20);\n    ɵɵelementStart(16, \"div\", 21);\n    ɵɵelementStart(17, \"mat-slider\", 22);\n    ɵɵlistener(\"input\", function LayerListComponent_igo_panel_9_Template_mat_slider_input_17_listener($event) { ɵɵrestoreView(_r26); const ctx_r28 = ɵɵnextContext(); return ctx_r28.changeOpacity($event); })(\"click\", function LayerListComponent_igo_panel_9_Template_mat_slider_click_17_listener($event) { ɵɵrestoreView(_r26); return $event.stopPropagation(); });\n    ɵɵpipe(18, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵtemplate(19, LayerListComponent_igo_panel_9_button_19_Template, 3, 3, \"button\", 23);\n    ɵɵelementContainer(20, 24);\n    ɵɵprojection(21);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r19 = ɵɵreference(15);\n    const ctx_r4 = ɵɵnextContext();\n    ɵɵproperty(\"title\", ctx_r4.activeLayer.title);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r4.isLayerRemovable(ctx_r4.activeLayer));\n    ɵɵadvance(1);\n    ɵɵproperty(\"matTooltip\", ctx_r4.sortAlpha || ctx_r4.onlyVisible || ctx_r4.keyword ? ɵɵpipeBind1(4, 20, \"igo.geo.layer.filterLowerLayer\") : ɵɵpipeBind1(5, 22, \"igo.geo.layer.lowerLayer\"))(\"disabled\", ctx_r4.lowerDisabled);\n    ɵɵadvance(3);\n    ɵɵproperty(\"matBadge\", ctx_r4.sortAlpha || ctx_r4.onlyVisible || ctx_r4.keyword ? \"!\" : \"\")(\"matBadgeHidden\", ctx_r4.lowerDisabled);\n    ɵɵadvance(1);\n    ɵɵproperty(\"matTooltip\", ctx_r4.sortAlpha || ctx_r4.onlyVisible || ctx_r4.keyword ? ɵɵpipeBind1(8, 24, \"igo.geo.layer.filterRaiseLayer\") : ɵɵpipeBind1(9, 26, \"igo.geo.layer.raiseLayer\"))(\"disabled\", ctx_r4.raiseDisabled);\n    ɵɵadvance(3);\n    ɵɵproperty(\"matBadge\", ctx_r4.sortAlpha || ctx_r4.onlyVisible || ctx_r4.keyword ? \"!\" : \"\")(\"matBadgeHidden\", ctx_r4.raiseDisabled);\n    ɵɵadvance(1);\n    ɵɵproperty(\"matMenuTriggerFor\", _r19)(\"matTooltip\", ɵɵpipeBind1(12, 28, \"igo.geo.layer.opacity\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"matBadge\", ctx_r4.badgeOpacity);\n    ɵɵadvance(4);\n    ɵɵproperty(\"min\", 0)(\"max\", 100)(\"value\", ctx_r4.opacity)(\"matTooltip\", ɵɵpipeBind1(18, 30, \"igo.geo.layer.opacity\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r4.activeLayerIsValid(ctx_r4.activeLayer));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngTemplateOutlet\", ctx_r4.templateLayerToolbar)(\"ngTemplateOutletContext\", ɵɵpureFunction1(32, _c1$1, ctx_r4.activeLayer));\n} }\nfunction LayerListComponent_igo_panel_10_mat_slider_25_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-slider\", 37);\n    ɵɵlistener(\"ngModelChange\", function LayerListComponent_igo_panel_10_mat_slider_25_Template_mat_slider_ngModelChange_0_listener($event) { ɵɵrestoreView(_r34); const ctx_r33 = ɵɵnextContext(2); return ctx_r33.checkOpacity = $event; })(\"click\", function LayerListComponent_igo_panel_10_mat_slider_25_Template_mat_slider_click_0_listener($event) { ɵɵrestoreView(_r34); return $event.stopPropagation(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r31 = ɵɵnextContext(2);\n    ɵɵproperty(\"min\", 0)(\"max\", 100)(\"ngModel\", ctx_r31.checkOpacity)(\"matTooltip\", ɵɵpipeBind1(1, 4, \"igo.geo.layer.opacity\"));\n} }\nfunction LayerListComponent_igo_panel_10_button_26_Template(rf, ctx) { if (rf & 1) {\n    const _r37 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 27);\n    ɵɵlistener(\"click\", function LayerListComponent_igo_panel_10_button_26_Template_button_click_0_listener() { ɵɵrestoreView(_r37); const ctx_r36 = ɵɵnextContext(2); return ctx_r36.zoomLayersExtents(ctx_r36.layersChecked); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 38);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.layer.zoomLayers\"));\n} }\nfunction LayerListComponent_igo_panel_10_Template(rf, ctx) { if (rf & 1) {\n    const _r39 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-panel\", 10);\n    ɵɵpipe(1, \"translate\");\n    ɵɵelementStart(2, \"div\", 29);\n    ɵɵelementStart(3, \"button\", 30);\n    ɵɵlistener(\"click\", function LayerListComponent_igo_panel_10_Template_button_click_3_listener() { ɵɵrestoreView(_r39); const ctx_r38 = ɵɵnextContext(); return ctx_r38.removeLayers(ctx_r38.layersChecked); });\n    ɵɵpipe(4, \"translate\");\n    ɵɵpipe(5, \"translate\");\n    ɵɵelement(6, \"mat-icon\", 31);\n    ɵɵelementEnd();\n    ɵɵelementStart(7, \"button\", 32);\n    ɵɵlistener(\"click\", function LayerListComponent_igo_panel_10_Template_button_click_7_listener() { ɵɵrestoreView(_r39); const ctx_r40 = ɵɵnextContext(); return ctx_r40.toggleVisibility(ctx_r40.layersChecked); });\n    ɵɵpipe(8, \"translate\");\n    ɵɵpipe(9, \"translate\");\n    ɵɵelement(10, \"mat-icon\", 33);\n    ɵɵelementEnd();\n    ɵɵelementStart(11, \"button\", 13);\n    ɵɵlistener(\"click\", function LayerListComponent_igo_panel_10_Template_button_click_11_listener() { ɵɵrestoreView(_r39); const ctx_r41 = ɵɵnextContext(); return ctx_r41.lowerLayers(ctx_r41.layersChecked); });\n    ɵɵpipe(12, \"translate\");\n    ɵɵpipe(13, \"translate\");\n    ɵɵelement(14, \"mat-icon\", 14);\n    ɵɵelementEnd();\n    ɵɵelementStart(15, \"button\", 15);\n    ɵɵlistener(\"click\", function LayerListComponent_igo_panel_10_Template_button_click_15_listener() { ɵɵrestoreView(_r39); const ctx_r42 = ɵɵnextContext(); return ctx_r42.raiseLayers(ctx_r42.layersChecked); });\n    ɵɵpipe(16, \"translate\");\n    ɵɵpipe(17, \"translate\");\n    ɵɵelement(18, \"mat-icon\", 16);\n    ɵɵelementEnd();\n    ɵɵelementStart(19, \"button\", 34);\n    ɵɵpipe(20, \"translate\");\n    ɵɵelement(21, \"mat-icon\", 35);\n    ɵɵelementEnd();\n    ɵɵelementStart(22, \"mat-menu\", 19, 20);\n    ɵɵelementStart(24, \"div\", 21);\n    ɵɵtemplate(25, LayerListComponent_igo_panel_10_mat_slider_25_Template, 2, 6, \"mat-slider\", 36);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵtemplate(26, LayerListComponent_igo_panel_10_button_26_Template, 3, 3, \"button\", 23);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r30 = ɵɵreference(23);\n    const ctx_r5 = ɵɵnextContext();\n    ɵɵproperty(\"title\", ɵɵpipeBind1(1, 21, \"igo.geo.layer.tools\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"disabled\", ctx_r5.layersChecked.length === 0)(\"matTooltip\", ctx_r5.isAllLayersRemovable(ctx_r5.layersChecked) ? ɵɵpipeBind1(4, 23, \"igo.geo.layer.removeSelectedLayers\") : ɵɵpipeBind1(5, 25, \"igo.geo.layer.removeSelectedLayersRestriction\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"matBadge\", \"!\")(\"matBadgeHidden\", ctx_r5.isAllLayersRemovable(ctx_r5.layersChecked));\n    ɵɵadvance(1);\n    ɵɵproperty(\"disabled\", ctx_r5.layersChecked.length === 0)(\"matTooltip\", ctx_r5.statusSelectedLayersCheck === \"ALL_HIDDEN\" ? ɵɵpipeBind1(8, 27, \"igo.geo.layer.showSelectedLayers\") : ɵɵpipeBind1(9, 29, \"igo.geo.layer.hideSelectedLayers\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"svgIcon\", ctx_r5.statusSelectedLayersCheck === \"ALL_HIDDEN\" ? \"eye-off\" : \"eye\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"matTooltip\", ctx_r5.sortAlpha || ctx_r5.onlyVisible || ctx_r5.keyword ? ɵɵpipeBind1(12, 31, \"igo.geo.layer.filterLowerLayer\") : ɵɵpipeBind1(13, 33, \"igo.geo.layer.lowerLayer\"))(\"disabled\", ctx_r5.lowerDisabledSelection);\n    ɵɵadvance(3);\n    ɵɵproperty(\"matBadge\", ctx_r5.sortAlpha || ctx_r5.onlyVisible || ctx_r5.keyword ? \"!\" : \"\")(\"matBadgeHidden\", ctx_r5.lowerDisabledSelection);\n    ɵɵadvance(1);\n    ɵɵproperty(\"matTooltip\", ctx_r5.sortAlpha || ctx_r5.onlyVisible || ctx_r5.keyword ? ɵɵpipeBind1(16, 35, \"igo.geo.layer.filterRaiseLayer\") : ɵɵpipeBind1(17, 37, \"igo.geo.layer.raiseLayer\"))(\"disabled\", ctx_r5.raiseDisabledSelection);\n    ɵɵadvance(3);\n    ɵɵproperty(\"matBadge\", ctx_r5.sortAlpha || ctx_r5.onlyVisible || ctx_r5.keyword ? \"!\" : \"\")(\"matBadgeHidden\", ctx_r5.raiseDisabledSelection);\n    ɵɵadvance(1);\n    ɵɵproperty(\"disabled\", ctx_r5.layersChecked.length === 0)(\"matMenuTriggerFor\", _r30)(\"matTooltip\", ɵɵpipeBind1(20, 39, \"igo.geo.layer.opacity\"));\n    ɵɵadvance(6);\n    ɵɵproperty(\"ngIf\", ctx_r5.layersChecked.length);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r5.layersChecked.length !== 0 && ctx_r5.activeLayersAreValid(ctx_r5.layersChecked));\n} }\nconst _c2 = [[[\"\", \"igoLayerItemToolbar\", \"\"]]];\nconst _c3 = function (a0, a1, a2) { return { \"igo-list-tools-multi\": a0, \"igo-list-tools-single\": a1, \"igo-list-no-tools\": a2 }; };\nconst _c4 = [\"[igoLayerItemToolbar]\"];\n// TODO: This class could use a clean up. Also, some methods could be moved ealsewhere\nclass LayerListComponent {\n    constructor(elRef) {\n        this.elRef = elRef;\n        this.orderable = true;\n        this.thresholdToFilterAndSort = 5;\n        this.layers$ = new BehaviorSubject([]);\n        this.change$ = new ReplaySubject(1);\n        this.showToolbar$ = new BehaviorSubject(false);\n        this.hideSelectedLayers = true;\n        this.activeLayer$ = new BehaviorSubject(undefined);\n        this.layersChecked = [];\n        this.layerItemChangeDetection$ = new BehaviorSubject(undefined);\n        this.layersAreAllVisible = true;\n        this.ogcButton = true;\n        this.timeButton = true;\n        this.floatLabel = 'auto';\n        this.layerFilterAndSortOptions = {};\n        this.excludeBaseLayers = false;\n        this.toggleLegendOnVisibilityChange = false;\n        this.expandLegendOfVisibleLayers = false;\n        this.updateLegendOnResolutionChange = false;\n        this.queryBadge = false;\n        this.appliedFilterAndSort = new EventEmitter();\n        this._keyword = undefined;\n        this._onlyVisible = false;\n        this._sortedAlpha = false;\n        this.toggleOpacity = false;\n        this.selectAllCheck$ = new BehaviorSubject(undefined);\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    set layers(value) {\n        this._layers = value;\n        this.next();\n    }\n    get layers() {\n        return this._layers;\n    }\n    set activeLayer(value) {\n        this._activeLayer = value;\n        this.activeLayer$.next(value);\n    }\n    get activeLayer() {\n        return this._activeLayer;\n    }\n    get keyword() {\n        return this._keyword;\n    }\n    set keyword(value) {\n        this._keyword = value;\n        this.next();\n    }\n    get onlyVisible() {\n        return this._onlyVisible;\n    }\n    set onlyVisible(value) {\n        this._onlyVisible = value;\n        this.next();\n    }\n    get sortAlpha() {\n        return this._sortedAlpha;\n    }\n    set sortAlpha(value) {\n        this._sortedAlpha = value;\n        this.next();\n    }\n    get opacity() {\n        return Math.round(this.activeLayer$.getValue().opacity * 100);\n    }\n    set opacity(opacity) {\n        this.activeLayer$.getValue().opacity = opacity / 100;\n    }\n    get badgeOpacity() {\n        if (this.opacity === 100) {\n            return;\n        }\n        return this.opacity;\n    }\n    get raiseDisabled() {\n        if (!this.orderable ||\n            this.activeLayer.baseLayer ||\n            this.getUpperLayer().id === this.activeLayer.id ||\n            this.isUpperBaselayer(this.activeLayer)) {\n            return true;\n        }\n        return false;\n    }\n    get lowerDisabled() {\n        if (!this.orderable ||\n            this.activeLayer.baseLayer ||\n            this.getLowerLayer().id === this.activeLayer.id ||\n            this.isLowerBaselayer(this.activeLayer)) {\n            return true;\n        }\n        return false;\n    }\n    get raiseDisabledSelection() {\n        if (this.layersChecked.length === 0 ||\n            !this.orderable ||\n            !this.raisableLayers(this.layersChecked) ||\n            this.selectAllCheck === true) {\n            return true;\n        }\n        return false;\n    }\n    get lowerDisabledSelection() {\n        if (this.layersChecked.length === 0 ||\n            !this.orderable ||\n            !this.lowerableLayers(this.layersChecked) ||\n            this.selectAllCheck === true) {\n            return true;\n        }\n        return false;\n    }\n    get checkOpacity() {\n        return this.layersCheckedOpacity() * 100;\n    }\n    set checkOpacity(opacity) {\n        for (const layer of this.layersChecked) {\n            layer.opacity = opacity / 100;\n        }\n    }\n    get layerListDisplacement() {\n        return LayerListDisplacement;\n    }\n    /**\n     * Subscribe to the search term stream and trigger researches\n     * @internal\n     */\n    ngOnInit() {\n        this.change$$ = this.change$\n            .pipe(debounce(() => {\n            return this.layers.length === 0 ? EMPTY : timer(50);\n        }))\n            .subscribe(() => {\n            this.showToolbar$.next(this.computeShowToolbar());\n            this.layers$.next(this.computeLayers(this.layers.slice(0)));\n            this.appliedFilterAndSort.emit({\n                keyword: this.keyword,\n                sortAlpha: this.sortAlpha,\n                onlyVisible: this.onlyVisible\n            });\n        });\n        this.selectAllCheck$$ = this.selectAllCheck$.subscribe((value) => {\n            this.selectAllCheck = value;\n        });\n        this.layers$$ = this.layers$.subscribe(() => {\n            if (this.layers) {\n                let checks = 0;\n                for (const layer of this.layers) {\n                    if (layer.options.active) {\n                        this.activeLayer = layer;\n                        this.layerTool = true;\n                    }\n                    if (layer.options.check) {\n                        checks += 1;\n                    }\n                }\n                if (this.excludeBaseLayers) {\n                    this.selectAllCheck =\n                        checks ===\n                            this.layers.filter((lay) => lay.baseLayer !== true && lay.showInLayerList).length\n                            ? true\n                            : false;\n                }\n                else {\n                    this.selectAllCheck =\n                        checks === this.layers.filter((lay) => lay.showInLayerList).length\n                            ? true\n                            : false;\n                }\n            }\n        });\n    }\n    ngOnDestroy() {\n        this.change$$.unsubscribe();\n        this.selectAllCheck$$.unsubscribe();\n        this.layers$$.unsubscribe();\n    }\n    activeLayerIsValid(layer) {\n        let valid = false;\n        const layerExtent = layer.options.extent;\n        const maxLayerZoomExtent = this.map.viewController.maxLayerZoomExtent;\n        if (layerExtent) {\n            if (maxLayerZoomExtent) {\n                valid = containsExtent(maxLayerZoomExtent, layerExtent);\n            }\n            else {\n                valid = true;\n            }\n        }\n        return valid;\n    }\n    activeLayersAreValid(layers) {\n        let valid = false;\n        const layersExtent = createEmpty();\n        const maxLayerZoomExtent = this.map.viewController.maxLayerZoomExtent;\n        for (const layer of layers) {\n            const layerExtent = layer.options.extent;\n            if (layerExtent && !layerExtent.includes(Infinity)) {\n                extend(layersExtent, layerExtent);\n            }\n        }\n        if (!isEmpty(layersExtent)) {\n            if (maxLayerZoomExtent) {\n                valid = (containsExtent(maxLayerZoomExtent, layersExtent));\n            }\n            else {\n                valid = true;\n            }\n        }\n        return valid;\n    }\n    zoomLayerExtents(layer) {\n        this.map.viewController.zoomToExtent(layer.options.extent);\n    }\n    zoomLayersExtents(layers) {\n        const layersExtent = createEmpty();\n        for (const layer of layers) {\n            const layerExtent = layer.options.extent;\n            if (layerExtent) {\n                extend(layersExtent, layerExtent);\n            }\n        }\n        this.map.viewController.zoomToExtent(layersExtent);\n    }\n    changeOpacity(event) {\n        this.opacity = event.value;\n    }\n    clearKeyword() {\n        this.keyword = undefined;\n    }\n    getLowerLayer() {\n        return this.layers\n            .filter((l) => !l.baseLayer)\n            .reduce((prev, current) => {\n            return prev.zIndex < current.zIndex ? prev : current;\n        }, { zIndex: undefined, id: undefined });\n    }\n    isLowerBaselayer(layer) {\n        const index = this.layers.findIndex((lay) => layer.id === lay.id);\n        if (this.layers &&\n            this.layers[index + 1] &&\n            this.layers[index + 1].baseLayer === true) {\n            return true;\n        }\n        return false;\n    }\n    getUpperLayer() {\n        return this.layers\n            .filter((l) => !l.baseLayer)\n            .reduce((prev, current) => {\n            return prev.zIndex > current.zIndex ? prev : current;\n        }, { zIndex: undefined, id: undefined });\n    }\n    isUpperBaselayer(layer) {\n        const index = this.layers.findIndex((lay) => layer.id === lay.id);\n        if (this.layers &&\n            this.layers[index - 1] &&\n            this.layers[index - 1].baseLayer === true) {\n            return true;\n        }\n        return false;\n    }\n    moveActiveLayer(activeLayer, actiontype) {\n        const layersToMove = [activeLayer];\n        const sortedLayersToMove = [];\n        this.getLinkedLayers(activeLayer, layersToMove);\n        this.layers.map(layer => {\n            if (layersToMove.indexOf(layer) !== -1) {\n                sortedLayersToMove.push(layer);\n            }\n        });\n        if (actiontype === LayerListDisplacement.Raise) {\n            this.raiseLayers(sortedLayersToMove, false);\n        }\n        else if (actiontype === LayerListDisplacement.Lower) {\n            this.lowerLayers(sortedLayersToMove, false);\n        }\n    }\n    getLinkedLayers(activeLayer, layersList) {\n        const linkedLayers = activeLayer.options.linkedLayers;\n        if (!linkedLayers) {\n            return;\n        }\n        const currentLinkedId = linkedLayers.linkId;\n        const currentLinks = linkedLayers.links;\n        const isParentLayer = currentLinks ? true : false;\n        if (isParentLayer) {\n            // search for child layers\n            currentLinks.map(link => {\n                if (!link.properties || link.properties.indexOf(LinkedProperties.ZINDEX) === -1) {\n                    return;\n                }\n                link.linkedIds.map(linkedId => {\n                    const childLayer = this.layers.find(layer => { var _a; return ((_a = layer.options.linkedLayers) === null || _a === void 0 ? void 0 : _a.linkId) === linkedId; });\n                    if (childLayer) {\n                        if (!layersList.includes(childLayer)) {\n                            layersList.push(childLayer);\n                        }\n                    }\n                });\n            });\n        }\n        else {\n            // search for parent layer\n            this.layers.map(parentLayer => {\n                var _a;\n                if ((_a = parentLayer.options.linkedLayers) === null || _a === void 0 ? void 0 : _a.links) {\n                    parentLayer.options.linkedLayers.links.map(l => {\n                        var _a;\n                        if (((_a = l.properties) === null || _a === void 0 ? void 0 : _a.indexOf(LinkedProperties.ZINDEX)) !== -1 &&\n                            l.bidirectionnal !== false &&\n                            l.linkedIds.indexOf(currentLinkedId) !== -1) {\n                            layersList.push(parentLayer);\n                            this.getLinkedLayers(parentLayer, layersList);\n                        }\n                    });\n                }\n            });\n        }\n    }\n    /*\n     * For selection mode disabled attribute\n     */\n    raisableLayers(layers) {\n        let response = false;\n        let base = 0;\n        for (const layer of layers) {\n            const mapIndex = this.layers.findIndex((lay) => layer.id === lay.id);\n            const currentLayer = this.layers[mapIndex];\n            if (currentLayer.baseLayer) {\n                base += 1;\n            }\n            const previousLayer = this.layers[mapIndex - 1];\n            if (previousLayer &&\n                previousLayer.baseLayer !== true &&\n                !layers.find((lay) => previousLayer.id === lay.id) &&\n                currentLayer.baseLayer !== true) {\n                response = true;\n            }\n        }\n        if ((this.layersChecked.length === 1 && this.layersChecked[0].baseLayer) ||\n            base === this.layersChecked.length) {\n            response = false;\n        }\n        return response;\n    }\n    /*\n     * When multiple layers is selected but some may be allow to move\n     */\n    raisableLayer(index) {\n        if (index < 1) {\n            return false;\n        }\n        if (this.layers[index - 1].options.check) {\n            return this.raisableLayer(index - 1);\n        }\n        return true;\n    }\n    raiseLayers(layers, fromUi = true) {\n        const layersToRaise = [];\n        for (const layer of layers) {\n            const index = this.layers.findIndex((lay) => lay.id === layer.id);\n            if (this.raisableLayer(index)) {\n                layersToRaise.push(layer);\n            }\n        }\n        this.map.raiseLayers(layersToRaise);\n        if (fromUi) {\n            setTimeout(() => {\n                const elements = this.computeElementRef();\n                if (!this.isScrolledIntoView(elements[0], elements[1].offsetParent)) {\n                    elements[0].scrollTop = elements[1].offsetParent.offsetTop;\n                }\n            }, 100);\n        }\n    }\n    /*\n     * For selection mode disabled attribute\n     */\n    lowerableLayers(layers) {\n        let response = false;\n        let base = 0;\n        for (const layer of layers) {\n            const mapIndex = this.layers.findIndex((lay) => layer.id === lay.id);\n            const currentLayer = this.layers[mapIndex];\n            if (currentLayer.baseLayer) {\n                base += 1;\n            }\n            const nextLayer = this.layers[mapIndex + 1];\n            if (nextLayer &&\n                nextLayer.baseLayer !== true &&\n                !layers.find((lay) => nextLayer.id === lay.id)) {\n                response = true;\n            }\n        }\n        if ((this.layersChecked.length === 1 && this.layersChecked[0].baseLayer) ||\n            base === this.layersChecked.length) {\n            response = false;\n        }\n        return response;\n    }\n    /*\n     * When multiple layers is selected but some may be allow to move\n     */\n    lowerableLayer(index) {\n        if (index >\n            this.layers.filter((lay) => lay.baseLayer !== true).length - 2) {\n            return false;\n        }\n        if (this.layers[index + 1].options.check) {\n            return this.lowerableLayer(index + 1);\n        }\n        return true;\n    }\n    lowerLayers(layers, fromUi = true) {\n        const layersToLower = [];\n        for (const layer of layers) {\n            const index = this.layers.findIndex((lay) => lay.id === layer.id);\n            if (this.lowerableLayer(index)) {\n                layersToLower.push(layer);\n            }\n        }\n        this.map.lowerLayers(layersToLower);\n        if (fromUi) {\n            setTimeout(() => {\n                const elements = this.computeElementRef('lower');\n                if (!this.isScrolledIntoView(elements[0], elements[1].offsetParent)) {\n                    elements[0].scrollTop =\n                        elements[1].offsetParent.offsetTop +\n                            elements[1].offsetParent.offsetHeight -\n                            elements[0].clientHeight;\n                }\n            }, 100);\n        }\n    }\n    next() {\n        this.change$.next();\n    }\n    computeLayers(layers) {\n        let layersOut = this.filterLayers(layers);\n        if (this.sortAlpha) {\n            layersOut = this.sortLayersByTitle(layersOut);\n        }\n        else {\n            layersOut = this.sortLayersByZindex(layersOut);\n        }\n        return layersOut;\n    }\n    onKeywordChange(term) {\n        this.keyword = term;\n    }\n    onAppliedFilterAndSortChange(appliedFilter) {\n        this.keyword = appliedFilter.keyword;\n        this.onlyVisible = appliedFilter.onlyVisible;\n        this.sortAlpha = appliedFilter.sortAlpha;\n    }\n    filterLayers(layers) {\n        if (this.layerFilterAndSortOptions.showToolbar === LayerListControlsEnum.never) {\n            return layers;\n        }\n        if (!this.keyword && !this.onlyVisible) {\n            return layers;\n        }\n        const keepLayerIds = layers.map((layer) => layer.id);\n        layers.forEach((layer) => {\n            const layerOptions = layer.options || {};\n            const dataSourceOptions = layer.dataSource.options || {};\n            const metadata = layerOptions.metadata || {};\n            const keywords = metadata.keywordList || [];\n            const layerKeywords = keywords.map((kw) => {\n                return kw.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n            });\n            if (this.keyword && layer.title) {\n                const localKeyword = this.keyword\n                    .normalize('NFD')\n                    .replace(/[\\u0300-\\u036f]/g, '');\n                const layerTitle = layer.title\n                    .normalize('NFD')\n                    .replace(/[\\u0300-\\u036f]/g, '');\n                const dataSourceType = dataSourceOptions.type || '';\n                const keywordRegex = new RegExp(localKeyword, 'gi');\n                const keywordInList = layerKeywords.find((kw) => keywordRegex.test(kw)) !==\n                    undefined;\n                if (!keywordRegex.test(layerTitle) &&\n                    !(this.keyword.toLowerCase() === dataSourceType.toLowerCase()) &&\n                    !keywordInList) {\n                    const index = keepLayerIds.indexOf(layer.id);\n                    if (index > -1) {\n                        keepLayerIds.splice(index, 1);\n                    }\n                }\n            }\n            if (this.onlyVisible && layer.visible === false) {\n                const index = keepLayerIds.indexOf(layer.id);\n                if (index > -1) {\n                    keepLayerIds.splice(index, 1);\n                }\n            }\n        });\n        return layers.filter((layer) => keepLayerIds.indexOf(layer.id) !== -1);\n    }\n    sortLayersByZindex(layers) {\n        return layers.sort((layer1, layer2) => layer2.zIndex - layer1.zIndex);\n    }\n    sortLayersByTitle(layers) {\n        return layers.sort((a, b) => {\n            if (this.normalize(a.title) < this.normalize(b.title)) {\n                return -1;\n            }\n            if (this.normalize(a.title) > this.normalize(b.title)) {\n                return 1;\n            }\n            return 0;\n        });\n    }\n    normalize(str) {\n        return str\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '')\n            .toLowerCase();\n    }\n    computeShowToolbar() {\n        switch (this.layerFilterAndSortOptions.showToolbar) {\n            case LayerListControlsEnum.always:\n                return true;\n            case LayerListControlsEnum.never:\n                return false;\n            default:\n                if (this.layers.length >= this.thresholdToFilterAndSort ||\n                    this.keyword ||\n                    this.onlyVisible) {\n                    return true;\n                }\n                return false;\n        }\n    }\n    toggleLayerTool(layer) {\n        this.toggleOpacity = false;\n        if (this.layerTool && layer === this.activeLayer) {\n            this.layerTool = false;\n        }\n        else {\n            this.layerTool = true;\n        }\n        for (const lay of this.layers) {\n            lay.options.active = false;\n        }\n        layer.options.active = true;\n        this.activeLayer = layer;\n    }\n    removeLayers(layers) {\n        if (layers && layers.length > 0) {\n            this.layersChecked = [];\n            for (const layer of layers) {\n                if (layer.options.removable !== false) {\n                    layer.map.removeLayer(layer);\n                }\n                else {\n                    this.layersChecked.push(layer);\n                }\n            }\n        }\n        else if (!layers && this.activeLayer.options.removable !== false) {\n            this.activeLayer.map.removeLayer(this.activeLayer);\n            this.layerTool = false;\n        }\n    }\n    toggleVisibility(layers) {\n        if (layers && layers.length > 0) {\n            for (const layer of layers) {\n                layer.visible = this.hideSelectedLayers;\n            }\n        }\n        this.layerItemChangeDetection$.next(true);\n    }\n    isLayerRemovable(layer) {\n        return layer.options.removable !== false;\n    }\n    isAllLayersRemovable(layers) {\n        return layers.every(l => this.isLayerRemovable(l));\n    }\n    get statusSelectedLayersCheck() {\n        let statusSelectedLayers = LayerListSelectVisibleEnum.NULL;\n        let findTrue = false;\n        let findFalse = false;\n        if (this.layersChecked.length === 0) {\n            statusSelectedLayers = LayerListSelectVisibleEnum.NULL;\n        }\n        else {\n            statusSelectedLayers = LayerListSelectVisibleEnum.MIXED;\n            this.hideSelectedLayers = false;\n            for (const layer2 of this.layersChecked) {\n                if (layer2.visible === true) {\n                    findTrue = true;\n                }\n                if (layer2.visible === false) {\n                    findFalse = true;\n                }\n            }\n            if (findTrue === true && findFalse === false) {\n                statusSelectedLayers = LayerListSelectVisibleEnum.ALL_VISIBLE;\n            }\n            if (findTrue === false && findFalse === true) {\n                statusSelectedLayers = LayerListSelectVisibleEnum.ALL_HIDDEN;\n                this.hideSelectedLayers = true;\n            }\n        }\n        return statusSelectedLayers;\n    }\n    layersCheck(event) {\n        event.layer.options.check = event.check;\n        if (event.check === true) {\n            const eventMapIndex = this.layers.findIndex((layer) => event.layer.id === layer.id);\n            for (const layer of this.layersChecked) {\n                const mapIndex = this.layers.findIndex((lay) => layer.id === lay.id);\n                if (eventMapIndex < mapIndex) {\n                    this.layersChecked.splice(this.layersChecked.findIndex((lay) => layer.id === lay.id), 0, event.layer);\n                    if (this.excludeBaseLayers) {\n                        if (this.layersChecked.length ===\n                            this.layers.filter((lay) => lay.baseLayer !== true && lay.showInLayerList).length) {\n                            this.selectAllCheck = true;\n                        }\n                        else {\n                            this.selectAllCheck = false;\n                        }\n                    }\n                    else if (!this.excludeBaseLayers) {\n                        if (this.layersChecked.length ===\n                            this.layers.filter((lay) => lay.showInLayerList).length) {\n                            this.selectAllCheck = true;\n                        }\n                        else {\n                            this.selectAllCheck = false;\n                        }\n                    }\n                    return;\n                }\n            }\n            this.layersChecked.push(event.layer);\n        }\n        else {\n            const index = this.layersChecked.findIndex((layer) => event.layer.id === layer.id);\n            this.layersChecked.splice(index, 1);\n        }\n        if (this.excludeBaseLayers) {\n            if (this.layersChecked.length ===\n                this.layers.filter((lay) => lay.baseLayer !== true && lay.showInLayerList).length) {\n                this.selectAllCheck = true;\n            }\n            else {\n                this.selectAllCheck = false;\n            }\n        }\n        else if (!this.excludeBaseLayers) {\n            if (this.layersChecked.length ===\n                this.layers.filter((lay) => lay.showInLayerList).length) {\n                this.selectAllCheck = true;\n            }\n            else {\n                this.selectAllCheck = false;\n            }\n        }\n    }\n    toggleSelectionMode(value) {\n        this.selection = value;\n        this.activeLayer = undefined;\n        if (value === true) {\n            this.layerTool = false;\n            for (const layer of this.layers) {\n                if (layer.options.check) {\n                    this.layersChecked.push(layer);\n                }\n            }\n        }\n    }\n    layersCheckedOpacity() {\n        if (this.layersChecked.length > 1) {\n            return 1;\n        }\n        else {\n            const opacity = [];\n            for (const layer of this.layersChecked) {\n                opacity.push(layer.opacity);\n            }\n            return opacity;\n        }\n    }\n    selectAll() {\n        if (!this.selectAllCheck) {\n            for (const layer of this.layers) {\n                if (this.excludeBaseLayers &&\n                    layer.baseLayer !== true &&\n                    layer.showInLayerList) {\n                    layer.options.check = true;\n                    this.layersChecked.push(layer);\n                }\n                else if (!this.excludeBaseLayers && layer.showInLayerList) {\n                    layer.options.check = true;\n                    this.layersChecked.push(layer);\n                }\n            }\n            this.selectAllCheck$.next(true);\n        }\n        else {\n            for (const layer of this.layers) {\n                layer.options.check = false;\n            }\n            this.layersChecked = [];\n            this.selectAllCheck$.next(false);\n        }\n    }\n    isScrolledIntoView(elemSource, elem) {\n        const docViewTop = elemSource.scrollTop;\n        const docViewBottom = docViewTop + elemSource.clientHeight;\n        const elemTop = elem.offsetTop;\n        const elemBottom = elemTop + elem.clientHeight;\n        return elemBottom <= docViewBottom && elemTop >= docViewTop;\n    }\n    computeElementRef(type) {\n        const checkItems = this.elRef.nativeElement.getElementsByClassName('mat-checkbox-checked');\n        const checkItem = type === 'lower'\n            ? this.elRef.nativeElement.getElementsByClassName('mat-checkbox-checked')[checkItems.length - 1]\n            : this.elRef.nativeElement.getElementsByClassName('mat-checkbox-checked')[0];\n        const igoList = this.elRef.nativeElement.getElementsByTagName('igo-list')[0];\n        return [igoList, checkItem];\n    }\n}\nLayerListComponent.ɵfac = function LayerListComponent_Factory(t) { return new (t || LayerListComponent)(ɵɵdirectiveInject(ElementRef)); };\nLayerListComponent.ɵcmp = ɵɵdefineComponent({ type: LayerListComponent, selectors: [[\"igo-layer-list\"]], contentQueries: function LayerListComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ɵɵcontentQuery(dirIndex, _c0$6, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.templateLayerToolbar = _t.first);\n    } }, inputs: { layersAreAllVisible: \"layersAreAllVisible\", ogcButton: \"ogcButton\", timeButton: \"timeButton\", map: \"map\", layers: \"layers\", floatLabel: \"floatLabel\", layerFilterAndSortOptions: \"layerFilterAndSortOptions\", excludeBaseLayers: \"excludeBaseLayers\", toggleLegendOnVisibilityChange: \"toggleLegendOnVisibilityChange\", expandLegendOfVisibleLayers: \"expandLegendOfVisibleLayers\", updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", queryBadge: \"queryBadge\" }, outputs: { appliedFilterAndSort: \"appliedFilterAndSort\" }, ngContentSelectors: _c4, decls: 11, vars: 16, consts: [[\"floatLabel\", \"auto\", 3, \"layersAreAllVisible\", \"term\", \"onlyVisible\", \"sortAlpha\", \"appliedFilterAndSort\", \"selection\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"ngClass\", \"navigation\", \"selection\"], [\"igoList\", \"\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"class\", \"igo-layer-actions-container\", 3, \"title\", 4, \"ngIf\"], [\"floatLabel\", \"auto\", 3, \"layersAreAllVisible\", \"term\", \"onlyVisible\", \"sortAlpha\", \"appliedFilterAndSort\", \"selection\"], [1, \"select-all-checkbox\", \"mat-subheading-2\", 3, \"color\", \"checked\", \"indeterminate\", \"change\"], [\"igoListItem\", \"\", 3, \"layer\", \"activeLayer\", \"orderable\", \"lowerDisabled\", \"raiseDisabled\", \"queryBadge\", \"expandLegendIfVisible\", \"updateLegendOnResolutionChange\", \"toggleLegendOnVisibilityChange\", \"selectionMode\", \"selectAll\", \"layerCheck\", \"changeDetection\", \"action\", \"checkbox\", 4, \"ngIf\"], [\"igoListItem\", \"\", 3, \"layer\", \"activeLayer\", \"orderable\", \"lowerDisabled\", \"raiseDisabled\", \"queryBadge\", \"expandLegendIfVisible\", \"updateLegendOnResolutionChange\", \"toggleLegendOnVisibilityChange\", \"selectionMode\", \"selectAll\", \"layerCheck\", \"changeDetection\", \"action\", \"checkbox\"], [1, \"igo-layer-actions-container\", 3, \"title\"], [1, \"igo-layer-button-group\"], [\"class\", \"delete-button\", \"mat-icon-button\", \"\", \"color\", \"warn\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"down-button\", 3, \"matTooltip\", \"disabled\", \"click\"], [\"matBadgeColor\", \"warn\", \"matBadgeSize\", \"medium\", \"svgIcon\", \"arrow-down\", 3, \"matBadge\", \"matBadgeHidden\"], [\"color\", \"primary\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"up-button\", 3, \"matTooltip\", \"disabled\", \"click\"], [\"matBadgeColor\", \"warn\", \"matBadgeSize\", \"medium\", \"svgIcon\", \"arrow-up\", 3, \"matBadge\", \"matBadgeHidden\"], [\"color\", \"primary\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"opacity-button\", 3, \"matMenuTriggerFor\", \"matTooltip\"], [\"matBadgeColor\", \"primary\", \"matBadgeSize\", \"medium\", \"svgIcon\", \"opacity\", 3, \"matBadge\"], [1, \"mat-menu-opacity-slider\"], [\"opacityMenu\", \"matMenu\"], [\"id\", \"opacity-menu\"], [\"id\", \"opacity-slider\", \"color\", \"primary\", \"thumbLabel\", \"\", \"tickInterval\", \"5\", \"step\", \"5\", \"matTooltipShowDelay\", \"500\", \"tooltip-position\", \"below\", 3, \"min\", \"max\", \"value\", \"matTooltip\", \"input\", \"click\"], [\"class\", \"zoomLayer-button\", \"color\", \"primary\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"igoLayerItemToolbar\", \"\", 3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"delete-button\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"delete\"], [\"color\", \"primary\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"zoomLayer-button\", 3, \"matTooltip\", \"click\"], [\"matBadgeColor\", \"primary\", \"matBadgeSize\", \"medium\", \"svgIcon\", \"magnify-scan\"], [1, \"actions-buttons-multi\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"delete-button\", 3, \"disabled\", \"matTooltip\", \"click\"], [\"matBadgeColor\", \"warn\", \"matBadgeSize\", \"medium\", \"svgIcon\", \"delete\", 3, \"matBadge\", \"matBadgeHidden\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"eye-button\", 3, \"disabled\", \"matTooltip\", \"click\"], [3, \"svgIcon\"], [\"color\", \"primary\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"opacity-button\", 3, \"disabled\", \"matMenuTriggerFor\", \"matTooltip\"], [\"svgIcon\", \"opacity\"], [\"id\", \"opacity-slider\", \"color\", \"primary\", \"thumbLabel\", \"\", \"tickInterval\", \"5\", \"step\", \"5\", \"matTooltipShowDelay\", \"500\", \"tooltip-position\", \"below\", 3, \"min\", \"max\", \"ngModel\", \"matTooltip\", \"ngModelChange\", \"click\", 4, \"ngIf\"], [\"id\", \"opacity-slider\", \"color\", \"primary\", \"thumbLabel\", \"\", \"tickInterval\", \"5\", \"step\", \"5\", \"matTooltipShowDelay\", \"500\", \"tooltip-position\", \"below\", 3, \"min\", \"max\", \"ngModel\", \"matTooltip\", \"ngModelChange\", \"click\"], [\"svgIcon\", \"magnify-scan\"]], template: function LayerListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵprojectionDef(_c2);\n        ɵɵelementStart(0, \"mat-list\");\n        ɵɵtemplate(1, LayerListComponent_igo_layer_list_tool_1_Template, 1, 4, \"igo-layer-list-tool\", 0);\n        ɵɵpipe(2, \"async\");\n        ɵɵelementEnd();\n        ɵɵtemplate(3, LayerListComponent_mat_list_item_3_Template, 5, 8, \"mat-list-item\", 1);\n        ɵɵelement(4, \"mat-divider\");\n        ɵɵelementStart(5, \"igo-list\", 2, 3);\n        ɵɵtemplate(7, LayerListComponent_ng_template_7_Template, 1, 1, \"ng-template\", 4);\n        ɵɵpipe(8, \"async\");\n        ɵɵelementEnd();\n        ɵɵtemplate(9, LayerListComponent_igo_panel_9_Template, 22, 34, \"igo-panel\", 5);\n        ɵɵtemplate(10, LayerListComponent_igo_panel_10_Template, 27, 41, \"igo-panel\", 5);\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(2, 8, ctx.showToolbar$));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ctx.selection);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngClass\", ɵɵpureFunction3(12, _c3, ctx.selection, ctx.layerTool && !ctx.selection, !ctx.layerTool && !ctx.selection))(\"navigation\", false)(\"selection\", false);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(8, 10, ctx.layers$));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", !ctx.selection && ctx.layerTool && ctx.activeLayer);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.selection && ctx.layers.length > 0);\n    } }, styles: [\"[_nghost-%COMP%]   .igo-list-no-tools[_ngcontent-%COMP%]{height:calc(100% - 57px);padding-top:8px}[_nghost-%COMP%]   .igo-list-tools-single[_ngcontent-%COMP%]{height:calc(100% - 153px);padding-top:8px}[_nghost-%COMP%]   .igo-list-tools-multi[_ngcontent-%COMP%]{height:calc(100% - 178px);padding-top:8px}mat-form-field.inputFilter[_ngcontent-%COMP%]{max-width:200px;width:calc(100% - 100px)}.igo-layer-actions-container[_ngcontent-%COMP%]{padding-left:4px;width:calc(100% - 5px)}.igo-layer-actions-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center}mat-list-item[_ngcontent-%COMP%]     .mat-list-item-content{margin-bottom:10px}mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-inner-container{margin-left:8px;margin-right:16px}#opacity-slider[_ngcontent-%COMP%]{float:left;left:10px;min-width:unset;top:10px;width:110px}.actions-buttons-multi[_ngcontent-%COMP%], .igo-layer-button-group[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row-reverse;overflow-x:auto}.actions-buttons-multi[_ngcontent-%COMP%]::-webkit-scrollbar, .igo-layer-button-group[_ngcontent-%COMP%]::-webkit-scrollbar{height:4px}.actions-buttons-multi[_ngcontent-%COMP%]::-webkit-scrollbar-track, .igo-layer-button-group[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.actions-buttons-multi[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .igo-layer-button-group[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888}.actions-buttons-multi[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .igo-layer-button-group[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.igo-layer-button-group[_ngcontent-%COMP%]{padding-top:5px}[_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]{height:unset}#opacity-menu[_ngcontent-%COMP%]{height:50px;max-width:unset;width:132px}#opacity-menu[_ngcontent-%COMP%]   .mat-menu-content[_ngcontent-%COMP%]:not(:empty){padding-top:20px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LayerListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-layer-list',\n                templateUrl: './layer-list.component.html',\n                styleUrls: ['./layer-list.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ElementRef }]; }, { templateLayerToolbar: [{\n            type: ContentChild,\n            args: ['igoLayerItemToolbar', /* TODO: add static flag */ {}]\n        }], layersAreAllVisible: [{\n            type: Input\n        }], ogcButton: [{\n            type: Input\n        }], timeButton: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], layers: [{\n            type: Input\n        }], floatLabel: [{\n            type: Input\n        }], layerFilterAndSortOptions: [{\n            type: Input\n        }], excludeBaseLayers: [{\n            type: Input\n        }], toggleLegendOnVisibilityChange: [{\n            type: Input\n        }], expandLegendOfVisibleLayers: [{\n            type: Input\n        }], updateLegendOnResolutionChange: [{\n            type: Input\n        }], queryBadge: [{\n            type: Input\n        }], appliedFilterAndSort: [{\n            type: Output\n        }] }); })();\n\nfunction LayerListToolComponent_button_5_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 9);\n    ɵɵlistener(\"click\", function LayerListToolComponent_button_5_Template_button_click_0_listener() { ɵɵrestoreView(_r2); const ctx_r1 = ɵɵnextContext(); return ctx_r1.clearTerm(); });\n    ɵɵelement(1, \"mat-icon\", 10);\n    ɵɵelementEnd();\n} }\nclass LayerListToolComponent {\n    constructor() {\n        this.onlyVisible$ = new BehaviorSubject(false);\n        this.sortAlpha$ = new BehaviorSubject(false);\n        this.term$ = new BehaviorSubject(undefined);\n        this.layersAreAllVisible = true;\n        this.floatLabel = 'auto';\n        this.selectionMode = false;\n        this.appliedFilterAndSort = new EventEmitter();\n        this.selection = new EventEmitter();\n    }\n    set onlyVisible(value) {\n        this.onlyVisible$.next(value);\n    }\n    get onlyVisible() {\n        return this.onlyVisible$.value;\n    }\n    set sortAlpha(value) {\n        this.sortAlpha$.next(value);\n    }\n    get sortAlpha() {\n        return this.sortAlpha$.value;\n    }\n    set term(value) {\n        this.term$.next(value);\n    }\n    get term() {\n        return this.term$.value;\n    }\n    ngOnInit() {\n        this.term$$ = this.term$.subscribe(keyword => {\n            this.appliedFilterAndSort.emit({\n                keyword,\n                onlyVisible: this.onlyVisible,\n                sortAlpha: this.sortAlpha\n            });\n        });\n        this.onlyVisible$$ = this.onlyVisible$.subscribe(onlyVisible => {\n            this.appliedFilterAndSort.emit({\n                keyword: this.term,\n                onlyVisible,\n                sortAlpha: this.sortAlpha\n            });\n        });\n        this.sortAlpha$$ = this.sortAlpha$.subscribe(sortAlpha => {\n            this.appliedFilterAndSort.emit({\n                keyword: this.term,\n                onlyVisible: this.onlyVisible,\n                sortAlpha\n            });\n        });\n    }\n    ngOnDestroy() {\n        this.onlyVisible$$.unsubscribe();\n        this.sortAlpha$$.unsubscribe();\n        this.term$$.unsubscribe();\n    }\n    clearTerm() {\n        this.term = undefined;\n    }\n    toggleSortAlpha() {\n        this.sortAlpha = !this.sortAlpha;\n    }\n    toggleOnlyVisible() {\n        this.onlyVisible = !this.onlyVisible;\n    }\n    toggleSelectionMode() {\n        this.selectionMode = !this.selectionMode;\n        this.selection.emit(this.selectionMode);\n    }\n}\nLayerListToolComponent.ɵfac = function LayerListToolComponent_Factory(t) { return new (t || LayerListToolComponent)(); };\nLayerListToolComponent.ɵcmp = ɵɵdefineComponent({ type: LayerListToolComponent, selectors: [[\"igo-layer-list-tool\"]], inputs: { layersAreAllVisible: \"layersAreAllVisible\", floatLabel: \"floatLabel\", onlyVisible: \"onlyVisible\", sortAlpha: \"sortAlpha\", term: \"term\" }, outputs: { appliedFilterAndSort: \"appliedFilterAndSort\", selection: \"selection\" }, decls: 21, vars: 30, consts: [[1, \"inputFilter\", 3, \"floatLabel\"], [\"matInput\", \"\", \"matTooltipShowDelay\", \"500\", \"type\", \"text\", 3, \"placeholder\", \"matTooltip\", \"ngModel\", \"ngModelChange\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"aria-label\", \"Clear\", \"color\", \"warn\", 3, \"click\", 4, \"ngIf\"], [\"matTooltipShowDelay\", \"500\", 3, \"matTooltip\"], [\"mat-icon-button\", \"\", 1, \"sort-alpha\", 3, \"color\", \"click\"], [3, \"svgIcon\"], [\"mat-icon-button\", \"\", 1, \"only-visible\", 3, \"disabled\", \"color\", \"click\"], [\"matBadge\", \"\", \"igoMatBadgeIcon\", \"eye\", \"igoMatBadgeInverseColor\", \"true\", \"igoMatBadgeInheritColor\", \"true\", 3, \"svgIcon\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 1, \"selection-mode\", 3, \"click\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"aria-label\", \"Clear\", \"color\", \"warn\", 3, \"click\"], [\"svgIcon\", \"close\"]], template: function LayerListToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-list-item\");\n        ɵɵelementStart(1, \"mat-form-field\", 0);\n        ɵɵelementStart(2, \"input\", 1);\n        ɵɵlistener(\"ngModelChange\", function LayerListToolComponent_Template_input_ngModelChange_2_listener($event) { return ctx.term = $event; });\n        ɵɵpipe(3, \"translate\");\n        ɵɵpipe(4, \"translate\");\n        ɵɵelementEnd();\n        ɵɵtemplate(5, LayerListToolComponent_button_5_Template, 2, 0, \"button\", 2);\n        ɵɵelementEnd();\n        ɵɵelementStart(6, \"div\", 3);\n        ɵɵpipe(7, \"translate\");\n        ɵɵpipe(8, \"translate\");\n        ɵɵelementStart(9, \"button\", 4);\n        ɵɵlistener(\"click\", function LayerListToolComponent_Template_button_click_9_listener() { return ctx.toggleSortAlpha(); });\n        ɵɵelement(10, \"mat-icon\", 5);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(11, \"div\", 3);\n        ɵɵpipe(12, \"translate\");\n        ɵɵpipe(13, \"translate\");\n        ɵɵelementStart(14, \"button\", 6);\n        ɵɵlistener(\"click\", function LayerListToolComponent_Template_button_click_14_listener() { return ctx.toggleOnlyVisible(); });\n        ɵɵelement(15, \"mat-icon\", 7);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(16, \"div\", 3);\n        ɵɵpipe(17, \"translate\");\n        ɵɵpipe(18, \"translate\");\n        ɵɵelementStart(19, \"button\", 8);\n        ɵɵlistener(\"click\", function LayerListToolComponent_Template_button_click_19_listener() { return ctx.toggleSelectionMode(); });\n        ɵɵelement(20, \"mat-icon\", 5);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"floatLabel\", ctx.floatLabel);\n        ɵɵadvance(1);\n        ɵɵproperty(\"placeholder\", ɵɵpipeBind1(3, 14, \"igo.geo.layer.filterPlaceholder\"))(\"matTooltip\", ɵɵpipeBind1(4, 16, \"igo.geo.layer.subsetLayersListKeyword\"))(\"ngModel\", ctx.term);\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngIf\", ctx.term);\n        ɵɵadvance(1);\n        ɵɵproperty(\"matTooltip\", ctx.sortAlpha ? ɵɵpipeBind1(7, 18, \"igo.geo.layer.sortMapOrder\") : ɵɵpipeBind1(8, 20, \"igo.geo.layer.sortAlphabetically\"));\n        ɵɵadvance(3);\n        ɵɵproperty(\"color\", ctx.sortAlpha ? \"warn\" : \"primary\");\n        ɵɵadvance(1);\n        ɵɵproperty(\"svgIcon\", ctx.sortAlpha ? \"sort-ascending\" : \"sort-alphabetical-ascending\");\n        ɵɵadvance(1);\n        ɵɵproperty(\"matTooltip\", ctx.onlyVisible ? ɵɵpipeBind1(12, 22, \"igo.geo.layer.resetLayersList\") : ɵɵpipeBind1(13, 24, \"igo.geo.layer.subsetLayersListOnlyVisible\"));\n        ɵɵadvance(3);\n        ɵɵproperty(\"disabled\", ctx.layersAreAllVisible && !ctx.onlyVisible)(\"color\", ctx.onlyVisible ? \"warn\" : \"primary\");\n        ɵɵadvance(1);\n        ɵɵproperty(\"svgIcon\", ctx.onlyVisible ? \"filter-remove\" : \"filter\");\n        ɵɵadvance(1);\n        ɵɵproperty(\"matTooltip\", ctx.selectionMode ? ɵɵpipeBind1(17, 26, \"igo.geo.layer.deactivateSelectionMode\") : ɵɵpipeBind1(18, 28, \"igo.geo.layer.activateSelectionMode\"));\n        ɵɵadvance(4);\n        ɵɵproperty(\"svgIcon\", ctx.selectionMode ? \"checkbox-multiple-marked-outline\" : \"checkbox-multiple-blank-outline\");\n    } }, directives: [MatListItem, MatFormField, MatInput, DefaultValueAccessor, MatTooltip, NgControlStatus, NgModel, NgIf, MatButton, MatIcon, MatBadge, IgoBadgeIconDirective, MatSuffix], pipes: [TranslatePipe], styles: [\"mat-form-field.inputFilter[_ngcontent-%COMP%]{max-width:200px;width:calc(100% - 100px)}.selection-mode[_ngcontent-%COMP%]{margin-left:5px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LayerListToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-layer-list-tool',\n                templateUrl: './layer-list-tool.component.html',\n                styleUrls: ['./layer-list-tool.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], null, { layersAreAllVisible: [{\n            type: Input\n        }], floatLabel: [{\n            type: Input\n        }], onlyVisible: [{\n            type: Input\n        }], sortAlpha: [{\n            type: Input\n        }], term: [{\n            type: Input\n        }], appliedFilterAndSort: [{\n            type: Output\n        }], selection: [{\n            type: Output\n        }] }); })();\n\nclass LayerListBindingDirective {\n    constructor(component, mapService, route) {\n        this.mapService = mapService;\n        this.route = route;\n        this.component = component;\n    }\n    ngOnInit() {\n        // Override input layers\n        // this.component.layers = [];\n        this.layersOrResolutionChange$$ = combineLatest([\n            this.mapService.getMap().layers$,\n            this.mapService.getMap().viewController.resolution$\n        ]).pipe(debounceTime(10)).subscribe((bunch) => {\n            const shownLayers = bunch[0].filter((layer) => {\n                return layer.showInLayerList === true;\n            });\n            this.component.layers = shownLayers;\n            this.setLayersVisibilityStatus(shownLayers, this.component.excludeBaseLayers);\n        });\n    }\n    setLayersVisibilityStatus(layers, excludeBaseLayers) {\n        if (this.layersVisibility$$ !== undefined) {\n            this.layersVisibility$$.unsubscribe();\n            this.layersVisibility$$ = undefined;\n        }\n        this.layersVisibility$$ = combineLatest(layers\n            .filter(layer => layer.baseLayer !== excludeBaseLayers)\n            .map((layer) => layer.visible$))\n            .pipe(map((visibles) => visibles.every(Boolean)))\n            .subscribe((allLayersAreVisible) => this.component.layersAreAllVisible = allLayersAreVisible);\n    }\n    ngOnDestroy() {\n        this.layersOrResolutionChange$$.unsubscribe();\n        if (this.layersVisibility$$ !== undefined) {\n            this.layersVisibility$$.unsubscribe();\n            this.layersVisibility$$ = undefined;\n        }\n    }\n}\nLayerListBindingDirective.ɵfac = function LayerListBindingDirective_Factory(t) { return new (t || LayerListBindingDirective)(ɵɵdirectiveInject(LayerListComponent, 2), ɵɵdirectiveInject(MapService), ɵɵdirectiveInject(RouteService, 8)); };\nLayerListBindingDirective.ɵdir = ɵɵdefineDirective({ type: LayerListBindingDirective, selectors: [[\"\", \"igoLayerListBinding\", \"\"]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LayerListBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoLayerListBinding]'\n            }]\n    }], function () { return [{ type: LayerListComponent, decorators: [{\n                type: Self\n            }] }, { type: MapService }, { type: RouteService, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\nfunction LayerLegendListComponent_mat_slide_toggle_0_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-slide-toggle\", 5);\n    ɵɵlistener(\"change\", function LayerLegendListComponent_mat_slide_toggle_0_Template_mat_slide_toggle_change_0_listener($event) { ɵɵrestoreView(_r8); const ctx_r7 = ɵɵnextContext(); return ctx_r7.toggleShowAllLegends($event.checked); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 4, \"igo.geo.layer.legend.showAll\"))(\"checked\", ctx_r0.showAllLegendsValue)(\"labelPosition\", \"before\");\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(3, 6, \"igo.geo.layer.legend.showAll\"), \"\\n\");\n} }\nfunction LayerLegendListComponent_mat_divider_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"mat-divider\");\n} }\nfunction LayerLegendListComponent_ng_template_5_igo_layer_legend_item_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-layer-legend-item\", 7);\n} if (rf & 2) {\n    const layer_r9 = ɵɵnextContext().$implicit;\n    const ctx_r11 = ɵɵnextContext();\n    ɵɵproperty(\"layer\", layer_r9)(\"updateLegendOnResolutionChange\", ctx_r11.updateLegendOnResolutionChange);\n} }\nfunction LayerLegendListComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, LayerLegendListComponent_ng_template_5_igo_layer_legend_item_0_Template, 1, 2, \"igo-layer-legend-item\", 6);\n} if (rf & 2) {\n    const layer_r9 = ctx.$implicit;\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵproperty(\"ngIf\", !(ctx_r2.excludeBaseLayers && layer_r9.baseLayer));\n} }\nfunction LayerLegendListComponent_p_7_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\", 8);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, \"igo.geo.layer.legend.noLayersVisibleWithShowAllButton\"), \" \");\n} }\nfunction LayerLegendListComponent_p_11_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\", 8);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, \"igo.geo.layer.legend.noLayersVisibleWithShowAllButtonButZoom\"), \" \");\n} }\nfunction LayerLegendListComponent_p_15_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\", 8);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, \"igo.geo.layer.legend.noLayersVisible\"), \" \");\n} }\nfunction LayerLegendListComponent_p_19_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\", 8);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, \"igo.geo.layer.legend.noLayersVisibleButZoom\"), \" \");\n} }\nclass LayerLegendListComponent {\n    constructor() {\n        this.orderable = true;\n        this.hasVisibleOrInRangeLayers$ = new BehaviorSubject(true);\n        this.hasVisibleAndNotInRangeLayers$ = new BehaviorSubject(true);\n        this.layersInUi$ = new BehaviorSubject([]);\n        this.layers$ = new BehaviorSubject([]);\n        this.showAllLegend = false;\n        this.change$ = new ReplaySubject(1);\n        this.excludeBaseLayers = false;\n        this.updateLegendOnResolutionChange = false;\n        this.allowShowAllLegends = false;\n        this.showAllLegendsValue = false;\n        this.allLegendsShown = new EventEmitter(false);\n    }\n    set layers(value) {\n        this._layers = value;\n        this.next();\n    }\n    get layers() {\n        return this._layers;\n    }\n    ngOnInit() {\n        this.change$$ = this.change$\n            .pipe(debounce(() => {\n            return this.layers.length === 0 ? EMPTY : timer(50);\n        }))\n            .subscribe(() => {\n            const layers = this.computeShownLayers(this.layers.slice(0));\n            this.layers$.next(layers);\n            this.hasVisibleOrInRangeLayers$.next(this.layers.slice(0)\n                .filter(layer => layer.baseLayer !== true)\n                .filter(layer => layer.visible$.value && layer.isInResolutionsRange$.value).length > 0);\n            this.hasVisibleAndNotInRangeLayers$.next(this.layers.slice(0)\n                .filter(layer => layer.baseLayer !== true)\n                .filter(layer => layer.visible$.value && !layer.isInResolutionsRange$.value).length > 0);\n            this.layersInUi$.next(this.layers.slice(0).filter(layer => layer.showInLayerList !== false && (!this.excludeBaseLayers || !layer.baseLayer)));\n        });\n    }\n    ngOnDestroy() {\n        this.change$$.unsubscribe();\n    }\n    next() {\n        this.change$.next();\n    }\n    computeShownLayers(layers) {\n        let shownLayers = layers.filter((layer) => layer.visible && layer.isInResolutionsRange);\n        if (this.showAllLegendsValue) {\n            shownLayers = layers;\n        }\n        return this.sortLayersByZindex(shownLayers);\n    }\n    sortLayersByZindex(layers) {\n        return layers.sort((layer1, layer2) => layer2.zIndex - layer1.zIndex);\n    }\n    toggleShowAllLegends(toggle) {\n        this.showAllLegendsValue = toggle;\n        this.next();\n        this.allLegendsShown.emit(toggle);\n    }\n}\nLayerLegendListComponent.ɵfac = function LayerLegendListComponent_Factory(t) { return new (t || LayerLegendListComponent)(); };\nLayerLegendListComponent.ɵcmp = ɵɵdefineComponent({ type: LayerLegendListComponent, selectors: [[\"igo-layer-legend-list\"]], inputs: { layers: \"layers\", excludeBaseLayers: \"excludeBaseLayers\", updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", allowShowAllLegends: \"allowShowAllLegends\", showAllLegendsValue: \"showAllLegendsValue\" }, outputs: { allLegendsShown: \"allLegendsShown\" }, decls: 23, vars: 39, consts: [[\"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", \"class\", \"mat-typography\", 3, \"matTooltip\", \"checked\", \"labelPosition\", \"change\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"navigation\", \"selection\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"class\", \"layers-empty mat-typography\", 4, \"ngIf\"], [\"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", 1, \"mat-typography\", 3, \"matTooltip\", \"checked\", \"labelPosition\", \"change\"], [\"igoListItem\", \"\", 3, \"layer\", \"updateLegendOnResolutionChange\", 4, \"ngIf\"], [\"igoListItem\", \"\", 3, \"layer\", \"updateLegendOnResolutionChange\"], [1, \"layers-empty\", \"mat-typography\"]], template: function LayerLegendListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, LayerLegendListComponent_mat_slide_toggle_0_Template, 4, 8, \"mat-slide-toggle\", 0);\n        ɵɵpipe(1, \"async\");\n        ɵɵtemplate(2, LayerLegendListComponent_mat_divider_2_Template, 1, 0, \"mat-divider\", 1);\n        ɵɵpipe(3, \"async\");\n        ɵɵelementStart(4, \"igo-list\", 2);\n        ɵɵtemplate(5, LayerLegendListComponent_ng_template_5_Template, 1, 1, \"ng-template\", 3);\n        ɵɵpipe(6, \"async\");\n        ɵɵelementEnd();\n        ɵɵtemplate(7, LayerLegendListComponent_p_7_Template, 3, 3, \"p\", 4);\n        ɵɵpipe(8, \"async\");\n        ɵɵpipe(9, \"async\");\n        ɵɵpipe(10, \"async\");\n        ɵɵtemplate(11, LayerLegendListComponent_p_11_Template, 3, 3, \"p\", 4);\n        ɵɵpipe(12, \"async\");\n        ɵɵpipe(13, \"async\");\n        ɵɵpipe(14, \"async\");\n        ɵɵtemplate(15, LayerLegendListComponent_p_15_Template, 3, 3, \"p\", 4);\n        ɵɵpipe(16, \"async\");\n        ɵɵpipe(17, \"async\");\n        ɵɵpipe(18, \"async\");\n        ɵɵtemplate(19, LayerLegendListComponent_p_19_Template, 3, 3, \"p\", 4);\n        ɵɵpipe(20, \"async\");\n        ɵɵpipe(21, \"async\");\n        ɵɵpipe(22, \"async\");\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(1, 9, ctx.layersInUi$).length && ctx.allowShowAllLegends);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(3, 11, ctx.layersInUi$).length && ctx.allowShowAllLegends);\n        ɵɵadvance(2);\n        ɵɵproperty(\"navigation\", false)(\"selection\", false);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(6, 13, ctx.layers$));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", !ctx.showAllLegendsValue && ɵɵpipeBind1(8, 15, ctx.layersInUi$).length && !ɵɵpipeBind1(9, 17, ctx.hasVisibleOrInRangeLayers$) && !ɵɵpipeBind1(10, 19, ctx.hasVisibleAndNotInRangeLayers$) && ctx.allowShowAllLegends);\n        ɵɵadvance(4);\n        ɵɵproperty(\"ngIf\", !ctx.showAllLegendsValue && ɵɵpipeBind1(12, 21, ctx.layersInUi$).length && !ɵɵpipeBind1(13, 23, ctx.hasVisibleOrInRangeLayers$) && ɵɵpipeBind1(14, 25, ctx.hasVisibleAndNotInRangeLayers$) && ctx.allowShowAllLegends);\n        ɵɵadvance(4);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(16, 27, ctx.layersInUi$).length && !ɵɵpipeBind1(17, 29, ctx.hasVisibleOrInRangeLayers$) && !ɵɵpipeBind1(18, 31, ctx.hasVisibleAndNotInRangeLayers$) && !ctx.allowShowAllLegends);\n        ɵɵadvance(4);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(20, 33, ctx.layersInUi$).length && !ɵɵpipeBind1(21, 35, ctx.hasVisibleOrInRangeLayers$) && ɵɵpipeBind1(22, 37, ctx.hasVisibleAndNotInRangeLayers$) && !ctx.allowShowAllLegends);\n    } }, styles: [\"mat-slide-toggle[_ngcontent-%COMP%]{margin:10px;width:100%}mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-content{width:calc(100% - 60px)}igo-list[_ngcontent-%COMP%]{display:contents}.layers-empty[_ngcontent-%COMP%]{margin:10px;text-align:justify}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LayerLegendListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-layer-legend-list',\n                templateUrl: './layer-legend-list.component.html',\n                styleUrls: ['./layer-legend-list.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { layers: [{\n            type: Input\n        }], excludeBaseLayers: [{\n            type: Input\n        }], updateLegendOnResolutionChange: [{\n            type: Input\n        }], allowShowAllLegends: [{\n            type: Input\n        }], showAllLegendsValue: [{\n            type: Input\n        }], allLegendsShown: [{\n            type: Output\n        }] }); })();\n\nclass LayerLegendListBindingDirective {\n    constructor(component, mapService) {\n        this.mapService = mapService;\n        this.component = component;\n    }\n    ngOnInit() {\n        // Override input layers\n        this.component.layers = [];\n        this.layersOrResolutionChange$$ = combineLatest([\n            this.mapService.getMap().layers$,\n            this.mapService.getMap().viewController.resolution$\n        ]).pipe(debounceTime(10)).subscribe((bunch) => {\n            const shownLayers = bunch[0].filter((layer) => {\n                return layer.showInLayerList === true;\n            });\n            this.component.layers = shownLayers;\n            this.layersVisibility$$ = combineLatest(shownLayers\n                .map((layer) => layer.visible$))\n                .subscribe((r) => {\n                this.component.change$.next();\n            });\n        });\n    }\n    ngOnDestroy() {\n        this.layersOrResolutionChange$$.unsubscribe();\n        if (this.layersVisibility$$ !== undefined) {\n            this.layersVisibility$$.unsubscribe();\n            this.layersVisibility$$ = undefined;\n        }\n    }\n}\nLayerLegendListBindingDirective.ɵfac = function LayerLegendListBindingDirective_Factory(t) { return new (t || LayerLegendListBindingDirective)(ɵɵdirectiveInject(LayerLegendListComponent, 2), ɵɵdirectiveInject(MapService)); };\nLayerLegendListBindingDirective.ɵdir = ɵɵdefineDirective({ type: LayerLegendListBindingDirective, selectors: [[\"\", \"igoLayerLegendListBinding\", \"\"]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LayerLegendListBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoLayerLegendListBinding]'\n            }]\n    }], function () { return [{ type: LayerLegendListComponent, decorators: [{\n                type: Self\n            }] }, { type: MapService }]; }, null); })();\n\nfunction TrackFeatureButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 1);\n    ɵɵlistener(\"click\", function TrackFeatureButtonComponent_button_0_Template_button_click_0_listener() { ɵɵrestoreView(_r2); const ctx_r1 = ɵɵnextContext(); return ctx_r1.toggleTrackFeature(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 2);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.geo.layer.trackFeature\"))(\"color\", ctx_r0.color);\n} }\nclass TrackFeatureButtonComponent {\n    constructor() {\n        this.trackFeature = false;\n        this.color = 'primary';\n    }\n    get options() {\n        if (!this.layer) {\n            return;\n        }\n        return this.layer.options;\n    }\n    ngOnInit() {\n        this.color = this.trackFeature ? 'primary' : 'basic';\n    }\n    toggleTrackFeature() {\n        if (this.trackFeature) {\n            this.layer.disableTrackFeature(this.layer.options.trackFeature);\n            this.color = 'basic';\n        }\n        else {\n            this.layer.enableTrackFeature(this.layer.options.trackFeature);\n            this.color = 'primary';\n        }\n        this.trackFeature = !this.trackFeature;\n    }\n}\nTrackFeatureButtonComponent.ɵfac = function TrackFeatureButtonComponent_Factory(t) { return new (t || TrackFeatureButtonComponent)(); };\nTrackFeatureButtonComponent.ɵcmp = ɵɵdefineComponent({ type: TrackFeatureButtonComponent, selectors: [[\"igo-track-feature-button\"]], inputs: { layer: \"layer\", trackFeature: \"trackFeature\" }, decls: 1, vars: 1, consts: [[\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"crosshairs-gps\"]], template: function TrackFeatureButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, TrackFeatureButtonComponent_button_0_Template, 3, 4, \"button\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.options.trackFeature);\n    } }, directives: [NgIf, MatButton, MatTooltip, MatIcon], pipes: [TranslatePipe], styles: [\"\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(TrackFeatureButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-track-feature-button',\n                templateUrl: './track-feature-button.component.html',\n                styleUrls: ['./track-feature-button.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { layer: [{\n            type: Input\n        }], trackFeature: [{\n            type: Input\n        }] }); })();\n\nclass LayerLegendItemComponent {\n    constructor(networkService) {\n        this.networkService = networkService;\n        this.inResolutionRange$ = new BehaviorSubject(true);\n        this.updateLegendOnResolutionChange = false;\n    }\n    ngOnInit() {\n        const resolution$ = this.layer.map.viewController.resolution$;\n        this.resolution$$ = resolution$.subscribe(() => {\n            this.onResolutionChange();\n        });\n        this.tooltipText = this.computeTooltip();\n        this.network$$ = this.networkService.currentState().subscribe((state) => {\n            this.state = state;\n            this.onResolutionChange();\n        });\n    }\n    ngOnDestroy() {\n        this.resolution$$.unsubscribe();\n        this.network$$.unsubscribe();\n    }\n    computeTooltip() {\n        const layerOptions = this.layer.options;\n        if (!layerOptions.tooltip) {\n            return this.layer.title;\n        }\n        const layerTooltip = layerOptions.tooltip;\n        const layerMetadata = layerOptions.metadata;\n        switch (layerOptions.tooltip.type) {\n            case TooltipType.TITLE:\n                return this.layer.title;\n            case TooltipType.ABSTRACT:\n                if (layerMetadata && layerMetadata.abstract) {\n                    return layerMetadata.abstract;\n                }\n                else {\n                    return this.layer.title;\n                }\n            case TooltipType.CUSTOM:\n                if (layerTooltip && layerTooltip.text) {\n                    return layerTooltip.text;\n                }\n                else {\n                    return this.layer.title;\n                }\n            default:\n                return this.layer.title;\n        }\n    }\n    onResolutionChange() {\n        const inResolutionRange = this.layer.isInResolutionsRange;\n        this.inResolutionRange$.next(inResolutionRange);\n    }\n}\nLayerLegendItemComponent.ɵfac = function LayerLegendItemComponent_Factory(t) { return new (t || LayerLegendItemComponent)(ɵɵdirectiveInject(NetworkService)); };\nLayerLegendItemComponent.ɵcmp = ɵɵdefineComponent({ type: LayerLegendItemComponent, selectors: [[\"igo-layer-legend-item\"]], inputs: { layer: \"layer\", updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\" }, decls: 6, vars: 4, consts: [[1, \"igo-layer-list-item\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", 1, \"igo-layer-title\", 3, \"matTooltip\"], [1, \"igo-layer-legend-container\"], [\"legend\", \"\"], [3, \"layer\", \"updateLegendOnResolutionChange\"]], template: function LayerLegendItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-list-item\", 0);\n        ɵɵelementStart(1, \"h4\", 1);\n        ɵɵtext(2);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(3, \"div\", 2, 3);\n        ɵɵelement(5, \"igo-layer-legend\", 4);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"matTooltip\", ctx.tooltipText);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate(ctx.layer.title);\n        ɵɵadvance(3);\n        ɵɵproperty(\"layer\", ctx.layer)(\"updateLegendOnResolutionChange\", ctx.updateLegendOnResolutionChange);\n    } }, styles: [\"[_nghost-%COMP%]{overflow:hidden}.igo-layer-list-item[_ngcontent-%COMP%]{clear:both;height:46px}.igo-layer-legend-container[_ngcontent-%COMP%]{padding-left:18px;width:calc(100% - 18px)}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LayerLegendItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-layer-legend-item',\n                templateUrl: './layer-legend-item.component.html',\n                styleUrls: ['./layer-legend-item.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: NetworkService }]; }, { layer: [{\n            type: Input\n        }], updateLegendOnResolutionChange: [{\n            type: Input\n        }] }); })();\n\nclass IgoLayerModule {\n    static forRoot() {\n        return {\n            ngModule: IgoLayerModule,\n            providers: [LayerService, StyleService, LayerListToolService]\n        };\n    }\n}\nIgoLayerModule.ɵmod = ɵɵdefineNgModule({ type: IgoLayerModule });\nIgoLayerModule.ɵinj = ɵɵdefineInjector({ factory: function IgoLayerModule_Factory(t) { return new (t || IgoLayerModule)(); }, imports: [[\n            MatInputModule,\n            MatFormFieldModule,\n            CommonModule,\n            FormsModule,\n            MatDividerModule,\n            MatMenuModule,\n            MatIconModule,\n            MatButtonModule,\n            MatSlideToggleModule,\n            MatSelectModule,\n            MatTooltipModule,\n            MatListModule,\n            MatSliderModule,\n            MatBadgeModule,\n            MatCheckboxModule,\n            IgoLanguageModule,\n            IgoListModule,\n            IgoCollapsibleModule,\n            IgoImageModule,\n            IgoPanelModule,\n            IgoMatBadgeIconModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoLayerModule, { declarations: [LayerItemComponent,\n        LayerLegendItemComponent,\n        LayerLegendComponent,\n        LayerListComponent,\n        LayerListToolComponent,\n        LayerLegendListComponent,\n        LayerListBindingDirective,\n        LayerLegendListBindingDirective,\n        TrackFeatureButtonComponent], imports: [MatInputModule,\n        MatFormFieldModule,\n        CommonModule,\n        FormsModule,\n        MatDividerModule,\n        MatMenuModule,\n        MatIconModule,\n        MatButtonModule,\n        MatSlideToggleModule,\n        MatSelectModule,\n        MatTooltipModule,\n        MatListModule,\n        MatSliderModule,\n        MatBadgeModule,\n        MatCheckboxModule,\n        IgoLanguageModule,\n        IgoListModule,\n        IgoCollapsibleModule,\n        IgoImageModule,\n        IgoPanelModule,\n        IgoMatBadgeIconModule], exports: [LayerItemComponent,\n        LayerLegendItemComponent,\n        LayerLegendComponent,\n        LayerListComponent,\n        LayerListToolComponent,\n        LayerLegendListComponent,\n        LayerListBindingDirective,\n        LayerLegendListBindingDirective,\n        TrackFeatureButtonComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoLayerModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    MatInputModule,\n                    MatFormFieldModule,\n                    CommonModule,\n                    FormsModule,\n                    MatDividerModule,\n                    MatMenuModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatSlideToggleModule,\n                    MatSelectModule,\n                    MatTooltipModule,\n                    MatListModule,\n                    MatSliderModule,\n                    MatBadgeModule,\n                    MatCheckboxModule,\n                    IgoLanguageModule,\n                    IgoListModule,\n                    IgoCollapsibleModule,\n                    IgoImageModule,\n                    IgoPanelModule,\n                    IgoMatBadgeIconModule\n                ],\n                exports: [\n                    LayerItemComponent,\n                    LayerLegendItemComponent,\n                    LayerLegendComponent,\n                    LayerListComponent,\n                    LayerListToolComponent,\n                    LayerLegendListComponent,\n                    LayerListBindingDirective,\n                    LayerLegendListBindingDirective,\n                    TrackFeatureButtonComponent\n                ],\n                declarations: [\n                    LayerItemComponent,\n                    LayerLegendItemComponent,\n                    LayerLegendComponent,\n                    LayerListComponent,\n                    LayerListToolComponent,\n                    LayerLegendListComponent,\n                    LayerListBindingDirective,\n                    LayerLegendListBindingDirective,\n                    TrackFeatureButtonComponent\n                ]\n            }]\n    }], null, null); })();\nɵɵsetComponentScope(LayerItemComponent, [CdkAutofill, CdkTextareaAutosize, Dir, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, MatInput, MatTextareaAutosize, NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, MatDivider, CdkScrollable, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatIcon, MatButton, MatAnchor, MatSlideToggleRequiredValidator, MatSlideToggle, MatSelect, MatSelectTrigger, MatOption, MatOptgroup, MatTooltip, TooltipComponent, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatSlider, MatBadge, MatCheckbox, MatCheckboxRequiredValidator, TranslateDirective, ListItemDirective, ListComponent, CollapsibleComponent, CollapseDirective, PanelComponent, IgoBadgeIconDirective, LayerItemComponent,\n    LayerLegendItemComponent,\n    LayerLegendComponent,\n    LayerListComponent,\n    LayerListToolComponent,\n    LayerLegendListComponent,\n    LayerListBindingDirective,\n    LayerLegendListBindingDirective,\n    TrackFeatureButtonComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, SecureImagePipe]);\nɵɵsetComponentScope(LayerLegendItemComponent, [CdkAutofill, CdkTextareaAutosize, Dir, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, MatInput, MatTextareaAutosize, NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, MatDivider, CdkScrollable, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatIcon, MatButton, MatAnchor, MatSlideToggleRequiredValidator, MatSlideToggle, MatSelect, MatSelectTrigger, MatOption, MatOptgroup, MatTooltip, TooltipComponent, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatSlider, MatBadge, MatCheckbox, MatCheckboxRequiredValidator, TranslateDirective, ListItemDirective, ListComponent, CollapsibleComponent, CollapseDirective, PanelComponent, IgoBadgeIconDirective, LayerItemComponent,\n    LayerLegendItemComponent,\n    LayerLegendComponent,\n    LayerListComponent,\n    LayerListToolComponent,\n    LayerLegendListComponent,\n    LayerListBindingDirective,\n    LayerLegendListBindingDirective,\n    TrackFeatureButtonComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, SecureImagePipe]);\nɵɵsetComponentScope(LayerListComponent, [CdkAutofill, CdkTextareaAutosize, Dir, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, MatInput, MatTextareaAutosize, NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, MatDivider, CdkScrollable, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatIcon, MatButton, MatAnchor, MatSlideToggleRequiredValidator, MatSlideToggle, MatSelect, MatSelectTrigger, MatOption, MatOptgroup, MatTooltip, TooltipComponent, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatSlider, MatBadge, MatCheckbox, MatCheckboxRequiredValidator, TranslateDirective, ListItemDirective, ListComponent, CollapsibleComponent, CollapseDirective, PanelComponent, IgoBadgeIconDirective, LayerItemComponent,\n    LayerLegendItemComponent,\n    LayerLegendComponent,\n    LayerListComponent,\n    LayerListToolComponent,\n    LayerLegendListComponent,\n    LayerListBindingDirective,\n    LayerLegendListBindingDirective,\n    TrackFeatureButtonComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, SecureImagePipe]);\nɵɵsetComponentScope(LayerLegendListComponent, [CdkAutofill, CdkTextareaAutosize, Dir, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, MatInput, MatTextareaAutosize, NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, MatDivider, CdkScrollable, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatIcon, MatButton, MatAnchor, MatSlideToggleRequiredValidator, MatSlideToggle, MatSelect, MatSelectTrigger, MatOption, MatOptgroup, MatTooltip, TooltipComponent, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatSlider, MatBadge, MatCheckbox, MatCheckboxRequiredValidator, TranslateDirective, ListItemDirective, ListComponent, CollapsibleComponent, CollapseDirective, PanelComponent, IgoBadgeIconDirective, LayerItemComponent,\n    LayerLegendItemComponent,\n    LayerLegendComponent,\n    LayerListComponent,\n    LayerListToolComponent,\n    LayerLegendListComponent,\n    LayerListBindingDirective,\n    LayerLegendListBindingDirective,\n    TrackFeatureButtonComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, SecureImagePipe]);\n\n/**\n * @ignore\n */\nclass IgoCatalogBrowserModule {\n}\nIgoCatalogBrowserModule.ɵmod = ɵɵdefineNgModule({ type: IgoCatalogBrowserModule });\nIgoCatalogBrowserModule.ɵinj = ɵɵdefineInjector({ factory: function IgoCatalogBrowserModule_Factory(t) { return new (t || IgoCatalogBrowserModule)(); }, imports: [[\n            CommonModule,\n            MatBadgeModule,\n            MatButtonModule,\n            MatIconModule,\n            MatListModule,\n            MatTooltipModule,\n            IgoMatBadgeIconModule,\n            IgoLanguageModule,\n            IgoListModule,\n            IgoCollapsibleModule,\n            IgoMetadataModule,\n            IgoLayerModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoCatalogBrowserModule, { declarations: [CatalogBrowserComponent,\n        CatalogBrowserGroupComponent,\n        CatalogBrowserLayerComponent], imports: [CommonModule,\n        MatBadgeModule,\n        MatButtonModule,\n        MatIconModule,\n        MatListModule,\n        MatTooltipModule,\n        IgoMatBadgeIconModule,\n        IgoLanguageModule,\n        IgoListModule,\n        IgoCollapsibleModule,\n        IgoMetadataModule,\n        IgoLayerModule], exports: [CatalogBrowserComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoCatalogBrowserModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatBadgeModule,\n                    MatButtonModule,\n                    MatIconModule,\n                    MatListModule,\n                    MatTooltipModule,\n                    IgoMatBadgeIconModule,\n                    IgoLanguageModule,\n                    IgoListModule,\n                    IgoCollapsibleModule,\n                    IgoMetadataModule,\n                    IgoLayerModule\n                ],\n                exports: [\n                    CatalogBrowserComponent\n                ],\n                declarations: [\n                    CatalogBrowserComponent,\n                    CatalogBrowserGroupComponent,\n                    CatalogBrowserLayerComponent\n                ]\n            }]\n    }], null, null); })();\nɵɵsetComponentScope(CatalogBrowserComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, MatBadge, Dir, MatButton, MatAnchor, MatIcon, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, CdkScrollable, IgoBadgeIconDirective, TranslateDirective, ListItemDirective, ListComponent, CollapsibleComponent, CollapseDirective, MetadataButtonComponent, MetadataAbstractComponent, LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent, CatalogBrowserComponent,\n    CatalogBrowserGroupComponent,\n    CatalogBrowserLayerComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe]);\n\nfunction AddCatalogDialogComponent_mat_option_10_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 16);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const predefinedCatalog_r5 = ctx.$implicit;\n    ɵɵproperty(\"matTooltip\", predefinedCatalog_r5.url)(\"value\", predefinedCatalog_r5);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", predefinedCatalog_r5.url, \" \");\n} }\nfunction AddCatalogDialogComponent_mat_option_19_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-option\", 17);\n    ɵɵlistener(\"click\", function AddCatalogDialogComponent_mat_option_19_Template_mat_option_click_0_listener($event) { ɵɵrestoreView(_r8); return $event.stopPropagation(); });\n    ɵɵelementStart(1, \"p\", 18);\n    ɵɵtext(2);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const type_r6 = ctx.$implicit;\n    ɵɵproperty(\"value\", type_r6);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(type_r6);\n} }\nconst _c0$7 = function (a0, a1) { return { value: a0, email: a1 }; };\nfunction AddCatalogDialogComponent_span_20_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"span\");\n    ɵɵelementStart(1, \"p\", 19);\n    ɵɵtext(2);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ctx_r3.languageService.translate.instant(\"igo.geo.catalog.externalProvider.unavailableWithEmail\", ɵɵpureFunction2(1, _c0$7, ctx_r3.addedCatalog.url, ctx_r3.emailAddress)));\n} }\nconst _c1$2 = function (a0) { return { value: a0 }; };\nfunction AddCatalogDialogComponent_span_21_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"span\");\n    ɵɵelementStart(1, \"p\", 19);\n    ɵɵtext(2);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ctx_r4.languageService.translate.instant(\"igo.geo.catalog.unavailable\", ɵɵpureFunction1(1, _c1$2, ctx_r4.addedCatalog.url)));\n} }\nclass AddCatalogDialogComponent {\n    constructor(formBuilder, languageService, configService, dialogRef, data) {\n        this.formBuilder = formBuilder;\n        this.languageService = languageService;\n        this.configService = configService;\n        this.dialogRef = dialogRef;\n        this.data = data;\n        this.defaultAddedCatalogType = 'wms';\n        this.predefinedCatalogsList$ = new BehaviorSubject([]);\n        this.predefinedCatalogs = [];\n        this.error = false;\n        this.store = data.store;\n        this.predefinedCatalogs = data.predefinedCatalogs;\n        this.error = data.error;\n        this.addedCatalog = data.addedCatalog;\n        this.form = this.formBuilder.group({\n            id: ['', []],\n            title: ['', []],\n            url: ['', [Validators.required]],\n            type: [this.defaultAddedCatalogType, [Validators.required]]\n        });\n    }\n    ngOnInit() {\n        this.store.state.clear();\n        this.typeCapabilities = Object.keys(TypeCapabilities);\n        this.addedCatalogType$$ = this.form\n            .get('type')\n            .valueChanges.subscribe((value) => {\n            if (value === 'wmts') {\n                this.form.get('title').setValidators(Validators.required);\n            }\n            else {\n                this.form.get('title').setValidators([]);\n            }\n            this.form.get('title').updateValueAndValidity();\n        });\n        this.computePredefinedCatalogList();\n        this.storeViewAll$$ = this.store.view\n            .all$()\n            .subscribe(() => this.computePredefinedCatalogList());\n        this.emailAddress = this.configService.getConfig('emailAddress');\n    }\n    ngOnDestroy() {\n        this.addedCatalogType$$.unsubscribe();\n        this.storeViewAll$$.unsubscribe();\n    }\n    changeUrl(catalog) {\n        this.form.patchValue(catalog);\n        this.error = false;\n        this.computePredefinedCatalogList();\n    }\n    computePredefinedCatalogList() {\n        this.predefinedCatalogsList$.next(this.predefinedCatalogs.filter((c) => !this.store.get(c.id)));\n    }\n    addCatalog(addedCatalog) {\n        this.error = false;\n        this.dialogRef.close(addedCatalog);\n    }\n    cancel() {\n        this.error = false;\n        this.dialogRef.close();\n    }\n}\nAddCatalogDialogComponent.ɵfac = function AddCatalogDialogComponent_Factory(t) { return new (t || AddCatalogDialogComponent)(ɵɵdirectiveInject(FormBuilder), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(ConfigService), ɵɵdirectiveInject(MatDialogRef), ɵɵdirectiveInject(MAT_DIALOG_DATA, 8)); };\nAddCatalogDialogComponent.ɵcmp = ɵɵdefineComponent({ type: AddCatalogDialogComponent, selectors: [[\"igo-add-catalog-dialog\"]], decls: 30, vars: 21, consts: [[\"mat-dialog-title\", \"\", 1, \"mat-typography\"], [\"mat-dialog-content\", \"\", 1, \"mat-typography\"], [1, \"igo-form\", 3, \"formGroup\"], [1, \"igo-input-container\"], [\"type\", \"text\", \"formControlName\", \"url\", \"placeholder\", \"URL\", \"matInput\", \"\", 3, \"matAutocomplete\"], [3, \"optionSelected\"], [\"auto\", \"matAutocomplete\"], [\"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"value\", 4, \"ngFor\", \"ngForOf\"], [\"matInput\", \"\", \"formControlName\", \"title\", 3, \"placeholder\"], [\"formControlName\", \"type\", \"placeholder\", \"Type\"], [3, \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"mat-dialog-actions\", \"\", 2, \"justify-content\", \"center\"], [1, \"igo-form-button-group\", \"add-catalog-button-top-padding\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 3, \"click\"], [\"id\", \"addCatalogBtnDialog\", \"mat-raised-button\", \"\", \"type\", \"button\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [\"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"value\"], [3, \"value\", \"click\"], [\"mat-line\", \"\"], [1, \"error\"]], template: function AddCatalogDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"h1\", 0);\n        ɵɵtext(1);\n        ɵɵpipe(2, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(3, \"div\", 1);\n        ɵɵelementStart(4, \"form\", 2);\n        ɵɵelementStart(5, \"div\", 3);\n        ɵɵelementStart(6, \"mat-form-field\");\n        ɵɵelement(7, \"input\", 4);\n        ɵɵelementStart(8, \"mat-autocomplete\", 5, 6);\n        ɵɵlistener(\"optionSelected\", function AddCatalogDialogComponent_Template_mat_autocomplete_optionSelected_8_listener($event) { return ctx.changeUrl($event.option.value); });\n        ɵɵtemplate(10, AddCatalogDialogComponent_mat_option_10_Template, 2, 3, \"mat-option\", 7);\n        ɵɵpipe(11, \"async\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(12, \"div\", 3);\n        ɵɵelementStart(13, \"mat-form-field\");\n        ɵɵelement(14, \"input\", 8);\n        ɵɵpipe(15, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(16, \"div\", 3);\n        ɵɵelementStart(17, \"mat-form-field\");\n        ɵɵelementStart(18, \"mat-select\", 9);\n        ɵɵtemplate(19, AddCatalogDialogComponent_mat_option_19_Template, 3, 2, \"mat-option\", 10);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵtemplate(20, AddCatalogDialogComponent_span_20_Template, 3, 4, \"span\", 11);\n        ɵɵtemplate(21, AddCatalogDialogComponent_span_21_Template, 3, 3, \"span\", 11);\n        ɵɵelementEnd();\n        ɵɵelementStart(22, \"div\", 12);\n        ɵɵelementStart(23, \"div\", 13);\n        ɵɵelementStart(24, \"button\", 14);\n        ɵɵlistener(\"click\", function AddCatalogDialogComponent_Template_button_click_24_listener() { return ctx.cancel(); });\n        ɵɵtext(25);\n        ɵɵpipe(26, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(27, \"button\", 15);\n        ɵɵlistener(\"click\", function AddCatalogDialogComponent_Template_button_click_27_listener() { return ctx.addCatalog(ctx.form.value); });\n        ɵɵtext(28);\n        ɵɵpipe(29, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r0 = ɵɵreference(9);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate(ɵɵpipeBind1(2, 11, \"igo.geo.catalog.library.addTitle\"));\n        ɵɵadvance(3);\n        ɵɵproperty(\"formGroup\", ctx.form);\n        ɵɵadvance(3);\n        ɵɵproperty(\"matAutocomplete\", _r0);\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(11, 13, ctx.predefinedCatalogsList$));\n        ɵɵadvance(4);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(15, 15, \"igo.geo.printForm.title\"));\n        ɵɵadvance(5);\n        ɵɵproperty(\"ngForOf\", ctx.typeCapabilities);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.error && ctx.addedCatalog && ctx.emailAddress);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.error && ctx.addedCatalog && !ctx.emailAddress);\n        ɵɵadvance(4);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(26, 17, \"igo.geo.catalog.library.cancel\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"disabled\", !ctx.form.valid);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(29, 19, \"igo.geo.catalog.library.add\"), \" \");\n    } }, directives: [MatDialogTitle, MatDialogContent, ɵangular_packages_forms_forms_y, NgControlStatusGroup, FormGroupDirective, MatFormField, DefaultValueAccessor, MatInput, MatAutocompleteTrigger, NgControlStatus, FormControlName, MatAutocomplete, NgForOf, MatSelect, NgIf, MatDialogActions, MatButton, MatOption, MatTooltip, MatLine], pipes: [TranslatePipe, AsyncPipe], styles: [\"mat-form-field[_ngcontent-%COMP%]{width:100%}.add-catalog-button-top-padding[_ngcontent-%COMP%]{padding-top:25px}.igo-form[_ngcontent-%COMP%]{padding:10px 5px 5px}.igo-form-button-group[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{cursor:pointer}button#addCatalogBtnDialog[disabled=true][_ngcontent-%COMP%]{background-color:rgba(0,0,0,.12);color:rgba(0,0,0,.26);cursor:default}.error[_ngcontent-%COMP%]{color:red}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AddCatalogDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-add-catalog-dialog',\n                templateUrl: './add-catalog-dialog.component.html',\n                styleUrls: ['./add-catalog-dialog.component.scss']\n            }]\n    }], function () { return [{ type: FormBuilder }, { type: LanguageService }, { type: ConfigService }, { type: MatDialogRef }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [MAT_DIALOG_DATA]\n            }] }]; }, null); })();\n\nfunction CatalogLibaryComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-catalog-library-item\", 3);\n    ɵɵlistener(\"catalogRemove\", function CatalogLibaryComponent_ng_template_1_Template_igo_catalog_library_item_catalogRemove_0_listener() { ɵɵrestoreView(_r4); const catalog_r2 = ctx.$implicit; const ctx_r3 = ɵɵnextContext(); return ctx_r3.onCatalogRemove(catalog_r2); })(\"select\", function CatalogLibaryComponent_ng_template_1_Template_igo_catalog_library_item_select_0_listener() { ɵɵrestoreView(_r4); const catalog_r2 = ctx.$implicit; const ctx_r5 = ɵɵnextContext(); return ctx_r5.onCatalogSelect(catalog_r2); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const catalog_r2 = ctx.$implicit;\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"map\", ctx_r0.map)(\"catalog\", catalog_r2);\n} }\nfunction CatalogLibaryComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 4);\n    ɵɵelementStart(1, \"button\", 5);\n    ɵɵlistener(\"click\", function CatalogLibaryComponent_div_3_Template_button_click_1_listener() { ɵɵrestoreView(_r7); const ctx_r6 = ɵɵnextContext(); return ctx_r6.addCatalogDialog(); });\n    ɵɵpipe(2, \"translate\");\n    ɵɵtext(3);\n    ɵɵpipe(4, \"translate\");\n    ɵɵelement(5, \"mat-icon\", 6);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(2, 2, \"igo.geo.catalog.library.addBtn\"));\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(4, 4, \"igo.geo.catalog.library.addBtn\"), \" \");\n} }\n/**\n * Component to browse a list of available catalogs\n */\nclass CatalogLibaryComponent {\n    constructor(capabilitiesService, messageService, languageService, storageService, dialog) {\n        this.capabilitiesService = capabilitiesService;\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.storageService = storageService;\n        this.dialog = dialog;\n        /**\n         * Determine if the form to add a catalog is allowed\n         */\n        this.addCatalogAllowed = false;\n        /**\n         * Determine if the form to add a catalog is allowed\n         */\n        this.predefinedCatalogs = [];\n        /**\n         * Event emitted a catalog is selected or unselected\n         */\n        this.catalogSelectChange = new EventEmitter();\n        this.submitDisabled = true;\n    }\n    get addedCatalogs() {\n        return (this.storageService.get('addedCatalogs') || []);\n    }\n    set addedCatalogs(catalogs) {\n        this.storageService.set('addedCatalogs', catalogs);\n    }\n    /**\n     * @internal\n     */\n    ngOnInit() {\n        this.store.state.clear();\n        this.predefinedCatalogs = this.predefinedCatalogs.map(c => {\n            c.id = Md5.hashStr((c.type || 'wms') + standardizeUrl(c.url));\n            return c;\n        });\n    }\n    getCatalogs() {\n        return this.store.view.all$();\n    }\n    /**\n     * When a catalog is selected, update it's state in the store\n     * and emit the catalog select change event\n     * @internal\n     */\n    onCatalogSelect(catalog) {\n        this.store.state.update(catalog, {\n            selected: true,\n            focused: true\n        }, true);\n        this.catalogSelectChange.emit({ selected: true, catalog });\n    }\n    unsubscribeAddingCatalog() {\n        if (this.addingCatalog$$) {\n            this.addingCatalog$$.unsubscribe();\n        }\n    }\n    addCatalog(addedCatalog) {\n        if (!addedCatalog) {\n            return;\n        }\n        let id = Md5.hashStr(addedCatalog.type + standardizeUrl(addedCatalog.url));\n        const predefinedCatalog = this.predefinedCatalogs.find((c) => c.id === addedCatalog.id);\n        if (predefinedCatalog) {\n            addedCatalog.version = predefinedCatalog.version;\n            addedCatalog.externalProvider = predefinedCatalog.externalProvider;\n            id = predefinedCatalog.id;\n        }\n        if (this.store.get(id)) {\n            const title = this.languageService.translate.instant('igo.geo.catalog.library.inlist.title');\n            const message = this.languageService.translate.instant('igo.geo.catalog.library.inlist.message');\n            this.messageService.alert(message, title);\n            return;\n        }\n        this.unsubscribeAddingCatalog();\n        this.addingCatalog$$ = this.capabilitiesService\n            .getCapabilities(TypeCapabilities[addedCatalog.type], addedCatalog.url, addedCatalog.version)\n            .pipe(catchError((e) => {\n            const title = this.languageService.translate.instant('igo.geo.catalog.unavailableTitle');\n            if (e.error) {\n                this.addCatalogDialog(true, addedCatalog);\n                e.error.caught = true;\n                return e;\n            }\n            const message = this.languageService.translate.instant('igo.geo.catalog.unavailable', { value: addedCatalog.url });\n            this.messageService.error(message, title);\n            throw e;\n        }))\n            .subscribe((capabilies) => {\n            let title;\n            switch (addedCatalog.type) {\n                case 'wms':\n                    title = addedCatalog.title || capabilies.Service.Title;\n                    break;\n                case 'arcgisrest':\n                case 'imagearcgisrest':\n                case 'tilearcgisrest':\n                    title = addedCatalog.title || capabilies.mapName;\n                    break;\n                case 'wmts':\n                    title =\n                        addedCatalog.title ||\n                            capabilies.ServiceIdentification.ServiceType;\n                    break;\n                default:\n                    title = addedCatalog.title;\n            }\n            const catalogToAdd = ObjectUtils.removeUndefined(Object.assign({}, predefinedCatalog, ObjectUtils.removeUndefined({\n                id,\n                title,\n                url: addedCatalog.url,\n                type: addedCatalog.type || 'wms',\n                externalProvider: addedCatalog.externalProvider || false,\n                removable: true\n            })));\n            this.store.insert(catalogToAdd);\n            const newCatalogs = this.addedCatalogs.slice(0);\n            newCatalogs.push(catalogToAdd);\n            this.addedCatalogs = newCatalogs;\n            this.unsubscribeAddingCatalog();\n        });\n    }\n    ngOnDestroy() {\n        this.unsubscribeAddingCatalog();\n    }\n    onCatalogRemove(catalog) {\n        this.store.delete(catalog);\n        this.addedCatalogs = this.addedCatalogs\n            .slice(0)\n            .filter((c) => c.id !== catalog.id);\n    }\n    addCatalogDialog(error, addedCatalog) {\n        const dialogRef = this.dialog.open(AddCatalogDialogComponent, {\n            width: '700px',\n            data: {\n                predefinedCatalogs: this.predefinedCatalogs,\n                store: this.store,\n                error,\n                addedCatalog\n            }\n        });\n        dialogRef.afterClosed().subscribe((catalog) => {\n            this.addCatalog(catalog);\n        });\n    }\n}\nCatalogLibaryComponent.ɵfac = function CatalogLibaryComponent_Factory(t) { return new (t || CatalogLibaryComponent)(ɵɵdirectiveInject(CapabilitiesService), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(StorageService), ɵɵdirectiveInject(MatDialog)); };\nCatalogLibaryComponent.ɵcmp = ɵɵdefineComponent({ type: CatalogLibaryComponent, selectors: [[\"igo-catalog-library\"]], inputs: { store: \"store\", map: \"map\", addCatalogAllowed: \"addCatalogAllowed\", predefinedCatalogs: \"predefinedCatalogs\" }, outputs: { catalogSelectChange: \"catalogSelectChange\" }, decls: 4, vars: 5, consts: [[3, \"navigation\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"class\", \"btnAddCatalog\", 4, \"ngIf\"], [\"igoListItem\", \"\", \"color\", \"accent\", 3, \"map\", \"catalog\", \"catalogRemove\", \"select\"], [1, \"btnAddCatalog\"], [\"mat-raised-button\", \"\", \"matTooltipPosition\", \"above\", \"color\", \"primary\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"earth-plus\"]], template: function CatalogLibaryComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-list\", 0);\n        ɵɵtemplate(1, CatalogLibaryComponent_ng_template_1_Template, 1, 2, \"ng-template\", 1);\n        ɵɵpipe(2, \"async\");\n        ɵɵelementEnd();\n        ɵɵtemplate(3, CatalogLibaryComponent_div_3_Template, 6, 6, \"div\", 2);\n    } if (rf & 2) {\n        ɵɵproperty(\"navigation\", false);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(2, 3, ctx.getCatalogs()));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ctx.addCatalogAllowed);\n    } }, styles: [\"igo-list[_ngcontent-%COMP%]{height:auto}.btnAddCatalog[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:30px 0}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CatalogLibaryComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-library',\n                templateUrl: './catalog-library.component.html',\n                styleUrls: ['./catalog-library.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: CapabilitiesService }, { type: MessageService }, { type: LanguageService }, { type: StorageService }, { type: MatDialog }]; }, { store: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], addCatalogAllowed: [{\n            type: Input\n        }], predefinedCatalogs: [{\n            type: Input\n        }], catalogSelectChange: [{\n            type: Output\n        }] }); })();\n\nfunction CatalogLibaryItemComponent_mat_icon_3_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-icon\", 4);\n    ɵɵlistener(\"click\", function CatalogLibaryItemComponent_mat_icon_3_Template_mat_icon_click_0_listener($event) { ɵɵrestoreView(_r4); return $event.stopPropagation(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.catalog.externalProvider.catalog\"));\n} }\nfunction CatalogLibaryItemComponent_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 5);\n    ɵɵlistener(\"click\", function CatalogLibaryItemComponent_button_4_Template_button_click_0_listener($event) { ɵɵrestoreView(_r6); const ctx_r5 = ɵɵnextContext(); return ctx_r5.removeCatalogFromLibrary($event); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 6);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.catalog.library.remove\"));\n} }\nfunction CatalogLibaryItemComponent_button_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 7);\n    ɵɵelement(1, \"mat-icon\", 8);\n    ɵɵelementEnd();\n} }\n/**\n * Catalog library item\n */\nclass CatalogLibaryItemComponent {\n    constructor() {\n        this.catalogRemove = new EventEmitter();\n    }\n    /**\n     * @internal\n     */\n    get title() { return getEntityTitle(this.catalog); }\n    removeCatalogFromLibrary(event) {\n        event.stopPropagation();\n        this.catalogRemove.emit();\n    }\n}\nCatalogLibaryItemComponent.ɵfac = function CatalogLibaryItemComponent_Factory(t) { return new (t || CatalogLibaryItemComponent)(); };\nCatalogLibaryItemComponent.ɵcmp = ɵɵdefineComponent({ type: CatalogLibaryItemComponent, selectors: [[\"igo-catalog-library-item\"]], inputs: { catalog: \"catalog\", map: \"map\" }, outputs: { catalogRemove: \"catalogRemove\" }, decls: 6, vars: 4, consts: [[\"mat-line\", \"\"], [\"class\", \"igo-external-provider\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"primary\", \"svgIcon\", \"earth-arrow-right\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"class\", \"igo-blank\", \"disabled\", \"true\", \"mat-icon-button\", \"\", 4, \"ngIf\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"primary\", \"svgIcon\", \"earth-arrow-right\", 1, \"igo-external-provider\", 3, \"matTooltip\", \"click\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"delete\"], [\"disabled\", \"true\", \"mat-icon-button\", \"\", 1, \"igo-blank\"], [\"svgIcon\", \"blank\"]], template: function CatalogLibaryItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-list-item\");\n        ɵɵelementStart(1, \"h4\", 0);\n        ɵɵtext(2);\n        ɵɵelementEnd();\n        ɵɵtemplate(3, CatalogLibaryItemComponent_mat_icon_3_Template, 2, 3, \"mat-icon\", 1);\n        ɵɵtemplate(4, CatalogLibaryItemComponent_button_4_Template, 3, 3, \"button\", 2);\n        ɵɵtemplate(5, CatalogLibaryItemComponent_button_5_Template, 2, 0, \"button\", 3);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(2);\n        ɵɵtextInterpolate1(\" \", ctx.title, \" \");\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.catalog.externalProvider);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.catalog.removable);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", !ctx.catalog.removable);\n    } }, directives: [MatListItem, MatLine, NgIf, MatIcon, MatTooltip, MatButton], pipes: [TranslatePipe], styles: [\".igo-blank[_ngcontent-%COMP%]{cursor:pointer}.igo-external-provider[_ngcontent-%COMP%]{cursor:help}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CatalogLibaryItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-library-item',\n                templateUrl: './catalog-library-item.component.html',\n                styleUrls: ['./catalog-library-item.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], null, { catalog: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], catalogRemove: [{\n            type: Output\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoCatalogLibraryModule {\n}\nIgoCatalogLibraryModule.ɵmod = ɵɵdefineNgModule({ type: IgoCatalogLibraryModule });\nIgoCatalogLibraryModule.ɵinj = ɵɵdefineInjector({ factory: function IgoCatalogLibraryModule_Factory(t) { return new (t || IgoCatalogLibraryModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatBadgeModule,\n            MatListModule,\n            MatTooltipModule,\n            IgoListModule,\n            IgoLanguageModule,\n            MatButtonModule,\n            MatFormFieldModule,\n            ReactiveFormsModule,\n            MatInputModule,\n            MatSelectModule,\n            MatAutocompleteModule,\n            MatDialogModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoCatalogLibraryModule, { declarations: [CatalogLibaryComponent,\n        CatalogLibaryItemComponent,\n        AddCatalogDialogComponent], imports: [CommonModule,\n        MatIconModule,\n        MatBadgeModule,\n        MatListModule,\n        MatTooltipModule,\n        IgoListModule,\n        IgoLanguageModule,\n        MatButtonModule,\n        MatFormFieldModule,\n        ReactiveFormsModule,\n        MatInputModule,\n        MatSelectModule,\n        MatAutocompleteModule,\n        MatDialogModule], exports: [CatalogLibaryComponent,\n        AddCatalogDialogComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoCatalogLibraryModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatBadgeModule,\n                    MatListModule,\n                    MatTooltipModule,\n                    IgoListModule,\n                    IgoLanguageModule,\n                    MatButtonModule,\n                    MatFormFieldModule,\n                    ReactiveFormsModule,\n                    MatInputModule,\n                    MatSelectModule,\n                    MatAutocompleteModule,\n                    MatDialogModule\n                ],\n                exports: [\n                    CatalogLibaryComponent,\n                    AddCatalogDialogComponent\n                ],\n                declarations: [\n                    CatalogLibaryComponent,\n                    CatalogLibaryItemComponent,\n                    AddCatalogDialogComponent\n                ]\n            }]\n    }], null, null); })();\nɵɵsetComponentScope(CatalogLibaryComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, MatIcon, Dir, MatBadge, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, CdkScrollable, ListItemDirective, ListComponent, TranslateDirective, MatButton, MatAnchor, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatOption, MatOptgroup, MatAutocomplete, MatAutocompleteTrigger, MatAutocompleteOrigin, MatDialogContainer, MatDialogClose, MatDialogTitle, MatDialogContent, MatDialogActions, CatalogLibaryComponent,\n    CatalogLibaryItemComponent,\n    AddCatalogDialogComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe]);\n\nclass IgoCatalogModule {\n}\nIgoCatalogModule.ɵmod = ɵɵdefineNgModule({ type: IgoCatalogModule });\nIgoCatalogModule.ɵinj = ɵɵdefineInjector({ factory: function IgoCatalogModule_Factory(t) { return new (t || IgoCatalogModule)(); }, imports: [[\n            CommonModule,\n            MatBadgeModule,\n            MatIconModule,\n            MatListModule,\n            MatTooltipModule,\n            IgoMatBadgeIconModule,\n            IgoListModule,\n            IgoCollapsibleModule\n        ], IgoCatalogBrowserModule,\n        IgoCatalogLibraryModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoCatalogModule, { imports: [CommonModule,\n        MatBadgeModule,\n        MatIconModule,\n        MatListModule,\n        MatTooltipModule,\n        IgoMatBadgeIconModule,\n        IgoListModule,\n        IgoCollapsibleModule], exports: [IgoCatalogBrowserModule,\n        IgoCatalogLibraryModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoCatalogModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatBadgeModule,\n                    MatIconModule,\n                    MatListModule,\n                    MatTooltipModule,\n                    IgoMatBadgeIconModule,\n                    IgoListModule,\n                    IgoCollapsibleModule\n                ],\n                exports: [\n                    IgoCatalogBrowserModule,\n                    IgoCatalogLibraryModule\n                ],\n                declarations: []\n            }]\n    }], null, null); })();\n\nclass IgoDataSourceModule {\n    static forRoot() {\n        return {\n            ngModule: IgoDataSourceModule,\n            providers: []\n        };\n    }\n}\nIgoDataSourceModule.ɵmod = ɵɵdefineNgModule({ type: IgoDataSourceModule });\nIgoDataSourceModule.ɵinj = ɵɵdefineInjector({ factory: function IgoDataSourceModule_Factory(t) { return new (t || IgoDataSourceModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoDataSourceModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                exports: [],\n                declarations: []\n            }]\n    }], null, null); })();\n\nclass FilterableDataSourcePipe {\n    transform(value, arg) {\n        let layers;\n        if (arg === 'time') {\n            layers = value.filter((layer) => {\n                const datasource = layer.dataSource;\n                return (this.isTimeFilterable(datasource) &&\n                    datasource.options.timeFilter !== undefined &&\n                    Object.keys(datasource.options.timeFilter).length);\n            });\n        }\n        if (arg === 'ogc') {\n            layers = value.filter((layer) => {\n                const datasource = layer.dataSource;\n                return this.isOgcFilterable(datasource);\n            });\n        }\n        return layers;\n    }\n    isTimeFilterable(dataSource) {\n        if (dataSource.options.type !== 'wms') {\n            return false;\n        }\n        return dataSource.options.timeFilterable;\n    }\n    isOgcFilterable(dataSource) {\n        let isOgcFilterable = false;\n        if (dataSource.options.ogcFilters &&\n            dataSource.options.ogcFilters.enabled &&\n            dataSource.options.ogcFilters.editable) {\n            isOgcFilterable = true;\n        }\n        if (dataSource.options.ogcFilters &&\n            dataSource.options.ogcFilters.enabled &&\n            (dataSource.options.ogcFilters.pushButtons ||\n                dataSource.options.ogcFilters.checkboxes ||\n                dataSource.options.ogcFilters.radioButtons ||\n                dataSource.options.ogcFilters.select)) {\n            isOgcFilterable = true;\n        }\n        return isOgcFilterable;\n    }\n}\nFilterableDataSourcePipe.ɵfac = function FilterableDataSourcePipe_Factory(t) { return new (t || FilterableDataSourcePipe)(); };\nFilterableDataSourcePipe.ɵpipe = ɵɵdefinePipe({ name: \"filterableDataSource\", type: FilterableDataSourcePipe, pure: true });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FilterableDataSourcePipe, [{\n        type: Pipe,\n        args: [{\n                name: 'filterableDataSource'\n            }]\n    }], null, null); })();\n\nclass TimeFilterService {\n    constructor() { }\n    filterByDate(datasource, date) {\n        let time;\n        let newdateform;\n        let newdateformStart;\n        let newdateformEnd;\n        if (Array.isArray(date)) {\n            const dates = [];\n            if (date[0]) {\n                newdateformStart = this.reformatDateTime(date[0]);\n                dates.push(date[0]);\n            }\n            if (date[1]) {\n                newdateformEnd = this.reformatDateTime(date[1]);\n                dates.push(date[1]);\n            }\n            if (dates.length === 2 && newdateformStart !== newdateformEnd) {\n                if (datasource instanceof TileArcGISRestDataSource) {\n                    time = newdateformStart + ',' + newdateformEnd;\n                }\n                else {\n                    time = newdateformStart + '/' + newdateformEnd;\n                }\n            }\n            if (newdateformStart === newdateformEnd) {\n                time = newdateformStart;\n            }\n        }\n        else if (date) {\n            newdateform = this.reformatDateTime(date);\n            time = newdateform;\n        }\n        const params = { TIME: time };\n        datasource.ol.updateParams(params);\n        if (datasource instanceof WMSDataSource) {\n            const wmsDataSource = datasource;\n            wmsDataSource.setTimeFilter(wmsDataSource.timeFilter, true);\n        }\n    }\n    filterByYear(datasource, year) {\n        let time;\n        let newdateformStart;\n        let newdateformEnd;\n        if (Array.isArray(year)) {\n            const years = [];\n            if (year[0]) {\n                newdateformStart = year[0];\n                years.push(year[0]);\n            }\n            if (year[1]) {\n                newdateformEnd = year[1];\n                years.push(year[1]);\n            }\n            if (years.length === 2 && newdateformStart !== newdateformEnd) {\n                if (datasource instanceof TileArcGISRestDataSource) {\n                    time = newdateformStart + ',' + newdateformEnd;\n                }\n                else {\n                    time = newdateformStart + '/' + newdateformEnd;\n                }\n            }\n            if (newdateformStart === newdateformEnd) {\n                time = newdateformStart;\n            }\n        }\n        else { // to reset filter.\n            time = year;\n        }\n        const params = { TIME: time };\n        datasource.ol.updateParams(params);\n        if (datasource instanceof WMSDataSource) {\n            const wmsDataSource = datasource;\n            wmsDataSource.setTimeFilter(wmsDataSource.timeFilter, true);\n        }\n    }\n    reformatDateTime(value) {\n        const year = value.getFullYear();\n        let month = value.getMonth() + 1;\n        let day = value.getUTCDate();\n        let hour = value.getUTCHours();\n        let minute = value.getUTCMinutes();\n        if (Number(month) < 10) {\n            month = '0' + month;\n        }\n        if (Number(day) < 10) {\n            day = '0' + day;\n        }\n        if (Number(hour) < 10) {\n            hour = '0' + hour;\n        }\n        if (Number(minute) < 10) {\n            minute = '0' + minute;\n        }\n        return year + '-' + month + '-' + day + 'T' + hour + ':' + minute + ':00Z';\n    }\n}\nTimeFilterService.ɵfac = function TimeFilterService_Factory(t) { return new (t || TimeFilterService)(); };\nTimeFilterService.ɵprov = ɵɵdefineInjectable({ token: TimeFilterService, factory: TimeFilterService.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(TimeFilterService, [{\n        type: Injectable\n    }], function () { return []; }, null); })();\n\nclass OGCFilterService {\n    constructor() { }\n    filterByOgc(wmsDatasource, filterString) {\n        const appliedFilter = new OgcFilterWriter().formatProcessedOgcFilter(filterString, wmsDatasource.options.params.LAYERS);\n        wmsDatasource.ol.updateParams({ FILTER: appliedFilter });\n    }\n    setOgcWFSFiltersOptions(wfsDatasource) {\n        const options = wfsDatasource.options;\n        const ogcFilterWriter = new OgcFilterWriter();\n        if (options.ogcFilters.enabled && options.ogcFilters.filters) {\n            options.ogcFilters.filters = ogcFilterWriter.checkIgoFiltersProperties(options.ogcFilters.filters, options.paramsWFS.fieldNameGeometry, new olProjection({ code: options.paramsWFS.srsName }), true);\n            if (!options.ogcFilters.interfaceOgcFilters) {\n                options.ogcFilters.interfaceOgcFilters = ogcFilterWriter.defineInterfaceFilterSequence(options.ogcFilters.filters, options.paramsWFS.fieldNameGeometry);\n            }\n        }\n    }\n    setOgcWMSFiltersOptions(wmsDatasource) {\n        const options = wmsDatasource.options;\n        const ogcFilterWriter = new OgcFilterWriter();\n        if (options.ogcFilters.enabled && options.ogcFilters.filters) {\n            options.ogcFilters.filters = ogcFilterWriter.checkIgoFiltersProperties(options.ogcFilters.filters, options.fieldNameGeometry, undefined, true);\n            if (!options.ogcFilters.interfaceOgcFilters) {\n                options.ogcFilters.interfaceOgcFilters = ogcFilterWriter.defineInterfaceFilterSequence(\n                // With some wms server, this param must be set to make spatials call.\n                options.ogcFilters.filters, options.fieldNameGeometry);\n            }\n            this.filterByOgc(wmsDatasource, ogcFilterWriter.buildFilter(options.ogcFilters.filters, undefined, undefined, undefined, wmsDatasource.options));\n            options.filtered = true;\n        }\n        else {\n            options.ogcFilters.filters = undefined;\n            options.ogcFilters.interfaceOgcFilters = [];\n            options.filtered = false;\n        }\n    }\n}\nOGCFilterService.ɵfac = function OGCFilterService_Factory(t) { return new (t || OGCFilterService)(); };\nOGCFilterService.ɵprov = ɵɵdefineInjectable({ token: OGCFilterService, factory: OGCFilterService.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OGCFilterService, [{\n        type: Injectable\n    }], function () { return []; }, null); })();\n\nvar SpatialFilterQueryType;\n(function (SpatialFilterQueryType) {\n    SpatialFilterQueryType[\"AdmRegion\"] = \"AdmRegion\";\n    SpatialFilterQueryType[\"Mun\"] = \"Mun\";\n    SpatialFilterQueryType[\"Arrond\"] = \"Arrond\";\n    SpatialFilterQueryType[\"CircFed\"] = \"CircFed\";\n    SpatialFilterQueryType[\"CircProv\"] = \"CircProv\";\n    SpatialFilterQueryType[\"DirReg\"] = \"DirReg\";\n    SpatialFilterQueryType[\"MRC\"] = \"MRC\";\n    SpatialFilterQueryType[\"RegTour\"] = \"RegTour\";\n})(SpatialFilterQueryType || (SpatialFilterQueryType = {}));\nvar SpatialFilterType;\n(function (SpatialFilterType) {\n    SpatialFilterType[\"Predefined\"] = \"Predefined\";\n    SpatialFilterType[\"Polygon\"] = \"Polygon\";\n    SpatialFilterType[\"Point\"] = \"Point\";\n})(SpatialFilterType || (SpatialFilterType = {}));\nvar SpatialFilterItemType;\n(function (SpatialFilterItemType) {\n    SpatialFilterItemType[\"Address\"] = \"Address\";\n    SpatialFilterItemType[\"Thematics\"] = \"Thematics\";\n})(SpatialFilterItemType || (SpatialFilterItemType = {}));\n\nclass SpatialFilterService {\n    constructor(http, languageService, configService) {\n        this.http = http;\n        this.languageService = languageService;\n        this.configService = configService;\n        this.baseUrl = 'https://geoegl.msp.gouv.qc.ca/apis/terrapi/';\n        /*\n         * Type association with URL\n         */\n        this.urlFilterList = {\n            AdmRegion: 'regadmin',\n            Arrond: 'arrondissements',\n            CircFed: 'circ-fed',\n            CircProv: 'circ-prov',\n            DirReg: 'dir-reg',\n            MRC: 'mrc',\n            Mun: 'municipalites',\n            RegTour: 'tourisme',\n            bornes: 'bornes-sumi',\n            hydro: 'hydro',\n            routes: 'routes'\n        };\n        this.baseUrl =\n            this.configService.getConfig('spatialFilter.url') || this.baseUrl;\n    }\n    getKeyByValue(object, value) {\n        return Object.keys(object).find(key => object[key] === value);\n    }\n    /*\n     * Loading data for spatial filter list component (NO GEOMETRY)\n     */\n    loadFilterList(type) {\n        const urlPath = type;\n        if (urlPath) {\n            return this.http\n                .get(this.baseUrl + this.urlFilterList[urlPath])\n                .pipe(map(featureCollection => featureCollection.features.map(f => {\n                f.meta = {\n                    id: f.properties.code\n                };\n                return f;\n            })));\n        }\n    }\n    /*\n     * Loading item list (STRING)\n     */\n    loadThematicsList() {\n        const url = 'types';\n        const items = [];\n        return this.http.get(this.baseUrl + url).pipe(map((types) => {\n            types.forEach(type => {\n                if (type.startsWith('lieux')) {\n                    const item = {\n                        name: undefined,\n                        source: type\n                    };\n                    let substr = type.substring(6, type.length);\n                    let name = substr;\n                    if (substr.includes('.')) {\n                        const index = substr.indexOf('.');\n                        name = substr.substring(index + 1, substr.length);\n                        substr = substr.substring(0, index);\n                    }\n                    try {\n                        item.name = this.languageService.translate.instant('igo.geo.terrapi.' + name);\n                    }\n                    catch (e) {\n                        item.name = name.substring(0, 1).toUpperCase() + name.substring(1, name.length - 1);\n                    }\n                    try {\n                        item.group = this.languageService.translate.instant('igo.geo.spatialFilter.group.' + substr);\n                    }\n                    catch (e) {\n                        item.group = substr.substring(0, 1).toUpperCase() + substr.substring(1, name.length - 1);\n                    }\n                    items.push(item);\n                }\n                else {\n                    if (this.getKeyByValue(this.urlFilterList, type)) {\n                        const item = {\n                            name: undefined,\n                            source: type\n                        };\n                        const name = this.getKeyByValue(this.urlFilterList, type);\n                        try {\n                            item.name = this.languageService.translate.instant('igo.geo.terrapi.' + name);\n                        }\n                        catch (e) {\n                            item.name = name.substring(0, 1).toUpperCase() + name.substring(1, name.length - 1);\n                        }\n                        item.source = type;\n                        items.push(item);\n                    }\n                }\n            });\n            return items;\n        }));\n    }\n    /*\n     * Loading data for spatial filter item component (Address or Thematics) depends on predefined zone or draw zone (feature)\n     */\n    loadFilterItem(feature, itemType, type, thematic, buffer) {\n        if (type) {\n            // Predefined type\n            const urlType = type;\n            const url = this.baseUrl + this.urlFilterList[urlType];\n            let urlItem = '';\n            if (itemType === SpatialFilterItemType.Address) {\n                urlItem = 'adresses';\n                return this.http\n                    .get(url + '/' + feature.properties.code + '/' + urlItem, {\n                    params: {\n                        geometry: 'true',\n                        icon: 'true',\n                        bufferInput: buffer.toString(),\n                        simplified: '100'\n                    }\n                })\n                    .pipe(map(featureCollection => featureCollection.features.map(f => {\n                    f.meta = {\n                        id: f.properties.code,\n                        title: this.languageService.translate.instant('igo.geo.spatialFilter.Address'),\n                        icon: f.icon\n                    };\n                    return f;\n                })));\n            }\n            else {\n                // If thematics search\n                urlItem = thematic.source;\n                return this.http\n                    .get(url + '/' + feature.properties.code + '/' + urlItem, {\n                    params: {\n                        geometry: 'true',\n                        icon: 'true',\n                        bufferInput: buffer.toString(),\n                        simplified: '100'\n                    }\n                })\n                    .pipe(map(featureCollection => featureCollection.features.map(f => {\n                    f.meta = {\n                        id: f.properties.code,\n                        title: thematic.name,\n                        icon: f.icon\n                    };\n                    return f;\n                })));\n            }\n        }\n        else {\n            // Draw type\n            const url = this.baseUrl + 'locate';\n            if (itemType === SpatialFilterItemType.Address) {\n                const urlItem = '?type=adresses';\n                return this.http\n                    .post(url + urlItem, {\n                    geometry: 'true',\n                    icon: 'true',\n                    loc: JSON.stringify(feature),\n                    bufferInput: buffer.toString(),\n                    simplified: '100'\n                })\n                    .pipe(map(featureCollection => featureCollection.features.map(f => {\n                    f.meta = {\n                        id: f.properties.code,\n                        title: this.languageService.translate.instant('igo.geo.spatialFilter.Address'),\n                        icon: f.icon\n                    };\n                    return f;\n                })));\n            }\n            else {\n                // If thematics search\n                const urlItem = '?type=' + thematic.source;\n                return this.http\n                    .post(url + urlItem, {\n                    geometry: 'true',\n                    icon: 'true',\n                    loc: JSON.stringify(feature),\n                    bufferInput: buffer.toString(),\n                    simplified: '100'\n                })\n                    .pipe(map(featureCollection => featureCollection.features.map(f => {\n                    f.meta = {\n                        id: f.properties.code,\n                        title: thematic.name,\n                        icon: f.icon\n                    };\n                    return f;\n                })));\n            }\n        }\n    }\n    /*\n     * Get one territory by id (WITH GEOMETRY)\n     */\n    loadItemById(feature, type) {\n        const featureType = this.urlFilterList[type];\n        const featureCode = '/' + feature.properties.code;\n        if (featureType && featureCode) {\n            return this.http\n                .get(this.baseUrl + featureType + featureCode, {\n                params: {\n                    geometry: 'true'\n                }\n            })\n                .pipe(map(f => {\n                f.meta = {\n                    id: f.properties.code,\n                    alias: f.properties.nom,\n                    title: f.properties.nom\n                };\n                return f;\n            }));\n        }\n    }\n    /*\n     * Get buffer geometry\n     */\n    loadBufferGeometry(feature, filterType, buffer, type) {\n        if (filterType === SpatialFilterType.Predefined) {\n            const featureType = this.urlFilterList[type];\n            const featureCode = '/' + feature.properties.code;\n            if (featureType && featureCode) {\n                return this.http\n                    .get(this.baseUrl + featureType + featureCode, {\n                    params: {\n                        geometry: '100',\n                        bufferOutput: buffer.toString()\n                    }\n                })\n                    .pipe(map(f => {\n                    f.meta = {\n                        id: f.properties.code,\n                        alias: f.properties.nom,\n                        title: f.properties.nom\n                    };\n                    return f;\n                }));\n            }\n        }\n        else {\n            return this.http\n                .post(this.baseUrl + 'geospatial/buffer?', {\n                buffer,\n                loc: JSON.stringify(feature)\n            })\n                .pipe(map(f => {\n                return f;\n            }));\n        }\n    }\n}\nSpatialFilterService.ɵfac = function SpatialFilterService_Factory(t) { return new (t || SpatialFilterService)(ɵɵinject(HttpClient), ɵɵinject(LanguageService), ɵɵinject(ConfigService)); };\nSpatialFilterService.ɵprov = ɵɵdefineInjectable({ token: SpatialFilterService, factory: SpatialFilterService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SpatialFilterService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: HttpClient }, { type: LanguageService }, { type: ConfigService }]; }, null); })();\n\nclass DownloadService {\n    constructor(messageService, languageService) {\n        this.messageService = messageService;\n        this.languageService = languageService;\n    }\n    open(layer) {\n        const translate = this.languageService.translate;\n        const title = translate.instant('igo.geo.download.title');\n        this.messageService.success(translate.instant('igo.geo.download.start'), title);\n        const DSOptions = layer.dataSource.options;\n        if (Object.keys(DSOptions.download).length > 0) {\n            if (DSOptions.download.dynamicUrl &&\n                DSOptions.download.url === undefined) {\n                let wfsOptions;\n                let currentProj = new olProjection({ code: layer.map.projection });\n                const paramsWFS = layer.dataSource.options.paramsWFS;\n                if (paramsWFS && Object.keys(paramsWFS).length > 0) {\n                    currentProj = paramsWFS.srsName ? new olProjection({ code: paramsWFS.srsName }) : currentProj;\n                    wfsOptions = layer.dataSource.options.paramsWFS;\n                }\n                else {\n                    wfsOptions = layer.dataSource.options.params;\n                }\n                const currentExtent = transformExtent(layer.map.viewController.getExtent(), new olProjection({ code: layer.map.projection }), currentProj);\n                const outputFormatDownload = wfsOptions.outputFormatDownload === undefined\n                    ? wfsOptions.outputFormat === undefined ? '' : 'outputformat=' + wfsOptions.outputFormat\n                    : 'outputformat=' + wfsOptions.outputFormatDownload;\n                const baseurl = DSOptions.download.dynamicUrl\n                    .replace(/&?outputformat=[^&]*/gi, '')\n                    .replace(/&?filter=[^&]*/gi, '')\n                    .replace(/&?bbox=[^&]*/gi, '');\n                const ogcFilters = layer.dataSource.options.ogcFilters;\n                let filterQueryString;\n                filterQueryString = new OgcFilterWriter()\n                    .handleOgcFiltersAppliedValue(layer.dataSource.options, ogcFilters.geometryName, currentExtent, currentProj);\n                if (!filterQueryString) {\n                    // Prevent getting all the features for empty filter\n                    filterQueryString = new OgcFilterWriter().buildFilter(undefined, currentExtent, currentProj, ogcFilters.geometryName);\n                }\n                else {\n                    filterQueryString = 'filter=' + encodeURIComponent(filterQueryString);\n                }\n                window.open(`${baseurl}&${filterQueryString}&${outputFormatDownload}`, '_blank');\n            }\n            else if (DSOptions.download) {\n                window.open(DSOptions.download.url, '_blank');\n            }\n        }\n    }\n}\nDownloadService.ɵfac = function DownloadService_Factory(t) { return new (t || DownloadService)(ɵɵinject(MessageService), ɵɵinject(LanguageService)); };\nDownloadService.ɵprov = ɵɵdefineInjectable({ token: DownloadService, factory: DownloadService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DownloadService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: MessageService }, { type: LanguageService }]; }, null); })();\n\nfunction DownloadButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 1);\n    ɵɵlistener(\"click\", function DownloadButtonComponent_button_0_Template_button_click_0_listener() { ɵɵrestoreView(_r2); const ctx_r1 = ɵɵnextContext(); return ctx_r1.openDownload(ctx_r1.layer); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 2);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.geo.download.action\"))(\"color\", ctx_r0.color);\n} }\nclass DownloadButtonComponent {\n    constructor(downloadService) {\n        this.downloadService = downloadService;\n        this._color = 'primary';\n    }\n    get layer() {\n        return this._layer;\n    }\n    set layer(value) {\n        this._layer = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    openDownload(layer) {\n        this.downloadService.open(layer);\n    }\n    get options() {\n        if (!this.layer) {\n            return;\n        }\n        return this.layer.dataSource.options;\n    }\n}\nDownloadButtonComponent.ɵfac = function DownloadButtonComponent_Factory(t) { return new (t || DownloadButtonComponent)(ɵɵdirectiveInject(DownloadService)); };\nDownloadButtonComponent.ɵcmp = ɵɵdefineComponent({ type: DownloadButtonComponent, selectors: [[\"igo-download-button\"]], inputs: { layer: \"layer\", color: \"color\" }, decls: 1, vars: 1, consts: [[\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"download\"]], template: function DownloadButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, DownloadButtonComponent_button_0_Template, 3, 4, \"button\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.options && ctx.options.download && (ctx.options.download[\"dynamicUrl\"] || ctx.options.download[\"url\"]));\n    } }, directives: [NgIf, MatButton, MatTooltip, MatIcon], pipes: [TranslatePipe], styles: [\"\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DownloadButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-download-button',\n                templateUrl: './download-button.component.html',\n                styleUrls: ['./download-button.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: DownloadService }]; }, { layer: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\nclass IgoDownloadModule {\n    static forRoot() {\n        return {\n            ngModule: IgoDownloadModule\n        };\n    }\n}\nIgoDownloadModule.ɵmod = ɵɵdefineNgModule({ type: IgoDownloadModule });\nIgoDownloadModule.ɵinj = ɵɵdefineInjector({ factory: function IgoDownloadModule_Factory(t) { return new (t || IgoDownloadModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTooltipModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoDownloadModule, { declarations: [DownloadButtonComponent], imports: [CommonModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTooltipModule,\n        IgoLanguageModule], exports: [DownloadButtonComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoDownloadModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTooltipModule,\n                    IgoLanguageModule\n                ],\n                exports: [DownloadButtonComponent],\n                declarations: [DownloadButtonComponent]\n            }]\n    }], null, null); })();\n\nfunction FeatureDetailsComponent_table_0_tr_2_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"td\");\n    ɵɵelement(1, \"mat-icon\", 7);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵɵnextContext(3);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"svgIcon\", ctx_r4.icon);\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"td\");\n    ɵɵelementStart(1, \"a\", 8);\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const property_r3 = ɵɵnextContext().$implicit;\n    const ctx_r5 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"href\", property_r3.value, ɵɵsanitizeUrl);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate2(\" \", ɵɵpipeBind1(3, 3, \"igo.geo.targetHtmlUrl\"), \" \", ctx_r5.title, \"\");\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"td\", 9);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const property_r3 = ɵɵnextContext().$implicit;\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", property_r3.key, \" \");\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"td\", 10);\n} if (rf & 2) {\n    const property_r3 = ɵɵnextContext().$implicit;\n    ɵɵproperty(\"innerHTML\", property_r3.value, ɵɵsanitizeHtml);\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_5_img_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"img\", 13);\n    ɵɵpipe(1, \"async\");\n    ɵɵpipe(2, \"secureImage\");\n} if (rf & 2) {\n    const property_r3 = ɵɵnextContext(2).$implicit;\n    ɵɵpropertyInterpolate(\"src\", ɵɵpipeBind1(1, 1, ɵɵpipeBind1(2, 3, property_r3.value)), ɵɵsanitizeUrl);\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_5_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"span\");\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ɵɵpipeBind1(2, 1, \"igo.geo.targetHtmlUrl\"), \" \");\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"td\");\n    ɵɵelementStart(1, \"a\", 8);\n    ɵɵtemplate(2, FeatureDetailsComponent_table_0_tr_2_td_5_img_2_Template, 3, 5, \"img\", 11);\n    ɵɵtemplate(3, FeatureDetailsComponent_table_0_tr_2_td_5_ng_template_3_Template, 3, 3, \"ng-template\", null, 12, ɵɵtemplateRefExtractor);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r14 = ɵɵreference(4);\n    const property_r3 = ɵɵnextContext().$implicit;\n    const ctx_r8 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"href\", property_r3.value, ɵɵsanitizeUrl);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r8.isImg(property_r3.value))(\"ngIfElse\", _r14);\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_6_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"td\", 10);\n    ɵɵpipe(1, \"json\");\n} if (rf & 2) {\n    const property_r3 = ɵɵnextContext().$implicit;\n    ɵɵproperty(\"innerHTML\", ɵɵpipeBind1(1, 1, property_r3.value), ɵɵsanitizeHtml);\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"tr\");\n    ɵɵtemplate(1, FeatureDetailsComponent_table_0_tr_2_td_1_Template, 2, 1, \"td\", 4);\n    ɵɵtemplate(2, FeatureDetailsComponent_table_0_tr_2_td_2_Template, 4, 5, \"td\", 4);\n    ɵɵtemplate(3, FeatureDetailsComponent_table_0_tr_2_td_3_Template, 2, 1, \"td\", 5);\n    ɵɵtemplate(4, FeatureDetailsComponent_table_0_tr_2_td_4_Template, 1, 1, \"td\", 6);\n    ɵɵtemplate(5, FeatureDetailsComponent_table_0_tr_2_td_5_Template, 5, 3, \"td\", 4);\n    ɵɵtemplate(6, FeatureDetailsComponent_table_0_tr_2_td_6_Template, 2, 3, \"td\", 6);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const property_r3 = ctx.$implicit;\n    const ctx_r2 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r2.feature.properties.target === \"_blank\" && property_r3.key === \"url\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r2.feature.properties.target === \"_blank\" && property_r3.key === \"url\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r2.feature.properties.target === undefined);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r2.feature.properties.target === undefined && !ctx_r2.isObject(property_r3.value) && !ctx_r2.isUrl(property_r3.value));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r2.feature.properties.target === undefined && !ctx_r2.isObject(property_r3.value) && ctx_r2.isUrl(property_r3.value));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r2.feature.properties.target === undefined && ctx_r2.isObject(property_r3.value));\n} }\nfunction FeatureDetailsComponent_table_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"table\", 2);\n    ɵɵelementStart(1, \"tbody\");\n    ɵɵtemplate(2, FeatureDetailsComponent_table_0_tr_2_Template, 7, 6, \"tr\", 3);\n    ɵɵpipe(3, \"keyvalue\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(3, 1, ctx_r0.filterFeatureProperties(ctx_r0.feature)));\n} }\nfunction FeatureDetailsComponent_iframe_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"iframe\", 14);\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"srcdoc\", ctx_r1.htmlSanitizer(ctx_r1.feature.properties), ɵɵsanitizeHtml)(\"src\", ctx_r1.urlSanitizer(ctx_r1.feature.properties.url), ɵɵsanitizeResourceUrl);\n} }\nclass FeatureDetailsComponent {\n    constructor(cdRef, sanitizer, networkService) {\n        this.cdRef = cdRef;\n        this.sanitizer = sanitizer;\n        this.networkService = networkService;\n        this.unsubscribe$ = new Subject();\n        this.ready = false;\n        this.routeEvent = new EventEmitter();\n        this.selectFeature = new EventEmitter();\n        this.htmlDisplayEvent = new EventEmitter();\n        this.networkService.currentState().pipe(takeUntil(this.unsubscribe$)).subscribe((state) => {\n            this.state = state;\n        });\n    }\n    get source() {\n        return this._source;\n    }\n    set source(value) {\n        this._source = value;\n        this.cdRef.detectChanges();\n    }\n    get feature() {\n        return this._feature;\n    }\n    set feature(value) {\n        this._feature = value;\n        this.cdRef.detectChanges();\n        this.selectFeature.emit();\n    }\n    /**\n     * @internal\n     */\n    get title() {\n        return getEntityTitle(this.feature);\n    }\n    /**\n     * @internal\n     */\n    get icon() {\n        return getEntityIcon(this.feature) || 'link';\n    }\n    ngOnInit() {\n        this.ready = true;\n    }\n    ngOnDestroy() {\n        this.unsubscribe$.next();\n        this.unsubscribe$.complete();\n    }\n    urlSanitizer(value) {\n        return this.sanitizer.bypassSecurityTrustResourceUrl(value);\n    }\n    isHtmlDisplay() {\n        if (this.feature && this.isObject(this.feature.properties) && this.feature.properties.target === 'iframe') {\n            this.htmlDisplayEvent.emit(true);\n            return true;\n        }\n        else {\n            this.htmlDisplayEvent.emit(false);\n            return false;\n        }\n    }\n    htmlSanitizer(value) {\n        if (!value.body || userAgent.getBrowserName() === 'Internet Explorer') {\n            return;\n        }\n        const regexBase = /<base href=\"[\\w:\\/\\.]+\">/;\n        if (!regexBase.test(value.body)) {\n            const url = new URL(value.url, window.location.origin);\n            value.body = value.body.replace('<head>', `<head><base href=\"${url.origin}\">`);\n        }\n        return this.sanitizer.bypassSecurityTrustHtml(value.body);\n    }\n    isObject(value) {\n        return typeof value === 'object';\n    }\n    isUrl(value) {\n        if (typeof value === 'string') {\n            return (value.slice(0, 8) === 'https://' || value.slice(0, 7) === 'http://');\n        }\n        else {\n            return false;\n        }\n    }\n    isImg(value) {\n        if (this.isUrl(value)) {\n            return (['jpg', 'png', 'gif'].includes(value.split('.').pop().toLowerCase()));\n        }\n        else {\n            return false;\n        }\n    }\n    filterFeatureProperties(feature) {\n        const allowedFieldsAndAlias = feature.meta ? feature.meta.alias : undefined;\n        const properties = {};\n        let offlineButtonState;\n        if (this.map) {\n            this.map.offlineButtonToggle$.pipe(takeUntil(this.unsubscribe$)).subscribe(state => {\n                offlineButtonState = state;\n            });\n        }\n        if (feature.properties && feature.properties.Route && this.toolbox && !this.toolbox.getTool('directions')) {\n            delete feature.properties.Route;\n        }\n        if (allowedFieldsAndAlias) {\n            Object.keys(allowedFieldsAndAlias).forEach(field => {\n                properties[allowedFieldsAndAlias[field]] = feature.properties[field];\n            });\n            return properties;\n        }\n        else if (offlineButtonState !== undefined) {\n            if (!offlineButtonState) {\n                if (this.state.connection && feature.meta && feature.meta.excludeAttribute) {\n                    const excludeAttribute = feature.meta.excludeAttribute;\n                    excludeAttribute.forEach(attribute => {\n                        delete feature.properties[attribute];\n                    });\n                }\n                else if (!this.state.connection && feature.meta && feature.meta.excludeAttributeOffline) {\n                    const excludeAttributeOffline = feature.meta.excludeAttributeOffline;\n                    excludeAttributeOffline.forEach(attribute => {\n                        delete feature.properties[attribute];\n                    });\n                }\n            }\n            else {\n                if (feature.meta && feature.meta.excludeAttributeOffline) {\n                    const excludeAttributeOffline = feature.meta.excludeAttributeOffline;\n                    excludeAttributeOffline.forEach(attribute => {\n                        delete feature.properties[attribute];\n                    });\n                }\n            }\n        }\n        else {\n            if (this.state.connection && feature.meta && feature.meta.excludeAttribute) {\n                const excludeAttribute = feature.meta.excludeAttribute;\n                excludeAttribute.forEach(attribute => {\n                    delete feature.properties[attribute];\n                });\n            }\n            else if (!this.state.connection && feature.meta && feature.meta.excludeAttributeOffline) {\n                const excludeAttributeOffline = feature.meta.excludeAttributeOffline;\n                excludeAttributeOffline.forEach(attribute => {\n                    delete feature.properties[attribute];\n                });\n            }\n        }\n        return feature.properties;\n    }\n}\nFeatureDetailsComponent.ɵfac = function FeatureDetailsComponent_Factory(t) { return new (t || FeatureDetailsComponent)(ɵɵdirectiveInject(ChangeDetectorRef), ɵɵdirectiveInject(DomSanitizer), ɵɵdirectiveInject(NetworkService)); };\nFeatureDetailsComponent.ɵcmp = ɵɵdefineComponent({ type: FeatureDetailsComponent, selectors: [[\"igo-feature-details\"]], inputs: { source: \"source\", map: \"map\", toolbox: \"toolbox\", feature: \"feature\" }, outputs: { routeEvent: \"routeEvent\", selectFeature: \"selectFeature\", htmlDisplayEvent: \"htmlDisplayEvent\" }, decls: 2, vars: 2, consts: [[\"class\", \"igo-striped mat-typography\", 4, \"ngIf\"], [3, \"srcdoc\", \"src\", 4, \"ngIf\"], [1, \"igo-striped\", \"mat-typography\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"id\", \"keyValue\", 4, \"ngIf\"], [3, \"innerHTML\", 4, \"ngIf\"], [\"mat-list-avatar\", \"\", 3, \"svgIcon\"], [\"target\", \"_blank\", \"rel\", \"noopener noreferrer\", 3, \"href\"], [\"id\", \"keyValue\"], [3, \"innerHTML\"], [\"width\", \"225\", \"heigth\", \"auto\", 3, \"src\", 4, \"ngIf\", \"ngIfElse\"], [\"notImg\", \"\"], [\"width\", \"225\", \"heigth\", \"auto\", 3, \"src\"], [3, \"srcdoc\", \"src\"]], template: function FeatureDetailsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, FeatureDetailsComponent_table_0_Template, 4, 3, \"table\", 0);\n        ɵɵtemplate(1, FeatureDetailsComponent_iframe_1_Template, 1, 2, \"iframe\", 1);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.ready && ctx.feature && ctx.isObject(ctx.feature.properties) && ctx.feature.properties.target !== \"iframe\");\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.isHtmlDisplay());\n    } }, directives: [NgIf, NgForOf, MatIcon], pipes: [KeyValuePipe$1, TranslatePipe, AsyncPipe, SecureImagePipe, JsonPipe], styles: [\"table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}#keyValue[_ngcontent-%COMP%]{width:30%}table[_ngcontent-%COMP%]     .routing{cursor:pointer}iframe[_ngcontent-%COMP%]{border:0;height:calc(100% - 4px);width:100%}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FeatureDetailsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-feature-details',\n                templateUrl: './feature-details.component.html',\n                styleUrls: ['./feature-details.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ChangeDetectorRef }, { type: DomSanitizer }, { type: NetworkService }]; }, { source: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], toolbox: [{\n            type: Input\n        }], feature: [{\n            type: Input\n        }], routeEvent: [{\n            type: Output\n        }], selectFeature: [{\n            type: Output\n        }], htmlDisplayEvent: [{\n            type: Output\n        }] }); })();\n\nconst _c0$8 = [\"igoForm\"];\nconst _c1$3 = [\"*\", [[\"\", \"formButtons\", \"\"]]];\nconst _c2$1 = [\"*\", \"[formButtons]\"];\n/**\n * A configurable form, optionnally bound to a feature.\n * This component creates an entity form and, on submit,\n * returns a feature made out of the submitted data. It also\n * does things like managing the feature visibility while it's being updated\n * as well as disabling the selection of another feature.\n */\nclass FeatureFormComponent {\n    constructor() {\n        this.feature$ = new BehaviorSubject(undefined);\n        /**\n         * Event emitted when the form is submitted\n         */\n        this.submitForm = new EventEmitter();\n    }\n    /**\n     * Feature to update\n     */\n    set feature(value) { this.feature$.next(value); }\n    get feature() { return this.feature$.value; }\n    /**\n     * Transform the form data to a feature and emit an event\n     * @param event Form submit event\n     * @internal\n     */\n    onSubmit(data) {\n        const feature = this.formDataToFeature(data);\n        this.submitForm.emit(feature);\n    }\n    getData() {\n        return this.formDataToFeature(this.igoForm.getData());\n    }\n    /**\n     * Transform the form data to a feature\n     * @param data Form data\n     * @returns A feature\n     */\n    formDataToFeature(data) {\n        const properties = {};\n        const meta = {};\n        if (this.feature === undefined) {\n            meta.id = uuid();\n        }\n        else {\n            Object.assign(properties, this.feature.properties);\n            Object.assign(meta, this.feature.meta, {\n                revision: getEntityRevision(this.feature) + 1\n            });\n        }\n        const propertyPrefix = 'properties.';\n        Object.entries(data).forEach((entry) => {\n            const [key, value] = entry;\n            if (key.startsWith(propertyPrefix)) {\n                const property = key.substr(propertyPrefix.length);\n                properties[property] = value;\n            }\n        });\n        let geometry = data.geometry;\n        if (geometry === undefined && this.feature !== undefined) {\n            geometry = this.feature.geometry;\n        }\n        return {\n            meta: meta,\n            type: FEATURE,\n            geometry,\n            projection: 'EPSG:4326',\n            properties\n        };\n    }\n}\nFeatureFormComponent.ɵfac = function FeatureFormComponent_Factory(t) { return new (t || FeatureFormComponent)(); };\nFeatureFormComponent.ɵcmp = ɵɵdefineComponent({ type: FeatureFormComponent, selectors: [[\"igo-feature-form\"]], viewQuery: function FeatureFormComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵstaticViewQuery(_c0$8, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.igoForm = _t.first);\n    } }, inputs: { form: \"form\", feature: \"feature\" }, outputs: { submitForm: \"submitForm\" }, ngContentSelectors: _c2$1, decls: 5, vars: 4, consts: [[3, \"form\", \"formData\", \"submitForm\"], [\"igoForm\", \"\"]], template: function FeatureFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵprojectionDef(_c1$3);\n        ɵɵelementStart(0, \"igo-form\", 0, 1);\n        ɵɵlistener(\"submitForm\", function FeatureFormComponent_Template_igo_form_submitForm_0_listener($event) { return ctx.onSubmit($event); });\n        ɵɵpipe(2, \"async\");\n        ɵɵprojection(3);\n        ɵɵprojection(4, 1, [\"formButtons\", \"\"]);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"form\", ctx.form)(\"formData\", ɵɵpipeBind1(2, 2, ctx.feature$));\n    } }, directives: [FormComponent], pipes: [AsyncPipe], styles: [\"[_nghost-%COMP%]{display:block}igo-form[_ngcontent-%COMP%]{height:100%}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FeatureFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-feature-form',\n                templateUrl: './feature-form.component.html',\n                styleUrls: ['./feature-form.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { form: [{\n            type: Input\n        }], feature: [{\n            type: Input\n        }], submitForm: [{\n            type: Output\n        }], igoForm: [{\n            type: ViewChild,\n            args: ['igoForm', { static: true }]\n        }] }); })();\n\nvar DrawType;\n(function (DrawType) {\n    DrawType[\"Point\"] = \"Point\";\n    DrawType[\"LineString\"] = \"LineString\";\n    DrawType[\"Polygon\"] = \"Polygon\";\n    DrawType[\"Circle\"] = \"Circle\";\n})(DrawType || (DrawType = {}));\n\n/* tslint:disable */\n// See this issue: https://github.com/Microsoft/TypeScript/issues/13965\n// And the solution: https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n// for an explanation as to why the prototype is set manually\n/* tslint:enable */\nclass GeometrySliceError extends Error {\n}\nclass GeometrySliceMultiPolygonError extends GeometrySliceError {\n    constructor() {\n        super('Can\\'t slice a MultiPolygon.');\n        Object.setPrototypeOf(this, GeometrySliceMultiPolygonError.prototype);\n    }\n}\nclass GeometrySliceLineStringError extends GeometrySliceError {\n    constructor() {\n        super('Can\\'t slice with a line that has more than 2 points.');\n        Object.setPrototypeOf(this, GeometrySliceLineStringError.prototype);\n    }\n}\nclass GeometrySliceTooManyIntersectionError extends GeometrySliceError {\n    constructor() {\n        super('More than 2 intersections found between the target polygon and the slicing line.');\n        Object.setPrototypeOf(this, GeometrySliceTooManyIntersectionError.prototype);\n    }\n}\n\n/**\n * Create a default style for draw and modify interactions\n * @param color Style color (R, G, B)\n * @returns OL style\n */\nfunction createDrawInteractionStyle(color) {\n    color = color || [0, 153, 255];\n    return new Style({\n        stroke: new Stroke({\n            color: color.concat([1]),\n            width: 2\n        }),\n        fill: new Fill({\n            color: color.concat([0.2])\n        }),\n        image: new Circle({\n            radius: 8,\n            stroke: new Stroke({\n                color: color.concat([1])\n            }),\n            fill: new Fill({\n                color: color.concat([0.2])\n            })\n        })\n    });\n}\n/**\n * Create a default style for drawing a hole\n * @returns OL style\n */\nfunction createDrawHoleInteractionStyle() {\n    return new Style({\n        stroke: new Stroke({\n            color: [0, 153, 255, 1],\n            width: 2\n        })\n    });\n}\n/**\n * Slice geometry into two parts\n * @param olGeometry OL geometry\n * @param olSlicer Slicing line\n * @returns New OL geometries\n */\nfunction sliceOlGeometry(olGeometry, olSlicer) {\n    if (olGeometry instanceof OlPolygon) {\n        return sliceOlPolygon(olGeometry, olSlicer);\n    }\n    else if (olGeometry instanceof OlLineString) {\n        return sliceOlLineString(olGeometry, olSlicer);\n    }\n    return [];\n}\n/**\n * Slice OL LineString into one or more lines\n * @param olLineString OL line string\n * @param olSlicer Slicing line\n * @returns New OL line strings\n */\nfunction sliceOlLineString(olLineString, olSlicer) {\n    return [];\n}\n/**\n * Slice OL Polygon into one or more polygons\n * @param olPolygon OL polygon\n * @param olSlicer Slicing line\n * @returns New OL polygons\n */\nfunction sliceOlPolygon(olPolygon, olSlicer) {\n    if (olPolygon.getLinearRingCount() > 1) {\n        throw new GeometrySliceMultiPolygonError();\n    }\n    if (olSlicer.getCoordinates().length > 2) {\n        throw new GeometrySliceLineStringError();\n    }\n    const olGeoJSON = new OlGeoJSON();\n    const slicer = olGeoJSON.writeGeometryObject(olSlicer);\n    const outerCoordinates = olPolygon.getLinearRing(0).getCoordinates();\n    const parts = [[], []];\n    let totalIntersectionCount = 0;\n    for (let i = 0, ii = outerCoordinates.length - 1; i < ii; i++) {\n        const segmentCoordinates = [outerCoordinates[i], outerCoordinates[i + 1]];\n        const segment = lineString(segmentCoordinates);\n        const intersections = lineIntersect(segment, slicer).features;\n        const intersectionCount = intersections.length;\n        totalIntersectionCount += intersectionCount;\n        if (intersectionCount > 1 || totalIntersectionCount > 2) {\n            throw new GeometrySliceTooManyIntersectionError();\n        }\n        parts[0].push(segmentCoordinates[0]);\n        if (intersectionCount === 1) {\n            const intersection = intersections[0].geometry.coordinates;\n            parts[0].push(intersection);\n            parts[1].push(intersection);\n            parts.reverse();\n        }\n    }\n    if (totalIntersectionCount <= 1) {\n        return [];\n    }\n    parts[0].push(parts[0][0]);\n    parts[1].push(parts[1][0]);\n    return [new OlPolygon([parts[0]]), new OlPolygon([parts[1]])];\n}\n/**\n * Splice geometry into two parts\n * @param olGeometry OL geometry\n * @param olSlicer Slicing line\n * @returns New OL geometries\n */\nfunction addLinearRingToOlPolygon(olPolygon, olLinearRing) {\n    // TODO: make some validation and support updating an existing linear ring\n    olPolygon.appendLinearRing(olLinearRing);\n}\nfunction getMousePositionFromOlGeometryEvent(olEvent) {\n    const olGeometry = olEvent.target;\n    if (olGeometry instanceof OlPolygon) {\n        return olGeometry.flatCoordinates.slice(-4, -2);\n    }\n    return olGeometry.flatCoordinates.slice(-2);\n}\n\n/**\n * Control to draw geometries\n */\nclass DrawControl {\n    constructor(options) {\n        this.options = options;\n        /**\n         * Draw start observable\n         */\n        this.start$ = new Subject();\n        /**\n         * Draw end observable\n         */\n        this.end$ = new Subject();\n        /**\n         * Geometry changes observable\n         */\n        this.changes$ = new Subject();\n        this.freehand$ = new BehaviorSubject(false);\n        if (options.layer !== undefined) {\n            this.olOverlayLayer = options.layer;\n        }\n        else {\n            this.olOverlayLayer = this.createOlInnerOverlayLayer();\n        }\n    }\n    /**\n     * Wheter the control is active\n     */\n    get active() {\n        return this.olMap !== undefined;\n    }\n    /**\n     * Geometry type\n     * @internal\n     */\n    get geometryType() {\n        return this.options.geometryType;\n    }\n    /**\n     * OL overlay source\n     * @internal\n     */\n    get olOverlaySource() {\n        return this.olOverlayLayer.getSource();\n    }\n    /**\n     * Add or remove this control to/from a map.\n     * @param map OL Map\n     */\n    setOlMap(olMap) {\n        if (olMap === undefined) {\n            this.clearOlInnerOverlaySource();\n            this.removeOlInnerOverlayLayer();\n            this.removeOlDrawInteraction();\n            this.olMap = olMap;\n            return;\n        }\n        this.olMap = olMap;\n        this.addOlInnerOverlayLayer();\n        this.addOlDrawInteraction();\n    }\n    /**\n     * Return the overlay source\n     */\n    getSource() {\n        return this.olOverlaySource;\n    }\n    /**\n     * Create an overlay source if none is defined in the options\n     */\n    createOlInnerOverlayLayer() {\n        return new OlVectorLayer({\n            source: this.options.source ? this.options.source : new OlVectorSource(),\n            style: this.options.layerStyle,\n            zIndex: 500\n        });\n    }\n    /**\n     * Clear the overlay layer if it wasn't defined in the options\n     */\n    removeOlInnerOverlayLayer() {\n        if (this.options.layer === undefined && this.olMap !== undefined) {\n            this.olMap.removeLayer(this.olOverlayLayer);\n        }\n    }\n    /**\n     * Add the overlay layer if it wasn't defined in the options\n     */\n    addOlInnerOverlayLayer() {\n        if (this.options.layer === undefined) {\n            this.olMap.addLayer(this.olOverlayLayer);\n        }\n    }\n    /**\n     * Clear the overlay source if it wasn't defined in the options\n     */\n    clearOlInnerOverlaySource() {\n        if (this.options.layer === undefined && this.options.source === undefined) {\n            this.olOverlaySource.clear(true);\n        }\n    }\n    /**\n     * Add a draw interaction to the map an set up some listeners\n     */\n    addOlDrawInteraction() {\n        let olDrawInteraction;\n        if (this.freehand$.getValue() === false) {\n            olDrawInteraction = new OlDraw({\n                type: this.geometryType,\n                source: this.getSource(),\n                stopClick: true,\n                style: this.options.drawStyle,\n                maxPoints: this.options.maxPoints,\n                freehand: false,\n                freehandCondition: () => false\n            });\n        }\n        else {\n            if (this.geometryType === 'Point') {\n                olDrawInteraction = new OlDraw({\n                    type: 'Circle',\n                    source: this.getSource(),\n                    maxPoints: this.options.maxPoints,\n                    freehand: true\n                });\n            }\n            else {\n                olDrawInteraction = new OlDraw({\n                    type: this.geometryType,\n                    source: this.getSource(),\n                    maxPoints: this.options.maxPoints,\n                    freehand: true\n                });\n            }\n        }\n        this.onDrawStartKey = olDrawInteraction.on('drawstart', (event) => this.onDrawStart(event));\n        this.onDrawEndKey = olDrawInteraction.on('drawend', (event) => this.onDrawEnd(event));\n        this.olMap.addInteraction(olDrawInteraction);\n        this.olDrawInteraction = olDrawInteraction;\n    }\n    /**\n     * Remove the draw interaction\n     */\n    removeOlDrawInteraction() {\n        if (this.olDrawInteraction === undefined) {\n            return;\n        }\n        this.unsubscribeToKeyDown();\n        unByKey([this.onDrawStartKey, this.onDrawEndKey, this.onDrawKey]);\n        if (this.olMap !== undefined) {\n            this.olMap.removeInteraction(this.olDrawInteraction);\n        }\n        this.olDrawInteraction = undefined;\n    }\n    /**\n     * When drawing starts, clear the overlay and start watching from changes\n     * @param event Draw start event\n     */\n    onDrawStart(event) {\n        const olGeometry = event.feature.getGeometry();\n        this.start$.next(olGeometry);\n        this.clearOlInnerOverlaySource();\n        this.onDrawKey = olGeometry.on('change', (olGeometryEvent) => {\n            this.mousePosition = getMousePositionFromOlGeometryEvent(olGeometryEvent);\n            this.changes$.next(olGeometryEvent.target);\n        });\n        this.subscribeToKeyDown();\n    }\n    /**\n     * When drawing ends, update the geometry observable and start watching from changes\n     * @param event Draw end event\n     */\n    onDrawEnd(event) {\n        this.unsubscribeToKeyDown();\n        unByKey(this.onDrawKey);\n        this.end$.next(event.feature.getGeometry());\n    }\n    /**\n     * Subscribe to CTRL key down to activate the draw control\n     */\n    subscribeToKeyDown() {\n        this.unsubscribeToKeyDown();\n        this.keyDown$$ = fromEvent(document, 'keydown').subscribe((event) => {\n            // On ESC key down, remove the last vertex\n            if (event.key === 'Escape') {\n                this.olDrawInteraction.removeLastPoint();\n                return;\n            }\n            // On space bar, pan to the current mouse position\n            if (event.key === ' ') {\n                this.olMap.getView().animate({\n                    center: this.mousePosition,\n                    duration: 0\n                });\n                return;\n            }\n        });\n    }\n    /**\n     * Unsubscribe to key down\n     */\n    unsubscribeToKeyDown() {\n        if (this.keyDown$$ !== undefined) {\n            this.keyDown$$.unsubscribe();\n            this.keyDown$$ = undefined;\n        }\n    }\n}\n\nclass DrawStyleService {\n    constructor(mapService) {\n        this.mapService = mapService;\n        this.fillColor = 'rgba(255,255,255,0.4)';\n        this.strokeColor = 'rgba(51,153,204,1)';\n        this.drawCounter = 1;\n        this.toggleLabel = true;\n    }\n    getFill() {\n        return this.fillColor;\n    }\n    setFill(fillColor) {\n        this.fillColor = fillColor;\n    }\n    getStroke() {\n        return this.strokeColor;\n    }\n    setStroke(strokeColor) {\n        this.strokeColor = strokeColor;\n    }\n    getDrawCount() {\n        return this.drawCounter;\n    }\n    getToggleLabel() {\n        return this.toggleLabel;\n    }\n    switchLabel() {\n        this.toggleLabel = !this.toggleLabel;\n    }\n    raiseDrawCounter() {\n        this.drawCounter = this.drawCounter + 1;\n    }\n    setIcon(icon) {\n        this.icon = icon;\n    }\n    getIcon() {\n        return this.icon;\n    }\n    createDrawLayerStyle(feature, resolution, label, icon) {\n        let style;\n        let labelOffset = false;\n        const proj = this.mapService.getMap().ol.getView().getProjection().getCode();\n        const geom = feature.getGeometry();\n        if (geom instanceof OlPoint) {\n            labelOffset = !labelOffset;\n        }\n        if (feature.get('radius') !== undefined) {\n            const coordinates = transform(feature.getGeometry().flatCoordinates, proj, 'EPSG:4326');\n            style = [\n                new Style({\n                    text: new Text({\n                        text: label ? feature.get('draw') : '',\n                        stroke: new Stroke({\n                            color: 'white',\n                            width: 0.75\n                        }),\n                        fill: new Fill({\n                            color: 'black'\n                        }),\n                        font: '20px sans-serif',\n                        overflow: true\n                    }),\n                    image: new Circle({\n                        radius: feature.get('radius') /\n                            Math.cos((Math.PI / 180) * coordinates[1]) /\n                            resolution,\n                        stroke: new Stroke({\n                            color: this.strokeColor\n                        }),\n                        fill: new Fill({\n                            color: this.fillColor\n                        })\n                    })\n                })\n            ];\n            return style;\n        }\n        else if (icon) {\n            style = [\n                new Style({\n                    text: new Text({\n                        text: label ? feature.get('draw') : '',\n                        offsetY: -26,\n                        stroke: new Stroke({\n                            color: 'white',\n                            width: 0.75\n                        }),\n                        fill: new Fill({\n                            color: 'black'\n                        }),\n                        font: '20px sans-serif',\n                        overflow: true\n                    }),\n                    stroke: new Stroke({\n                        color: this.strokeColor,\n                        width: 2\n                    }),\n                    fill: new Fill({\n                        color: this.fillColor\n                    }),\n                    image: new Icon({\n                        src: icon\n                    })\n                })\n            ];\n            return style;\n        }\n        else {\n            style = [\n                new Style({\n                    text: new Text({\n                        text: label ? feature.get('draw') : '',\n                        stroke: new Stroke({\n                            color: 'white',\n                            width: 0.75\n                        }),\n                        fill: new Fill({\n                            color: 'black'\n                        }),\n                        font: '20px sans-serif',\n                        overflow: true,\n                        offsetY: labelOffset ? -15 : 0\n                    }),\n                    stroke: new Stroke({\n                        color: this.strokeColor,\n                        width: 2\n                    }),\n                    fill: new Fill({\n                        color: this.fillColor\n                    }),\n                    image: new Circle({\n                        radius: 5,\n                        stroke: new Stroke({\n                            color: this.strokeColor\n                        }),\n                        fill: new Fill({\n                            color: this.fillColor\n                        })\n                    })\n                })\n            ];\n            return style;\n        }\n    }\n}\nDrawStyleService.ɵfac = function DrawStyleService_Factory(t) { return new (t || DrawStyleService)(ɵɵinject(MapService)); };\nDrawStyleService.ɵprov = ɵɵdefineInjectable({ token: DrawStyleService, factory: DrawStyleService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DrawStyleService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: MapService }]; }, null); })();\n\nclass DrawPopupComponent {\n    constructor(languageService, dialog) {\n        this.languageService = languageService;\n        this.dialog = dialog;\n        this.onOk$ = new BehaviorSubject('');\n        this.title = this.languageService.translate.instant('igo.geo.draw.labels');\n        this.message = this.languageService.translate.instant('igo.geo.draw.dialogInstruction');\n    }\n}\nDrawPopupComponent.ɵfac = function DrawPopupComponent_Factory(t) { return new (t || DrawPopupComponent)(ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(MatDialogRef)); };\nDrawPopupComponent.ɵcmp = ɵɵdefineComponent({ type: DrawPopupComponent, selectors: [[\"igo-draw-popup-component\"]], decls: 12, vars: 9, consts: [[1, \"mat-typography\"], [1, \"example-full-width\"], [\"matInput\", \"\", 3, \"placeholder\", \"keydown.enter\"], [\"input\", \"\"], [\"mat-button\", \"\", 3, \"click\"]], template: function DrawPopupComponent_Template(rf, ctx) { if (rf & 1) {\n        const _r1 = ɵɵgetCurrentView();\n        ɵɵelementStart(0, \"h1\");\n        ɵɵtext(1);\n        ɵɵpipe(2, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(3, \"p\", 0);\n        ɵɵtext(4);\n        ɵɵpipe(5, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(6, \"mat-form-field\", 1);\n        ɵɵelementStart(7, \"input\", 2, 3);\n        ɵɵlistener(\"keydown.enter\", function DrawPopupComponent_Template_input_keydown_enter_7_listener() { ɵɵrestoreView(_r1); const _r0 = ɵɵreference(8); ctx.onOk$.next(_r0.value); return ctx.dialog.close(); });\n        ɵɵpipe(9, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(10, \"button\", 4);\n        ɵɵlistener(\"click\", function DrawPopupComponent_Template_button_click_10_listener() { ɵɵrestoreView(_r1); const _r0 = ɵɵreference(8); ctx.onOk$.next(_r0.value); return ctx.dialog.close(); });\n        ɵɵtext(11, \"OK\");\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵtextInterpolate(ɵɵpipeBind1(2, 3, \"igo.geo.draw.dialogTitle\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind1(5, 5, \"igo.geo.draw.dialogInstruction\"));\n        ɵɵadvance(3);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(9, 7, \"igo.geo.draw.dialogTitle\"));\n    } }, directives: [MatFormField, MatInput, MatButton], pipes: [TranslatePipe], styles: [\"\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DrawPopupComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-draw-popup-component',\n                templateUrl: './draw-popup.component.html',\n                styleUrls: ['./draw-popup.component.scss'],\n            }]\n    }], function () { return [{ type: LanguageService }, { type: MatDialogRef }]; }, null); })();\n\nconst MEASURE_UNIT_AUTO = 'auto';\nvar MeasureType;\n(function (MeasureType) {\n    MeasureType[\"Length\"] = \"length\";\n    MeasureType[\"Area\"] = \"area\";\n})(MeasureType || (MeasureType = {}));\nvar MeasureLengthUnit;\n(function (MeasureLengthUnit) {\n    MeasureLengthUnit[\"Meters\"] = \"meters\";\n    MeasureLengthUnit[\"Kilometers\"] = \"kilometers\";\n    MeasureLengthUnit[\"Miles\"] = \"miles\";\n    MeasureLengthUnit[\"Feet\"] = \"feet\";\n})(MeasureLengthUnit || (MeasureLengthUnit = {}));\nconst MeasureLengthUnitAbbreviation = {\n    [MeasureLengthUnit.Meters]: 'm',\n    [MeasureLengthUnit.Kilometers]: 'km',\n    [MeasureLengthUnit.Miles]: 'mi',\n    [MeasureLengthUnit.Feet]: 'ft'\n};\nvar MeasureAreaUnit;\n(function (MeasureAreaUnit) {\n    MeasureAreaUnit[\"SquareMeters\"] = \"squareMeters\";\n    MeasureAreaUnit[\"SquareKilometers\"] = \"squareKilometers\";\n    MeasureAreaUnit[\"SquareMiles\"] = \"squareMiles\";\n    MeasureAreaUnit[\"SquareFeet\"] = \"squareFeet\";\n    MeasureAreaUnit[\"Hectares\"] = \"hectares\";\n    MeasureAreaUnit[\"Acres\"] = \"acres\";\n})(MeasureAreaUnit || (MeasureAreaUnit = {}));\nconst MeasureAreaUnitAbbreviation = {\n    [MeasureAreaUnit.SquareMeters]: 'm²',\n    [MeasureAreaUnit.SquareKilometers]: 'km²',\n    [MeasureAreaUnit.SquareMiles]: 'mi²',\n    [MeasureAreaUnit.SquareFeet]: 'ft²',\n    [MeasureAreaUnit.Hectares]: 'ha',\n    [MeasureAreaUnit.Acres]: 'ac'\n};\n\n/**\n * Convert value from meters to kilometers\n * @param value Value in meters\n * @returns Value in kilometers\n */\nfunction metersToKilometers(value) {\n    return value * 0.001;\n}\n/**\n * Convert value from meters to feet\n * @param value Value in meters\n * @returns Value in feet\n */\nfunction metersToFeet(value) {\n    return value * 3.2808;\n}\n/**\n * Convert value from meters to miles\n * @param value Value in meters\n * @returns Value in miles\n */\nfunction metersToMiles(value) {\n    return value * 0.000621;\n}\n/**\n * Convert value from square meters to square kilometers\n * @param value Value in square meters\n * @returns Value in square kilometers\n */\nfunction squareMetersToSquareKilometers(value) {\n    return value * 0.000001;\n}\n/**\n * Convert value from square meters to square miles\n * @param value Value in square meters\n * @returns Value in square miles\n */\nfunction squareMetersToSquareMiles(value) {\n    return value * 0.0000003861;\n}\n/**\n * Convert value from square meters to square feet\n * @param value Value in square meters\n * @returns Value in square feet\n */\nfunction squareMetersToSquareFeet(value) {\n    return value * 10.764;\n}\n/**\n * Convert value from square meters to hectares\n * @param value Value in square meters\n * @returns Value in hectares\n */\nfunction squareMetersToHectares(value) {\n    return value * 0.0001;\n}\n/**\n * Convert value from square meters to acres\n * @param value Value in square meters\n * @returns Value in acres\n */\nfunction squareMetersToAcres(value) {\n    return value * 0.00024711;\n}\n/**\n * Convert value from meters to the specified length unit\n * @param value Value in meters\n * @param unit Length unit\n * @returns Value in unit\n */\nfunction metersToUnit(value, unit) {\n    const conversionMapper = new Map([\n        [MeasureLengthUnit.Meters, (val) => val],\n        [MeasureLengthUnit.Kilometers, metersToKilometers],\n        [MeasureLengthUnit.Miles, metersToMiles],\n        [MeasureLengthUnit.Feet, metersToFeet],\n    ]);\n    const conversion = conversionMapper.get(unit);\n    return conversion ? conversion(value) : undefined;\n}\n/**\n * Convert value from square meters to the specified area unit\n * @param value Value in meters\n * @param unit Area unit\n * @returns Value in unit\n */\nfunction squareMetersToUnit(value, unit) {\n    const conversionMapper = new Map([\n        [MeasureAreaUnit.SquareMeters, (val) => val],\n        [MeasureAreaUnit.SquareKilometers, squareMetersToSquareKilometers],\n        [MeasureAreaUnit.SquareMiles, squareMetersToSquareMiles],\n        [MeasureAreaUnit.SquareFeet, squareMetersToSquareFeet],\n        [MeasureAreaUnit.Hectares, squareMetersToHectares],\n        [MeasureAreaUnit.Acres, squareMetersToAcres],\n    ]);\n    const conversion = conversionMapper.get(unit);\n    return conversion ? conversion(value) : undefined;\n}\n/**\n * This method format a measure to a readable format\n * @param measure Measure\n * @param options Formatting options\n * @returns Formatted measure\n */\nfunction formatMeasure(measure, options, languageService) {\n    let decimal = options.decimal;\n    if (decimal === undefined || decimal < 0) {\n        decimal = 1;\n    }\n    const parts = [];\n    if (options.locale !== undefined) {\n        parts.push(measure.toLocaleString(options.locale, {\n            minimumFractionDigits: decimal,\n            maximumFractionDigits: decimal\n        }));\n    }\n    else {\n        parts.push(measure.toFixed(decimal).toString());\n    }\n    if (options.unit !== undefined && options.unitAbbr === true) {\n        if (languageService) {\n            parts.push(MeasureLengthUnitAbbreviation[options.unit] ?\n                languageService.translate.instant('igo.geo.measure.' + MeasureLengthUnitAbbreviation[options.unit]) :\n                languageService.translate.instant('igo.geo.measure.' + MeasureAreaUnitAbbreviation[options.unit]));\n        }\n        else {\n            parts.push(MeasureLengthUnitAbbreviation[options.unit] || MeasureAreaUnitAbbreviation[options.unit]);\n        }\n    }\n    return parts.filter(p => p !== undefined).join(' ');\n}\n/**\n * Compute best length measure unit for a given measure in meters\n * @param value Value in meters\n * @returns Measure unit\n */\nfunction computeBestLengthUnit(value) {\n    let unit = MeasureLengthUnit.Meters;\n    let converted = value;\n    const possibleUnits = [MeasureLengthUnit.Kilometers];\n    while (converted > 1000 && possibleUnits.length > 0) {\n        unit = possibleUnits.pop();\n        converted = metersToUnit(value, unit);\n    }\n    return unit;\n}\n/**\n * Compute best length measure unit for a given measure in square meters\n * @param value Value in meters\n * @returns Measure unit\n */\nfunction computeBestAreaUnit(value) {\n    let unit = MeasureAreaUnit.SquareMeters;\n    let converted = value;\n    const possibleUnits = [MeasureAreaUnit.SquareKilometers];\n    while (converted > 1000000 && possibleUnits.length > 0) {\n        unit = possibleUnits.pop();\n        converted = squareMetersToUnit(value, unit);\n    }\n    return unit;\n}\n/**\n * Create a default style for a measure interaction\n * @returns OL style\n */\nfunction createMeasureInteractionStyle() {\n    return new Style({\n        stroke: new Stroke({\n            color: '#ffcc33',\n            lineDash: [10, 10],\n            width: 2\n        }),\n        fill: new Fill({\n            color: 'rgba(255, 255, 255, 0.2)'\n        }),\n        image: new Circle({\n            radius: 5,\n            stroke: new Stroke({\n                color: '#ffcc33',\n            }),\n            fill: new Fill({\n                color: 'rgba(255, 255, 255, 0.2)'\n            })\n        })\n    });\n}\n/**\n * Create a default style for a measure layer\n * @returns OL style\n */\nfunction createMeasureLayerStyle() {\n    return new Style({\n        stroke: new Stroke({\n            color: '#ffcc33',\n            width: 2\n        }),\n        fill: new Fill({\n            color: 'rgba(255, 255, 255, 0.2)'\n        })\n    });\n}\n/**\n * Compute the length in meters of an OL geometry with a given projection\n * @param olGeometry Ol geometry\n * @param projection olGeometry's projection\n * @returns Length in meters\n */\nfunction measureOlGeometryLength(olGeometry, projection) {\n    if (olGeometry instanceof OlPoint) {\n        return undefined;\n    }\n    if (olGeometry.getFlatCoordinates().length === 0) {\n        return undefined;\n    }\n    return getLength(olGeometry, { projection });\n}\n/**\n * Compute the area in square meters of an OL geometry with a given projection\n * @param olGeometry Ol geometry\n * @param projection olGeometry's projection\n * @returns Area in square meters\n */\nfunction measureOlGeometryArea(olGeometry, projection) {\n    if (olGeometry instanceof OlPoint || olGeometry instanceof OlLineString) {\n        return undefined;\n    }\n    if (olGeometry.getFlatCoordinates().length === 0) {\n        return undefined;\n    }\n    return getArea$1(olGeometry, { projection });\n}\n/**\n * Compute the area (square meters), length (meters) and last length (meters)\n * of an OL geometry with a given projection.\n * @param olGeometry Ol geometry\n * @param projection olGeometry's projection\n * @returns Computed measure\n */\nfunction measureOlGeometry(olGeometry, projection) {\n    const length = measureOlGeometryLength(olGeometry, projection);\n    const area = measureOlGeometryArea(olGeometry, projection);\n    const lengths = [];\n    const coordinates = olGeometry.flatCoordinates;\n    const coordinatesLength = coordinates.length;\n    for (let i = 0; i <= coordinatesLength - 4; i += 2) {\n        const olSegment = new OlLineString([\n            [coordinates[i], coordinates[i + 1]],\n            [coordinates[i + 2], coordinates[i + 3]]\n        ]);\n        lengths.push(measureOlGeometryLength(olSegment, projection));\n    }\n    return {\n        area,\n        length,\n        lengths\n    };\n}\n/**\n * Update an OL geometry midpoints and return an array of those points\n * @param olGeometry OL Geometry\n * @returns OL points\n */\nfunction updateOlGeometryMidpoints(olGeometry) {\n    let olMidpoints;\n    if (olGeometry instanceof OlPoint) {\n        const olMidpointPoint = new OlPoint(olGeometry.flatCoordinates);\n        olMidpoints = new Array(1);\n        olMidpoints[0] = olMidpointPoint;\n    }\n    else {\n        olMidpoints = getOlGeometryMidpoints(olGeometry);\n        // TODO: handle multi geometries\n        const coordinates = olGeometry.flatCoordinates;\n        const midpointsLength = olMidpoints.length;\n        for (let i = 0; i < midpointsLength; i++) {\n            const j = i * 2;\n            const olSegment = new OlLineString([\n                [coordinates[j], coordinates[j + 1]],\n                [coordinates[j + 2], coordinates[j + 3]]\n            ]);\n            const midpointCoordinate = olSegment.getCoordinateAt(0.5);\n            const olMidpoint = olMidpoints[i];\n            if (olMidpoint !== undefined) {\n                olMidpoint.setCoordinates(midpointCoordinate);\n            }\n            else {\n                olMidpoints[i] = new OlPoint(midpointCoordinate);\n            }\n        }\n    }\n    return olMidpoints;\n}\n/**\n * Clear an OL geometry midpoints and return an array of those points\n * @param olGeometry OL Geometry\n */\nfunction clearOlGeometryMidpoints(olGeometry) {\n    const olMidpoints = olGeometry.get('_midpoints') || [];\n    const midpointsLength = olMidpoints.length;\n    for (let i = 0; i < midpointsLength; i++) {\n        const olMidpoint = olMidpoints[i];\n        if (olMidpoint !== undefined) {\n            if (olMidpoint !== undefined) {\n                clearOlMidpointTooltip(olMidpoint);\n            }\n        }\n    }\n    olGeometry.set('_midpoints', undefined, true);\n    return olMidpoints;\n}\n/**\n * Return an array of  OL geometry midpoints, if any\n * @param olGeometry OL Geometry\n * @returns OL points\n */\nfunction getOlGeometryMidpoints(olGeometry) {\n    let expectedNumber;\n    if (olGeometry instanceof OlCircle) {\n        expectedNumber = 0;\n    }\n    else {\n        expectedNumber = Math.max((olGeometry.flatCoordinates.length / 2) - 1, 0);\n    }\n    // TODO: This works but it's quite messy. If time permits,\n    // clean this. Maybe a Tooltip class could handle that\n    let olMidpoints = olGeometry.get('_midpoints');\n    if (olMidpoints === undefined) {\n        if (olGeometry instanceof OlPoint) {\n            olMidpoints = new Array(1);\n        }\n        else {\n            olMidpoints = new Array(expectedNumber);\n        }\n        olGeometry.set('_midpoints', olMidpoints, true);\n        return olMidpoints;\n    }\n    if (expectedNumber === 0) {\n        return olMidpoints;\n    }\n    if (expectedNumber === olMidpoints.length) {\n        return olMidpoints;\n    }\n    if (expectedNumber > olMidpoints.length) {\n        olMidpoints.push(...new Array(expectedNumber - olMidpoints.length));\n        return olMidpoints;\n    }\n    for (let i = expectedNumber; i < olMidpoints.length; i++) {\n        const olMidpoint = olMidpoints[expectedNumber];\n        if (olMidpoint !== undefined) {\n            clearOlMidpointTooltip(olMidpoint);\n        }\n    }\n    olMidpoints.splice(expectedNumber);\n    return olMidpoints;\n}\n/**\n * Remove an OL midpoint's tooltip from the map\n * @param olMidpoint OL Point\n */\nfunction clearOlMidpointTooltip(olMidpoint) {\n    const olTooltip = olMidpoint.get('_tooltip');\n    if (olTooltip !== undefined) {\n        const olMap = olTooltip.getMap();\n        if (olMap !== undefined) {\n            olMap.removeOverlay(olTooltip);\n        }\n    }\n}\n/**\n * Add an OL overlay at each midpoint and return an array of those overlays\n * @param olGeometry OL Geometry\n * @returns OL overlays\n */\nfunction updateOlTooltipsAtMidpoints(olGeometry) {\n    const olMidpoints = updateOlGeometryMidpoints(olGeometry);\n    let typeGeom = '';\n    if (olGeometry instanceof OlLineString) {\n        typeGeom = 'line-';\n    }\n    else if (olGeometry instanceof OlPolygon) {\n        typeGeom = 'polygone-';\n    }\n    const olTooltips = olMidpoints.map((olMidpoint) => {\n        let olTooltip = olMidpoint.get('_tooltip');\n        if (olTooltip === undefined) {\n            olTooltip = createOlTooltipAtPoint(olMidpoint, false, typeGeom);\n        }\n        else {\n            olTooltip.setPosition(olMidpoint.flatCoordinates);\n        }\n        return olTooltip;\n    });\n    return olTooltips;\n}\n/**\n * Return an array of OL overlay at midspoints, if any\n * @param olGeometry OL Geometry\n * @returns OL overlays\n */\nfunction getOlTooltipsAtMidpoints(olGeometry) {\n    const olMidpoints = getOlGeometryMidpoints(olGeometry);\n    return olMidpoints.map((olMidpoint) => {\n        return olMidpoint ? olMidpoint.get('_tooltip') : undefined;\n    });\n}\n/**\n * Update an OL geometry center and return it\n * @param olGeometry OL Geometry\n * @returns OL point\n */\nfunction updateOlGeometryCenter(olGeometry) {\n    let olCenter = olGeometry.get('_center');\n    const centerCoordinate = getCenter(olGeometry.getExtent());\n    if (olCenter !== undefined) {\n        olCenter.setCoordinates(centerCoordinate);\n    }\n    else {\n        olCenter = new OlPoint(centerCoordinate);\n        olGeometry.set('_center', olCenter);\n    }\n    return olCenter;\n}\n/**\n * Add an OL overlay at the center of a geometry and return that overlay\n * @param olGeometry OL Geometry\n * @returns OL overlay\n */\nfunction updateOlTooltipAtCenter(olGeometry) {\n    const olCenter = updateOlGeometryCenter(olGeometry);\n    let olTooltip = olCenter.get('_tooltip');\n    if (olTooltip === undefined) {\n        olTooltip = createOlTooltipAtPoint(olCenter, true);\n    }\n    else {\n        olTooltip.setPosition(olCenter.flatCoordinates);\n    }\n    return olTooltip;\n}\n/**\n * Return an array of OL overlay at midspoints, if any\n * @param olGeometry OL Geometry\n * @returns OL overlays\n */\nfunction getOlTooltipAtCenter(olGeometry) {\n    const olCenter = olGeometry.get('_center');\n    return olCenter ? olCenter.get('_tooltip') : undefined;\n}\n/**\n * Get all the tooltips of an OL geometry\n * @param olGeometry OL Geometry\n * @returns OL overlays\n */\nfunction getTooltipsOfOlGeometry(olGeometry) {\n    const olTooltips = [].concat(getOlTooltipsAtMidpoints(olGeometry) || []);\n    const olCenterTooltip = getOlTooltipAtCenter(olGeometry);\n    if (olCenterTooltip !== undefined) {\n        olTooltips.push(olCenterTooltip);\n    }\n    return olTooltips;\n}\n/**\n * Create an OL overlay at a point and bind the overlay to the point\n * @param olPoint OL Point\n * @returns OL overlay\n */\nfunction createOlTooltipAtPoint(olPoint, center = false, srcGeomType = '') {\n    const olTooltip = new OlOverlay({\n        element: document.createElement('div'),\n        offset: [-30, -10],\n        className: (center ?\n            ['igo-map-tooltip',\n                'igo-map-tooltip-measure', 'igo-map-tooltip-measure-area'] : ['igo-map-tooltip', 'igo-map-tooltip-measure',\n            `igo-map-tooltip-measure-${srcGeomType}segments`]).join(' '),\n        stopEvent: false\n    });\n    olTooltip.setPosition(olPoint.flatCoordinates);\n    olPoint.set('_tooltip', olTooltip);\n    return olTooltip;\n}\n\n/**\n * Create a default style for a drawO interaction\n * @returns OL style\n */\nfunction createDrawingInteractionStyle(fill, stroke, text) {\n    return new Style({\n        stroke: new Stroke({\n            color: stroke ? stroke : '#3399CC',\n            width: 2\n        }),\n        fill: new Fill({\n            color: fill ? fill : 'rgba(255,255,255,0.4)'\n        }),\n        text: new Text({\n            text: text ? text : ''\n        }),\n        image: new Circle({\n            radius: 5,\n            stroke: new Stroke({\n                color: stroke ? stroke : '#3399CC',\n            }),\n            fill: new Fill({\n                color: fill ? fill : 'rgba(255,255,255,0.4)'\n            })\n        })\n    });\n}\n/**\n * Add an OL overlay at each midpoint and return an array of those overlays\n * @param olGeometry OL Geometry\n * @returns OL overlays\n */\nfunction updateOlTooltipsDrawAtMidpoints(olGeometry) {\n    let olMidpoints;\n    if (olGeometry instanceof OlPoint) {\n        const olMidpointPoint = new OlPoint(olGeometry.flatCoordinates);\n        olMidpoints = new Array(1);\n        olMidpoints[0] = olMidpointPoint;\n        olGeometry.setProperties({ _midpoints: olMidpoints }, true);\n    }\n    else if (olGeometry instanceof OlCircle) {\n        const olMidpointPoint = new OlPoint(olGeometry.getCenter());\n        olMidpoints = new Array(1);\n        olMidpoints[0] = olMidpointPoint;\n        olGeometry.setProperties({ _midpoints: olMidpoints }, true);\n    }\n    else {\n        olMidpoints = updateOlGeometryMidpoints(olGeometry);\n    }\n    const olTooltips = olMidpoints.map((olMidpoint) => {\n        let olTooltip = olMidpoint.get('_tooltip');\n        if (olTooltip === undefined) {\n            olTooltip = createOlTooltipDrawAtPoint(olMidpoint);\n        }\n        else {\n            olTooltip.setPosition(olMidpoint.flatCoordinates);\n        }\n        return olTooltip;\n    });\n    return olTooltips;\n}\n/**\n * Add an OL overlay at the center of a geometry and return that overlay\n * @param olGeometry OL Geometry\n * @returns OL overlay\n */\nfunction updateOlTooltipDrawAtCenter(olGeometry) {\n    const olCenter = updateOlGeometryCenter(olGeometry);\n    let olTooltip = olCenter.get('_tooltip');\n    if (olTooltip === undefined) {\n        olTooltip = createOlTooltipDrawAtPoint(olCenter);\n    }\n    else {\n        olTooltip.setPosition(olCenter.flatCoordinates);\n    }\n    return olTooltip;\n}\n/**\n * Create an OL overlay at a point and bind the overlay to the point\n * @param olPoint OL Point\n * @returns OL overlay\n */\nfunction createOlTooltipDrawAtPoint(olPoint) {\n    const olTooltip = new OlOverlay({\n        element: document.createElement('div'),\n        offset: [-30, -10],\n        className: [\n            'igo-map-tooltip',\n            'igo-map-tooltip-draw'\n        ].join(' '),\n        stopEvent: false\n    });\n    olTooltip.setPosition(olPoint.flatCoordinates);\n    olPoint.set('_tooltip', olTooltip);\n    return olTooltip;\n}\n\nclass DrawIconService {\n    constructor(config) {\n        this.config = config;\n        this.getIconsList();\n    }\n    getIcons() {\n        return this.icons;\n    }\n    getPath() {\n        return this.config.getConfig('drawingTool.icons') || [];\n    }\n    getIconsList() {\n        this.icons = this.getPath();\n    }\n}\nDrawIconService.ɵfac = function DrawIconService_Factory(t) { return new (t || DrawIconService)(ɵɵinject(ConfigService)); };\nDrawIconService.ɵprov = ɵɵdefineInjectable({ token: DrawIconService, factory: DrawIconService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DrawIconService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ConfigService }]; }, null); })();\n\nfunction DrawComponent_mat_form_field_47_div_6_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 21);\n    ɵɵelement(1, \"img\", 22);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"src\", ctx_r3.icon, ɵɵsanitizeUrl);\n} }\nfunction DrawComponent_mat_form_field_47_mat_option_10_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-option\", 23);\n    ɵɵlistener(\"click\", function DrawComponent_mat_form_field_47_mat_option_10_Template_mat_option_click_0_listener() { ɵɵrestoreView(_r7); const icon_html_r5 = ctx.$implicit; const ctx_r6 = ɵɵnextContext(2); return ctx_r6.onIconChange(icon_html_r5); });\n    ɵɵelementStart(1, \"div\", 21);\n    ɵɵelement(2, \"img\", 22);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const icon_html_r5 = ctx.$implicit;\n    ɵɵproperty(\"value\", icon_html_r5);\n    ɵɵadvance(2);\n    ɵɵpropertyInterpolate(\"src\", icon_html_r5, ɵɵsanitizeUrl);\n} }\nfunction DrawComponent_mat_form_field_47_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\");\n    ɵɵelementStart(1, \"mat-label\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"mat-select\");\n    ɵɵelementStart(5, \"mat-select-trigger\");\n    ɵɵtemplate(6, DrawComponent_mat_form_field_47_div_6_Template, 2, 1, \"div\", 18);\n    ɵɵelementEnd();\n    ɵɵelementStart(7, \"mat-option\", 19);\n    ɵɵlistener(\"click\", function DrawComponent_mat_form_field_47_Template_mat_option_click_7_listener() { ɵɵrestoreView(_r9); const ctx_r8 = ɵɵnextContext(); return ctx_r8.onIconChange(); });\n    ɵɵtext(8);\n    ɵɵpipe(9, \"translate\");\n    ɵɵelementEnd();\n    ɵɵtemplate(10, DrawComponent_mat_form_field_47_mat_option_10_Template, 3, 2, \"mat-option\", 20);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(3, 4, \"igo.geo.draw.icon\"));\n    ɵɵadvance(4);\n    ɵɵproperty(\"ngIf\", ctx_r0.icon);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(9, 6, \"igo.geo.draw.noIcon\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", ctx_r0.icons);\n} }\nfunction DrawComponent_button_50_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 24);\n    ɵɵlistener(\"click\", function DrawComponent_button_50_Template_button_click_0_listener() { ɵɵrestoreView(_r11); const ctx_r10 = ɵɵnextContext(); return ctx_r10.deleteDrawings(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵpipe(2, \"async\");\n    ɵɵelement(3, \"mat-icon\", 25);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.geo.draw.delete\"))(\"disabled\", ɵɵpipeBind1(2, 4, ctx_r1.selectedFeatures$).length === 0);\n} }\nclass DrawComponent {\n    constructor(languageService, formBuilder, drawStyleService, dialog, drawIconService) {\n        this.languageService = languageService;\n        this.formBuilder = formBuilder;\n        this.drawStyleService = drawStyleService;\n        this.dialog = dialog;\n        this.drawIconService = drawIconService;\n        /**\n         * Table template\n         * @internal\n         */\n        this.tableTemplate = {\n            selection: true,\n            selectMany: true,\n            selectionCheckbox: true,\n            sort: true,\n            columns: [\n                {\n                    name: 'Drawing',\n                    title: this.languageService.translate.instant('igo.geo.draw.labels'),\n                    valueAccessor: (feature) => {\n                        return feature.properties.draw;\n                    }\n                }\n            ]\n        };\n        /**\n         * Reference to the DrawType enum\n         * @internal\n         */\n        this.drawType = DrawType;\n        /**\n         * Observable of draw\n         * @internal\n         */\n        this.draw$ = new BehaviorSubject({});\n        this._activeDrawType = DrawType.Point;\n        this.olDrawSource = new OlVectorSource();\n        this.selectedFeatures$ = new BehaviorSubject([]);\n        this.drawsPresence = false;\n        this.position = 'bottom';\n        this.buildForm();\n        this.fillColor = this.drawStyleService.getFill();\n        this.strokeColor = this.drawStyleService.getStroke();\n        this.showTooltips = this.drawStyleService.getToggleLabel();\n        this.toggleLabel = this.drawStyleService.getToggleLabel();\n        this.icons = this.drawIconService.getIcons();\n        this.icon = this.drawStyleService.getIcon();\n    }\n    /**\n     * Draw type\n     * @internal\n     */\n    set activeDrawType(value) { this.setActiveDrawType(value); }\n    get activeDrawType() { return this._activeDrawType; }\n    /**\n     * Wheter one of the draw control is active\n     * @internal\n     */\n    get drawControlIsActive() {\n        return this.activeDrawControl !== undefined;\n    }\n    ngOnInit() {\n        this.initStore();\n        this.createDrawPointControl();\n        this.createDrawLineControl();\n        this.createDrawPolygonControl();\n        this.createDrawCircleControl();\n        this.toggleDrawControl();\n        this.checkStoreCount();\n    }\n    /**\n     * Clear the overlay layer and any interaction added by this component.\n     * @internal\n     */\n    ngOnDestroy() {\n        this.setActiveDrawType(undefined);\n    }\n    createDrawPointControl(fill, stroke) {\n        this.drawPointControl = new DrawControl({\n            geometryType: DrawType.Point,\n            source: this.olDrawSource,\n            layerStyle: new OlStyle({}),\n            drawStyle: createDrawingInteractionStyle(this.fillColor, this.strokeColor)\n        });\n    }\n    createDrawLineControl(fill, stroke) {\n        this.drawLineControl = new DrawControl({\n            geometryType: DrawType.LineString,\n            source: this.olDrawSource,\n            layerStyle: new OlStyle({}),\n            drawStyle: createDrawingInteractionStyle(this.fillColor, this.strokeColor)\n        });\n    }\n    createDrawPolygonControl(fill, stroke) {\n        this.drawPolygonControl = new DrawControl({\n            geometryType: DrawType.Polygon,\n            source: this.olDrawSource,\n            layerStyle: new OlStyle({}),\n            drawStyle: createDrawingInteractionStyle(this.fillColor, this.strokeColor)\n        });\n    }\n    createDrawCircleControl(fill, stroke) {\n        this.drawCircleControl = new DrawControl({\n            geometryType: DrawType.Circle,\n            source: this.olDrawSource,\n            layerStyle: new OlStyle({}),\n            drawStyle: createDrawingInteractionStyle(this.fillColor, this.strokeColor)\n        });\n    }\n    onDrawTypeChange(drawType) {\n        this.activeDrawType = drawType;\n    }\n    initStore() {\n        const store = this.store;\n        this.map.removeLayer(this.layer);\n        this.layer = new VectorLayer({\n            title: this.languageService.translate.instant('igo.geo.draw.drawing'),\n            zIndex: 200,\n            source: new FeatureDataSource(),\n            style: (feature, resolution) => {\n                return this.drawStyleService.createDrawLayerStyle(feature, resolution, true, this.icon);\n            },\n            showInLayerList: true,\n            exportable: true,\n            browsable: false,\n            workspace: {\n                enabled: false\n            },\n        });\n        tryBindStoreLayer(store, this.layer);\n        tryAddLoadingStrategy(store, new FeatureStoreLoadingStrategy({\n            motion: FeatureMotion.None\n        }));\n        tryAddSelectionStrategy(store, new FeatureStoreSelectionStrategy({\n            map: this.map,\n            motion: FeatureMotion.None,\n            many: true\n        }));\n        store.source.ol.on('removefeature', (event) => {\n            const olGeometry = event.feature.getGeometry();\n            this.clearTooltipsOfOlGeometry(olGeometry);\n        });\n        store.stateView.manyBy$((record) => {\n            return record.state.selected === true;\n        }).pipe(skip(1) // Skip initial emission\n        )\n            .subscribe((records) => {\n            this.selectedFeatures$.next(records.map(record => record.entity));\n        });\n    }\n    changeStoreLayerStyle(enableLabel, icon) {\n        this.fillForm = this.fillColor;\n        this.strokeForm = this.strokeColor;\n        this.drawStyleService.setFill(this.fillColor);\n        this.drawStyleService.setStroke(this.strokeColor);\n        if (enableLabel && !icon) {\n            this.store.layer.ol.setStyle((feature, resolution) => {\n                return this.drawStyleService.createDrawLayerStyle(feature, resolution, true);\n            });\n            this.icon = undefined;\n        }\n        else if (!enableLabel && !icon) {\n            this.store.layer.ol.setStyle((feature, resolution) => {\n                return this.drawStyleService.createDrawLayerStyle(feature, resolution, false);\n            });\n            this.icon = undefined;\n        }\n        else if (enableLabel && icon) {\n            this.store.layer.ol.setStyle((feature, resolution) => {\n                return this.drawStyleService.createDrawLayerStyle(feature, resolution, true, this.icon);\n            });\n        }\n        else if (!enableLabel && icon) {\n            this.store.layer.ol.setStyle((feature, resolution) => {\n                return this.drawStyleService.createDrawLayerStyle(feature, resolution, false, this.icon);\n            });\n        }\n        this.createDrawPointControl();\n        this.createDrawLineControl();\n        this.createDrawPolygonControl();\n        this.createDrawCircleControl();\n    }\n    /**\n     * Activate or deactivate the current draw control\n     * @internal\n     */\n    onToggleDrawControl(toggle) {\n        if (toggle === true) {\n            this.toggleDrawControl();\n        }\n        else {\n            this.deactivateDrawControl();\n        }\n    }\n    /**\n     * Activate the right control\n     */\n    toggleDrawControl() {\n        this.deactivateDrawControl();\n        // this.deactivateModifyControl();\n        if (this.activeDrawType === DrawType.Point) {\n            this.activateDrawControl(this.drawPointControl);\n        }\n        else if (this.activeDrawType === DrawType.LineString) {\n            this.activateDrawControl(this.drawLineControl);\n        }\n        else if (this.activeDrawType === DrawType.Polygon) {\n            this.activateDrawControl(this.drawPolygonControl);\n        }\n        else if (this.activeDrawType === DrawType.Circle) {\n            this.activateDrawControl(this.drawCircleControl);\n        }\n    }\n    openDialog(olGeometry) {\n        const dialogRef = this.dialog.open(DrawPopupComponent, {\n            disableClose: false\n        });\n        dialogRef.afterClosed().subscribe(() => {\n            dialogRef.componentInstance.onOk$.subscribe(label => {\n                this.updateLabelOfOlGeometry(olGeometry, label);\n                this.onDrawEnd(olGeometry);\n                this.checkStoreCount();\n            });\n        });\n    }\n    /**\n     * Activate a given control\n     * @param drawControl Draw control\n     */\n    activateDrawControl(drawControl) {\n        this.activeDrawControl = drawControl;\n        this.drawEnd$$ = drawControl.end$\n            .subscribe((olGeometry) => {\n            this.openDialog(olGeometry);\n        });\n        drawControl.setOlMap(this.map.ol);\n    }\n    /**\n     * Deactivate the active draw control\n     */\n    deactivateDrawControl() {\n        if (this.activeDrawControl === undefined) {\n            return;\n        }\n        this.olDrawSource.clear();\n        if (this.drawEnd$$ !== undefined) {\n            this.drawEnd$$.unsubscribe();\n        }\n        this.activeDrawControl.setOlMap(undefined);\n        this.activeDrawControl = undefined;\n    }\n    /**\n     * Clear the draw source and track the geometry being draw\n     * @param olGeometry Ol linestring or polygon\n     */\n    onDrawEnd(olGeometry) {\n        this.addFeatureToStore(olGeometry);\n        this.clearTooltipsOfOlGeometry(olGeometry);\n        this.olDrawSource.clear(true);\n    }\n    setActiveDrawType(drawType) {\n        this._activeDrawType = drawType;\n        this.toggleDrawControl();\n    }\n    /**\n     * Add a feature with draw label to the store. The loading stragegy of the store\n     * will trigger and add the feature to the map.\n     * @internal\n     */\n    addFeatureToStore(olGeometry, feature) {\n        let rad;\n        const featureId = feature ? feature.properties.id : uuid();\n        const projection = this.map.ol.getView().getProjection();\n        const geometry = new OlGeoJSON().writeGeometryObject(olGeometry, {\n            featureProjection: projection,\n            dataProjection: projection\n        });\n        if (olGeometry instanceof OlCircle) {\n            geometry.type = 'Point';\n            geometry.coordinates = olGeometry.getCenter();\n            const extend4326 = transform([olGeometry.flatCoordinates[2], olGeometry.flatCoordinates[3]], projection, 'EPSG:4326');\n            const center4326 = transform([olGeometry.flatCoordinates[0], olGeometry.flatCoordinates[1]], projection, 'EPSG:4326');\n            rad = getDistance(center4326, extend4326);\n        }\n        this.store.update({\n            type: FEATURE,\n            geometry,\n            projection: projection.getCode(),\n            properties: {\n                id: featureId,\n                draw: olGeometry.get('_label'),\n                radius: rad ? rad : undefined\n            },\n            meta: {\n                id: featureId\n            }\n        });\n        this.drawStyleService.raiseDrawCounter();\n    }\n    buildForm() {\n        this.form = this.formBuilder.group({\n            fill: [''],\n            stroke: ['']\n        });\n    }\n    deleteDrawings() {\n        this.store.deleteMany(this.selectedFeatures$.value);\n        this.checkStoreCount();\n    }\n    /**\n     * Clear the tooltips of an OL geometrys\n     * @param olGeometry OL geometry with tooltips\n     */\n    clearTooltipsOfOlGeometry(olGeometry) {\n        getTooltipsOfOlGeometry(olGeometry).forEach((olTooltip) => {\n            if (olTooltip !== undefined && olTooltip.getMap() !== undefined) {\n                this.map.ol.removeOverlay(olTooltip);\n            }\n        });\n    }\n    onToggleTooltips(toggle) {\n        this.drawStyleService.switchLabel();\n        this.toggleLabel = !this.toggleLabel;\n        if (this.icon) {\n            this.changeStoreLayerStyle(this.toggleLabel, true);\n        }\n        else {\n            this.changeStoreLayerStyle(this.toggleLabel, false);\n        }\n    }\n    updateLabelOfOlGeometry(olGeometry, label) {\n        olGeometry.setProperties({ _label: label }, true);\n    }\n    onIconChange(event) {\n        this.icon = event;\n        this.drawStyleService.setIcon(this.icon);\n        this.store.layer.ol.setStyle((feature, resolution) => {\n            return this.drawStyleService.createDrawLayerStyle(feature, resolution, true, this.icon);\n        });\n    }\n    checkStoreCount() {\n        if (this.store.count$.getValue() !== 0) {\n            this.drawsPresence = true;\n        }\n        else {\n            this.drawsPresence = false;\n        }\n    }\n}\nDrawComponent.ɵfac = function DrawComponent_Factory(t) { return new (t || DrawComponent)(ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(FormBuilder), ɵɵdirectiveInject(DrawStyleService), ɵɵdirectiveInject(MatDialog), ɵɵdirectiveInject(DrawIconService)); };\nDrawComponent.ɵcmp = ɵɵdefineComponent({ type: DrawComponent, selectors: [[\"igo-draw\"]], inputs: { map: \"map\", store: \"store\", activeDrawType: \"activeDrawType\" }, outputs: { fillColor: \"fillColor\", strokeColor: \"strokeColor\" }, decls: 53, vars: 74, consts: [[1, \"draw-type-toggle\", \"mat-typography\"], [3, \"value\", \"change\"], [3, \"value\"], [1, \"draw-options\", \"mat-typography\"], [3, \"checked\", \"labelPosition\", \"change\"], [1, \"igo-form\", 3, \"formGroup\"], [1, \"fill-color-picker\", \"mat-typography\"], [1, \"color_element\"], [\"svgIcon\", \"palette\", 1, \"stroke-palette-icon\"], [\"appearance\", \"outline\"], [\"formControlName\", \"fill\", \"matInput\", \"\", \"type\", \"text\", 3, \"colorPicker\", \"readonly\", \"cpWidth\", \"cpPosition\", \"cpOutputFormat\", \"cpCancelButton\", \"cpCancelButtonText\", \"cpOKButton\", \"cpOKButtonText\", \"value\", \"colorPickerChange\", \"colorPickerSelect\"], [1, \"stroke-color-picker\", \"mat-typography\"], [\"appearance\", \"outline\", 1, \"stroke-color-picker-box\"], [\"formControlName\", \"stroke\", \"matInput\", \"\", \"type\", \"text\", 3, \"colorPicker\", \"readonly\", \"cpWidth\", \"cpPosition\", \"cpOutputFormat\", \"cpCancelButton\", \"cpCancelButtonText\", \"cpOKButton\", \"cpOKButtonText\", \"value\", \"colorPickerChange\", \"colorPickerSelect\"], [4, \"ngIf\"], [\"class\", \"deleteBtn\", \"mat-icon-button\", \"\", \"color\", \"warn\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"disabled\", \"click\", 4, \"ngIf\"], [1, \"table-compact\", 3, \"store\", \"template\"], [\"table\", \"\"], [\"class\", \"box\", 4, \"ngIf\"], [\"value\", \"\", 3, \"click\"], [3, \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"box\"], [3, \"src\"], [3, \"value\", \"click\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"deleteBtn\", 3, \"matTooltip\", \"disabled\", \"click\"], [\"svgIcon\", \"delete\"]], template: function DrawComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\");\n        ɵɵelementStart(1, \"div\", 0);\n        ɵɵelementStart(2, \"mat-button-toggle-group\", 1);\n        ɵɵlistener(\"change\", function DrawComponent_Template_mat_button_toggle_group_change_2_listener($event) { return ctx.onDrawTypeChange($event.value); });\n        ɵɵelementStart(3, \"mat-button-toggle\", 2);\n        ɵɵtext(4);\n        ɵɵpipe(5, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(6, \"mat-button-toggle\", 2);\n        ɵɵtext(7);\n        ɵɵpipe(8, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(9, \"mat-button-toggle\", 2);\n        ɵɵtext(10);\n        ɵɵpipe(11, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(12, \"mat-button-toggle\", 2);\n        ɵɵtext(13);\n        ɵɵpipe(14, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(15, \"div\", 3);\n        ɵɵelementStart(16, \"mat-slide-toggle\", 4);\n        ɵɵlistener(\"change\", function DrawComponent_Template_mat_slide_toggle_change_16_listener($event) { return ctx.onToggleDrawControl($event.checked); });\n        ɵɵtext(17);\n        ɵɵpipe(18, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(19, \"mat-slide-toggle\", 4);\n        ɵɵlistener(\"change\", function DrawComponent_Template_mat_slide_toggle_change_19_listener($event) { return ctx.onToggleTooltips($event.checked); });\n        ɵɵtext(20);\n        ɵɵpipe(21, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(22, \"form\", 5);\n        ɵɵelementStart(23, \"div\", 6);\n        ɵɵelementStart(24, \"span\", 7);\n        ɵɵtext(25);\n        ɵɵpipe(26, \"translate\");\n        ɵɵelement(27, \"mat-icon\", 8);\n        ɵɵelementEnd();\n        ɵɵelementStart(28, \"mat-form-field\", 9);\n        ɵɵelementStart(29, \"mat-label\");\n        ɵɵtext(30);\n        ɵɵelementEnd();\n        ɵɵelementStart(31, \"input\", 10);\n        ɵɵlistener(\"colorPickerChange\", function DrawComponent_Template_input_colorPickerChange_31_listener($event) { return ctx.fillColor = $event; })(\"colorPickerSelect\", function DrawComponent_Template_input_colorPickerSelect_31_listener() { return ctx.changeStoreLayerStyle(ctx.toggleLabel, false); });\n        ɵɵpipe(32, \"translate\");\n        ɵɵpipe(33, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelement(34, \"br\");\n        ɵɵelementStart(35, \"div\", 11);\n        ɵɵelementStart(36, \"span\", 7);\n        ɵɵtext(37);\n        ɵɵpipe(38, \"translate\");\n        ɵɵelement(39, \"mat-icon\", 8);\n        ɵɵelementEnd();\n        ɵɵelementStart(40, \"mat-form-field\", 12);\n        ɵɵelementStart(41, \"mat-label\");\n        ɵɵtext(42);\n        ɵɵelementEnd();\n        ɵɵelementStart(43, \"input\", 13);\n        ɵɵlistener(\"colorPickerChange\", function DrawComponent_Template_input_colorPickerChange_43_listener($event) { return ctx.strokeColor = $event; })(\"colorPickerSelect\", function DrawComponent_Template_input_colorPickerSelect_43_listener() { return ctx.changeStoreLayerStyle(ctx.toggleLabel, false); });\n        ɵɵpipe(44, \"translate\");\n        ɵɵpipe(45, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(46, \"div\");\n        ɵɵtemplate(47, DrawComponent_mat_form_field_47_Template, 11, 8, \"mat-form-field\", 14);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelement(48, \"mat-divider\");\n        ɵɵelementStart(49, \"div\");\n        ɵɵtemplate(50, DrawComponent_button_50_Template, 4, 6, \"button\", 15);\n        ɵɵelement(51, \"igo-entity-table\", 16, 17);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(2);\n        ɵɵproperty(\"value\", ctx.activeDrawType);\n        ɵɵadvance(1);\n        ɵɵproperty(\"value\", ctx.drawType.Point);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(5, 50, \"igo.geo.draw.\" + ctx.drawType.Point), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"value\", ctx.drawType.LineString);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(8, 52, \"igo.geo.draw.\" + ctx.drawType.LineString), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"value\", ctx.drawType.Polygon);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(11, 54, \"igo.geo.draw.\" + ctx.drawType.Polygon), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"value\", ctx.drawType.Circle);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(14, 56, \"igo.geo.draw.\" + ctx.drawType.Circle), \" \");\n        ɵɵadvance(3);\n        ɵɵproperty(\"checked\", ctx.drawControlIsActive)(\"labelPosition\", \"before\");\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(18, 58, \"igo.geo.spatialFilter.drawControl\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"checked\", ctx.toggleLabel)(\"labelPosition\", \"before\");\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(21, 60, \"igo.geo.draw.toggleMapTooltips\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"formGroup\", ctx.form);\n        ɵɵadvance(3);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(26, 62, \"igo.geo.draw.fill\"), \" \");\n        ɵɵadvance(5);\n        ɵɵtextInterpolate(ctx.fillColor);\n        ɵɵadvance(1);\n        ɵɵstyleProp(\"background\", ctx.fillColor);\n        ɵɵproperty(\"colorPicker\", ctx.fillColor)(\"readonly\", true)(\"colorPicker\", ctx.fillColor)(\"cpWidth\", \"220px\")(\"cpPosition\", \"bottom\")(\"cpOutputFormat\", \"rgba\")(\"cpCancelButton\", true)(\"cpCancelButtonText\", ɵɵpipeBind1(32, 64, \"igo.geo.draw.cancelColorPicker\"))(\"cpOKButton\", true)(\"cpOKButtonText\", ɵɵpipeBind1(33, 66, \"igo.geo.draw.okColorPicker\"))(\"value\", ctx.fillColor);\n        ɵɵadvance(6);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(38, 68, \"igo.geo.draw.stroke\"), \" \");\n        ɵɵadvance(5);\n        ɵɵtextInterpolate(ctx.strokeColor);\n        ɵɵadvance(1);\n        ɵɵstyleProp(\"background\", ctx.strokeColor);\n        ɵɵproperty(\"colorPicker\", ctx.strokeColor)(\"readonly\", true)(\"colorPicker\", ctx.strokeColor)(\"cpWidth\", \"220px\")(\"cpPosition\", \"bottom\")(\"cpOutputFormat\", \"rgba\")(\"cpCancelButton\", true)(\"cpCancelButtonText\", ɵɵpipeBind1(44, 70, \"igo.geo.draw.cancelColorPicker\"))(\"cpOKButton\", true)(\"cpOKButtonText\", ɵɵpipeBind1(45, 72, \"igo.geo.draw.okColorPicker\"))(\"value\", ctx.strokeColor);\n        ɵɵadvance(4);\n        ɵɵproperty(\"ngIf\", ctx.icons.length >= 1);\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngIf\", ctx.drawsPresence);\n        ɵɵadvance(1);\n        ɵɵproperty(\"store\", ctx.store)(\"template\", ctx.tableTemplate);\n    } }, directives: [MatButtonToggleGroup, MatButtonToggle, MatSlideToggle, ɵangular_packages_forms_forms_y, NgControlStatusGroup, FormGroupDirective, MatIcon, MatFormField, MatLabel, DefaultValueAccessor, MatInput, NgControlStatus, FormControlName, ColorPickerDirective, NgIf, MatDivider, EntityTableComponent, MatSelect, MatSelectTrigger, MatOption, NgForOf, MatButton, MatTooltip], pipes: [TranslatePipe, AsyncPipe], styles: [\".draw-type-toggle[_ngcontent-%COMP%]{padding:10px;text-align:center}.draw-type-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}.draw-type-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{width:25%}.draw-options[_ngcontent-%COMP%]{overflow-x:hidden}.draw-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:10px;width:100%}.draw-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-content{width:calc(100% - 60px)}.igo-form[_ngcontent-%COMP%]{padding:10px}.fill-color-picker[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;top:7px}.fill-color-picker[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{left:8px}.stroke-color-picker[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;top:7px}.stroke-color-picker[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{left:35px}.box[_ngcontent-%COMP%]{height:25px;width:25px}img[_ngcontent-%COMP%]{height:100%;width:100%}.deleteBtn[_ngcontent-%COMP%]{margin-left:12px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DrawComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-draw',\n                templateUrl: './draw.component.html',\n                styleUrls: ['./draw.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: LanguageService }, { type: FormBuilder }, { type: DrawStyleService }, { type: MatDialog }, { type: DrawIconService }]; }, { fillColor: [{\n            type: Output\n        }], strokeColor: [{\n            type: Output\n        }], map: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], activeDrawType: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoDrawModule {\n}\nIgoDrawModule.ɵmod = ɵɵdefineNgModule({ type: IgoDrawModule });\nIgoDrawModule.ɵinj = ɵɵdefineInjector({ factory: function IgoDrawModule_Factory(t) { return new (t || IgoDrawModule)(); }, imports: [[\n            FormsModule,\n            ReactiveFormsModule,\n            CommonModule,\n            MatButtonModule,\n            MatButtonToggleModule,\n            MatDividerModule,\n            MatFormFieldModule,\n            MatIconModule,\n            MatTooltipModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatListModule,\n            MatSelectModule,\n            MatSlideToggleModule,\n            IgoLanguageModule,\n            IgoEntityTableModule,\n            ColorPickerModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoDrawModule, { declarations: [DrawComponent,\n        DrawPopupComponent], imports: [FormsModule,\n        ReactiveFormsModule,\n        CommonModule,\n        MatButtonModule,\n        MatButtonToggleModule,\n        MatDividerModule,\n        MatFormFieldModule,\n        MatIconModule,\n        MatTooltipModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatListModule,\n        MatSelectModule,\n        MatSlideToggleModule,\n        IgoLanguageModule,\n        IgoEntityTableModule,\n        ColorPickerModule], exports: [DrawComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoDrawModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    FormsModule,\n                    ReactiveFormsModule,\n                    CommonModule,\n                    MatButtonModule,\n                    MatButtonToggleModule,\n                    MatDividerModule,\n                    MatFormFieldModule,\n                    MatIconModule,\n                    MatTooltipModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatListModule,\n                    MatSelectModule,\n                    MatSlideToggleModule,\n                    IgoLanguageModule,\n                    IgoEntityTableModule,\n                    ColorPickerModule\n                ],\n                declarations: [\n                    DrawComponent,\n                    DrawPopupComponent\n                ],\n                exports: [\n                    DrawComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoDrawingToolModule {\n}\nIgoDrawingToolModule.ɵmod = ɵɵdefineNgModule({ type: IgoDrawingToolModule });\nIgoDrawingToolModule.ɵinj = ɵɵdefineInjector({ factory: function IgoDrawingToolModule_Factory(t) { return new (t || IgoDrawingToolModule)(); }, imports: [[], IgoDrawModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoDrawingToolModule, { exports: [IgoDrawModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoDrawingToolModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: [\n                    IgoDrawModule\n                ]\n            }]\n    }], null, null); })();\n\nclass FeatureDetailsDirective {\n    constructor(component, el) {\n        this.el = el;\n        this.geolocation$ = new BehaviorSubject(undefined);\n        this.start = {\n            meta: { id: 1 },\n            type: FEATURE,\n            geometry: {\n                type: 'Point',\n                coordinates: undefined\n            },\n            projection: 'EPSG:4326',\n            properties: {\n                id: 1,\n                name: 'User coordinates',\n            }\n        };\n        this.feature$ = new BehaviorSubject(undefined);\n        this.routingEvent = new EventEmitter();\n        this.component = component;\n    }\n    get map() {\n        return this.component.map;\n    }\n    get feature() {\n        return this.component.feature;\n    }\n    get geolocation() {\n        return this.component.map.geolocation$.getValue();\n    }\n    set geolocation(value) {\n        if (value) {\n            this.geolocation = value;\n            this.geolocation.on('change', evt => {\n                this.geolocation$.next(this.geolocation);\n            });\n        }\n    }\n    setFeature() {\n        this.feature$.next(this.feature);\n    }\n    ngOnInit() {\n        this.map.geolocation$.subscribe(geolocation => {\n            if (!geolocation) {\n                return;\n            }\n            geolocation.setProjection(this.map.projection);\n            if (geolocation && geolocation.getTracking() === false) {\n                geolocation.setTracking(false);\n            }\n            if (geolocation.getTracking() === true) {\n                let userCoord = geolocation.getPosition();\n                userCoord = transform(userCoord, this.map.projection, 'EPSG:4326');\n                this.start.geometry.coordinates = userCoord;\n            }\n        });\n        this.feature$.subscribe(() => {\n            if (this.feature.geometry) {\n                if (this.feature.geometry.type === 'Point') {\n                    this.end = this.feature;\n                }\n                else {\n                    this.end = pointOnFeature(this.feature.geometry);\n                }\n                this.geolocation$.next(this.geolocation);\n                this.bindClicking();\n            }\n        });\n    }\n    bindClicking() {\n        setTimeout(() => {\n            const routeElement = this.el.nativeElement.querySelector('span.routing');\n            if (routeElement) {\n                routeElement.addEventListener('click', () => {\n                    this.activateRouting();\n                });\n            }\n        }, 1);\n    }\n    activateRouting() {\n        this.start.geometry.coordinates ? this.routingEvent.emit([this.start, this.end]) : this.routingEvent.emit([this.end]);\n    }\n}\nFeatureDetailsDirective.ɵfac = function FeatureDetailsDirective_Factory(t) { return new (t || FeatureDetailsDirective)(ɵɵdirectiveInject(FeatureDetailsComponent, 2), ɵɵdirectiveInject(ElementRef)); };\nFeatureDetailsDirective.ɵdir = ɵɵdefineDirective({ type: FeatureDetailsDirective, selectors: [[\"\", \"igoFeatureDetailsDirective\", \"\"]], hostBindings: function FeatureDetailsDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"selectFeature\", function FeatureDetailsDirective_selectFeature_HostBindingHandler() { return ctx.setFeature(); });\n    } }, outputs: { routingEvent: \"routingEvent\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FeatureDetailsDirective, [{\n        type: Directive,\n        args: [{\n                // This directive allow to view the route between the user coordinates and the feature\n                selector: '[igoFeatureDetailsDirective]'\n            }]\n    }], function () { return [{ type: FeatureDetailsComponent, decorators: [{\n                type: Self\n            }] }, { type: ElementRef }]; }, { routingEvent: [{\n            type: Output\n        }], setFeature: [{\n            type: HostListener,\n            args: ['selectFeature']\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoFeatureDetailsModule {\n}\nIgoFeatureDetailsModule.ɵmod = ɵɵdefineNgModule({ type: IgoFeatureDetailsModule });\nIgoFeatureDetailsModule.ɵinj = ɵɵdefineInjector({ factory: function IgoFeatureDetailsModule_Factory(t) { return new (t || IgoFeatureDetailsModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            IgoLanguageModule,\n            IgoKeyValueModule,\n            IgoImageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoFeatureDetailsModule, { declarations: [FeatureDetailsComponent,\n        FeatureDetailsDirective], imports: [CommonModule,\n        MatIconModule,\n        IgoLanguageModule,\n        IgoKeyValueModule,\n        IgoImageModule], exports: [FeatureDetailsComponent,\n        FeatureDetailsDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoFeatureDetailsModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    IgoLanguageModule,\n                    IgoKeyValueModule,\n                    IgoImageModule\n                ],\n                exports: [\n                    FeatureDetailsComponent,\n                    FeatureDetailsDirective\n                ],\n                declarations: [\n                    FeatureDetailsComponent,\n                    FeatureDetailsDirective\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * @ignore\n */\nclass IgoFeatureFormModule {\n}\nIgoFeatureFormModule.ɵmod = ɵɵdefineNgModule({ type: IgoFeatureFormModule });\nIgoFeatureFormModule.ɵinj = ɵɵdefineInjector({ factory: function IgoFeatureFormModule_Factory(t) { return new (t || IgoFeatureFormModule)(); }, imports: [[\n            CommonModule,\n            IgoFormModule\n        ], IgoFormModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoFeatureFormModule, { declarations: [FeatureFormComponent], imports: [CommonModule,\n        IgoFormModule], exports: [IgoFormModule,\n        FeatureFormComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoFeatureFormModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoFormModule\n                ],\n                exports: [\n                    IgoFormModule,\n                    FeatureFormComponent\n                ],\n                declarations: [\n                    FeatureFormComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoFeatureModule {\n}\nIgoFeatureModule.ɵmod = ɵɵdefineNgModule({ type: IgoFeatureModule });\nIgoFeatureModule.ɵinj = ɵɵdefineInjector({ factory: function IgoFeatureModule_Factory(t) { return new (t || IgoFeatureModule)(); }, providers: [], imports: [[\n            CommonModule\n        ], IgoFeatureDetailsModule,\n        IgoFeatureFormModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoFeatureModule, { imports: [CommonModule], exports: [IgoFeatureDetailsModule,\n        IgoFeatureFormModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoFeatureModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    IgoFeatureDetailsModule,\n                    IgoFeatureFormModule\n                ],\n                declarations: [],\n                providers: []\n            }]\n    }], null, null); })();\n\n/**\n * Control to modify geometries\n */\nclass ModifyControl {\n    constructor(options) {\n        this.options = options;\n        /**\n         * Modify start observable\n         */\n        this.start$ = new Subject();\n        /**\n         * Modify end observable\n         */\n        this.end$ = new Subject();\n        /**\n         * Geometry changes observable\n         */\n        this.changes$ = new Subject();\n        this.olModifyInteractionIsActive = false;\n        this.olTranslateInteractionIsActive = false;\n        this.olDrawInteractionIsActive = false;\n        this.removedOlInteractions = [];\n        /**\n         * Whether a modify control should be available\n         */\n        this.modify = true;\n        /**\n         * Whether a translate control should be available\n         */\n        this.translate = true;\n        if (options.modify !== undefined) {\n            this.modify = options.modify;\n        }\n        if (options.translate !== undefined) {\n            this.translate = options.translate;\n        }\n        if (options.layer !== undefined) {\n            this.olOverlayLayer = options.layer;\n        }\n        else {\n            this.olOverlayLayer = this.createOlInnerOverlayLayer();\n        }\n        this.olLinearRingsLayer = this.createOlLinearRingsLayer();\n    }\n    /**\n     * Wheter the control is active\n     */\n    get active() {\n        return this.olMap !== undefined;\n    }\n    /**\n     * OL overlay source\n     * @internal\n     */\n    get olOverlaySource() {\n        return this.olOverlayLayer.getSource();\n    }\n    /**\n     * OL linear rings source\n     * @internal\n     */\n    get olLinearRingsSource() {\n        return this.olLinearRingsLayer.getSource();\n    }\n    /**\n     * Add or remove this control to/from a map.\n     * @param map OL Map\n     */\n    setOlMap(olMap) {\n        if (olMap === undefined) {\n            this.clearOlInnerOverlaySource();\n            this.removeOlInnerOverlayLayer();\n            this.removeOlModifyInteraction();\n            this.removeOlTranslateInteraction();\n            this.removeOlDrawInteraction();\n            this.olMap = olMap;\n            return;\n        }\n        this.olMap = olMap;\n        this.addOlInnerOverlayLayer();\n        // The order in which these interactions\n        // are added is important\n        if (this.modify === true) {\n            this.addOlDrawInteraction();\n        }\n        if (this.translate === true) {\n            this.addOlTranslateInteraction();\n            this.activateTranslateInteraction();\n        }\n        if (this.modify === true) {\n            this.addOlModifyInteraction();\n            this.activateModifyInteraction();\n        }\n    }\n    /**\n     * Return the overlay source\n     */\n    getSource() {\n        return this.olOverlaySource;\n    }\n    /**\n     * Add an OL geometry to the overlay and start modifying it\n     * @param olGeometry Ol Geometry\n     */\n    setOlGeometry(olGeometry) {\n        const olFeature$1 = new olFeature({ geometry: olGeometry });\n        this.olOverlaySource.clear();\n        this.olOverlaySource.addFeature(olFeature$1);\n    }\n    /**\n     * Create an overlay source if none is defined in the options\n     */\n    createOlInnerOverlayLayer() {\n        return new OlVectorLayer({\n            source: this.options.source ? this.options.source : new OlVectorSource(),\n            style: this.options.layerStyle,\n            zIndex: 500\n        });\n    }\n    /**\n     * Add the overlay layer if it wasn't defined in the options\n     */\n    addOlInnerOverlayLayer() {\n        if (this.options.layer === undefined) {\n            this.olMap.addLayer(this.olOverlayLayer);\n        }\n    }\n    /**\n     * Clear the overlay layer if it wasn't defined in the options\n     */\n    removeOlInnerOverlayLayer() {\n        if (this.options.layer === undefined && this.olMap !== undefined) {\n            this.olMap.removeLayer(this.olOverlayLayer);\n        }\n    }\n    /**\n     * Clear the overlay source if it wasn't defined in the options\n     */\n    clearOlInnerOverlaySource() {\n        if (this.options.layer === undefined && this.options.source === undefined) {\n            this.olOverlaySource.clear(true);\n        }\n    }\n    createOlLinearRingsLayer() {\n        return new OlVectorLayer({\n            source: new OlVectorSource(),\n            style: createDrawHoleInteractionStyle(),\n            zIndex: 500\n        });\n    }\n    /**\n     * Add the linear rings layer\n     */\n    addOlLinearRingsLayer() {\n        this.olMap.addLayer(this.olLinearRingsLayer);\n    }\n    /**\n     * Clear the linear rings layer\n     */\n    removeOlLinearRingsLayer() {\n        this.olMap.removeLayer(this.olLinearRingsLayer);\n    }\n    /**\n     * Clear the linear rings source\n     */\n    clearOlLinearRingsSource() {\n        this.olLinearRingsSource.clear(true);\n    }\n    /**\n     * Add a modify interaction to the map an set up some listeners\n     */\n    addOlModifyInteraction() {\n        const olModifyInteraction = new OlModify({\n            source: this.olOverlaySource,\n            style: this.options.drawStyle\n        });\n        this.olModifyInteraction = olModifyInteraction;\n    }\n    /**\n     * Remove the modify interaction\n     */\n    removeOlModifyInteraction() {\n        if (this.olModifyInteraction === undefined) {\n            return;\n        }\n        this.deactivateModifyInteraction();\n        this.olModifyInteraction = undefined;\n    }\n    activateModifyInteraction() {\n        if (this.olModifyInteractionIsActive === true) {\n            return;\n        }\n        this.olModifyInteractionIsActive = true;\n        this.onModifyStartKey = this.olModifyInteraction.on('modifystart', (event) => this.onModifyStart(event));\n        this.onModifyEndKey = this.olModifyInteraction.on('modifyend', (event) => this.onModifyEnd(event));\n        this.olMap.addInteraction(this.olModifyInteraction);\n    }\n    deactivateModifyInteraction() {\n        if (this.olModifyInteractionIsActive === false) {\n            return;\n        }\n        this.olModifyInteractionIsActive = false;\n        unByKey([this.onModifyStartKey, this.onModifyEndKey, this.onModifyKey]);\n        if (this.olMap !== undefined) {\n            this.olMap.removeInteraction(this.olModifyInteraction);\n        }\n    }\n    /**\n     * When modifying starts, clear the overlay and start watching for changes\n     * @param event Modify start event\n     */\n    onModifyStart(event) {\n        const olGeometry = event.features.item(0).getGeometry();\n        this.start$.next(olGeometry);\n        this.onModifyKey = olGeometry.on('change', (olGeometryEvent) => {\n            this.mousePosition = getMousePositionFromOlGeometryEvent(olGeometryEvent);\n            this.changes$.next(olGeometryEvent.target);\n        });\n        this.subscribeToKeyDown();\n    }\n    /**\n     * When modifying ends, update the geometry observable and stop watching for changes\n     * @param event Modify end event\n     */\n    onModifyEnd(event) {\n        unByKey(this.onModifyKey);\n        this.end$.next(event.features.item(0).getGeometry());\n        this.unsubscribeToKeyDown();\n    }\n    /**\n     * Subscribe to space key down to pan the map\n     */\n    subscribeToKeyDown() {\n        this.keyDown$$ = fromEvent(document, 'keydown').subscribe((event) => {\n            if (event.key === ' ') {\n                // On space bar, pan to the current mouse position\n                this.olMap.getView().animate({\n                    center: this.mousePosition,\n                    duration: 0\n                });\n                return;\n            }\n        });\n    }\n    /**\n     * Unsubscribe to key down\n     */\n    unsubscribeToKeyDown() {\n        if (this.keyDown$$ !== undefined) {\n            this.keyDown$$.unsubscribe();\n        }\n    }\n    /**\n     * Add a translate interaction to the map an set up some listeners\n     */\n    addOlTranslateInteraction() {\n        const olTranslateInteraction = new OlTranslate({\n            layers: [this.olOverlayLayer]\n        });\n        this.olTranslateInteraction = olTranslateInteraction;\n    }\n    /**\n     * Remove the translate interaction\n     */\n    removeOlTranslateInteraction() {\n        if (this.olTranslateInteraction === undefined) {\n            return;\n        }\n        this.deactivateTranslateInteraction();\n        this.olTranslateInteraction = undefined;\n    }\n    activateTranslateInteraction() {\n        if (this.olTranslateInteractionIsActive === true) {\n            return;\n        }\n        this.olTranslateInteractionIsActive = true;\n        this.onTranslateStartKey = this.olTranslateInteraction.on('translatestart', (event) => this.onTranslateStart(event));\n        this.onTranslateEndKey = this.olTranslateInteraction.on('translateend', (event) => this.onTranslateEnd(event));\n        this.olMap.addInteraction(this.olTranslateInteraction);\n    }\n    deactivateTranslateInteraction() {\n        if (this.olTranslateInteractionIsActive === false) {\n            return;\n        }\n        this.olTranslateInteractionIsActive = false;\n        unByKey([\n            this.onTranslateStartKey,\n            this.onTranslateEndKey,\n            this.onTranslateKey\n        ]);\n        if (this.olMap !== undefined) {\n            this.olMap.removeInteraction(this.olTranslateInteraction);\n        }\n    }\n    /**\n     * When translation starts, clear the overlay and start watching for changes\n     * @param event Translate start event\n     */\n    onTranslateStart(event) {\n        const olGeometry = event.features.item(0).getGeometry();\n        this.start$.next(olGeometry);\n        this.onTranslateKey = olGeometry.on('change', (olGeometryEvent) => {\n            this.changes$.next(olGeometryEvent.target);\n        });\n    }\n    /**\n     * When translation ends, update the geometry observable and stop watchign for changes\n     * @param event Translate end event\n     */\n    onTranslateEnd(event) {\n        unByKey(this.onTranslateKey);\n        this.end$.next(event.features.item(0).getGeometry());\n    }\n    /**\n     * Add a draw interaction to the map an set up some listeners\n     */\n    addOlDrawInteraction() {\n        const olDrawInteraction = new OlDraw({\n            type: 'Polygon',\n            source: this.olLinearRingsSource,\n            stopClick: true,\n            style: createDrawHoleInteractionStyle(),\n            condition: (event) => {\n                const olOuterGeometry = this.olOuterGeometry || this.getOlGeometry();\n                const intersects = olOuterGeometry.intersectsCoordinate(event.coordinate);\n                return intersects;\n            }\n        });\n        this.olDrawInteraction = olDrawInteraction;\n        this.subscribeToDrawKeyDown();\n    }\n    /**\n     * Subscribe to CTRL key down to activate the draw control\n     */\n    subscribeToDrawKeyDown() {\n        this.drawKeyDown$$ = fromEvent(document, 'keydown').subscribe((event) => {\n            if (event.key !== 'Control') {\n                return;\n            }\n            this.unsubscribeToDrawKeyDown();\n            const olGeometry = this.getOlGeometry();\n            if (!olGeometry || !(olGeometry instanceof OlPolygon)) {\n                return;\n            }\n            this.subscribeToDrawKeyUp();\n            this.deactivateModifyInteraction();\n            this.deactivateTranslateInteraction();\n            this.activateDrawInteraction();\n        });\n    }\n    /**\n     * Subscribe to CTRL key up to deactivate the draw control\n     */\n    subscribeToDrawKeyUp() {\n        this.drawKeyUp$$ = fromEvent(document, 'keyup').subscribe((event) => {\n            if (event.key !== 'Control') {\n                return;\n            }\n            this.unsubscribeToDrawKeyUp();\n            this.unsubscribeToKeyDown();\n            this.deactivateDrawInteraction();\n            this.activateModifyInteraction();\n            if (this.translate === true) {\n                this.activateTranslateInteraction();\n            }\n            this.subscribeToDrawKeyDown();\n            this.olOuterGeometry = undefined;\n            this.clearOlLinearRingsSource();\n            this.end$.next(this.getOlGeometry());\n        });\n    }\n    /**\n     * Unsubscribe to draw key down\n     */\n    unsubscribeToDrawKeyDown() {\n        if (this.drawKeyDown$$ !== undefined) {\n            this.drawKeyDown$$.unsubscribe();\n        }\n    }\n    /**\n     * Unsubscribe to key up\n     */\n    unsubscribeToDrawKeyUp() {\n        if (this.drawKeyUp$$ !== undefined) {\n            this.drawKeyUp$$.unsubscribe();\n        }\n    }\n    /**\n     * Remove the draw interaction\n     */\n    removeOlDrawInteraction() {\n        if (this.olDrawInteraction === undefined) {\n            return;\n        }\n        this.unsubscribeToKeyDown();\n        this.unsubscribeToDrawKeyUp();\n        this.unsubscribeToDrawKeyDown();\n        this.deactivateDrawInteraction();\n        this.clearOlLinearRingsSource();\n        this.olDrawInteraction = undefined;\n    }\n    /**\n     * Activate the draw interaction\n     */\n    activateDrawInteraction() {\n        if (this.olDrawInteractionIsActive === true) {\n            return;\n        }\n        this.clearOlLinearRingsSource();\n        this.addOlLinearRingsLayer();\n        this.olMap.getInteractions().forEach((olInteraction) => {\n            if (olInteraction instanceof OlDragBoxInteraction) {\n                this.olMap.removeInteraction(olInteraction);\n                this.removedOlInteractions.push(olInteraction);\n            }\n        });\n        this.olDrawInteractionIsActive = true;\n        this.onDrawStartKey = this.olDrawInteraction.on('drawstart', (event) => this.onDrawStart(event));\n        this.onDrawEndKey = this.olDrawInteraction.on('drawend', (event) => this.onDrawEnd(event));\n        this.olMap.addInteraction(this.olDrawInteraction);\n    }\n    /**\n     * Deactivate the draw interaction\n     */\n    deactivateDrawInteraction() {\n        if (this.olDrawInteractionIsActive === false) {\n            return;\n        }\n        this.removeOlLinearRingsLayer();\n        this.removedOlInteractions.forEach((olInteraction) => {\n            this.olMap.addInteraction(olInteraction);\n        });\n        this.removedOlInteractions = [];\n        this.olDrawInteractionIsActive = false;\n        unByKey([this.onDrawStartKey, this.onDrawEndKey, this.onDrawKey]);\n        if (this.olMap !== undefined) {\n            this.olMap.removeInteraction(this.olDrawInteraction);\n        }\n    }\n    /**\n     * When draw start, add a new linerar ring to the geometry and start watching for changes\n     * @param event Draw start event\n     */\n    onDrawStart(event) {\n        const olGeometry = event.feature.getGeometry();\n        this.olOuterGeometry = this.getOlGeometry().clone();\n        const linearRingCoordinates = olGeometry.getLinearRing().getCoordinates();\n        this.addLinearRingToOlGeometry(linearRingCoordinates);\n        this.start$.next(this.getOlGeometry());\n        this.onDrawKey = olGeometry.on('change', (olGeometryEvent) => {\n            this.mousePosition = getMousePositionFromOlGeometryEvent(olGeometryEvent);\n            const _linearRingCoordinates = olGeometryEvent.target\n                .getLinearRing()\n                .getCoordinates();\n            this.updateLinearRingOfOlGeometry(_linearRingCoordinates);\n            this.changes$.next(this.getOlGeometry());\n        });\n        this.subscribeToKeyDown();\n    }\n    /**\n     * When translation ends, update the geometry observable and stop watchign for changes\n     * @param event Draw end event\n     */\n    onDrawEnd(event) {\n        unByKey(this.onDrawKey);\n        this.olOuterGeometry = undefined;\n        const linearRingCoordinates = event.feature\n            .getGeometry()\n            .getLinearRing()\n            .getCoordinates();\n        this.updateLinearRingOfOlGeometry(linearRingCoordinates);\n        this.clearOlLinearRingsSource();\n        this.end$.next(this.getOlGeometry());\n        this.unsubscribeToKeyDown();\n    }\n    /**\n     * Add a linear ring to the geometry being modified\n     * @param coordinates Linear ring coordinates\n     */\n    addLinearRingToOlGeometry(coordinates) {\n        const olGeometry = this.getOlGeometry();\n        const olLinearRing = new OlLinearRing(coordinates);\n        addLinearRingToOlPolygon(olGeometry, olLinearRing);\n    }\n    /**\n     * Update the last linear ring of the geometry being modified\n     * @param coordinates Linear ring coordinates\n     */\n    updateLinearRingOfOlGeometry(coordinates) {\n        const olGeometry = this.getOlGeometry();\n        // Remove the last linear ring (the one we are updating)\n        const olLinearRings = olGeometry.getLinearRings().slice(0, -1);\n        const newCoordinates = olLinearRings.map((olLinearRing) => {\n            return olLinearRing.getCoordinates();\n        });\n        newCoordinates.push(coordinates);\n        olGeometry.setCoordinates(newCoordinates);\n    }\n    /**\n     * Get the geometry being modified\n     * @returns OL Geometry\n     */\n    getOlGeometry() {\n        const olFeatures = this.olOverlaySource.getFeatures();\n        return olFeatures.length > 0 ? olFeatures[0].getGeometry() : undefined;\n    }\n}\n\n/**\n * Control to modify geometries\n */\nclass SliceControl {\n    constructor(options) {\n        this.options = options;\n        /**\n         * Slice end observable\n         */\n        this.end$ = new Subject();\n        /**\n         * Slice error, if any\n         */\n        this.error$ = new Subject();\n        if (options.layer !== undefined) {\n            this.olOverlayLayer = options.layer;\n        }\n        else {\n            this.olOverlayLayer = this.createOlInnerOverlayLayer();\n        }\n    }\n    /**\n     * Wheter the control is active\n     */\n    get active() {\n        return this.olMap !== undefined;\n    }\n    /**\n     * OL overlay source\n     * @internal\n     */\n    get olOverlaySource() {\n        return this.olOverlayLayer.getSource();\n    }\n    /**\n     * Add or remove this control to/from a map.\n     * @param map OL Map\n     */\n    setOlMap(olMap) {\n        if (olMap === undefined) {\n            this.clearOlInnerOverlaySource();\n            this.removeOlInnerOverlayLayer();\n            this.removeDrawLineControl();\n            this.olMap = olMap;\n            return;\n        }\n        this.olMap = olMap;\n        this.addOlInnerOverlayLayer();\n        this.addDrawLineControl();\n    }\n    /**\n     * Return the overlay source\n     */\n    getSource() {\n        return this.olOverlaySource;\n    }\n    /**\n     * Add an OL geometry to the overlay for slicing\n     * @param olGeometry Ol Geometry\n     */\n    setOlGeometry(olGeometry) {\n        const olFeature$1 = new olFeature({ geometry: olGeometry });\n        this.olOverlaySource.clear(true);\n        this.olOverlaySource.addFeature(olFeature$1);\n    }\n    /**\n     * Create an overlay source if none is defined in the options\n     */\n    createOlInnerOverlayLayer() {\n        return new OlVectorLayer({\n            source: this.options.source ? this.options.source : new OlVectorSource(),\n            style: this.options.layerStyle,\n            zIndex: 500\n        });\n    }\n    /**\n     * Clear the overlay layer if it wasn't defined in the options\n     */\n    removeOlInnerOverlayLayer() {\n        if (this.options.layer === undefined && this.olMap !== undefined) {\n            this.olMap.removeLayer(this.olOverlayLayer);\n        }\n    }\n    /**\n     * Add the overlay layer if it wasn't defined in the options\n     */\n    addOlInnerOverlayLayer() {\n        if (this.options.layer === undefined) {\n            this.olMap.addLayer(this.olOverlayLayer);\n        }\n    }\n    /**\n     * Clear the overlay source if it wasn't defined in the options\n     */\n    clearOlInnerOverlaySource() {\n        if (this.options.layer === undefined && this.options.source === undefined) {\n            this.olOverlaySource.clear(true);\n        }\n    }\n    /**\n     * Create a draw line control and add it to the map\n     */\n    addDrawLineControl() {\n        this.drawLineControl = new DrawControl({\n            geometryType: 'LineString',\n            drawStyle: this.options.drawStyle,\n            maxPoints: 2\n        });\n        this.drawLineStart$$ = this.drawLineControl.start$\n            .subscribe((olLine) => this.onDrawLineStart(olLine));\n        this.drawLineEnd$$ = this.drawLineControl.end$\n            .subscribe((olLine) => this.onDrawLineEnd(olLine));\n        this.drawLineControl.setOlMap(this.olMap);\n    }\n    /**\n     * Remove draw line control\n     */\n    removeDrawLineControl() {\n        if (this.drawLineControl === undefined) {\n            return;\n        }\n        this.drawLineStart$$.unsubscribe();\n        this.drawLineEnd$$.unsubscribe();\n        this.drawLineControl.getSource().clear(true);\n        this.drawLineControl.setOlMap(undefined);\n    }\n    /**\n     * Clear the draw source and track the geometry being draw\n     * @param olLine Ol linestring or polygon\n     */\n    onDrawLineStart(olLine) {\n        this.drawLineControl.getSource().clear(true);\n    }\n    /**\n     * Slice the first geometry encountered with the drawn line\n     * @param olLine Ol linestring\n     */\n    onDrawLineEnd(olLine) {\n        const olSlicedGeometries = [];\n        const lineExtent = olLine.getExtent();\n        const olFeaturesToRemove = [];\n        try {\n            this.olOverlaySource.forEachFeatureInExtent(lineExtent, (olFeature) => {\n                const olGeometry = olFeature.getGeometry();\n                const olParts = sliceOlGeometry(olGeometry, olLine);\n                if (olParts.length > 0) {\n                    olSlicedGeometries.push(...olParts);\n                    olFeaturesToRemove.push(olFeature);\n                }\n            });\n        }\n        catch (e) {\n            if (e instanceof GeometrySliceError) {\n                this.error$.next(e);\n                return;\n            }\n            else {\n                throw e;\n            }\n        }\n        this.drawLineControl.getSource().clear(true);\n        this.olOverlaySource.addFeatures(olSlicedGeometries.map((olGeometry) => new olFeature(olGeometry)));\n        olFeaturesToRemove.forEach((olFeature) => {\n            this.olOverlaySource.removeFeature(olFeature);\n        });\n        this.error$.next(undefined);\n        this.end$.next(olSlicedGeometries);\n    }\n}\n\nvar LayerListToolControlsEnum;\n(function (LayerListToolControlsEnum) {\n    LayerListToolControlsEnum[\"always\"] = \"always\";\n    LayerListToolControlsEnum[\"never\"] = \"never\";\n    LayerListToolControlsEnum[\"default\"] = \"default\";\n})(LayerListToolControlsEnum || (LayerListToolControlsEnum = {}));\n\nclass MeasurerDialogComponent {\n    constructor(dialogRef, data) {\n        this.dialogRef = dialogRef;\n        this.data = data;\n        this.measureAreaUnit = MeasureAreaUnit;\n        this.measureLengthUnit = MeasureLengthUnit;\n    }\n    onNoClick() {\n        this.dialogRef.close();\n    }\n}\nMeasurerDialogComponent.ɵfac = function MeasurerDialogComponent_Factory(t) { return new (t || MeasurerDialogComponent)(ɵɵdirectiveInject(MatDialogRef), ɵɵdirectiveInject(MAT_DIALOG_DATA)); };\nMeasurerDialogComponent.ɵcmp = ɵɵdefineComponent({ type: MeasurerDialogComponent, selectors: [[\"igo-measurer-dialog\"]], decls: 88, vars: 79, consts: [[\"mat-dialog-content\", \"\"], [\"colspan\", \"2\"]], template: function MeasurerDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵelementStart(1, \"h3\");\n        ɵɵtext(2);\n        ɵɵpipe(3, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(4, \"table\");\n        ɵɵelementStart(5, \"thead\");\n        ɵɵelementStart(6, \"tr\");\n        ɵɵelementStart(7, \"th\", 1);\n        ɵɵtext(8);\n        ɵɵpipe(9, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(10, \"tbody\");\n        ɵɵelementStart(11, \"tr\");\n        ɵɵelementStart(12, \"td\");\n        ɵɵtext(13);\n        ɵɵpipe(14, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(15, \"td\");\n        ɵɵtext(16);\n        ɵɵpipe(17, \"measureFormat\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(18, \"tr\");\n        ɵɵelementStart(19, \"td\");\n        ɵɵtext(20);\n        ɵɵpipe(21, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(22, \"td\");\n        ɵɵtext(23);\n        ɵɵpipe(24, \"measureFormat\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(25, \"tr\");\n        ɵɵelementStart(26, \"td\");\n        ɵɵtext(27);\n        ɵɵpipe(28, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(29, \"td\");\n        ɵɵtext(30);\n        ɵɵpipe(31, \"measureFormat\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(32, \"tr\");\n        ɵɵelementStart(33, \"td\");\n        ɵɵtext(34);\n        ɵɵpipe(35, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(36, \"td\");\n        ɵɵtext(37);\n        ɵɵpipe(38, \"measureFormat\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(39, \"table\");\n        ɵɵelementStart(40, \"thead\");\n        ɵɵelementStart(41, \"tr\");\n        ɵɵelementStart(42, \"th\", 1);\n        ɵɵtext(43);\n        ɵɵpipe(44, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(45, \"tbody\");\n        ɵɵelementStart(46, \"tr\");\n        ɵɵelementStart(47, \"td\");\n        ɵɵtext(48);\n        ɵɵpipe(49, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(50, \"td\");\n        ɵɵtext(51);\n        ɵɵpipe(52, \"measureFormat\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(53, \"tr\");\n        ɵɵelementStart(54, \"td\");\n        ɵɵtext(55);\n        ɵɵpipe(56, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(57, \"td\");\n        ɵɵtext(58);\n        ɵɵpipe(59, \"measureFormat\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(60, \"tr\");\n        ɵɵelementStart(61, \"td\");\n        ɵɵtext(62);\n        ɵɵpipe(63, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(64, \"td\");\n        ɵɵtext(65);\n        ɵɵpipe(66, \"measureFormat\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(67, \"tr\");\n        ɵɵelementStart(68, \"td\");\n        ɵɵtext(69);\n        ɵɵpipe(70, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(71, \"td\");\n        ɵɵtext(72);\n        ɵɵpipe(73, \"measureFormat\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(74, \"tr\");\n        ɵɵelementStart(75, \"td\");\n        ɵɵtext(76);\n        ɵɵpipe(77, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(78, \"td\");\n        ɵɵtext(79);\n        ɵɵpipe(80, \"measureFormat\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(81, \"tr\");\n        ɵɵelementStart(82, \"td\");\n        ɵɵtext(83);\n        ɵɵpipe(84, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(85, \"td\");\n        ɵɵtext(86);\n        ɵɵpipe(87, \"measureFormat\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(2);\n        ɵɵtextInterpolate(ɵɵpipeBind1(3, 23, \"igo.geo.measure.dialog.title\"));\n        ɵɵadvance(6);\n        ɵɵtextInterpolate(ɵɵpipeBind1(9, 25, \"igo.geo.measure.dialog.length.title\"));\n        ɵɵadvance(5);\n        ɵɵtextInterpolate(ɵɵpipeBind1(14, 27, \"igo.geo.measure.dialog.lengthInMeters\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind2(17, 29, ctx.data.length, ctx.measureLengthUnit.Meters));\n        ɵɵadvance(4);\n        ɵɵtextInterpolate(ɵɵpipeBind1(21, 32, \"igo.geo.measure.dialog.lengthInKilometers\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind2(24, 34, ctx.data.length, ctx.measureLengthUnit.Kilometers));\n        ɵɵadvance(4);\n        ɵɵtextInterpolate(ɵɵpipeBind1(28, 37, \"igo.geo.measure.dialog.lengthInMiles\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind2(31, 39, ctx.data.length, ctx.measureLengthUnit.Miles));\n        ɵɵadvance(4);\n        ɵɵtextInterpolate(ɵɵpipeBind1(35, 42, \"igo.geo.measure.dialog.lengthInFeet\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind2(38, 44, ctx.data.length, ctx.measureLengthUnit.Feet));\n        ɵɵadvance(6);\n        ɵɵtextInterpolate(ɵɵpipeBind1(44, 47, \"igo.geo.measure.dialog.area.title\"));\n        ɵɵadvance(5);\n        ɵɵtextInterpolate(ɵɵpipeBind1(49, 49, \"igo.geo.measure.dialog.areaInSquareMeters\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind2(52, 51, ctx.data.area, ctx.measureAreaUnit.SquareMeters));\n        ɵɵadvance(4);\n        ɵɵtextInterpolate(ɵɵpipeBind1(56, 54, \"igo.geo.measure.dialog.areaInSquareKilometers\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind2(59, 56, ctx.data.area, ctx.measureAreaUnit.SquareKilometers));\n        ɵɵadvance(4);\n        ɵɵtextInterpolate(ɵɵpipeBind1(63, 59, \"igo.geo.measure.dialog.areaInSquareMiles\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind2(66, 61, ctx.data.area, ctx.measureAreaUnit.SquareMiles));\n        ɵɵadvance(4);\n        ɵɵtextInterpolate(ɵɵpipeBind1(70, 64, \"igo.geo.measure.dialog.areaInAcres\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind2(73, 66, ctx.data.area, ctx.measureAreaUnit.Acres));\n        ɵɵadvance(4);\n        ɵɵtextInterpolate(ɵɵpipeBind1(77, 69, \"igo.geo.measure.dialog.areaInHectares\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind2(80, 71, ctx.data.area, ctx.measureAreaUnit.Hectares));\n        ɵɵadvance(4);\n        ɵɵtextInterpolate(ɵɵpipeBind1(84, 74, \"igo.geo.measure.dialog.perimeterInMeters\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind2(87, 76, ctx.data.perimeter, ctx.measureLengthUnit.Meters));\n    } }, styles: [\"[_nghost-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}h3[_ngcontent-%COMP%]{margin:0;text-align:center}table[_ngcontent-%COMP%]{padding:10px;width:100%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:10px}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MeasurerDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-measurer-dialog',\n                templateUrl: 'measurer-dialog.component.html',\n                styleUrls: ['./measurer-dialog.component.scss']\n            }]\n    }], function () { return [{ type: MatDialogRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [MAT_DIALOG_DATA]\n            }] }]; }, null); })();\n\nconst _c0$9 = [\"table\"];\nfunction MeasurerComponent_ng_container_27_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵɵgetCurrentView();\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"igo-measurer-item\", 13);\n    ɵɵlistener(\"measureUnitChange\", function MeasurerComponent_ng_container_27_Template_igo_measurer_item_measureUnitChange_1_listener($event) { ɵɵrestoreView(_r4); const ctx_r3 = ɵɵnextContext(); return ctx_r3.onLengthUnitChange($event); });\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(3, \"igo-measurer-item\", 13);\n    ɵɵlistener(\"measureUnitChange\", function MeasurerComponent_ng_container_27_Template_igo_measurer_item_measureUnitChange_3_listener($event) { ɵɵrestoreView(_r4); const ctx_r5 = ɵɵnextContext(); return ctx_r5.onAreaUnitChange($event); });\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const measure_r2 = ctx.ngIf;\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"measureType\", ctx_r0.measureType.Length)(\"measureUnit\", ctx_r0.measureLengthUnit.Meters)(\"measure\", measure_r2.length)(\"auto\", ctx_r0.measureUnitsAuto)(\"placeholder\", ɵɵpipeBind1(2, 10, ctx_r0.activeMeasureType === ctx_r0.measureType.Area ? \"igo.geo.measure.perimeter\" : \"igo.geo.measure.length\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"measureType\", ctx_r0.measureType.Area)(\"measureUnit\", ctx_r0.measureAreaUnit.SquareMeters)(\"measure\", measure_r2.area)(\"auto\", ctx_r0.measureUnitsAuto)(\"placeholder\", ɵɵpipeBind1(4, 12, \"igo.geo.measure.area\"));\n} }\n/**\n * Tool to measure lengths and areas\n */\nclass MeasurerComponent {\n    constructor(languageService, dialog, storageService) {\n        this.languageService = languageService;\n        this.dialog = dialog;\n        this.storageService = storageService;\n        /**\n         * Table template\n         * @internal\n         */\n        this.tableTemplate = {\n            selection: true,\n            selectMany: true,\n            selectionCheckbox: true,\n            sort: true,\n            columns: [\n                {\n                    name: 'length',\n                    title: this.languageService.translate.instant('igo.geo.measure.lengthHeader'),\n                    valueAccessor: (localFeature) => {\n                        const unit = this.activeLengthUnit;\n                        const measure = metersToUnit(localFeature.properties.measure.length, unit);\n                        return formatMeasure(measure, {\n                            decimal: 1,\n                            unit,\n                            unitAbbr: false,\n                            locale: 'fr'\n                        });\n                    }\n                },\n                {\n                    name: 'area',\n                    title: this.languageService.translate.instant('igo.geo.measure.areaHeader'),\n                    valueAccessor: (localFeature) => {\n                        const unit = this.activeAreaUnit;\n                        const measure = squareMetersToUnit(localFeature.properties.measure.area, unit);\n                        return measure ? formatMeasure(measure, {\n                            decimal: 1,\n                            unit,\n                            unitAbbr: false,\n                            locale: 'fr'\n                        }) : '';\n                    }\n                }\n            ]\n        };\n        /**\n         * Reference to the MeasureType enum\n         * @internal\n         */\n        this.measureType = MeasureType;\n        /**\n         * Reference to the AreaMeasureUnit enum\n         * @internal\n         */\n        this.measureAreaUnit = MeasureAreaUnit;\n        /**\n         * Reference to the LengthMeasureUnit enum\n         * @internal\n         */\n        this.measureLengthUnit = MeasureLengthUnit;\n        /**\n         * Whether measure units should be automatically determined\n         * @internal\n         */\n        this.measureUnitsAuto = false;\n        /**\n         * Whether display of distances of areas\n         * @internal\n         */\n        this.displayDistance = true;\n        /**\n         * Whether display of distances of lines\n         * @internal\n         */\n        this.displayLines = true;\n        /**\n         * Whether display of areas\n         * @internal\n         */\n        this.displayAreas = true;\n        /**\n         * Observable of area boolean\n         * @internal\n         */\n        this.hasArea$ = new BehaviorSubject(false);\n        /**\n         * Observable of area\n         * @internal\n         */\n        this.measure$ = new BehaviorSubject({});\n        /**\n         * Observable of selected features\n         * @internal\n         */\n        this.selectedFeatures$ = new BehaviorSubject([]);\n        /**\n         * OL draw source\n         * @internal\n         */\n        this.showTooltips = true;\n        /**\n         * Active mlength unit\n         */\n        this.activeLengthUnit = MeasureLengthUnit.Meters;\n        /**\n         * Active area unit\n         */\n        this.activeAreaUnit = MeasureAreaUnit.SquareMeters;\n        /**\n         * OL draw source\n         */\n        this.olDrawSource = new OlVectorSource();\n        this._activeMeasureType = MeasureType.Length;\n        /**\n         * The minimum length a segment must have to display a tooltip.\n         * It also applies to area tooltips.\n         */\n        this.minSegmentLength = 10;\n    }\n    /**\n     * Measure type\n     * @internal\n     */\n    set activeMeasureType(value) { this.setActiveMeasureType(value); }\n    get activeMeasureType() { return this._activeMeasureType; }\n    /**\n     * Wheter one of the draw control is active\n     * @internal\n     */\n    get drawControlIsActive() {\n        return this.activeDrawControl !== undefined;\n    }\n    get projection() {\n        return this.map.ol.getView().getProjection();\n    }\n    /**\n     * Add draw controls and activate one\n     * @internal\n     */\n    ngOnInit() {\n        this.initStore();\n        this.createDrawLineControl();\n        this.createDrawPolygonControl();\n        this.createModifyControl();\n        this.toggleDrawControl();\n        this.updateTooltipsOfOlSource(this.store.source.ol);\n        this.checkDistanceAreaToggle();\n    }\n    /**\n     * Clear the overlay layer and any interaction added by this component.\n     * @internal\n     */\n    ngOnDestroy() {\n        this.setActiveMeasureType(undefined);\n        this.deactivateModifyControl();\n        this.freezeStore();\n    }\n    /**\n     * Set the measure type\n     * @internal\n     */\n    onMeasureTypeChange(measureType) {\n        this.activeMeasureType = measureType;\n    }\n    /**\n     * Activate or deactivate the current draw control\n     * @internal\n     */\n    onToggleDrawControl(toggle) {\n        if (toggle === true) {\n            this.toggleDrawControl();\n        }\n        else {\n            this.deactivateDrawControl();\n        }\n    }\n    /**\n     * Activate or deactivate the current draw control\n     * @internal\n     */\n    onToggleMeasureUnitsAuto(toggle) {\n        this.measureUnitsAuto = toggle;\n    }\n    /**\n     * Activate or deactivate the current display of distances of the areas\n     * @internal\n     */\n    onToggleDisplayDistance(toggle) {\n        this.displayDistance = toggle;\n        this.onDisplayDistance();\n        toggle ? (this.storageService.set('distanceToggle', true, StorageScope.SESSION)) :\n            (this.storageService.set('distanceToggle', false, StorageScope.SESSION));\n    }\n    /**\n     * Activate or deactivate the current display of distances of the lines\n     * @internal\n     */\n    onToggleDisplayLines(toggle) {\n        this.displayLines = toggle;\n        this.onDisplayLines();\n        toggle ? (this.storageService.set('linesToggle', true, StorageScope.SESSION)) :\n            (this.storageService.set('linesToggle', false, StorageScope.SESSION));\n    }\n    /**\n     * Activate or deactivate the current display of areas\n     * @internal\n     */\n    onToggleDisplayAreas(toggle) {\n        this.displayAreas = toggle;\n        this.onDisplayAreas();\n        toggle ? (this.storageService.set('areasToggle', true, StorageScope.SESSION)) :\n            (this.storageService.set('areasToggle', false, StorageScope.SESSION));\n    }\n    /**\n     * Set display parametres in current values\n     * @internal\n     */\n    checkDistanceAreaToggle() {\n        if (this.storageService.get('distanceToggle') === false) {\n            this.displayDistance = false;\n        }\n        if (this.storageService.get('linesToggle') === false) {\n            this.displayLines = false;\n        }\n        if (this.storageService.get('areasToggle') === false) {\n            this.displayAreas = false;\n        }\n    }\n    /**\n     * Activate or deactivate the current display of distances of areas\n     * @internal\n     */\n    onDisplayDistance() {\n        if (this.displayDistance) {\n            Array.from(document.getElementsByClassName('igo-map-tooltip-measure-polygone-segments')).map((value) => value.classList.remove('igo-map-tooltip-hidden'));\n        }\n        else {\n            Array.from(document.getElementsByClassName('igo-map-tooltip-measure-polygone-segments')).map((value) => value.classList.add('igo-map-tooltip-hidden'));\n        }\n    }\n    /**\n     * Activate or deactivate the current display of distances of lines\n     * @internal\n     */\n    onDisplayLines() {\n        if (this.displayLines) {\n            Array.from(document.getElementsByClassName('igo-map-tooltip-measure-line-segments')).map((value) => value.classList.remove('igo-map-tooltip-hidden'));\n        }\n        else {\n            Array.from(document.getElementsByClassName('igo-map-tooltip-measure-line-segments')).map((value) => value.classList.add('igo-map-tooltip-hidden'));\n        }\n    }\n    /**\n     * Activate or deactivate the current display of areas\n     * @internal\n     */\n    onDisplayAreas() {\n        if (this.displayAreas) {\n            Array.from(document.getElementsByClassName('igo-map-tooltip-measure-area')).map((value) => value.classList.remove('igo-map-tooltip-hidden'));\n        }\n        else {\n            Array.from(document.getElementsByClassName('igo-map-tooltip-measure-area')).map((value) => value.classList.add('igo-map-tooltip-hidden'));\n        }\n    }\n    /**\n     * Set the measure type\n     * @internal\n     */\n    onLengthUnitChange(unit) {\n        this.activeLengthUnit = unit;\n        this.table.refresh();\n        this.updateTooltipsOfOlSource(this.store.source.ol);\n        if (this.activeOlGeometry !== undefined) {\n            this.updateTooltipsOfOlGeometry(this.activeOlGeometry);\n        }\n    }\n    /**\n     * Set the measure type\n     * @internal\n     */\n    onAreaUnitChange(unit) {\n        this.activeAreaUnit = unit;\n        this.table.refresh();\n        this.updateTooltipsOfOlSource(this.store.source.ol);\n        if (this.activeOlGeometry !== undefined) {\n            this.updateTooltipsOfOlGeometry(this.activeOlGeometry);\n        }\n    }\n    onCalculateClick() {\n        const features = this.selectedFeatures$.value;\n        const area = features.reduce((sum, localFeature) => {\n            return sum + localFeature.properties.measure.area || 0;\n        }, 0);\n        const length = features.reduce((sum, localFeature) => {\n            if (localFeature.geometry.type === 'Polygon') {\n                return sum;\n            }\n            return sum + localFeature.properties.measure.length || 0;\n        }, 0);\n        const perimeter = features.reduce((sum, localFeature) => {\n            if (localFeature.geometry.type === 'LineString') {\n                return sum;\n            }\n            return sum + localFeature.properties.measure.length || 0;\n        }, 0);\n        this.openDialog({\n            area,\n            length,\n            perimeter\n        });\n    }\n    onDeleteClick() {\n        this.store.deleteMany(this.selectedFeatures$.value);\n    }\n    onModifyClick() {\n        if (this.selectedFeatures$.value.length !== 1) {\n            return;\n        }\n        if (this.modifyControl.active === true) {\n            this.deactivateModifyControl();\n            this.toggleDrawControl();\n        }\n        else {\n            const localFeature = this.selectedFeatures$.value[0];\n            const olFeatures = this.store.layer.ol.getSource().getFeatures();\n            const olFeature = olFeatures.find((_olFeature) => {\n                return _olFeature.get('id') === localFeature.properties.id;\n            });\n            if (olFeature !== undefined) {\n                this.deactivateDrawControl();\n                this.activateModifyControl();\n                const olGeometry = olFeature.getGeometry();\n                this.clearTooltipsOfOlGeometry(olGeometry);\n                this.modifyControl.setOlGeometry(olGeometry);\n            }\n        }\n    }\n    openDialog(data) {\n        this.dialog.open(MeasurerDialogComponent, { data });\n    }\n    /**\n     * Initialize the measure store and set up some listeners\n     * @internal\n     */\n    initStore() {\n        const store = this.store;\n        const layer = new VectorLayer({\n            title: this.languageService.translate.instant('igo.geo.measure.layerTitle'),\n            id: `igo-measures-${uuid()}`,\n            zIndex: 200,\n            source: new FeatureDataSource(),\n            style: createMeasureLayerStyle(),\n            showInLayerList: true,\n            exportable: false,\n            browsable: false,\n            workspace: { enabled: false }\n        });\n        tryBindStoreLayer(store, layer);\n        layer.visible$.subscribe(visible => {\n            if (visible) {\n                Array.from(document.getElementsByClassName('igo-map-tooltip-measure')).map((value) => value.classList.remove('igo-map-tooltip-measure-by-display'));\n            }\n            else {\n                Array.from(document.getElementsByClassName('igo-map-tooltip-measure')).map((value) => value.classList.add('igo-map-tooltip-measure-by-display'));\n            }\n        });\n        tryAddLoadingStrategy(store);\n        tryAddSelectionStrategy(store, new FeatureStoreSelectionStrategy({\n            map: this.map,\n            many: true\n        }));\n        this.onFeatureAddedKey = store.source.ol.on('addfeature', (event) => {\n            const localFeature = event.feature;\n            const olGeometry = localFeature.getGeometry();\n            this.updateMeasureOfOlGeometry(olGeometry, localFeature.get('measure'));\n            this.onDisplayDistance();\n        });\n        this.onFeatureRemovedKey = store.source.ol.on('removefeature', (event) => {\n            const olGeometry = event.feature.getGeometry();\n            this.clearTooltipsOfOlGeometry(olGeometry);\n        });\n        this.selectedFeatures$$ = store.stateView.manyBy$((record) => {\n            return record.state.selected === true;\n        }).pipe(skip(1) // Skip initial emission\n        )\n            .subscribe((records) => {\n            if (this.modifyControl.active === true) {\n                this.deactivateModifyControl();\n            }\n            this.selectedFeatures$.next(records.map(record => record.entity));\n        });\n        this.store.entities$.subscribe(objectsExists => {\n            if (objectsExists.find(objectExist => objectExist.geometry.type === 'Polygon')) {\n                this.hasArea$.next(true);\n            }\n            else {\n                this.hasArea$.next(false);\n            }\n        });\n    }\n    /**\n     * Freeze any store, meaning the layer is removed, strategies are deactivated\n     * and some listener removed\n     * @internal\n     */\n    freezeStore() {\n        const store = this.store;\n        this.selectedFeatures$$.unsubscribe();\n        unByKey(this.onFeatureAddedKey);\n        unByKey(this.onFeatureRemovedKey);\n        store.deactivateStrategyOfType(FeatureStoreLoadingStrategy);\n        store.deactivateStrategyOfType(FeatureStoreSelectionStrategy);\n    }\n    /**\n     * Create a draw line control\n     */\n    createDrawLineControl() {\n        this.drawLineControl = new DrawControl({\n            geometryType: 'LineString',\n            source: this.olDrawSource,\n            drawStyle: createMeasureInteractionStyle(),\n            layerStyle: new OlStyle({})\n        });\n    }\n    /**\n     * Create a draw polygon control\n     */\n    createDrawPolygonControl() {\n        this.drawPolygonControl = new DrawControl({\n            geometryType: 'Polygon',\n            source: this.olDrawSource,\n            drawStyle: createMeasureInteractionStyle(),\n            layerStyle: new OlStyle({})\n        });\n    }\n    /**\n     * Create a draw polygon control\n     */\n    createModifyControl() {\n        this.modifyControl = new ModifyControl({\n            source: this.olDrawSource,\n            drawStyle: createMeasureInteractionStyle(),\n            layerStyle: new OlStyle({})\n        });\n    }\n    /**\n     * Activate the right control\n     */\n    toggleDrawControl() {\n        this.deactivateDrawControl();\n        // this.deactivateModifyControl();\n        if (this.activeMeasureType === MeasureType.Length) {\n            this.activateDrawControl(this.drawLineControl);\n        }\n        else if (this.activeMeasureType === MeasureType.Area) {\n            this.activateDrawControl(this.drawPolygonControl);\n        }\n    }\n    /**\n     * Activate a given control\n     * @param drawControl Draw control\n     */\n    activateDrawControl(drawControl) {\n        this.activeDrawControl = drawControl;\n        this.drawStart$$ = drawControl.start$\n            .subscribe((olGeometry) => this.onDrawStart(olGeometry));\n        this.drawEnd$$ = drawControl.end$\n            .subscribe((olGeometry) => this.onDrawEnd(olGeometry));\n        this.drawChanges$$ = drawControl.changes$\n            .subscribe((olGeometry) => this.onDrawChanges(olGeometry));\n        drawControl.setOlMap(this.map.ol);\n    }\n    /**\n     * Deactivate the active draw control\n     */\n    deactivateDrawControl() {\n        if (this.activeDrawControl === undefined) {\n            return;\n        }\n        this.olDrawSource.clear();\n        if (this.drawStart$$ !== undefined) {\n            this.drawStart$$.unsubscribe();\n        }\n        if (this.drawEnd$$ !== undefined) {\n            this.drawEnd$$.unsubscribe();\n        }\n        if (this.drawChanges$$ !== undefined) {\n            this.drawChanges$$.unsubscribe();\n        }\n        this.clearTooltipsOfOlSource(this.olDrawSource);\n        if (this.activeOlGeometry !== undefined) {\n            this.clearTooltipsOfOlGeometry(this.activeOlGeometry);\n        }\n        this.activeDrawControl.setOlMap(undefined);\n        this.activeDrawControl = undefined;\n        this.activeOlGeometry = undefined;\n    }\n    setActiveMeasureType(measureType) {\n        this._activeMeasureType = measureType;\n        this.clearMeasures();\n        this.toggleDrawControl();\n    }\n    /**\n     * Clear the draw source and track the geometry being drawn\n     * @param olGeometry Ol linestring or polygon\n     */\n    onDrawStart(olGeometry) {\n        this.activeOlGeometry = olGeometry;\n    }\n    /**\n     * Clear the draw source and track the geometry being draw\n     * @param olGeometry Ol linestring or polygon\n     */\n    onDrawEnd(olGeometry) {\n        this.activeOlGeometry = undefined;\n        this.finalizeMeasureOfOlGeometry(olGeometry);\n        this.addFeatureToStore(olGeometry);\n        this.clearTooltipsOfOlGeometry(olGeometry);\n        this.olDrawSource.clear(true);\n    }\n    /**\n     * Update measures observables and map tooltips\n     * @param olGeometry Ol linestring or polygon\n     */\n    onDrawChanges(olGeometry) {\n        const measure = measureOlGeometry(olGeometry, this.projection);\n        this.updateMeasureOfOlGeometry(olGeometry, Object.assign({}, measure, {\n            area: undefined // We don't want to display an area tooltip while drawing.\n        }));\n        this.measure$.next(measure);\n    }\n    /**\n     * Activate a given control\n     * @param modifyControl Modify control\n     */\n    activateModifyControl() {\n        const selection = this.store.getStrategyOfType(FeatureStoreSelectionStrategy);\n        selection.deactivate();\n        selection.clear();\n        this.modifyStart$$ = this.modifyControl.start$\n            .subscribe((olGeometry) => this.onModifyStart(olGeometry));\n        this.modifyEnd$$ = this.modifyControl.end$\n            .subscribe((olGeometry) => this.onModifyEnd(olGeometry));\n        this.modifyChanges$$ = this.modifyControl.changes$\n            .subscribe((olGeometry) => this.onModifyChanges(olGeometry));\n        this.modifyControl.setOlMap(this.map.ol);\n    }\n    /**\n     * Deactivate the active modify control\n     */\n    deactivateModifyControl() {\n        if (this.modifyStart$$ !== undefined) {\n            this.modifyStart$$.unsubscribe();\n        }\n        if (this.modifyEnd$$ !== undefined) {\n            this.modifyEnd$$.unsubscribe();\n        }\n        if (this.modifyChanges$$ !== undefined) {\n            this.modifyChanges$$.unsubscribe();\n        }\n        if (this.activeOlGeometry !== undefined) {\n            if (this.selectedFeatures$.value.length === 1) {\n                const localFeature = this.selectedFeatures$.value[0];\n                this.addFeatureToStore(this.activeOlGeometry, localFeature);\n            }\n            this.finalizeMeasureOfOlGeometry(this.activeOlGeometry);\n        }\n        this.olDrawSource.clear();\n        this.store.activateStrategyOfType(FeatureStoreSelectionStrategy);\n        this.activeOlGeometry = undefined;\n        this.modifyControl.setOlMap(undefined);\n    }\n    /**\n     * Clear the draw source and track the geometry being drawn\n     * @param olGeometry Ol linestring or polygon\n     */\n    onModifyStart(olGeometry) {\n        this.onDrawStart(olGeometry);\n    }\n    /**\n     * Update measures observables and map tooltips\n     * @param olGeometry Ol linestring or polygon\n     */\n    onModifyChanges(olGeometry) {\n        this.onDrawChanges(olGeometry);\n    }\n    /**\n     * Clear the draw source and track the geometry being draw\n     * @param olGeometry Ol linestring or polygon\n     */\n    onModifyEnd(olGeometry) {\n        this.finalizeMeasureOfOlGeometry(olGeometry);\n    }\n    finalizeMeasureOfOlGeometry(olGeometry) {\n        const measure = measureOlGeometry(olGeometry, this.projection);\n        this.updateMeasureOfOlGeometry(olGeometry, measure);\n    }\n    /**\n     * Update measures observables\n     * @param olGeometry Ol linestring or polygon\n     * @param measure Measure\n     */\n    updateMeasureOfOlGeometry(olGeometry, measure) {\n        olGeometry.setProperties({ _measure: measure }, true);\n        this.updateTooltipsOfOlGeometry(olGeometry);\n    }\n    /**\n     * Clear the measures observables\n     */\n    clearMeasures() {\n        this.measure$.next({});\n    }\n    /**\n     * Add a feature with measures to the store. The loading stragegy of the store\n     * will trigger and add the feature to the map.\n     * @internal\n     */\n    addFeatureToStore(olGeometry, localFeature) {\n        const featureId = localFeature ? localFeature.properties.id : uuid();\n        const projection = this.map.ol.getView().getProjection();\n        const geometry = new OlGeoJSON().writeGeometryObject(olGeometry, {\n            featureProjection: projection,\n            dataProjection: projection\n        });\n        this.store.update({\n            type: FEATURE,\n            geometry,\n            projection: projection.getCode(),\n            properties: {\n                id: featureId,\n                measure: olGeometry.get('_measure')\n            },\n            meta: {\n                id: featureId\n            }\n        });\n    }\n    /**\n     * Update all the tooltips of an OL geometry\n     * @param olGeometry OL Geometry\n     * @param lengths Lengths of the OL geometry's segments\n     * @param measureUnit Display tooltip measure in those units\n     */\n    updateTooltipsOfOlGeometry(olGeometry) {\n        const measure = olGeometry.get('_measure');\n        const lengths = measure.lengths;\n        const area = measure.area;\n        const olMidpointsTooltips = updateOlTooltipsAtMidpoints(olGeometry);\n        if (lengths.length === olMidpointsTooltips.length) {\n            for (let i = 0; i < olMidpointsTooltips.length; i++) {\n                const length = lengths[i];\n                if (length !== undefined) {\n                    this.updateOlTooltip(olMidpointsTooltips[i], metersToUnit(length, this.activeLengthUnit), this.activeLengthUnit, MeasureType.Length);\n                }\n            }\n        }\n        if (area !== undefined) {\n            this.updateOlTooltip(updateOlTooltipAtCenter(olGeometry), squareMetersToUnit(area, this.activeAreaUnit), this.activeAreaUnit, MeasureType.Area);\n        }\n    }\n    /**\n     * Show the map tooltips of a geoemtry\n     */\n    showTooltipsOfOlGeometry(olGeometry) {\n        getTooltipsOfOlGeometry(olGeometry).forEach((olTooltip) => {\n            if (this.shouldShowTooltip(olTooltip)) {\n                this.map.ol.addOverlay(olTooltip);\n            }\n        });\n    }\n    /**\n     * Clear the tooltips of an OL geometrys\n     * @param olGeometry OL geometry with tooltips\n     */\n    clearTooltipsOfOlGeometry(olGeometry) {\n        getTooltipsOfOlGeometry(olGeometry).forEach((olTooltip) => {\n            if (olTooltip !== undefined && olTooltip.getMap() !== undefined) {\n                this.map.ol.removeOverlay(olTooltip);\n            }\n        });\n    }\n    /**\n     * Show the map tooltips of all the geometries of a source\n     */\n    updateTooltipsOfOlSource(olSource) {\n        olSource.forEachFeature((olFeature) => {\n            this.updateTooltipsOfOlGeometry(olFeature.getGeometry());\n        });\n    }\n    /**\n     * Show the map tooltips of all the geometries of a source\n     */\n    showTooltipsOfOlSource(olSource) {\n        olSource.forEachFeature((olFeature) => {\n            this.showTooltipsOfOlGeometry(olFeature.getGeometry());\n        });\n    }\n    /**\n     * Clear the map tooltips\n     * @param olDrawSource OL vector source\n     */\n    clearTooltipsOfOlSource(olSource) {\n        olSource.forEachFeature((olFeature) => {\n            const olGeometry = olFeature.getGeometry();\n            if (olGeometry !== undefined) {\n                this.clearTooltipsOfOlGeometry(olFeature.getGeometry());\n            }\n        });\n    }\n    /**\n     * Update an OL tooltip properties and inner HTML and add it to the map if possible\n     * @param olTooltip OL tooltip\n     * @param measure The measure valeu ti display\n     * @param measureUnit Display tooltip measure in those units\n     */\n    updateOlTooltip(olTooltip, measure, unit, type) {\n        olTooltip.setProperties({ _measure: measure, _unit: unit, _type: type }, true);\n        olTooltip.getElement().innerHTML = this.computeTooltipInnerHTML(olTooltip);\n        if (this.shouldShowTooltip(olTooltip)) {\n            this.map.ol.addOverlay(olTooltip);\n        }\n    }\n    /**\n     * Compute a tooltip's content\n     * @param olTooltip OL overlay\n     * @returns Inner HTML\n     */\n    computeTooltipInnerHTML(olTooltip) {\n        const properties = olTooltip.getProperties();\n        return formatMeasure(properties._measure, {\n            decimal: 1,\n            unit: properties._unit,\n            unitAbbr: true,\n            locale: 'fr'\n        }, this.languageService);\n    }\n    /**\n     * Whether a tooltip should be showned based on the length\n     * of the segment it is bound to.\n     * @param olTooltip OL overlay\n     * @returns True if the tooltip should be shown\n     */\n    shouldShowTooltip(olTooltip) {\n        if (this.showTooltips === false) {\n            return false;\n        }\n        const properties = olTooltip.getProperties();\n        const measure = properties._measure;\n        if (measure === undefined) {\n            return false;\n        }\n        if (properties._unit === MeasureType.Length) {\n            const minSegmentLength = metersToUnit(this.minSegmentLength, properties._unit) || 0;\n            return measure > Math.max(minSegmentLength, 0);\n        }\n        return true;\n    }\n}\nMeasurerComponent.ɵfac = function MeasurerComponent_Factory(t) { return new (t || MeasurerComponent)(ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(MatDialog), ɵɵdirectiveInject(StorageService)); };\nMeasurerComponent.ɵcmp = ɵɵdefineComponent({ type: MeasurerComponent, selectors: [[\"igo-measurer\"]], viewQuery: function MeasurerComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵstaticViewQuery(_c0$9, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.table = _t.first);\n    } }, inputs: { map: \"map\", store: \"store\", activeMeasureType: \"activeMeasureType\", minSegmentLength: \"minSegmentLength\" }, decls: 40, vars: 57, consts: [[1, \"measure-type-toggle\", \"mat-typography\"], [3, \"value\", \"change\"], [3, \"value\"], [1, \"measure-options\", \"mat-typography\"], [3, \"checked\", \"labelPosition\", \"change\"], [3, \"disabled\", \"checked\", \"labelPosition\", \"change\"], [4, \"ngIf\"], [1, \"measure-store-buttons\"], [\"mat-icon-button\", \"\", 3, \"matTooltip\", \"disabled\", \"click\"], [\"svgIcon\", \"calculator\"], [\"svgIcon\", \"delete\"], [1, \"table-compact\", 3, \"store\", \"template\"], [\"table\", \"\"], [3, \"measureType\", \"measureUnit\", \"measure\", \"auto\", \"placeholder\", \"measureUnitChange\"]], template: function MeasurerComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\");\n        ɵɵelementStart(1, \"div\", 0);\n        ɵɵelementStart(2, \"mat-button-toggle-group\", 1);\n        ɵɵlistener(\"change\", function MeasurerComponent_Template_mat_button_toggle_group_change_2_listener($event) { return ctx.onMeasureTypeChange($event.value); });\n        ɵɵelementStart(3, \"mat-button-toggle\", 2);\n        ɵɵtext(4);\n        ɵɵpipe(5, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(6, \"mat-button-toggle\", 2);\n        ɵɵtext(7);\n        ɵɵpipe(8, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(9, \"div\", 3);\n        ɵɵelementStart(10, \"mat-slide-toggle\", 4);\n        ɵɵlistener(\"change\", function MeasurerComponent_Template_mat_slide_toggle_change_10_listener($event) { return ctx.onToggleDrawControl($event.checked); });\n        ɵɵtext(11);\n        ɵɵpipe(12, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(13, \"mat-slide-toggle\", 4);\n        ɵɵlistener(\"change\", function MeasurerComponent_Template_mat_slide_toggle_change_13_listener($event) { return ctx.onToggleDisplayLines($event.checked); });\n        ɵɵtext(14);\n        ɵɵpipe(15, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(16, \"mat-slide-toggle\", 5);\n        ɵɵlistener(\"change\", function MeasurerComponent_Template_mat_slide_toggle_change_16_listener($event) { return ctx.onToggleDisplayDistance($event.checked); });\n        ɵɵpipe(17, \"async\");\n        ɵɵtext(18);\n        ɵɵpipe(19, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(20, \"mat-slide-toggle\", 5);\n        ɵɵlistener(\"change\", function MeasurerComponent_Template_mat_slide_toggle_change_20_listener($event) { return ctx.onToggleDisplayAreas($event.checked); });\n        ɵɵpipe(21, \"async\");\n        ɵɵtext(22);\n        ɵɵpipe(23, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(24, \"mat-slide-toggle\", 4);\n        ɵɵlistener(\"change\", function MeasurerComponent_Template_mat_slide_toggle_change_24_listener($event) { return ctx.onToggleMeasureUnitsAuto($event.checked); });\n        ɵɵtext(25);\n        ɵɵpipe(26, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵtemplate(27, MeasurerComponent_ng_container_27_Template, 5, 14, \"ng-container\", 6);\n        ɵɵpipe(28, \"async\");\n        ɵɵelementStart(29, \"div\", 7);\n        ɵɵelementStart(30, \"button\", 8);\n        ɵɵlistener(\"click\", function MeasurerComponent_Template_button_click_30_listener() { return ctx.onCalculateClick(); });\n        ɵɵpipe(31, \"translate\");\n        ɵɵpipe(32, \"async\");\n        ɵɵelement(33, \"mat-icon\", 9);\n        ɵɵelementEnd();\n        ɵɵelementStart(34, \"button\", 8);\n        ɵɵlistener(\"click\", function MeasurerComponent_Template_button_click_34_listener() { return ctx.onDeleteClick(); });\n        ɵɵpipe(35, \"translate\");\n        ɵɵpipe(36, \"async\");\n        ɵɵelement(37, \"mat-icon\", 10);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelement(38, \"igo-entity-table\", 11, 12);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(2);\n        ɵɵproperty(\"value\", ctx.activeMeasureType);\n        ɵɵadvance(1);\n        ɵɵproperty(\"value\", ctx.measureType.Length);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(5, 29, \"igo.geo.measure.\" + ctx.measureType.Length), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"value\", ctx.measureType.Area);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(8, 31, \"igo.geo.measure.\" + ctx.measureType.Area), \" \");\n        ɵɵadvance(3);\n        ɵɵproperty(\"checked\", ctx.drawControlIsActive)(\"labelPosition\", \"before\");\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(12, 33, \"igo.geo.measure.toggleActive\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"checked\", ctx.displayLines)(\"labelPosition\", \"before\");\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(15, 35, \"igo.geo.measure.toggleDisplayLines\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"disabled\", !ɵɵpipeBind1(17, 37, ctx.hasArea$))(\"checked\", ctx.displayDistance)(\"labelPosition\", \"before\");\n        ɵɵadvance(2);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(19, 39, \"igo.geo.measure.toggleDisplayDistance\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"disabled\", !ɵɵpipeBind1(21, 41, ctx.hasArea$))(\"checked\", ctx.displayAreas)(\"labelPosition\", \"before\");\n        ɵɵadvance(2);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(23, 43, \"igo.geo.measure.toggleDisplayAreas\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"checked\", ctx.measureUnitsAuto)(\"labelPosition\", \"before\");\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(26, 45, \"igo.geo.measure.toggleAutoUnits\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(28, 47, ctx.measure$));\n        ɵɵadvance(3);\n        ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(31, 49, \"igo.geo.measure.actionbar.calculate.tooltip\"))(\"disabled\", ɵɵpipeBind1(32, 51, ctx.selectedFeatures$).length === 0);\n        ɵɵadvance(4);\n        ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(35, 53, \"igo.geo.measure.actionbar.delete.tooltip\"))(\"disabled\", ɵɵpipeBind1(36, 55, ctx.selectedFeatures$).length === 0);\n        ɵɵadvance(4);\n        ɵɵproperty(\"store\", ctx.store)(\"template\", ctx.tableTemplate);\n    } }, styles: [\".measure-type-toggle[_ngcontent-%COMP%]{padding:10px;text-align:center}.measure-type-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}.measure-type-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{width:50%}.measure-options[_ngcontent-%COMP%]{overflow-x:hidden}.measure-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:10px;width:100%}.measure-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-content{width:calc(100% - 60px)}.measure-store-buttons[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;border-top:1px solid #ddd;width:100%}.measure-store-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{margin-left:14px}.table-compact[_ngcontent-%COMP%]     .mat-header-cell.mat-column-selectionCheckbox{width:52px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MeasurerComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-measurer',\n                templateUrl: './measurer.component.html',\n                styleUrls: ['./measurer.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: LanguageService }, { type: MatDialog }, { type: StorageService }]; }, { map: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], activeMeasureType: [{\n            type: Input\n        }], minSegmentLength: [{\n            type: Input\n        }], table: [{\n            type: ViewChild,\n            args: ['table', { static: true }]\n        }] }); })();\n\n/**\n * This pipe returns a measure converted from meters (or square meters)\n * to the specified unit. It also keeps a certain number of decimals.\n */\nclass MeasureFormatPipe {\n    /**\n     * @ignore\n     */\n    transform(value, unit, unitAbbr = false, decimal = 1) {\n        let out;\n        if (Object.values(MeasureAreaUnit).indexOf(unit) >= 0) {\n            out = squareMetersToUnit(value, unit);\n        }\n        else if (Object.values(MeasureLengthUnit).indexOf(unit) >= 0) {\n            out = metersToUnit(value, unit);\n        }\n        return out ? formatMeasure(out, {\n            decimal: 1,\n            unit,\n            unitAbbr,\n            locale: 'fr'\n        }) : out;\n    }\n}\nMeasureFormatPipe.ɵfac = function MeasureFormatPipe_Factory(t) { return new (t || MeasureFormatPipe)(); };\nMeasureFormatPipe.ɵpipe = ɵɵdefinePipe({ name: \"measureFormat\", type: MeasureFormatPipe, pure: true });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MeasureFormatPipe, [{\n        type: Pipe,\n        args: [{\n                name: 'measureFormat'\n            }]\n    }], null, null); })();\n\nfunction GeometryFormFieldInputComponent_ng_template_0_Template(rf, ctx) { }\n/**\n * This input allows a user to draw a new geometry or to edit\n * an existing one on a map. A text input is also displayed in the\n * form with some instructions.\n * This is still WIP.\n */\nclass GeometryFormFieldInputComponent {\n    constructor(cdRef, ngControl) {\n        this.cdRef = cdRef;\n        this.ngControl = ngControl;\n        this.olGeoJSON = new OlGeoJSON();\n        this.ready = false;\n        this.olTooltip = OlOverlay;\n        /**\n         * The drawGuide around the mouse pointer to help drawing\n         */\n        this.drawGuide = null;\n        /**\n         * Whether a measure tooltip should be displayed\n         */\n        this.measure = false;\n        this._drawControlIsActive = true;\n        /**\n         * Control options\n         */\n        this.controlOptions = {};\n        this.onChange = () => { };\n        this.onTouched = () => { };\n        if (this.ngControl !== undefined) {\n            // Setting the value accessor directly (instead of using\n            // the providers) to avoid running into a circular import.\n            this.ngControl.valueAccessor = this;\n        }\n    }\n    /**\n     * The geometry type\n     */\n    set geometryType(value) {\n        this._geometryType = value;\n        if (this.ready === false) {\n            return;\n        }\n        this.deactivateControl();\n        this.createDrawControl();\n        this.drawControl.freehand$.next(this.freehandDrawIsActive);\n        this.toggleControl();\n    }\n    get geometryType() { return this._geometryType; }\n    /**\n     * Whether draw control should be active or not\n     */\n    get drawControlIsActive() { return this._drawControlIsActive; }\n    set drawControlIsActive(value) {\n        this._drawControlIsActive = value;\n        if (this.ready === false) {\n            return;\n        }\n        this.deactivateControl();\n        if (!this._drawControlIsActive) {\n            return;\n        }\n        else {\n            this.toggleControl();\n        }\n    }\n    /**\n     * Whether freehand draw control should be active or not\n     */\n    get freehandDrawIsActive() { return this._freehandDrawIsActive; }\n    set freehandDrawIsActive(value) {\n        this._freehandDrawIsActive = value;\n        this.deactivateControl();\n        this.createDrawControl();\n        this.createModifyControl();\n        this.drawControl.freehand$.next(this.freehandDrawIsActive);\n        if (this.ready === false) {\n            return;\n        }\n        if (!this.drawControlIsActive) {\n            return;\n        }\n        this.toggleControl();\n    }\n    /**\n     * Style for the draw control (applies while the geometry is being drawn)\n     */\n    set drawStyle(value) {\n        if (value === undefined) {\n            value = createDrawInteractionStyle();\n        }\n        this._drawStyle = value;\n        const olGuideStyle = this.getGuideStyleFromDrawStyle(value);\n        if (olGuideStyle !== undefined) {\n            this.defaultDrawStyleRadius = olGuideStyle.getImage().getRadius();\n        }\n        else {\n            this.defaultDrawStyleRadius = null;\n        }\n        if (this.ready === false) {\n            return;\n        }\n        this.deactivateControl();\n        this.createDrawControl();\n        this.createModifyControl();\n        this.drawControl.freehand$.next(this.freehandDrawIsActive);\n        this.toggleControl();\n    }\n    get drawStyle() { return this._drawStyle; }\n    /**\n     * Style for the overlay layer (applies once the geometry is added to the map)\n     * If not specified, drawStyle applies\n     */\n    set overlayStyle(value) { this._overlayStyle = value; }\n    get overlayStyle() { return this._overlayStyle; }\n    /**\n     * The geometry value (GeoJSON)\n     * Implemented as part of ControlValueAccessor.\n     */\n    set value(value) {\n        this._value = value;\n        if (this.ready === false) {\n            return;\n        }\n        if (value) {\n            this.addGeoJSONToOverlay(value);\n        }\n        else {\n            this.olOverlaySource.clear(true);\n        }\n        this.onChange(value);\n        this.toggleControl();\n        this.cdRef.detectChanges();\n    }\n    get value() { return this._value; }\n    /**\n     * The vector source to add the geometry to\n     * @internal\n     */\n    get olOverlaySource() {\n        return this.olOverlayLayer.getSource();\n    }\n    set radius(value) {\n        if (this.ready === false) {\n            return;\n        }\n        if (this.modifyControl.getSource()) {\n            this.modifyControl.getSource().refresh();\n        }\n        if (this.freehandDrawIsActive) {\n            let olModify;\n            setTimeout(() => {\n                olModify = this.modifyControl.olModifyInteraction;\n                if (olModify) {\n                    if (olModify.features_) {\n                        olModify.features_.clear();\n                        this.addGeoJSONToOverlay(this.value);\n                    }\n                }\n            }, 0);\n        }\n    }\n    /**\n     * Create an overlay layer, add the initial geometry to it (if any)\n     * and toggle the right interaction.\n     * @internal\n     */\n    ngOnInit() {\n        if (this.drawStyle === undefined) {\n            this.drawStyle = createDrawInteractionStyle();\n        }\n        if (this.overlayStyle === undefined) {\n            this.overlayStyle = this.drawStyle;\n        }\n        this.addOlOverlayLayer();\n        this.createMeasureTooltip();\n        this.createDrawControl();\n        this.createModifyControl();\n        if (this.value) {\n            this.addGeoJSONToOverlay(this.value);\n        }\n        this.toggleControl();\n        this.ready = true;\n    }\n    /**\n     * Clear the overlay layer and any interaction added by this component.\n     * @internal\n     */\n    ngOnDestroy() {\n        // This is mandatory when the form control is reused after\n        // this component has been destroyed. It seems like the control\n        // keeps a reference to this component even after it's destroyed\n        // and it attempts to set it's value\n        this.ready = false;\n        this.deactivateControl();\n        this.olOverlaySource.clear();\n        this.map.ol.removeLayer(this.olOverlayLayer);\n    }\n    /**\n     * Implemented as part of ControlValueAccessor.\n     */\n    // tslint:disable-next-line:ban-types\n    registerOnChange(fn) {\n        this.onChange = fn;\n    }\n    /**\n     * Implemented as part of ControlValueAccessor.\n     */\n    // tslint:disable-next-line:ban-types\n    registerOnTouched(fn) {\n        this.onTouched = fn;\n    }\n    /**\n     * Implemented as part of ControlValueAccessor.\n     */\n    writeValue(value) {\n        this.value = value;\n    }\n    /**\n     * Add an overlay layer to the map\n     */\n    addOlOverlayLayer() {\n        this.olOverlayLayer = new OlVectorLayer({\n            source: new OlVectorSource(),\n            zIndex: 500,\n            style: null\n        });\n        this.map.ol.addLayer(this.olOverlayLayer);\n    }\n    /**\n     * Create a draw control and subscribe to it's geometry\n     */\n    createDrawControl() {\n        const controlOptions = Object.assign({}, this.controlOptions, {\n            geometryType: this.geometryType || 'Point',\n            layer: this.olOverlayLayer,\n            drawStyle: typeof this.drawStyle === 'function' ? this.drawStyle : (olFeature, resolution) => {\n                const style = this.drawStyle;\n                this.updateDrawStyleWithDrawGuide(style, resolution);\n                return style;\n            }\n        });\n        this.drawControl = new DrawControl(controlOptions);\n    }\n    /**\n     * Create a modify control and subscribe to it's geometry\n     */\n    createModifyControl() {\n        const controlOptions = Object.assign({}, this.controlOptions, {\n            layer: this.olOverlayLayer,\n            drawStyle: typeof this.drawStyle === 'function' ? this.drawStyle : (olFeature, resolution) => {\n                const style = this.drawStyle;\n                this.updateDrawStyleWithDrawGuide(style, resolution);\n                return style;\n            }\n        });\n        this.modifyControl = new ModifyControl(controlOptions);\n    }\n    /**\n     * Toggle the proper control (draw or modify)\n     */\n    toggleControl() {\n        let activate;\n        if (!this.value && this.geometryType) {\n            activate = this.drawControl;\n        }\n        else {\n            activate = this.modifyControl;\n        }\n        // If the control that should be activated\n        // is not the same as the current active control,\n        // deactivate the current control and activate the new one\n        // Otherwise, do nothing and keep the current control active\n        if (activate !== this.activeControl) {\n            this.deactivateControl();\n            this.activateControl(activate);\n        }\n    }\n    /**\n     * Activate a given control\n     * @param control Control\n     */\n    activateControl(control) {\n        this.activeControl = control;\n        this.olGeometryEnds$$ = control.end$\n            .subscribe((olGeometry) => this.onOlGeometryEnds(olGeometry));\n        if (this.measure === true && control === this.drawControl) {\n            this.olGeometryChanges$$ = control.changes$\n                .subscribe((olGeometry) => this.onOlGeometryChanges(olGeometry));\n        }\n        control.setOlMap(this.map.ol);\n    }\n    /**\n     * Deactivate the active control\n     */\n    deactivateControl() {\n        this.removeMeasureTooltip();\n        if (this.activeControl !== undefined) {\n            this.activeControl.setOlMap(undefined);\n        }\n        if (this.olGeometryEnds$$ !== undefined) {\n            this.olGeometryEnds$$.unsubscribe();\n        }\n        if (this.olGeometryChanges$$ !== undefined) {\n            this.olGeometryChanges$$.unsubscribe();\n        }\n        this.activeControl = undefined;\n    }\n    /**\n     * Update measures observables and map tooltips\n     * @param olGeometry Ol linestring or polygon\n     */\n    onOlGeometryEnds(olGeometry) {\n        this.removeMeasureTooltip();\n        this.setOlGeometry(olGeometry);\n    }\n    /**\n     * Update measures observables and map tooltips\n     * @param olGeometry Ol linestring or polygon\n     */\n    onOlGeometryChanges(olGeometry) {\n        if (olGeometry.getType() !== 'Point') {\n            this.updateMeasureTooltip(olGeometry);\n        }\n    }\n    /**\n     * When drawing ends, convert the output value to GeoJSON and keep it.\n     * Restore the double click interaction.\n     * @param olGeometry OL geometry\n     */\n    setOlGeometry(olGeometry) {\n        let value;\n        if (olGeometry === undefined) {\n            return;\n        }\n        if (olGeometry.getType() === 'Circle') { // Because Circle doesn't exist as a GeoJSON object\n            olGeometry = this.circleToPoint(olGeometry);\n        }\n        value = this.olGeoJSON.writeGeometryObject(olGeometry, {\n            featureProjection: this.map.projection,\n            dataProjection: 'EPSG:4326'\n        });\n        if (olGeometry.get('radius')) {\n            value.radius = olGeometry.get('radius');\n            olGeometry._radius = value.radius;\n        }\n        this.writeValue(value);\n    }\n    circleToPoint(olGeometry) {\n        const center = olGeometry.getCenter();\n        const coordinates = transform(center, this.map.projection, 'EPSG:4326');\n        const radius = Math.round(olGeometry.getRadius() * (Math.cos((Math.PI / 180) * coordinates[1])));\n        // Convert it to a point object\n        olGeometry = new OlPoint(center);\n        olGeometry.set('radius', radius, true);\n        return olGeometry;\n    }\n    /**\n     * Add a GeoJSON geometry to the overlay\n     * @param geometry GeoJSON geometry\n     */\n    addGeoJSONToOverlay(geometry) {\n        const olGeometry = this.olGeoJSON.readGeometry(geometry, {\n            dataProjection: 'EPSG:4326',\n            featureProjection: this.map.projection\n        });\n        const olFeature$1 = new olFeature({\n            geometry: olGeometry\n        });\n        olFeature$1.setStyle(this.overlayStyle);\n        this.olOverlaySource.clear();\n        this.olOverlaySource.addFeature(olFeature$1);\n    }\n    /**\n     * Create the measure tooltip\n     */\n    createMeasureTooltip() {\n        this.olTooltip = new OlOverlay({\n            element: document.createElement('div'),\n            offset: [-30, -10],\n            className: [\n                'igo-map-tooltip',\n                'igo-map-tooltip-measure'\n            ].join(' '),\n            stopEvent: false\n        });\n    }\n    /**\n     * Update the measure tooltip of an OL geometry\n     * @param olGeometry OL Geometry\n     */\n    updateMeasureTooltip(olGeometry) {\n        const measure = measureOlGeometry(olGeometry, this.map.projection);\n        const lengths = measure.lengths;\n        const lastIndex = olGeometry.getType() === 'Polygon' ? lengths.length - 2 : lengths.length - 1;\n        const lastLength = lengths[lastIndex];\n        const olMidpoints = updateOlGeometryMidpoints(olGeometry);\n        const olLastMidpoint = olMidpoints[lastIndex];\n        if (olMidpoints.length === 0 || olLastMidpoint === undefined) {\n            this.removeMeasureTooltip();\n            return;\n        }\n        this.olTooltip.setPosition(olLastMidpoint.flatCoordinates);\n        const innerHtml = formatMeasure(lastLength, {\n            decimal: 1,\n            unit: MeasureLengthUnit.Meters,\n            unitAbbr: true,\n            locale: 'fr'\n        });\n        this.olTooltip.getElement().innerHTML = innerHtml;\n        if (this.olTooltip.getMap() === undefined) {\n            this.map.ol.addOverlay(this.olTooltip);\n        }\n    }\n    /**\n     * Remove the measure tooltip from the map\n     */\n    removeMeasureTooltip() {\n        if (this.olTooltip.getMap && this.olTooltip.getMap() !== undefined) {\n            this.map.ol.removeOverlay(this.olTooltip);\n            this.olTooltip.setMap(undefined);\n        }\n    }\n    /**\n     * Adjust the draw style with the specified draw guide distance, if possible\n     * @param olStyle Draw style to update\n     * @param resolution Resolution (to make the screen size of symbol fit the drawGuide value)\n     */\n    updateDrawStyleWithDrawGuide(olStyle, resolution) {\n        const olGuideStyle = this.getGuideStyleFromDrawStyle(olStyle);\n        if (olGuideStyle === undefined) {\n            return;\n        }\n        const drawGuide = this.drawGuide;\n        let radius;\n        if (!drawGuide || drawGuide < 0) {\n            radius = this.defaultDrawStyleRadius;\n        }\n        else {\n            radius = drawGuide > 0 ? drawGuide / resolution : drawGuide;\n        }\n        olGuideStyle.getImage().setRadius(radius);\n    }\n    /**\n     * Returns wether a given Open Layers style has a radius property that can be set (used to set draw guide)\n     * @param olStyle The style on which to perform the check\n     */\n    isStyleWithRadius(olStyle) {\n        return typeof olStyle !== 'function' && olStyle.getImage && olStyle.getImage().setRadius;\n    }\n    /**\n     * Returns wether a given Open Layers style has a radius property that can be set (used to set draw guide)\n     * @param olStyle The style on which to perform the check\n     */\n    getGuideStyleFromDrawStyle(olStyle) {\n        if (Array.isArray(olStyle)) {\n            olStyle = olStyle[0];\n        }\n        if (this.isStyleWithRadius(olStyle)) {\n            return olStyle;\n        }\n        return undefined;\n    }\n}\nGeometryFormFieldInputComponent.ɵfac = function GeometryFormFieldInputComponent_Factory(t) { return new (t || GeometryFormFieldInputComponent)(ɵɵdirectiveInject(ChangeDetectorRef), ɵɵdirectiveInject(NgControl, 10)); };\nGeometryFormFieldInputComponent.ɵcmp = ɵɵdefineComponent({ type: GeometryFormFieldInputComponent, selectors: [[\"igo-geometry-form-field-input\"]], inputs: { map: \"map\", geometryType: \"geometryType\", drawGuide: \"drawGuide\", measure: \"measure\", drawControlIsActive: \"drawControlIsActive\", freehandDrawIsActive: \"freehandDrawIsActive\", controlOptions: \"controlOptions\", drawStyle: \"drawStyle\", overlayStyle: \"overlayStyle\", value: \"value\", radius: \"radius\" }, decls: 1, vars: 0, template: function GeometryFormFieldInputComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, GeometryFormFieldInputComponent_ng_template_0_Template, 0, 0, \"ng-template\");\n    } }, encapsulation: 2, changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(GeometryFormFieldInputComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-geometry-form-field-input',\n                templateUrl: './geometry-form-field-input.component.html',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ChangeDetectorRef }, { type: NgControl, decorators: [{\n                type: Optional\n            }, {\n                type: Self\n            }] }]; }, { map: [{\n            type: Input\n        }], geometryType: [{\n            type: Input\n        }], drawGuide: [{\n            type: Input\n        }], measure: [{\n            type: Input\n        }], drawControlIsActive: [{\n            type: Input\n        }], freehandDrawIsActive: [{\n            type: Input\n        }], controlOptions: [{\n            type: Input\n        }], drawStyle: [{\n            type: Input\n        }], overlayStyle: [{\n            type: Input\n        }], value: [{\n            type: Input\n        }], radius: [{\n            type: Input\n        }] }); })();\n\nfunction GeometryFormFieldComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 3);\n    ɵɵelementStart(1, \"mat-button-toggle-group\", 4);\n    ɵɵlistener(\"ngModelChange\", function GeometryFormFieldComponent_div_3_Template_mat_button_toggle_group_ngModelChange_1_listener($event) { ɵɵrestoreView(_r3); const ctx_r2 = ɵɵnextContext(); return ctx_r2.geometryType = $event; });\n    ɵɵpipe(2, \"async\");\n    ɵɵelementStart(3, \"mat-button-toggle\", 5);\n    ɵɵtext(4);\n    ɵɵpipe(5, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(6, \"mat-button-toggle\", 6);\n    ɵɵtext(7);\n    ɵɵpipe(8, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(9, \"mat-button-toggle\", 7);\n    ɵɵtext(10);\n    ɵɵpipe(11, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"disabled\", ɵɵpipeBind1(2, 8, ctx_r0.value$) !== undefined)(\"ngModel\", ctx_r0.geometryType);\n    ɵɵadvance(2);\n    ɵɵproperty(\"disabled\", ctx_r0.geometryTypes.indexOf(\"Point\") < 0);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(5, 10, \"igo.geo.geometry.point\"), \" \");\n    ɵɵadvance(2);\n    ɵɵproperty(\"disabled\", ctx_r0.geometryTypes.indexOf(\"LineString\") < 0);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(8, 12, \"igo.geo.geometry.line\"), \" \");\n    ɵɵadvance(2);\n    ɵɵproperty(\"disabled\", ctx_r0.geometryTypes.indexOf(\"Polygon\") < 0);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(11, 14, \"igo.geo.geometry.polygon\"), \" \");\n} }\nfunction GeometryFormFieldComponent_mat_form_field_4_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\", 8);\n    ɵɵelementStart(1, \"input\", 9);\n    ɵɵlistener(\"ngModelChange\", function GeometryFormFieldComponent_mat_form_field_4_Template_input_ngModelChange_1_listener($event) { ɵɵrestoreView(_r5); const ctx_r4 = ɵɵnextContext(); return ctx_r4.drawGuide = $event; });\n    ɵɵelementEnd();\n    ɵɵelement(2, \"mat-icon\", 10);\n    ɵɵelementStart(3, \"span\", 11);\n    ɵɵtext(4);\n    ɵɵpipe(5, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"placeholder\", ctx_r1.drawGuidePlaceholder)(\"ngModel\", ctx_r1.drawGuide);\n    ɵɵadvance(1);\n    ɵɵproperty(\"color\", \"primary\");\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(5, 4, \"igo.geo.measure.meters\"));\n} }\n/**\n * This input allows a user to draw a new geometry or to edit\n * an existing one on a map.\n */\nlet GeometryFormFieldComponent = class GeometryFormFieldComponent {\n    constructor(cdRef) {\n        this.cdRef = cdRef;\n        this.value$ = new BehaviorSubject(undefined);\n        this.drawControlIsActive = true;\n        this.freehandDrawIsActive = false;\n        this.geometryType$ = new BehaviorSubject(undefined);\n        /**\n         * Whether a geometry type toggle should be displayed\n         */\n        this.geometryTypeField = false;\n        /**\n         * Available geometry types\n         */\n        this.geometryTypes = ['Point', 'LineString', 'Polygon'];\n        /**\n         * Whether a draw guide field should be displayed\n         */\n        this.drawGuideField = false;\n        this.drawGuide$ = new BehaviorSubject(0);\n        /**\n         * Draw guide placeholder\n         */\n        this.drawGuidePlaceholder = '';\n        /**\n         * Whether a measure tooltip should be displayed\n         */\n        this.measure = false;\n        /**\n         * Control options\n         */\n        this.controlOptions = {};\n    }\n    set geometryType(value) { this.geometryType$.next(value); }\n    get geometryType() { return this.geometryType$.value; }\n    /**\n     * The drawGuide around the mouse pointer to help drawing\n     */\n    set drawGuide(value) { this.drawGuide$.next(value); }\n    get drawGuide() { return this.drawGuide$.value; }\n    /**\n     * Set up a value stream\n     * @internal\n     */\n    ngOnInit() {\n        this.value$.next(this.formControl.value ? this.formControl.value : undefined);\n        this.value$$ = this.formControl.valueChanges.subscribe((value) => {\n            this.value$.next(value ? value : undefined);\n        });\n    }\n    /**\n     * Unsubscribe to the value stream\n     * @internal\n     */\n    ngOnDestroy() {\n        this.value$$.unsubscribe();\n    }\n};\nGeometryFormFieldComponent.ɵfac = function GeometryFormFieldComponent_Factory(t) { return new (t || GeometryFormFieldComponent)(ɵɵdirectiveInject(ChangeDetectorRef)); };\nGeometryFormFieldComponent.ɵcmp = ɵɵdefineComponent({ type: GeometryFormFieldComponent, selectors: [[\"igo-geometry-form-field\"]], inputs: { formControl: \"formControl\", map: \"map\", geometryType: \"geometryType\", geometryTypeField: \"geometryTypeField\", geometryTypes: \"geometryTypes\", drawGuideField: \"drawGuideField\", drawGuide: \"drawGuide\", drawGuidePlaceholder: \"drawGuidePlaceholder\", measure: \"measure\", controlOptions: \"controlOptions\", drawStyle: \"drawStyle\", overlayStyle: \"overlayStyle\" }, decls: 5, vars: 16, consts: [[3, \"formControl\", \"map\", \"geometryType\", \"drawGuide\", \"measure\", \"drawControlIsActive\", \"freehandDrawIsActive\", \"controlOptions\", \"drawStyle\", \"overlayStyle\"], [\"class\", \"geometry-type-toggle\", 4, \"ngIf\"], [\"class\", \"draw-guide-field\", 4, \"ngIf\"], [1, \"geometry-type-toggle\"], [3, \"disabled\", \"ngModel\", \"ngModelChange\"], [\"value\", \"Point\", 3, \"disabled\"], [\"value\", \"LineString\", 3, \"disabled\"], [\"value\", \"Polygon\", 3, \"disabled\"], [1, \"draw-guide-field\"], [\"matInput\", \"\", \"type\", \"number\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [\"matPrefix\", \"\", \"svgIcon\", \"adjust\", 3, \"color\"], [\"matSuffix\", \"\", 1, \"draw-guide-units\"]], template: function GeometryFormFieldComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"igo-geometry-form-field-input\", 0);\n        ɵɵpipe(1, \"async\");\n        ɵɵpipe(2, \"async\");\n        ɵɵtemplate(3, GeometryFormFieldComponent_div_3_Template, 12, 16, \"div\", 1);\n        ɵɵtemplate(4, GeometryFormFieldComponent_mat_form_field_4_Template, 6, 6, \"mat-form-field\", 2);\n    } if (rf & 2) {\n        ɵɵproperty(\"formControl\", ctx.formControl)(\"map\", ctx.map)(\"geometryType\", ɵɵpipeBind1(1, 12, ctx.geometryType$))(\"drawGuide\", ɵɵpipeBind1(2, 14, ctx.drawGuide$))(\"measure\", ctx.measure)(\"drawControlIsActive\", ctx.drawControlIsActive)(\"freehandDrawIsActive\", ctx.freehandDrawIsActive)(\"controlOptions\", ctx.controlOptions)(\"drawStyle\", ctx.drawStyle)(\"overlayStyle\", ctx.overlayStyle);\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngIf\", ctx.geometryTypeField);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.drawGuideField);\n    } }, directives: [GeometryFormFieldInputComponent, NgControlStatus, FormControlDirective, NgIf, MatButtonToggleGroup, NgModel, MatButtonToggle, MatFormField, MatInput, NumberValueAccessor, DefaultValueAccessor, MatIcon, MatPrefix, MatSuffix], pipes: [AsyncPipe, TranslatePipe], styles: [\"[_nghost-%COMP%]{display:block}.draw-guide-field[_ngcontent-%COMP%], .geometry-type-toggle[_ngcontent-%COMP%], [_nghost-%COMP%]{width:100%}.geometry-type-toggle[_ngcontent-%COMP%]{padding:10px;text-align:center}.draw-guide-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 10px}.draw-guide-units[_ngcontent-%COMP%]{padding:10px}\"], changeDetection: 0 });\nGeometryFormFieldComponent = __decorate([\n    IgoFormFieldComponent('geometry'),\n    __metadata(\"design:paramtypes\", [ChangeDetectorRef])\n], GeometryFormFieldComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(GeometryFormFieldComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-geometry-form-field',\n                templateUrl: './geometry-form-field.component.html',\n                styleUrls: ['./geometry-form-field.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ChangeDetectorRef }]; }, { formControl: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], geometryType: [{\n            type: Input\n        }], geometryTypeField: [{\n            type: Input\n        }], geometryTypes: [{\n            type: Input\n        }], drawGuideField: [{\n            type: Input\n        }], drawGuide: [{\n            type: Input\n        }], drawGuidePlaceholder: [{\n            type: Input\n        }], measure: [{\n            type: Input\n        }], controlOptions: [{\n            type: Input\n        }], drawStyle: [{\n            type: Input\n        }], overlayStyle: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoGeometryFormFieldModule {\n}\nIgoGeometryFormFieldModule.ɵmod = ɵɵdefineNgModule({ type: IgoGeometryFormFieldModule });\nIgoGeometryFormFieldModule.ɵinj = ɵɵdefineInjector({ factory: function IgoGeometryFormFieldModule_Factory(t) { return new (t || IgoGeometryFormFieldModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatIconModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatButtonModule,\n            MatButtonToggleModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoGeometryFormFieldModule, { declarations: [GeometryFormFieldComponent,\n        GeometryFormFieldInputComponent], imports: [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatIconModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatButtonModule,\n        MatButtonToggleModule,\n        IgoLanguageModule], exports: [GeometryFormFieldComponent,\n        GeometryFormFieldInputComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoGeometryFormFieldModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatIconModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatButtonModule,\n                    MatButtonToggleModule,\n                    IgoLanguageModule\n                ],\n                exports: [\n                    GeometryFormFieldComponent,\n                    GeometryFormFieldInputComponent\n                ],\n                declarations: [\n                    GeometryFormFieldComponent,\n                    GeometryFormFieldInputComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoGeometryModule {\n}\nIgoGeometryModule.ɵmod = ɵɵdefineNgModule({ type: IgoGeometryModule });\nIgoGeometryModule.ɵinj = ɵɵdefineInjector({ factory: function IgoGeometryModule_Factory(t) { return new (t || IgoGeometryModule)(); }, providers: [], imports: [[\n            CommonModule,\n            IgoGeometryFormFieldModule\n        ], IgoGeometryFormFieldModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoGeometryModule, { imports: [CommonModule,\n        IgoGeometryFormFieldModule], exports: [IgoGeometryFormFieldModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoGeometryModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoGeometryFormFieldModule\n                ],\n                exports: [\n                    IgoGeometryFormFieldModule\n                ],\n                declarations: [],\n                providers: []\n            }]\n    }], null, null); })();\n\nfunction TimeFilterButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 2);\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 3);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 3, \"igo.geo.filter.filterBy\"))(\"color\", ctx_r0.color);\n    ɵɵadvance(2);\n    ɵɵproperty(\"matBadge\", ctx_r0.badge);\n} }\nfunction TimeFilterButtonComponent_div_1_igo_time_filter_item_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-time-filter-item\", 7);\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext(2);\n    ɵɵproperty(\"header\", false)(\"layer\", ctx_r3.layer);\n} }\nfunction TimeFilterButtonComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 4, 5);\n    ɵɵtemplate(2, TimeFilterButtonComponent_div_1_igo_time_filter_item_2_Template, 1, 2, \"igo-time-filter-item\", 6);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r1.timeFilterCollapse && ctx_r1.options.timeFilter);\n} }\nclass TimeFilterButtonComponent {\n    constructor() {\n        this.color = 'primary';\n        this.header = true;\n        this.timeFilterCollapse = false;\n    }\n    get badge() {\n        const filter = this.options.timeFilter;\n        if (filter && filter.enabled) {\n            return 1;\n        }\n        else {\n            return;\n        }\n    }\n    get layer() {\n        return this._layer;\n    }\n    set layer(value) {\n        this._layer = value;\n        if (value) {\n            this.options = this.layer.dataSource.options;\n        }\n    }\n    ngOnInit() {\n        this.options = this.layer.dataSource.options;\n    }\n}\nTimeFilterButtonComponent.ɵfac = function TimeFilterButtonComponent_Factory(t) { return new (t || TimeFilterButtonComponent)(); };\nTimeFilterButtonComponent.ɵcmp = ɵɵdefineComponent({ type: TimeFilterButtonComponent, selectors: [[\"igo-time-filter-button\"]], inputs: { layer: \"layer\", map: \"map\", color: \"color\", header: \"header\" }, decls: 2, vars: 2, consts: [[\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", 4, \"ngIf\"], [\"class\", \"igo-layer-actions-container\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\"], [\"matBadgeColor\", \"warn\", \"matBadgeSize\", \"medium\", \"svgIcon\", \"history\", 3, \"matBadge\"], [1, \"igo-layer-actions-container\"], [\"ogcFilter\", \"\"], [\"igoListItem\", \"\", 3, \"header\", \"layer\", 4, \"ngIf\"], [\"igoListItem\", \"\", 3, \"header\", \"layer\"]], template: function TimeFilterButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, TimeFilterButtonComponent_button_0_Template, 3, 5, \"button\", 0);\n        ɵɵtemplate(1, TimeFilterButtonComponent_div_1_Template, 3, 1, \"div\", 1);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.header && ctx.options.timeFilterable && ctx.options.timeFilter);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.header && ctx.options.timeFilterable && ctx.options.timeFilter);\n    } }, styles: [\"\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(TimeFilterButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-time-filter-button',\n                templateUrl: './time-filter-button.component.html',\n                styleUrls: ['./time-filter-button.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { layer: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }], header: [{\n            type: Input\n        }] }); })();\n\nfunction TimeFilterFormComponent_div_0_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 3);\n    ɵɵelementStart(1, \"mat-form-field\");\n    ɵɵelement(2, \"mat-datetimepicker-toggle\", 4);\n    ɵɵelement(3, \"mat-datetimepicker\", 5, 6);\n    ɵɵelementStart(5, \"input\", 7);\n    ɵɵlistener(\"ngModelChange\", function TimeFilterFormComponent_div_0_div_1_Template_input_ngModelChange_5_listener($event) { ɵɵrestoreView(_r8); const ctx_r7 = ɵɵnextContext(2); return ctx_r7.date = $event; })(\"dateChange\", function TimeFilterFormComponent_div_0_div_1_Template_input_dateChange_5_listener($event) { ɵɵrestoreView(_r8); const ctx_r9 = ɵɵnextContext(2); return ctx_r9.handleDateChange($event); });\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r6 = ɵɵreference(4);\n    const ctx_r4 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵproperty(\"for\", _r6);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"type\", ctx_r4.type);\n    ɵɵadvance(2);\n    ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(6, 7, \"igo.geo.timeFilter.date\"));\n    ɵɵproperty(\"matDatetimepicker\", _r6)(\"ngModel\", ctx_r4.date)(\"min\", ctx_r4.min)(\"max\", ctx_r4.max);\n} }\nfunction TimeFilterFormComponent_div_0_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\");\n    ɵɵelementStart(1, \"div\", 8);\n    ɵɵelementStart(2, \"mat-form-field\");\n    ɵɵelement(3, \"mat-datetimepicker-toggle\", 4);\n    ɵɵelement(4, \"mat-datetimepicker\", 5, 9);\n    ɵɵelementStart(6, \"input\", 10);\n    ɵɵlistener(\"ngModelChange\", function TimeFilterFormComponent_div_0_div_2_Template_input_ngModelChange_6_listener($event) { ɵɵrestoreView(_r13); const ctx_r12 = ɵɵnextContext(2); return ctx_r12.startDate = $event; })(\"input\", function TimeFilterFormComponent_div_0_div_2_Template_input_input_6_listener() { ɵɵrestoreView(_r13); const ctx_r14 = ɵɵnextContext(2); return ctx_r14.startDate; })(\"dateChange\", function TimeFilterFormComponent_div_0_div_2_Template_input_dateChange_6_listener($event) { ɵɵrestoreView(_r13); const ctx_r15 = ɵɵnextContext(2); return ctx_r15.handleDateChange($event); });\n    ɵɵpipe(7, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(8, \"div\", 8);\n    ɵɵelementStart(9, \"mat-form-field\");\n    ɵɵelement(10, \"mat-datetimepicker-toggle\", 4);\n    ɵɵelement(11, \"mat-datetimepicker\", 5, 11);\n    ɵɵelementStart(13, \"input\", 7);\n    ɵɵlistener(\"ngModelChange\", function TimeFilterFormComponent_div_0_div_2_Template_input_ngModelChange_13_listener($event) { ɵɵrestoreView(_r13); const ctx_r16 = ɵɵnextContext(2); return ctx_r16.endDate = $event; })(\"dateChange\", function TimeFilterFormComponent_div_0_div_2_Template_input_dateChange_13_listener($event) { ɵɵrestoreView(_r13); const ctx_r17 = ɵɵnextContext(2); return ctx_r17.handleDateChange($event); });\n    ɵɵpipe(14, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r10 = ɵɵreference(5);\n    const _r11 = ɵɵreference(12);\n    const ctx_r5 = ɵɵnextContext(2);\n    ɵɵadvance(3);\n    ɵɵproperty(\"for\", _r10);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"type\", ctx_r5.type);\n    ɵɵadvance(2);\n    ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(7, 14, \"igo.geo.timeFilter.startDate\"));\n    ɵɵproperty(\"matDatetimepicker\", _r10)(\"ngModel\", ctx_r5.startDate)(\"min\", ctx_r5.min)(\"max\", ctx_r5.getRangeMaxDate());\n    ɵɵadvance(4);\n    ɵɵproperty(\"for\", _r11);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"type\", ctx_r5.type);\n    ɵɵadvance(2);\n    ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(14, 16, \"igo.geo.timeFilter.endDate\"));\n    ɵɵproperty(\"matDatetimepicker\", _r11)(\"ngModel\", ctx_r5.endDate)(\"min\", ctx_r5.getRangeMinDate())(\"max\", ctx_r5.max);\n} }\nfunction TimeFilterFormComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\");\n    ɵɵtemplate(1, TimeFilterFormComponent_div_0_div_1_Template, 7, 9, \"div\", 2);\n    ɵɵtemplate(2, TimeFilterFormComponent_div_0_div_2_Template, 15, 18, \"div\", 0);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r0.isRange);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.isRange);\n} }\nfunction TimeFilterFormComponent_div_1_div_1_mat_option_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 14);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const year_r21 = ctx.$implicit;\n    ɵɵproperty(\"value\", year_r21);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(year_r21);\n} }\nfunction TimeFilterFormComponent_div_1_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r23 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 3);\n    ɵɵelementStart(1, \"mat-form-field\");\n    ɵɵelementStart(2, \"mat-select\", 12);\n    ɵɵlistener(\"ngModelChange\", function TimeFilterFormComponent_div_1_div_1_Template_mat_select_ngModelChange_2_listener($event) { ɵɵrestoreView(_r23); const ctx_r22 = ɵɵnextContext(2); return ctx_r22.year = $event; })(\"selectionChange\", function TimeFilterFormComponent_div_1_div_1_Template_mat_select_selectionChange_2_listener($event) { ɵɵrestoreView(_r23); const ctx_r24 = ɵɵnextContext(2); return ctx_r24.handleYearChange($event); });\n    ɵɵpipe(3, \"translate\");\n    ɵɵtemplate(4, TimeFilterFormComponent_div_1_div_1_mat_option_4_Template, 2, 2, \"mat-option\", 13);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r18 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(3, 3, \"igo.geo.timeFilter.date\"));\n    ɵɵproperty(\"ngModel\", ctx_r18.year);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", ctx_r18.listYears);\n} }\nfunction TimeFilterFormComponent_div_1_div_2_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 14);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const startYear_r27 = ctx.$implicit;\n    ɵɵproperty(\"value\", startYear_r27);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(startYear_r27);\n} }\nfunction TimeFilterFormComponent_div_1_div_2_mat_option_10_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 14);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const endYear_r28 = ctx.$implicit;\n    ɵɵproperty(\"value\", endYear_r28);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(endYear_r28);\n} }\nfunction TimeFilterFormComponent_div_1_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r30 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\");\n    ɵɵelementStart(1, \"div\", 8);\n    ɵɵelementStart(2, \"mat-form-field\");\n    ɵɵelementStart(3, \"mat-select\", 12);\n    ɵɵlistener(\"ngModelChange\", function TimeFilterFormComponent_div_1_div_2_Template_mat_select_ngModelChange_3_listener($event) { ɵɵrestoreView(_r30); const ctx_r29 = ɵɵnextContext(2); return ctx_r29.startYear = $event; })(\"selectionChange\", function TimeFilterFormComponent_div_1_div_2_Template_mat_select_selectionChange_3_listener($event) { ɵɵrestoreView(_r30); const ctx_r31 = ɵɵnextContext(2); return ctx_r31.handleYearChange($event); });\n    ɵɵpipe(4, \"translate\");\n    ɵɵtemplate(5, TimeFilterFormComponent_div_1_div_2_mat_option_5_Template, 2, 2, \"mat-option\", 13);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(6, \"div\", 8);\n    ɵɵelementStart(7, \"mat-form-field\");\n    ɵɵelementStart(8, \"mat-select\", 12);\n    ɵɵlistener(\"ngModelChange\", function TimeFilterFormComponent_div_1_div_2_Template_mat_select_ngModelChange_8_listener($event) { ɵɵrestoreView(_r30); const ctx_r32 = ɵɵnextContext(2); return ctx_r32.endYear = $event; })(\"selectionChange\", function TimeFilterFormComponent_div_1_div_2_Template_mat_select_selectionChange_8_listener($event) { ɵɵrestoreView(_r30); const ctx_r33 = ɵɵnextContext(2); return ctx_r33.handleYearChange($event); });\n    ɵɵpipe(9, \"translate\");\n    ɵɵtemplate(10, TimeFilterFormComponent_div_1_div_2_mat_option_10_Template, 2, 2, \"mat-option\", 13);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r19 = ɵɵnextContext(2);\n    ɵɵadvance(3);\n    ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(4, 6, \"igo.geo.timeFilter.startDate\"));\n    ɵɵproperty(\"ngModel\", ctx_r19.startYear);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", ctx_r19.startListYears);\n    ɵɵadvance(3);\n    ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(9, 8, \"igo.geo.timeFilter.endDate\"));\n    ɵɵproperty(\"ngModel\", ctx_r19.endYear);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", ctx_r19.endListYears);\n} }\nfunction TimeFilterFormComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\");\n    ɵɵtemplate(1, TimeFilterFormComponent_div_1_div_1_Template, 5, 5, \"div\", 2);\n    ɵɵtemplate(2, TimeFilterFormComponent_div_1_div_2_Template, 11, 10, \"div\", 0);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r1.isRange);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r1.isRange);\n} }\nfunction TimeFilterFormComponent_div_3_p_6_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\", 23);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r34 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ctx_r34.year);\n} }\nfunction TimeFilterFormComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r37 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 15);\n    ɵɵelementStart(1, \"span\");\n    ɵɵtext(2);\n    ɵɵelementEnd();\n    ɵɵelementStart(3, \"mat-slider\", 16);\n    ɵɵlistener(\"input\", function TimeFilterFormComponent_div_3_Template_mat_slider_input_3_listener($event) { ɵɵrestoreView(_r37); const ctx_r36 = ɵɵnextContext(); return ctx_r36.handleSliderYearChange($event); })(\"change\", function TimeFilterFormComponent_div_3_Template_mat_slider_change_3_listener($event) { ɵɵrestoreView(_r37); const ctx_r38 = ɵɵnextContext(); return ctx_r38.handleSliderYearChange($event); });\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"span\");\n    ɵɵtext(5);\n    ɵɵelementEnd();\n    ɵɵtemplate(6, TimeFilterFormComponent_div_3_p_6_Template, 2, 1, \"p\", 17);\n    ɵɵelementStart(7, \"div\", 18, 19);\n    ɵɵelementStart(9, \"mat-slide-toggle\", 20);\n    ɵɵlistener(\"change\", function TimeFilterFormComponent_div_3_Template_mat_slide_toggle_change_9_listener() { ɵɵrestoreView(_r37); const ctx_r39 = ɵɵnextContext(); return ctx_r39.toggleFilterState(); });\n    ɵɵpipe(10, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(11, \"button\", 21);\n    ɵɵlistener(\"click\", function TimeFilterFormComponent_div_3_Template_button_click_11_listener($event) { ɵɵrestoreView(_r37); const ctx_r40 = ɵɵnextContext(); return ctx_r40.playYear($event); });\n    ɵɵelement(12, \"mat-icon\", 22);\n    ɵɵelementEnd();\n    ɵɵelementStart(13, \"button\", 21);\n    ɵɵlistener(\"click\", function TimeFilterFormComponent_div_3_Template_button_click_13_listener($event) { ɵɵrestoreView(_r37); const ctx_r41 = ɵɵnextContext(); return ctx_r41.resetFilter($event); });\n    ɵɵelement(14, \"mat-icon\", 22);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ctx_r2.startYear);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"step\", ctx_r2.step);\n    ɵɵproperty(\"min\", ctx_r2.startYear)(\"max\", ctx_r2.endYear)(\"value\", ctx_r2.handleSliderValue())(\"color\", ctx_r2.color)(\"disabled\", !ctx_r2.options.enabled || !ctx_r2.layer.visible);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ctx_r2.endYear);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r2.options.enabled);\n    ɵɵadvance(3);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(10, 17, \"igo.geo.filter.toggleFilterState\"))(\"color\", ctx_r2.color)(\"checked\", ctx_r2.options.enabled)(\"disabled\", !ctx_r2.layer.visible);\n    ɵɵadvance(2);\n    ɵɵproperty(\"disabled\", !ctx_r2.options.enabled || !ctx_r2.layer.visible);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"svgIcon\", ctx_r2.playIcon);\n    ɵɵadvance(1);\n    ɵɵproperty(\"disabled\", !ctx_r2.options.enabled || !ctx_r2.layer.visible);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"svgIcon\", ctx_r2.resetIcon);\n} }\nfunction TimeFilterFormComponent_div_4_Template(rf, ctx) { if (rf & 1) {\n    const _r43 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 3);\n    ɵɵelementStart(1, \"mat-slider\", 24);\n    ɵɵlistener(\"input\", function TimeFilterFormComponent_div_4_Template_mat_slider_input_1_listener($event) { ɵɵrestoreView(_r43); const ctx_r42 = ɵɵnextContext(); return ctx_r42.handleSliderDateChange($event); })(\"selectionChange\", function TimeFilterFormComponent_div_4_Template_mat_slider_selectionChange_1_listener($event) { ɵɵrestoreView(_r43); const ctx_r44 = ɵɵnextContext(); return ctx_r44.handleSliderDateChange($event); });\n    ɵɵelementEnd();\n    ɵɵelementStart(2, \"p\", 23);\n    ɵɵtext(3);\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"button\", 25);\n    ɵɵlistener(\"click\", function TimeFilterFormComponent_div_4_Template_button_click_4_listener($event) { ɵɵrestoreView(_r43); const ctx_r45 = ɵɵnextContext(); return ctx_r45.playFilter($event); });\n    ɵɵelement(5, \"mat-icon\", 22);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"step\", ctx_r3.step);\n    ɵɵproperty(\"min\", ctx_r3.dateToNumber(ctx_r3.min))(\"max\", ctx_r3.dateToNumber(ctx_r3.max))(\"value\", ctx_r3.handleSliderValue());\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ctx_r3.handleSliderTooltip());\n    ɵɵadvance(2);\n    ɵɵpropertyInterpolate(\"svgIcon\", ctx_r3.playIcon);\n} }\nclass TimeFilterFormComponent {\n    constructor(dateAdapter) {\n        this.dateAdapter = dateAdapter;\n        this.color = 'primary';\n        this.listYears = [];\n        this.startListYears = [];\n        this.endListYears = [];\n        this.playIcon = 'play-circle';\n        this.resetIcon = 'replay';\n        this.change = new EventEmitter();\n        this.yearChange = new EventEmitter();\n        this.dateAdapter.setLocale('fr');\n    }\n    set currentValue(value) {\n        if (value) {\n            if (this.type !== TimeFilterType.YEAR) {\n                const valueArray = value.split('/');\n                if (valueArray.length > 0) {\n                    const startDate = new Date(valueArray[0]);\n                    const endDate = new Date(valueArray[1]);\n                    if (!isNaN(startDate.valueOf())) {\n                        this.startDate = startDate;\n                    }\n                    if (!isNaN(endDate.valueOf())) {\n                        this.endDate = endDate;\n                    }\n                }\n            }\n        }\n    }\n    get type() {\n        return this.options.type === undefined\n            ? TimeFilterType.DATE\n            : this.options.type;\n    }\n    get isRange() {\n        return this.options.range === undefined ||\n            this.options.style === TimeFilterStyle.SLIDER\n            ? false\n            : this.options.range;\n    }\n    get style() {\n        return this.options.style === undefined\n            ? TimeFilterStyle.SLIDER\n            : this.options.style;\n    }\n    get step() {\n        let step = 10800000;\n        if (this.options.step === undefined) {\n            switch (this.type) {\n                case TimeFilterType.DATE:\n                case TimeFilterType.DATETIME:\n                    step = 10800000;\n                    break;\n                case TimeFilterType.TIME:\n                    step = 3600000;\n                    break;\n                case TimeFilterType.YEAR:\n                    step = 31536000000;\n                    break;\n                default:\n                    step = 10800000;\n            }\n        }\n        else {\n            step = this.getStepDefinition(this.options.step);\n        }\n        return step;\n    }\n    get timeInterval() {\n        return this.options.timeInterval === undefined\n            ? 2000\n            : this.options.timeInterval;\n    }\n    get min() {\n        if (this.options.min) {\n            const min = new Date(this.options.min);\n            return new Date(min.getTime() + min.getTimezoneOffset() * 60000);\n        }\n        else {\n            return undefined;\n        }\n    }\n    get max() {\n        if (this.options.max) {\n            const max = new Date(this.options.max);\n            return new Date(max.getTime() + max.getTimezoneOffset() * 60000);\n        }\n        else {\n            return undefined;\n        }\n    }\n    get is() {\n        return this.options.range === undefined ? false : this.options.range;\n    }\n    ngOnInit() {\n        if (this.startDate === undefined) {\n            this.startDate = new Date(this.min);\n        }\n        if (this.endDate === undefined) {\n            this.endDate = new Date(this.max);\n        }\n        if (this.startYear === undefined) {\n            this.startYear = new Date(this.startDate).getFullYear();\n            this.initStartYear = this.startYear;\n        }\n        if (this.endYear === undefined) {\n            this.endYear = new Date(this.endDate).getFullYear();\n            this.initEndYear = this.endYear;\n        }\n        if (!this.isRange) {\n            for (let i = this.startYear; i <= this.endYear + 1; i++) {\n                this.listYears.push(i);\n            }\n        }\n        else {\n            for (let i = this.startYear; i < this.endYear; i++) {\n                this.startListYears.push(i);\n            }\n            for (let i = this.startYear + 1; i <= this.endYear; i++) {\n                this.endListYears.push(i);\n            }\n        }\n        this.options.enabled =\n            this.options.enabled === undefined ? true : this.options.enabled;\n        this.checkFilterValue();\n        if (this.options.enabled) {\n            if (!this.isRange && this.style === 'slider' && this.type === 'year') {\n                this.yearChange.emit(this.year);\n            }\n        }\n        else {\n            this.storeCurrentFilterValue();\n            this.yearChange.emit(undefined); // TODO: FIX THIS for ALL OTHER TYPES STYLES OR RANGE.\n        }\n    }\n    storeCurrentFilterValue() {\n        // TODO: FIX THIS for ALL OTHER TYPES STYLES OR RANGE.\n        if (!this.isRange &&\n            this.style === TimeFilterStyle.SLIDER &&\n            this.type === TimeFilterType.YEAR) {\n            this.options.value = this.year.toString();\n        }\n    }\n    checkFilterValue() {\n        const timeFromWms = this.layer.dataSource.ol.getParams().TIME;\n        if (!this.isRange &&\n            this.style === TimeFilterStyle.SLIDER &&\n            this.type === TimeFilterType.YEAR) {\n            if (timeFromWms) {\n                this.year = new Date(timeFromWms.toString()).getFullYear() + 1;\n            }\n            else if (this.options.value) {\n                this.year = new Date(this.options.value.toString()).getFullYear() + 1;\n            }\n            else {\n                this.year = new Date(this.min).getFullYear() + 1;\n            }\n        }\n        else if (this.isRange &&\n            this.style === TimeFilterStyle.CALENDAR &&\n            this.type === TimeFilterType.YEAR) {\n            if (timeFromWms) {\n                this.startYear = parseInt(timeFromWms.substr(0, 4), 10);\n                this.endYear = parseInt(timeFromWms.substr(5, 4), 10);\n                const newStartListYears = [];\n                const newEndListYears = [];\n                for (let i = this.initStartYear; i < this.endYear; i++) {\n                    newStartListYears.push(i);\n                }\n                for (let i = this.startYear + 1; i <= this.initEndYear; i++) {\n                    newEndListYears.push(i);\n                }\n                this.startListYears = newStartListYears;\n                this.endListYears = newEndListYears;\n            }\n        }\n        // TODO: FIX THIS for ALL OTHER TYPES STYLES OR RANGE.\n    }\n    handleDateChange(event) {\n        this.setupDateOutput();\n        this.applyTypeChange();\n        // Only if is range, use 2 dates to make the range\n        if (this.isRange) {\n            this.change.emit([this.startDate, this.endDate]);\n        }\n        else {\n            this.change.emit(this.startDate);\n        }\n    }\n    handleYearChange(event) {\n        if (this.isRange) {\n            this.endListYears = [];\n            for (let i = this.startYear + 1; i <= this.initEndYear; i++) {\n                this.endListYears.push(i);\n            }\n            this.startListYears = [];\n            for (let i = this.initStartYear + 1; i < this.endYear; i++) {\n                this.startListYears.push(i);\n            }\n            this.yearChange.emit([this.startYear, this.endYear]);\n        }\n        else {\n            this.yearChange.emit(this.year);\n        }\n    }\n    handleListYearChange(event) {\n        this.handleYearChange([this.startYear, this.endYear]);\n    }\n    handleListYearStartChange(event) {\n        this.change.emit([this.startDate, this.endDate]);\n    }\n    dateToNumber(date) {\n        let newDate;\n        if (date) {\n            newDate = new Date(date);\n        }\n        else {\n            newDate = new Date(this.min);\n        }\n        return newDate.getTime();\n    }\n    setSliderThumbLabel(label) {\n        const thumbLabel = this.findThumbLabel(this.mySlider._elementRef.nativeElement.childNodes);\n        if (thumbLabel) {\n            thumbLabel.textContent = label;\n        }\n    }\n    findThumbLabel(test) {\n        let thumbLabel;\n        test.forEach(value => {\n            if (value.className === 'mat-slider-thumb-label-text') {\n                thumbLabel = value;\n            }\n            if (value.children.length > 0 && !thumbLabel) {\n                thumbLabel = this.findThumbLabel(value.childNodes);\n            }\n        }, this);\n        return thumbLabel;\n    }\n    toggleFilterState() {\n        this.options.enabled = !this.options.enabled;\n        if (this.options.enabled) {\n            if (!this.isRange &&\n                TimeFilterStyle.SLIDER &&\n                this.type === TimeFilterType.YEAR) {\n                this.yearChange.emit(this.year);\n            }\n        }\n        else {\n            this.stopFilter();\n            this.storeCurrentFilterValue();\n            this.change.emit(undefined); // TODO: FIX THIS for ALL OTHER TYPES STYLES OR RANGE.\n        }\n    }\n    resetFilter(event) {\n        this.date = new Date(this.min);\n        this.year = this.date.getFullYear();\n        if (!this.isRange &&\n            TimeFilterStyle.SLIDER &&\n            this.type === TimeFilterType.YEAR) {\n            this.yearChange.emit(this.year);\n        }\n        else {\n            this.setupDateOutput();\n            this.change.emit(undefined); // TODO: FIX THIS for ALL OTHER TYPES STYLES OR RANGE.\n        }\n    }\n    playFilter(event) {\n        if (this.interval) {\n            this.stopFilter();\n        }\n        else {\n            this.playIcon = 'pause-circle';\n            this.interval = setInterval(that => {\n                let newMinDateNumber;\n                const maxDateNumber = new Date(that.max);\n                newMinDateNumber =\n                    that.date === undefined ? that.min.getTime() : that.date.getTime();\n                newMinDateNumber += that.mySlider.step;\n                that.date = new Date(newMinDateNumber);\n                if (newMinDateNumber > maxDateNumber.getTime()) {\n                    that.stopFilter();\n                }\n                that.handleDateChange({ value: that.date, date: that.date });\n            }, this.timeInterval, this);\n        }\n    }\n    playYear(event) {\n        if (this.year + this.mySlider.step >\n            this.max.getFullYear() + this.mySlider.step) {\n            this.stopFilter();\n            this.resetFilter(event);\n        }\n        if (this.interval) {\n            this.stopFilter();\n        }\n        else {\n            this.playIcon = 'pause-circle';\n            this.interval = setInterval(() => {\n                if ((this.year + this.mySlider.step) > this.max.getFullYear()) {\n                    this.stopFilter();\n                }\n                else {\n                    this.year = this.year + this.mySlider.step;\n                }\n                this.yearChange.emit(this.year);\n            }, this.timeInterval, this);\n        }\n    }\n    stopFilter() {\n        if (this.interval) {\n            clearInterval(this.interval);\n        }\n        this.interval = undefined;\n        this.playIcon = 'play-circle';\n    }\n    handleSliderDateChange(event) {\n        this.date = new Date(event.value);\n        this.setSliderThumbLabel(this.handleSliderTooltip());\n        this.handleDateChange(event);\n    }\n    handleSliderYearChange(event) {\n        this.year = event.value;\n        this.yearChange.emit(this.year);\n    }\n    handleSliderValue() {\n        if (this.options.current === true || !this.min) {\n            const currentDate = new Date();\n            this.date = this.getRoundedDate(currentDate);\n        }\n        if (this.type === TimeFilterType.YEAR) {\n            return this.year;\n        }\n        else {\n            return this.date === undefined ? this.min.getTime() : this.date.getTime();\n        }\n    }\n    handleSliderTooltip() {\n        let label;\n        switch (this.type) {\n            case TimeFilterType.DATE:\n                label =\n                    this.date === undefined\n                        ? this.min.toDateString()\n                        : this.date.toDateString();\n                break;\n            case TimeFilterType.TIME:\n                label =\n                    this.date === undefined\n                        ? this.min.toTimeString()\n                        : this.date.toTimeString();\n                break;\n            // datetime\n            default:\n                label =\n                    this.date === undefined\n                        ? this.min.toUTCString()\n                        : this.date.toUTCString();\n                break;\n        }\n        return label;\n    }\n    setupDateOutput() {\n        if (this.style === TimeFilterStyle.SLIDER) {\n            this.startDate = new Date(this.date);\n            this.startDate.setSeconds(-(this.step / 1000));\n            this.endDate = new Date(this.startDate);\n            this.endDate.setSeconds(this.step / 1000);\n        }\n        else if (!this.isRange && !!this.date) {\n            this.endDate = new Date(this.date);\n            this.startDate = new Date(this.date);\n        }\n        else if (this.isRange && (!!this.date || !this.date)) {\n            this.startDate =\n                this.startDate === undefined ? new Date(this.min) : this.startDate;\n            this.endDate =\n                this.endDate === undefined ? new Date(this.max) : this.endDate;\n        }\n        else if (!this.date) {\n            this.startDate =\n                this.startDate === undefined ? new Date(this.min) : this.startDate;\n            this.endDate =\n                this.endDate === undefined ? new Date(this.max) : this.endDate;\n        }\n    }\n    applyTypeChange() {\n        switch (this.type) {\n            case TimeFilterType.DATE:\n                if (this.startDate !== undefined || this.endDate !== undefined) {\n                    this.startDate.setHours(0);\n                    this.startDate.setMinutes(0);\n                    this.startDate.setSeconds(0);\n                    this.endDate.setHours(23);\n                    this.endDate.setMinutes(59);\n                    this.endDate.setSeconds(59);\n                }\n                break;\n            case TimeFilterType.TIME:\n                if (this.style === TimeFilterStyle.CALENDAR) {\n                    if (this.startDate.getDay() !== this.min.getDay()) {\n                        const selectedHour = this.startDate.getHours();\n                        const selectedMinute = this.startDate.getMinutes();\n                        this.startDate = this.min;\n                        this.startDate.setHours(selectedHour);\n                        this.startDate.setMinutes(selectedMinute);\n                    }\n                    if (this.endDate.getDay() !== this.min.getDay()) {\n                        const selectedHour = this.endDate.getHours();\n                        const selectedMinute = this.endDate.getMinutes();\n                        this.endDate = this.min;\n                        this.endDate.setHours(selectedHour);\n                        this.endDate.setMinutes(selectedMinute);\n                    }\n                }\n                if (!this.isRange && this.step > 60 * 60 * 1000) {\n                    this.startDate.setMinutes(0);\n                    this.startDate.setSeconds(0);\n                    this.endDate.setMinutes(59);\n                    this.endDate.setSeconds(59);\n                }\n                break;\n            // datetime\n            default:\n            // do nothing\n        }\n    }\n    getRangeMinDate() {\n        return this.startDate === undefined ? this.min : this.startDate;\n    }\n    getRangeMaxDate() {\n        return this.endDate === undefined ? this.max : this.endDate;\n    }\n    /**\n     * Round date at a certain time, 10 minutes by Default\n     * @param date - Date to Round\n     * @param atMinute - round to closest 'atMinute' minute, rounded 10 by default\n     * @return the rounded date\n     */\n    getRoundedDate(date, atMinute = 10) {\n        const coeff = 1000 * 60 * atMinute;\n        return new Date(Math.round(date.getTime() / coeff) * coeff);\n    }\n    /**\n     * Get the step (period) definition from the layer dimension tag\n     * @param step The step as ISO 8601 example: PT10M for 10 Minutes\n     * @return the duration in milliseconds\n     */\n    getStepDefinition(step) {\n        return duration(step).asMilliseconds();\n    }\n}\nTimeFilterFormComponent.ɵfac = function TimeFilterFormComponent_Factory(t) { return new (t || TimeFilterFormComponent)(ɵɵdirectiveInject(DateAdapter)); };\nTimeFilterFormComponent.ɵcmp = ɵɵdefineComponent({ type: TimeFilterFormComponent, selectors: [[\"igo-time-filter-form\"]], viewQuery: function TimeFilterFormComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵviewQuery(MatSlider, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.mySlider = _t.first);\n    } }, inputs: { layer: \"layer\", options: \"options\", currentValue: \"currentValue\" }, outputs: { change: \"change\", yearChange: \"yearChange\" }, decls: 5, vars: 4, consts: [[4, \"ngIf\"], [\"class\", \"igo-col igo-col-100 igo-col-100-m mat-typography\", 4, \"ngIf\"], [\"class\", \"igo-col igo-col-100 igo-col-100-m\", 4, \"ngIf\"], [1, \"igo-col\", \"igo-col-100\", \"igo-col-100-m\"], [\"matSuffix\", \"\", 3, \"for\"], [\"openOnFocus\", \"true\", \"timeInterval\", \"5\", 3, \"type\"], [\"datetimePicker\", \"\"], [\"matInput\", \"\", \"autocomplete\", \"false\", \"readonly\", \"readonly\", 3, \"placeholder\", \"matDatetimepicker\", \"ngModel\", \"min\", \"max\", \"ngModelChange\", \"dateChange\"], [1, \"igo-col\", \"igo-col-100\"], [\"minDatetimePicker\", \"\"], [\"matInput\", \"\", \"autocomplete\", \"false\", \"readonly\", \"readonly\", 3, \"placeholder\", \"matDatetimepicker\", \"ngModel\", \"min\", \"max\", \"ngModelChange\", \"input\", \"dateChange\"], [\"maxDatetimePicker\", \"\"], [3, \"placeholder\", \"ngModel\", \"ngModelChange\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"igo-col\", \"igo-col-100\", \"igo-col-100-m\", \"mat-typography\"], [\"id\", \"time-slider\", \"tickInterval\", \"auto\", \"thumbLabel\", \"\", 3, \"step\", \"min\", \"max\", \"value\", \"color\", \"disabled\", \"input\", \"change\"], [\"class\", \"date-below\", 4, \"ngIf\"], [1, \"igo-layer-actions-container\"], [\"actions\", \"\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"checked\", \"disabled\", \"change\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [3, \"svgIcon\"], [1, \"date-below\"], [\"id\", \"time-slider\", \"tickInterval\", \"auto\", \"thumbLabel\", \"\", 3, \"step\", \"min\", \"max\", \"value\", \"input\", \"selectionChange\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"click\"]], template: function TimeFilterFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, TimeFilterFormComponent_div_0_Template, 3, 2, \"div\", 0);\n        ɵɵtemplate(1, TimeFilterFormComponent_div_1_Template, 3, 2, \"div\", 0);\n        ɵɵelement(2, \"br\");\n        ɵɵtemplate(3, TimeFilterFormComponent_div_3_Template, 15, 19, \"div\", 1);\n        ɵɵtemplate(4, TimeFilterFormComponent_div_4_Template, 6, 6, \"div\", 2);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.style === \"calendar\" && ctx.type !== \"year\");\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.style === \"calendar\" && ctx.type === \"year\");\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", !ctx.isRange && ctx.style === \"slider\" && ctx.type === \"year\");\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.style === \"slider\" && ctx.type !== \"year\");\n    } }, directives: [NgIf, MatFormField, MatDatetimepickerToggle, MatSuffix, MatDatetimepicker, MatInput, MatDatetimepickerInput, DefaultValueAccessor, NgControlStatus, NgModel, MatSelect, NgForOf, MatOption, MatSlider, MatSlideToggle, MatTooltip, MatButton, MatIcon], pipes: [TranslatePipe], styles: [\".igo-layer-filters-container[_ngcontent-%COMP%]{padding-left:5px}mat-slider[_ngcontent-%COMP%]     div.mat-slider-thumb-label{height:32px;margin:0 auto;width:32px}mat-slider[_ngcontent-%COMP%]     span.mat-slider-thumb-label-text{font-size:10px}#time-slider[_ngcontent-%COMP%]{margin:0 auto;width:70%}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){#time-slider[_ngcontent-%COMP%]{margin:0 auto;width:60%}}.date-below[_ngcontent-%COMP%]{margin:0}mat-form-field[_ngcontent-%COMP%]{text-align:center}mat-datetimepicker-toggle[_ngcontent-%COMP%]     .mat-icon{padding-bottom:30px}.igo-layer-actions-container[_ngcontent-%COMP%] > .mat-slide-toggle[_ngcontent-%COMP%]{vertical-align:middle}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(TimeFilterFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-time-filter-form',\n                templateUrl: './time-filter-form.component.html',\n                styleUrls: ['./time-filter-form.component.scss']\n            }]\n    }], function () { return [{ type: DateAdapter }]; }, { layer: [{\n            type: Input\n        }], options: [{\n            type: Input\n        }], currentValue: [{\n            type: Input\n        }], change: [{\n            type: Output\n        }], yearChange: [{\n            type: Output\n        }], mySlider: [{\n            type: ViewChild,\n            args: [MatSlider]\n        }] }); })();\n\nconst _c0$a = function (a0) { return { disabled: a0 }; };\nfunction TimeFilterItemComponent_mat_list_item_0_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 10);\n    ɵɵlistener(\"click\", function TimeFilterItemComponent_mat_list_item_0_button_4_Template_button_click_0_listener() { ɵɵrestoreView(_r6); const ctx_r5 = ɵɵnextContext(2); return ctx_r5.layer.visible = !ctx_r5.layer.visible; });\n    ɵɵpipe(1, \"translate\");\n    ɵɵpipe(2, \"translate\");\n    ɵɵelement(3, \"mat-icon\", 11);\n    ɵɵpipe(4, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵɵnextContext(2);\n    ɵɵproperty(\"color\", ctx_r4.layer.visible ? \"primary\" : \"default\")(\"matTooltip\", ctx_r4.layer.visible ? ɵɵpipeBind1(1, 4, \"igo.geo.layer.hideLayer\") : ɵɵpipeBind1(2, 6, \"igo.geo.layer.showLayer\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngClass\", ɵɵpureFunction1(10, _c0$a, !ɵɵpipeBind1(4, 8, ctx_r4.inResolutionRange$)))(\"svgIcon\", ctx_r4.layer.visible ? \"eye\" : \"eye-off\");\n} }\nconst _c1$4 = function (a0) { return { \"cursor\": a0 }; };\nfunction TimeFilterItemComponent_mat_list_item_0_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\");\n    ɵɵelementStart(1, \"mat-icon\", 7);\n    ɵɵlistener(\"click\", function TimeFilterItemComponent_mat_list_item_0_Template_mat_icon_click_1_listener() { ɵɵrestoreView(_r8); const ctx_r7 = ɵɵnextContext(); return ctx_r7.toggleFiltersCollapsed(); });\n    ɵɵelementEnd();\n    ɵɵelementStart(2, \"h4\", 8);\n    ɵɵlistener(\"click\", function TimeFilterItemComponent_mat_list_item_0_Template_h4_click_2_listener() { ɵɵrestoreView(_r8); const ctx_r9 = ɵɵnextContext(); return ctx_r9.toggleLegendOnClick(); });\n    ɵɵtext(3);\n    ɵɵelementEnd();\n    ɵɵtemplate(4, TimeFilterItemComponent_mat_list_item_0_button_4_Template, 5, 12, \"button\", 9);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    const _r1 = ɵɵreference(2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"target\", _r1)(\"collapsed\", ctx_r0.filtersCollapsed);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngStyle\", ɵɵpureFunction1(5, _c1$4, ctx_r0.filtersCollapsed ? \"default\" : \"pointer\"));\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ctx_r0.layer.title);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.header);\n} }\nfunction TimeFilterItemComponent_igo_layer_legend_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-layer-legend\", 12);\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵproperty(\"layer\", ctx_r3.layer);\n} }\nclass TimeFilterItemComponent {\n    constructor(timeFilterService) {\n        this.timeFilterService = timeFilterService;\n        this.color = 'primary';\n        this.showLegend$ = new BehaviorSubject(false);\n        this.inResolutionRange$ = new BehaviorSubject(true);\n        this.filtersCollapsed = false;\n        this.header = true;\n    }\n    get datasource() {\n        return this.layer.dataSource;\n    }\n    ngOnInit() {\n        const resolution$ = this.layer.map.viewController.resolution$;\n        this.resolution$$ = resolution$.subscribe(() => {\n            this.inResolutionRange$.next(this.layer.isInResolutionsRange);\n        });\n    }\n    ngOnDestroy() {\n        this.resolution$$.unsubscribe();\n    }\n    handleYearChange(year) {\n        this.timeFilterService.filterByYear(this.datasource, year);\n    }\n    handleDateChange(date) {\n        this.timeFilterService.filterByDate(this.datasource, date);\n    }\n    toggleLegend(collapsed) {\n        this.layer.legendCollapsed = collapsed;\n        this.showLegend$.next(!collapsed);\n    }\n    toggleLegendOnClick() {\n        if (!this.filtersCollapsed) {\n            this.toggleLegend(this.showLegend$.value);\n        }\n    }\n    setVisible() {\n        this.layer.visible = true;\n    }\n    toggleFiltersCollapsed() {\n        this.filtersCollapsed = !this.filtersCollapsed;\n    }\n}\nTimeFilterItemComponent.ɵfac = function TimeFilterItemComponent_Factory(t) { return new (t || TimeFilterItemComponent)(ɵɵdirectiveInject(TimeFilterService)); };\nTimeFilterItemComponent.ɵcmp = ɵɵdefineComponent({ type: TimeFilterItemComponent, selectors: [[\"igo-time-filter-item\"]], inputs: { header: \"header\", layer: \"layer\" }, decls: 8, vars: 7, consts: [[4, \"ngIf\"], [1, \"igo-datasource-filters-container\"], [\"filters\", \"\"], [1, \"igo-layer-legend-container\"], [\"legend\", \"\"], [3, \"layer\", 4, \"ngIf\"], [3, \"layer\", \"options\", \"currentValue\", \"change\", \"yearChange\"], [\"mat-list-avatar\", \"\", \"igoCollapse\", \"\", \"svgIcon\", \"chevron-up\", 1, \"igo-chevron\", 3, \"target\", \"collapsed\", \"click\"], [\"matLine\", \"\", 3, \"ngStyle\", \"click\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\"], [3, \"ngClass\", \"svgIcon\"], [3, \"layer\"]], template: function TimeFilterItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, TimeFilterItemComponent_mat_list_item_0_Template, 5, 7, \"mat-list-item\", 0);\n        ɵɵelementStart(1, \"div\", 1, 2);\n        ɵɵelementStart(3, \"div\", 3, 4);\n        ɵɵtemplate(5, TimeFilterItemComponent_igo_layer_legend_5_Template, 1, 1, \"igo-layer-legend\", 5);\n        ɵɵpipe(6, \"async\");\n        ɵɵelementEnd();\n        ɵɵelementStart(7, \"igo-time-filter-form\", 6);\n        ɵɵlistener(\"change\", function TimeFilterItemComponent_Template_igo_time_filter_form_change_7_listener($event) { return ctx.handleDateChange($event); })(\"yearChange\", function TimeFilterItemComponent_Template_igo_time_filter_form_yearChange_7_listener($event) { return ctx.handleYearChange($event); });\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.header);\n        ɵɵadvance(5);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(6, 5, ctx.showLegend$));\n        ɵɵadvance(2);\n        ɵɵproperty(\"layer\", ctx.layer)(\"options\", ctx.datasource.options.timeFilter)(\"currentValue\", ctx.datasource.options.params.TIME);\n    } }, styles: [\"[_nghost-%COMP%]{overflow:hidden}.igo-datasource-filters-container[_ngcontent-%COMP%]{display:inline-block;padding-top:5px;text-align:center;width:100%}.igo-layer-legend-container[_ngcontent-%COMP%]{padding-left:1.125em;width:calc(100% - 18px)}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(TimeFilterItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-time-filter-item',\n                templateUrl: './time-filter-item.component.html',\n                styleUrls: ['./time-filter-item.component.scss']\n            }]\n    }], function () { return [{ type: TimeFilterService }]; }, { header: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }] }); })();\n\nfunction TimeFilterListComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-time-filter-item\", 2);\n} if (rf & 2) {\n    const layer_r1 = ctx.$implicit;\n    ɵɵproperty(\"header\", true)(\"layer\", layer_r1);\n} }\nclass TimeFilterListComponent {\n    constructor(cdRef) {\n        this.cdRef = cdRef;\n        this._layers = [];\n    }\n    get layers() {\n        return this._layers;\n    }\n    set layers(value) {\n        this._layers = value;\n        this.cdRef.detectChanges();\n    }\n}\nTimeFilterListComponent.ɵfac = function TimeFilterListComponent_Factory(t) { return new (t || TimeFilterListComponent)(ɵɵdirectiveInject(ChangeDetectorRef)); };\nTimeFilterListComponent.ɵcmp = ɵɵdefineComponent({ type: TimeFilterListComponent, selectors: [[\"igo-time-filter-list\"]], inputs: { layers: \"layers\" }, decls: 3, vars: 6, consts: [[3, \"navigation\", \"selection\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"igoListItem\", \"\", 3, \"header\", \"layer\"]], template: function TimeFilterListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-list\", 0);\n        ɵɵtemplate(1, TimeFilterListComponent_ng_template_1_Template, 1, 2, \"ng-template\", 1);\n        ɵɵpipe(2, \"filterableDataSource\");\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"navigation\", false)(\"selection\", false);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind2(2, 3, ctx.layers, \"time\"));\n    } }, encapsulation: 2, changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(TimeFilterListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-time-filter-list',\n                templateUrl: './time-filter-list.component.html',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ChangeDetectorRef }]; }, { layers: [{\n            type: Input\n        }] }); })();\n\nclass TimeFilterListBindingDirective {\n    constructor(component, mapService) {\n        this.mapService = mapService;\n        this.component = component;\n    }\n    ngOnInit() {\n        // Override input layers\n        this.component.layers = [];\n        this.layers$$ = this.mapService.getMap().layers$.subscribe(layers => {\n            this.component.layers = layers;\n        });\n    }\n    ngOnDestroy() {\n        this.layers$$.unsubscribe();\n    }\n}\nTimeFilterListBindingDirective.ɵfac = function TimeFilterListBindingDirective_Factory(t) { return new (t || TimeFilterListBindingDirective)(ɵɵdirectiveInject(TimeFilterListComponent, 2), ɵɵdirectiveInject(MapService)); };\nTimeFilterListBindingDirective.ɵdir = ɵɵdefineDirective({ type: TimeFilterListBindingDirective, selectors: [[\"\", \"igoTimeFilterListBinding\", \"\"]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(TimeFilterListBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoTimeFilterListBinding]'\n            }]\n    }], function () { return [{ type: TimeFilterListComponent, decorators: [{\n                type: Self\n            }] }, { type: MapService }]; }, null); })();\n\nclass WktService {\n    constructor() { }\n    wktToFeature(wkt, wktProj, featureProj) {\n        return new olWKT().readFeature(wkt, {\n            dataProjection: wktProj,\n            featureProjection: featureProj\n        });\n    }\n    extentToWkt(epsgTO, extent, extentProj) {\n        let currentExtent = transformExtent(extent, extentProj, epsgTO);\n        currentExtent = this.roundCoordinateArray(currentExtent, epsgTO, 0);\n        const wktPoly = `POLYGON((\n      ${extent[0]} ${extent[1]},\n      ${extent[0]} ${extent[3]},\n      ${extent[2]} ${extent[3]},\n      ${extent[2]} ${extent[1]},\n      ${extent[0]} ${extent[1]}))`;\n        const wktLine = `LINESTRING(\n      ${extent[0]} ${extent[1]},\n      ${extent[0]} ${extent[3]},\n      ${extent[2]} ${extent[3]},\n      ${extent[2]} ${extent[1]},\n      ${extent[0]} ${extent[1]})`;\n        const wktMultiPoints = `MULTIPOINT(\n        ${extent[0]} ${extent[1]},\n        ${extent[0]} ${extent[3]},\n        ${extent[2]} ${extent[3]},\n        ${extent[2]} ${extent[1]})`;\n        return {\n            wktPoly,\n            wktLine,\n            wktMultiPoints\n        };\n    }\n    roundCoordinateArray(coordinateArray, projection, decimal = 0) {\n        const lproj = get(projection);\n        const units = lproj.getUnits();\n        const olUnits = ['ft', 'm', 'us-ft'];\n        if (olUnits.indexOf(units) !== -1) {\n            coordinateArray = this.roundArray(coordinateArray, decimal);\n        }\n        return coordinateArray;\n    }\n    roundArray(array, decimal = 0) {\n        let x = 0;\n        while (x < array.length) {\n            array[x] = array[x].toFixed(decimal);\n            x++;\n        }\n        return array;\n    }\n    snrcToWkt(snrc, epsgTO) {\n        snrc = snrc.toLowerCase();\n        let wktPoly;\n        const ew = {\n            1: { from: -56, to: -64 },\n            2: { from: -64, to: -72 },\n            3: { from: -72, to: -80 },\n            4: { from: -80, to: -88 },\n            5: { from: -88, to: -96 },\n            6: { from: -96, to: -104 },\n            7: { from: -104, to: -112 },\n            8: { from: -112, to: -120 },\n            9: { from: -120, to: -128 },\n            10: { from: -128, to: -136 }\n        };\n        const sn = {\n            1: { from: 44, to: 48 },\n            2: { from: 48, to: 52 },\n            3: { from: 52, to: 56 },\n            4: { from: 56, to: 60 },\n            5: { from: 60, to: 64 },\n            6: { from: 64, to: 68 },\n            7: { from: 68, to: 72 },\n            8: { from: 72, to: 76 },\n            9: { from: 76, to: -128 }\n        };\n        const snrc250kIndex = [\n            ['m', 'n', 'o', 'p'],\n            ['l', 'k', 'j', 'i'],\n            ['e', 'f', 'g', 'h'],\n            ['d', 'c', 'b', 'a']\n        ];\n        const snrc50kIndex = [\n            ['13', '14', '15', '16'],\n            ['12', '11', '10', '09'],\n            ['05', '06', '07', '08'],\n            ['04', '03', '02', '01']\n        ];\n        const checkSNRC50k = /\\d{2,3}[a-p][0,1][0-9]/gi;\n        const checkSNRC250k = /\\d{2,3}[a-p]/gi;\n        const checkSNRC1m = /\\d{2,3}/gi;\n        let snrc1m = false;\n        let snrc250k = false;\n        let snrc50k = false;\n        if (checkSNRC50k.test(snrc)) {\n            snrc50k = true;\n        }\n        else {\n            if (checkSNRC250k.test(snrc)) {\n                snrc250k = true;\n            }\n            else {\n                if (checkSNRC1m.test(snrc)) {\n                    snrc1m = true;\n                }\n            }\n        }\n        if (snrc1m) {\n            snrc += 'a01';\n        }\n        else if (snrc250k) {\n            snrc += '01';\n        }\n        if (/\\d{2,3}[a-p][0,1][0-9]/gi.test(snrc)) {\n            const regex1m = /(?=[a-p])/gi;\n            const ar1m = snrc.split(regex1m);\n            const part1m = ar1m[0];\n            const part250k = ar1m[1][0];\n            const part50k = ar1m[1].split(part250k)[1];\n            let separator = 1;\n            if (part1m.length === 3) {\n                separator = 2;\n            }\n            const partEW = part1m.substring(0, separator);\n            const partSN = part1m.substring(separator);\n            const unit1mEW = 8;\n            const unit1mSN = 4;\n            const unit250kEW = 2;\n            const unit250kSN = 1;\n            const unit50kEW = 0.5;\n            const unit50kSN = 0.25;\n            let index250kEW = 0;\n            let index250kSN = 0;\n            let index50kEW = 0;\n            let index50kSN = 0;\n            snrc250kIndex.forEach(element => {\n                if (element.indexOf(part250k) !== -1) {\n                    index250kSN = snrc250kIndex.indexOf(element);\n                    index250kEW = element.indexOf(part250k);\n                }\n            });\n            snrc50kIndex.forEach(element => {\n                if (element.indexOf(part50k) !== -1) {\n                    index50kSN = snrc50kIndex.indexOf(element);\n                    index50kEW = element.indexOf(part50k);\n                }\n            });\n            let increment250kEW = 0;\n            let increment250kSN = 0;\n            let increment50kEW = 0;\n            let increment50kSN = 0;\n            let unitPerTypeEW = unit1mEW;\n            let unitPerTypeSN = unit1mSN;\n            if (snrc250k) {\n                increment250kEW = index250kEW * unit250kEW;\n                increment250kSN = index250kSN * unit250kSN;\n                increment50kEW = 0;\n                increment50kSN = 0;\n                unitPerTypeEW = unit250kEW;\n                unitPerTypeSN = unit250kSN;\n            }\n            else if (snrc50k) {\n                increment250kEW = index250kEW * unit250kEW;\n                increment250kSN = index250kSN * unit250kSN;\n                increment50kEW = index50kEW * unit50kEW;\n                increment50kSN = index50kSN * unit50kSN;\n                unitPerTypeEW = unit50kEW;\n                unitPerTypeSN = unit50kSN;\n            }\n            const coord = {\n                ul: [\n                    ew[partEW].to + increment250kEW + increment50kEW,\n                    sn[partSN].to - increment250kSN - increment50kSN\n                ]\n            };\n            coord.lr = [\n                coord.ul[0] + unitPerTypeEW,\n                coord.ul[1] - unitPerTypeSN\n            ];\n            coord.ur = [coord.ul[0], coord.ul[1] - unitPerTypeSN];\n            coord.ll = [coord.ul[0] + unitPerTypeEW, coord.ul[1]];\n            coord.ul = transform([coord.ul[0], coord.ul[1]], 'EPSG:4326', epsgTO);\n            coord.lr = transform([coord.lr[0], coord.lr[1]], 'EPSG:4326', epsgTO);\n            coord.ur = transform([coord.ur[0], coord.ur[1]], 'EPSG:4326', epsgTO);\n            coord.ll = transform([coord.ll[0], coord.ll[1]], 'EPSG:4326', epsgTO);\n            // Rounded coordinate to shorten url in get\n            coord.ul = this.roundCoordinateArray(coord.ul, epsgTO, 0);\n            coord.lr = this.roundCoordinateArray(coord.lr, epsgTO, 0);\n            coord.ur = this.roundCoordinateArray(coord.ur, epsgTO, 0);\n            coord.ll = this.roundCoordinateArray(coord.ll, epsgTO, 0);\n            wktPoly =\n                'POLYGON((' +\n                    [\n                        coord.ul.join(' '),\n                        coord.ur.join(' '),\n                        coord.lr.join(' '),\n                        coord.ll.join(' '),\n                        coord.ul.join(' ')\n                    ].join(',') +\n                    '))';\n            const wktLine = 'LINESTRING(' +\n                [\n                    coord.ul.join(' '),\n                    coord.ur.join(' '),\n                    coord.lr.join(' '),\n                    coord.ll.join(' '),\n                    coord.ul.join(' ')\n                ].join(',') +\n                ')';\n            const wktMultiPoints = 'MULTIPOINT(' +\n                [\n                    coord.ul.join(' '),\n                    coord.ur.join(' '),\n                    coord.lr.join(' '),\n                    coord.ll.join(' ')\n                ].join(',') +\n                ')';\n            return {\n                wktPoly,\n                wktLine,\n                wktMultiPoints\n            };\n        }\n    }\n}\nWktService.ɵfac = function WktService_Factory(t) { return new (t || WktService)(); };\nWktService.ɵprov = ɵɵdefineInjectable({ token: WktService, factory: WktService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(WktService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nfunction OgcFilterFormComponent_mat_form_field_13_mat_option_10_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 23);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const field_r12 = ctx.$implicit;\n    ɵɵproperty(\"value\", field_r12.alias)(\"id\", field_r12.name)(\"matTooltip\", field_r12.alias);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", field_r12.alias, \" \");\n} }\nfunction OgcFilterFormComponent_mat_form_field_13_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 24);\n    ɵɵlistener(\"click\", function OgcFilterFormComponent_mat_form_field_13_button_12_Template_button_click_0_listener() { ɵɵrestoreView(_r14); const ctx_r13 = ɵɵnextContext(2); return ctx_r13.clearSelectedField(); });\n    ɵɵelement(1, \"mat-icon\", 25);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r11 = ɵɵnextContext(2);\n    ɵɵproperty(\"disabled\", !ctx_r11.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_13_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\", 17);\n    ɵɵlistener(\"mouseenter\", function OgcFilterFormComponent_mat_form_field_13_Template_mat_form_field_mouseenter_0_listener() { ɵɵrestoreView(_r16); const ctx_r15 = ɵɵnextContext(); return ctx_r15.inputClearable = \"selectField\"; })(\"mouseleave\", function OgcFilterFormComponent_mat_form_field_13_Template_mat_form_field_mouseleave_0_listener() { ɵɵrestoreView(_r16); const ctx_r17 = ɵɵnextContext(); return ctx_r17.inputClearable = undefined; });\n    ɵɵelementStart(1, \"input\", 18);\n    ɵɵlistener(\"input\", function OgcFilterFormComponent_mat_form_field_13_Template_input_input_1_listener($event) { ɵɵrestoreView(_r16); const ctx_r18 = ɵɵnextContext(); return ctx_r18.updateFieldsList($event.target.value); });\n    ɵɵpipe(2, \"translate\");\n    ɵɵpipe(3, \"async\");\n    ɵɵpipe(4, \"async\");\n    ɵɵpipe(5, \"async\");\n    ɵɵpipe(6, \"async\");\n    ɵɵpipe(7, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(8, \"mat-autocomplete\", 19, 20);\n    ɵɵlistener(\"optionSelected\", function OgcFilterFormComponent_mat_form_field_13_Template_mat_autocomplete_optionSelected_8_listener($event) { ɵɵrestoreView(_r16); const ctx_r19 = ɵɵnextContext(); return ctx_r19.changeField($event.option.id); });\n    ɵɵtemplate(10, OgcFilterFormComponent_mat_form_field_13_mat_option_10_Template, 2, 4, \"mat-option\", 21);\n    ɵɵpipe(11, \"async\");\n    ɵɵelementEnd();\n    ɵɵtemplate(12, OgcFilterFormComponent_mat_form_field_13_button_12_Template, 2, 1, \"button\", 22);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r9 = ɵɵreference(9);\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"floatLabel\", ctx_r0.floatLabel);\n    ɵɵadvance(1);\n    ɵɵproperty(\"placeholder\", ɵɵpipeBind1(2, 8, \"igo.geo.sourceFields.selectField\"))(\"disabled\", !ctx_r0.currentFilter.active)(\"matAutocomplete\", _r9)(\"value\", ɵɵpipeBind1(3, 10, ctx_r0.selectedField$) ? ɵɵpipeBind1(4, 12, ctx_r0.selectedField$).alias : \"\")(\"matTooltip\", ɵɵpipeBind1(5, 14, ctx_r0.selectedField$) ? ɵɵpipeBind1(6, 16, ctx_r0.selectedField$).alias : ɵɵpipeBind1(7, 18, \"igo.geo.sourceFields.selectField\"));\n    ɵɵadvance(9);\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(11, 20, ctx_r0.filteredFields$));\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r0.currentFilter.propertyName && ctx_r0.inputClearable === \"selectField\" && ctx_r0.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_option_24_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 3);\n    ɵɵpipe(1, \"translate\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const operator_r20 = ctx.$implicit;\n    ɵɵproperty(\"value\", operator_r20.key)(\"matTooltip\", ɵɵpipeBind1(1, 3, \"igo.geo.operators.tooltip.\" + operator_r20.key));\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(3, 5, \"igo.geo.operators.\" + operator_r20.key), \" \");\n} }\nfunction OgcFilterFormComponent_mat_form_field_27_mat_option_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 29);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const igoSpatialSelector_r22 = ctx.$implicit;\n    ɵɵproperty(\"value\", igoSpatialSelector_r22.type);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.spatialSelector.\" + igoSpatialSelector_r22.type), \" \");\n} }\nfunction OgcFilterFormComponent_mat_form_field_27_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\", 26);\n    ɵɵelementStart(1, \"mat-select\", 27);\n    ɵɵlistener(\"selectionChange\", function OgcFilterFormComponent_mat_form_field_27_Template_mat_select_selectionChange_1_listener($event) { ɵɵrestoreView(_r24); const ctx_r23 = ɵɵnextContext(); return ctx_r23.changeSpatialSelector($event.value); });\n    ɵɵtemplate(2, OgcFilterFormComponent_mat_form_field_27_mat_option_2_Template, 3, 4, \"mat-option\", 28);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"disabled\", !ctx_r2.currentFilter.active)(\"value\", ctx_r2.currentFilter.igoSpatialSelector);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r2.igoSpatialSelectors);\n} }\nfunction OgcFilterFormComponent_mat_form_field_29_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 33);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const value_r28 = ctx.$implicit;\n    ɵɵproperty(\"value\", value_r28)(\"matTooltip\", value_r28);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", value_r28, \" \");\n} }\nfunction OgcFilterFormComponent_mat_form_field_29_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r30 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 24);\n    ɵɵlistener(\"click\", function OgcFilterFormComponent_mat_form_field_29_button_7_Template_button_click_0_listener() { ɵɵrestoreView(_r30); const ctx_r29 = ɵɵnextContext(2); return ctx_r29.clearProperty(); });\n    ɵɵelement(1, \"mat-icon\", 25);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r27 = ɵɵnextContext(2);\n    ɵɵproperty(\"disabled\", !ctx_r27.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_29_Template(rf, ctx) { if (rf & 1) {\n    const _r32 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\", 30);\n    ɵɵlistener(\"mouseenter\", function OgcFilterFormComponent_mat_form_field_29_Template_mat_form_field_mouseenter_0_listener() { ɵɵrestoreView(_r32); const ctx_r31 = ɵɵnextContext(); return ctx_r31.inputClearable = \"selectProperty\"; })(\"mouseleave\", function OgcFilterFormComponent_mat_form_field_29_Template_mat_form_field_mouseleave_0_listener() { ɵɵrestoreView(_r32); const ctx_r33 = ɵɵnextContext(); return ctx_r33.inputClearable = undefined; });\n    ɵɵelementStart(1, \"input\", 18);\n    ɵɵlistener(\"input\", function OgcFilterFormComponent_mat_form_field_29_Template_input_input_1_listener($event) { ɵɵrestoreView(_r32); const ctx_r34 = ɵɵnextContext(); return ctx_r34.updateValuesList($event.target.value); });\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(3, \"mat-autocomplete\", 19, 31);\n    ɵɵlistener(\"optionSelected\", function OgcFilterFormComponent_mat_form_field_29_Template_mat_autocomplete_optionSelected_3_listener($event) { ɵɵrestoreView(_r32); const ctx_r35 = ɵɵnextContext(); return ctx_r35.changeProperty($event.option.value); });\n    ɵɵtemplate(5, OgcFilterFormComponent_mat_form_field_29_mat_option_5_Template, 2, 3, \"mat-option\", 32);\n    ɵɵpipe(6, \"async\");\n    ɵɵelementEnd();\n    ɵɵtemplate(7, OgcFilterFormComponent_mat_form_field_29_button_7_Template, 2, 1, \"button\", 22);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r25 = ɵɵreference(4);\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵproperty(\"floatLabel\", ctx_r3.floatLabel);\n    ɵɵadvance(1);\n    ɵɵproperty(\"placeholder\", ɵɵpipeBind1(2, 8, \"igo.geo.filter.placeholder\"))(\"disabled\", !ctx_r3.currentFilter.active)(\"matAutocomplete\", _r25)(\"value\", ctx_r3.detectProperty() === \"expression\" ? ctx_r3.currentFilter.expression : ctx_r3.currentFilter.pattern)(\"matTooltip\", ctx_r3.detectProperty() === \"expression\" ? ctx_r3.currentFilter.expression || \"\" : ctx_r3.currentFilter.pattern || \"\");\n    ɵɵadvance(4);\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(6, 10, ctx_r3.filteredValues$));\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r3.isClearable() && ctx_r3.inputClearable === \"selectProperty\" && ctx_r3.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_34_button_3_Template(rf, ctx) { if (rf & 1) {\n    const _r38 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 24);\n    ɵɵlistener(\"click\", function OgcFilterFormComponent_mat_form_field_34_button_3_Template_button_click_0_listener() { ɵɵrestoreView(_r38); const ctx_r37 = ɵɵnextContext(2); return ctx_r37.currentFilter.igoSNRC = \"\"; });\n    ɵɵelement(1, \"mat-icon\", 25);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r36 = ɵɵnextContext(2);\n    ɵɵproperty(\"disabled\", !ctx_r36.currentFilter.active && ctx_r36.inputClearable === \"selectSNRC\" && ctx_r36.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_34_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\", 34);\n    ɵɵlistener(\"mouseenter\", function OgcFilterFormComponent_mat_form_field_34_Template_mat_form_field_mouseenter_0_listener() { ɵɵrestoreView(_r40); const ctx_r39 = ɵɵnextContext(); return ctx_r39.inputClearable = \"selectSNRC\"; })(\"mouseleave\", function OgcFilterFormComponent_mat_form_field_34_Template_mat_form_field_mouseleave_0_listener() { ɵɵrestoreView(_r40); const ctx_r41 = ɵɵnextContext(); return ctx_r41.inputClearable = undefined; });\n    ɵɵelementStart(1, \"input\", 35);\n    ɵɵlistener(\"input\", function OgcFilterFormComponent_mat_form_field_34_Template_input_input_1_listener($event) { ɵɵrestoreView(_r40); const ctx_r42 = ɵɵnextContext(); return ctx_r42.changeSNRC($event.target.value); });\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n    ɵɵtemplate(3, OgcFilterFormComponent_mat_form_field_34_button_3_Template, 2, 1, \"button\", 22);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵɵnextContext();\n    ɵɵproperty(\"floatLabel\", ctx_r4.floatLabel);\n    ɵɵadvance(1);\n    ɵɵproperty(\"placeholder\", ɵɵpipeBind1(2, 5, \"igo.geo.filter.placeholderSnrc\"))(\"value\", ctx_r4.currentFilter.igoSNRC)(\"matTooltip\", ctx_r4.currentFilter.igoSNRC ? ctx_r4.currentFilter.igoSNRC : \"\");\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r4.currentFilter.igoSNRC);\n} }\nfunction OgcFilterFormComponent_ng_container_36_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r45 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 37);\n    ɵɵlistener(\"click\", function OgcFilterFormComponent_ng_container_36_button_1_Template_button_click_0_listener() { ɵɵrestoreView(_r45); const ctx_r44 = ɵɵnextContext(2); return ctx_r44.changeMapExtentGeometry(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 38);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r43 = ɵɵnextContext(2);\n    ɵɵproperty(\"disabled\", !ctx_r43.currentFilter.active)(\"disabled\", !ctx_r43.currentFilter.active)(\"matTooltip\", ɵɵpipeBind1(1, 3, \"igo.geo.spatialSelector.btnSetExtent\"));\n} }\nfunction OgcFilterFormComponent_ng_container_36_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, OgcFilterFormComponent_ng_container_36_button_1_Template, 3, 5, \"button\", 36);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r5.currentFilter.igoSpatialSelector === \"fixedExtent\");\n} }\nfunction OgcFilterFormComponent_mat_form_field_39_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 33);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const value_r49 = ctx.$implicit;\n    ɵɵproperty(\"value\", value_r49)(\"matTooltip\", value_r49);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", value_r49, \" \");\n} }\nfunction OgcFilterFormComponent_mat_form_field_39_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r51 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 24);\n    ɵɵlistener(\"click\", function OgcFilterFormComponent_mat_form_field_39_button_7_Template_button_click_0_listener() { ɵɵrestoreView(_r51); const ctx_r50 = ɵɵnextContext(2); return ctx_r50.clearProperty(1); });\n    ɵɵelement(1, \"mat-icon\", 25);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r48 = ɵɵnextContext(2);\n    ɵɵproperty(\"disabled\", !ctx_r48.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_39_Template(rf, ctx) { if (rf & 1) {\n    const _r53 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\", 39);\n    ɵɵlistener(\"mouseenter\", function OgcFilterFormComponent_mat_form_field_39_Template_mat_form_field_mouseenter_0_listener() { ɵɵrestoreView(_r53); const ctx_r52 = ɵɵnextContext(); return ctx_r52.inputClearable = \"selectProperty1\"; })(\"mouseleave\", function OgcFilterFormComponent_mat_form_field_39_Template_mat_form_field_mouseleave_0_listener() { ɵɵrestoreView(_r53); const ctx_r54 = ɵɵnextContext(); return ctx_r54.inputClearable = undefined; });\n    ɵɵelementStart(1, \"input\", 40);\n    ɵɵlistener(\"input\", function OgcFilterFormComponent_mat_form_field_39_Template_input_input_1_listener($event) { ɵɵrestoreView(_r53); const ctx_r55 = ɵɵnextContext(); return ctx_r55.updateValuesList($event.target.value, 1); });\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(3, \"mat-autocomplete\", 19, 41);\n    ɵɵlistener(\"optionSelected\", function OgcFilterFormComponent_mat_form_field_39_Template_mat_autocomplete_optionSelected_3_listener($event) { ɵɵrestoreView(_r53); const ctx_r56 = ɵɵnextContext(); return ctx_r56.changeNumericProperty($event.option.value, 1); });\n    ɵɵtemplate(5, OgcFilterFormComponent_mat_form_field_39_mat_option_5_Template, 2, 3, \"mat-option\", 32);\n    ɵɵpipe(6, \"async\");\n    ɵɵelementEnd();\n    ɵɵtemplate(7, OgcFilterFormComponent_mat_form_field_39_button_7_Template, 2, 1, \"button\", 22);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r46 = ɵɵreference(4);\n    const ctx_r6 = ɵɵnextContext();\n    ɵɵproperty(\"floatLabel\", ctx_r6.floatLabel);\n    ɵɵadvance(1);\n    ɵɵproperty(\"placeholder\", ɵɵpipeBind1(2, 7, \"igo.geo.filter.placeholder\"))(\"disabled\", !ctx_r6.currentFilter.active)(\"matAutocomplete\", _r46)(\"value\", ctx_r6.detectProperty(1) === \"lowerBoundary\" ? ctx_r6.currentFilter.lowerBoundary : ctx_r6.currentFilter.begin);\n    ɵɵadvance(4);\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(6, 9, ctx_r6.filteredValues$));\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r6.isClearable(1) && ctx_r6.inputClearable === \"selectProperty1\" && ctx_r6.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_40_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 33);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const value_r60 = ctx.$implicit;\n    ɵɵproperty(\"value\", value_r60)(\"matTooltip\", value_r60);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", value_r60, \" \");\n} }\nfunction OgcFilterFormComponent_mat_form_field_40_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r62 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 24);\n    ɵɵlistener(\"click\", function OgcFilterFormComponent_mat_form_field_40_button_7_Template_button_click_0_listener() { ɵɵrestoreView(_r62); const ctx_r61 = ɵɵnextContext(2); return ctx_r61.clearProperty(2); });\n    ɵɵelement(1, \"mat-icon\", 25);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r59 = ɵɵnextContext(2);\n    ɵɵproperty(\"disabled\", !ctx_r59.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_40_Template(rf, ctx) { if (rf & 1) {\n    const _r64 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\", 39);\n    ɵɵlistener(\"mouseenter\", function OgcFilterFormComponent_mat_form_field_40_Template_mat_form_field_mouseenter_0_listener() { ɵɵrestoreView(_r64); const ctx_r63 = ɵɵnextContext(); return ctx_r63.inputClearable = \"selectProperty2\"; })(\"mouseleave\", function OgcFilterFormComponent_mat_form_field_40_Template_mat_form_field_mouseleave_0_listener() { ɵɵrestoreView(_r64); const ctx_r65 = ɵɵnextContext(); return ctx_r65.inputClearable = undefined; });\n    ɵɵelementStart(1, \"input\", 40);\n    ɵɵlistener(\"input\", function OgcFilterFormComponent_mat_form_field_40_Template_input_input_1_listener($event) { ɵɵrestoreView(_r64); const ctx_r66 = ɵɵnextContext(); return ctx_r66.updateValuesList($event.target.value, 2); });\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(3, \"mat-autocomplete\", 19, 42);\n    ɵɵlistener(\"optionSelected\", function OgcFilterFormComponent_mat_form_field_40_Template_mat_autocomplete_optionSelected_3_listener($event) { ɵɵrestoreView(_r64); const ctx_r67 = ɵɵnextContext(); return ctx_r67.changeNumericProperty($event.option.value, 2); });\n    ɵɵtemplate(5, OgcFilterFormComponent_mat_form_field_40_mat_option_5_Template, 2, 3, \"mat-option\", 32);\n    ɵɵpipe(6, \"async\");\n    ɵɵelementEnd();\n    ɵɵtemplate(7, OgcFilterFormComponent_mat_form_field_40_button_7_Template, 2, 1, \"button\", 22);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r57 = ɵɵreference(4);\n    const ctx_r7 = ɵɵnextContext();\n    ɵɵproperty(\"floatLabel\", ctx_r7.floatLabel);\n    ɵɵadvance(1);\n    ɵɵproperty(\"placeholder\", ɵɵpipeBind1(2, 7, \"igo.geo.filter.placeholder\"))(\"disabled\", !ctx_r7.currentFilter.active)(\"matAutocomplete\", _r57)(\"value\", ctx_r7.detectProperty(2) === \"upperBoundary\" ? ctx_r7.currentFilter.upperBoundary : ctx_r7.currentFilter.end);\n    ɵɵadvance(4);\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(6, 9, ctx_r7.filteredValues$));\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r7.isClearable(2) && ctx_r7.inputClearable === \"selectProperty2\" && ctx_r7.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_igo_ogc_filter_time_41_Template(rf, ctx) { if (rf & 1) {\n    const _r69 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-ogc-filter-time\", 43);\n    ɵɵlistener(\"datasourceChange\", function OgcFilterFormComponent_igo_ogc_filter_time_41_Template_igo_ogc_filter_time_datasourceChange_0_listener($event) { ɵɵrestoreView(_r69); const ctx_r68 = ɵɵnextContext(); return ctx_r68.datasource = $event; })(\"currentFilterChange\", function OgcFilterFormComponent_igo_ogc_filter_time_41_Template_igo_ogc_filter_time_currentFilterChange_0_listener($event) { ɵɵrestoreView(_r69); const ctx_r70 = ɵɵnextContext(); return ctx_r70.currentFilter = $event; })(\"changeProperty\", function OgcFilterFormComponent_igo_ogc_filter_time_41_Template_igo_ogc_filter_time_changeProperty_0_listener($event) { ɵɵrestoreView(_r69); const ctx_r71 = ɵɵnextContext(); return ctx_r71.changeProperty($event.value, $event.pos); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r8 = ɵɵnextContext();\n    ɵɵproperty(\"datasource\", ctx_r8.datasource)(\"currentFilter\", ctx_r8.currentFilter);\n} }\nconst _c0$b = function (a0, a1) { return { \"logical\": a0, \"logicalHidden\": a1 }; };\nconst _c1$5 = function (a0, a1) { return { \"operator\": a0, \"dualInput\": a1 }; };\nconst _c2$2 = function () { return [\"expression\", \"pattern\"]; };\nconst _c3$1 = function () { return [\"lowerBoundary\", \"begin\"]; };\nconst _c4$1 = function () { return [\"upperBoundary\", \"end\"]; };\nclass OgcFilterFormComponent {\n    constructor(wktService) {\n        this.wktService = wktService;\n        this.ogcFilterOperator = OgcFilterOperator;\n        this.ogcFilterOperators$ = new BehaviorSubject(undefined);\n        this.value = '';\n        this.selectedField$ = new BehaviorSubject(undefined);\n        this.fields$ = new BehaviorSubject([]);\n        this.color = 'primary';\n        this.currentFilterIsSpatial$ = new BehaviorSubject(false);\n        this.defaultStepMillisecond = 6000;\n        this._snrc = '';\n        this.floatLabel = 'never';\n        // TODO: Filter permitted operator based on wfscapabilities\n        // Need to work on regex on XML capabilities because\n        // comaparison operator's name varies between WFS servers...\n        // Ex: IsNull vs PropertyIsNull vs IsNil ...\n        this.allOgcFilterOperators = new OgcFilterWriter().operators;\n        this.ogcFilterOperators$.next(this.allOgcFilterOperators);\n        this.igoSpatialSelectors = [\n            {\n                type: 'fixedExtent'\n            },\n            {\n                type: 'snrc'\n            }\n        ];\n        // TODO: selectFeature & drawFeature\n    }\n    set snrc(value) {\n        const checkSNRC50k = /^\\d{2}[a-l][0,1][0-9]$/gi;\n        const checkSNRC250k = /^\\d{2}[a-p]$/gi;\n        const checkSNRC1m = /^\\d{2}$/gi;\n        if (checkSNRC1m.test(value) ||\n            checkSNRC250k.test(value) ||\n            checkSNRC50k.test(value)) {\n            this._snrc = value;\n            this.currentFilter.igoSNRC = value;\n        }\n    }\n    get snrc() {\n        return this._snrc;\n    }\n    get activeFilters() {\n        return this.datasource.options.ogcFilters.interfaceOgcFilters.filter((f) => f.active === true);\n    }\n    get allowedOperators() {\n        return new OgcFilterWriter().computeAllowedOperators(this.fields$.value, this.currentFilter.propertyName, this.datasource.options.ogcFilters.allowedOperatorsType);\n    }\n    ngOnInit() {\n        if (this.datasource.options.sourceFields) {\n            const sFields = this.datasource.options.sourceFields.filter((sf) => sf.excludeFromOgcFilters === undefined || !sf.excludeFromOgcFilters);\n            sFields.map((sfs) => {\n                if (sfs.values) {\n                    sfs.values.sort();\n                }\n            });\n            this.fields$.next(sFields);\n        }\n        this.updateFieldsList();\n        this.selectedField$.next(this.fields$.value.find((f) => f.name === this.currentFilter.propertyName));\n        this.updateValuesList();\n        this.selectedField$.subscribe((f) => {\n            this.ogcFilterOperators$.next(this.allowedOperators);\n            if (Object.keys(this.allowedOperators).indexOf(this.currentFilter.operator) === -1) {\n                this.currentFilter.operator = Object.keys(this.allowedOperators)[0];\n                this.currentFilter.operator = Object.keys(this.allowedOperators)[0];\n            }\n            this.updateValuesList();\n        });\n        this.currentFilterIsSpatial();\n    }\n    updateFieldsList(value) {\n        this.filteredFields$ =\n            value && value.length > 0 ? of(this._filterFields(value)) : this.fields$;\n        if (this.fields$.value.find((f) => f.name === value)) {\n            this.changeField(value);\n        }\n    }\n    updateValuesList(value, pos) {\n        this.filteredValues$ =\n            value && value.length > 0\n                ? of(this._filterValues(value))\n                : this.selectedField$.value\n                    ? of(this.selectedField$.value.values)\n                    : of([]);\n        if (value && value.length >= 1) {\n            this.changeProperty(value, pos);\n        }\n    }\n    _filterFields(value) {\n        const keywordRegex = new RegExp(value.normalize('NFD').replace(/[\\u0300-\\u036f]/g, ''), 'gi');\n        return this.fields$.value.filter((val) => keywordRegex.test(val.alias.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '')));\n    }\n    _filterValues(value) {\n        const keywordRegex = new RegExp(value\n            .toString()\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, ''), 'gi');\n        return this.selectedField$.value.values.filter((val) => val && keywordRegex.test(val\n            .toString()\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '')));\n    }\n    clearSelectedField() {\n        this.currentFilter.propertyName = '';\n        this.selectedField$.next(undefined);\n        this.clearProperty();\n    }\n    isClearable(pos) {\n        const detectedProperty = this.detectProperty(pos);\n        if (detectedProperty) {\n            return this.currentFilter[detectedProperty];\n        }\n    }\n    clearProperty(pos) {\n        // this.autoCompleteInputValues.closePanel();\n        const detectedProperty = this.detectProperty(pos);\n        if (detectedProperty) {\n            return (this.currentFilter[detectedProperty] = '');\n        }\n    }\n    toggleFilterState(event) {\n        this.datasource.options.ogcFilters.interfaceOgcFilters.find((f) => f.filterid === this.currentFilter.filterid).active = event.checked;\n        this.refreshFilters();\n    }\n    deleteFilter() {\n        const ogcFilters = this.datasource.options.ogcFilters;\n        ogcFilters.interfaceOgcFilters = ogcFilters.interfaceOgcFilters.filter((f) => f.filterid !== this.currentFilter.filterid);\n        this.refreshFilters();\n    }\n    changeLogical(logical) {\n        this.currentFilter.parentLogical = logical;\n        this.refreshFilters();\n    }\n    changeOperator(operator) {\n        this.currentFilter.operator = operator;\n        this.currentFilterIsSpatial();\n        if (this.currentFilterIsSpatial$.value &&\n            this.currentFilter.wkt_geometry.length === 0) {\n            this.changeSpatialSelector(this.currentFilter.igoSpatialSelector);\n        }\n        else {\n            this.refreshFilters();\n        }\n    }\n    changeField(field) {\n        this.currentFilter.propertyName = field;\n        this.selectedField$.next(this.fields$.value.find((f) => f.name === this.currentFilter.propertyName));\n        this.refreshFilters();\n    }\n    // Issue with mapserver 7.2 and Postgis layers. Fixed in 7.4\n    // Due to this issue, the checkbox is hide.\n    changeCaseSensitive(matchCase) {\n        this.currentFilter.matchCase = matchCase.checked;\n        this.refreshFilters();\n    }\n    changeProperty(value, pos, refreshFilter = true) {\n        const detectedProperty = this.detectProperty(pos);\n        if (detectedProperty) {\n            this.datasource.options.ogcFilters.interfaceOgcFilters.find((f) => f.filterid === this.currentFilter.filterid)[detectedProperty] = value;\n            if (refreshFilter) {\n                this.refreshFilters();\n            }\n        }\n    }\n    changeNumericProperty(value, pos) {\n        this.changeProperty(parseFloat(value), pos);\n    }\n    changeSpatialSelector(value) {\n        this.currentFilter.igoSpatialSelector = value;\n        if (value === 'fixedExtent') {\n            this.changeMapExtentGeometry(false);\n        }\n        this.currentFilterIsSpatial();\n        this.refreshFilters();\n    }\n    changeSNRC(value) {\n        this.snrc = value;\n        this.changeSNRCGeometry();\n    }\n    changeSNRCGeometry() {\n        const interfaceOgcFilter = this.datasource.options.ogcFilters.interfaceOgcFilters.find((f) => f.filterid === this.currentFilter.filterid);\n        if (!interfaceOgcFilter) {\n            return;\n        }\n        if (this.snrc && this.currentFilter.igoSpatialSelector === 'snrc') {\n            this.currentFilter.wkt_geometry = this.wktService.snrcToWkt(this.snrc, this.map.projection).wktPoly;\n        }\n        this.refreshFilters();\n    }\n    changeMapExtentGeometry(refresh = true) {\n        const interfaceOgcFilter = this.datasource.options.ogcFilters.interfaceOgcFilters.find((f) => f.filterid === this.currentFilter.filterid);\n        if (!interfaceOgcFilter) {\n            return;\n        }\n        if (this.currentFilter.igoSpatialSelector === 'fixedExtent') {\n            this.currentFilter.wkt_geometry = this.wktService.extentToWkt(this.map.projection, this.map.viewController.getExtent(), this.map.projection).wktPoly;\n        }\n        if (refresh) {\n            this.refreshFilters();\n        }\n    }\n    detectProperty(pos) {\n        switch (this.currentFilter.operator) {\n            case OgcFilterOperator.PropertyIsNotEqualTo:\n            case OgcFilterOperator.PropertyIsEqualTo:\n            case OgcFilterOperator.PropertyIsGreaterThan:\n            case OgcFilterOperator.PropertyIsGreaterThanOrEqualTo:\n            case OgcFilterOperator.PropertyIsLessThan:\n            case OgcFilterOperator.PropertyIsLessThanOrEqualTo:\n                return 'expression';\n            case OgcFilterOperator.PropertyIsLike:\n                return 'pattern';\n            case OgcFilterOperator.PropertyIsBetween:\n                return pos && pos === 1\n                    ? 'lowerBoundary'\n                    : pos && pos === 2\n                        ? 'upperBoundary'\n                        : undefined;\n            case OgcFilterOperator.During:\n                return pos && pos === 1\n                    ? 'begin'\n                    : pos && pos === 2\n                        ? 'end'\n                        : undefined;\n            default:\n                return;\n        }\n    }\n    currentFilterIsSpatial() {\n        let isSpatial = false;\n        if (this.currentFilter) {\n            isSpatial =\n                [\n                    OgcFilterOperator.Contains,\n                    OgcFilterOperator.Intersects,\n                    OgcFilterOperator.Within\n                ].indexOf(this.currentFilter.operator) !== -1;\n        }\n        this.currentFilterIsSpatial$.next(isSpatial);\n    }\n    isTemporalOperator() {\n        return (this.currentFilter.operator.toLowerCase() ===\n            this.ogcFilterOperator.During.toLowerCase());\n    }\n}\nOgcFilterFormComponent.ɵfac = function OgcFilterFormComponent_Factory(t) { return new (t || OgcFilterFormComponent)(ɵɵdirectiveInject(WktService)); };\nOgcFilterFormComponent.ɵcmp = ɵɵdefineComponent({ type: OgcFilterFormComponent, selectors: [[\"igo-ogc-filter-form\"]], inputs: { refreshFilters: \"refreshFilters\", datasource: \"datasource\", map: \"map\", currentFilter: \"currentFilter\", floatLabel: \"floatLabel\" }, decls: 42, vars: 76, consts: [[\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"checked\", \"click\", \"change\"], [3, \"ngClass\"], [\"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"value\", \"matTooltip\", \"selectionChange\"], [\"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", 3, \"value\", \"matTooltip\"], [\"class\", \"field\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\", 4, \"ngIf\"], [3, \"ngClass\", \"floatLabel\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"disabled\", \"value\", \"selectionChange\"], [\"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", 3, \"value\", \"matTooltip\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"spatialSelector\", 4, \"ngIf\"], [\"class\", \"singleInput\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\", 4, \"ngIf\"], [1, \"igo-layer-button-group\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"delete\"], [\"class\", \"snrc\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"dualInput\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\", 4, \"ngIf\"], [3, \"datasource\", \"currentFilter\", \"datasourceChange\", \"currentFilterChange\", \"changeProperty\", 4, \"ngIf\"], [1, \"field\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\"], [\"matInput\", \"\", \"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", 3, \"placeholder\", \"disabled\", \"matAutocomplete\", \"value\", \"matTooltip\", \"input\"], [3, \"optionSelected\"], [\"autoCompleteField\", \"matAutocomplete\"], [\"matTooltipShowDelay\", \"500\", 3, \"value\", \"id\", \"matTooltip\", 4, \"ngFor\", \"ngForOf\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"aria-label\", \"Clear\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"matTooltipShowDelay\", \"500\", 3, \"value\", \"id\", \"matTooltip\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"aria-label\", \"Clear\", 3, \"disabled\", \"click\"], [\"svgIcon\", \"close\"], [1, \"spatialSelector\"], [3, \"disabled\", \"value\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"singleInput\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\"], [\"autoCompleteValues\", \"matAutocomplete\"], [\"matTooltipShowDelay\", \"500\", 3, \"value\", \"matTooltip\", 4, \"ngFor\", \"ngForOf\"], [\"matTooltipShowDelay\", \"500\", 3, \"value\", \"matTooltip\"], [1, \"snrc\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\"], [\"matInput\", \"\", \"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", 3, \"placeholder\", \"value\", \"matTooltip\", \"input\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matTooltip\", \"click\"], [\"svgIcon\", \"arrow-expand-all\"], [1, \"dualInput\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\"], [\"matInput\", \"\", \"type\", \"number\", 3, \"placeholder\", \"disabled\", \"matAutocomplete\", \"value\", \"input\"], [\"autoDualValueOperator1\", \"matAutocomplete\"], [\"autoDualValueOperator2\", \"matAutocomplete\"], [3, \"datasource\", \"currentFilter\", \"datasourceChange\", \"currentFilterChange\", \"changeProperty\"]], template: function OgcFilterFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-checkbox\", 0);\n        ɵɵlistener(\"click\", function OgcFilterFormComponent_Template_mat_checkbox_click_0_listener($event) { return $event.stopPropagation(); })(\"change\", function OgcFilterFormComponent_Template_mat_checkbox_change_0_listener($event) { return ctx.toggleFilterState($event); });\n        ɵɵpipe(1, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(2, \"mat-form-field\", 1);\n        ɵɵelementStart(3, \"mat-select\", 2);\n        ɵɵlistener(\"selectionChange\", function OgcFilterFormComponent_Template_mat_select_selectionChange_3_listener($event) { return ctx.changeLogical($event.value); });\n        ɵɵpipe(4, \"translate\");\n        ɵɵelementStart(5, \"mat-option\", 3);\n        ɵɵpipe(6, \"translate\");\n        ɵɵtext(7);\n        ɵɵpipe(8, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(9, \"mat-option\", 3);\n        ɵɵpipe(10, \"translate\");\n        ɵɵtext(11);\n        ɵɵpipe(12, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵtemplate(13, OgcFilterFormComponent_mat_form_field_13_Template, 13, 22, \"mat-form-field\", 4);\n        ɵɵpipe(14, \"async\");\n        ɵɵpipe(15, \"async\");\n        ɵɵpipe(16, \"async\");\n        ɵɵpipe(17, \"async\");\n        ɵɵelementStart(18, \"mat-form-field\", 5);\n        ɵɵpipe(19, \"async\");\n        ɵɵpipe(20, \"async\");\n        ɵɵelementStart(21, \"mat-select\", 6);\n        ɵɵlistener(\"selectionChange\", function OgcFilterFormComponent_Template_mat_select_selectionChange_21_listener($event) { return ctx.changeOperator($event.value); });\n        ɵɵpipe(22, \"translate\");\n        ɵɵpipe(23, \"translate\");\n        ɵɵtemplate(24, OgcFilterFormComponent_mat_option_24_Template, 4, 7, \"mat-option\", 7);\n        ɵɵpipe(25, \"keyvalue\");\n        ɵɵpipe(26, \"async\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵtemplate(27, OgcFilterFormComponent_mat_form_field_27_Template, 3, 3, \"mat-form-field\", 8);\n        ɵɵpipe(28, \"async\");\n        ɵɵtemplate(29, OgcFilterFormComponent_mat_form_field_29_Template, 8, 12, \"mat-form-field\", 9);\n        ɵɵelementStart(30, \"div\", 10);\n        ɵɵelementStart(31, \"button\", 11);\n        ɵɵlistener(\"click\", function OgcFilterFormComponent_Template_button_click_31_listener() { return ctx.deleteFilter(); });\n        ɵɵpipe(32, \"translate\");\n        ɵɵelement(33, \"mat-icon\", 12);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵtemplate(34, OgcFilterFormComponent_mat_form_field_34_Template, 4, 7, \"mat-form-field\", 13);\n        ɵɵpipe(35, \"async\");\n        ɵɵtemplate(36, OgcFilterFormComponent_ng_container_36_Template, 2, 1, \"ng-container\", 14);\n        ɵɵpipe(37, \"async\");\n        ɵɵelement(38, \"br\");\n        ɵɵtemplate(39, OgcFilterFormComponent_mat_form_field_39_Template, 8, 11, \"mat-form-field\", 15);\n        ɵɵtemplate(40, OgcFilterFormComponent_mat_form_field_40_Template, 8, 11, \"mat-form-field\", 15);\n        ɵɵtemplate(41, OgcFilterFormComponent_igo_ogc_filter_time_41_Template, 1, 2, \"igo-ogc-filter-time\", 16);\n    } if (rf & 2) {\n        ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 27, \"igo.geo.filter.toggleFilterState\"))(\"checked\", ctx.currentFilter.active);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngClass\", ɵɵpureFunction2(67, _c0$b, ctx.activeFilters.indexOf(ctx.currentFilter) !== 0 && ctx.currentFilter.active === true, ctx.activeFilters.indexOf(ctx.currentFilter) === 0 || ctx.currentFilter.active !== true));\n        ɵɵadvance(1);\n        ɵɵproperty(\"disabled\", !ctx.currentFilter.active)(\"value\", ctx.currentFilter.parentLogical)(\"matTooltip\", ctx.currentFilter.parentLogical ? ɵɵpipeBind1(4, 29, \"igo.geo.operators.tooltip.\" + ctx.currentFilter.parentLogical) : \"\");\n        ɵɵadvance(2);\n        ɵɵproperty(\"value\", ctx.ogcFilterOperator.And)(\"matTooltip\", ɵɵpipeBind1(6, 31, \"igo.geo.operators.tooltip.And\"));\n        ɵɵadvance(2);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(8, 33, \"igo.geo.operators.And\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"value\", ctx.ogcFilterOperator.Or)(\"matTooltip\", ɵɵpipeBind1(10, 35, \"igo.geo.operators.tooltip.Or\"));\n        ɵɵadvance(2);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(12, 37, \"igo.geo.operators.Or\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", !ɵɵpipeBind1(14, 39, ctx.currentFilterIsSpatial$) && ɵɵpipeBind1(15, 41, ctx.fields$) && ɵɵpipeBind1(16, 43, ctx.fields$).length > 0 && ɵɵpipeBind1(17, 45, ctx.fields$)[0].name !== \"\");\n        ɵɵadvance(5);\n        ɵɵproperty(\"ngClass\", ɵɵpureFunction2(70, _c1$5, !ɵɵpipeBind1(19, 47, ctx.currentFilterIsSpatial$), ɵɵpipeBind1(20, 49, ctx.currentFilterIsSpatial$)))(\"floatLabel\", ctx.floatLabel);\n        ɵɵadvance(3);\n        ɵɵproperty(\"matTooltip\", ctx.currentFilter.operator ? ɵɵpipeBind1(22, 51, \"igo.geo.operators.tooltip.\" + ctx.currentFilter.operator) : ɵɵpipeBind1(23, 53, \"igo.geo.filter.selectOperator\"))(\"disabled\", !ctx.currentFilter.active)(\"value\", ctx.currentFilter.operator);\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(25, 55, ɵɵpipeBind1(26, 57, ctx.ogcFilterOperators$)));\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(28, 59, ctx.currentFilterIsSpatial$));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ɵɵpureFunction0(73, _c2$2).indexOf(ctx.detectProperty()) !== -1);\n        ɵɵadvance(2);\n        ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(32, 61, \"igo.geo.filter.removeFilter\"));\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(35, 63, ctx.currentFilterIsSpatial$) && ctx.currentFilter.igoSpatialSelector === \"snrc\");\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(37, 65, ctx.currentFilterIsSpatial$) && ctx.currentFilter.igoSpatialSelector === \"fixedExtent\");\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngIf\", !ctx.isTemporalOperator() && ɵɵpureFunction0(74, _c3$1).indexOf(ctx.detectProperty(1)) !== -1);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", !ctx.isTemporalOperator() && ɵɵpureFunction0(75, _c4$1).indexOf(ctx.detectProperty(2)) !== -1);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.isTemporalOperator());\n    } }, styles: [\"[_nghost-%COMP%]{padding:5px 10px;width:100%}  .mat-form-field .mat-icon svg{color:#d3d3d3;height:1em;width:1em}.mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-select-arrow[_ngcontent-%COMP%]{visibility:hidden}.mat-slide-toggle[_ngcontent-%COMP%]{margin-top:10px}.logical[_ngcontent-%COMP%], .logicalHidden[_ngcontent-%COMP%]{flex-flow:column nowrap;margin-left:5px;max-width:45px;width:10%}.logicalHidden[_ngcontent-%COMP%],   .logical .mat-select-arrow,   .logicalHidden .mat-select-arrow{visibility:hidden}.field[_ngcontent-%COMP%]{margin-left:5px;width:20%}  .field .mat-select-arrow{visibility:hidden}.operator[_ngcontent-%COMP%]{margin-left:10px;text-align:center;width:12%}  .operator .mat-select-arrow{visibility:hidden}.spatialSelector[_ngcontent-%COMP%]{margin-left:5px;width:15%}  .spatialSelector .mat-select-arrow{visibility:hidden}.singleInput[_ngcontent-%COMP%]{margin-left:5px;width:30%}.snrc[_ngcontent-%COMP%]{margin-left:5px;width:20%}  .singleInput .mat-select-arrow{visibility:hidden}.dualInput[_ngcontent-%COMP%]{margin-left:5px;width:20%}  .dualInput .mat-select-arrow{visibility:hidden}.igo-layer-button-group[_ngcontent-%COMP%]{display:flex;float:right;padding-top:5px}.container[_ngcontent-%COMP%]{display:flex}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OgcFilterFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filter-form',\n                templateUrl: './ogc-filter-form.component.html',\n                styleUrls: ['./ogc-filter-form.component.scss']\n            }]\n    }], function () { return [{ type: WktService }]; }, { refreshFilters: [{\n            type: Input\n        }], datasource: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], currentFilter: [{\n            type: Input\n        }], floatLabel: [{\n            type: Input\n        }] }); })();\n\nfunction OgcFilterableFormComponent_igo_ogc_filter_selection_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-ogc-filter-selection\", 2);\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"refreshFilters\", ctx_r0.refreshFunc)(\"datasource\", ctx_r0.datasource)(\"map\", ctx_r0.map)(\"currentFilter\", ctx_r0.currentFilter);\n} }\nfunction OgcFilterableFormComponent_1_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-ogc-filter-form\", 4);\n} if (rf & 2) {\n    const currentFilter_r3 = ctx.$implicit;\n    const ctx_r2 = ɵɵnextContext(2);\n    ɵɵproperty(\"currentFilter\", currentFilter_r3)(\"refreshFilters\", ctx_r2.refreshFunc)(\"datasource\", ctx_r2.datasource)(\"map\", ctx_r2.map);\n} }\nfunction OgcFilterableFormComponent_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, OgcFilterableFormComponent_1_ng_template_0_Template, 1, 4, \"ng-template\", 3);\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"ngForOf\", ctx_r1.datasource.options.ogcFilters.interfaceOgcFilters);\n} }\nclass OgcFilterableFormComponent {\n    constructor() {\n        this.color = 'primary';\n    }\n    get refreshFunc() {\n        return this.refreshFilters;\n    }\n    get advancedOgcFilters() {\n        if (this.datasource.options.ogcFilters) {\n            return this.datasource.options.ogcFilters.advancedOgcFilters;\n        }\n        return;\n    }\n    get currentFilter() {\n        return this.datasource.options.ogcFilters.interfaceOgcFilters ?\n            this.datasource.options.ogcFilters.interfaceOgcFilters[0] : undefined;\n    }\n}\nOgcFilterableFormComponent.ɵfac = function OgcFilterableFormComponent_Factory(t) { return new (t || OgcFilterableFormComponent)(); };\nOgcFilterableFormComponent.ɵcmp = ɵɵdefineComponent({ type: OgcFilterableFormComponent, selectors: [[\"igo-ogc-filterable-form\"]], inputs: { datasource: \"datasource\", map: \"map\", refreshFilters: \"refreshFilters\" }, decls: 2, vars: 2, consts: [[\"igoListItem\", \"\", 3, \"refreshFilters\", \"datasource\", \"map\", \"currentFilter\", 4, \"ngIf\"], [4, \"ngIf\"], [\"igoListItem\", \"\", 3, \"refreshFilters\", \"datasource\", \"map\", \"currentFilter\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [3, \"currentFilter\", \"refreshFilters\", \"datasource\", \"map\"]], template: function OgcFilterableFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, OgcFilterableFormComponent_igo_ogc_filter_selection_0_Template, 1, 4, \"igo-ogc-filter-selection\", 0);\n        ɵɵtemplate(1, OgcFilterableFormComponent_1_Template, 1, 1, undefined, 1);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", !ctx.advancedOgcFilters);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.advancedOgcFilters && ctx.datasource.options.ogcFilters.editable);\n    } }, encapsulation: 2 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OgcFilterableFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filterable-form',\n                templateUrl: './ogc-filterable-form.component.html'\n            }]\n    }], function () { return []; }, { datasource: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], refreshFilters: [{\n            type: Input\n        }] }); })();\n\nfunction OgcFilterableItemComponent_mat_icon_1_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-icon\", 8);\n    ɵɵlistener(\"click\", function OgcFilterableItemComponent_mat_icon_1_Template_mat_icon_click_0_listener() { ɵɵrestoreView(_r8); const ctx_r7 = ɵɵnextContext(); return ctx_r7.toggleFiltersCollapsed(); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    const _r4 = ɵɵreference(6);\n    ɵɵproperty(\"target\", _r4)(\"collapsed\", ctx_r0.filtersCollapsed);\n} }\nconst _c0$c = function (a0) { return { \"cursor\": a0 }; };\nfunction OgcFilterableItemComponent_h4_2_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"h4\", 9);\n    ɵɵlistener(\"click\", function OgcFilterableItemComponent_h4_2_Template_h4_click_0_listener() { ɵɵrestoreView(_r10); const ctx_r9 = ɵɵnextContext(); return ctx_r9.toggleLegendOnClick(); });\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"ngStyle\", ɵɵpureFunction1(3, _c0$c, ctx_r1.filtersCollapsed ? \"default\" : \"pointer\"))(\"matTooltip\", ctx_r1.layer.title);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ctx_r1.layer.title);\n} }\nfunction OgcFilterableItemComponent_button_3_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 10);\n    ɵɵlistener(\"click\", function OgcFilterableItemComponent_button_3_Template_button_click_0_listener() { ɵɵrestoreView(_r12); const ctx_r11 = ɵɵnextContext(); return ctx_r11.addFilterToSequence(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 11);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵproperty(\"disabled\", ctx_r2.addFilterDisabled())(\"matTooltip\", ɵɵpipeBind1(1, 3, \"igo.geo.filter.addFilter\"))(\"color\", ctx_r2.color);\n} }\nconst _c1$6 = function (a0) { return { disabled: a0 }; };\nfunction OgcFilterableItemComponent_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 12);\n    ɵɵlistener(\"click\", function OgcFilterableItemComponent_button_4_Template_button_click_0_listener() { ɵɵrestoreView(_r14); const ctx_r13 = ɵɵnextContext(); return ctx_r13.layer.visible = !ctx_r13.layer.visible; });\n    ɵɵpipe(1, \"translate\");\n    ɵɵpipe(2, \"translate\");\n    ɵɵelement(3, \"mat-icon\", 13);\n    ɵɵpipe(4, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵproperty(\"color\", ctx_r3.layer.visible ? \"primary\" : \"default\")(\"matTooltip\", ctx_r3.layer.visible ? ɵɵpipeBind1(1, 4, \"igo.geo.layer.hideLayer\") : ɵɵpipeBind1(2, 6, \"igo.geo.layer.showLayer\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngClass\", ɵɵpureFunction1(10, _c1$6, !ɵɵpipeBind1(4, 8, ctx_r3.inResolutionRange$)))(\"svgIcon\", ctx_r3.layer.visible ? \"eye\" : \"eye-off\");\n} }\nfunction OgcFilterableItemComponent_div_7_igo_layer_legend_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-layer-legend\", 17);\n} if (rf & 2) {\n    const ctx_r16 = ɵɵnextContext(2);\n    ɵɵproperty(\"layer\", ctx_r16.layer);\n} }\nfunction OgcFilterableItemComponent_div_7_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 14, 15);\n    ɵɵtemplate(2, OgcFilterableItemComponent_div_7_igo_layer_legend_2_Template, 1, 1, \"igo-layer-legend\", 16);\n    ɵɵpipe(3, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ɵɵpipeBind1(3, 1, ctx_r5.showLegend$));\n} }\nfunction OgcFilterableItemComponent_section_9_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"section\", 18);\n    ɵɵelement(1, \"mat-divider\");\n    ɵɵelementStart(2, \"mat-checkbox\", 19);\n    ɵɵlistener(\"change\", function OgcFilterableItemComponent_section_9_Template_mat_checkbox_change_2_listener($event) { ɵɵrestoreView(_r18); const ctx_r17 = ɵɵnextContext(); return ctx_r17.changeOgcFilterType($event); })(\"ngModelChange\", function OgcFilterableItemComponent_section_9_Template_mat_checkbox_ngModelChange_2_listener($event) { ɵɵrestoreView(_r18); const ctx_r19 = ɵɵnextContext(); return ctx_r19.datasource.options.ogcFilters.advancedOgcFilters = $event; });\n    ɵɵtext(3);\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngModel\", ctx_r6.datasource.options.ogcFilters.advancedOgcFilters);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(4, 2, \"igo.geo.filter.advancedOgcFilters\"), \" \");\n} }\nclass OgcFilterableItemComponent {\n    constructor(ogcFilterService) {\n        this.ogcFilterService = ogcFilterService;\n        this.color = 'primary';\n        this.defaultLogicalParent = OgcFilterOperator.And;\n        this.hasActiveSpatialFilter = false;\n        this.filtersAreEditable = true;\n        this.filtersCollapsed = true;\n        this.hasSelector = false;\n        this.showLegend$ = new BehaviorSubject(false);\n        this.inResolutionRange$ = new BehaviorSubject(true);\n        this.header = true;\n        this.ogcFilterWriter = new OgcFilterWriter();\n    }\n    get refreshFunc() {\n        return this.refreshFilters.bind(this);\n    }\n    get datasource() {\n        return this.layer.dataSource;\n    }\n    ngOnInit() {\n        const ogcFilters = this.datasource.options.ogcFilters;\n        if ((ogcFilters.pushButtons && ogcFilters.pushButtons.bundles.length > 0) ||\n            (ogcFilters.checkboxes && ogcFilters.checkboxes.bundles.length > 0) ||\n            (ogcFilters.radioButtons && ogcFilters.radioButtons.bundles.length > 0) ||\n            (ogcFilters.select && ogcFilters.select.bundles.length > 0)) {\n            if (ogcFilters.advancedOgcFilters === undefined) {\n                ogcFilters.advancedOgcFilters = false;\n            }\n            this.hasSelector = true;\n        }\n        switch (this.datasource.options.type) {\n            case 'wms':\n                this.ogcFilterService.setOgcWMSFiltersOptions(this.datasource);\n                break;\n            case 'wfs':\n                this.ogcFilterService.setOgcWFSFiltersOptions(this.datasource);\n                break;\n            default:\n                break;\n        }\n        if (ogcFilters) {\n            if (ogcFilters.interfaceOgcFilters) {\n                this.lastRunOgcFilter = JSON.parse(JSON.stringify(ogcFilters.interfaceOgcFilters));\n                if (ogcFilters.interfaceOgcFilters.filter(f => f.wkt_geometry).length >= 1) {\n                    this.hasActiveSpatialFilter = true;\n                }\n            }\n            this.filtersAreEditable = ogcFilters.editable\n                ? ogcFilters.editable\n                : false;\n        }\n        const resolution$ = this.layer.map.viewController.resolution$;\n        this.resolution$$ = resolution$.subscribe(() => {\n            this.inResolutionRange$.next(this.layer.isInResolutionsRange);\n        });\n    }\n    ngOnDestroy() {\n        this.resolution$$.unsubscribe();\n    }\n    addFilterToSequence() {\n        this.filtersCollapsed = false;\n        const interfaceOgcFilters = this.datasource\n            .options.ogcFilters.interfaceOgcFilters;\n        const arr = interfaceOgcFilters || [];\n        const lastLevel = arr.length === 0 ? 0 : arr[arr.length - 1].level;\n        let firstFieldName = '';\n        const includedFields = this.datasource.options.sourceFields.filter(f => !f.excludeFromOgcFilters);\n        if (includedFields.length > 0) {\n            firstFieldName =\n                includedFields[0].name === undefined ? '' : includedFields[0].name;\n        }\n        let fieldNameGeometry;\n        const datasourceOptions = this.datasource\n            .options;\n        if (datasourceOptions.fieldNameGeometry) {\n            fieldNameGeometry = datasourceOptions.fieldNameGeometry;\n        }\n        else if (this.datasource.options.paramsWFS &&\n            this.datasource.options.paramsWFS.fieldNameGeometry) {\n            fieldNameGeometry = this.datasource.options.paramsWFS\n                .fieldNameGeometry;\n        }\n        const allowedOperators = this.ogcFilterWriter.computeAllowedOperators(this.datasource.options.sourceFields, firstFieldName, this.datasource.options.ogcFilters.allowedOperatorsType);\n        const firstOperatorName = Object.keys(allowedOperators)[0];\n        arr.push(this.ogcFilterWriter.addInterfaceFilter({\n            propertyName: firstFieldName,\n            operator: firstOperatorName,\n            active: true,\n            igoSpatialSelector: 'fixedExtent',\n            srsName: this.map.projection,\n        }, fieldNameGeometry, lastLevel, this.defaultLogicalParent));\n        this.datasource.options.ogcFilters.interfaceOgcFilters = arr;\n    }\n    refreshFilters(force) {\n        if (force === true) {\n            this.lastRunOgcFilter = undefined;\n        }\n        const ogcFilters = this.datasource.options.ogcFilters;\n        const activeFilters = ogcFilters.interfaceOgcFilters ?\n            ogcFilters.interfaceOgcFilters.filter(f => f.active === true) : [];\n        if (activeFilters.length === 0) {\n            ogcFilters.filters = undefined;\n            ogcFilters.filtered = false;\n        }\n        if (activeFilters.length > 1) {\n            activeFilters[0].parentLogical = activeFilters[1].parentLogical;\n        }\n        if (activeFilters.filter(af => ['Contains', 'Intersects', 'Within'].indexOf(af.operator) !== -1).length === 0) {\n            this.hasActiveSpatialFilter = false;\n        }\n        else {\n            this.hasActiveSpatialFilter = true;\n        }\n        if (!(JSON.stringify(this.lastRunOgcFilter) === JSON.stringify(activeFilters))) {\n            if (this.layer.dataSource.options.type === 'wfs') {\n                const ogcDataSource = this.layer.dataSource;\n                const ogcLayer = ogcDataSource.options.ogcFilters;\n                ogcLayer.filters = this.ogcFilterWriter.rebuiltIgoOgcFilterObjectFromSequence(activeFilters);\n                this.layer.dataSource.ol.refresh();\n            }\n            else if (this.layer.dataSource.options.type === 'wms' &&\n                ogcFilters.enabled) {\n                let rebuildFilter = '';\n                if (activeFilters.length >= 1) {\n                    const ogcDataSource = this.layer.dataSource;\n                    const ogcLayer = ogcDataSource.options.ogcFilters;\n                    ogcLayer.filters = this.ogcFilterWriter.rebuiltIgoOgcFilterObjectFromSequence(activeFilters);\n                    rebuildFilter = this.ogcFilterWriter.buildFilter(ogcLayer.filters, undefined, undefined, this.layer.dataSource.options.fieldNameGeometry, ogcDataSource.options);\n                }\n                this.ogcFilterService.filterByOgc(this.datasource, rebuildFilter);\n                this.datasource.options.ogcFilters.filtered =\n                    activeFilters.length === 0 ? false : true;\n            }\n            this.lastRunOgcFilter = JSON.parse(JSON.stringify(activeFilters));\n        }\n        else {\n            // identical filter. Nothing triggered\n        }\n        this.layer.dataSource.setOgcFilters(ogcFilters, true);\n    }\n    setVisible() {\n        this.layer.visible = true;\n    }\n    isAdvancedOgcFilters() {\n        return this.datasource.options.ogcFilters.advancedOgcFilters;\n    }\n    addFilterDisabled() {\n        return (!this.datasource.options.sourceFields ||\n            this.datasource.options.sourceFields.length === 0);\n    }\n    changeOgcFiltersAdvancedOgcFilters(value) {\n        this.datasource.options.ogcFilters.advancedOgcFilters = value;\n    }\n    changeOgcFilterType(isAdvancedOgcFilters) {\n        this.changeOgcFiltersAdvancedOgcFilters(isAdvancedOgcFilters.checked);\n        if (isAdvancedOgcFilters.checked) {\n            this.refreshFilters(true);\n        }\n    }\n    toggleLegend(collapsed) {\n        this.layer.legendCollapsed = collapsed;\n        this.showLegend$.next(!collapsed);\n    }\n    toggleLegendOnClick() {\n        if (!this.filtersCollapsed) {\n            this.toggleLegend(this.showLegend$.value);\n        }\n    }\n    toggleFiltersCollapsed() {\n        this.filtersCollapsed = !this.filtersCollapsed;\n    }\n}\nOgcFilterableItemComponent.ɵfac = function OgcFilterableItemComponent_Factory(t) { return new (t || OgcFilterableItemComponent)(ɵɵdirectiveInject(OGCFilterService)); };\nOgcFilterableItemComponent.ɵcmp = ɵɵdefineComponent({ type: OgcFilterableItemComponent, selectors: [[\"igo-ogc-filterable-item\"]], inputs: { layer: \"layer\", map: \"map\", header: \"header\" }, decls: 10, vars: 9, consts: [[\"class\", \"igo-chevron\", \"mat-list-avatar\", \"\", \"igoCollapse\", \"\", \"svgIcon\", \"chevron-up\", 3, \"target\", \"collapsed\", \"click\", 4, \"ngIf\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"ngStyle\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"ogcFilters\", \"\"], [\"class\", \"igo-layer-legend-container\", 4, \"ngIf\"], [3, \"datasource\", \"map\", \"refreshFilters\"], [\"class\", \"mat-typography advancedOgcFilters\", 4, \"ngIf\"], [\"mat-list-avatar\", \"\", \"igoCollapse\", \"\", \"svgIcon\", \"chevron-up\", 1, \"igo-chevron\", 3, \"target\", \"collapsed\", \"click\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"ngStyle\", \"matTooltip\", \"click\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"plus\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\"], [3, \"ngClass\", \"svgIcon\"], [1, \"igo-layer-legend-container\"], [\"legend\", \"\"], [3, \"layer\", 4, \"ngIf\"], [3, \"layer\"], [1, \"mat-typography\", \"advancedOgcFilters\"], [\"labelPosition\", \"before\", 3, \"ngModel\", \"change\", \"ngModelChange\"]], template: function OgcFilterableItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-list-item\");\n        ɵɵtemplate(1, OgcFilterableItemComponent_mat_icon_1_Template, 1, 2, \"mat-icon\", 0);\n        ɵɵtemplate(2, OgcFilterableItemComponent_h4_2_Template, 2, 5, \"h4\", 1);\n        ɵɵtemplate(3, OgcFilterableItemComponent_button_3_Template, 3, 5, \"button\", 2);\n        ɵɵtemplate(4, OgcFilterableItemComponent_button_4_Template, 5, 12, \"button\", 3);\n        ɵɵelementEnd();\n        ɵɵelementStart(5, \"div\", null, 4);\n        ɵɵtemplate(7, OgcFilterableItemComponent_div_7_Template, 4, 3, \"div\", 5);\n        ɵɵelement(8, \"igo-ogc-filterable-form\", 6);\n        ɵɵtemplate(9, OgcFilterableItemComponent_section_9_Template, 5, 4, \"section\", 7);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.header);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.header);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.isAdvancedOgcFilters() && ctx.filtersAreEditable);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.header);\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngIf\", ctx.header);\n        ɵɵadvance(1);\n        ɵɵproperty(\"datasource\", ctx.datasource)(\"map\", ctx.map)(\"refreshFilters\", ctx.refreshFunc);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.hasSelector && ctx.filtersAreEditable);\n    } }, styles: [\"[_nghost-%COMP%]{overflow:hidden}.advancedOgcFilters[_ngcontent-%COMP%]{display:inline-block;text-align:center;width:100%}.mat-list-item[_ngcontent-%COMP%]{height:auto}.igo-layer-legend-container[_ngcontent-%COMP%]{padding-left:1.125em;width:calc(100% - 18px)}mat-icon.disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OgcFilterableItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filterable-item',\n                templateUrl: './ogc-filterable-item.component.html',\n                styleUrls: ['./ogc-filterable-item.component.scss']\n            }]\n    }], function () { return [{ type: OGCFilterService }]; }, { layer: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], header: [{\n            type: Input\n        }] }); })();\n\nfunction OgcFilterableListComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-ogc-filterable-item\", 2);\n} if (rf & 2) {\n    const layer_r1 = ctx.$implicit;\n    ɵɵproperty(\"header\", true)(\"layer\", layer_r1)(\"map\", layer_r1.map);\n} }\nclass OgcFilterableListComponent {\n    constructor() { }\n}\nOgcFilterableListComponent.ɵfac = function OgcFilterableListComponent_Factory(t) { return new (t || OgcFilterableListComponent)(); };\nOgcFilterableListComponent.ɵcmp = ɵɵdefineComponent({ type: OgcFilterableListComponent, selectors: [[\"igo-ogc-filterable-list\"]], inputs: { layers: \"layers\", map: \"map\" }, decls: 3, vars: 6, consts: [[3, \"navigation\", \"selection\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"igoListItem\", \"\", 3, \"header\", \"layer\", \"map\"]], template: function OgcFilterableListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-list\", 0);\n        ɵɵtemplate(1, OgcFilterableListComponent_ng_template_1_Template, 1, 3, \"ng-template\", 1);\n        ɵɵpipe(2, \"filterableDataSource\");\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"navigation\", false)(\"selection\", false);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind2(2, 3, ctx.layers, \"ogc\"));\n    } }, encapsulation: 2, changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OgcFilterableListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filterable-list',\n                templateUrl: './ogc-filterable-list.component.html',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { layers: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }] }); })();\n\nclass OgcFilterableListBindingDirective {\n    constructor(component, mapService) {\n        this.mapService = mapService;\n        this.component = component;\n    }\n    ngOnInit() {\n        // Override input layers\n        this.component.layers = [];\n        this.layers$$ = this.mapService.getMap().layers$.subscribe(layers => {\n            this.component.layers = layers.filter(layer => layer.showInLayerList);\n        });\n    }\n    ngOnDestroy() {\n        this.layers$$.unsubscribe();\n    }\n}\nOgcFilterableListBindingDirective.ɵfac = function OgcFilterableListBindingDirective_Factory(t) { return new (t || OgcFilterableListBindingDirective)(ɵɵdirectiveInject(OgcFilterableListComponent, 2), ɵɵdirectiveInject(MapService)); };\nOgcFilterableListBindingDirective.ɵdir = ɵɵdefineDirective({ type: OgcFilterableListBindingDirective, selectors: [[\"\", \"igoOgcFilterableListBinding\", \"\"]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OgcFilterableListBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoOgcFilterableListBinding]'\n            }]\n    }], function () { return [{ type: OgcFilterableListComponent, decorators: [{\n                type: Self\n            }] }, { type: MapService }]; }, null); })();\n\nfunction OgcFilterButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 2);\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 3);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 3, \"igo.geo.filter.filterBy\"))(\"color\", ctx_r0.color);\n    ɵɵadvance(2);\n    ɵɵproperty(\"matBadge\", ctx_r0.badge);\n} }\nfunction OgcFilterButtonComponent_div_1_igo_ogc_filterable_item_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-ogc-filterable-item\", 7);\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext(2);\n    ɵɵproperty(\"header\", false)(\"map\", ctx_r3.layer.map)(\"layer\", ctx_r3.layer);\n} }\nfunction OgcFilterButtonComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 4, 5);\n    ɵɵtemplate(2, OgcFilterButtonComponent_div_1_igo_ogc_filterable_item_2_Template, 1, 3, \"igo-ogc-filterable-item\", 6);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r1.ogcFilterCollapse && ctx_r1.options.ogcFilters.enabled);\n} }\nclass OgcFilterButtonComponent {\n    constructor() {\n        this.color = 'primary';\n        this.ogcFilterCollapse = false;\n    }\n    get badge() {\n        const filter = this.options.ogcFilters;\n        let cnt = 0;\n        if (filter && !filter.advancedOgcFilters) {\n            if (filter.pushButtons) {\n                const pushButtons = filter.pushButtons;\n                const currentPushButtonGroup = pushButtons.groups.find(gr => gr.enabled);\n                let cntPushButtons = 0;\n                if (currentPushButtonGroup) {\n                    currentPushButtonGroup.computedSelectors.map(cb => cntPushButtons += cb.selectors.filter(button => button.enabled).length);\n                }\n                cnt += cntPushButtons;\n            }\n            if (filter.checkboxes) {\n                const checkboxes = filter.checkboxes;\n                const currentCheckboxGroup = checkboxes.groups.find(gr => gr.enabled);\n                let cntCheckboxes = 0;\n                if (currentCheckboxGroup) {\n                    currentCheckboxGroup.computedSelectors.map(cb => cntCheckboxes += cb.selectors.filter(checkbox => checkbox.enabled).length);\n                }\n                cnt += cntCheckboxes;\n            }\n            if (filter.radioButtons) {\n                const radioButtons = filter.radioButtons;\n                const currentRadioButtonsGroup = radioButtons.groups.find(gr => gr.enabled);\n                let cntRadioButtons = 0;\n                if (currentRadioButtonsGroup) {\n                    currentRadioButtonsGroup.computedSelectors.map(cb => cntRadioButtons += cb.selectors.filter(radio => radio.enabled).length);\n                }\n                cnt += cntRadioButtons;\n            }\n            if (filter.select) {\n                const select = filter.select;\n                const currentSelectGroup = select.groups.find(gr => gr.enabled);\n                let cntSelect = 0;\n                if (currentSelectGroup) {\n                    currentSelectGroup.computedSelectors.map(cb => cntSelect += cb.selectors.filter(multi => multi.enabled).length);\n                }\n                cnt += cntSelect;\n            }\n        }\n        else if (filter && filter.filters && !filter.filters.filters) {\n            return 1;\n        }\n        else if (filter && filter.filters && filter.filters.filters) {\n            return filter.filters.filters.length;\n        }\n        return cnt > 0 ? cnt : undefined;\n    }\n    get layer() {\n        return this._layer;\n    }\n    set layer(value) {\n        this._layer = value;\n        if (value) {\n            this.options = this.layer.dataSource.options;\n        }\n    }\n    ngOnInit() {\n        this.options = this.layer.dataSource.options;\n    }\n}\nOgcFilterButtonComponent.ɵfac = function OgcFilterButtonComponent_Factory(t) { return new (t || OgcFilterButtonComponent)(); };\nOgcFilterButtonComponent.ɵcmp = ɵɵdefineComponent({ type: OgcFilterButtonComponent, selectors: [[\"igo-ogc-filter-button\"]], inputs: { layer: \"layer\", map: \"map\", color: \"color\", header: \"header\" }, decls: 2, vars: 2, consts: [[\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", 4, \"ngIf\"], [\"class\", \"igo-layer-actions-container\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\"], [\"matBadgeColor\", \"warn\", \"matBadgeSize\", \"medium\", \"svgIcon\", \"filter\", 3, \"matBadge\"], [1, \"igo-layer-actions-container\"], [\"ogcFilter\", \"\"], [\"igoListItem\", \"\", 3, \"header\", \"map\", \"layer\", 4, \"ngIf\"], [\"igoListItem\", \"\", 3, \"header\", \"map\", \"layer\"]], template: function OgcFilterButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, OgcFilterButtonComponent_button_0_Template, 3, 5, \"button\", 0);\n        ɵɵtemplate(1, OgcFilterButtonComponent_div_1_Template, 3, 1, \"div\", 1);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.header && ctx.options.ogcFilters && ctx.options.ogcFilters.enabled && (ctx.options.ogcFilters.pushButtons || ctx.options.ogcFilters.checkboxes || ctx.options.ogcFilters.radioButtons || ctx.options.ogcFilters.select || ctx.options.ogcFilters.editable));\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.options.ogcFilters && ctx.options.ogcFilters.enabled && (ctx.options.ogcFilters.pushButtons || ctx.options.ogcFilters.checkboxes || ctx.options.ogcFilters.radioButtons || ctx.options.ogcFilters.select || ctx.options.ogcFilters.editable));\n    } }, styles: [\"\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OgcFilterButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filter-button',\n                templateUrl: './ogc-filter-button.component.html',\n                styleUrls: ['./ogc-filter-button.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { layer: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }], header: [{\n            type: Input\n        }] }); })();\n\nconst moment$1 = moment_;\nclass OGCFilterTimeService {\n    constructor() {\n        this.defaultStepMillisecond = 60000;\n    }\n    step(datasource, currentFilter) {\n        return datasource.options.stepDate\n            ? datasource.options.stepDate\n            : currentFilter.step;\n    }\n    stepMillisecond(dataSource, currentFilter) {\n        const step = moment$1.duration(this.step(dataSource, currentFilter)).asMilliseconds();\n        return step === 0 ? this.defaultStepMillisecond : step;\n    }\n    stepIsYearDuration(step) {\n        const year = moment$1.duration(step);\n        return (year.years() !== 0 &&\n            year.months() === 0 &&\n            year.weeks() === 0 &&\n            year.days() === 0 &&\n            year.hours() === 0 &&\n            year.minutes() === 0);\n    }\n    stepIsMonthDuration(step) {\n        const month = moment$1.duration(step);\n        return (month.months() !== 0 &&\n            month.weeks() === 0 &&\n            month.days() === 0 &&\n            month.hours() === 0 &&\n            month.minutes() === 0);\n    }\n    stepIsWeekDuration(step) {\n        const week = moment$1.duration(step);\n        return (week.weeks() !== 0 &&\n            week.days() === 7 &&\n            week.hours() === 0 &&\n            week.minutes() === 0);\n    }\n    stepIsDayDuration(step) {\n        const day = moment$1.duration(step);\n        return day.days() !== 0 && day.hours() === 0 && day.minutes() === 0;\n    }\n    stepIsHourDuration(step) {\n        const hour = moment$1.duration(step);\n        return hour.hours() !== 0 && hour.minutes() === 0;\n    }\n    stepIsMinuteDuration(step) {\n        const minute = moment$1.duration(step);\n        return minute.minutes() !== 0;\n    }\n    dateToNumber(date) {\n        let newDate = new Date();\n        if (date) {\n            newDate = new Date(date);\n        }\n        return newDate.getTime();\n    }\n    addStep(value, stepMillisecond) {\n        return moment$1(value).add(stepMillisecond, 'milliseconds').toDate();\n    }\n    subtractStep(value, stepMillisecond) {\n        return moment$1(value).subtract(stepMillisecond, 'milliseconds').toDate();\n    }\n}\nOGCFilterTimeService.ɵfac = function OGCFilterTimeService_Factory(t) { return new (t || OGCFilterTimeService)(); };\nOGCFilterTimeService.ɵprov = ɵɵdefineInjectable({ token: OGCFilterTimeService, factory: OGCFilterTimeService.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OGCFilterTimeService, [{\n        type: Injectable\n    }], function () { return []; }, null); })();\n\nconst _c0$d = [\"selection\"];\nfunction OgcFilterSelectionComponent_div_1_div_1_div_2_mat_option_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 12);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const selectorGroup_r10 = ctx.$implicit;\n    ɵɵproperty(\"value\", selectorGroup_r10);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", selectorGroup_r10.title, \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_1_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 9);\n    ɵɵelementStart(1, \"mat-form-field\");\n    ɵɵelementStart(2, \"mat-select\", 10);\n    ɵɵlistener(\"valueChange\", function OgcFilterSelectionComponent_div_1_div_1_div_2_Template_mat_select_valueChange_2_listener($event) { ɵɵrestoreView(_r12); const ctx_r11 = ɵɵnextContext(3); return ctx_r11.currentPushButtonsGroup = $event; });\n    ɵɵpipe(3, \"translate\");\n    ɵɵtemplate(4, OgcFilterSelectionComponent_div_1_div_1_div_2_mat_option_4_Template, 2, 2, \"mat-option\", 11);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r7 = ɵɵnextContext(3);\n    ɵɵadvance(2);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(3, 3, \"igo.geo.layer.legend.selectStyle\"))(\"value\", ctx_r7.currentPushButtonsGroup);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", ctx_r7.getPushButtonsGroups());\n} }\nfunction OgcFilterSelectionComponent_div_1_div_1_ng_container_3_mat_button_toggle_4_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-button-toggle\", 15);\n    ɵɵlistener(\"change\", function OgcFilterSelectionComponent_div_1_div_1_ng_container_3_mat_button_toggle_4_Template_mat_button_toggle_change_0_listener() { ɵɵrestoreView(_r18); const ogcPushButton_r15 = ctx.$implicit; const selector_r2 = ɵɵnextContext(3).$implicit; const ctx_r16 = ɵɵnextContext(); return ctx_r16.onSelectionChange(ogcPushButton_r15, selector_r2.selectorType); });\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ogcPushButton_r15 = ctx.$implicit;\n    const ctx_r14 = ɵɵnextContext(4);\n    ɵɵproperty(\"matTooltip\", ctx_r14.getToolTip(ogcPushButton_r15))(\"ngStyle\", ctx_r14.getButtonColor(ogcPushButton_r15))(\"checked\", ogcPushButton_r15.enabled)(\"value\", ogcPushButton_r15);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ogcPushButton_r15.title, \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"h4\");\n    ɵɵtext(2);\n    ɵɵelementEnd();\n    ɵɵelementStart(3, \"mat-button-toggle-group\", 13);\n    ɵɵtemplate(4, OgcFilterSelectionComponent_div_1_div_1_ng_container_3_mat_button_toggle_4_Template, 2, 5, \"mat-button-toggle\", 14);\n    ɵɵelementEnd();\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const bundle_r13 = ctx.$implicit;\n    const ctx_r8 = ɵɵnextContext(3);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(bundle_r13.title);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"vertical\", ctx_r8.bundleIsVertical(bundle_r13));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", bundle_r13.selectors);\n} }\nfunction OgcFilterSelectionComponent_div_1_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 7);\n    ɵɵelement(1, \"mat-divider\");\n    ɵɵtemplate(2, OgcFilterSelectionComponent_div_1_div_1_div_2_Template, 5, 5, \"div\", 8);\n    ɵɵtemplate(3, OgcFilterSelectionComponent_div_1_div_1_ng_container_3_Template, 5, 3, \"ng-container\", 1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r3.getPushButtonsGroups().length > 1);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r3.currentPushButtonsGroup.computedSelectors);\n} }\nfunction OgcFilterSelectionComponent_div_1_div_2_div_2_mat_option_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 12);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const selectorGroup_r22 = ctx.$implicit;\n    ɵɵproperty(\"value\", selectorGroup_r22);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", selectorGroup_r22.title, \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_2_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 9);\n    ɵɵelementStart(1, \"mat-form-field\");\n    ɵɵelementStart(2, \"mat-select\", 17);\n    ɵɵlistener(\"valueChange\", function OgcFilterSelectionComponent_div_1_div_2_div_2_Template_mat_select_valueChange_2_listener($event) { ɵɵrestoreView(_r24); const ctx_r23 = ɵɵnextContext(3); return ctx_r23.currentCheckboxesGroup = $event; });\n    ɵɵpipe(3, \"translate\");\n    ɵɵtemplate(4, OgcFilterSelectionComponent_div_1_div_2_div_2_mat_option_4_Template, 2, 2, \"mat-option\", 11);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r19 = ɵɵnextContext(3);\n    ɵɵadvance(2);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(3, 3, \"igo.geo.layer.legend.selectStyle\"))(\"value\", ctx_r19.currentCheckboxesGroup);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", ctx_r19.getCheckboxesGroups());\n} }\nfunction OgcFilterSelectionComponent_div_1_div_2_ng_container_3_mat_checkbox_4_Template(rf, ctx) { if (rf & 1) {\n    const _r31 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-checkbox\", 20);\n    ɵɵlistener(\"change\", function OgcFilterSelectionComponent_div_1_div_2_ng_container_3_mat_checkbox_4_Template_mat_checkbox_change_0_listener() { ɵɵrestoreView(_r31); const ogcCheckbox_r28 = ctx.$implicit; const selector_r2 = ɵɵnextContext(3).$implicit; const ctx_r29 = ɵɵnextContext(); return ctx_r29.onSelectionChange(ogcCheckbox_r28, selector_r2.selectorType); });\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ogcCheckbox_r28 = ctx.$implicit;\n    const ctx_r26 = ɵɵnextContext(4);\n    ɵɵproperty(\"matTooltip\", ctx_r26.getToolTip(ogcCheckbox_r28))(\"checked\", ogcCheckbox_r28.enabled)(\"value\", ogcCheckbox_r28);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ogcCheckbox_r28.title, \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_2_ng_container_3_p_5_u_1_Template(rf, ctx) { if (rf & 1) {\n    const _r35 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"u\", 23);\n    ɵɵlistener(\"click\", function OgcFilterSelectionComponent_div_1_div_2_ng_container_3_p_5_u_1_Template_u_click_0_listener() { ɵɵrestoreView(_r35); const ctx_r34 = ɵɵnextContext(5); return ctx_r34.displayLessResults(\"checkbox\"); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ɵɵpipeBind1(2, 1, \"igo.geo.filter.displayLessResults\"), \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_2_ng_container_3_p_5_u_2_Template(rf, ctx) { if (rf & 1) {\n    const _r37 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"u\", 24);\n    ɵɵlistener(\"click\", function OgcFilterSelectionComponent_div_1_div_2_ng_container_3_p_5_u_2_Template_u_click_0_listener() { ɵɵrestoreView(_r37); const ctx_r36 = ɵɵnextContext(5); return ctx_r36.displayMoreResults(\"checkbox\"); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ɵɵpipeBind1(2, 1, \"igo.geo.filter.displayMoreResults\"), \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_2_ng_container_3_p_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\");\n    ɵɵtemplate(1, OgcFilterSelectionComponent_div_1_div_2_ng_container_3_p_5_u_1_Template, 3, 3, \"u\", 21);\n    ɵɵtemplate(2, OgcFilterSelectionComponent_div_1_div_2_ng_container_3_p_5_u_2_Template, 3, 3, \"u\", 22);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const bundle_r25 = ɵɵnextContext().$implicit;\n    const ctx_r27 = ɵɵnextContext(3);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r27.isLessResults(bundle_r25, \"checkbox\"));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r27.isMoreResults(bundle_r25, \"checkbox\"));\n} }\nfunction OgcFilterSelectionComponent_div_1_div_2_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"h4\");\n    ɵɵtext(2);\n    ɵɵelementEnd();\n    ɵɵelementStart(3, \"div\", 18);\n    ɵɵtemplate(4, OgcFilterSelectionComponent_div_1_div_2_ng_container_3_mat_checkbox_4_Template, 2, 4, \"mat-checkbox\", 19);\n    ɵɵelementEnd();\n    ɵɵtemplate(5, OgcFilterSelectionComponent_div_1_div_2_ng_container_3_p_5_Template, 3, 2, \"p\", 2);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const bundle_r25 = ctx.$implicit;\n    const ctx_r20 = ɵɵnextContext(3);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(bundle_r25.title);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", bundle_r25.selectors);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r20.isLessResults(bundle_r25, \"checkbox\") || ctx_r20.isMoreResults(bundle_r25, \"checkbox\"));\n} }\nfunction OgcFilterSelectionComponent_div_1_div_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 16);\n    ɵɵelement(1, \"mat-divider\");\n    ɵɵtemplate(2, OgcFilterSelectionComponent_div_1_div_2_div_2_Template, 5, 5, \"div\", 8);\n    ɵɵtemplate(3, OgcFilterSelectionComponent_div_1_div_2_ng_container_3_Template, 6, 3, \"ng-container\", 1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r4.getCheckboxesGroups().length > 1);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r4.currentCheckboxesGroup.computedSelectors);\n} }\nfunction OgcFilterSelectionComponent_div_1_div_3_div_2_mat_option_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 12);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const selectorGroup_r42 = ctx.$implicit;\n    ɵɵproperty(\"value\", selectorGroup_r42);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", selectorGroup_r42.title, \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_3_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r44 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 9);\n    ɵɵelementStart(1, \"mat-form-field\");\n    ɵɵelementStart(2, \"mat-select\", 26);\n    ɵɵlistener(\"valueChange\", function OgcFilterSelectionComponent_div_1_div_3_div_2_Template_mat_select_valueChange_2_listener($event) { ɵɵrestoreView(_r44); const ctx_r43 = ɵɵnextContext(3); return ctx_r43.currentRadioButtonsGroup = $event; });\n    ɵɵpipe(3, \"translate\");\n    ɵɵtemplate(4, OgcFilterSelectionComponent_div_1_div_3_div_2_mat_option_4_Template, 2, 2, \"mat-option\", 11);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r39 = ɵɵnextContext(3);\n    ɵɵadvance(2);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(3, 3, \"igo.geo.layer.legend.selectStyle\"))(\"value\", ctx_r39.currentRadioButtonsGroup);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", ctx_r39.getRadioButtonsGroups());\n} }\nfunction OgcFilterSelectionComponent_div_1_div_3_ng_container_3_mat_radio_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r50 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-radio-button\", 29);\n    ɵɵlistener(\"change\", function OgcFilterSelectionComponent_div_1_div_3_ng_container_3_mat_radio_button_4_Template_mat_radio_button_change_0_listener() { ɵɵrestoreView(_r50); const ctx_r49 = ɵɵnextContext(4); return ctx_r49.emptyRadioButtons(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.geo.filter.resetFilters\"));\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\"\", ɵɵpipeBind1(3, 4, \"igo.geo.filter.resetFilters\"), \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_3_ng_container_3_mat_radio_button_5_Template(rf, ctx) { if (rf & 1) {\n    const _r54 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-radio-button\", 20);\n    ɵɵlistener(\"change\", function OgcFilterSelectionComponent_div_1_div_3_ng_container_3_mat_radio_button_5_Template_mat_radio_button_change_0_listener() { ɵɵrestoreView(_r54); const ogcRadioButton_r51 = ctx.$implicit; const selector_r2 = ɵɵnextContext(3).$implicit; const ctx_r52 = ɵɵnextContext(); return ctx_r52.onSelectionChange(ogcRadioButton_r51, selector_r2.selectorType); });\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ogcRadioButton_r51 = ctx.$implicit;\n    const ctx_r47 = ɵɵnextContext(4);\n    ɵɵproperty(\"matTooltip\", ctx_r47.getToolTip(ogcRadioButton_r51))(\"checked\", ogcRadioButton_r51.enabled)(\"value\", ogcRadioButton_r51);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ogcRadioButton_r51.title, \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_3_ng_container_3_p_6_u_1_Template(rf, ctx) { if (rf & 1) {\n    const _r58 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"u\", 23);\n    ɵɵlistener(\"click\", function OgcFilterSelectionComponent_div_1_div_3_ng_container_3_p_6_u_1_Template_u_click_0_listener() { ɵɵrestoreView(_r58); const ctx_r57 = ɵɵnextContext(5); return ctx_r57.displayLessResults(\"radio\"); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ɵɵpipeBind1(2, 1, \"igo.geo.filter.displayLessResults\"), \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_3_ng_container_3_p_6_u_2_Template(rf, ctx) { if (rf & 1) {\n    const _r60 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"u\", 24);\n    ɵɵlistener(\"click\", function OgcFilterSelectionComponent_div_1_div_3_ng_container_3_p_6_u_2_Template_u_click_0_listener() { ɵɵrestoreView(_r60); const ctx_r59 = ɵɵnextContext(5); return ctx_r59.displayMoreResults(\"radio\"); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ɵɵpipeBind1(2, 1, \"igo.geo.filter.displayMoreResults\"), \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_3_ng_container_3_p_6_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\");\n    ɵɵtemplate(1, OgcFilterSelectionComponent_div_1_div_3_ng_container_3_p_6_u_1_Template, 3, 3, \"u\", 21);\n    ɵɵtemplate(2, OgcFilterSelectionComponent_div_1_div_3_ng_container_3_p_6_u_2_Template, 3, 3, \"u\", 22);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const bundle_r45 = ɵɵnextContext().$implicit;\n    const ctx_r48 = ɵɵnextContext(3);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r48.isLessResults(bundle_r45, \"radio\"));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r48.isMoreResults(bundle_r45, \"radio\"));\n} }\nfunction OgcFilterSelectionComponent_div_1_div_3_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"h4\");\n    ɵɵtext(2);\n    ɵɵelementEnd();\n    ɵɵelementStart(3, \"mat-radio-group\", 27);\n    ɵɵtemplate(4, OgcFilterSelectionComponent_div_1_div_3_ng_container_3_mat_radio_button_4_Template, 4, 6, \"mat-radio-button\", 28);\n    ɵɵtemplate(5, OgcFilterSelectionComponent_div_1_div_3_ng_container_3_mat_radio_button_5_Template, 2, 4, \"mat-radio-button\", 19);\n    ɵɵtemplate(6, OgcFilterSelectionComponent_div_1_div_3_ng_container_3_p_6_Template, 3, 2, \"p\", 2);\n    ɵɵelementEnd();\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const bundle_r45 = ctx.$implicit;\n    const ctx_r40 = ɵɵnextContext(3);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(bundle_r45.title);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", bundle_r45.unfiltered);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", bundle_r45.selectors);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r40.isLessResults(bundle_r45, \"radio\") || ctx_r40.isMoreResults(bundle_r45, \"radio\"));\n} }\nfunction OgcFilterSelectionComponent_div_1_div_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 25);\n    ɵɵelement(1, \"mat-divider\");\n    ɵɵtemplate(2, OgcFilterSelectionComponent_div_1_div_3_div_2_Template, 5, 5, \"div\", 8);\n    ɵɵtemplate(3, OgcFilterSelectionComponent_div_1_div_3_ng_container_3_Template, 7, 4, \"ng-container\", 1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r5.getRadioButtonsGroups().length > 1);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r5.currentRadioButtonsGroup.computedSelectors);\n} }\nfunction OgcFilterSelectionComponent_div_1_div_4_div_2_mat_option_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 12);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const selectorGroup_r65 = ctx.$implicit;\n    ɵɵproperty(\"value\", selectorGroup_r65);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", selectorGroup_r65.title, \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_4_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r67 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 9);\n    ɵɵelementStart(1, \"mat-form-field\");\n    ɵɵelementStart(2, \"mat-select\", 31);\n    ɵɵlistener(\"valueChange\", function OgcFilterSelectionComponent_div_1_div_4_div_2_Template_mat_select_valueChange_2_listener($event) { ɵɵrestoreView(_r67); const ctx_r66 = ɵɵnextContext(3); return ctx_r66.currentSelectGroup = $event; });\n    ɵɵpipe(3, \"translate\");\n    ɵɵtemplate(4, OgcFilterSelectionComponent_div_1_div_4_div_2_mat_option_4_Template, 2, 2, \"mat-option\", 11);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r62 = ɵɵnextContext(3);\n    ɵɵadvance(2);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(3, 3, \"igo.geo.layer.legend.selectStyle\"))(\"value\", ctx_r62.currentSelectGroup);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", ctx_r62.getSelectGroups());\n} }\nfunction OgcFilterSelectionComponent_div_1_div_4_ng_container_3_mat_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r74 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-button\", 35);\n    ɵɵlistener(\"click\", function OgcFilterSelectionComponent_div_1_div_4_ng_container_3_mat_button_4_Template_mat_button_click_0_listener() { ɵɵrestoreView(_r74); const ctx_r73 = ɵɵnextContext(4); return ctx_r73.emptySelect(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 36);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.filter.resetFilters\"));\n} }\nconst _c1$7 = function () { return { standalone: true }; };\nfunction OgcFilterSelectionComponent_div_1_div_4_ng_container_3_div_6_mat_checkbox_4_Template(rf, ctx) { if (rf & 1) {\n    const _r79 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-checkbox\", 41);\n    ɵɵlistener(\"ngModelChange\", function OgcFilterSelectionComponent_div_1_div_4_ng_container_3_div_6_mat_checkbox_4_Template_mat_checkbox_ngModelChange_0_listener($event) { ɵɵrestoreView(_r79); const ctx_r78 = ɵɵnextContext(5); return ctx_r78.allSelected = $event; })(\"change\", function OgcFilterSelectionComponent_div_1_div_4_ng_container_3_div_6_mat_checkbox_4_Template_mat_checkbox_change_0_listener() { ɵɵrestoreView(_r79); const ctx_r80 = ɵɵnextContext(5); return ctx_r80.toggleAllSelection(); });\n    ɵɵtext(1, \"Tous \");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r76 = ɵɵnextContext(5);\n    ɵɵproperty(\"ngModel\", ctx_r76.allSelected)(\"ngModelOptions\", ɵɵpureFunction0(2, _c1$7));\n} }\nfunction OgcFilterSelectionComponent_div_1_div_4_ng_container_3_div_6_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    const _r83 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-option\", 42);\n    ɵɵlistener(\"onSelectionChange\", function OgcFilterSelectionComponent_div_1_div_4_ng_container_3_div_6_mat_option_5_Template_mat_option_onSelectionChange_0_listener() { ɵɵrestoreView(_r83); const ctx_r82 = ɵɵnextContext(5); return ctx_r82.optionClick(); });\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ogcSelect_r81 = ctx.$implicit;\n    const ctx_r77 = ɵɵnextContext(5);\n    ɵɵproperty(\"matTooltip\", ctx_r77.getToolTip(ogcSelect_r81))(\"value\", ogcSelect_r81);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ogcSelect_r81.title, \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_4_ng_container_3_div_6_Template(rf, ctx) { if (rf & 1) {\n    const _r85 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\");\n    ɵɵelementStart(1, \"mat-select\", 37, 38);\n    ɵɵlistener(\"ngModelChange\", function OgcFilterSelectionComponent_div_1_div_4_ng_container_3_div_6_Template_mat_select_ngModelChange_1_listener($event) { ɵɵrestoreView(_r85); const ctx_r84 = ɵɵnextContext(4); return ctx_r84.enableds = $event; });\n    ɵɵelementStart(3, \"div\", 18);\n    ɵɵtemplate(4, OgcFilterSelectionComponent_div_1_div_4_ng_container_3_div_6_mat_checkbox_4_Template, 2, 3, \"mat-checkbox\", 39);\n    ɵɵelementEnd();\n    ɵɵtemplate(5, OgcFilterSelectionComponent_div_1_div_4_ng_container_3_div_6_mat_option_5_Template, 2, 3, \"mat-option\", 40);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const bundle_r68 = ɵɵnextContext().$implicit;\n    const ctx_r70 = ɵɵnextContext(3);\n    ɵɵadvance(1);\n    ɵɵproperty(\"multiple\", bundle_r68.multiple)(\"placeholder\", bundle_r68.title)(\"formControl\", ctx_r70.select)(\"ngModel\", ctx_r70.enableds);\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngIf\", bundle_r68.multiple);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", bundle_r68.selectors);\n} }\nfunction OgcFilterSelectionComponent_div_1_div_4_ng_container_3_ng_template_7_mat_option_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 45);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ogcSelect_r88 = ctx.$implicit;\n    const ctx_r87 = ɵɵnextContext(5);\n    ɵɵproperty(\"matTooltip\", ctx_r87.getToolTip(ogcSelect_r88))(\"value\", ogcSelect_r88);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ogcSelect_r88.title, \" \");\n} }\nfunction OgcFilterSelectionComponent_div_1_div_4_ng_container_3_ng_template_7_Template(rf, ctx) { if (rf & 1) {\n    const _r90 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-select\", 43);\n    ɵɵlistener(\"ngModelChange\", function OgcFilterSelectionComponent_div_1_div_4_ng_container_3_ng_template_7_Template_mat_select_ngModelChange_0_listener($event) { ɵɵrestoreView(_r90); const ctx_r89 = ɵɵnextContext(4); return ctx_r89.enabled = $event; });\n    ɵɵtemplate(1, OgcFilterSelectionComponent_div_1_div_4_ng_container_3_ng_template_7_mat_option_1_Template, 2, 3, \"mat-option\", 44);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const bundle_r68 = ɵɵnextContext().$implicit;\n    const ctx_r72 = ɵɵnextContext(3);\n    ɵɵproperty(\"placeholder\", bundle_r68.title)(\"formControl\", ctx_r72.select)(\"ngModel\", ctx_r72.enabled);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", bundle_r68.selectors);\n} }\nfunction OgcFilterSelectionComponent_div_1_div_4_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"h4\");\n    ɵɵtext(2);\n    ɵɵelementEnd();\n    ɵɵelementStart(3, \"div\", 9);\n    ɵɵtemplate(4, OgcFilterSelectionComponent_div_1_div_4_ng_container_3_mat_button_4_Template, 3, 3, \"mat-button\", 32);\n    ɵɵelementStart(5, \"mat-form-field\");\n    ɵɵtemplate(6, OgcFilterSelectionComponent_div_1_div_4_ng_container_3_div_6_Template, 6, 6, \"div\", 33);\n    ɵɵtemplate(7, OgcFilterSelectionComponent_div_1_div_4_ng_container_3_ng_template_7_Template, 2, 4, \"ng-template\", null, 34, ɵɵtemplateRefExtractor);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const bundle_r68 = ctx.$implicit;\n    const _r71 = ɵɵreference(8);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(bundle_r68.title);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", bundle_r68.unfiltered && !bundle_r68.multiple);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", bundle_r68.multiple)(\"ngIfElse\", _r71);\n} }\nfunction OgcFilterSelectionComponent_div_1_div_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 30);\n    ɵɵelement(1, \"mat-divider\");\n    ɵɵtemplate(2, OgcFilterSelectionComponent_div_1_div_4_div_2_Template, 5, 5, \"div\", 8);\n    ɵɵtemplate(3, OgcFilterSelectionComponent_div_1_div_4_ng_container_3_Template, 9, 4, \"ng-container\", 1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r6.getSelectGroups().length > 1);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r6.currentSelectGroup.computedSelectors);\n} }\nfunction OgcFilterSelectionComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\");\n    ɵɵtemplate(1, OgcFilterSelectionComponent_div_1_div_1_Template, 4, 2, \"div\", 3);\n    ɵɵtemplate(2, OgcFilterSelectionComponent_div_1_div_2_Template, 4, 2, \"div\", 4);\n    ɵɵtemplate(3, OgcFilterSelectionComponent_div_1_div_3_Template, 4, 2, \"div\", 5);\n    ɵɵtemplate(4, OgcFilterSelectionComponent_div_1_div_4_Template, 4, 2, \"div\", 6);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const selector_r2 = ctx.$implicit;\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", selector_r2.selectorType === \"pushButton\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", selector_r2.selectorType === \"checkbox\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", selector_r2.selectorType === \"radioButton\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", selector_r2.selectorType === \"select\");\n} }\nfunction OgcFilterSelectionComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r93 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\");\n    ɵɵelement(1, \"mat-divider\");\n    ɵɵelementStart(2, \"h4\");\n    ɵɵtext(3);\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(5, \"igo-ogc-filter-time\", 46);\n    ɵɵlistener(\"datasourceChange\", function OgcFilterSelectionComponent_div_2_Template_igo_ogc_filter_time_datasourceChange_5_listener($event) { ɵɵrestoreView(_r93); const ctx_r92 = ɵɵnextContext(); return ctx_r92.datasource = $event; })(\"currentFilterChange\", function OgcFilterSelectionComponent_div_2_Template_igo_ogc_filter_time_currentFilterChange_5_listener($event) { ɵɵrestoreView(_r93); const ctx_r94 = ɵɵnextContext(); return ctx_r94.currentFilter = $event; })(\"changeProperty\", function OgcFilterSelectionComponent_div_2_Template_igo_ogc_filter_time_changeProperty_5_listener($event) { ɵɵrestoreView(_r93); const ctx_r95 = ɵɵnextContext(); return ctx_r95.changeProperty($event.value, $event.pos); });\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(3);\n    ɵɵtextInterpolate(ɵɵpipeBind1(4, 3, \"igo.geo.filter.reportingDate\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"datasource\", ctx_r1.datasource)(\"currentFilter\", ctx_r1.currentFilter);\n} }\nclass OgcFilterSelectionComponent {\n    constructor(ogcFilterService, formBuilder) {\n        this.ogcFilterService = ogcFilterService;\n        this.formBuilder = formBuilder;\n        this.checkboxesIndex = 5;\n        this.radioButtonsIndex = 5;\n        this.baseIndex = 5;\n        this.ogcFilterOperator = OgcFilterOperator;\n        this.color = 'primary';\n        this.allSelected = false;\n        this.select = new FormControl();\n        this.enabled$ = new BehaviorSubject(undefined);\n        this.enableds$ = new BehaviorSubject([]);\n        this.ogcFilterWriter = new OgcFilterWriter();\n        this.buildForm();\n    }\n    get currentFilter() {\n        return this._currentFilter;\n    }\n    set currentFilter(value) {\n        var _a;\n        this._currentFilter = value;\n        if ((_a = this._currentFilter) === null || _a === void 0 ? void 0 : _a.sliderOptions) {\n            this._currentFilter.sliderOptions.enabled = false; // remove slider toggle (animation temporelle)\n        }\n    }\n    get ogcFiltersSelectors() {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z;\n        const ogcSelector = [];\n        if ((_c = (_b = (_a = this.datasource) === null || _a === void 0 ? void 0 : _a.options) === null || _b === void 0 ? void 0 : _b.ogcFilters) === null || _c === void 0 ? void 0 : _c.pushButtons) {\n            ogcSelector.push((_f = (_e = (_d = this.datasource) === null || _d === void 0 ? void 0 : _d.options) === null || _e === void 0 ? void 0 : _e.ogcFilters) === null || _f === void 0 ? void 0 : _f.pushButtons);\n        }\n        if ((_j = (_h = (_g = this.datasource) === null || _g === void 0 ? void 0 : _g.options) === null || _h === void 0 ? void 0 : _h.ogcFilters) === null || _j === void 0 ? void 0 : _j.checkboxes) {\n            ogcSelector.push((_m = (_l = (_k = this.datasource) === null || _k === void 0 ? void 0 : _k.options) === null || _l === void 0 ? void 0 : _l.ogcFilters) === null || _m === void 0 ? void 0 : _m.checkboxes);\n        }\n        if ((_q = (_p = (_o = this.datasource) === null || _o === void 0 ? void 0 : _o.options) === null || _p === void 0 ? void 0 : _p.ogcFilters) === null || _q === void 0 ? void 0 : _q.radioButtons) {\n            ogcSelector.push((_t = (_s = (_r = this.datasource) === null || _r === void 0 ? void 0 : _r.options) === null || _s === void 0 ? void 0 : _s.ogcFilters) === null || _t === void 0 ? void 0 : _t.radioButtons);\n        }\n        if ((_w = (_v = (_u = this.datasource) === null || _u === void 0 ? void 0 : _u.options) === null || _v === void 0 ? void 0 : _v.ogcFilters) === null || _w === void 0 ? void 0 : _w.select) {\n            ogcSelector.push((_z = (_y = (_x = this.datasource) === null || _x === void 0 ? void 0 : _x.options) === null || _y === void 0 ? void 0 : _y.ogcFilters) === null || _z === void 0 ? void 0 : _z.select);\n        }\n        ogcSelector.sort((a, b) => {\n            if (a.order < b.order) {\n                return -1;\n            }\n            if (a.order > b.order) {\n                return 1;\n            }\n            return 0;\n        });\n        return ogcSelector;\n    }\n    get currentPushButtonsGroup() {\n        return this.form.get('pushButtonsGroup').value;\n    }\n    set currentPushButtonsGroup(value) {\n        this.form.patchValue({ pushButtonsGroup: value });\n    }\n    get currentCheckboxesGroup() {\n        return this.form.get('checkboxesGroup').value;\n    }\n    set currentCheckboxesGroup(value) {\n        this.form.patchValue({ checkboxesGroup: value });\n    }\n    get currentRadioButtonsGroup() {\n        return this.form.get('radioButtonsGroup').value;\n    }\n    set currentRadioButtonsGroup(value) {\n        this.form.patchValue({ radioButtonsGroup: value });\n    }\n    get currentSelectGroup() {\n        return this.form.get('selectGroup').value;\n    }\n    set currentSelectGroup(value) {\n        this.form.patchValue({ selectGroup: value });\n    }\n    get enabled() {\n        return this.enabled$.value;\n    }\n    set enabled(value) {\n        this.enabled$.next(value);\n        clearTimeout(this.applyFiltersTimeout);\n        this.currentSelectGroup.computedSelectors.forEach(compSelect => {\n            compSelect.selectors.forEach(selector => {\n                value === selector ? selector.enabled = true : selector.enabled = false;\n            });\n        });\n        this.applyFiltersTimeout = setTimeout(() => {\n            this.applyFilters();\n        }, 750);\n    }\n    get enableds() {\n        return this.enableds$.value;\n    }\n    set enableds(value) {\n        this.enableds$.next(value);\n        clearTimeout(this.applyFiltersTimeout);\n        this.currentSelectGroup.computedSelectors.forEach(compSelect => {\n            compSelect.selectors.forEach(selector => {\n                value.includes(selector) ? selector.enabled = true : selector.enabled = false;\n            });\n        });\n        this.applyFiltersTimeout = setTimeout(() => {\n            this.applyFilters();\n        }, 750);\n    }\n    buildForm() {\n        this.form = this.formBuilder.group({\n            pushButtons: ['', [Validators.required]],\n            radioButtons: ['', [Validators.required]],\n            pushButtonsGroup: ['', [Validators.required]],\n            checkboxesGroup: ['', [Validators.required]],\n            radioButtonsGroup: ['', [Validators.required]],\n            selectGroup: ['', [Validators.required]],\n        });\n    }\n    getPushButtonsGroups() {\n        var _a, _b, _c;\n        if ((_c = (_b = (_a = this.datasource) === null || _a === void 0 ? void 0 : _a.options) === null || _b === void 0 ? void 0 : _b.ogcFilters) === null || _c === void 0 ? void 0 : _c.pushButtons) {\n            return this.datasource.options.ogcFilters.pushButtons.groups;\n        }\n    }\n    getCheckboxesGroups() {\n        var _a, _b, _c;\n        if ((_c = (_b = (_a = this.datasource) === null || _a === void 0 ? void 0 : _a.options) === null || _b === void 0 ? void 0 : _b.ogcFilters) === null || _c === void 0 ? void 0 : _c.checkboxes) {\n            return this.datasource.options.ogcFilters.checkboxes.groups;\n        }\n    }\n    getRadioButtonsGroups() {\n        var _a, _b, _c;\n        if ((_c = (_b = (_a = this.datasource) === null || _a === void 0 ? void 0 : _a.options) === null || _b === void 0 ? void 0 : _b.ogcFilters) === null || _c === void 0 ? void 0 : _c.radioButtons) {\n            return this.datasource.options.ogcFilters.radioButtons.groups;\n        }\n    }\n    getSelectGroups() {\n        var _a, _b, _c;\n        if ((_c = (_b = (_a = this.datasource) === null || _a === void 0 ? void 0 : _a.options) === null || _b === void 0 ? void 0 : _b.ogcFilters) === null || _c === void 0 ? void 0 : _c.select) {\n            return this.datasource.options.ogcFilters.select.groups;\n        }\n    }\n    ngOnInit() {\n        if (this.datasource.options.ogcFilters) {\n            if (this.datasource.options.ogcFilters.pushButtons) {\n                this.currentPushButtonsGroup =\n                    this.datasource.options.ogcFilters.pushButtons.groups.find(group => group.enabled) ||\n                        this.datasource.options.ogcFilters.pushButtons.groups[0];\n            }\n            if (this.datasource.options.ogcFilters.checkboxes) {\n                this.currentCheckboxesGroup =\n                    this.datasource.options.ogcFilters.checkboxes.groups.find(group => group.enabled) ||\n                        this.datasource.options.ogcFilters.checkboxes.groups[0];\n            }\n            if (this.datasource.options.ogcFilters.radioButtons) {\n                this.currentRadioButtonsGroup =\n                    this.datasource.options.ogcFilters.radioButtons.groups.find(group => group.enabled) ||\n                        this.datasource.options.ogcFilters.radioButtons.groups[0];\n            }\n            if (this.datasource.options.ogcFilters.select) {\n                this.currentSelectGroup =\n                    this.datasource.options.ogcFilters.select.groups.find(group => group.enabled) ||\n                        this.datasource.options.ogcFilters.select.groups[0];\n                this.getSelectEnabled();\n            }\n            this.applyFilters();\n        }\n        this.form\n            .get('pushButtonsGroup')\n            .valueChanges\n            .pipe(debounceTime(750))\n            .subscribe(() => {\n            this.onPushButtonsChangeGroup();\n            this.applyFilters();\n        });\n        this.form\n            .get('checkboxesGroup')\n            .valueChanges\n            .pipe(debounceTime(750))\n            .subscribe(() => {\n            this.onCheckboxesChangeGroup();\n            this.applyFilters();\n        });\n        this.form\n            .get('radioButtonsGroup')\n            .valueChanges\n            .pipe(debounceTime(750))\n            .subscribe(() => {\n            this.onRadioButtonsChangeGroup();\n            this.applyFilters();\n        });\n        this.form\n            .get('selectGroup')\n            .valueChanges\n            .pipe(debounceTime(750))\n            .subscribe(() => {\n            this.onSelectChangeGroup();\n            this.applyFilters();\n        });\n        this.form\n            .get('pushButtons')\n            .valueChanges\n            .pipe(debounceTime(750))\n            .subscribe(() => {\n            this.applyFilters();\n        });\n        this.form\n            .get('radioButtons')\n            .valueChanges\n            .pipe(debounceTime(750))\n            .subscribe(() => {\n            this.applyFilters();\n        });\n    }\n    getSelectEnabled() {\n        const enableds = [];\n        let enabled;\n        this.currentSelectGroup.computedSelectors.forEach(compSelect => {\n            if (compSelect.multiple) {\n                compSelect.selectors.forEach(selector => {\n                    if (selector.enabled) {\n                        enableds.push(selector);\n                    }\n                });\n                this.enableds = enableds;\n            }\n            else {\n                compSelect.selectors.forEach(selector => {\n                    if (selector.enabled) {\n                        enabled = selector;\n                    }\n                });\n                this.enabled = enabled;\n            }\n        });\n    }\n    getToolTip(selector) {\n        let toolTip;\n        if (selector.tooltip) {\n            if (Array.isArray(selector.tooltip)) {\n                toolTip = selector.tooltip.join('\\n');\n            }\n            else {\n                toolTip = selector.tooltip;\n            }\n        }\n        return toolTip || '';\n    }\n    // getButtonStyle(pb: OgcPushButton): {} {\n    //   let styles;\n    //   if (pb.color) {\n    //     styles = {\n    //       'background-color': pb.enabled ? `rgba(${pb.color})` : `rgba(255,255,255,0)`\n    //     };\n    //   } else {\n    //     styles = {\n    //       'background-color': pb.enabled ? 'accent': `rgba(255,255,255,0)`,\n    //       'color': pb.enabled ? `rgba(0,0,0,0.9)` : `rgba(33,33,33,0.38)`\n    //     }\n    //   }\n    //   return styles;\n    // }\n    getButtonColor(pushButton) {\n        let styles;\n        if (pushButton.color && pushButton.enabled) {\n            styles = {\n                'background-color': `rgba(${pushButton.color})`\n            };\n        }\n        return styles;\n    }\n    bundleIsVertical(bundle) {\n        return bundle.vertical ? bundle.vertical : false;\n    }\n    onPushButtonsChangeGroup() {\n        this.getPushButtonsGroups().map(group => group.enabled = false);\n        this.getPushButtonsGroups().find(group => group === this.currentPushButtonsGroup).enabled = true;\n    }\n    onCheckboxesChangeGroup() {\n        this.getCheckboxesGroups().map(group => group.enabled = false);\n        this.getCheckboxesGroups().find(group => group === this.currentCheckboxesGroup).enabled = true;\n    }\n    onRadioButtonsChangeGroup() {\n        this.getRadioButtonsGroups().map(group => group.enabled = false);\n        this.getRadioButtonsGroups().find(group => group === this.currentRadioButtonsGroup).enabled = true;\n    }\n    onSelectChangeGroup() {\n        this.getSelectGroups().map(group => group.enabled = false);\n        this.getSelectGroups().find(group => group === this.currentSelectGroup).enabled = true;\n    }\n    onSelectionChange(currentOgcSelection, selectorType) {\n        clearTimeout(this.applyFiltersTimeout);\n        if (selectorType === 'radioButton') {\n            this.emptyRadioButtons();\n        }\n        if (currentOgcSelection) {\n            currentOgcSelection.enabled = !currentOgcSelection.enabled;\n        }\n        this.applyFiltersTimeout = setTimeout(() => {\n            this.applyFilters();\n        }, 750);\n    }\n    emptyRadioButtons() {\n        this.currentRadioButtonsGroup.computedSelectors.forEach(compSelect => {\n            compSelect.selectors.map(selector => selector.enabled = false);\n            this.applyFiltersTimeout = setTimeout(() => {\n                this.applyFilters();\n            }, 750);\n        });\n    }\n    emptySelect() {\n        this.enabled = [];\n    }\n    toggleAllSelection() {\n        if (this.allSelected) {\n            this.sel.options.forEach((item) => item.select());\n        }\n        else {\n            this.sel.options.forEach((item) => item.deselect());\n        }\n    }\n    optionClick() {\n        let newStatus = true;\n        this.sel.options.forEach((item) => {\n            if (!item.selected) {\n                newStatus = false;\n            }\n        });\n        this.allSelected = newStatus;\n    }\n    applyFilters() {\n        let filterQueryString = '';\n        const conditions = [];\n        const currentGroups = [this.currentPushButtonsGroup, this.currentCheckboxesGroup,\n            this.currentRadioButtonsGroup, this.currentSelectGroup];\n        for (const currentGroup of currentGroups) {\n            if (currentGroup.computedSelectors) {\n                currentGroup.computedSelectors.map(selectorBundle => {\n                    const bundleCondition = [];\n                    selectorBundle.selectors\n                        .filter(ogcSelector => ogcSelector.enabled === true)\n                        .forEach(enabledSelector => bundleCondition.push(enabledSelector.filters));\n                    if (bundleCondition.length >= 1) {\n                        if (bundleCondition.length === 1) {\n                            conditions.push(bundleCondition[0]);\n                        }\n                        else {\n                            conditions.push({ logical: selectorBundle.logical, filters: bundleCondition });\n                        }\n                    }\n                });\n            }\n        }\n        if (this.isTemporalOperator()) {\n            conditions.push(this.datasource.options.ogcFilters.interfaceOgcFilters[0]);\n        }\n        if (conditions.length >= 1) {\n            filterQueryString = this.ogcFilterWriter\n                .buildFilter(conditions.length === 1 ?\n                conditions[0] : { logical: 'And', filters: conditions });\n        }\n        if (this.datasource.options.type === 'wms') {\n            this.ogcFilterService.filterByOgc(this.datasource, filterQueryString);\n        }\n        if (this.datasource.options.type === 'wfs') {\n            // TODO: Check how to prevent wfs to refresh when filter icon is pushed...\n            this.datasource.ol.refresh();\n        }\n        this.datasource.setOgcFilters(this.datasource.options.ogcFilters, true);\n    }\n    isMoreResults(bundle, type) {\n        let selectorsLength = 0;\n        for (const selectors of bundle.selectors) {\n            selectorsLength++;\n        }\n        const index = type === 'radio' ? this.radioButtonsIndex : this.checkboxesIndex;\n        return selectorsLength > index;\n    }\n    displayMoreResults(type) {\n        type === 'radio' ? this.radioButtonsIndex += 5 : this.checkboxesIndex += 5;\n        return;\n    }\n    isLessResults(bundle, type) {\n        let selectorsLength = 0;\n        for (const selectors of bundle.selectors) {\n            selectorsLength++;\n        }\n        const index = type === 'radio' ? this.radioButtonsIndex : this.checkboxesIndex;\n        return this.baseIndex !== index && selectorsLength > this.baseIndex;\n    }\n    displayLessResults(type) {\n        type === 'radio' ? this.radioButtonsIndex = this.baseIndex : this.checkboxesIndex = this.baseIndex;\n        return;\n    }\n    isTemporalOperator() {\n        var _a, _b;\n        return (((_b = (_a = this.currentFilter) === null || _a === void 0 ? void 0 : _a.operator) === null || _b === void 0 ? void 0 : _b.toLowerCase()) ===\n            this.ogcFilterOperator.During.toLowerCase());\n    }\n    changeProperty(value, pos, refreshFilter = true) {\n        const detectedProperty = this.detectProperty(pos);\n        if (detectedProperty) {\n            this.datasource.options.ogcFilters.interfaceOgcFilters.find(filter => filter.filterid === this.currentFilter.filterid)[detectedProperty] = value;\n            if (refreshFilter) {\n                this.applyFilters();\n            }\n        }\n    }\n    detectProperty(pos) {\n        switch (this.currentFilter.operator) {\n            case OgcFilterOperator.PropertyIsNotEqualTo:\n            case OgcFilterOperator.PropertyIsEqualTo:\n            case OgcFilterOperator.PropertyIsGreaterThan:\n            case OgcFilterOperator.PropertyIsGreaterThanOrEqualTo:\n            case OgcFilterOperator.PropertyIsLessThan:\n            case OgcFilterOperator.PropertyIsLessThanOrEqualTo:\n                return 'expression';\n            case OgcFilterOperator.PropertyIsLike:\n                return 'pattern';\n            case OgcFilterOperator.PropertyIsBetween:\n                return pos && pos === 1\n                    ? 'lowerBoundary'\n                    : pos && pos === 2\n                        ? 'upperBoundary'\n                        : undefined;\n            case OgcFilterOperator.During:\n                return pos && pos === 1\n                    ? 'begin'\n                    : pos && pos === 2\n                        ? 'end'\n                        : undefined;\n            default:\n                return;\n        }\n    }\n}\nOgcFilterSelectionComponent.ɵfac = function OgcFilterSelectionComponent_Factory(t) { return new (t || OgcFilterSelectionComponent)(ɵɵdirectiveInject(OGCFilterService), ɵɵdirectiveInject(FormBuilder)); };\nOgcFilterSelectionComponent.ɵcmp = ɵɵdefineComponent({ type: OgcFilterSelectionComponent, selectors: [[\"igo-ogc-filter-selection\"]], viewQuery: function OgcFilterSelectionComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵviewQuery(_c0$d, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.sel = _t.first);\n    } }, inputs: { refreshFilters: \"refreshFilters\", datasource: \"datasource\", map: \"map\", checkboxesIndex: \"checkboxesIndex\", radioButtonsIndex: \"radioButtonsIndex\", baseIndex: \"baseIndex\", currentFilter: \"currentFilter\" }, decls: 3, vars: 3, consts: [[3, \"formGroup\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"class\", \"pushButtonGroups\", 4, \"ngIf\"], [\"class\", \"checkboxGroups\", 4, \"ngIf\"], [\"class\", \"radioButtonGroups\", 4, \"ngIf\"], [\"class\", \"selectGroups\", 4, \"ngIf\"], [1, \"pushButtonGroups\"], [\"class\", \"groupsSelector\", 4, \"ngIf\"], [1, \"groupsSelector\"], [\"formControlName\", \"pushButtonsGroup\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"value\", \"valueChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"formControlName\", \"pushButtons\", \"appearance\", \"legacy\", \"multiple\", \"true\", 1, \"mat-typography\", 3, \"vertical\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"matTooltip\", \"ngStyle\", \"checked\", \"value\", \"change\", 4, \"ngFor\", \"ngForOf\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"matTooltip\", \"ngStyle\", \"checked\", \"value\", \"change\"], [1, \"checkboxGroups\"], [\"formControlName\", \"checkboxesGroup\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"value\", \"valueChange\"], [1, \"checkboxes\", \"mat-typography\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"matTooltip\", \"checked\", \"value\", \"change\", 4, \"ngFor\", \"ngForOf\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"matTooltip\", \"checked\", \"value\", \"change\"], [\"class\", \"lessResults mat-typography\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"moreResults mat-typography\", 3, \"click\", 4, \"ngIf\"], [1, \"lessResults\", \"mat-typography\", 3, \"click\"], [1, \"moreResults\", \"mat-typography\", 3, \"click\"], [1, \"radioButtonGroups\"], [\"formControlName\", \"radioButtonsGroup\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"value\", \"valueChange\"], [\"formControlName\", \"radioButtons\", 1, \"mat-typography\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"matTooltip\", \"change\", 4, \"ngIf\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"matTooltip\", \"change\"], [1, \"selectGroups\"], [\"formControlName\", \"selectGroup\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"value\", \"valueChange\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"notMulti\", \"\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"filter-remove\"], [3, \"multiple\", \"placeholder\", \"formControl\", \"ngModel\", \"ngModelChange\"], [\"selection\", \"\"], [3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\", \"change\", 4, \"ngIf\"], [\"tooltip-position\", \"below\", \"matTooltipDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"matTooltip\", \"value\", \"onSelectionChange\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\", \"change\"], [\"tooltip-position\", \"below\", \"matTooltipDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"matTooltip\", \"value\", \"onSelectionChange\"], [3, \"placeholder\", \"formControl\", \"ngModel\", \"ngModelChange\"], [\"tooltip-position\", \"below\", \"matTooltipDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"matTooltip\", \"value\", 4, \"ngFor\", \"ngForOf\"], [\"tooltip-position\", \"below\", \"matTooltipDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"matTooltip\", \"value\"], [3, \"datasource\", \"currentFilter\", \"datasourceChange\", \"currentFilterChange\", \"changeProperty\"]], template: function OgcFilterSelectionComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"form\", 0);\n        ɵɵtemplate(1, OgcFilterSelectionComponent_div_1_Template, 5, 4, \"div\", 1);\n        ɵɵelementEnd();\n        ɵɵtemplate(2, OgcFilterSelectionComponent_div_2_Template, 6, 5, \"div\", 2);\n    } if (rf & 2) {\n        ɵɵproperty(\"formGroup\", ctx.form);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ctx.ogcFiltersSelectors);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.isTemporalOperator());\n    } }, styles: [\".mat-button-toggle-group[_ngcontent-%COMP%]{margin:5px}.checkboxes[_ngcontent-%COMP%], .mat-button-toggle-group[_ngcontent-%COMP%]{box-shadow:none;flex-wrap:wrap}.groupsSelector[_ngcontent-%COMP%]{text-align:center}mat-button-toggle[_ngcontent-%COMP%]{border:1.5px solid #000;border-radius:5px;display:inline-flex;height:auto;margin:5px;min-height:40px;white-space:normal;width:150px}mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{display:block;font-size:small;line-height:unset}  .material-tooltip{white-space:pre-wrap}mat-checkbox[_ngcontent-%COMP%], mat-radio-button[_ngcontent-%COMP%]{display:inline-flex;font-size:larger;margin:7px;width:95%}mat-checkbox[_ngcontent-%COMP%]     label, mat-radio-button[_ngcontent-%COMP%]     label{white-space:normal}mat-checkbox[_ngcontent-%COMP%]{vertical-align:middle}mat-button[_ngcontent-%COMP%]{padding-right:10px}h4[_ngcontent-%COMP%]{margin:7px;text-align:left}u[_ngcontent-%COMP%]{color:#00f;cursor:pointer;margin:5px}p[_ngcontent-%COMP%]{margin:unset}igo-ogc-filter-time[_ngcontent-%COMP%]     .datetime-input{margin:10px 0 5px 10px;width:140px}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OgcFilterSelectionComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filter-selection',\n                templateUrl: './ogc-filter-selection.component.html',\n                styleUrls: ['./ogc-filter-selection.component.scss']\n            }]\n    }], function () { return [{ type: OGCFilterService }, { type: FormBuilder }]; }, { sel: [{\n            type: ViewChild,\n            args: ['selection']\n        }], refreshFilters: [{\n            type: Input\n        }], datasource: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], checkboxesIndex: [{\n            type: Input\n        }], radioButtonsIndex: [{\n            type: Input\n        }], baseIndex: [{\n            type: Input\n        }], currentFilter: [{\n            type: Input\n        }] }); })();\n\nfunction SpatialFilterTypeComponent_mat_option_8_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 10);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const queryType_r1 = ctx.$implicit;\n    ɵɵproperty(\"value\", queryType_r1);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.terrapi.\" + queryType_r1), \" \");\n} }\n/**\n * Spatial Filter Type\n */\nclass SpatialFilterTypeComponent {\n    constructor() {\n        this.queryType = ['Arrond', 'CircFed', 'CircProv', 'DirReg', 'Mun', 'MRC', 'AdmRegion', 'RegTour'];\n        this.selectedTypeIndex = new FormControl(0);\n        /**\n         * Reference to the SpatialFIlterType enum\n         * @internal\n         */\n        this.spatialType = SpatialFilterType;\n        this.activeDrawType = this.spatialType.Polygon;\n        this.layers = [];\n        this.eventType = new EventEmitter();\n        this.eventQueryType = new EventEmitter();\n        this.zoneChange = new EventEmitter();\n        this.zoneWithBufferChange = new EventEmitter();\n        this.bufferChange = new EventEmitter();\n        this.measureUnitChange = new EventEmitter();\n    }\n    get store() {\n        return this._store;\n    }\n    set store(store) {\n        this._store = store;\n    }\n    ngOnInit() {\n        if (this.selectedTypeIndex.value === 0) {\n            this.type = this.spatialType.Predefined;\n        }\n        if (this.selectedTypeIndex.value === 1) {\n            this.type = this.activeDrawType;\n        }\n        this.eventType.emit(this.type);\n    }\n    onTypeChange(event) {\n        if (this.selectedTypeIndex.value === 0) {\n            this.type = SpatialFilterType.Predefined;\n        }\n        if (this.selectedTypeIndex.value === 1) {\n            this.type = this.activeDrawType;\n        }\n        this.eventType.emit(this.type);\n    }\n    onDrawTypeChange(spatialType) {\n        this.activeDrawType = spatialType;\n        this.eventType.emit(this.activeDrawType);\n    }\n    onSelectionChange() {\n        this.eventQueryType.emit(this.selectedQueryType);\n        this.zoneChange.emit(undefined);\n    }\n}\nSpatialFilterTypeComponent.ɵfac = function SpatialFilterTypeComponent_Factory(t) { return new (t || SpatialFilterTypeComponent)(); };\nSpatialFilterTypeComponent.ɵcmp = ɵɵdefineComponent({ type: SpatialFilterTypeComponent, selectors: [[\"igo-spatial-filter-type\"]], inputs: { store: \"store\", selectedQueryType: \"selectedQueryType\", zone: \"zone\", layers: \"layers\" }, outputs: { eventType: \"eventType\", eventQueryType: \"eventQueryType\", zoneChange: \"zoneChange\", zoneWithBufferChange: \"zoneWithBufferChange\", bufferChange: \"bufferChange\", measureUnitChange: \"measureUnitChange\" }, decls: 20, vars: 25, consts: [[3, \"selectedIndex\", \"selectedIndexChange\", \"selectedTabChange\"], [3, \"label\"], [3, \"value\", \"selectionChange\", \"valueChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"store\", \"queryType\", \"zone\", \"layers\", \"zoneChange\", \"zoneWithBufferChange\", \"bufferChange\", \"measureUnitChange\"], [1, \"spatial-type-toggle\"], [3, \"value\", \"change\"], [3, \"value\", \"matTooltip\"], [\"svgIcon\", \"pentagon-outline\"], [\"svgIcon\", \"record-circle-outline\"], [3, \"value\"]], template: function SpatialFilterTypeComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-tab-group\", 0);\n        ɵɵlistener(\"selectedIndexChange\", function SpatialFilterTypeComponent_Template_mat_tab_group_selectedIndexChange_0_listener($event) { return ctx.selectedTypeIndex.setValue($event); })(\"selectedTabChange\", function SpatialFilterTypeComponent_Template_mat_tab_group_selectedTabChange_0_listener($event) { return ctx.onTypeChange($event); });\n        ɵɵelementStart(1, \"mat-tab\", 1);\n        ɵɵpipe(2, \"translate\");\n        ɵɵelementStart(3, \"mat-form-field\");\n        ɵɵelementStart(4, \"mat-label\");\n        ɵɵtext(5);\n        ɵɵpipe(6, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(7, \"mat-select\", 2);\n        ɵɵlistener(\"selectionChange\", function SpatialFilterTypeComponent_Template_mat_select_selectionChange_7_listener() { return ctx.onSelectionChange(); })(\"valueChange\", function SpatialFilterTypeComponent_Template_mat_select_valueChange_7_listener($event) { return ctx.selectedQueryType = $event; });\n        ɵɵtemplate(8, SpatialFilterTypeComponent_mat_option_8_Template, 3, 4, \"mat-option\", 3);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(9, \"igo-spatial-filter-list\", 4);\n        ɵɵlistener(\"zoneChange\", function SpatialFilterTypeComponent_Template_igo_spatial_filter_list_zoneChange_9_listener($event) { return ctx.zoneChange.emit($event); })(\"zoneWithBufferChange\", function SpatialFilterTypeComponent_Template_igo_spatial_filter_list_zoneWithBufferChange_9_listener($event) { return ctx.zoneWithBufferChange.emit($event); })(\"bufferChange\", function SpatialFilterTypeComponent_Template_igo_spatial_filter_list_bufferChange_9_listener($event) { return ctx.bufferChange.emit($event); })(\"measureUnitChange\", function SpatialFilterTypeComponent_Template_igo_spatial_filter_list_measureUnitChange_9_listener($event) { return ctx.measureUnitChange.emit($event); });\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(10, \"mat-tab\", 1);\n        ɵɵpipe(11, \"translate\");\n        ɵɵelementStart(12, \"div\", 5);\n        ɵɵelementStart(13, \"mat-button-toggle-group\", 6);\n        ɵɵlistener(\"change\", function SpatialFilterTypeComponent_Template_mat_button_toggle_group_change_13_listener($event) { return ctx.onDrawTypeChange($event.value); });\n        ɵɵelementStart(14, \"mat-button-toggle\", 7);\n        ɵɵpipe(15, \"translate\");\n        ɵɵelement(16, \"mat-icon\", 8);\n        ɵɵelementEnd();\n        ɵɵelementStart(17, \"mat-button-toggle\", 7);\n        ɵɵpipe(18, \"translate\");\n        ɵɵelement(19, \"mat-icon\", 9);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"selectedIndex\", ctx.selectedTypeIndex.value);\n        ɵɵadvance(1);\n        ɵɵproperty(\"label\", ɵɵpipeBind1(2, 15, \"igo.geo.spatialFilter.predefined\"));\n        ɵɵadvance(4);\n        ɵɵtextInterpolate(ɵɵpipeBind1(6, 17, \"igo.geo.spatialFilter.searchLabel\"));\n        ɵɵadvance(2);\n        ɵɵproperty(\"value\", ctx.selectedQueryType);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ctx.queryType);\n        ɵɵadvance(1);\n        ɵɵproperty(\"store\", ctx.store)(\"queryType\", ctx.selectedQueryType)(\"zone\", ctx.zone)(\"layers\", ctx.layers);\n        ɵɵadvance(1);\n        ɵɵproperty(\"label\", ɵɵpipeBind1(11, 19, \"igo.geo.spatialFilter.draw\"));\n        ɵɵadvance(3);\n        ɵɵproperty(\"value\", ctx.activeDrawType);\n        ɵɵadvance(1);\n        ɵɵproperty(\"value\", ctx.spatialType.Polygon)(\"matTooltip\", ɵɵpipeBind1(15, 21, \"igo.geo.spatialFilter.drawPolygon\"));\n        ɵɵadvance(3);\n        ɵɵproperty(\"value\", ctx.spatialType.Point)(\"matTooltip\", ɵɵpipeBind1(18, 23, \"igo.geo.spatialFilter.drawCircle\"));\n    } }, styles: [\".mat-form-field[_ngcontent-%COMP%]{margin-left:2px;padding:5px;width:95%}.mat-tab-group[_ngcontent-%COMP%]     .mat-tab-body-content{overflow:hidden}.mat-tab-group[_ngcontent-%COMP%]     .mat-tab-label{padding:10px}.mat-tab-group[_ngcontent-%COMP%]     .mat-tab-body-wrapper{margin-top:5px}.spatial-type-toggle[_ngcontent-%COMP%]{padding:10px;text-align:center}.spatial-type-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%], .spatial-type-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{width:50%}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SpatialFilterTypeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-spatial-filter-type',\n                templateUrl: './spatial-filter-type.component.html',\n                styleUrls: ['./spatial-filter-type.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { store: [{\n            type: Input\n        }], selectedQueryType: [{\n            type: Input\n        }], zone: [{\n            type: Input\n        }], layers: [{\n            type: Input\n        }], eventType: [{\n            type: Output\n        }], eventQueryType: [{\n            type: Output\n        }], zoneChange: [{\n            type: Output\n        }], zoneWithBufferChange: [{\n            type: Output\n        }], bufferChange: [{\n            type: Output\n        }], measureUnitChange: [{\n            type: Output\n        }] }); })();\n\nfunction SpatialFilterListComponent_mat_option_7_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 13);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const entities_r4 = ctx.$implicit;\n    ɵɵproperty(\"value\", entities_r4);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", entities_r4.properties.nom, \" \");\n} }\nfunction SpatialFilterListComponent_mat_option_17_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 13);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const measureUnit_r5 = ctx.$implicit;\n    ɵɵproperty(\"value\", measureUnit_r5);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.measure.\" + measureUnit_r5), \" \");\n} }\nclass SpatialFilterListComponent {\n    constructor(spatialFilterService, messageService, languageService) {\n        this.spatialFilterService = spatialFilterService;\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.layers = [];\n        this.measureUnit = MeasureLengthUnit.Meters;\n        this.formControl = new FormControl();\n        this.bufferFormControl = new FormControl();\n        this.zoneChange = new EventEmitter();\n        this.zoneWithBufferChange = new EventEmitter();\n        this.bufferChange = new EventEmitter();\n        this.measureUnitChange = new EventEmitter();\n    }\n    get store() {\n        return this._store;\n    }\n    set store(store) {\n        this._store = store;\n    }\n    get queryType() {\n        return this._queryType;\n    }\n    set queryType(queryType) {\n        this.formControl.setValue('');\n        this._queryType = queryType;\n    }\n    get zone() {\n        return this._zone;\n    }\n    set zone(value) {\n        this._zone = value;\n        if (!value) {\n            this.zoneWithBuffer = undefined;\n            this.bufferFormControl.setValue(0);\n        }\n    }\n    /**\n     * Available measure units for the measure type given\n     * @internal\n     */\n    get measureUnits() {\n        return [MeasureLengthUnit.Meters, MeasureLengthUnit.Kilometers];\n    }\n    ngOnInit() {\n        this.formValueChanges$$ = this.formControl.valueChanges.subscribe((value) => {\n            if (value.length) {\n                this.store.view.filter((feature) => {\n                    const filterNormalized = value.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n                    const featureNameNormalized = feature.properties.nom.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n                    return featureNameNormalized.includes(filterNormalized);\n                });\n            }\n        });\n        this.bufferValueChanges$$ = this.bufferFormControl.valueChanges\n            .pipe(debounceTime(500), distinctUntilChanged())\n            .subscribe((value) => {\n            if (this.measureUnit === MeasureLengthUnit.Meters && value > 0 && value <= 100000) {\n                this.bufferChange.emit(value);\n                this.spatialFilterService.loadBufferGeometry(this.selectedZone, SpatialFilterType.Predefined, value, this.queryType).subscribe((featureGeom) => {\n                    this.zoneWithBuffer = featureGeom;\n                    this.zoneWithBufferChange.emit(this.zoneWithBuffer);\n                });\n            }\n            else if (this.measureUnit === MeasureLengthUnit.Kilometers && value > 0 && value <= 100) {\n                this.bufferChange.emit(value);\n                this.spatialFilterService.loadBufferGeometry(this.selectedZone, SpatialFilterType.Predefined, value * 1000, this.queryType).subscribe((featureGeom) => {\n                    this.zoneWithBuffer = featureGeom;\n                    this.zoneWithBufferChange.emit(this.zoneWithBuffer);\n                });\n            }\n            else if (value === 0 && this.layers.length > 0) {\n                this.bufferChange.emit(value);\n                this.zoneWithBufferChange.emit(this.selectedZone);\n            }\n            else if (value < 0 ||\n                (this.measureUnit === MeasureLengthUnit.Meters && value > 100000) ||\n                (this.measureUnit === MeasureLengthUnit.Kilometers && value > 100)) {\n                this.bufferFormControl.setValue(0);\n                this.messageService.alert(this.languageService.translate.instant('igo.geo.spatialFilter.bufferAlert'), this.languageService.translate.instant('igo.geo.spatialFilter.warning'));\n            }\n        });\n    }\n    ngOnDestroy() {\n        this.formValueChanges$$.unsubscribe();\n    }\n    displayFn(feature) {\n        return feature ? feature.properties.nom : undefined;\n    }\n    onZoneChange(feature) {\n        if (feature && this.queryType) {\n            this.spatialFilterService.loadItemById(feature, this.queryType)\n                .subscribe((featureGeom) => {\n                this.selectedZone = featureGeom;\n                this.zoneChange.emit(featureGeom);\n            });\n        }\n    }\n    /**\n     * Set the measure unit\n     * @internal\n     */\n    onMeasureUnitChange(unit) {\n        if (unit === this.measureUnit) {\n            return;\n        }\n        else {\n            this.measureUnit = unit;\n            this.measureUnitChange.emit(this.measureUnit);\n            this.measureUnit === MeasureLengthUnit.Meters ?\n                this.bufferFormControl.setValue(this.bufferFormControl.value * 1000) :\n                this.bufferFormControl.setValue(this.bufferFormControl.value / 1000);\n        }\n    }\n}\nSpatialFilterListComponent.ɵfac = function SpatialFilterListComponent_Factory(t) { return new (t || SpatialFilterListComponent)(ɵɵdirectiveInject(SpatialFilterService), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(LanguageService)); };\nSpatialFilterListComponent.ɵcmp = ɵɵdefineComponent({ type: SpatialFilterListComponent, selectors: [[\"igo-spatial-filter-list\"]], inputs: { store: \"store\", queryType: \"queryType\", zone: \"zone\", layers: \"layers\" }, outputs: { zoneChange: \"zoneChange\", zoneWithBufferChange: \"zoneWithBufferChange\", bufferChange: \"bufferChange\", measureUnitChange: \"measureUnitChange\" }, decls: 18, vars: 17, consts: [[1, \"form-list\"], [1, \"zone-list\"], [\"type\", \"text\", \"matInput\", \"\", 3, \"placeholder\", \"formControl\", \"matAutocomplete\"], [\"input\", \"\"], [3, \"displayWith\", \"optionSelected\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"buffer-div\"], [1, \"buffer-form\"], [1, \"buffer\"], [\"type\", \"number\", \"matInput\", \"\", 3, \"placeholder\", \"formControl\", \"value\", \"readonly\"], [1, \"unit-field\"], [3, \"value\", \"selectionChange\"], [3, \"value\"]], template: function SpatialFilterListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"form\", 0);\n        ɵɵelementStart(1, \"mat-form-field\", 1);\n        ɵɵelement(2, \"input\", 2, 3);\n        ɵɵpipe(4, \"translate\");\n        ɵɵelementStart(5, \"mat-autocomplete\", 4, 5);\n        ɵɵlistener(\"optionSelected\", function SpatialFilterListComponent_Template_mat_autocomplete_optionSelected_5_listener($event) { return ctx.onZoneChange($event.option.value); });\n        ɵɵtemplate(7, SpatialFilterListComponent_mat_option_7_Template, 2, 2, \"mat-option\", 6);\n        ɵɵpipe(8, \"async\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(9, \"form\");\n        ɵɵelementStart(10, \"div\", 7);\n        ɵɵelementStart(11, \"form\", 8);\n        ɵɵelementStart(12, \"mat-form-field\", 9);\n        ɵɵelement(13, \"input\", 10);\n        ɵɵpipe(14, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(15, \"mat-form-field\", 11);\n        ɵɵelementStart(16, \"mat-select\", 12);\n        ɵɵlistener(\"selectionChange\", function SpatialFilterListComponent_Template_mat_select_selectionChange_16_listener($event) { return ctx.onMeasureUnitChange($event.value); });\n        ɵɵtemplate(17, SpatialFilterListComponent_mat_option_17_Template, 3, 4, \"mat-option\", 6);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r1 = ɵɵreference(6);\n        ɵɵadvance(2);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(4, 11, \"igo.geo.spatialFilter.listLabel\"));\n        ɵɵproperty(\"formControl\", ctx.formControl)(\"matAutocomplete\", _r1);\n        ɵɵadvance(3);\n        ɵɵproperty(\"displayWith\", ctx.displayFn);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(8, 13, ctx.store.view.all$()));\n        ɵɵadvance(6);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(14, 15, \"igo.geo.spatialFilter.buffer\"));\n        ɵɵproperty(\"formControl\", ctx.bufferFormControl)(\"value\", 0)(\"readonly\", !ctx.zone);\n        ɵɵadvance(3);\n        ɵɵproperty(\"value\", ctx.measureUnit);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ctx.measureUnits);\n    } }, directives: [ɵangular_packages_forms_forms_y, NgControlStatusGroup, NgForm, MatFormField, MatInput, DefaultValueAccessor, MatAutocompleteTrigger, NgControlStatus, FormControlDirective, MatAutocomplete, NgForOf, NumberValueAccessor, MatSelect, MatOption], pipes: [TranslatePipe, AsyncPipe], styles: [\".buffer-div[_ngcontent-%COMP%]{display:flex;width:100%}.buffer-div[_ngcontent-%COMP%], .zone-list[_ngcontent-%COMP%]{margin-left:2px;padding:5px}.zone-list[_ngcontent-%COMP%]{width:95%}.buffer[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;width:110%}.unit-field[_ngcontent-%COMP%]{margin-left:30px;width:110px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SpatialFilterListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-spatial-filter-list',\n                templateUrl: './spatial-filter-list.component.html',\n                styleUrls: ['./spatial-filter-list.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: SpatialFilterService }, { type: MessageService }, { type: LanguageService }]; }, { store: [{\n            type: Input\n        }], queryType: [{\n            type: Input\n        }], zone: [{\n            type: Input\n        }], layers: [{\n            type: Input\n        }], zoneChange: [{\n            type: Output\n        }], zoneWithBufferChange: [{\n            type: Output\n        }], bufferChange: [{\n            type: Output\n        }], measureUnitChange: [{\n            type: Output\n        }] }); })();\n\nfunction SpatialFilterItemComponent_mat_slide_toggle_5_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-slide-toggle\", 15);\n    ɵɵlistener(\"change\", function SpatialFilterItemComponent_mat_slide_toggle_5_Template_mat_slide_toggle_change_0_listener() { ɵɵrestoreView(_r9); const ctx_r8 = ɵɵnextContext(); return ctx_r8.onDrawControlChange(); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"checked\", ctx_r0.drawControlIsActive)(\"labelPosition\", \"before\");\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 3, \"igo.geo.spatialFilter.drawControl\"), \" \");\n} }\nfunction SpatialFilterItemComponent_mat_slide_toggle_6_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-slide-toggle\", 15);\n    ɵɵlistener(\"change\", function SpatialFilterItemComponent_mat_slide_toggle_6_Template_mat_slide_toggle_change_0_listener() { ɵɵrestoreView(_r11); const ctx_r10 = ɵɵnextContext(); return ctx_r10.onfreehandControlChange(); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"checked\", ctx_r1.freehandDrawIsActive)(\"labelPosition\", \"before\");\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 3, \"igo.geo.spatialFilter.freehandControl\"), \" \");\n} }\nfunction SpatialFilterItemComponent_div_7_mat_option_7_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 6);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const measureUnit_r13 = ctx.$implicit;\n    ɵɵproperty(\"value\", measureUnit_r13);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.measure.\" + measureUnit_r13), \" \");\n} }\nfunction SpatialFilterItemComponent_div_7_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 16);\n    ɵɵelementStart(1, \"form\", 17);\n    ɵɵelementStart(2, \"mat-form-field\", 18);\n    ɵɵelement(3, \"input\", 19);\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(5, \"mat-form-field\", 20);\n    ɵɵelementStart(6, \"mat-select\", 21);\n    ɵɵlistener(\"selectionChange\", function SpatialFilterItemComponent_div_7_Template_mat_select_selectionChange_6_listener($event) { ɵɵrestoreView(_r15); const ctx_r14 = ɵɵnextContext(); return ctx_r14.onMeasureUnitChange($event.value); });\n    ɵɵtemplate(7, SpatialFilterItemComponent_div_7_mat_option_7_Template, 3, 4, \"mat-option\", 22);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵadvance(3);\n    ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(4, 6, \"igo.geo.spatialFilter.buffer\"));\n    ɵɵproperty(\"formControl\", ctx_r2.bufferFormControl)(\"value\", 0)(\"readonly\", ctx_r2.formControl.value === null);\n    ɵɵadvance(3);\n    ɵɵproperty(\"value\", ctx_r2.measureUnit);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r2.measureUnits);\n} }\nfunction SpatialFilterItemComponent_div_8_mat_option_7_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 6);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const measureUnit_r17 = ctx.$implicit;\n    ɵɵproperty(\"value\", measureUnit_r17);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.measure.\" + measureUnit_r17), \" \");\n} }\nfunction SpatialFilterItemComponent_div_8_Template(rf, ctx) { if (rf & 1) {\n    const _r19 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 23);\n    ɵɵelementStart(1, \"form\", 24);\n    ɵɵelementStart(2, \"mat-form-field\", 25);\n    ɵɵelementStart(3, \"input\", 26);\n    ɵɵlistener(\"input\", function SpatialFilterItemComponent_div_8_Template_input_input_3_listener() { ɵɵrestoreView(_r19); const ctx_r18 = ɵɵnextContext(); return ctx_r18.getRadius(); });\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(5, \"mat-form-field\", 20);\n    ɵɵelementStart(6, \"mat-select\", 21);\n    ɵɵlistener(\"selectionChange\", function SpatialFilterItemComponent_div_8_Template_mat_select_selectionChange_6_listener($event) { ɵɵrestoreView(_r19); const ctx_r20 = ɵɵnextContext(); return ctx_r20.onMeasureUnitChange($event.value); });\n    ɵɵtemplate(7, SpatialFilterItemComponent_div_8_mat_option_7_Template, 3, 4, \"mat-option\", 22);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵadvance(3);\n    ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(4, 6, \"igo.geo.spatialFilter.radius\"));\n    ɵɵproperty(\"formControl\", ctx_r3.radiusFormControl)(\"value\", 1000)(\"readonly\", ctx_r3.freehandDrawIsActive && ctx_r3.formControl.value === null);\n    ɵɵadvance(3);\n    ɵɵproperty(\"value\", ctx_r3.measureUnit);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r3.measureUnits);\n} }\nfunction SpatialFilterItemComponent_mat_radio_button_13_Template(rf, ctx) { if (rf & 1) {\n    const _r23 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-radio-button\", 27);\n    ɵɵlistener(\"change\", function SpatialFilterItemComponent_mat_radio_button_13_Template_mat_radio_button_change_0_listener($event) { ɵɵrestoreView(_r23); const ctx_r22 = ɵɵnextContext(); return ctx_r22.onItemTypeChange($event); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r21 = ctx.$implicit;\n    ɵɵproperty(\"value\", item_r21);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.spatialFilter.\" + item_r21), \" \");\n} }\nfunction SpatialFilterItemComponent_div_14_mat_header_cell_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-header-cell\", 38);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ɵɵpipeBind1(2, 1, \"igo.geo.spatialFilter.Thematics\"));\n} }\nfunction SpatialFilterItemComponent_div_14_mat_header_cell_5_Template(rf, ctx) { if (rf & 1) {\n    const _r31 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-header-cell\", 39);\n    ɵɵelementStart(1, \"mat-checkbox\", 40);\n    ɵɵlistener(\"change\", function SpatialFilterItemComponent_div_14_mat_header_cell_5_Template_mat_checkbox_change_1_listener($event) { ɵɵrestoreView(_r31); const ctx_r30 = ɵɵnextContext(2); return $event ? ctx_r30.masterToggle() : null; });\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r25 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"checked\", ctx_r25.isAllSelected())(\"indeterminate\", ctx_r25.selectedThematics.hasValue() && !ctx_r25.isAllSelected());\n} }\nfunction SpatialFilterItemComponent_div_14_mat_header_row_6_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"mat-header-row\");\n} }\nfunction SpatialFilterItemComponent_div_14_mat_row_7_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"mat-row\");\n} }\nfunction SpatialFilterItemComponent_div_14_mat_tree_node_9_Template(rf, ctx) { if (rf & 1) {\n    const _r35 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-tree-node\", 41);\n    ɵɵelementStart(1, \"li\", 42);\n    ɵɵelement(2, \"button\", 43);\n    ɵɵtext(3);\n    ɵɵelementStart(4, \"mat-checkbox\", 44);\n    ɵɵlistener(\"click\", function SpatialFilterItemComponent_div_14_mat_tree_node_9_Template_mat_checkbox_click_4_listener($event) { ɵɵrestoreView(_r35); return $event.stopPropagation(); })(\"change\", function SpatialFilterItemComponent_div_14_mat_tree_node_9_Template_mat_checkbox_change_4_listener($event) { ɵɵrestoreView(_r35); const node_r33 = ctx.$implicit; const ctx_r36 = ɵɵnextContext(2); return $event ? ctx_r36.onToggleChange(node_r33) : null; });\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const node_r33 = ctx.$implicit;\n    const ctx_r28 = ɵɵnextContext(2);\n    ɵɵadvance(3);\n    ɵɵtextInterpolate1(\" \", node_r33.name, \" \");\n    ɵɵadvance(1);\n    ɵɵproperty(\"checked\", ctx_r28.selectedThematics.isSelected(node_r33));\n} }\nfunction SpatialFilterItemComponent_div_14_mat_nested_tree_node_10_Template(rf, ctx) { if (rf & 1) {\n    const _r39 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-nested-tree-node\");\n    ɵɵelementStart(1, \"div\", 42);\n    ɵɵelementStart(2, \"button\", 45);\n    ɵɵlistener(\"click\", function SpatialFilterItemComponent_div_14_mat_nested_tree_node_10_Template_button_click_2_listener() { ɵɵrestoreView(_r39); const node_r37 = ctx.$implicit; const ctx_r38 = ɵɵnextContext(2); return ctx_r38.onToggleClick(node_r37); });\n    ɵɵelement(3, \"mat-icon\", 46);\n    ɵɵelementEnd();\n    ɵɵtext(4);\n    ɵɵelementStart(5, \"mat-checkbox\", 47);\n    ɵɵlistener(\"change\", function SpatialFilterItemComponent_div_14_mat_nested_tree_node_10_Template_mat_checkbox_change_5_listener($event) { ɵɵrestoreView(_r39); const node_r37 = ctx.$implicit; const ctx_r40 = ɵɵnextContext(2); return $event ? ctx_r40.childrensToggle(node_r37) : null; });\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(6, \"ul\", 48);\n    ɵɵelementContainer(7, 49);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const node_r37 = ctx.$implicit;\n    const ctx_r29 = ɵɵnextContext(2);\n    ɵɵadvance(3);\n    ɵɵproperty(\"svgIcon\", ctx_r29.treeControl.isExpanded(node_r37) ? \"chevron-down\" : \"chevron-right\");\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", node_r37.name, \" \");\n    ɵɵadvance(1);\n    ɵɵproperty(\"checked\", ctx_r29.isAllSelected(node_r37))(\"indeterminate\", ctx_r29.hasChildrenSelected(node_r37) && !ctx_r29.isAllSelected(node_r37));\n    ɵɵadvance(1);\n    ɵɵclassProp(\"example-tree-invisible\", !ctx_r29.treeControl.isExpanded(node_r37));\n} }\nfunction SpatialFilterItemComponent_div_14_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 28);\n    ɵɵelementStart(1, \"mat-table\");\n    ɵɵelementContainerStart(2, 29);\n    ɵɵtemplate(3, SpatialFilterItemComponent_div_14_mat_header_cell_3_Template, 3, 3, \"mat-header-cell\", 30);\n    ɵɵelementContainerEnd();\n    ɵɵelementContainerStart(4, 31);\n    ɵɵtemplate(5, SpatialFilterItemComponent_div_14_mat_header_cell_5_Template, 2, 2, \"mat-header-cell\", 32);\n    ɵɵelementContainerEnd();\n    ɵɵtemplate(6, SpatialFilterItemComponent_div_14_mat_header_row_6_Template, 1, 0, \"mat-header-row\", 33);\n    ɵɵtemplate(7, SpatialFilterItemComponent_div_14_mat_row_7_Template, 1, 0, \"mat-row\", 34);\n    ɵɵelementEnd();\n    ɵɵelementStart(8, \"mat-tree\", 35);\n    ɵɵtemplate(9, SpatialFilterItemComponent_div_14_mat_tree_node_9_Template, 5, 2, \"mat-tree-node\", 36);\n    ɵɵtemplate(10, SpatialFilterItemComponent_div_14_mat_nested_tree_node_10_Template, 8, 6, \"mat-nested-tree-node\", 37);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵɵnextContext();\n    ɵɵadvance(6);\n    ɵɵproperty(\"matHeaderRowDef\", ctx_r5.displayedColumns);\n    ɵɵadvance(1);\n    ɵɵproperty(\"matRowDefColumns\", ctx_r5.displayedColumns);\n    ɵɵadvance(1);\n    ɵɵproperty(\"dataSource\", ctx_r5.dataSource)(\"treeControl\", ctx_r5.treeControl);\n    ɵɵadvance(2);\n    ɵɵproperty(\"matTreeNodeDefWhen\", ctx_r5.hasChild);\n} }\nfunction SpatialFilterItemComponent_button_16_Template(rf, ctx) { if (rf & 1) {\n    const _r42 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 50);\n    ɵɵlistener(\"click\", function SpatialFilterItemComponent_button_16_Template_button_click_0_listener() { ɵɵrestoreView(_r42); const ctx_r41 = ɵɵnextContext(); return ctx_r41.clearSearch(); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵɵnextContext();\n    ɵɵproperty(\"disabled\", ctx_r6.disabledClearSearch());\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.spatialFilter.clearSearch\"), \" \");\n} }\nfunction SpatialFilterItemComponent_button_17_Template(rf, ctx) { if (rf & 1) {\n    const _r44 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 51);\n    ɵɵlistener(\"click\", function SpatialFilterItemComponent_button_17_Template_button_click_0_listener() { ɵɵrestoreView(_r44); const ctx_r43 = ɵɵnextContext(); return ctx_r43.clearDrawZone(); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r7 = ɵɵnextContext();\n    ɵɵproperty(\"disabled\", ctx_r7.formControl.value === null);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.spatialFilter.clearForm\"), \" \");\n} }\n/**\n * Spatial-Filter-Item (search parameters)\n */\nclass SpatialFilterItemComponent {\n    constructor(cdRef, spatialFilterService, messageService, languageService) {\n        this.cdRef = cdRef;\n        this.spatialFilterService = spatialFilterService;\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.layers = [];\n        this.allLayers = [];\n        this.toggleSearch = new EventEmitter();\n        this.itemTypeChange = new EventEmitter();\n        this.thematicChange = new EventEmitter();\n        this.drawZoneEvent = new EventEmitter();\n        this.bufferEvent = new EventEmitter();\n        this.zoneWithBufferChange = new EventEmitter();\n        this.measureUnitChange = new EventEmitter();\n        this.radiusEvent = new EventEmitter();\n        this.freehandControl = new EventEmitter();\n        this.clearButtonEvent = new EventEmitter();\n        this.clearSearchEvent = new EventEmitter();\n        this.export = new EventEmitter();\n        this.openWorkspace = new EventEmitter();\n        this.itemType = [SpatialFilterItemType.Address, SpatialFilterItemType.Thematics];\n        this.selectedItemType = SpatialFilterItemType.Address;\n        this.treeControl = new NestedTreeControl(node => node.children);\n        // For thematics and results tables\n        this.displayedColumns = ['name', 'select'];\n        this.childrens = [];\n        this.groups = [];\n        this.thematics = [];\n        this.dataSource = new MatTreeNestedDataSource();\n        this.selectedThematics = new SelectionModel(true, []);\n        // For geometry form field input\n        this.value$ = new BehaviorSubject(undefined);\n        this.drawGuide$ = new BehaviorSubject(null);\n        this.overlayStyle$ = new BehaviorSubject(undefined);\n        this.drawStyle$ = new BehaviorSubject(undefined);\n        this.formControl = new FormControl();\n        this.geometryTypeField = false;\n        this.geometryTypes = ['Point', 'Polygon'];\n        this.drawGuideField = false;\n        this.drawGuide = null;\n        this.drawGuidePlaceholder = '';\n        this.measure = false;\n        this.drawControlIsActive = true;\n        this.freehandDrawIsActive = false;\n        this.buffer = 0;\n        this.radiusFormControl = new FormControl();\n        this.bufferFormControl = new FormControl();\n        this.measureUnit = MeasureLengthUnit.Meters;\n    }\n    get type() {\n        return this._type;\n    }\n    set type(type) {\n        this._type = type;\n        const index = this.geometryTypes.findIndex(geom => geom === this.type);\n        this.geometryType = this.geometryTypes[index];\n        this.formControl.reset();\n        this.radius = undefined;\n        this.drawGuide$.next(null);\n        this.drawStyle$.next(undefined);\n        // Necessary to keep reference to the geometry form field input\n        if (this.type === SpatialFilterType.Predefined) {\n            const geojson = {\n                type: 'Point',\n                coordinates: ''\n            };\n            this.formControl.setValue(geojson);\n        }\n        // Necessary to apply the right style when geometry type is Point\n        if (this.type === SpatialFilterType.Point) {\n            this.radius = 1000; // Base radius\n            this.radiusFormControl.setValue(this.radius);\n            this.PointStyle = (feature, resolution) => {\n                const coordinates = transform(feature.getGeometry().getCoordinates(), this.map.projection, 'EPSG:4326');\n                return new Style({\n                    image: new Circle({\n                        radius: this.radius / (Math.cos((Math.PI / 180) * coordinates[1])) / resolution,\n                        stroke: new Stroke({\n                            width: 2,\n                            color: 'rgba(0, 153, 255)'\n                        }),\n                        fill: new Fill({\n                            color: 'rgba(0, 153, 255, 0.2)'\n                        })\n                    })\n                });\n            };\n            this.overlayStyle = this.PointStyle;\n            this.drawStyle$.next(this.overlayStyle);\n        }\n        else {\n            // If geometry types is Polygon\n            this.radius = undefined;\n            this.PolyStyle = (feature, resolution) => {\n                return new Style({\n                    stroke: new Stroke({\n                        width: 2,\n                        color: 'rgba(0, 153, 255)'\n                    }),\n                    fill: new Fill({\n                        color: 'rgba(0, 153, 255, 0.2)'\n                    })\n                });\n            };\n            this.overlayStyle = this.PolyStyle;\n        }\n        this.overlayStyle$.next(this.overlayStyle);\n    }\n    get store() {\n        return this._store;\n    }\n    set store(store) {\n        this._store = store;\n        this._store.entities$.subscribe(() => { this.cdRef.detectChanges(); });\n    }\n    /**\n     * Available measure units for the measure type given\n     * @internal\n     */\n    get measureUnits() {\n        return [MeasureLengthUnit.Meters, MeasureLengthUnit.Kilometers];\n    }\n    get thematicLength() {\n        return this._thematicLength;\n    }\n    set thematicLength(value) {\n        this._thematicLength = value;\n    }\n    ngOnInit() {\n        this.spatialFilterService.loadThematicsList()\n            .subscribe((items) => {\n            for (const item of items) {\n                this.childrens.push(item);\n                this.childrens.sort((a, b) => {\n                    return a.name.localeCompare(b.name);\n                });\n            }\n            this.groups.push(this.languageService.translate.instant('igo.geo.terrapi.limites'));\n            const limits = {\n                name: this.groups[0],\n                children: []\n            };\n            this.thematics.push(limits);\n            this.childrens.forEach(child => {\n                if (child.group && (this.groups.indexOf(child.group) === -1)) {\n                    this.groups.push(child.group);\n                    const thematic = {\n                        name: child.group,\n                        children: []\n                    };\n                    this.thematics.push(thematic);\n                }\n                if (!child.group) {\n                    if (child.name === this.languageService.translate.instant('igo.geo.terrapi.AdmRegion') ||\n                        child.name === this.languageService.translate.instant('igo.geo.terrapi.Mun') ||\n                        child.name === this.languageService.translate.instant('igo.geo.terrapi.Arrond') ||\n                        child.name === this.languageService.translate.instant('igo.geo.terrapi.CircFed') ||\n                        child.name === this.languageService.translate.instant('igo.geo.terrapi.CircProv') ||\n                        child.name === this.languageService.translate.instant('igo.geo.terrapi.DirReg') ||\n                        child.name === this.languageService.translate.instant('igo.geo.terrapi.MRC') ||\n                        child.name === this.languageService.translate.instant('igo.geo.terrapi.RegTour')) {\n                        child.group = limits.name;\n                    }\n                    else if (child.name === this.languageService.translate.instant('igo.geo.terrapi.routes')) {\n                        child.group = this.languageService.translate.instant('igo.geo.spatialFilter.group.transport');\n                    }\n                    else {\n                        const thematic = {\n                            name: child.name,\n                            children: [],\n                            source: child.source\n                        };\n                        this.thematics.push(thematic);\n                    }\n                }\n                this.thematics.sort((a, b) => {\n                    return a.name.localeCompare(b.name);\n                });\n            });\n            this.thematics.forEach(thematic => {\n                for (const child of this.childrens) {\n                    if (child.group === thematic.name) {\n                        thematic.children.push(child);\n                    }\n                }\n            });\n        });\n        this.dataSource.data = this.thematics;\n        this.drawGuide$.next(null);\n        this.value$.next(this.formControl.value ? this.formControl.value : undefined);\n        this.value$$ = this.formControl.valueChanges.subscribe((value) => {\n            if (value) {\n                this.value$.next(value);\n                this.drawZone = this.formControl.value;\n                if (this.buffer !== 0) {\n                    this.drawZoneEvent.emit(this.drawZone);\n                    this.bufferFormControl.setValue(this.buffer);\n                }\n            }\n            else {\n                this.value$.next(undefined);\n                this.drawZone = undefined;\n            }\n        });\n        this.value$.subscribe(() => {\n            this.getRadius();\n            this.cdRef.detectChanges();\n        });\n        this.radiusChanges$$ = this.radiusFormControl.valueChanges.subscribe(() => {\n            this.getRadius();\n            this.cdRef.detectChanges();\n        });\n        this.bufferChanges$$ = this.bufferFormControl.valueChanges\n            .pipe(debounceTime(500))\n            .subscribe((value) => {\n            if (this.measureUnit === MeasureLengthUnit.Meters && value > 0 && value <= 100000) {\n                this.buffer = value;\n                this.bufferEvent.emit(value);\n                this.spatialFilterService.loadBufferGeometry(this.drawZone, SpatialFilterType.Polygon, value).subscribe((featureGeom) => {\n                    this.zoneWithBuffer = featureGeom;\n                    this.zoneWithBufferChange.emit(this.zoneWithBuffer);\n                });\n            }\n            else if (this.measureUnit === MeasureLengthUnit.Kilometers && value > 0 && value <= 100) {\n                this.buffer = value;\n                this.bufferEvent.emit(value);\n                this.spatialFilterService.loadBufferGeometry(this.drawZone, SpatialFilterType.Polygon, value * 1000).subscribe((featureGeom) => {\n                    this.zoneWithBuffer = featureGeom;\n                    this.zoneWithBufferChange.emit(this.zoneWithBuffer);\n                });\n            }\n            else if (value === 0) {\n                this.buffer = value;\n                this.bufferEvent.emit(value);\n                this.drawZoneEvent.emit(this.drawZone);\n            }\n            else if (value < 0 ||\n                (this.measureUnit === MeasureLengthUnit.Meters && value > 100000) ||\n                (this.measureUnit === MeasureLengthUnit.Kilometers && value > 100)) {\n                this.bufferFormControl.setValue(0);\n                this.buffer = 0;\n                this.messageService.alert(this.languageService.translate.instant('igo.geo.spatialFilter.bufferAlert'), this.languageService.translate.instant('igo.geo.spatialFilter.warning'));\n            }\n        });\n    }\n    /**\n     * Unsubscribe to the value stream\n     * @internal\n     */\n    ngOnDestroy() {\n        this.value$$.unsubscribe();\n        this.radiusChanges$$.unsubscribe();\n        this.bufferChanges$$.unsubscribe();\n        this.cdRef.detach();\n        if (this.radiusChanges$$) {\n            this.radiusChanges$$.unsubscribe();\n        }\n        if (this.value$$) {\n            this.value$$.unsubscribe();\n        }\n    }\n    onItemTypeChange(event) {\n        this.selectedItemType = event.value;\n        this.itemTypeChange.emit(this.selectedItemType);\n    }\n    /**\n     * Set the measure unit\n     * @internal\n     */\n    onMeasureUnitChange(unit) {\n        if (unit === this.measureUnit) {\n            return;\n        }\n        else {\n            this.measureUnit = unit;\n            this.measureUnitChange.emit(this.measureUnit);\n            if (this.isPolygon()) {\n                this.measureUnit === MeasureLengthUnit.Meters ?\n                    this.bufferFormControl.setValue(this.bufferFormControl.value * 1000) :\n                    this.bufferFormControl.setValue(this.bufferFormControl.value / 1000);\n            }\n            else if (this.isPoint()) {\n                this.measureUnit === MeasureLengthUnit.Meters ?\n                    this.radiusFormControl.setValue(this.radiusFormControl.value * 1000) :\n                    this.radiusFormControl.setValue(this.radiusFormControl.value / 1000);\n            }\n        }\n    }\n    isPredefined() {\n        return this.type === SpatialFilterType.Predefined;\n    }\n    isPolygon() {\n        return this.type === SpatialFilterType.Polygon;\n    }\n    isPoint() {\n        return this.type === SpatialFilterType.Point;\n    }\n    hasChild(_, node) {\n        if (node.children) {\n            return node.children.length;\n        }\n        return false;\n    }\n    onToggleClick(node) {\n        this.treeControl.isExpanded(node) ? this.treeControl.collapse(node) : this.treeControl.expand(node);\n    }\n    isAllSelected(node) {\n        let numSelected;\n        let numNodes = 0;\n        if (!node) {\n            numSelected = this.selectedThematics.selected.length;\n            this.thematics.forEach(thematic => {\n                if (this.groups.indexOf(thematic.name) === -1) {\n                    numNodes++;\n                }\n            });\n            this.childrens.forEach(children => {\n                if (!this.thematics.find(thematic => thematic.source === children.source)) {\n                    numNodes++;\n                }\n            });\n        }\n        else {\n            numSelected = node.children.length;\n            node.children.forEach(children => {\n                if (this.selectedThematics.selected.find(thematic => thematic === children)) {\n                    numNodes++;\n                }\n            });\n        }\n        if (numNodes >= 1) {\n            return numSelected === numNodes;\n        }\n        else {\n            return false;\n        }\n    }\n    hasChildrenSelected(node) {\n        let bool = false;\n        node.children.forEach(child => {\n            if (this.selectedThematics.selected.find(thematic => thematic.source === child.source)) {\n                bool = true;\n            }\n        });\n        return bool;\n    }\n    /**\n     * Apply header checkbox\n     */\n    masterToggle() {\n        this.isAllSelected() ?\n            this.selectedThematics.clear() :\n            this.selectAll();\n        const selectedThematicsName = [];\n        for (const thematic of this.selectedThematics.selected) {\n            selectedThematicsName.push(thematic);\n        }\n        if (this.isAllSelected()) {\n            this.thematics.forEach(thematic => {\n                if (this.hasChild(0, thematic)) {\n                    this.treeControl.expand(thematic);\n                }\n            });\n        }\n        else {\n            this.thematics.forEach(thematic => {\n                if (this.hasChild(0, thematic)) {\n                    this.treeControl.collapse(thematic);\n                }\n            });\n        }\n        this.thematicChange.emit(selectedThematicsName);\n    }\n    selectAll(node) {\n        if (!node) {\n            this.thematics.forEach(thematic => {\n                if (this.groups.indexOf(thematic.name) === -1) {\n                    this.selectedThematics.select(thematic);\n                }\n            });\n            this.childrens.forEach(children => {\n                if (!this.selectedThematics.selected.find(thematic => thematic.source === children.source)) {\n                    this.selectedThematics.select(children);\n                }\n            });\n        }\n        else {\n            if (this.hasChild(0, node)) {\n                node.children.forEach(children => this.selectedThematics.select(children));\n            }\n        }\n    }\n    childrensToggle(node) {\n        this.isAllSelected(node) ?\n            node.children.forEach(child => this.selectedThematics.deselect(child)) :\n            this.selectAll(node);\n        const selectedThematicsName = [];\n        for (const thematic of this.selectedThematics.selected) {\n            selectedThematicsName.push(thematic);\n        }\n        this.treeControl.expand(node);\n        this.thematicChange.emit(selectedThematicsName);\n    }\n    /**\n     * Apply changes to the thematics selected tree and emit event\n     */\n    onToggleChange(nodeSelected) {\n        let selected = false;\n        if (this.selectedThematics.selected.find(thematic => thematic.source === nodeSelected.source) !== undefined) {\n            selected = true;\n        }\n        this.childrens.forEach(children => {\n            if (children === nodeSelected && selected === false) {\n                this.selectedThematics.select(children);\n            }\n            if (children === nodeSelected && selected === true) {\n                this.selectedThematics.deselect(children);\n            }\n        });\n        this.thematics.forEach(thematic => {\n            if (thematic === nodeSelected && selected === false) {\n                this.selectedThematics.select(thematic);\n            }\n            if (thematic === nodeSelected && selected === true) {\n                this.selectedThematics.deselect(thematic);\n            }\n        });\n        const selectedThematicsName = [];\n        for (const thematic of this.selectedThematics.selected) {\n            selectedThematicsName.push(thematic);\n        }\n        this.thematicChange.emit(selectedThematicsName);\n    }\n    onDrawControlChange() {\n        this.drawControlIsActive = !this.drawControlIsActive;\n    }\n    onfreehandControlChange() {\n        this.freehandDrawIsActive = !this.freehandDrawIsActive;\n        this.freehandControl.emit(this.freehandDrawIsActive);\n    }\n    /**\n     * Launch search button\n     */\n    toggleSearchButton() {\n        if (!this.isPredefined()) {\n            if (this.buffer > 0) {\n                this.zoneWithBuffer.meta = {\n                    id: undefined,\n                    title: 'Zone'\n                };\n                this.zoneWithBuffer.properties = {\n                    nom: 'Zone',\n                    type: this.type\n                };\n                this.drawZoneEvent.emit(this.zoneWithBuffer);\n            }\n            else {\n                this.drawZone.meta = {\n                    id: undefined,\n                    title: 'Zone'\n                };\n                this.drawZone.properties = {\n                    nom: 'Zone',\n                    type: this.type\n                };\n                this.drawZoneEvent.emit(this.drawZone);\n            }\n        }\n        if (this.isPoint()) {\n            this.radiusEvent.emit(this.radius);\n        }\n        else if (this.isPolygon()) {\n            this.bufferEvent.emit(this.buffer);\n        }\n        this.toggleSearch.emit();\n        this.store.entities$.subscribe((value) => {\n            if (value.length && this.layers.length === this.thematicLength + 1) {\n                this.openWorkspace.emit();\n            }\n        });\n    }\n    /**\n     * Launch clear button (clear store and map layers)\n     */\n    clearButton() {\n        this.loading = true;\n        if (this.store) {\n            this.store.clear();\n        }\n        if (this.isPoint() || this.isPolygon()) {\n            this.drawZone = undefined;\n            this.formControl.reset();\n        }\n        this.bufferFormControl.setValue(0);\n        this.buffer = 0;\n        this.bufferEvent.emit(0);\n        this.clearButtonEvent.emit();\n        this.loading = false;\n    }\n    clearDrawZone() {\n        this.formControl.reset();\n        this.bufferFormControl.setValue(0);\n        this.buffer = 0;\n    }\n    /**\n     * Launch clear search (clear field if type is predefined)\n     */\n    clearSearch() {\n        this.selectedThematics.clear();\n        this.bufferFormControl.setValue(0);\n        this.buffer = 0;\n        this.bufferEvent.emit(0);\n        this.thematicChange.emit([]);\n        this.clearSearchEvent.emit();\n    }\n    /**\n     * Verify conditions of incomplete fields or busy service\n     */\n    disableSearchButton() {\n        if (this.type === SpatialFilterType.Predefined) {\n            if (this.selectedItemType === SpatialFilterItemType.Address) {\n                if (this.queryType !== undefined && this.zone !== undefined) {\n                    return this.loading;\n                }\n            }\n            if (this.selectedItemType === SpatialFilterItemType.Thematics) {\n                if (this.queryType !== undefined && this.zone !== undefined && this.selectedThematics.selected.length > 0) {\n                    return this.loading;\n                }\n            }\n        }\n        if (this.type === SpatialFilterType.Polygon || this.type === SpatialFilterType.Point) {\n            if (this.selectedItemType === SpatialFilterItemType.Address && this.formControl.value !== null) {\n                return this.loading;\n            }\n            if (this.selectedItemType === SpatialFilterItemType.Thematics) {\n                if (this.selectedThematics.selected.length > 0 && this.formControl.value !== null) {\n                    return this.loading;\n                }\n            }\n        }\n        return true;\n    }\n    disabledClearSearch() {\n        let disable = true;\n        this.selectedItemType === SpatialFilterItemType.Address ?\n            disable = this.queryType === undefined :\n            disable = this.queryType === undefined && this.selectedThematics.selected.length === 0;\n        return disable;\n    }\n    /**\n     * Manage radius value at user change\n     */\n    getRadius() {\n        let formValue;\n        if (this.formControl.value !== null) {\n            this.measureUnit === MeasureLengthUnit.Meters ?\n                formValue = this.formControl.value.radius :\n                formValue = this.formControl.value.radius / 1000;\n        }\n        else {\n            formValue = undefined;\n        }\n        if (this.type === SpatialFilterType.Point) {\n            if (!this.freehandDrawIsActive) {\n                if (this.radiusFormControl.value < 0 ||\n                    (this.measureUnit === MeasureLengthUnit.Meters && this.radiusFormControl.value >= 100000) ||\n                    (this.measureUnit === MeasureLengthUnit.Kilometers && this.radiusFormControl.value >= 100)) {\n                    this.messageService.alert(this.languageService.translate.instant('igo.geo.spatialFilter.radiusAlert'), this.languageService.translate.instant('igo.geo.spatialFilter.warning'));\n                    this.radius = 1000;\n                    this.measureUnit === MeasureLengthUnit.Meters ?\n                        this.radiusFormControl.setValue(this.radius) :\n                        this.radiusFormControl.setValue(this.radius / 1000);\n                    this.drawGuide$.next(this.radius);\n                    return;\n                }\n            }\n            else {\n                if (formValue) {\n                    if (formValue >= 100000) {\n                        this.messageService.alert(this.languageService.translate.instant('igo.geo.spatialFilter.radiusAlert'), this.languageService.translate.instant('igo.geo.spatialFilter.warning'));\n                        this.formControl.reset();\n                        return;\n                    }\n                    if (formValue !== this.radiusFormControl.value) {\n                        this.radiusFormControl.setValue(formValue);\n                        return;\n                    }\n                }\n            }\n            if (this.measureUnit === MeasureLengthUnit.Meters) {\n                this.radius = this.radiusFormControl.value;\n                this.drawGuide$.next(this.radius);\n            }\n            else {\n                this.radius = this.radiusFormControl.value * 1000;\n                this.drawGuide$.next(this.radius * 1000);\n            }\n            this.overlayStyle$.next(this.PointStyle);\n            this.drawStyle$.next(this.PointStyle);\n        }\n    }\n}\nSpatialFilterItemComponent.ɵfac = function SpatialFilterItemComponent_Factory(t) { return new (t || SpatialFilterItemComponent)(ɵɵdirectiveInject(ChangeDetectorRef), ɵɵdirectiveInject(SpatialFilterService), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(LanguageService)); };\nSpatialFilterItemComponent.ɵcmp = ɵɵdefineComponent({ type: SpatialFilterItemComponent, selectors: [[\"igo-spatial-filter-item\"]], inputs: { map: \"map\", type: \"type\", queryType: \"queryType\", zone: \"zone\", loading: \"loading\", store: \"store\", layers: \"layers\", allLayers: \"allLayers\", thematicLength: \"thematicLength\" }, outputs: { toggleSearch: \"toggleSearch\", itemTypeChange: \"itemTypeChange\", thematicChange: \"thematicChange\", drawZoneEvent: \"drawZoneEvent\", bufferEvent: \"bufferEvent\", zoneWithBufferChange: \"zoneWithBufferChange\", measureUnitChange: \"measureUnitChange\", radiusEvent: \"radiusEvent\", freehandControl: \"freehandControl\", clearButtonEvent: \"clearButtonEvent\", clearSearchEvent: \"clearSearchEvent\", export: \"export\", openWorkspace: \"openWorkspace\" }, decls: 27, vars: 40, consts: [[3, \"formControl\", \"map\", \"geometryType\", \"drawGuide\", \"measure\", \"drawControlIsActive\", \"freehandDrawIsActive\", \"drawStyle\", \"overlayStyle\", \"radius\"], [1, \"header\"], [3, \"checked\", \"labelPosition\", \"change\", 4, \"ngIf\"], [\"class\", \"buffer-unit\", 4, \"ngIf\"], [\"class\", \"radius-unit\", 4, \"ngIf\"], [1, \"title\", \"mat-typography\"], [3, \"value\"], [3, \"value\", \"change\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"thematics\", 4, \"ngIf\"], [1, \"buttons\"], [\"mat-raised-button\", \"\", \"class\", \"clear-search-button\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"class\", \"clear-form-button\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"search-button\", 3, \"disabled\", \"click\"], [\"mat-raised-button\", \"\", 1, \"remove-button\", 3, \"disabled\", \"click\"], [\"mat-raised-button\", \"\", 1, \"export-button\", 3, \"disabled\", \"click\"], [3, \"checked\", \"labelPosition\", \"change\"], [1, \"buffer-unit\"], [1, \"buffer-form\"], [1, \"buffer\"], [\"type\", \"number\", \"matInput\", \"\", 3, \"placeholder\", \"formControl\", \"value\", \"readonly\"], [1, \"unit-field\"], [3, \"value\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"radius-unit\"], [1, \"radius-form\"], [1, \"radius\"], [\"type\", \"number\", \"matInput\", \"\", 3, \"placeholder\", \"formControl\", \"value\", \"readonly\", \"input\"], [3, \"value\", \"change\"], [1, \"thematics\"], [\"matColumnDef\", \"name\"], [\"class\", \"thematics-header\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"select\"], [\"class\", \"checks-header\", 4, \"matHeaderCellDef\"], [4, \"matHeaderRowDef\"], [4, \"matRowDef\", \"matRowDefColumns\"], [3, \"dataSource\", \"treeControl\"], [\"matTreeNodeToggle\", \"\", 4, \"matTreeNodeDef\"], [4, \"matTreeNodeDef\", \"matTreeNodeDefWhen\"], [1, \"thematics-header\"], [1, \"checks-header\"], [3, \"checked\", \"indeterminate\", \"change\"], [\"matTreeNodeToggle\", \"\"], [1, \"mat-tree-node\"], [\"mat-icon-button\", \"\", \"disabled\", \"\"], [1, \"tree-check\", 3, \"checked\", \"click\", \"change\"], [\"mat-icon-button\", \"\", 3, \"click\"], [3, \"svgIcon\"], [1, \"tree-check-2\", 3, \"checked\", \"indeterminate\", \"change\"], [1, \"tree-ul\"], [\"matTreeNodeOutlet\", \"\"], [\"mat-raised-button\", \"\", 1, \"clear-search-button\", 3, \"disabled\", \"click\"], [\"mat-raised-button\", \"\", 1, \"clear-form-button\", 3, \"disabled\", \"click\"]], template: function SpatialFilterItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"igo-geometry-form-field-input\", 0);\n        ɵɵpipe(1, \"async\");\n        ɵɵpipe(2, \"async\");\n        ɵɵpipe(3, \"async\");\n        ɵɵelementStart(4, \"div\", 1);\n        ɵɵtemplate(5, SpatialFilterItemComponent_mat_slide_toggle_5_Template, 3, 5, \"mat-slide-toggle\", 2);\n        ɵɵtemplate(6, SpatialFilterItemComponent_mat_slide_toggle_6_Template, 3, 5, \"mat-slide-toggle\", 2);\n        ɵɵelementEnd();\n        ɵɵtemplate(7, SpatialFilterItemComponent_div_7_Template, 8, 8, \"div\", 3);\n        ɵɵtemplate(8, SpatialFilterItemComponent_div_8_Template, 8, 8, \"div\", 4);\n        ɵɵelementStart(9, \"mat-label\", 5);\n        ɵɵtext(10);\n        ɵɵpipe(11, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(12, \"mat-radio-group\", 6);\n        ɵɵtemplate(13, SpatialFilterItemComponent_mat_radio_button_13_Template, 3, 4, \"mat-radio-button\", 7);\n        ɵɵelementEnd();\n        ɵɵtemplate(14, SpatialFilterItemComponent_div_14_Template, 11, 5, \"div\", 8);\n        ɵɵelementStart(15, \"div\", 9);\n        ɵɵtemplate(16, SpatialFilterItemComponent_button_16_Template, 3, 4, \"button\", 10);\n        ɵɵtemplate(17, SpatialFilterItemComponent_button_17_Template, 3, 4, \"button\", 11);\n        ɵɵelementStart(18, \"button\", 12);\n        ɵɵlistener(\"click\", function SpatialFilterItemComponent_Template_button_click_18_listener() { return ctx.toggleSearchButton(); });\n        ɵɵtext(19);\n        ɵɵpipe(20, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(21, \"button\", 13);\n        ɵɵlistener(\"click\", function SpatialFilterItemComponent_Template_button_click_21_listener() { return ctx.clearButton(); });\n        ɵɵtext(22);\n        ɵɵpipe(23, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(24, \"button\", 14);\n        ɵɵlistener(\"click\", function SpatialFilterItemComponent_Template_button_click_24_listener() { return ctx.export.emit(); });\n        ɵɵtext(25);\n        ɵɵpipe(26, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"formControl\", ctx.formControl)(\"map\", ctx.map)(\"geometryType\", ctx.geometryType)(\"drawGuide\", ɵɵpipeBind1(1, 26, ctx.drawGuide$))(\"measure\", ctx.measure)(\"drawControlIsActive\", ctx.drawControlIsActive)(\"freehandDrawIsActive\", ctx.freehandDrawIsActive)(\"drawStyle\", ɵɵpipeBind1(2, 28, ctx.drawStyle$))(\"overlayStyle\", ɵɵpipeBind1(3, 30, ctx.overlayStyle$))(\"radius\", ctx.radius);\n        ɵɵadvance(5);\n        ɵɵproperty(\"ngIf\", !ctx.isPredefined());\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", !ctx.isPredefined());\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.isPolygon());\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.isPoint());\n        ɵɵadvance(2);\n        ɵɵtextInterpolate1(\"\", ɵɵpipeBind1(11, 32, \"igo.geo.spatialFilter.search\"), \" : \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"value\", ctx.selectedItemType);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ctx.itemType);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.selectedItemType === \"Thematics\");\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ctx.isPredefined());\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.isPolygon() || ctx.isPoint());\n        ɵɵadvance(1);\n        ɵɵproperty(\"disabled\", ctx.disableSearchButton());\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(20, 34, \"igo.geo.spatialFilter.goSearch\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"disabled\", ctx.allLayers.length === 0);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(23, 36, \"igo.geo.spatialFilter.removeLayer\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"disabled\", !ctx.store.entities$.getValue().length);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(26, 38, \"igo.geo.spatialFilter.exportLayer\"), \" \");\n    } }, styles: [\".header[_ngcontent-%COMP%]{margin-top:5px;width:100%}.mat-slide-toggle[_ngcontent-%COMP%]{margin-bottom:15px;padding:5px;width:98%}.mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-content{width:calc(100% - 20px)}.title[_ngcontent-%COMP%]{font-size:medium;margin-left:5px}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-top:10px}.mat-radio-button[_ngcontent-%COMP%]{display:inline-flex;margin-left:16px;margin-top:10px;position:relative}.mat-form-field[_ngcontent-%COMP%]{margin-top:5px}.mat-column-select[_ngcontent-%COMP%]{overflow:auto}.buttons[_ngcontent-%COMP%]{margin-top:15px}.search-button[_ngcontent-%COMP%]{left:15px;width:165px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.search-button[_ngcontent-%COMP%]{left:10px;line-height:normal;min-height:35px;white-space:normal;width:45%}}.export-button[_ngcontent-%COMP%]{left:15px;width:165px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.export-button[_ngcontent-%COMP%]{left:10px;line-height:normal;margin-top:10px;min-height:35px;white-space:normal;width:45%}}.remove-button[_ngcontent-%COMP%]{left:5px;margin-top:12px;width:165px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.remove-button[_ngcontent-%COMP%]{line-height:normal;margin:0;min-height:35px;white-space:normal;width:45%}}.clear-form-button[_ngcontent-%COMP%]{left:5px;width:165px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.clear-form-button[_ngcontent-%COMP%]{line-height:normal;min-height:35px;white-space:normal;width:45%}}.clear-search-button[_ngcontent-%COMP%]{left:5px;width:165px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.clear-search-button[_ngcontent-%COMP%]{line-height:normal;min-height:35px;white-space:normal;width:45%}}.thematics[_ngcontent-%COMP%]{margin-top:5px;max-height:35%}.results[_ngcontent-%COMP%], .thematics[_ngcontent-%COMP%]{overflow:auto;width:98%}.results[_ngcontent-%COMP%]{max-height:250px}.mat-column-typeResults[_ngcontent-%COMP%]{margin-right:5px;max-width:100px}.buffer-unit[_ngcontent-%COMP%], .radius-unit[_ngcontent-%COMP%]{display:flex;margin-left:2px;padding:5px;width:100%}.buffer[_ngcontent-%COMP%], .radius[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;width:110%}.unit-field[_ngcontent-%COMP%]{margin-left:30px;width:110px}.example-tree-invisible[_ngcontent-%COMP%]{display:none}.tree-ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0 0 0 20px}.tree-check[_ngcontent-%COMP%], .tree-check-2[_ngcontent-%COMP%]{margin-left:auto;margin-right:5px;position:relative}.thematics-header[_ngcontent-%COMP%]{max-width:250px}.checks-header[_ngcontent-%COMP%]{max-width:calc(100% - 316px);overflow:hidden;padding:none}.mat-checkbox[_ngcontent-%COMP%]{padding:5px}.mat-tree-node[_ngcontent-%COMP%]{min-height:42px;position:relative;width:280px}.mat-header-cell[_ngcontent-%COMP%]{height:56px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SpatialFilterItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-spatial-filter-item',\n                templateUrl: './spatial-filter-item.component.html',\n                styleUrls: ['./spatial-filter-item.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ChangeDetectorRef }, { type: SpatialFilterService }, { type: MessageService }, { type: LanguageService }]; }, { map: [{\n            type: Input\n        }], type: [{\n            type: Input\n        }], queryType: [{\n            type: Input\n        }], zone: [{\n            type: Input\n        }], loading: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], layers: [{\n            type: Input\n        }], allLayers: [{\n            type: Input\n        }], thematicLength: [{\n            type: Input\n        }], toggleSearch: [{\n            type: Output\n        }], itemTypeChange: [{\n            type: Output\n        }], thematicChange: [{\n            type: Output\n        }], drawZoneEvent: [{\n            type: Output\n        }], bufferEvent: [{\n            type: Output\n        }], zoneWithBufferChange: [{\n            type: Output\n        }], measureUnitChange: [{\n            type: Output\n        }], radiusEvent: [{\n            type: Output\n        }], freehandControl: [{\n            type: Output\n        }], clearButtonEvent: [{\n            type: Output\n        }], clearSearchEvent: [{\n            type: Output\n        }], export: [{\n            type: Output\n        }], openWorkspace: [{\n            type: Output\n        }] }); })();\n\nconst _c0$e = [\"endDatepickerTime\"];\nconst _c1$8 = [\"beginDatepickerTime\"];\nconst _c2$3 = [\"beginTime\"];\nconst _c3$2 = [\"endTime\"];\nfunction OgcFilterTimeComponent_mat_slide_toggle_1_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-slide-toggle\", 4);\n    ɵɵlistener(\"ngModelChange\", function OgcFilterTimeComponent_mat_slide_toggle_1_Template_mat_slide_toggle_ngModelChange_0_listener($event) { ɵɵrestoreView(_r4); const ctx_r3 = ɵɵnextContext(); return ctx_r3.sliderMode = $event; })(\"change\", function OgcFilterTimeComponent_mat_slide_toggle_1_Template_mat_slide_toggle_change_0_listener($event) { ɵɵrestoreView(_r4); const ctx_r5 = ɵɵnextContext(); return ctx_r5.modeChange($event); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"ngModel\", ctx_r0.sliderMode);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.filter.sliderModeTitle\"), \" \");\n} }\nfunction OgcFilterTimeComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 5);\n    ɵɵelementStart(1, \"igo-ogc-filter-time-slider\", 6);\n    ɵɵlistener(\"changeProperty\", function OgcFilterTimeComponent_div_2_Template_igo_ogc_filter_time_slider_changeProperty_1_listener($event) { ɵɵrestoreView(_r7); const ctx_r6 = ɵɵnextContext(); return ctx_r6.changePropertyByPass($event); });\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"begin\", ctx_r1.beginValue)(\"max\", ctx_r1.restrictedToStep() ? ctx_r1.maxDate : ctx_r1.endValue)(\"currentFilter\", ctx_r1.currentFilter)(\"datasource\", ctx_r1.datasource);\n} }\nfunction OgcFilterTimeComponent_div_3_mat_form_field_11_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 22);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const hour_r14 = ctx.$implicit;\n    ɵɵproperty(\"value\", hour_r14);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(hour_r14);\n} }\nfunction OgcFilterTimeComponent_div_3_mat_form_field_11_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\", 19);\n    ɵɵelementStart(1, \"mat-label\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"mat-select\", 20);\n    ɵɵlistener(\"selectionChange\", function OgcFilterTimeComponent_div_3_mat_form_field_11_Template_mat_select_selectionChange_4_listener() { ɵɵrestoreView(_r16); ɵɵnextContext(); const _r8 = ɵɵreference(5); const ctx_r15 = ɵɵnextContext(); return ctx_r15.changeTemporalProperty(_r8.value, 1); });\n    ɵɵtemplate(5, OgcFilterTimeComponent_div_3_mat_form_field_11_mat_option_5_Template, 2, 2, \"mat-option\", 21);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r10 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(3, 4, \"igo.geo.timeFilter.hour\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"formControl\", ctx_r10.beginHourFormControl);\n    ɵɵattribute(\"disabled\", !ctx_r10.currentFilter.active);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r10.beginHours);\n} }\nfunction OgcFilterTimeComponent_div_3_mat_form_field_12_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 22);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const minute_r18 = ctx.$implicit;\n    ɵɵproperty(\"value\", minute_r18);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(minute_r18);\n} }\nfunction OgcFilterTimeComponent_div_3_mat_form_field_12_Template(rf, ctx) { if (rf & 1) {\n    const _r20 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\", 23);\n    ɵɵelementStart(1, \"mat-label\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"mat-select\", 20);\n    ɵɵlistener(\"selectionChange\", function OgcFilterTimeComponent_div_3_mat_form_field_12_Template_mat_select_selectionChange_4_listener() { ɵɵrestoreView(_r20); ɵɵnextContext(); const _r8 = ɵɵreference(5); const ctx_r19 = ɵɵnextContext(); return ctx_r19.changeTemporalProperty(_r8.value, 1); });\n    ɵɵtemplate(5, OgcFilterTimeComponent_div_3_mat_form_field_12_mat_option_5_Template, 2, 2, \"mat-option\", 21);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r11 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(3, 4, \"igo.geo.timeFilter.minute\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"formControl\", ctx_r11.beginMinuteFormControl);\n    ɵɵattribute(\"disabled\", !ctx_r11.currentFilter.active);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r11.beginMinutes);\n} }\nfunction OgcFilterTimeComponent_div_3_div_13_mat_form_field_10_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 22);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const hour_r26 = ctx.$implicit;\n    ɵɵproperty(\"value\", hour_r26);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(hour_r26);\n} }\nfunction OgcFilterTimeComponent_div_3_div_13_mat_form_field_10_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\", 19);\n    ɵɵelementStart(1, \"mat-label\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"mat-select\", 20);\n    ɵɵlistener(\"selectionChange\", function OgcFilterTimeComponent_div_3_div_13_mat_form_field_10_Template_mat_select_selectionChange_4_listener() { ɵɵrestoreView(_r28); ɵɵnextContext(); const _r21 = ɵɵreference(4); const ctx_r27 = ɵɵnextContext(2); return ctx_r27.changeTemporalProperty(_r21.value, 2); });\n    ɵɵtemplate(5, OgcFilterTimeComponent_div_3_div_13_mat_form_field_10_mat_option_5_Template, 2, 2, \"mat-option\", 21);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r23 = ɵɵnextContext(3);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(3, 4, \"igo.geo.timeFilter.hour\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"formControl\", ctx_r23.endHourFormControl);\n    ɵɵattribute(\"disabled\", !ctx_r23.currentFilter.active);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r23.endHours);\n} }\nfunction OgcFilterTimeComponent_div_3_div_13_mat_form_field_11_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 22);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const minute_r30 = ctx.$implicit;\n    ɵɵproperty(\"value\", minute_r30);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(minute_r30);\n} }\nfunction OgcFilterTimeComponent_div_3_div_13_mat_form_field_11_Template(rf, ctx) { if (rf & 1) {\n    const _r32 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\", 23);\n    ɵɵelementStart(1, \"mat-label\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"mat-select\", 20);\n    ɵɵlistener(\"selectionChange\", function OgcFilterTimeComponent_div_3_div_13_mat_form_field_11_Template_mat_select_selectionChange_4_listener() { ɵɵrestoreView(_r32); ɵɵnextContext(); const _r21 = ɵɵreference(4); const ctx_r31 = ɵɵnextContext(2); return ctx_r31.changeTemporalProperty(_r21.value, 2); });\n    ɵɵtemplate(5, OgcFilterTimeComponent_div_3_div_13_mat_form_field_11_mat_option_5_Template, 2, 2, \"mat-option\", 21);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r24 = ɵɵnextContext(3);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(3, 4, \"igo.geo.timeFilter.minute\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"formControl\", ctx_r24.endMinuteFormControl);\n    ɵɵattribute(\"disabled\", !ctx_r24.currentFilter.active);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r24.endMinutes);\n} }\nfunction OgcFilterTimeComponent_div_3_div_13_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 7);\n    ɵɵelementStart(1, \"mat-form-field\", 8);\n    ɵɵelement(2, \"mat-datepicker-toggle\", 9);\n    ɵɵelementStart(3, \"input\", 10, 24);\n    ɵɵlistener(\"dateChange\", function OgcFilterTimeComponent_div_3_div_13_Template_input_dateChange_3_listener() { ɵɵrestoreView(_r34); const _r21 = ɵɵreference(4); const ctx_r33 = ɵɵnextContext(2); return ctx_r33.changeTemporalProperty(_r21.value, 2); });\n    ɵɵpipe(5, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelement(6, \"span\", 12);\n    ɵɵelementStart(7, \"mat-datepicker\", 13, 25);\n    ɵɵlistener(\"yearSelected\", function OgcFilterTimeComponent_div_3_div_13_Template_mat_datepicker_yearSelected_7_listener($event) { ɵɵrestoreView(_r34); const _r22 = ɵɵreference(8); const ctx_r35 = ɵɵnextContext(2); return ctx_r35.yearSelected($event, _r22, \"end\"); })(\"monthSelected\", function OgcFilterTimeComponent_div_3_div_13_Template_mat_datepicker_monthSelected_7_listener($event) { ɵɵrestoreView(_r34); const _r22 = ɵɵreference(8); const ctx_r36 = ɵɵnextContext(2); return ctx_r36.monthSelected($event, _r22, \"end\"); });\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(9, \"div\", 15);\n    ɵɵtemplate(10, OgcFilterTimeComponent_div_3_div_13_mat_form_field_10_Template, 6, 6, \"mat-form-field\", 16);\n    ɵɵtemplate(11, OgcFilterTimeComponent_div_3_div_13_mat_form_field_11_Template, 6, 6, \"mat-form-field\", 17);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r22 = ɵɵreference(8);\n    const ctx_r12 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵproperty(\"for\", _r22);\n    ɵɵadvance(1);\n    ɵɵproperty(\"matDatepicker\", _r22)(\"placeholder\", ɵɵpipeBind1(5, 12, \"igo.geo.timeFilter.endDate\"))(\"matDatepickerFilter\", ctx_r12.dateFilter.bind(ctx_r12, \"end\"))(\"value\", ctx_r12.endValue ? ctx_r12.endValue : ctx_r12.handleDate(ctx_r12.datasource.options.maxDate))(\"min\", ctx_r12.beginValue ? ctx_r12.beginValue : ctx_r12.handleDate(ctx_r12.datasource.options.minDate))(\"max\", ctx_r12.handleDate(ctx_r12.datasource.options.maxDate));\n    ɵɵattribute(\"disabled\", !ctx_r12.currentFilter.active);\n    ɵɵadvance(4);\n    ɵɵproperty(\"startView\", ctx_r12.calendarView())(\"startAt\", ctx_r12.endValue);\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngIf\", ctx_r12.calendarType() === \"datetime\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r12.calendarType() === \"datetime\");\n} }\nfunction OgcFilterTimeComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r38 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\");\n    ɵɵelementStart(1, \"div\", 7);\n    ɵɵelementStart(2, \"mat-form-field\", 8);\n    ɵɵelement(3, \"mat-datepicker-toggle\", 9);\n    ɵɵelementStart(4, \"input\", 10, 11);\n    ɵɵlistener(\"dateChange\", function OgcFilterTimeComponent_div_3_Template_input_dateChange_4_listener() { ɵɵrestoreView(_r38); const _r8 = ɵɵreference(5); const ctx_r37 = ɵɵnextContext(); return ctx_r37.changeTemporalProperty(_r8.value, 1); });\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelement(7, \"span\", 12);\n    ɵɵelementStart(8, \"mat-datepicker\", 13, 14);\n    ɵɵlistener(\"yearSelected\", function OgcFilterTimeComponent_div_3_Template_mat_datepicker_yearSelected_8_listener($event) { ɵɵrestoreView(_r38); const _r9 = ɵɵreference(9); const ctx_r39 = ɵɵnextContext(); return ctx_r39.yearSelected($event, _r9, \"begin\"); })(\"monthSelected\", function OgcFilterTimeComponent_div_3_Template_mat_datepicker_monthSelected_8_listener($event) { ɵɵrestoreView(_r38); const _r9 = ɵɵreference(9); const ctx_r40 = ɵɵnextContext(); return ctx_r40.monthSelected($event, _r9, \"begin\"); });\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(10, \"div\", 15);\n    ɵɵtemplate(11, OgcFilterTimeComponent_div_3_mat_form_field_11_Template, 6, 6, \"mat-form-field\", 16);\n    ɵɵtemplate(12, OgcFilterTimeComponent_div_3_mat_form_field_12_Template, 6, 6, \"mat-form-field\", 17);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵtemplate(13, OgcFilterTimeComponent_div_3_div_13_Template, 12, 14, \"div\", 18);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r9 = ɵɵreference(9);\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵadvance(3);\n    ɵɵproperty(\"for\", _r9);\n    ɵɵadvance(1);\n    ɵɵproperty(\"matDatepicker\", _r9)(\"placeholder\", ɵɵpipeBind1(6, 13, \"igo.geo.timeFilter.startDate\"))(\"matDatepickerFilter\", ctx_r2.dateFilter.bind(ctx_r2, \"begin\"))(\"value\", ctx_r2.beginValue ? ctx_r2.beginValue : ctx_r2.handleDate(ctx_r2.datasource.options.minDate))(\"min\", ctx_r2.handleDate(ctx_r2.datasource.options.minDate))(\"max\", ctx_r2.endValue && !ctx_r2.restrictedToStep() ? ctx_r2.endValue : ctx_r2.handleDate(ctx_r2.datasource.options.maxDate));\n    ɵɵattribute(\"disabled\", !ctx_r2.currentFilter.active);\n    ɵɵadvance(4);\n    ɵɵproperty(\"startView\", ctx_r2.calendarView())(\"startAt\", ctx_r2.beginValue);\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngIf\", ctx_r2.calendarType() === \"datetime\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r2.calendarType() === \"datetime\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r2.restrictedToStep());\n} }\nconst moment$2 = moment_;\nclass OgcFilterTimeComponent {\n    constructor(ogcFilterTimeService) {\n        this.ogcFilterTimeService = ogcFilterTimeService;\n        this.changeProperty = new EventEmitter();\n        this.beginHourFormControl = new FormControl();\n        this.beginMinuteFormControl = new FormControl();\n        this.endHourFormControl = new FormControl();\n        this.endMinuteFormControl = new FormControl();\n        this._defaultMin = '1900-01-01';\n        this._defaultMax = '2052-01-06';\n        this._defaultDisplayFormat = 'DD/MM/YYYY HH:mm A';\n        this._defaultSliderModeEnabled = true;\n        this.ogcFilterOperator = OgcFilterOperator;\n        this.sliderMode = false;\n        this.defaultStepMillisecond = 60000;\n    }\n    get step() {\n        return this.datasource.options.stepDate\n            ? this.datasource.options.stepDate\n            : this.currentFilter.step;\n    }\n    get stepMilliseconds() {\n        const step = moment$2.duration(this.step).asMilliseconds();\n        return step === 0 ? this.defaultStepMillisecond : step;\n    }\n    set beginValue(begin) {\n        this._beginValue = begin;\n    }\n    get beginValue() {\n        return this._beginValue;\n    }\n    set endValue(end) {\n        this._endValue = end;\n    }\n    get endValue() {\n        return this._endValue;\n    }\n    get sliderInterval() {\n        return this.currentFilter.sliderInterval === undefined\n            ? 2000\n            : this.currentFilter.sliderInterval;\n    }\n    get maxDate() {\n        return this.datasource.options.maxDate ? this.datasource.options.maxDate : this._defaultMax;\n    }\n    get displayFormat() {\n        return this.currentFilter.displayFormat ? this.currentFilter.displayFormat : this._defaultDisplayFormat;\n    }\n    ngOnInit() {\n        if (this.currentFilter.sliderOptions) {\n            this.currentFilter.sliderOptions.enabled = this.currentFilter.sliderOptions.enabled !== undefined ?\n                this.currentFilter.sliderOptions.enabled : this._defaultSliderModeEnabled;\n        }\n        this.beginValue = this.parseFilter(this.handleMin());\n        this.endValue = this.parseFilter(this.handleMax());\n        this.updateHoursMinutesArray();\n        // update value for now value\n        this.updateValues();\n    }\n    parseFilter(filter) {\n        if (!filter) {\n            return new Date();\n        }\n        else if (isNaN(new Date(filter).getTime())) {\n            if (filter.search('now') >= 0) {\n                const interval = filter.match(/years|months|weeks|days|hours|seconds/);\n                if (filter.match(/\\+/)) {\n                    const intervalInt = parseInt(filter.substring(filter.search('+') + 1, interval.index), 10);\n                    return moment$2().add(intervalInt, interval[0]).toDate();\n                }\n                if (filter.match(/\\-/)) {\n                    const intervalInt = parseInt(filter.substring(filter.search('-') + 1, interval.index), 10);\n                    return moment$2().subtract(intervalInt, interval[0]).toDate();\n                }\n                return new Date();\n            }\n            if (filter.search('today') >= 0) {\n                const _now = moment$2().endOf('day').toDate();\n                const interval = filter.match(/years|months|weeks|days|hours|seconds/);\n                if (filter.match(/\\+/)) {\n                    const intervalInt = parseInt(filter.substring(filter.search('+') + 1, interval.index), 10);\n                    return moment$2(_now).add(intervalInt, interval[0]).toDate();\n                }\n                if (filter.match(/\\-/)) {\n                    const intervalInt = parseInt(filter.substring(filter.search('-') + 1, interval.index), 10);\n                    return moment$2(_now).subtract(intervalInt, interval[0]).toDate();\n                }\n                return _now;\n            }\n            return new Date();\n        }\n        return filter ? new Date(filter) : new Date();\n    }\n    changeTemporalProperty(value, position, refreshFilter = true) {\n        let valueTmp = this.getDateTime(value, position);\n        if (position === 2 && this.calendarType() === 'date' && !this.sliderMode) {\n            /* Above month: see yearSelected or monthSelected */\n            valueTmp = moment$2(valueTmp).endOf('day').toDate();\n        }\n        if (position === 1) {\n            this.beginValue = valueTmp;\n            if (this.restrictedToStep()) {\n                this.changeTemporalProperty(this.ogcFilterTimeService.addStep(valueTmp, this.stepMilliseconds), 2, refreshFilter);\n            }\n        }\n        else {\n            this.endValue = valueTmp;\n        }\n        this.updateHoursMinutesArray();\n        this.changeProperty.next({ value: valueTmp.toISOString(), pos: position, refreshFilter });\n    }\n    handleDate(value) {\n        if (!value || value === '') {\n            return undefined;\n        }\n        return new Date(value);\n    }\n    calendarType() {\n        if (this.stepMilliseconds < 86400000) {\n            return 'datetime';\n        }\n        return 'date';\n    }\n    yearSelected(year, datePicker, property, refreshFilter = true) {\n        if (this.ogcFilterTimeService.stepIsYearDuration(this.step)) {\n            if (datePicker) {\n                datePicker.close();\n            }\n            if (property === 'end') {\n                year = moment$2(year).endOf('year').toDate();\n            }\n            else if (property === 'begin' && this.restrictedToStep()) {\n                this.yearSelected(year, undefined, 'end');\n            }\n            this.changeTemporalProperty(year, property === 'begin' ? 1 : 2, refreshFilter);\n        }\n    }\n    monthSelected(month, datePicker, property, refreshFilter = true) {\n        if (this.ogcFilterTimeService.stepIsMonthDuration(this.step)) {\n            if (datePicker) {\n                datePicker.close();\n            }\n            if (property === 'end') {\n                month = moment$2(month).endOf('month').toDate();\n            }\n            else if (property === 'begin' && this.restrictedToStep()) {\n                this.monthSelected(month, undefined, 'end');\n            }\n            this.changeTemporalProperty(month, property === 'begin' ? 1 : 2, refreshFilter);\n        }\n    }\n    calendarView() {\n        const test = this.stepMilliseconds;\n        const diff = Math.abs(this.parseFilter(this.currentFilter.end).getTime() -\n            this.parseFilter(this.currentFilter.begin).getTime());\n        if (this.ogcFilterTimeService.stepIsYearDuration(this.step)) {\n            return 'multi-year';\n        }\n        else if (this.ogcFilterTimeService.stepIsMonthDuration(this.step)) {\n            return 'year';\n        }\n        else if (test < 86400000 && diff < 86400000) {\n            return 'clock';\n        }\n        else {\n            return 'month';\n        }\n    }\n    dateFilter(type, date) {\n        const dateValue = new Date(date);\n        const diff = dateValue.getTime() - new Date(this.handleMin()).getTime();\n        if (this.ogcFilterTimeService.stepIsYearDuration(this.step)) {\n            const monthDiff = moment$2(dateValue).diff(moment$2(this.handleMin()), 'years', true);\n            if (type === 'end') {\n                const dateValuePlus1 = moment$2(dateValue).add(1, 'd');\n                const monthDiffPlus1 = moment$2(dateValuePlus1).diff(moment$2(this.handleMin()), 'years', true);\n                return (monthDiffPlus1 % moment$2.duration(this.step).asYears()) === 0;\n            }\n            else if (type === 'begin') {\n                return (monthDiff % moment$2.duration(this.step).asYears()) === 0;\n            }\n        }\n        else if (this.ogcFilterTimeService.stepIsMonthDuration(this.step)) {\n            const monthDiff = moment$2(dateValue).diff(moment$2(this.handleMin()), 'months', true);\n            if (type === 'end') {\n                const dateValuePlus1 = moment$2(dateValue).add(1, 'd');\n                const monthDiffPlus1 = moment$2(dateValuePlus1).diff(moment$2(this.handleMin()), 'months', true);\n                return (monthDiffPlus1 % moment$2.duration(this.step).asMonths()) === 0;\n            }\n            else if (type === 'begin') {\n                return (monthDiff % moment$2.duration(this.step).asMonths()) === 0;\n            }\n        }\n        else if (this.ogcFilterTimeService.stepIsWeekDuration(this.step)) {\n            const weekDiff = moment$2(dateValue).diff(moment$2(this.handleMin()), 'weeks', true);\n            if (type === 'end') {\n                const dateValuePlus1 = moment$2(dateValue).add(1, 'd');\n                const weekDiffPlus1 = moment$2(dateValuePlus1).diff(moment$2(this.handleMin()), 'weeks', true);\n                return (weekDiffPlus1 % moment$2.duration(this.step).asWeeks()) === 0;\n            }\n            else if (type === 'begin') {\n                return (weekDiff % moment$2.duration(this.step).asWeeks()) === 0;\n            }\n        }\n        else if (this.ogcFilterTimeService.stepIsDayDuration(this.step)) {\n            const dayDiff = moment$2(dateValue).diff(moment$2(this.handleMin()), 'days', true);\n            if (type === 'end') {\n                const dateValuePlus1 = moment$2(dateValue).add(1, 'd');\n                const dayDiffPlus1 = moment$2(dateValuePlus1).diff(moment$2(this.handleMin()), 'days', true);\n                const _mod = (dayDiffPlus1 % moment$2.duration(this.step).asDays());\n                return (_mod < 0.0000001 && _mod > -0.0000001) || _mod === 0; // 1 millisecond = 1.1574074074074076e-8\n            }\n            else if (type === 'begin') {\n                const _mod = ((dayDiff % moment$2.duration(this.step).asDays()) + 1);\n                return (_mod < 0.0000001 && _mod > -0.0000001 && _mod !== 0) || _mod === 1; // 1 millisecond = 1.1574074074074076e-8\n            }\n        }\n        else if (this.ogcFilterTimeService.stepIsHourDuration(this.step)) {\n            const hourDiff = moment$2(dateValue).diff(moment$2(this.handleMin()), 'hours', true);\n            return (hourDiff % moment$2.duration(this.step).asHours()) === 0;\n        }\n        else if (this.ogcFilterTimeService.stepIsMinuteDuration(this.step)) {\n            return true;\n        }\n        return diff % this.stepMilliseconds === 0;\n    }\n    getDateTime(date, pos) {\n        const valuetmp = new Date(date);\n        let valuetmp2;\n        if (!this.sliderMode) {\n            switch (pos) {\n                case 1:\n                    valuetmp2 = valuetmp.setHours(this.beginHourFormControl.value, this.beginMinuteFormControl.value);\n                    break;\n                case 2:\n                    valuetmp2 = valuetmp.setHours(this.endHourFormControl.value, this.endMinuteFormControl.value);\n                    break;\n            }\n        }\n        return new Date(valuetmp2 ? valuetmp2 : valuetmp);\n    }\n    handleMinuteIncrement() {\n        if (this.ogcFilterTimeService.stepIsMinuteDuration(this.step)) {\n            if (this.stepMilliseconds < 3600000) {\n                return this.stepMilliseconds / 1000 === 60 ? 1 : this.stepMilliseconds / 1000;\n            }\n            else {\n                return (this.stepMilliseconds % 3600000) / 60;\n            }\n        }\n        else if (this.ogcFilterTimeService.stepIsHourDuration(this.step)) {\n            return 60;\n        }\n        return 1;\n    }\n    handleHourIncrement() {\n        if (this.ogcFilterTimeService.stepIsHourDuration(this.step)) {\n            return this.stepMilliseconds / 1000 / 60 / 60;\n        }\n        return 1;\n    }\n    fullBeginHoursArray(checkEndValue) {\n        if (checkEndValue) {\n            this.beginHours = Array.from({\n                length: (this.endHourFormControl.value - 0) / this.handleHourIncrement() + 1\n            }, (_, i) => 0 + i * this.handleHourIncrement());\n        }\n        else {\n            this.beginHours = Array.from({ length: (23 - 0) / this.handleHourIncrement() + 1 }, (_, i) => 0 + i * this.handleHourIncrement());\n        }\n        this.beginHourFormControl.setValue(this.beginValue.getHours());\n    }\n    fullEndHoursArray(checkEndValue) {\n        if (checkEndValue) {\n            this.endHours = Array.from({\n                length: (23 - this.beginHourFormControl.value) /\n                    this.handleHourIncrement() +\n                    1\n            }, (_, i) => this.beginHourFormControl.value + i * this.handleHourIncrement());\n        }\n        else {\n            this.endHours = Array.from({ length: (23 - 0) / this.handleHourIncrement() + 1 }, (_, i) => 0 + i * this.handleHourIncrement());\n        }\n        this.endHourFormControl.setValue(this.endValue.getHours());\n    }\n    fullBeginMinutesArray(checkEndValue) {\n        if (checkEndValue) {\n            this.beginMinutes = Array.from({\n                length: (this.endMinuteFormControl.value - 0) /\n                    this.handleMinuteIncrement() +\n                    1\n            }, (_, i) => 0 + i * this.handleMinuteIncrement());\n        }\n        else {\n            this.beginMinutes = Array.from({ length: (59 - 0) / this.handleMinuteIncrement() + 1 }, (_, i) => 0 + i * this.handleMinuteIncrement());\n        }\n        this.beginMinuteFormControl.setValue(this.beginValue.getMinutes());\n    }\n    fullEndMinutesArray(checkEndValue) {\n        if (checkEndValue) {\n            this.endMinutes = Array.from({\n                length: (59 - this.beginMinuteFormControl.value) /\n                    this.handleMinuteIncrement() +\n                    1\n            }, (_, i) => this.beginMinuteFormControl.value + i * this.handleMinuteIncrement());\n        }\n        else {\n            this.endMinutes = Array.from({ length: (59 - 0) / this.handleMinuteIncrement() + 1 }, (_, i) => 0 + i * this.handleMinuteIncrement());\n        }\n        this.endMinuteFormControl.setValue(this.endValue.getMinutes());\n    }\n    updateHoursMinutesArray() {\n        const beginTmp = new Date(this.beginValue);\n        const endTmp = new Date(this.endValue);\n        if (beginTmp.setHours(0, 0) === endTmp.setHours(0, 0)) {\n            this.fullBeginHoursArray(true);\n            this.fullEndHoursArray(true);\n            if (this.beginValue.getHours() === this.endValue.getHours()) {\n                this.fullBeginMinutesArray(true);\n                this.fullEndMinutesArray(true);\n            }\n        }\n        else {\n            this.fullBeginHoursArray();\n            this.fullEndHoursArray();\n            this.fullBeginMinutesArray();\n            this.fullEndMinutesArray();\n        }\n    }\n    updateValues() {\n        this.changeTemporalProperty(this.beginValue, 1, false);\n        this.changeTemporalProperty(this.endValue, 2, true);\n    }\n    restrictedToStep() {\n        return this.currentFilter.restrictToStep\n            ? this.currentFilter.restrictToStep : false;\n    }\n    handleMin() {\n        return this.currentFilter.begin ? this.currentFilter.begin :\n            (this.datasource.options.minDate ? this.datasource.options.minDate : this._defaultMin);\n    }\n    handleMax() {\n        return this.currentFilter.end ? this.currentFilter.end :\n            (this.datasource.options.maxDate ? this.datasource.options.maxDate : this._defaultMax);\n    }\n    changePropertyByPass(event) {\n        this.changeProperty.next(event);\n    }\n    modeChange(event) {\n        if (!event.checked) {\n            this.updateValues();\n        }\n    }\n}\nOgcFilterTimeComponent.ɵfac = function OgcFilterTimeComponent_Factory(t) { return new (t || OgcFilterTimeComponent)(ɵɵdirectiveInject(OGCFilterTimeService)); };\nOgcFilterTimeComponent.ɵcmp = ɵɵdefineComponent({ type: OgcFilterTimeComponent, selectors: [[\"igo-ogc-filter-time\"]], viewQuery: function OgcFilterTimeComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵviewQuery(_c0$e, true);\n        ɵɵviewQuery(_c1$8, true);\n        ɵɵviewQuery(_c2$3, true);\n        ɵɵviewQuery(_c3$2, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.endDatepickerTime = _t.first);\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.beginDatepickerTime = _t.first);\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.beginTime = _t.first);\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.endTime = _t.first);\n    } }, inputs: { datasource: \"datasource\", currentFilter: \"currentFilter\" }, outputs: { changeProperty: \"changeProperty\" }, decls: 4, vars: 3, consts: [[1, \"datetime-container\"], [3, \"ngModel\", \"ngModelChange\", \"change\", 4, \"ngIf\"], [\"class\", \"slider-container\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"ngModel\", \"ngModelChange\", \"change\"], [1, \"slider-container\"], [3, \"begin\", \"max\", \"currentFilter\", \"datasource\", \"changeProperty\"], [1, \"datetime-input\"], [1, \"date-input\"], [\"matSuffix\", \"\", 3, \"for\"], [\"matInput\", \"\", 3, \"matDatepicker\", \"placeholder\", \"matDatepickerFilter\", \"value\", \"min\", \"max\", \"dateChange\"], [\"begin\", \"\"], [1, \"filler\"], [3, \"startView\", \"startAt\", \"yearSelected\", \"monthSelected\"], [\"beginDatepicker\", \"\"], [1, \"time-input\"], [\"class\", \"hour-input\", 4, \"ngIf\"], [\"class\", \"minute-input\", 4, \"ngIf\"], [\"class\", \"datetime-input\", 4, \"ngIf\"], [1, \"hour-input\"], [3, \"formControl\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"minute-input\"], [\"end\", \"\"], [\"endDatepicker\", \"\"]], template: function OgcFilterTimeComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵtemplate(1, OgcFilterTimeComponent_mat_slide_toggle_1_Template, 3, 4, \"mat-slide-toggle\", 1);\n        ɵɵtemplate(2, OgcFilterTimeComponent_div_2_Template, 2, 4, \"div\", 2);\n        ɵɵtemplate(3, OgcFilterTimeComponent_div_3_Template, 14, 15, \"div\", 3);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.currentFilter.sliderOptions == null ? null : ctx.currentFilter.sliderOptions.enabled);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.sliderMode);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", !ctx.sliderMode);\n    } }, styles: [\"input{margin:auto 5px!important;text-align:center!important}.slider-container[_ngcontent-%COMP%]{text-align:center}.datetime-input[_ngcontent-%COMP%]{display:inline-block;margin:5px 25px}.date-input[_ngcontent-%COMP%]{margin-right:25px;width:120px}.time-input[_ngcontent-%COMP%]{display:inherit;margin-right:25px}.hour-input[_ngcontent-%COMP%], .minute-input[_ngcontent-%COMP%]{width:40px}.minute-input[_ngcontent-%COMP%]{margin-left:10px}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OgcFilterTimeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filter-time',\n                templateUrl: './ogc-filter-time.component.html',\n                styleUrls: ['./ogc-filter-time.component.scss']\n            }]\n    }], function () { return [{ type: OGCFilterTimeService }]; }, { datasource: [{\n            type: Input\n        }], currentFilter: [{\n            type: Input\n        }], changeProperty: [{\n            type: Output\n        }], endDatepickerTime: [{\n            type: ViewChild,\n            args: ['endDatepickerTime']\n        }], beginDatepickerTime: [{\n            type: ViewChild,\n            args: ['beginDatepickerTime']\n        }], beginTime: [{\n            type: ViewChild,\n            args: ['beginTime']\n        }], endTime: [{\n            type: ViewChild,\n            args: ['endTime']\n        }] }); })();\n\nconst moment$3 = moment_;\nclass OgcFilterTimeSliderComponent {\n    constructor(ogcFilterTimeService) {\n        this.ogcFilterTimeService = ogcFilterTimeService;\n        this.changeProperty = new EventEmitter();\n        this.sliderValue = 1;\n        this.calculatedStep = 0;\n        this._defaultDisplayFormat = 'DD/MM/YYYY HH:mm A';\n        this._defaultSliderInterval = 2000;\n        this.playIcon = 'play-circle';\n        this.resetIcon = 'replay';\n        this.sliderDisplayWith = this.sliderDisplayWith.bind(this);\n    }\n    get sliderInterval() {\n        return this.currentFilter.sliderInterval === undefined\n            ? this._defaultSliderInterval\n            : this.currentFilter.sliderInterval;\n    }\n    get displayFormat() {\n        var _a;\n        if ((_a = this.currentFilter.sliderOptions) === null || _a === void 0 ? void 0 : _a.displayFormat) {\n            return this.currentFilter.sliderOptions.displayFormat;\n        }\n        if (this.currentFilter.displayFormat) {\n            return this.currentFilter.displayFormat;\n        }\n        return this._defaultDisplayFormat;\n    }\n    get beginMillisecond() {\n        return this.ogcFilterTimeService.dateToNumber(this.begin);\n    }\n    get maxMillisecond() {\n        return this.ogcFilterTimeService.dateToNumber(this.max);\n    }\n    get stepMillisecond() {\n        return this.ogcFilterTimeService.stepMillisecond(this.datasource, this.currentFilter);\n    }\n    ngOnInit() {\n        this.calculateStep();\n        this.handleSliderInput({ value: 1 });\n    }\n    sliderDisplayWith(value) {\n        let dateTmp = new Date(this.beginMillisecond + ((value - 1) * this.stepMillisecond));\n        if (this.ogcFilterTimeService.stepIsYearDuration(this.ogcFilterTimeService.step(this.datasource, this.currentFilter))) {\n            const toAdd = moment$3.duration(this.ogcFilterTimeService.step(this.datasource, this.currentFilter)).years();\n            dateTmp = moment$3(this.beginMillisecond).add((value - 1) * toAdd, 'year').toDate();\n        }\n        else if (this.ogcFilterTimeService.stepIsMonthDuration(this.ogcFilterTimeService.step(this.datasource, this.currentFilter))) {\n            const toAdd = moment$3.duration(this.ogcFilterTimeService.step(this.datasource, this.currentFilter)).months();\n            dateTmp = moment$3(this.beginMillisecond).add((value - 1) * toAdd, 'month').toDate();\n        }\n        return moment$3(dateTmp).format(this.displayFormat);\n    }\n    playFilter(event) {\n        if (this.interval) {\n            this.stopFilter();\n        }\n        else {\n            this.playIcon = 'pause-circle';\n            this.interval = setInterval(that => {\n                if (this.slider.value < this.calculatedStep) {\n                    const _increment = '_increment';\n                    const _emitInputEvent = '_emitInputEvent';\n                    this.slider[_increment](1);\n                    this.slider[_emitInputEvent]();\n                }\n                else {\n                    this.stopFilter();\n                }\n            }, this.sliderInterval, this);\n        }\n    }\n    stopFilter() {\n        if (this.interval) {\n            clearInterval(this.interval);\n        }\n        this.interval = undefined;\n        this.playIcon = 'play-circle';\n    }\n    resetFilter(event) {\n        if (this.interval) {\n            clearInterval(this.interval);\n        }\n        this.interval = undefined;\n        this.playIcon = 'play-circle';\n        this.slider.value = 1;\n        const _increment = '_increment';\n        const _emitInputEvent = '_emitInputEvent';\n        this.slider[_emitInputEvent]();\n    }\n    handleSliderInput(matSliderChange) {\n        if (matSliderChange) {\n            if (this.ogcFilterTimeService.stepIsYearDuration(this.ogcFilterTimeService.step(this.datasource, this.currentFilter))) {\n                const toAdd = moment$3.duration(this.ogcFilterTimeService.step(this.datasource, this.currentFilter)).years();\n                const dateBeginTmp = moment$3(this.beginMillisecond).add((matSliderChange.value - 1) * toAdd, 'year').toDate();\n                const dateEndTmp = moment$3(dateBeginTmp).add(toAdd, 'year').toDate();\n                this.changeProperty.next({ value: moment$3(dateBeginTmp).toDate().toISOString(),\n                    pos: 1, refreshFilter: false });\n                this.changeProperty.next({ value: moment$3(dateEndTmp).toDate().toISOString(),\n                    pos: 2, refreshFilter: true });\n            }\n            else if (this.ogcFilterTimeService.stepIsMonthDuration(this.ogcFilterTimeService.step(this.datasource, this.currentFilter))) {\n                const toAdd = moment$3.duration(this.ogcFilterTimeService.step(this.datasource, this.currentFilter)).months();\n                const dateBeginTmp = moment$3(this.beginMillisecond).add((matSliderChange.value - 1) * toAdd, 'month').toDate();\n                const dateEndTmp = moment$3(dateBeginTmp).add(toAdd, 'month').toDate();\n                this.changeProperty.next({ value: moment$3(dateBeginTmp).startOf('month').toDate().toISOString(),\n                    pos: 1, refreshFilter: false });\n                this.changeProperty.next({ value: moment$3(dateEndTmp).toDate().toISOString(),\n                    pos: 2, refreshFilter: true });\n            }\n            else if (this.ogcFilterTimeService.stepIsDayDuration(this.ogcFilterTimeService.step(this.datasource, this.currentFilter)) ||\n                this.ogcFilterTimeService.stepIsHourDuration(this.ogcFilterTimeService.step(this.datasource, this.currentFilter)) ||\n                this.ogcFilterTimeService.stepIsMinuteDuration(this.ogcFilterTimeService.step(this.datasource, this.currentFilter))) {\n                const dateTmp = new Date(this.beginMillisecond + (this.stepMillisecond * (matSliderChange.value - 1)));\n                this.changeProperty.next({ value: dateTmp.toISOString(), pos: 1, refreshFilter: false });\n                this.changeProperty.next({ value: new Date(this.ogcFilterTimeService.addStep(dateTmp.toISOString(), this.stepMillisecond)).toISOString(),\n                    pos: 2, refreshFilter: true });\n            }\n        }\n    }\n    calculateStep() {\n        for (let i = 1; (this.maxMillisecond - (this.beginMillisecond + (i * this.stepMillisecond))) >= -1; i++) {\n            this.calculatedStep = i;\n        }\n    }\n}\nOgcFilterTimeSliderComponent.ɵfac = function OgcFilterTimeSliderComponent_Factory(t) { return new (t || OgcFilterTimeSliderComponent)(ɵɵdirectiveInject(OGCFilterTimeService)); };\nOgcFilterTimeSliderComponent.ɵcmp = ɵɵdefineComponent({ type: OgcFilterTimeSliderComponent, selectors: [[\"igo-ogc-filter-time-slider\"]], viewQuery: function OgcFilterTimeSliderComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵviewQuery(MatSlider, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.slider = _t.first);\n    } }, inputs: { currentFilter: \"currentFilter\", begin: \"begin\", max: \"max\", datasource: \"datasource\" }, outputs: { changeProperty: \"changeProperty\" }, decls: 6, vars: 7, consts: [[1, \"slider-container\"], [\"id\", \"time-slider\", \"thumbLabel\", \"\", 3, \"step\", \"min\", \"max\", \"ngModel\", \"displayWith\", \"ngModelChange\", \"input\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"click\"], [3, \"svgIcon\"]], template: function OgcFilterTimeSliderComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵelementStart(1, \"mat-slider\", 1);\n        ɵɵlistener(\"ngModelChange\", function OgcFilterTimeSliderComponent_Template_mat_slider_ngModelChange_1_listener($event) { return ctx.sliderValue = $event; })(\"input\", function OgcFilterTimeSliderComponent_Template_mat_slider_input_1_listener($event) { return ctx.handleSliderInput($event); });\n        ɵɵelementEnd();\n        ɵɵelementStart(2, \"button\", 2);\n        ɵɵlistener(\"click\", function OgcFilterTimeSliderComponent_Template_button_click_2_listener($event) { return ctx.playFilter($event); });\n        ɵɵelement(3, \"mat-icon\", 3);\n        ɵɵelementEnd();\n        ɵɵelementStart(4, \"button\", 2);\n        ɵɵlistener(\"click\", function OgcFilterTimeSliderComponent_Template_button_click_4_listener($event) { return ctx.resetFilter($event); });\n        ɵɵelement(5, \"mat-icon\", 3);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"step\", 1)(\"min\", 1)(\"max\", ctx.calculatedStep)(\"ngModel\", ctx.sliderValue)(\"displayWith\", ctx.sliderDisplayWith);\n        ɵɵadvance(2);\n        ɵɵproperty(\"svgIcon\", ctx.playIcon);\n        ɵɵadvance(2);\n        ɵɵpropertyInterpolate(\"svgIcon\", ctx.resetIcon);\n    } }, directives: [MatSlider, NgControlStatus, NgModel, MatButton, MatIcon], styles: [\"input{margin:auto 5px!important;text-align:center!important}  .mat-slider-thumb{transform:scale(0)!important}  .mat-slider-thumb-label{background-color:#ffd740!important;border-radius:50% 50% 0!important;transform:rotate(45deg)!important}  .mat-slider-thumb-label-text{opacity:1!important;transform:rotate(135deg)!important}  .mat-slider-horizontal .mat-slider-thumb-label{top:10px!important;transform:rotate(225deg)!important}  .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(225deg)!important}.datetime-container[_ngcontent-%COMP%], .slider-container[_ngcontent-%COMP%]{text-align:center}.datetime-input[_ngcontent-%COMP%]{display:inline-block;margin:5px 25px}.date-input[_ngcontent-%COMP%]{margin-right:25px;width:120px}.time-input[_ngcontent-%COMP%]{display:inherit;margin-right:25px}.hour-input[_ngcontent-%COMP%], .minute-input[_ngcontent-%COMP%]{width:40px}.minute-input[_ngcontent-%COMP%]{margin-left:10px}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OgcFilterTimeSliderComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filter-time-slider',\n                templateUrl: './ogc-filter-time-slider.component.html',\n                styleUrls: ['./ogc-filter-time-slider.component.scss']\n            }]\n    }], function () { return [{ type: OGCFilterTimeService }]; }, { currentFilter: [{\n            type: Input\n        }], begin: [{\n            type: Input\n        }], max: [{\n            type: Input\n        }], datasource: [{\n            type: Input\n        }], changeProperty: [{\n            type: Output\n        }], slider: [{\n            type: ViewChild,\n            args: [MatSlider]\n        }] }); })();\n\nclass IgoFilterModule {\n    static forRoot() {\n        return {\n            ngModule: IgoFilterModule,\n            providers: [\n                {\n                    provide: MAT_DATE_LOCALE,\n                    useValue: 'fr-FR'\n                }\n            ]\n        };\n    }\n}\nIgoFilterModule.ɵmod = ɵɵdefineNgModule({ type: IgoFilterModule });\nIgoFilterModule.ɵinj = ɵɵdefineInjector({ factory: function IgoFilterModule_Factory(t) { return new (t || IgoFilterModule)(); }, providers: [TimeFilterService, OGCFilterService, OGCFilterTimeService, SpatialFilterService], imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatAutocompleteModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTabsModule,\n            MatRadioModule,\n            MatMenuModule,\n            MatTableModule,\n            MatTreeModule,\n            MatButtonToggleModule,\n            MatCheckboxModule,\n            MatSliderModule,\n            MatSlideToggleModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatOptionModule,\n            MatSelectModule,\n            MatListModule,\n            MatTooltipModule,\n            MatDatepickerModule,\n            MatNativeDateModule,\n            MatDatetimepickerModule,\n            MatNativeDatetimeModule,\n            IgoLanguageModule,\n            IgoLayerModule,\n            IgoCollapsibleModule,\n            IgoListModule,\n            IgoKeyValueModule,\n            IgoGeometryModule,\n            MatBadgeModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoFilterModule, { declarations: [FilterableDataSourcePipe,\n        TimeFilterButtonComponent,\n        TimeFilterFormComponent,\n        TimeFilterItemComponent,\n        TimeFilterListComponent,\n        TimeFilterListBindingDirective,\n        OgcFilterFormComponent,\n        OgcFilterButtonComponent,\n        OgcFilterSelectionComponent,\n        OgcFilterableFormComponent,\n        OgcFilterableItemComponent,\n        OgcFilterableListComponent,\n        OgcFilterableListBindingDirective,\n        SpatialFilterTypeComponent,\n        SpatialFilterListComponent,\n        SpatialFilterItemComponent,\n        OgcFilterTimeComponent,\n        OgcFilterTimeSliderComponent], imports: [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatAutocompleteModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTabsModule,\n        MatRadioModule,\n        MatMenuModule,\n        MatTableModule,\n        MatTreeModule,\n        MatButtonToggleModule,\n        MatCheckboxModule,\n        MatSliderModule,\n        MatSlideToggleModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatOptionModule,\n        MatSelectModule,\n        MatListModule,\n        MatTooltipModule,\n        MatDatepickerModule,\n        MatNativeDateModule,\n        MatDatetimepickerModule,\n        MatNativeDatetimeModule,\n        IgoLanguageModule,\n        IgoLayerModule,\n        IgoCollapsibleModule,\n        IgoListModule,\n        IgoKeyValueModule,\n        IgoGeometryModule,\n        MatBadgeModule], exports: [FilterableDataSourcePipe,\n        TimeFilterButtonComponent,\n        TimeFilterFormComponent,\n        TimeFilterItemComponent,\n        TimeFilterListComponent,\n        TimeFilterListBindingDirective,\n        OgcFilterFormComponent,\n        OgcFilterButtonComponent,\n        OgcFilterSelectionComponent,\n        OgcFilterableFormComponent,\n        OgcFilterableItemComponent,\n        OgcFilterableListComponent,\n        OgcFilterableListBindingDirective,\n        SpatialFilterTypeComponent,\n        SpatialFilterListComponent,\n        SpatialFilterItemComponent,\n        OgcFilterTimeComponent,\n        OgcFilterTimeSliderComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoFilterModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatAutocompleteModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTabsModule,\n                    MatRadioModule,\n                    MatMenuModule,\n                    MatTableModule,\n                    MatTreeModule,\n                    MatButtonToggleModule,\n                    MatCheckboxModule,\n                    MatSliderModule,\n                    MatSlideToggleModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatOptionModule,\n                    MatSelectModule,\n                    MatListModule,\n                    MatTooltipModule,\n                    MatDatepickerModule,\n                    MatNativeDateModule,\n                    MatDatetimepickerModule,\n                    MatNativeDatetimeModule,\n                    IgoLanguageModule,\n                    IgoLayerModule,\n                    IgoCollapsibleModule,\n                    IgoListModule,\n                    IgoKeyValueModule,\n                    IgoGeometryModule,\n                    MatBadgeModule\n                ],\n                exports: [\n                    FilterableDataSourcePipe,\n                    TimeFilterButtonComponent,\n                    TimeFilterFormComponent,\n                    TimeFilterItemComponent,\n                    TimeFilterListComponent,\n                    TimeFilterListBindingDirective,\n                    OgcFilterFormComponent,\n                    OgcFilterButtonComponent,\n                    OgcFilterSelectionComponent,\n                    OgcFilterableFormComponent,\n                    OgcFilterableItemComponent,\n                    OgcFilterableListComponent,\n                    OgcFilterableListBindingDirective,\n                    SpatialFilterTypeComponent,\n                    SpatialFilterListComponent,\n                    SpatialFilterItemComponent,\n                    OgcFilterTimeComponent,\n                    OgcFilterTimeSliderComponent\n                ],\n                declarations: [\n                    FilterableDataSourcePipe,\n                    TimeFilterButtonComponent,\n                    TimeFilterFormComponent,\n                    TimeFilterItemComponent,\n                    TimeFilterListComponent,\n                    TimeFilterListBindingDirective,\n                    OgcFilterFormComponent,\n                    OgcFilterButtonComponent,\n                    OgcFilterSelectionComponent,\n                    OgcFilterableFormComponent,\n                    OgcFilterableItemComponent,\n                    OgcFilterableListComponent,\n                    OgcFilterableListBindingDirective,\n                    SpatialFilterTypeComponent,\n                    SpatialFilterListComponent,\n                    SpatialFilterItemComponent,\n                    OgcFilterTimeComponent,\n                    OgcFilterTimeSliderComponent\n                ],\n                providers: [TimeFilterService, OGCFilterService, OGCFilterTimeService, SpatialFilterService]\n            }]\n    }], null, null); })();\nɵɵsetComponentScope(TimeFilterButtonComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName, MatAutocomplete, MatAutocompleteTrigger, MatAutocompleteOrigin, CdkScrollable, MatOption, MatOptgroup, Dir, MatIcon, MatButton, MatAnchor, MatTabGroup, MatTabLabel, MatTab, MatTabNav, MatTabLink, MatTabContent, MatRadioGroup, MatRadioButton, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatTable, MatHeaderCellDef, MatHeaderRowDef, MatColumnDef, MatCellDef, MatRowDef, MatFooterCellDef, MatFooterRowDef, MatHeaderCell, MatCell, MatFooterCell, MatHeaderRow, MatRow, MatFooterRow, MatNoDataRow, MatTextColumn, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet, MatButtonToggleGroup, MatButtonToggle, MatCheckbox, MatCheckboxRequiredValidator, MatSlider, MatSlideToggleRequiredValidator, MatSlideToggle, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, MatCalendar, MatCalendarBody, MatDatepicker, MatDatepickerContent, MatDatepickerInput, MatDatepickerToggle, MatDatepickerToggleIcon, MatMonthView, MatYearView, MatMultiYearView, MatCalendarHeader, MatDateRangeInput, MatStartDate, MatEndDate, MatDateRangePicker, MatDatetimepickerCalendar, MatDatetimepickerCalendarBody, MatDatetimepickerClock, MatDatetimepicker, MatDatetimepickerToggle, MatDatetimepickerInput, MatDatetimepickerContent, MatDatetimepickerMonthView, MatDatetimepickerYearView, ɵb, TranslateDirective, LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent, CollapsibleComponent, CollapseDirective, ListItemDirective, ListComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, MatBadge, TimeFilterButtonComponent,\n    TimeFilterFormComponent,\n    TimeFilterItemComponent,\n    TimeFilterListComponent,\n    TimeFilterListBindingDirective,\n    OgcFilterFormComponent,\n    OgcFilterButtonComponent,\n    OgcFilterSelectionComponent,\n    OgcFilterableFormComponent,\n    OgcFilterableItemComponent,\n    OgcFilterableListComponent,\n    OgcFilterableListBindingDirective,\n    SpatialFilterTypeComponent,\n    SpatialFilterListComponent,\n    SpatialFilterItemComponent,\n    OgcFilterTimeComponent,\n    OgcFilterTimeSliderComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, KeyValuePipe$1, FilterableDataSourcePipe]);\nɵɵsetComponentScope(TimeFilterItemComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName, MatAutocomplete, MatAutocompleteTrigger, MatAutocompleteOrigin, CdkScrollable, MatOption, MatOptgroup, Dir, MatIcon, MatButton, MatAnchor, MatTabGroup, MatTabLabel, MatTab, MatTabNav, MatTabLink, MatTabContent, MatRadioGroup, MatRadioButton, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatTable, MatHeaderCellDef, MatHeaderRowDef, MatColumnDef, MatCellDef, MatRowDef, MatFooterCellDef, MatFooterRowDef, MatHeaderCell, MatCell, MatFooterCell, MatHeaderRow, MatRow, MatFooterRow, MatNoDataRow, MatTextColumn, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet, MatButtonToggleGroup, MatButtonToggle, MatCheckbox, MatCheckboxRequiredValidator, MatSlider, MatSlideToggleRequiredValidator, MatSlideToggle, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, MatCalendar, MatCalendarBody, MatDatepicker, MatDatepickerContent, MatDatepickerInput, MatDatepickerToggle, MatDatepickerToggleIcon, MatMonthView, MatYearView, MatMultiYearView, MatCalendarHeader, MatDateRangeInput, MatStartDate, MatEndDate, MatDateRangePicker, MatDatetimepickerCalendar, MatDatetimepickerCalendarBody, MatDatetimepickerClock, MatDatetimepicker, MatDatetimepickerToggle, MatDatetimepickerInput, MatDatetimepickerContent, MatDatetimepickerMonthView, MatDatetimepickerYearView, ɵb, TranslateDirective, LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent, CollapsibleComponent, CollapseDirective, ListItemDirective, ListComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, MatBadge, TimeFilterButtonComponent,\n    TimeFilterFormComponent,\n    TimeFilterItemComponent,\n    TimeFilterListComponent,\n    TimeFilterListBindingDirective,\n    OgcFilterFormComponent,\n    OgcFilterButtonComponent,\n    OgcFilterSelectionComponent,\n    OgcFilterableFormComponent,\n    OgcFilterableItemComponent,\n    OgcFilterableListComponent,\n    OgcFilterableListBindingDirective,\n    SpatialFilterTypeComponent,\n    SpatialFilterListComponent,\n    SpatialFilterItemComponent,\n    OgcFilterTimeComponent,\n    OgcFilterTimeSliderComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, KeyValuePipe$1, FilterableDataSourcePipe]);\nɵɵsetComponentScope(TimeFilterListComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName, MatAutocomplete, MatAutocompleteTrigger, MatAutocompleteOrigin, CdkScrollable, MatOption, MatOptgroup, Dir, MatIcon, MatButton, MatAnchor, MatTabGroup, MatTabLabel, MatTab, MatTabNav, MatTabLink, MatTabContent, MatRadioGroup, MatRadioButton, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatTable, MatHeaderCellDef, MatHeaderRowDef, MatColumnDef, MatCellDef, MatRowDef, MatFooterCellDef, MatFooterRowDef, MatHeaderCell, MatCell, MatFooterCell, MatHeaderRow, MatRow, MatFooterRow, MatNoDataRow, MatTextColumn, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet, MatButtonToggleGroup, MatButtonToggle, MatCheckbox, MatCheckboxRequiredValidator, MatSlider, MatSlideToggleRequiredValidator, MatSlideToggle, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, MatCalendar, MatCalendarBody, MatDatepicker, MatDatepickerContent, MatDatepickerInput, MatDatepickerToggle, MatDatepickerToggleIcon, MatMonthView, MatYearView, MatMultiYearView, MatCalendarHeader, MatDateRangeInput, MatStartDate, MatEndDate, MatDateRangePicker, MatDatetimepickerCalendar, MatDatetimepickerCalendarBody, MatDatetimepickerClock, MatDatetimepicker, MatDatetimepickerToggle, MatDatetimepickerInput, MatDatetimepickerContent, MatDatetimepickerMonthView, MatDatetimepickerYearView, ɵb, TranslateDirective, LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent, CollapsibleComponent, CollapseDirective, ListItemDirective, ListComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, MatBadge, TimeFilterButtonComponent,\n    TimeFilterFormComponent,\n    TimeFilterItemComponent,\n    TimeFilterListComponent,\n    TimeFilterListBindingDirective,\n    OgcFilterFormComponent,\n    OgcFilterButtonComponent,\n    OgcFilterSelectionComponent,\n    OgcFilterableFormComponent,\n    OgcFilterableItemComponent,\n    OgcFilterableListComponent,\n    OgcFilterableListBindingDirective,\n    SpatialFilterTypeComponent,\n    SpatialFilterListComponent,\n    SpatialFilterItemComponent,\n    OgcFilterTimeComponent,\n    OgcFilterTimeSliderComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, KeyValuePipe$1, FilterableDataSourcePipe]);\nɵɵsetComponentScope(OgcFilterFormComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName, MatAutocomplete, MatAutocompleteTrigger, MatAutocompleteOrigin, CdkScrollable, MatOption, MatOptgroup, Dir, MatIcon, MatButton, MatAnchor, MatTabGroup, MatTabLabel, MatTab, MatTabNav, MatTabLink, MatTabContent, MatRadioGroup, MatRadioButton, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatTable, MatHeaderCellDef, MatHeaderRowDef, MatColumnDef, MatCellDef, MatRowDef, MatFooterCellDef, MatFooterRowDef, MatHeaderCell, MatCell, MatFooterCell, MatHeaderRow, MatRow, MatFooterRow, MatNoDataRow, MatTextColumn, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet, MatButtonToggleGroup, MatButtonToggle, MatCheckbox, MatCheckboxRequiredValidator, MatSlider, MatSlideToggleRequiredValidator, MatSlideToggle, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, MatCalendar, MatCalendarBody, MatDatepicker, MatDatepickerContent, MatDatepickerInput, MatDatepickerToggle, MatDatepickerToggleIcon, MatMonthView, MatYearView, MatMultiYearView, MatCalendarHeader, MatDateRangeInput, MatStartDate, MatEndDate, MatDateRangePicker, MatDatetimepickerCalendar, MatDatetimepickerCalendarBody, MatDatetimepickerClock, MatDatetimepicker, MatDatetimepickerToggle, MatDatetimepickerInput, MatDatetimepickerContent, MatDatetimepickerMonthView, MatDatetimepickerYearView, ɵb, TranslateDirective, LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent, CollapsibleComponent, CollapseDirective, ListItemDirective, ListComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, MatBadge, TimeFilterButtonComponent,\n    TimeFilterFormComponent,\n    TimeFilterItemComponent,\n    TimeFilterListComponent,\n    TimeFilterListBindingDirective,\n    OgcFilterFormComponent,\n    OgcFilterButtonComponent,\n    OgcFilterSelectionComponent,\n    OgcFilterableFormComponent,\n    OgcFilterableItemComponent,\n    OgcFilterableListComponent,\n    OgcFilterableListBindingDirective,\n    SpatialFilterTypeComponent,\n    SpatialFilterListComponent,\n    SpatialFilterItemComponent,\n    OgcFilterTimeComponent,\n    OgcFilterTimeSliderComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, KeyValuePipe$1, FilterableDataSourcePipe]);\nɵɵsetComponentScope(OgcFilterButtonComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName, MatAutocomplete, MatAutocompleteTrigger, MatAutocompleteOrigin, CdkScrollable, MatOption, MatOptgroup, Dir, MatIcon, MatButton, MatAnchor, MatTabGroup, MatTabLabel, MatTab, MatTabNav, MatTabLink, MatTabContent, MatRadioGroup, MatRadioButton, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatTable, MatHeaderCellDef, MatHeaderRowDef, MatColumnDef, MatCellDef, MatRowDef, MatFooterCellDef, MatFooterRowDef, MatHeaderCell, MatCell, MatFooterCell, MatHeaderRow, MatRow, MatFooterRow, MatNoDataRow, MatTextColumn, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet, MatButtonToggleGroup, MatButtonToggle, MatCheckbox, MatCheckboxRequiredValidator, MatSlider, MatSlideToggleRequiredValidator, MatSlideToggle, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, MatCalendar, MatCalendarBody, MatDatepicker, MatDatepickerContent, MatDatepickerInput, MatDatepickerToggle, MatDatepickerToggleIcon, MatMonthView, MatYearView, MatMultiYearView, MatCalendarHeader, MatDateRangeInput, MatStartDate, MatEndDate, MatDateRangePicker, MatDatetimepickerCalendar, MatDatetimepickerCalendarBody, MatDatetimepickerClock, MatDatetimepicker, MatDatetimepickerToggle, MatDatetimepickerInput, MatDatetimepickerContent, MatDatetimepickerMonthView, MatDatetimepickerYearView, ɵb, TranslateDirective, LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent, CollapsibleComponent, CollapseDirective, ListItemDirective, ListComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, MatBadge, TimeFilterButtonComponent,\n    TimeFilterFormComponent,\n    TimeFilterItemComponent,\n    TimeFilterListComponent,\n    TimeFilterListBindingDirective,\n    OgcFilterFormComponent,\n    OgcFilterButtonComponent,\n    OgcFilterSelectionComponent,\n    OgcFilterableFormComponent,\n    OgcFilterableItemComponent,\n    OgcFilterableListComponent,\n    OgcFilterableListBindingDirective,\n    SpatialFilterTypeComponent,\n    SpatialFilterListComponent,\n    SpatialFilterItemComponent,\n    OgcFilterTimeComponent,\n    OgcFilterTimeSliderComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, KeyValuePipe$1, FilterableDataSourcePipe]);\nɵɵsetComponentScope(OgcFilterSelectionComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName, MatAutocomplete, MatAutocompleteTrigger, MatAutocompleteOrigin, CdkScrollable, MatOption, MatOptgroup, Dir, MatIcon, MatButton, MatAnchor, MatTabGroup, MatTabLabel, MatTab, MatTabNav, MatTabLink, MatTabContent, MatRadioGroup, MatRadioButton, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatTable, MatHeaderCellDef, MatHeaderRowDef, MatColumnDef, MatCellDef, MatRowDef, MatFooterCellDef, MatFooterRowDef, MatHeaderCell, MatCell, MatFooterCell, MatHeaderRow, MatRow, MatFooterRow, MatNoDataRow, MatTextColumn, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet, MatButtonToggleGroup, MatButtonToggle, MatCheckbox, MatCheckboxRequiredValidator, MatSlider, MatSlideToggleRequiredValidator, MatSlideToggle, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, MatCalendar, MatCalendarBody, MatDatepicker, MatDatepickerContent, MatDatepickerInput, MatDatepickerToggle, MatDatepickerToggleIcon, MatMonthView, MatYearView, MatMultiYearView, MatCalendarHeader, MatDateRangeInput, MatStartDate, MatEndDate, MatDateRangePicker, MatDatetimepickerCalendar, MatDatetimepickerCalendarBody, MatDatetimepickerClock, MatDatetimepicker, MatDatetimepickerToggle, MatDatetimepickerInput, MatDatetimepickerContent, MatDatetimepickerMonthView, MatDatetimepickerYearView, ɵb, TranslateDirective, LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent, CollapsibleComponent, CollapseDirective, ListItemDirective, ListComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, MatBadge, TimeFilterButtonComponent,\n    TimeFilterFormComponent,\n    TimeFilterItemComponent,\n    TimeFilterListComponent,\n    TimeFilterListBindingDirective,\n    OgcFilterFormComponent,\n    OgcFilterButtonComponent,\n    OgcFilterSelectionComponent,\n    OgcFilterableFormComponent,\n    OgcFilterableItemComponent,\n    OgcFilterableListComponent,\n    OgcFilterableListBindingDirective,\n    SpatialFilterTypeComponent,\n    SpatialFilterListComponent,\n    SpatialFilterItemComponent,\n    OgcFilterTimeComponent,\n    OgcFilterTimeSliderComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, KeyValuePipe$1, FilterableDataSourcePipe]);\nɵɵsetComponentScope(OgcFilterableFormComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName, MatAutocomplete, MatAutocompleteTrigger, MatAutocompleteOrigin, CdkScrollable, MatOption, MatOptgroup, Dir, MatIcon, MatButton, MatAnchor, MatTabGroup, MatTabLabel, MatTab, MatTabNav, MatTabLink, MatTabContent, MatRadioGroup, MatRadioButton, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatTable, MatHeaderCellDef, MatHeaderRowDef, MatColumnDef, MatCellDef, MatRowDef, MatFooterCellDef, MatFooterRowDef, MatHeaderCell, MatCell, MatFooterCell, MatHeaderRow, MatRow, MatFooterRow, MatNoDataRow, MatTextColumn, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet, MatButtonToggleGroup, MatButtonToggle, MatCheckbox, MatCheckboxRequiredValidator, MatSlider, MatSlideToggleRequiredValidator, MatSlideToggle, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, MatCalendar, MatCalendarBody, MatDatepicker, MatDatepickerContent, MatDatepickerInput, MatDatepickerToggle, MatDatepickerToggleIcon, MatMonthView, MatYearView, MatMultiYearView, MatCalendarHeader, MatDateRangeInput, MatStartDate, MatEndDate, MatDateRangePicker, MatDatetimepickerCalendar, MatDatetimepickerCalendarBody, MatDatetimepickerClock, MatDatetimepicker, MatDatetimepickerToggle, MatDatetimepickerInput, MatDatetimepickerContent, MatDatetimepickerMonthView, MatDatetimepickerYearView, ɵb, TranslateDirective, LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent, CollapsibleComponent, CollapseDirective, ListItemDirective, ListComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, MatBadge, TimeFilterButtonComponent,\n    TimeFilterFormComponent,\n    TimeFilterItemComponent,\n    TimeFilterListComponent,\n    TimeFilterListBindingDirective,\n    OgcFilterFormComponent,\n    OgcFilterButtonComponent,\n    OgcFilterSelectionComponent,\n    OgcFilterableFormComponent,\n    OgcFilterableItemComponent,\n    OgcFilterableListComponent,\n    OgcFilterableListBindingDirective,\n    SpatialFilterTypeComponent,\n    SpatialFilterListComponent,\n    SpatialFilterItemComponent,\n    OgcFilterTimeComponent,\n    OgcFilterTimeSliderComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, KeyValuePipe$1, FilterableDataSourcePipe]);\nɵɵsetComponentScope(OgcFilterableItemComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName, MatAutocomplete, MatAutocompleteTrigger, MatAutocompleteOrigin, CdkScrollable, MatOption, MatOptgroup, Dir, MatIcon, MatButton, MatAnchor, MatTabGroup, MatTabLabel, MatTab, MatTabNav, MatTabLink, MatTabContent, MatRadioGroup, MatRadioButton, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatTable, MatHeaderCellDef, MatHeaderRowDef, MatColumnDef, MatCellDef, MatRowDef, MatFooterCellDef, MatFooterRowDef, MatHeaderCell, MatCell, MatFooterCell, MatHeaderRow, MatRow, MatFooterRow, MatNoDataRow, MatTextColumn, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet, MatButtonToggleGroup, MatButtonToggle, MatCheckbox, MatCheckboxRequiredValidator, MatSlider, MatSlideToggleRequiredValidator, MatSlideToggle, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, MatCalendar, MatCalendarBody, MatDatepicker, MatDatepickerContent, MatDatepickerInput, MatDatepickerToggle, MatDatepickerToggleIcon, MatMonthView, MatYearView, MatMultiYearView, MatCalendarHeader, MatDateRangeInput, MatStartDate, MatEndDate, MatDateRangePicker, MatDatetimepickerCalendar, MatDatetimepickerCalendarBody, MatDatetimepickerClock, MatDatetimepicker, MatDatetimepickerToggle, MatDatetimepickerInput, MatDatetimepickerContent, MatDatetimepickerMonthView, MatDatetimepickerYearView, ɵb, TranslateDirective, LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent, CollapsibleComponent, CollapseDirective, ListItemDirective, ListComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, MatBadge, TimeFilterButtonComponent,\n    TimeFilterFormComponent,\n    TimeFilterItemComponent,\n    TimeFilterListComponent,\n    TimeFilterListBindingDirective,\n    OgcFilterFormComponent,\n    OgcFilterButtonComponent,\n    OgcFilterSelectionComponent,\n    OgcFilterableFormComponent,\n    OgcFilterableItemComponent,\n    OgcFilterableListComponent,\n    OgcFilterableListBindingDirective,\n    SpatialFilterTypeComponent,\n    SpatialFilterListComponent,\n    SpatialFilterItemComponent,\n    OgcFilterTimeComponent,\n    OgcFilterTimeSliderComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, KeyValuePipe$1, FilterableDataSourcePipe]);\nɵɵsetComponentScope(OgcFilterableListComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName, MatAutocomplete, MatAutocompleteTrigger, MatAutocompleteOrigin, CdkScrollable, MatOption, MatOptgroup, Dir, MatIcon, MatButton, MatAnchor, MatTabGroup, MatTabLabel, MatTab, MatTabNav, MatTabLink, MatTabContent, MatRadioGroup, MatRadioButton, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatTable, MatHeaderCellDef, MatHeaderRowDef, MatColumnDef, MatCellDef, MatRowDef, MatFooterCellDef, MatFooterRowDef, MatHeaderCell, MatCell, MatFooterCell, MatHeaderRow, MatRow, MatFooterRow, MatNoDataRow, MatTextColumn, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet, MatButtonToggleGroup, MatButtonToggle, MatCheckbox, MatCheckboxRequiredValidator, MatSlider, MatSlideToggleRequiredValidator, MatSlideToggle, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, MatCalendar, MatCalendarBody, MatDatepicker, MatDatepickerContent, MatDatepickerInput, MatDatepickerToggle, MatDatepickerToggleIcon, MatMonthView, MatYearView, MatMultiYearView, MatCalendarHeader, MatDateRangeInput, MatStartDate, MatEndDate, MatDateRangePicker, MatDatetimepickerCalendar, MatDatetimepickerCalendarBody, MatDatetimepickerClock, MatDatetimepicker, MatDatetimepickerToggle, MatDatetimepickerInput, MatDatetimepickerContent, MatDatetimepickerMonthView, MatDatetimepickerYearView, ɵb, TranslateDirective, LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent, CollapsibleComponent, CollapseDirective, ListItemDirective, ListComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, MatBadge, TimeFilterButtonComponent,\n    TimeFilterFormComponent,\n    TimeFilterItemComponent,\n    TimeFilterListComponent,\n    TimeFilterListBindingDirective,\n    OgcFilterFormComponent,\n    OgcFilterButtonComponent,\n    OgcFilterSelectionComponent,\n    OgcFilterableFormComponent,\n    OgcFilterableItemComponent,\n    OgcFilterableListComponent,\n    OgcFilterableListBindingDirective,\n    SpatialFilterTypeComponent,\n    SpatialFilterListComponent,\n    SpatialFilterItemComponent,\n    OgcFilterTimeComponent,\n    OgcFilterTimeSliderComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, KeyValuePipe$1, FilterableDataSourcePipe]);\nɵɵsetComponentScope(SpatialFilterTypeComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName, MatAutocomplete, MatAutocompleteTrigger, MatAutocompleteOrigin, CdkScrollable, MatOption, MatOptgroup, Dir, MatIcon, MatButton, MatAnchor, MatTabGroup, MatTabLabel, MatTab, MatTabNav, MatTabLink, MatTabContent, MatRadioGroup, MatRadioButton, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatTable, MatHeaderCellDef, MatHeaderRowDef, MatColumnDef, MatCellDef, MatRowDef, MatFooterCellDef, MatFooterRowDef, MatHeaderCell, MatCell, MatFooterCell, MatHeaderRow, MatRow, MatFooterRow, MatNoDataRow, MatTextColumn, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet, MatButtonToggleGroup, MatButtonToggle, MatCheckbox, MatCheckboxRequiredValidator, MatSlider, MatSlideToggleRequiredValidator, MatSlideToggle, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, MatCalendar, MatCalendarBody, MatDatepicker, MatDatepickerContent, MatDatepickerInput, MatDatepickerToggle, MatDatepickerToggleIcon, MatMonthView, MatYearView, MatMultiYearView, MatCalendarHeader, MatDateRangeInput, MatStartDate, MatEndDate, MatDateRangePicker, MatDatetimepickerCalendar, MatDatetimepickerCalendarBody, MatDatetimepickerClock, MatDatetimepicker, MatDatetimepickerToggle, MatDatetimepickerInput, MatDatetimepickerContent, MatDatetimepickerMonthView, MatDatetimepickerYearView, ɵb, TranslateDirective, LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent, CollapsibleComponent, CollapseDirective, ListItemDirective, ListComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, MatBadge, TimeFilterButtonComponent,\n    TimeFilterFormComponent,\n    TimeFilterItemComponent,\n    TimeFilterListComponent,\n    TimeFilterListBindingDirective,\n    OgcFilterFormComponent,\n    OgcFilterButtonComponent,\n    OgcFilterSelectionComponent,\n    OgcFilterableFormComponent,\n    OgcFilterableItemComponent,\n    OgcFilterableListComponent,\n    OgcFilterableListBindingDirective,\n    SpatialFilterTypeComponent,\n    SpatialFilterListComponent,\n    SpatialFilterItemComponent,\n    OgcFilterTimeComponent,\n    OgcFilterTimeSliderComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, KeyValuePipe$1, FilterableDataSourcePipe]);\nɵɵsetComponentScope(SpatialFilterItemComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName, MatAutocomplete, MatAutocompleteTrigger, MatAutocompleteOrigin, CdkScrollable, MatOption, MatOptgroup, Dir, MatIcon, MatButton, MatAnchor, MatTabGroup, MatTabLabel, MatTab, MatTabNav, MatTabLink, MatTabContent, MatRadioGroup, MatRadioButton, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatTable, MatHeaderCellDef, MatHeaderRowDef, MatColumnDef, MatCellDef, MatRowDef, MatFooterCellDef, MatFooterRowDef, MatHeaderCell, MatCell, MatFooterCell, MatHeaderRow, MatRow, MatFooterRow, MatNoDataRow, MatTextColumn, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet, MatButtonToggleGroup, MatButtonToggle, MatCheckbox, MatCheckboxRequiredValidator, MatSlider, MatSlideToggleRequiredValidator, MatSlideToggle, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, MatCalendar, MatCalendarBody, MatDatepicker, MatDatepickerContent, MatDatepickerInput, MatDatepickerToggle, MatDatepickerToggleIcon, MatMonthView, MatYearView, MatMultiYearView, MatCalendarHeader, MatDateRangeInput, MatStartDate, MatEndDate, MatDateRangePicker, MatDatetimepickerCalendar, MatDatetimepickerCalendarBody, MatDatetimepickerClock, MatDatetimepicker, MatDatetimepickerToggle, MatDatetimepickerInput, MatDatetimepickerContent, MatDatetimepickerMonthView, MatDatetimepickerYearView, ɵb, TranslateDirective, LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent, CollapsibleComponent, CollapseDirective, ListItemDirective, ListComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, MatBadge, TimeFilterButtonComponent,\n    TimeFilterFormComponent,\n    TimeFilterItemComponent,\n    TimeFilterListComponent,\n    TimeFilterListBindingDirective,\n    OgcFilterFormComponent,\n    OgcFilterButtonComponent,\n    OgcFilterSelectionComponent,\n    OgcFilterableFormComponent,\n    OgcFilterableItemComponent,\n    OgcFilterableListComponent,\n    OgcFilterableListBindingDirective,\n    SpatialFilterTypeComponent,\n    SpatialFilterListComponent,\n    SpatialFilterItemComponent,\n    OgcFilterTimeComponent,\n    OgcFilterTimeSliderComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, KeyValuePipe$1, FilterableDataSourcePipe]);\nɵɵsetComponentScope(OgcFilterTimeComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, ɵangular_packages_forms_forms_y, NgSelectOption, ɵangular_packages_forms_forms_x, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, NgModel, NgModelGroup, NgForm, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName, MatAutocomplete, MatAutocompleteTrigger, MatAutocompleteOrigin, CdkScrollable, MatOption, MatOptgroup, Dir, MatIcon, MatButton, MatAnchor, MatTabGroup, MatTabLabel, MatTab, MatTabNav, MatTabLink, MatTabContent, MatRadioGroup, MatRadioButton, _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuContent, MatTable, MatHeaderCellDef, MatHeaderRowDef, MatColumnDef, MatCellDef, MatRowDef, MatFooterCellDef, MatFooterRowDef, MatHeaderCell, MatCell, MatFooterCell, MatHeaderRow, MatRow, MatFooterRow, MatNoDataRow, MatTextColumn, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet, MatButtonToggleGroup, MatButtonToggle, MatCheckbox, MatCheckboxRequiredValidator, MatSlider, MatSlideToggleRequiredValidator, MatSlideToggle, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatList, MatNavList, MatListItem, MatListAvatarCssMatStyler, MatLine, MatListIconCssMatStyler, MatListSubheaderCssMatStyler, MatPseudoCheckbox, MatSelectionList, MatListOption, MatDivider, MatTooltip, TooltipComponent, MatCalendar, MatCalendarBody, MatDatepicker, MatDatepickerContent, MatDatepickerInput, MatDatepickerToggle, MatDatepickerToggleIcon, MatMonthView, MatYearView, MatMultiYearView, MatCalendarHeader, MatDateRangeInput, MatStartDate, MatEndDate, MatDateRangePicker, MatDatetimepickerCalendar, MatDatetimepickerCalendarBody, MatDatetimepickerClock, MatDatetimepicker, MatDatetimepickerToggle, MatDatetimepickerInput, MatDatetimepickerContent, MatDatetimepickerMonthView, MatDatetimepickerYearView, ɵb, TranslateDirective, LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent, CollapsibleComponent, CollapseDirective, ListItemDirective, ListComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, MatBadge, TimeFilterButtonComponent,\n    TimeFilterFormComponent,\n    TimeFilterItemComponent,\n    TimeFilterListComponent,\n    TimeFilterListBindingDirective,\n    OgcFilterFormComponent,\n    OgcFilterButtonComponent,\n    OgcFilterSelectionComponent,\n    OgcFilterableFormComponent,\n    OgcFilterableItemComponent,\n    OgcFilterableListComponent,\n    OgcFilterableListBindingDirective,\n    SpatialFilterTypeComponent,\n    SpatialFilterListComponent,\n    SpatialFilterItemComponent,\n    OgcFilterTimeComponent,\n    OgcFilterTimeSliderComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, KeyValuePipe$1, FilterableDataSourcePipe]);\n\nfunction ExportButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 1);\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 2);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.geo.download.action\"))(\"color\", ctx_r0.color);\n} }\nclass ExportButtonComponent {\n    constructor() {\n        this._color = 'primary';\n    }\n    get layer() {\n        return this._layer;\n    }\n    set layer(value) {\n        this._layer = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    get options() {\n        if (!this.layer) {\n            return;\n        }\n        return this.layer.dataSource.options;\n    }\n    layerIsExportable() {\n        var _a, _b;\n        if ((this.layer instanceof VectorLayer && this.layer.exportable === true) ||\n            (this.layer.dataSource.options.download && this.layer.dataSource.options.download.url) ||\n            (((_a = this.layer.options.workspace) === null || _a === void 0 ? void 0 : _a.enabled) &&\n                ((_b = this.layer.options.workspace) === null || _b === void 0 ? void 0 : _b.workspaceId) !== this.layer.id)) {\n            return true;\n        }\n        return false;\n    }\n}\nExportButtonComponent.ɵfac = function ExportButtonComponent_Factory(t) { return new (t || ExportButtonComponent)(); };\nExportButtonComponent.ɵcmp = ɵɵdefineComponent({ type: ExportButtonComponent, selectors: [[\"igo-export-button\"]], inputs: { layer: \"layer\", color: \"color\" }, decls: 1, vars: 1, consts: [[\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\"], [\"svgIcon\", \"file-export\"]], template: function ExportButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, ExportButtonComponent_button_0_Template, 3, 4, \"button\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.layerIsExportable());\n    } }, directives: [NgIf, MatButton, MatTooltip, MatIcon], pipes: [TranslatePipe], styles: [\"\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ExportButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-export-button',\n                templateUrl: './export-button.component.html',\n                styleUrls: ['./export-button.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { layer: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\nclass ExportError extends Error {\n}\nclass ExportInvalidFileError extends ExportError {\n    constructor() {\n        super('Invalid file');\n        Object.setPrototypeOf(this, ExportInvalidFileError.prototype);\n    }\n}\nclass ExportNothingToExportError extends ExportError {\n    constructor() {\n        super('Nothing to export');\n        Object.setPrototypeOf(this, ExportNothingToExportError.prototype);\n    }\n}\n\nfunction handleFileExportError(error, messageService, languageService) {\n    if (error instanceof ExportNothingToExportError) {\n        handleNothingToExportError(messageService, languageService);\n        return;\n    }\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.export.failed.title');\n    const message = translate.instant('igo.geo.export.failed.text');\n    messageService.error(message, title);\n}\nfunction handleFileExportSuccess(messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.export.success.title');\n    const message = translate.instant('igo.geo.export.success.text');\n    messageService.success(message, title);\n}\nfunction handleNothingToExportError(messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.export.nothing.title');\n    const message = translate.instant('igo.geo.export.nothing.text');\n    messageService.error(message, title);\n}\n/**\n * Export array to CSV\n *\n * @param rows Array of arrays to export as CSV\n * @param separator Cell separator\n */\nfunction exportToCSV(rows, fileName, separator = ';') {\n    const lines = rows.map((row, index) => row.join(separator));\n    const csvContent = lines.join('\\n');\n    downloadContent(csvContent, 'text/csv;charset=utf-8', fileName);\n}\n/**\n * Return an array of values from an array of entities.\n *\n * @param entities Array of entities\n * @param scolumns Columns definition of the output data\n */\nfunction entitiesToRowData(entities, columns) {\n    return entities.map((entity) => {\n        return columns.map((column) => {\n            let valueAccessor;\n            if (column.renderer === undefined || column.renderer === EntityTableColumnRenderer.Default) {\n                valueAccessor = column.valueAccessor;\n            }\n            valueAccessor = valueAccessor ? valueAccessor : getEntityProperty;\n            return valueAccessor(entity, column.name);\n        });\n    });\n}\n\nconst ExportFormat = strEnum(['URL', 'GeoJSON', 'GML', 'GPX', 'KML', 'Shapefile', 'CSVcomma', 'CSVsemicolon']);\nconst EncodingFormat = strEnum(['UTF8', 'LATIN1']);\n\nclass ExportService {\n    constructor(config) {\n        this.config = config;\n        this.aggregateInComment = true;\n        this.ogreUrl = this.config.getConfig('importExport.url');\n        const gpxAggregateInComment = this.config.getConfig('importExport.gpxAggregateInComment');\n        if (gpxAggregateInComment !== undefined) {\n            this.aggregateInComment = gpxAggregateInComment;\n        }\n    }\n    export(olFeatures, format, title, encoding, projectionIn = 'EPSG:4326', projectionOut = 'EPSG:4326') {\n        const exportOlFeatures = this.generateFeature(olFeatures, format);\n        return this.exportAsync(exportOlFeatures, format, title, encoding, projectionIn, projectionOut);\n    }\n    generateFeature(olFeatures, format) {\n        if (format === ExportFormat.GPX && this.aggregateInComment) {\n            return this.generateAggratedFeature(olFeatures);\n        }\n        return olFeatures.map((olFeature$1) => {\n            const keys = olFeature$1\n                .getKeys()\n                .filter((key) => !key.startsWith('_'));\n            const properties = keys.reduce((acc, key) => {\n                acc[key] = olFeature$1.get(key);\n                return acc;\n            }, { geometry: olFeature$1.getGeometry() });\n            return new olFeature(properties);\n        });\n    }\n    generateAggratedFeature(olFeatures) {\n        return olFeatures.map((olFeature$1) => {\n            const keys = olFeature$1\n                .getKeys()\n                .filter((key) => !key.startsWith('_'));\n            let comment = '';\n            const properties = keys.reduce((acc, key) => {\n                if (key !== undefined && key !== 'geometry') {\n                    comment += key + ':' + olFeature$1.get(key) + '   \\r\\n';\n                }\n                acc[key] = olFeature$1.get(key);\n                return acc;\n            }, { geometry: olFeature$1.getGeometry() });\n            const newFeature = new olFeature(properties);\n            newFeature.set('name', olFeature$1.getId());\n            newFeature.set('cmt', comment);\n            return newFeature;\n        });\n    }\n    exportAsync(olFeatures, format, title, encoding, projectionIn, projectionOut) {\n        const doExport = (observer) => {\n            const nothingToExport = this.nothingToExport(olFeatures, format);\n            if (nothingToExport === true) {\n                observer.error(new ExportNothingToExportError());\n                return;\n            }\n            const ogreFormats = Object.keys(ExportService.ogreFormats);\n            if (ogreFormats.indexOf(format) >= 0) {\n                if (this.ogreUrl === undefined) {\n                    if (ExportService.noOgreFallbacks.indexOf(format) >= 0) {\n                        this.exportToFile(olFeatures, observer, format, title, projectionIn, projectionOut);\n                    }\n                    else {\n                        observer.error(new ExportInvalidFileError());\n                    }\n                    return;\n                }\n                this.exportWithOgre(olFeatures, observer, format, title, encoding, projectionIn, projectionOut);\n            }\n            else {\n                this.exportToFile(olFeatures, observer, format, title, projectionIn, projectionOut);\n            }\n        };\n        return new Observable(doExport);\n    }\n    exportToFile(olFeatures, observer, format, title, projectionIn, projectionOut) {\n        const olFormat = new olformat[format]();\n        const featuresText = olFormat.writeFeatures(olFeatures, {\n            dataProjection: projectionOut,\n            featureProjection: projectionIn,\n            featureType: 'feature',\n            featureNS: 'http://example.com/feature'\n        });\n        const fileName = `${title}.${format.toLowerCase()}`;\n        downloadContent(featuresText, 'text/plain;charset=utf-8', fileName);\n        observer.complete();\n    }\n    exportWithOgre(olFeatures, observer, format, title, encodingType, projectionIn, projectionOut) {\n        const featuresText = new GeoJSON().writeFeatures(olFeatures, {\n            dataProjection: projectionOut,\n            featureProjection: projectionIn,\n            featureType: 'feature',\n            featureNS: 'http://example.com/feature'\n        });\n        const url = `${this.ogreUrl}/convertJson`;\n        const form = document.createElement('form');\n        form.style.display = 'none';\n        document.body.appendChild(form);\n        form.setAttribute('method', 'post');\n        form.setAttribute('target', '_blank');\n        form.setAttribute('action', url);\n        if (encodingType === EncodingFormat.UTF8) {\n            form.acceptCharset = 'UTF-8';\n            form.enctype = 'application/x-www-form-urlencoded; charset=utf-8;';\n        }\n        else if (encodingType === EncodingFormat.LATIN1) {\n            const enctype = 'ISO-8859-1';\n            const encoding = document.createElement('input');\n            encoding.setAttribute('type', 'hidden');\n            encoding.setAttribute('name', 'encoding');\n            encoding.setAttribute('value', enctype);\n            form.appendChild(encoding);\n        }\n        if (format === 'CSVsemicolon') {\n            const options = document.createElement('input');\n            options.setAttribute('type', 'hidden');\n            options.setAttribute('name', 'lco');\n            options.setAttribute('value', 'SEPARATOR=SEMICOLON');\n            form.appendChild(options);\n        }\n        const geojsonField = document.createElement('input');\n        geojsonField.setAttribute('type', 'hidden');\n        geojsonField.setAttribute('name', 'json');\n        geojsonField.setAttribute('value', featuresText);\n        form.appendChild(geojsonField);\n        const outputNameField = document.createElement('input');\n        let outputName = format === 'Shapefile'\n            ? `${title}.zip`\n            : `${title}.${format.toLowerCase()}`;\n        if (format === 'CSVcomma' || format === 'CSVsemicolon') {\n            outputName = `${title}.csv`;\n        }\n        outputName = outputName.replace(' ', '_');\n        outputName = outputName.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n        outputNameField.setAttribute('type', 'hidden');\n        outputNameField.setAttribute('name', 'outputName');\n        outputNameField.setAttribute('value', outputName);\n        form.appendChild(outputNameField);\n        let ogreFormat = ExportService.ogreFormats[format];\n        if (format === 'CSVcomma' || format === 'CSVsemicolon') {\n            ogreFormat = 'CSV';\n        }\n        const outputFormatField = document.createElement('input');\n        outputFormatField.setAttribute('type', 'hidden');\n        outputFormatField.setAttribute('name', 'format');\n        outputFormatField.setAttribute('value', ogreFormat);\n        form.appendChild(outputFormatField);\n        form.submit();\n        document.body.removeChild(form);\n        observer.complete();\n    }\n    nothingToExport(olFeatures, format) {\n        if (olFeatures.length === 0) {\n            return true;\n        }\n        if (format === 'GPX') {\n            const pointOrLine = olFeatures.find(olFeature => {\n                return (['Point', 'LineString', 'MultiLineString'].indexOf(olFeature.getGeometry().getType()) >=\n                    0);\n            });\n            return pointOrLine === undefined;\n        }\n        return false;\n    }\n}\nExportService.ogreFormats = {\n    GML: 'gml',\n    GPX: 'gpx',\n    KML: 'kml',\n    Shapefile: 'ESRI Shapefile',\n    CSVcomma: 'CSVcomma',\n    CSVsemicolon: 'CSVsemicolon'\n};\nExportService.noOgreFallbacks = ['GML', 'GPX', 'KML'];\nExportService.ɵfac = function ExportService_Factory(t) { return new (t || ExportService)(ɵɵinject(ConfigService)); };\nExportService.ɵprov = ɵɵdefineInjectable({ token: ExportService, factory: ExportService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ExportService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ConfigService }]; }, null); })();\n\nclass ImportError extends Error {\n}\nclass ImportInvalidFileError extends ImportError {\n    constructor() {\n        super('Invalid file');\n        Object.setPrototypeOf(this, ImportInvalidFileError.prototype);\n    }\n}\nclass ImportUnreadableFileError extends ImportError {\n    constructor() {\n        super('Failed to read file');\n        Object.setPrototypeOf(this, ImportUnreadableFileError.prototype);\n    }\n}\nclass ImportNothingToImportError extends ImportError {\n    constructor() {\n        super('Nothing to import');\n        Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n    }\n}\nclass ImportSizeError extends ImportError {\n    constructor() {\n        super('File is too large');\n        Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n    }\n}\nclass ImportSRSError extends ImportError {\n    constructor() {\n        super('Invalid SRS definition');\n        Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n    }\n}\n\nfunction addLayerAndFeaturesToMap(features, map, layerTitle) {\n    const olFeatures = features.map((feature) => featureToOl(feature, map.projection));\n    const r = Math.floor(Math.random() * 255);\n    const g = Math.floor(Math.random() * 255);\n    const b = Math.floor(Math.random() * 255);\n    const stroke = new Stroke({\n        color: [r, g, b, 1],\n        width: 2\n    });\n    const fill = new Fill({\n        color: [r, g, b, 0.4]\n    });\n    const sourceOptions = {\n        type: 'vector',\n        queryable: true\n    };\n    const source = new FeatureDataSource(sourceOptions);\n    source.ol.addFeatures(olFeatures);\n    const layer = new VectorLayer({\n        title: layerTitle,\n        source,\n        style: new Style({\n            stroke,\n            fill,\n            image: new Circle({\n                radius: 5,\n                stroke,\n                fill\n            })\n        })\n    });\n    map.addLayer(layer);\n    moveToOlFeatures(map, olFeatures);\n    return layer;\n}\nfunction addLayerAndFeaturesStyledToMap(features, map, layerTitle, styleListService, styleService) {\n    const olFeatures = features.map((feature) => featureToOl(feature, map.projection));\n    let style;\n    let distance;\n    if (styleListService.getStyleList(layerTitle.toString() + '.styleByAttribute')) {\n        const styleByAttribute = styleListService.getStyleList(layerTitle.toString() + '.styleByAttribute');\n        style = feature => {\n            return styleService.createStyleByAttribute(feature, styleByAttribute);\n        };\n    }\n    else if (styleListService.getStyleList(layerTitle.toString() + '.clusterStyle')) {\n        const clusterParam = styleListService.getStyleList(layerTitle.toString() + '.clusterParam');\n        distance = styleListService.getStyleList(layerTitle.toString() + '.distance');\n        const baseStyle = styleService.createStyle(styleListService.getStyleList(layerTitle.toString() + '.clusterStyle'));\n        style = feature => {\n            return styleService.createClusterStyle(feature, clusterParam, baseStyle);\n        };\n    }\n    else if (styleListService.getStyleList(layerTitle.toString() + '.style')) {\n        style = styleService.createStyle(styleListService.getStyleList(layerTitle.toString() + '.style'));\n    }\n    else if (styleListService.getStyleList('default.clusterStyle') &&\n        features[0].geometry.type === 'Point') {\n        const clusterParam = styleListService.getStyleList('default.clusterParam');\n        distance = styleListService.getStyleList('default.distance');\n        const baseStyle = styleService.createStyle(styleListService.getStyleList('default.clusterStyle'));\n        style = feature => {\n            return styleService.createClusterStyle(feature, clusterParam, baseStyle);\n        };\n    }\n    else {\n        style = styleService.createStyle(styleListService.getStyleList('default.style'));\n    }\n    let source;\n    if (styleListService.getStyleList(layerTitle.toString() + '.clusterStyle')) {\n        const sourceOptions = {\n            distance,\n            type: 'cluster',\n            queryable: true\n        };\n        source = new ClusterDataSource(sourceOptions);\n        source.ol.source.addFeatures(olFeatures);\n    }\n    else if (styleListService.getStyleList(layerTitle.toString())) {\n        const sourceOptions = {\n            type: 'vector',\n            queryable: true\n        };\n        source = new FeatureDataSource(sourceOptions);\n        source.ol.addFeatures(olFeatures);\n    }\n    else if (styleListService.getStyleList('default.clusterStyle') &&\n        features[0].geometry.type === 'Point') {\n        const sourceOptions = {\n            distance,\n            type: 'cluster',\n            queryable: true\n        };\n        source = new ClusterDataSource(sourceOptions);\n        source.ol.source.addFeatures(olFeatures);\n    }\n    else {\n        const sourceOptions = {\n            type: 'vector',\n            queryable: true\n        };\n        source = new FeatureDataSource(sourceOptions);\n        source.ol.addFeatures(olFeatures);\n    }\n    const layer = new VectorLayer({\n        title: layerTitle,\n        source,\n        style\n    });\n    map.addLayer(layer);\n    moveToOlFeatures(map, olFeatures);\n    return layer;\n}\nfunction handleFileImportSuccess(file, features, map, messageService, languageService, styleListService, styleService) {\n    if (features.length === 0) {\n        handleNothingToImportError(file, messageService, languageService);\n        return;\n    }\n    const layerTitle = computeLayerTitleFromFile(file);\n    if (!styleListService) {\n        addLayerAndFeaturesToMap(features, map, layerTitle);\n    }\n    else {\n        addLayerAndFeaturesStyledToMap(features, map, layerTitle, styleListService, styleService);\n    }\n    const translate = languageService.translate;\n    const messageTitle = translate.instant('igo.geo.dropGeoFile.success.title');\n    const message = translate.instant('igo.geo.dropGeoFile.success.text', {\n        value: layerTitle\n    });\n    messageService.success(message, messageTitle);\n}\nfunction handleFileImportError(file, error, messageService, languageService, sizeMb) {\n    sizeMb = sizeMb ? sizeMb : 30;\n    const errMapping = {\n        'Invalid file': handleInvalidFileImportError,\n        'File is too large': handleSizeFileImportError,\n        'Failed to read file': handleUnreadbleFileImportError,\n        'Invalid SRS definition': handleSRSImportError\n    };\n    errMapping[error.message](file, error, messageService, languageService, sizeMb);\n}\nfunction handleInvalidFileImportError(file, error, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.dropGeoFile.invalid.title');\n    const message = translate.instant('igo.geo.dropGeoFile.invalid.text', {\n        value: file.name,\n        mimeType: file.type\n    });\n    messageService.error(message, title);\n}\nfunction handleUnreadbleFileImportError(file, error, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.dropGeoFile.unreadable.title');\n    const message = translate.instant('igo.geo.dropGeoFile.unreadable.text', {\n        value: file.name\n    });\n    messageService.error(message, title);\n}\nfunction handleSizeFileImportError(file, error, messageService, languageService, sizeMb) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.dropGeoFile.tooLarge.title');\n    const message = translate.instant('igo.geo.dropGeoFile.tooLarge.text', {\n        value: file.name,\n        size: sizeMb\n    });\n    messageService.error(message, title);\n}\nfunction handleNothingToImportError(file, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.dropGeoFile.empty.title');\n    const message = translate.instant('igo.geo.dropGeoFile.empty.text', {\n        value: file.name,\n        mimeType: file.type\n    });\n    messageService.error(message, title);\n}\nfunction handleSRSImportError(file, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.dropGeoFile.invalidSRS.title');\n    const message = translate.instant('igo.geo.dropGeoFile.invalidSRS.text', {\n        value: file.name,\n        mimeType: file.type\n    });\n    messageService.error(message, title);\n}\nfunction getFileExtension(file) {\n    return file.name\n        .split('.')\n        .pop()\n        .toLowerCase();\n}\nfunction computeLayerTitleFromFile(file) {\n    return file.name.substr(0, file.name.lastIndexOf('.'));\n}\n\nclass ImportService {\n    constructor(http, config) {\n        this.http = http;\n        this.config = config;\n        this.ogreUrl = this.config.getConfig('importExport.url');\n        const configFileSizeMb = this.config.getConfig('importExport.clientSideFileSizeMaxMb');\n        this.clientSideFileSizeMax = (configFileSizeMb ? configFileSizeMb : 30) * Math.pow(1024, 2);\n    }\n    import(file, projectionIn = 'EPSG:4326', projectionOut = 'EPSG:4326') {\n        return this.importAsync(file, projectionIn, projectionOut);\n    }\n    getFileImporter(file) {\n        const extension = getFileExtension(file);\n        const mimeType = file.type;\n        const allowedMimeTypes = [\n            ...ImportService.allowedMimeTypes,\n            ...ImportService.allowedZipMimeTypes\n        ];\n        const allowedExtensions = ImportService.allowedExtensions;\n        if (allowedMimeTypes.indexOf(mimeType) < 0 &&\n            allowedExtensions.indexOf(extension) < 0) {\n            return undefined;\n        }\n        else if (mimeType === 'application/json' ||\n            ['json', 'geojson', 'kml', 'gpx'].indexOf(extension) >= 0) {\n            return this.importFile;\n        }\n        else if (this.ogreUrl !== undefined) {\n            return this.importFileWithOgre;\n        }\n        return undefined;\n    }\n    importAsync(file, projectionIn, projectionOut) {\n        const doImport = (observer) => {\n            if (file.size >= this.clientSideFileSizeMax) {\n                observer.error(new ImportSizeError());\n                return;\n            }\n            const importer = this.getFileImporter(file);\n            if (importer === undefined) {\n                observer.error(new ImportInvalidFileError());\n                return;\n            }\n            importer.call(this, file, observer, projectionIn, projectionOut);\n        };\n        return new Observable(doImport);\n    }\n    importFile(file, observer, projectionIn, projectionOut) {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n            try {\n                const features = this.parseFeaturesFromFile(file, event.target.result, projectionIn, projectionOut);\n                observer.next(features);\n            }\n            catch (e) {\n                observer.error(new ImportUnreadableFileError());\n            }\n            observer.complete();\n        };\n        reader.onerror = evt => {\n            observer.error(new ImportUnreadableFileError());\n        };\n        reader.readAsText(file, 'UTF-8');\n    }\n    importFileWithOgre(file, observer, projectionIn, projectionOut) {\n        const url = `${this.ogreUrl}/convert`;\n        const formData = new FormData();\n        formData.append('upload', file);\n        formData.append('sourceSrs', projectionIn);\n        formData.append('targetSrs', projectionOut);\n        formData.append('formatOutput', 'GEOJSON');\n        formData.append('skipFailures', '');\n        this.http.post(url, formData, { headers: new HttpHeaders() }).subscribe((response) => {\n            if (response === null) {\n                observer.error(new ImportUnreadableFileError());\n                return;\n            }\n            const errors = response.errors || [];\n            if (errors.length > 0) {\n                observer.error(new ImportUnreadableFileError());\n            }\n            else {\n                const features = this.parseFeaturesFromGeoJSON(file, response, projectionOut);\n                observer.next(features);\n                observer.complete();\n            }\n        }, (error) => {\n            error.error.caught = true;\n            const errMsg = error.error.msg || '';\n            if (errMsg === 'No valid files found') {\n                observer.error(new ImportInvalidFileError());\n            }\n            else if (errMsg && errMsg.startWith('ERROR 1: Failed to process SRS definition')) {\n                observer.error(new ImportSRSError());\n            }\n            else {\n                observer.error(new ImportUnreadableFileError());\n            }\n        });\n    }\n    parseFeaturesFromFile(file, data, projectionIn, projectionOut) {\n        const extension = getFileExtension(file);\n        const mimeType = file.type;\n        const GeoJSON$1 = new GeoJSON();\n        let format;\n        if (mimeType === 'application/vnd.google-earth.kml+xml') {\n            format = new KML();\n        }\n        else if (mimeType === 'application/gml+xml') {\n            format = new GML();\n        }\n        else if (mimeType === 'application/gpx+xml') {\n            format = new GPX();\n        }\n        else {\n            switch (extension) {\n                case 'kml':\n                    format = new KML();\n                    break;\n                case 'gpx':\n                    format = new GPX();\n                    break;\n                case 'gml':\n                    format = new GML();\n                    break;\n                default:\n                    format = GeoJSON$1;\n                    break;\n            }\n        }\n        const olFeatures = format.readFeatures(data, {\n            dataProjection: projectionIn,\n            featureProjection: projectionOut\n        });\n        const features = olFeatures.map((olFeature) => {\n            return Object.assign(GeoJSON$1.writeFeatureObject(olFeature), {\n                projection: projectionOut,\n                meta: {\n                    id: uuid(),\n                    title: computeLayerTitleFromFile(file)\n                }\n            });\n        });\n        return features;\n    }\n    parseFeaturesFromGeoJSON(file, data, projectionOut) {\n        const olFormat = new GeoJSON();\n        const olFeatures = olFormat.readFeatures(data);\n        const features = olFeatures.map((olFeature) => {\n            return Object.assign(olFormat.writeFeatureObject(olFeature), {\n                projection: projectionOut,\n                meta: {\n                    id: uuid(),\n                    title: computeLayerTitleFromFile(file)\n                }\n            });\n        });\n        return features;\n    }\n}\nImportService.allowedMimeTypes = [\n    'application/gml+xml',\n    'application/vnd.google-earth.kml+xml',\n    'application/gpx+xml',\n    'application/json'\n];\nImportService.allowedZipMimeTypes = [\n    'application/zip',\n    'application/x-zip-compressed',\n    'application/x-zip'\n];\nImportService.allowedExtensions = ['geojson', 'kml', 'gpx', 'json', 'gml'];\nImportService.ɵfac = function ImportService_Factory(t) { return new (t || ImportService)(ɵɵinject(HttpClient), ɵɵinject(ConfigService)); };\nImportService.ɵprov = ɵɵdefineInjectable({ token: ImportService, factory: ImportService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ImportService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: HttpClient }, { type: ConfigService }]; }, null); })();\n\nclass StyleListService {\n    constructor(injector) {\n        this.injector = injector;\n        this.styleList = {};\n    }\n    /**\n     * Use to get the data found in styleList file\n     */\n    getStyleList(key) {\n        return ObjectUtils.resolve(this.styleList, key);\n    }\n    /**\n     * This method loads \"[path]\" to get all styleList's variables\n     */\n    load(options) {\n        const baseStyleList = options.default || {};\n        if (!options.path) {\n            this.styleList = baseStyleList;\n            return true;\n        }\n        const http = this.injector.get(HttpClient);\n        return new Promise((resolve, _reject) => {\n            http\n                .get(options.path)\n                .pipe(catchError((error) => {\n                console.log(`StyleList file ${options.path} could not be read`);\n                resolve(true);\n                return throwError(error.error || 'Server error');\n            }))\n                .subscribe((styleListResponse) => {\n                this.styleList = ObjectUtils.mergeDeep(baseStyleList, styleListResponse);\n                resolve(true);\n            });\n        });\n    }\n}\nStyleListService.ɵfac = function StyleListService_Factory(t) { return new (t || StyleListService)(ɵɵinject(Injector)); };\nStyleListService.ɵprov = ɵɵdefineInjectable({ token: StyleListService, factory: StyleListService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(StyleListService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: Injector }]; }, null); })();\n\nfunction ImportExportComponent_form_8_mat_option_7_p_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\", 16);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const projection_r6 = ɵɵnextContext().$implicit;\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ɵɵpipeBind2(2, 1, \"igo.geo.importExportForm.projections.\" + projection_r6.translateKey, projection_r6));\n} }\nfunction ImportExportComponent_form_8_mat_option_7_p_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\", 16);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const projection_r6 = ɵɵnextContext().$implicit;\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(projection_r6.alias);\n} }\nfunction ImportExportComponent_form_8_mat_option_7_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-option\", 14);\n    ɵɵlistener(\"click\", function ImportExportComponent_form_8_mat_option_7_Template_mat_option_click_0_listener($event) { ɵɵrestoreView(_r12); return $event.stopPropagation(); });\n    ɵɵtemplate(1, ImportExportComponent_form_8_mat_option_7_p_1_Template, 3, 4, \"p\", 15);\n    ɵɵtemplate(2, ImportExportComponent_form_8_mat_option_7_p_2_Template, 2, 1, \"p\", 15);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const projection_r6 = ctx.$implicit;\n    ɵɵproperty(\"value\", projection_r6);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", projection_r6.translateKey);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !projection_r6.translateKey);\n} }\nfunction ImportExportComponent_form_8_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"form\", 5);\n    ɵɵelementStart(1, \"div\", 6);\n    ɵɵelementStart(2, \"mat-form-field\");\n    ɵɵelementStart(3, \"mat-label\");\n    ɵɵtext(4);\n    ɵɵpipe(5, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(6, \"mat-select\", 7);\n    ɵɵlistener(\"valueChange\", function ImportExportComponent_form_8_Template_mat_select_valueChange_6_listener($event) { ɵɵrestoreView(_r14); const ctx_r13 = ɵɵnextContext(); return ctx_r13.inputProj = $event; });\n    ɵɵtemplate(7, ImportExportComponent_form_8_mat_option_7_Template, 3, 3, \"mat-option\", 8);\n    ɵɵpipe(8, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(9, \"div\", 9);\n    ɵɵpipe(10, \"translate\");\n    ɵɵpipe(11, \"translate\");\n    ɵɵelementStart(12, \"button\", 10);\n    ɵɵlistener(\"click\", function ImportExportComponent_form_8_Template_button_click_12_listener() { ɵɵrestoreView(_r14); const _r5 = ɵɵreference(19); return _r5.click(); });\n    ɵɵpipe(13, \"async\");\n    ɵɵtext(14);\n    ɵɵpipe(15, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelement(16, \"igo-spinner\", 11);\n    ɵɵpipe(17, \"async\");\n    ɵɵelementStart(18, \"input\", 12, 13);\n    ɵɵlistener(\"click\", function ImportExportComponent_form_8_Template_input_click_18_listener() { ɵɵrestoreView(_r14); const _r5 = ɵɵreference(19); return _r5.value = null; })(\"change\", function ImportExportComponent_form_8_Template_input_change_18_listener($event) { ɵɵrestoreView(_r14); const ctx_r17 = ɵɵnextContext(); return ctx_r17.importFiles($event.target.files); });\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"formGroup\", ctx_r0.importForm);\n    ɵɵadvance(4);\n    ɵɵtextInterpolate(ɵɵpipeBind1(5, 10, \"igo.geo.importExportForm.importProjPlaceholder\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"value\", ctx_r0.inputProj);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(8, 12, ctx_r0.projections$));\n    ɵɵadvance(2);\n    ɵɵproperty(\"matTooltip\", ctx_r0.importForm.invalid ? ɵɵpipeBind1(10, 14, \"igo.geo.importExportForm.projections.choose\") : ɵɵpipeBind1(11, 16, \"igo.geo.importExportForm.importButton\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"disabled\", ctx_r0.importForm.invalid || ɵɵpipeBind1(13, 18, ctx_r0.loading$));\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(15, 20, \"igo.geo.importExportForm.importButton\"), \" \");\n    ɵɵadvance(2);\n    ɵɵproperty(\"shown\", ɵɵpipeBind1(17, 22, ctx_r0.loading$));\n    ɵɵadvance(2);\n    ɵɵstyleProp(\"display\", \"none\");\n} }\nconst _c0$f = function (a0) { return { size: a0 }; };\nfunction ImportExportComponent_section_9_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"section\", 17);\n    ɵɵelementStart(1, \"h4\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"ul\");\n    ɵɵelementStart(5, \"li\");\n    ɵɵtext(6);\n    ɵɵpipe(7, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(8, \"li\");\n    ɵɵtext(9);\n    ɵɵpipe(10, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(11, \"li\");\n    ɵɵtext(12);\n    ɵɵpipe(13, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(3, 4, \"igo.geo.importExportForm.importClarifications\"));\n    ɵɵadvance(4);\n    ɵɵtextInterpolate(ɵɵpipeBind2(7, 6, \"igo.geo.importExportForm.importSizeMax\", ɵɵpureFunction1(13, _c0$f, ctx_r1.fileSizeMb)));\n    ɵɵadvance(3);\n    ɵɵtextInterpolate(ɵɵpipeBind1(10, 9, \"igo.geo.importExportForm.importFormatAuthorized\"));\n    ɵɵadvance(3);\n    ɵɵtextInterpolate(ɵɵpipeBind1(13, 11, \"igo.geo.importExportForm.importShpZip\"));\n} }\nfunction ImportExportComponent_section_10_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"section\", 17);\n    ɵɵelementStart(1, \"h4\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(3, 1, \"igo.geo.importExportForm.exportNoLayersExportable\"));\n} }\nfunction ImportExportComponent_form_12_span_9_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"span\", 27);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r18 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate2(\" (+\", ctx_r18.layers.length - 1, \" \", ɵɵpipeBind1(2, 2, (ctx_r18.layers == null ? null : ctx_r18.layers.length) === 2 ? \"igo.geo.importExportForm.other\" : \"igo.geo.importExportForm.others\"), \") \");\n} }\nfunction ImportExportComponent_form_12_mat_option_10_mat_slide_toggle_4_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-slide-toggle\", 30);\n    ɵɵlistener(\"click\", function ImportExportComponent_form_12_mat_option_10_mat_slide_toggle_4_Template_mat_slide_toggle_click_0_listener($event) { ɵɵrestoreView(_r28); const layer_r25 = ɵɵnextContext().$implicit; const ctx_r27 = ɵɵnextContext(2); return ctx_r27.onlySelectedClick($event, layer_r25.id); })(\"checked\", function ImportExportComponent_form_12_mat_option_10_mat_slide_toggle_4_Template_mat_slide_toggle_checked_0_listener() { ɵɵrestoreView(_r28); const layer_r25 = ɵɵnextContext().$implicit; const ctx_r30 = ɵɵnextContext(2); return ctx_r30.inLayersIdToExportSelectionOnly(layer_r25); })(\"change\", function ImportExportComponent_form_12_mat_option_10_mat_slide_toggle_4_Template_mat_slide_toggle_change_0_listener($event) { ɵɵrestoreView(_r28); const layer_r25 = ɵɵnextContext().$implicit; const ctx_r32 = ɵɵnextContext(2); return ctx_r32.onlySelected($event, layer_r25.id); });\n    ɵɵelementStart(1, \"small\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"labelPosition\", \"after\");\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(3, 2, \"igo.geo.importExportForm.exportSelectedFeature\"));\n} }\nconst _c1$9 = function (a0) { return { \"igo-export-layer-mat-option\": a0 }; };\nfunction ImportExportComponent_form_12_mat_option_10_Template(rf, ctx) { if (rf & 1) {\n    const _r35 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-option\", 28);\n    ɵɵlistener(\"click\", function ImportExportComponent_form_12_mat_option_10_Template_mat_option_click_0_listener($event) { ɵɵrestoreView(_r35); return $event.stopPropagation(); });\n    ɵɵelementStart(1, \"p\", 16);\n    ɵɵtext(2);\n    ɵɵelementEnd();\n    ɵɵelementStart(3, \"p\", 16);\n    ɵɵtemplate(4, ImportExportComponent_form_12_mat_option_10_mat_slide_toggle_4_Template, 4, 4, \"mat-slide-toggle\", 29);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const layer_r25 = ctx.$implicit;\n    const ctx_r19 = ɵɵnextContext(2);\n    ɵɵproperty(\"ngClass\", ɵɵpureFunction1(4, _c1$9, ctx_r19.layerHasSelectedFeatures(layer_r25)))(\"value\", layer_r25.id);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(layer_r25.title);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r19.layerHasSelectedFeatures(layer_r25));\n} }\nfunction ImportExportComponent_form_12_ng_container_18_mat_option_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 2);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const format_r37 = ctx.$implicit;\n    ɵɵproperty(\"value\", format_r37.key);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.export.format.\" + format_r37.value), \" \");\n} }\nfunction ImportExportComponent_form_12_ng_container_18_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, ImportExportComponent_form_12_ng_container_18_mat_option_1_Template, 3, 4, \"mat-option\", 31);\n    ɵɵpipe(2, \"keyvalue\");\n    ɵɵpipe(3, \"async\");\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r20 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(2, 1, ɵɵpipeBind1(3, 3, ctx_r20.formats$)));\n} }\nfunction ImportExportComponent_form_12_mat_option_20_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 32);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, \"igo.geo.export.noFormat.title\"), \" \");\n} }\nfunction ImportExportComponent_form_12_div_22_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 6);\n    ɵɵelementStart(1, \"mat-form-field\");\n    ɵɵelement(2, \"input\", 33);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(2);\n    ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(3, 1, \"igo.geo.importExportForm.exportFileNamePlaceholder\"));\n} }\nfunction ImportExportComponent_form_12_div_23_ng_container_6_mat_option_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 2);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const encoding_r40 = ctx.$implicit;\n    ɵɵproperty(\"value\", encoding_r40.key);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.export.encoding.\" + encoding_r40.value), \" \");\n} }\nfunction ImportExportComponent_form_12_div_23_ng_container_6_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵtemplate(1, ImportExportComponent_form_12_div_23_ng_container_6_mat_option_1_Template, 3, 4, \"mat-option\", 31);\n    ɵɵpipe(2, \"keyvalue\");\n    ɵɵpipe(3, \"async\");\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r38 = ɵɵnextContext(3);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(2, 1, ɵɵpipeBind1(3, 3, ctx_r38.encodings$)));\n} }\nfunction ImportExportComponent_form_12_div_23_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 6);\n    ɵɵelementStart(1, \"mat-form-field\");\n    ɵɵelementStart(2, \"mat-label\");\n    ɵɵtext(3);\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(5, \"mat-select\", 34);\n    ɵɵtemplate(6, ImportExportComponent_form_12_div_23_ng_container_6_Template, 4, 5, \"ng-container\", 22);\n    ɵɵpipe(7, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r23 = ɵɵnextContext(2);\n    ɵɵadvance(3);\n    ɵɵtextInterpolate(ɵɵpipeBind1(4, 2, \"igo.geo.importExportForm.encodingPlaceholder\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngIf\", ɵɵpipeBind1(7, 4, ctx_r23.encodings$).length !== 0);\n} }\nfunction ImportExportComponent_form_12_div_24_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 35);\n    ɵɵelementStart(1, \"mat-slide-toggle\", 36);\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵproperty(\"labelPosition\", \"before\");\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(3, 2, \"igo.geo.importExportForm.exportFeatureInExtent\"), \" \");\n} }\nfunction ImportExportComponent_form_12_Template(rf, ctx) { if (rf & 1) {\n    const _r42 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"form\", 5);\n    ɵɵelementStart(1, \"div\", 6);\n    ɵɵelementStart(2, \"mat-form-field\");\n    ɵɵelementStart(3, \"mat-label\");\n    ɵɵtext(4);\n    ɵɵpipe(5, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(6, \"mat-select\", 18);\n    ɵɵlistener(\"valueChange\", function ImportExportComponent_form_12_Template_mat_select_valueChange_6_listener($event) { ɵɵrestoreView(_r42); const ctx_r41 = ɵɵnextContext(); return ctx_r41.layers = $event; });\n    ɵɵelementStart(7, \"mat-select-trigger\");\n    ɵɵtext(8);\n    ɵɵtemplate(9, ImportExportComponent_form_12_span_9_Template, 3, 4, \"span\", 19);\n    ɵɵelementEnd();\n    ɵɵtemplate(10, ImportExportComponent_form_12_mat_option_10_Template, 5, 6, \"mat-option\", 20);\n    ɵɵpipe(11, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(12, \"div\", 6);\n    ɵɵelementStart(13, \"mat-form-field\");\n    ɵɵelementStart(14, \"mat-label\");\n    ɵɵtext(15);\n    ɵɵpipe(16, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(17, \"mat-select\", 21);\n    ɵɵtemplate(18, ImportExportComponent_form_12_ng_container_18_Template, 4, 5, \"ng-container\", 22);\n    ɵɵpipe(19, \"async\");\n    ɵɵtemplate(20, ImportExportComponent_form_12_mat_option_20_Template, 3, 3, \"mat-option\", 23);\n    ɵɵpipe(21, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵtemplate(22, ImportExportComponent_form_12_div_22_Template, 4, 3, \"div\", 24);\n    ɵɵtemplate(23, ImportExportComponent_form_12_div_23_Template, 8, 6, \"div\", 24);\n    ɵɵtemplate(24, ImportExportComponent_form_12_div_24_Template, 4, 4, \"div\", 25);\n    ɵɵelementStart(25, \"div\", 26);\n    ɵɵelementStart(26, \"button\", 10);\n    ɵɵlistener(\"click\", function ImportExportComponent_form_12_Template_button_click_26_listener() { ɵɵrestoreView(_r42); const ctx_r43 = ɵɵnextContext(); return ctx_r43.handleExportFormSubmit(ctx_r43.form.value); });\n    ɵɵpipe(27, \"async\");\n    ɵɵtext(28);\n    ɵɵpipe(29, \"translate\");\n    ɵɵpipe(30, \"translate\");\n    ɵɵpipe(31, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelement(32, \"igo-spinner\", 11);\n    ɵɵpipe(33, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵproperty(\"formGroup\", ctx_r3.form);\n    ɵɵadvance(4);\n    ɵɵtextInterpolate(ɵɵpipeBind1(5, 15, \"igo.geo.importExportForm.exportLayerPlaceholder\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"value\", ctx_r3.layers);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ctx_r3.layers.length ? ctx_r3.getLayerTitleById(ctx_r3.layers[0]) : \"\", \" \");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r3.layers.length > 1);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(11, 17, ctx_r3.exportableLayers$));\n    ɵɵadvance(5);\n    ɵɵtextInterpolate(ɵɵpipeBind1(16, 19, \"igo.geo.importExportForm.exportFormatPlaceholder\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngIf\", ɵɵpipeBind1(19, 21, ctx_r3.formats$).length !== 0);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ɵɵpipeBind1(21, 23, ctx_r3.formats$).length === 0);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r3.forceNaming && ctx_r3.form.value.format !== \"URL\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r3.form.value.format === \"CSVcomma\" || ctx_r3.form.value.format === \"CSVsemicolon\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r3.form.value.format !== \"URL\");\n    ɵɵadvance(2);\n    ɵɵproperty(\"disabled\", !ctx_r3.form.valid || ɵɵpipeBind1(27, 25, ctx_r3.loading$));\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ctx_r3.form.value.format !== \"URL\" ? ɵɵpipeBind1(29, 27, \"igo.geo.importExportForm.exportButton\") : ctx_r3.form.value.layers.length > 1 ? ɵɵpipeBind1(30, 29, \"igo.geo.importExportForm.exportButtonLinks\") : ɵɵpipeBind1(31, 31, \"igo.geo.importExportForm.exportButtonLink\"), \" \");\n    ɵɵadvance(4);\n    ɵɵproperty(\"shown\", ɵɵpipeBind1(33, 33, ctx_r3.loading$));\n} }\nclass ImportExportComponent {\n    constructor(importService, exportService, languageService, messageService, styleListService, styleService, formBuilder, config, cdRef, storageService, downloadService) {\n        this.importService = importService;\n        this.exportService = exportService;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.styleListService = styleListService;\n        this.styleService = styleService;\n        this.formBuilder = formBuilder;\n        this.config = config;\n        this.cdRef = cdRef;\n        this.storageService = storageService;\n        this.downloadService = downloadService;\n        this.formats$ = new BehaviorSubject(undefined);\n        this.encodings$ = new BehaviorSubject(undefined);\n        this.exportableLayers$ = new BehaviorSubject([]);\n        this.loading$ = new BehaviorSubject(false);\n        this.forceNaming = false;\n        this.controlFormat = 'format';\n        this.espgCodeRegex = new RegExp('^\\\\d{4,6}');\n        this.projections$ = new BehaviorSubject([]);\n        this.popupChecked = false;\n        this.previousLayerSpecs$ = new BehaviorSubject(undefined);\n        this.selectFirstProj = false;\n        this._projectionsLimitations = {};\n        this.selectedMode = 'import';\n        this.selectMode = new EventEmitter();\n        this.exportOptions$ = new BehaviorSubject(undefined);\n        this.exportOptionsChange = new EventEmitter();\n        this.loadConfig();\n        this.buildForm();\n        this.computeProjections();\n    }\n    set projectionsLimitations(value) {\n        this._projectionsLimitations = value;\n        this.computeProjections();\n    }\n    get projectionsLimitations() {\n        return this._projectionsLimitations || {};\n    }\n    get layers() {\n        return this.form.get('layers').value;\n    }\n    set layers(value) {\n        this.form.patchValue({ layers: value });\n    }\n    get inputProj() {\n        return this.importForm.get('inputProj').value;\n    }\n    set inputProj(value) {\n        this.importForm.patchValue({ inputProj: value });\n    }\n    get popupAllowed() {\n        return this.storageService.get('importExportPopupAllowed') || false;\n    }\n    set popupAllowed(value) {\n        this.storageService.set('importExportPopupAllowed', value);\n    }\n    ngOnInit() {\n        this.layers$$ = this.map.layers$.subscribe((layers) => {\n            this.exportableLayers$.next(layers.filter((layer) => {\n                return ((layer instanceof VectorLayer && layer.exportable === true) ||\n                    (layer.dataSource.options.download &&\n                        layer.dataSource.options.download.url));\n            }));\n        });\n        const configFileSizeMb = this.config.getConfig('importExport.clientSideFileSizeMaxMb');\n        this.clientSideFileSizeMax =\n            (configFileSizeMb ? configFileSizeMb : 30) * Math.pow(1024, 2);\n        this.fileSizeMb = this.clientSideFileSizeMax / Math.pow(1024, 2);\n        this.exportOptions$$ = this.exportOptions$\n            .pipe(skipWhile((exportOptions) => !exportOptions))\n            .subscribe((exportOptions) => {\n            this.form.patchValue(exportOptions, { emitEvent: true });\n            if (exportOptions.layers) {\n                this.computeFormats(exportOptions.layers.map((l) => this.map.getLayerById(l)));\n            }\n        });\n        this.formLayer$$ = this.form\n            .get('format')\n            .valueChanges\n            .subscribe((format) => {\n            var _a;\n            const ogreFormats = Object.keys(ExportService.ogreFormats);\n            if (!this.popupChecked &&\n                ((_a = this.form.get('layers').value) === null || _a === void 0 ? void 0 : _a.length) > 1 &&\n                (ogreFormats.indexOf(format) >= 0 || format === ExportFormat.URL)) {\n                if (!this.handlePopup(true)) {\n                    this.form.patchValue({ format: undefined }, { emitEvent: false });\n                }\n            }\n        });\n        this.formLayer$$ = this.form\n            .get('layers')\n            .valueChanges.subscribe((layersId) => {\n            this.handlePreviousLayerSpecs();\n            const selectedLayers = layersId instanceof Array ? layersId : [layersId];\n            this.form.patchValue({ layers: selectedLayers }, { emitEvent: false });\n            const layers = selectedLayers.map((l) => this.map.getLayerById(l));\n            this.computeFormats(layers);\n            if (Object.keys(this.formats$.value).indexOf(this.form.value.format) ===\n                -1) {\n                this.form.patchValue({ format: undefined });\n            }\n            this.loading$.next(true);\n            const previousSpecs = [];\n            layers.forEach((layer) => {\n                if (layer instanceof VectorLayer &&\n                    layer.dataSource.ol.getFeatures().length === 0) {\n                    previousSpecs.push({\n                        id: layer.id,\n                        visible: layer.visible,\n                        opacity: layer.opacity,\n                        queryable: layer.queryable\n                    });\n                    layer.opacity = 0;\n                    layer.visible = true;\n                }\n            });\n            this.previousLayerSpecs$.next(previousSpecs);\n            setTimeout(() => {\n                this.loading$.next(false);\n            }, 500);\n        });\n        this.formats$$ = this.formats$\n            .pipe(skipWhile((formats) => !formats))\n            .subscribe((formats) => {\n            if (Object.keys(formats).length === 1) {\n                this.form.patchValue({ format: formats[Object.keys(formats)[0]] });\n            }\n        });\n        this.encodings$$ = this.encodings$\n            .pipe(skipWhile((encodings) => !encodings))\n            .subscribe((encodings) => {\n            if (Object.keys(encodings).length === 1) {\n                this.form.patchValue({ encoding: encodings[Object.keys(encodings)[0]] });\n            }\n        });\n        this.exportableLayers$$ = this.exportableLayers$\n            .pipe(skipWhile((layers) => !layers))\n            .subscribe((layers) => {\n            if (layers.length === 1) {\n                this.form.patchValue({ layers: layers[0].id });\n            }\n        });\n        this.form.controls[this.controlFormat].valueChanges.subscribe((format) => {\n            if (format === ExportFormat.CSVcomma || format === ExportFormat.CSVsemicolon) {\n                this.form.patchValue({ encoding: EncodingFormat.LATIN1 });\n            }\n            else {\n                this.form.patchValue({ encoding: EncodingFormat.UTF8 });\n            }\n            this.cdRef.detectChanges();\n        });\n        if (this.selectFirstProj) {\n            if (this.projections$.value.length === 0) {\n                this.importForm.patchValue({ inputProj: { translateKey: 'nad83', alias: 'NAD83', code: 'EPSG:4326', zone: '' } });\n            }\n            else {\n                this.importForm.patchValue({ inputProj: this.projections$.value[0] });\n            }\n        }\n        else {\n            this.importForm.patchValue({ inputProj: undefined });\n        }\n    }\n    computeProjectionsConstraints() {\n        const utmZone = this.projectionsLimitations.utmZone;\n        const mtmZone = this.projectionsLimitations.mtmZone;\n        this.projectionsConstraints = {\n            projFromConfig: this.projectionsLimitations.projFromConfig === false ? false : true,\n            nad83: this.projectionsLimitations.nad83 === false ? false : true,\n            wgs84: this.projectionsLimitations.wgs84 === false ? false : true,\n            webMercator: this.projectionsLimitations.webMercator === false ? false : true,\n            utm: this.projectionsLimitations.utm === false ? false : true,\n            mtm: this.projectionsLimitations.mtm === false ? false : true,\n            utmZone: {\n                minZone: utmZone && utmZone.minZone ? utmZone.minZone : 1,\n                maxZone: utmZone && utmZone.maxZone ? utmZone.maxZone : 60,\n            },\n            mtmZone: {\n                minZone: mtmZone && mtmZone.minZone ? mtmZone.minZone : 1,\n                maxZone: mtmZone && mtmZone.maxZone ? mtmZone.maxZone : 10,\n            }\n        };\n    }\n    computeProjections() {\n        this.computeProjectionsConstraints();\n        const projections = [];\n        if (this.projectionsConstraints.nad83) {\n            projections.push({ translateKey: 'nad83', alias: 'NAD83', code: 'EPSG:4269', zone: '' });\n        }\n        if (this.projectionsConstraints.wgs84) {\n            projections.push({ translateKey: 'wgs84', alias: 'WGS84', code: 'EPSG:4326', zone: '' });\n        }\n        if (this.projectionsConstraints.webMercator) {\n            projections.push({ translateKey: 'webMercator', alias: 'Web Mercator', code: 'EPSG:3857', zone: '' });\n        }\n        if (this.projectionsConstraints.mtm) {\n            // all mtm zones\n            const minZone = this.projectionsConstraints.mtmZone.minZone;\n            const maxZone = this.projectionsConstraints.mtmZone.maxZone;\n            for (let mtmZone = minZone; mtmZone <= maxZone; mtmZone++) {\n                const code = mtmZone < 10 ? `EPSG:3218${mtmZone}` : `EPSG:321${80 + mtmZone}`;\n                projections.push({ translateKey: 'mtm', alias: `MTM ${mtmZone}`, code, zone: `${mtmZone}` });\n            }\n        }\n        if (this.projectionsConstraints.utm) {\n            // all utm zones\n            const minZone = this.projectionsConstraints.utmZone.minZone;\n            const maxZone = this.projectionsConstraints.utmZone.maxZone;\n            for (let utmZone = minZone; utmZone <= maxZone; utmZone++) {\n                const code = utmZone < 10 ? `EPSG:3260${utmZone}` : `EPSG:326${utmZone}`;\n                projections.push({ translateKey: 'utm', alias: `UTM ${utmZone}`, code, zone: `${utmZone}` });\n            }\n        }\n        let configProjection = [];\n        if (this.projectionsConstraints.projFromConfig) {\n            configProjection = this.config.getConfig('projections') || [];\n        }\n        this.projections$.next(configProjection.concat(projections));\n    }\n    getWorkspaceByLayerId(id) {\n        const wksFromLayerId = this.store\n            .all()\n            .find(workspace => workspace.layer.id === id);\n        if (wksFromLayerId) {\n            return wksFromLayerId;\n        }\n        return;\n    }\n    getLayerTitleById(id) {\n        return this.map.getLayerById(id).title;\n    }\n    layerHasSelectedFeatures(layer) {\n        const wksFromLayer = this.getWorkspaceByLayerId(layer.id);\n        if (wksFromLayer) {\n            const recs = wksFromLayer.entityStore.stateView\n                .firstBy((record) => {\n                return record.state.selected === true;\n            });\n            return recs ? true : false;\n        }\n    }\n    onlySelected(event, id) {\n        let layersWithSelection = this.form.value.layersWithSelection;\n        if (event.checked) {\n            layersWithSelection.push(id);\n        }\n        else {\n            layersWithSelection = layersWithSelection.filter(layerId => layerId !== id);\n        }\n        this.form.patchValue({ layersWithSelection });\n    }\n    onlySelectedClick(event, id) {\n        if (this.form.value.layers.find(layerId => layerId === id)) {\n            event.stopPropagation();\n        }\n    }\n    inLayersIdToExportSelectionOnly(layer) {\n        return this.form.value.layersWithSelection.find(layerId => layerId === layer.id) ? true : false;\n    }\n    ngOnDestroy() {\n        this.layers$$.unsubscribe();\n        this.exportableLayers$$.unsubscribe();\n        this.formats$$.unsubscribe();\n        this.encodings$$.unsubscribe();\n        this.formLayer$$.unsubscribe();\n        if (this.exportOptions$$) {\n            this.exportOptions$$.unsubscribe();\n        }\n        this.exportOptionsChange.emit(this.form.value);\n        this.handlePreviousLayerSpecs();\n    }\n    handlePreviousLayerSpecs() {\n        const previousSpecs = this.previousLayerSpecs$.value;\n        if (previousSpecs && previousSpecs.length) {\n            previousSpecs.forEach((specs) => {\n                const previousLayer = this.map.getLayerById(specs.id);\n                previousLayer.visible = specs.visible;\n                previousLayer.opacity = specs.opacity;\n                previousLayer.queryable = specs.queryable;\n            });\n        }\n        this.previousLayerSpecs$.next(undefined);\n    }\n    importFiles(files) {\n        let inputProj = this.inputProj.code;\n        if (this.espgCodeRegex.test(inputProj)) {\n            inputProj = `EPSG:${inputProj}`;\n        }\n        this.loading$.next(true);\n        for (const file of files) {\n            this.importService.import(file, inputProj).subscribe((features) => this.onFileImportSuccess(file, features), (error) => this.onFileImportError(file, error), () => {\n                this.loading$.next(false);\n            });\n        }\n    }\n    handlePopup(preCheck = true) {\n        const p1 = window.open('', 'popup', 'width=1, height=1');\n        p1.close();\n        const p2 = window.open('', 'popup', 'width=1, height=1');\n        if (!p2 || p2.closed || typeof p2.closed === 'undefined' || p2 === null) {\n            this.onPopupBlockedError(preCheck);\n            this.popupAllowed = false;\n        }\n        else {\n            p2.close();\n            this.popupAllowed = true;\n            this.popupChecked = true;\n        }\n        return this.popupAllowed;\n    }\n    handleExportFormSubmit(data) {\n        this.loading$.next(true);\n        const ogreFormats = Object.keys(ExportService.ogreFormats);\n        if (!this.popupChecked &&\n            data.layers.length > 1 &&\n            (ogreFormats.indexOf(data.format) >= 0 || data.format === ExportFormat.URL) &&\n            !this.popupAllowed) {\n            this.handlePopup();\n        }\n        data.layers.forEach((layer) => {\n            const lay = this.map.getLayerById(layer);\n            let filename = lay.title;\n            if (data.name !== undefined) {\n                filename = data.name;\n            }\n            const dSOptions = lay.dataSource.options;\n            if (data.format === ExportFormat.URL &&\n                dSOptions.download &&\n                (dSOptions.download.url || dSOptions.download.dynamicUrl)) {\n                setTimeout(() => {\n                    // better look an feel\n                    const url = dSOptions.download.url || dSOptions.download.dynamicUrl;\n                    if (url.match(/service=wfs/gi)) {\n                        this.downloadService.open(lay);\n                    }\n                    else {\n                        window.open(url, '_blank');\n                    }\n                    this.loading$.next(false);\n                }, 500);\n                return;\n            }\n            const wks = this.getWorkspaceByLayerId(layer);\n            let olFeatures;\n            if (wks && wks.entityStore && wks.entityStore.stateView.all().length) {\n                if (data.layersWithSelection.indexOf(layer) !== -1 && data.featureInMapExtent) {\n                    // Only export selected feature &&  into map extent\n                    olFeatures = wks.entityStore.stateView.all()\n                        .filter((e) => e.state.inMapExtent && e.state.selected).map(e => e.entity.ol);\n                }\n                else if (data.layersWithSelection.indexOf(layer) !== -1 && !data.featureInMapExtent) {\n                    // Only export selected feature &&  (into map extent OR not)\n                    olFeatures = wks.entityStore.stateView.all()\n                        .filter((e) => e.state.selected).map(e => e.entity.ol);\n                }\n                else if (data.featureInMapExtent) {\n                    // Only into map extent\n                    olFeatures = wks.entityStore.stateView.all()\n                        .filter((e) => e.state.inMapExtent).map(e => e.entity.ol);\n                }\n                else {\n                    // All features\n                    olFeatures = wks.entityStore.stateView.all().map(e => e.entity.ol);\n                }\n            }\n            else {\n                if (data.featureInMapExtent) {\n                    olFeatures = lay.dataSource.ol.getFeaturesInExtent(lay.map.viewController.getExtent());\n                }\n                else {\n                    olFeatures = lay.dataSource.ol.getFeatures();\n                }\n                if (lay.dataSource instanceof ClusterDataSource) {\n                    olFeatures = olFeatures.flatMap((cluster) => cluster.get('features'));\n                }\n            }\n            const translate = this.languageService.translate;\n            let geomTypes = [];\n            if (data.format === ExportFormat.Shapefile || data.format === ExportFormat.GPX) {\n                olFeatures.forEach((olFeature) => {\n                    const featureGeomType = olFeature.getGeometry().getType();\n                    const currentGeomType = geomTypes.find(geomType => geomType.geometryType === featureGeomType);\n                    if (currentGeomType) {\n                        currentGeomType.features.push(olFeature);\n                    }\n                    else {\n                        geomTypes.push({ geometryType: featureGeomType, features: [olFeature] });\n                    }\n                });\n            }\n            else {\n                geomTypes = [{ geometryType: '', features: olFeatures }];\n            }\n            if (data.format === ExportFormat.GPX) {\n                const gpxFeatureCnt = geomTypes.length;\n                geomTypes = geomTypes.filter(geomType => ['LineString', 'Point'].includes(geomType.geometryType));\n                const gpxFeatureCntPointOrPoly = geomTypes.length;\n                if (gpxFeatureCnt > gpxFeatureCntPointOrPoly) {\n                    const title = translate.instant('igo.geo.export.gpx.error.poly.title');\n                    const message = translate.instant('igo.geo.export.gpx.error.poly.text');\n                    this.messageService.error(message, title, { timeOut: 20000 });\n                }\n            }\n            if (geomTypes.length === 0) {\n                this.loading$.next(false);\n                const title = translate.instant('igo.geo.export.nothing.title');\n                const message = translate.instant('igo.geo.export.nothing.text');\n                this.messageService.error(message, title, { timeOut: 20000 });\n            }\n            else {\n                geomTypes.map(geomType => this.exportService\n                    .export(geomType.features, data.format, filename + geomType.geometryType, data.encoding, this.map.projection)\n                    .subscribe(() => { }, (error) => this.onFileExportError(error), () => {\n                    this.onFileExportSuccess();\n                    this.loading$.next(false);\n                }));\n            }\n        });\n    }\n    buildForm() {\n        this.importForm = this.formBuilder.group({\n            inputProj: ['', [Validators.required]]\n        });\n        if (this.forceNaming) {\n            this.form = this.formBuilder.group({\n                format: ['', [Validators.required]],\n                layers: [[], [Validators.required]],\n                layersWithSelection: [[]],\n                encoding: [EncodingFormat.UTF8, [Validators.required]],\n                featureInMapExtent: [false, [Validators.required]],\n                name: ['', [Validators.required]]\n            });\n        }\n        else {\n            this.form = this.formBuilder.group({\n                format: ['', [Validators.required]],\n                layers: [[], [Validators.required]],\n                layersWithSelection: [[]],\n                encoding: [EncodingFormat.UTF8, [Validators.required]],\n                featureInMapExtent: [false, [Validators.required]]\n            });\n        }\n    }\n    onFileImportSuccess(file, features) {\n        if (!this.config.getConfig('importWithStyle')) {\n            handleFileImportSuccess(file, features, this.map, this.messageService, this.languageService);\n        }\n        else {\n            handleFileImportSuccess(file, features, this.map, this.messageService, this.languageService, this.styleListService, this.styleService);\n        }\n    }\n    onFileImportError(file, error) {\n        this.loading$.next(false);\n        handleFileImportError(file, error, this.messageService, this.languageService, this.fileSizeMb);\n    }\n    onPopupBlockedError(preCheck = true) {\n        this.loading$.next(false);\n        const translate = this.languageService.translate;\n        const title = translate.instant('igo.geo.export.popupBlocked.title');\n        const extraMessage = preCheck ? translate.instant('igo.geo.export.popupBlocked.selectAgain') : translate.instant('igo.geo.export.popupBlocked.retry');\n        const message = translate.instant('igo.geo.export.popupBlocked.text', { extraMessage });\n        this.messageService.error(message, title, { timeOut: 20000 });\n    }\n    onFileExportError(error) {\n        this.loading$.next(false);\n        handleFileExportError(error, this.messageService, this.languageService);\n    }\n    loadConfig() {\n        if (this.config.getConfig('importExport.forceNaming') !== undefined) {\n            this.forceNaming = this.config.getConfig('importExport.forceNaming');\n        }\n        this.computeFormats();\n        this.loadEncodings();\n    }\n    encodingDefaultValue(format) {\n        if (format === ExportFormat.CSVcomma || format === ExportFormat.CSVsemicolon) {\n            this.form.patchValue({ encoding: EncodingFormat.LATIN1 });\n            return EncodingFormat.LATIN1;\n        }\n        else {\n            this.form.patchValue({ encoding: EncodingFormat.UTF8 });\n            return EncodingFormat.UTF8;\n        }\n    }\n    loadEncodings() {\n        this.encodings$.next(EncodingFormat);\n    }\n    computeFormats(layers) {\n        let appliedformats = Object.keys(ExportFormat);\n        const formatsType = {\n            onlyUrl: false,\n            onlyVector: false,\n            vectorAndUrl: false,\n            customList: false\n        };\n        const customList = [];\n        if (layers && layers.length) {\n            layers.forEach((layer) => {\n                var _a;\n                if (!layer) {\n                    return;\n                }\n                if ((_a = layer.dataSource.options.download) === null || _a === void 0 ? void 0 : _a.allowedFormats) {\n                    formatsType.customList = true;\n                    customList.push({ layer: layer.title, formats: this.validateListFormat(layer.dataSource.options.download.allowedFormats) });\n                }\n                else if (!(layer instanceof VectorLayer) &&\n                    layer.dataSource.options.download &&\n                    layer.dataSource.options.download.url) {\n                    formatsType.onlyUrl = true;\n                }\n                else if (layer.dataSource.options.download &&\n                    (layer.dataSource.options.download.url || layer.dataSource.options.download.dynamicUrl)) {\n                    formatsType.vectorAndUrl = true;\n                }\n                else if (layer instanceof VectorLayer) {\n                    formatsType.onlyVector = true;\n                }\n            });\n            if (formatsType.onlyUrl === true && formatsType.onlyVector === false) {\n                appliedformats = ['URL'];\n            }\n            else if (formatsType.onlyVector === true &&\n                formatsType.onlyUrl === false) {\n                this.computeFormats(); // reset\n                if (ExportFormat.URL in this.formats$.value) {\n                    const keys = Object.keys(this.formats$.value).filter((key) => key !== 'URL');\n                    appliedformats = keys;\n                }\n            }\n            else if (formatsType.vectorAndUrl === true &&\n                formatsType.onlyUrl === false &&\n                formatsType.onlyVector === false) {\n                this.computeFormats(); // reset\n                if (!(ExportFormat.URL in this.formats$.value)) {\n                    const keys = Object.keys(this.formats$.value);\n                    keys.push('URL');\n                    appliedformats = keys;\n                }\n            }\n        }\n        if (this.config.getConfig('importExport.formats') !== undefined) {\n            const validatedListFormat = this.validateListFormat(this.config.getConfig('importExport.formats'));\n            appliedformats = validatedListFormat;\n        }\n        if (formatsType.customList) {\n            let commonFormats;\n            const layersWithCustomFormats = [];\n            let previousCustomListFormats = customList[0].formats;\n            customList.map(list => {\n                layersWithCustomFormats.push(list.layer);\n                commonFormats = list.formats.filter(value => previousCustomListFormats.includes(value));\n                previousCustomListFormats = list.formats;\n            });\n            const finalFormats = commonFormats.filter(value => appliedformats.includes(value));\n            if (finalFormats.length > 0) {\n                this.formats$.next(strEnum(finalFormats));\n                if (layers && layers.length) {\n                    if (layers.length > 1) {\n                        this.messageService.alert(this.languageService.translate.instant('igo.geo.export.customList.text', { value: layersWithCustomFormats.join() }), this.languageService.translate.instant('igo.geo.export.customList.title'));\n                    }\n                }\n            }\n            else {\n                this.formats$.next([]);\n                this.messageService.alert(this.languageService.translate.instant('igo.geo.export.noFormat.text'), this.languageService.translate.instant('igo.geo.export.noFormat.title'));\n            }\n            return;\n        }\n        else {\n            this.formats$.next(strEnum(appliedformats));\n        }\n    }\n    validateListFormat(formats) {\n        return formats\n            .filter((format) => {\n            if (format.toUpperCase() === ExportFormat.CSVcomma.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.CSVsemicolon.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.GML.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.GPX.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.GeoJSON.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.KML.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.Shapefile.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.URL.toUpperCase()) {\n                return format;\n            }\n        })\n            .map((format) => {\n            if (format.toUpperCase() === ExportFormat.CSVcomma.toUpperCase()) {\n                format = ExportFormat.CSVcomma;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.CSVsemicolon.toUpperCase()) {\n                format = ExportFormat.CSVsemicolon;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.GML.toUpperCase()) {\n                format = ExportFormat.GML;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.GPX.toUpperCase()) {\n                format = ExportFormat.GPX;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.GeoJSON.toUpperCase()) {\n                format = ExportFormat.GeoJSON;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.KML.toUpperCase()) {\n                format = ExportFormat.KML;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.Shapefile.toUpperCase()) {\n                format = ExportFormat.Shapefile;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.URL.toUpperCase()) {\n                format = ExportFormat.URL;\n                return format;\n            }\n        });\n    }\n    modeChanged(mode) {\n        this.selectMode.emit(mode);\n    }\n    onFileExportSuccess() {\n        handleFileExportSuccess(this.messageService, this.languageService);\n    }\n    onImportExportChange(event) {\n        this.selectedMode = event.value;\n    }\n}\nImportExportComponent.ɵfac = function ImportExportComponent_Factory(t) { return new (t || ImportExportComponent)(ɵɵdirectiveInject(ImportService), ɵɵdirectiveInject(ExportService), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(StyleListService), ɵɵdirectiveInject(StyleService), ɵɵdirectiveInject(FormBuilder), ɵɵdirectiveInject(ConfigService), ɵɵdirectiveInject(ChangeDetectorRef), ɵɵdirectiveInject(StorageService), ɵɵdirectiveInject(DownloadService)); };\nImportExportComponent.ɵcmp = ɵɵdefineComponent({ type: ImportExportComponent, selectors: [[\"igo-import-export\"]], inputs: { selectFirstProj: \"selectFirstProj\", map: \"map\", projectionsLimitations: \"projectionsLimitations\", store: \"store\", selectedMode: \"selectedMode\", exportOptions$: \"exportOptions$\" }, outputs: { selectMode: \"selectMode\", exportOptionsChange: \"exportOptionsChange\" }, decls: 14, vars: 17, consts: [[1, \"import-export-toggle\", \"mat-typography\"], [3, \"value\", \"change\"], [3, \"value\"], [\"class\", \"igo-form\", 3, \"formGroup\", 4, \"ngIf\"], [\"class\", \"mat-typography\", 4, \"ngIf\"], [1, \"igo-form\", 3, \"formGroup\"], [1, \"igo-input-container\"], [3, \"value\", \"valueChange\"], [3, \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"igo-form-button-group\", 3, \"matTooltip\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 3, \"disabled\", \"click\"], [3, \"shown\"], [\"hidden\", \"\", \"type\", \"file\", 3, \"click\", \"change\"], [\"fileInput\", \"\"], [3, \"value\", \"click\"], [\"mat-line\", \"\", 4, \"ngIf\"], [\"mat-line\", \"\"], [1, \"mat-typography\"], [\"multiple\", \"\", 3, \"value\", \"valueChange\"], [\"class\", \"export-select-trigger\", 4, \"ngIf\"], [3, \"ngClass\", \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"format\"], [4, \"ngIf\"], [\"disabled\", \"true\", 4, \"ngIf\"], [\"class\", \"igo-input-container\", 4, \"ngIf\"], [\"class\", \"export-options mat-typography\", 4, \"ngIf\"], [1, \"igo-form-button-group\"], [1, \"export-select-trigger\"], [3, \"ngClass\", \"value\", \"click\"], [3, \"labelPosition\", \"click\", \"checked\", \"change\", 4, \"ngIf\"], [3, \"labelPosition\", \"click\", \"checked\", \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"disabled\", \"true\"], [\"matInput\", \"\", \"formControlName\", \"name\", 3, \"placeholder\"], [\"formControlName\", \"encoding\"], [1, \"export-options\", \"mat-typography\"], [\"formControlName\", \"featureInMapExtent\", 3, \"labelPosition\"]], template: function ImportExportComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵelementStart(1, \"mat-button-toggle-group\", 1);\n        ɵɵlistener(\"change\", function ImportExportComponent_Template_mat_button_toggle_group_change_1_listener($event) { return ctx.onImportExportChange($event); });\n        ɵɵelementStart(2, \"mat-button-toggle\", 2);\n        ɵɵtext(3);\n        ɵɵpipe(4, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(5, \"mat-button-toggle\", 2);\n        ɵɵtext(6);\n        ɵɵpipe(7, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵtemplate(8, ImportExportComponent_form_8_Template, 20, 24, \"form\", 3);\n        ɵɵtemplate(9, ImportExportComponent_section_9_Template, 14, 15, \"section\", 4);\n        ɵɵtemplate(10, ImportExportComponent_section_10_Template, 4, 3, \"section\", 4);\n        ɵɵpipe(11, \"async\");\n        ɵɵtemplate(12, ImportExportComponent_form_12_Template, 34, 35, \"form\", 3);\n        ɵɵpipe(13, \"async\");\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"value\", ctx.selectedMode);\n        ɵɵadvance(1);\n        ɵɵproperty(\"value\", \"import\");\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(4, 9, \"igo.geo.importExportForm.importTabTitle\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"value\", \"export\");\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(7, 11, \"igo.geo.importExportForm.exportTabTitle\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ctx.selectedMode === \"import\");\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.selectedMode === \"import\");\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(11, 13, ctx.exportableLayers$).length === 0 && ctx.selectedMode === \"export\");\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(13, 15, ctx.exportableLayers$).length > 0 && ctx.selectedMode === \"export\");\n    } }, directives: [MatButtonToggleGroup, MatButtonToggle, NgIf, ɵangular_packages_forms_forms_y, NgControlStatusGroup, FormGroupDirective, MatFormField, MatLabel, MatSelect, NgForOf, MatTooltip, MatButton, SpinnerComponent, MatOption, MatSelectTrigger, NgControlStatus, FormControlName, NgClass, MatSlideToggle, MatInput, DefaultValueAccessor], pipes: [TranslatePipe, AsyncPipe, KeyValuePipe$1], styles: [\"mat-option.igo-export-layer-mat-option[_ngcontent-%COMP%]{height:5em;line-height:1em}.import-export-toggle[_ngcontent-%COMP%]{padding:10px;text-align:center}.import-export-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}.import-export-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{width:50%}h4[_ngcontent-%COMP%]{padding:0 5px}.igo-form[_ngcontent-%COMP%]{padding:15px 5px}.igo-input-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.igo-form-button-group[_ngcontent-%COMP%]{padding-top:10px;text-align:center}igo-spinner[_ngcontent-%COMP%]{padding-left:10px;position:absolute}.export-options[_ngcontent-%COMP%]{overflow-x:hidden}.export-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:10px;width:100%}.export-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-content{width:calc(100% - 60px)}.export-select-trigger[_ngcontent-%COMP%]{font-size:.75em;opacity:.75}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ImportExportComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-import-export',\n                templateUrl: './import-export.component.html',\n                styleUrls: ['./import-export.component.scss']\n            }]\n    }], function () { return [{ type: ImportService }, { type: ExportService }, { type: LanguageService }, { type: MessageService }, { type: StyleListService }, { type: StyleService }, { type: FormBuilder }, { type: ConfigService }, { type: ChangeDetectorRef }, { type: StorageService }, { type: DownloadService }]; }, { selectFirstProj: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], projectionsLimitations: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], selectedMode: [{\n            type: Input\n        }], selectMode: [{\n            type: Output\n        }], exportOptions$: [{\n            type: Input\n        }], exportOptionsChange: [{\n            type: Output\n        }] }); })();\n\nclass DropGeoFileDirective extends DragAndDropDirective {\n    constructor(component, importService, languageService, styleListService, styleService, config, messageService) {\n        super();\n        this.component = component;\n        this.importService = importService;\n        this.languageService = languageService;\n        this.styleListService = styleListService;\n        this.styleService = styleService;\n        this.config = config;\n        this.messageService = messageService;\n        this.filesDropped = new EventEmitter();\n        this.filesInvalid = new EventEmitter();\n        this.epsgCode$ = new BehaviorSubject(undefined);\n        this.epsgCode$$ = [];\n    }\n    get map() {\n        return this.component.map;\n    }\n    ngOnInit() {\n        this.filesDropped$$ = this.filesDropped.subscribe((files) => {\n            this.onFilesDropped(files);\n        });\n    }\n    ngOnDestroy() {\n        this.filesDropped$$.unsubscribe();\n    }\n    onDragOver(evt) {\n        super.onDragOver(evt);\n    }\n    onDragLeave(evt) {\n        super.onDragLeave(evt);\n    }\n    onDrop(evt) {\n        super.onDrop(evt);\n    }\n    onFilesDropped(files) {\n        for (const file of files) {\n            this.detectEPSG(file);\n            this.epsgCode$$.push(this.epsgCode$.pipe(skipWhile((code) => !code), first(), concatMap(epsgCode => {\n                const epsg = epsgCode === 'epsgNotDefined' ? undefined : epsgCode;\n                this.epsgCode$.next(undefined);\n                return this.importService.import(file, epsg);\n            })).subscribe((features) => this.onFileImportSuccess(file, features), (error) => this.onFileImportError(file, error)));\n        }\n    }\n    detectEPSG(file, nbLines = 500) {\n        if (!file.name.toLowerCase().endsWith('.geojson') && !file.name.toLowerCase().endsWith('.gml')) {\n            this.epsgCode$.next('epsgNotDefined');\n            return;\n        }\n        const reader = new FileReader();\n        reader.onload = (e) => {\n            var _a, _b;\n            if (file.name.toLowerCase().endsWith('.geojson')) {\n                const geojson = JSON.parse(reader.result);\n                if ((_b = (_a = geojson.crs) === null || _a === void 0 ? void 0 : _a.properties) === null || _b === void 0 ? void 0 : _b.name) {\n                    const epsg = geojson.crs.properties.name.match(/EPSG:{1,2}\\d{0,6}/gm);\n                    if (epsg !== null && epsg.length) {\n                        this.epsgCode$.next(epsg[0].replace(/::/g, ':'));\n                        return;\n                    }\n                    else {\n                        this.epsgCode$.next('epsgNotDefined');\n                        return;\n                    }\n                }\n                else {\n                    this.epsgCode$.next('epsgNotDefined');\n                    return;\n                }\n            }\n            else if (file.name.toLowerCase().endsWith('.gml')) {\n                const text = reader.result;\n                const lines = text.split('\\n');\n                for (let line = 0; line <= nbLines; line++) {\n                    const epsg = lines[line].match(/EPSG:\\d{0,6}/gm);\n                    if (epsg !== null && epsg.length) {\n                        this.epsgCode$.next(epsg[0]);\n                        break;\n                    }\n                    else {\n                        this.epsgCode$.next(undefined);\n                        return;\n                    }\n                }\n            }\n            else {\n                this.epsgCode$.next('epsgNotDefined');\n                return;\n            }\n        };\n        reader.readAsText(file, 'UTF-8');\n    }\n    onFileImportSuccess(file, features) {\n        if (!this.config.getConfig('importWithStyle')) {\n            handleFileImportSuccess(file, features, this.map, this.messageService, this.languageService);\n        }\n        else {\n            handleFileImportSuccess(file, features, this.map, this.messageService, this.languageService, this.styleListService, this.styleService);\n        }\n    }\n    onFileImportError(file, error) {\n        handleFileImportError(file, error, this.messageService, this.languageService, this.config.getConfig('importExport.clientSideFileSizeMaxMb'));\n    }\n}\nDropGeoFileDirective.ɵfac = function DropGeoFileDirective_Factory(t) { return new (t || DropGeoFileDirective)(ɵɵdirectiveInject(MapBrowserComponent), ɵɵdirectiveInject(ImportService), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(StyleListService), ɵɵdirectiveInject(StyleService), ɵɵdirectiveInject(ConfigService), ɵɵdirectiveInject(MessageService)); };\nDropGeoFileDirective.ɵdir = ɵɵdefineDirective({ type: DropGeoFileDirective, selectors: [[\"\", \"igoDropGeoFile\", \"\"]], hostBindings: function DropGeoFileDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"dragover\", function DropGeoFileDirective_dragover_HostBindingHandler($event) { return ctx.onDragOver($event); })(\"dragleave\", function DropGeoFileDirective_dragleave_HostBindingHandler($event) { return ctx.onDragLeave($event); })(\"drop\", function DropGeoFileDirective_drop_HostBindingHandler($event) { return ctx.onDrop($event); });\n    } }, features: [ɵɵInheritDefinitionFeature] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DropGeoFileDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoDropGeoFile]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent }, { type: ImportService }, { type: LanguageService }, { type: StyleListService }, { type: StyleService }, { type: ConfigService }, { type: MessageService }]; }, { onDragOver: [{\n            type: HostListener,\n            args: ['dragover', ['$event']]\n        }], onDragLeave: [{\n            type: HostListener,\n            args: ['dragleave', ['$event']]\n        }], onDrop: [{\n            type: HostListener,\n            args: ['drop', ['$event']]\n        }] }); })();\n\nlet STYLELIST_OPTIONS = new InjectionToken('styleListOptions');\nfunction provideStyleListOptions(options) {\n    return {\n        provide: STYLELIST_OPTIONS,\n        useValue: options\n    };\n}\nfunction styleListFactory(styleListService, options) {\n    return () => styleListService.load(options);\n}\nfunction provideStyleListLoader() {\n    return {\n        provide: APP_INITIALIZER,\n        useFactory: styleListFactory,\n        multi: true,\n        deps: [StyleListService, STYLELIST_OPTIONS]\n    };\n}\n\nclass IgoStyleListModule {\n    static forRoot() {\n        return {\n            ngModule: IgoStyleListModule,\n            providers: [provideStyleListOptions({}), provideStyleListLoader()]\n        };\n    }\n}\nIgoStyleListModule.ɵmod = ɵɵdefineNgModule({ type: IgoStyleListModule });\nIgoStyleListModule.ɵinj = ɵɵdefineInjector({ factory: function IgoStyleListModule_Factory(t) { return new (t || IgoStyleListModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoStyleListModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\nclass IgoImportExportModule {\n    static forRoot() {\n        return {\n            ngModule: IgoImportExportModule\n        };\n    }\n}\nIgoImportExportModule.ɵmod = ɵɵdefineNgModule({ type: IgoImportExportModule });\nIgoImportExportModule.ɵinj = ɵɵdefineInjector({ factory: function IgoImportExportModule_Factory(t) { return new (t || IgoImportExportModule)(); }, imports: [[\n            MatIconModule,\n            MatTooltipModule,\n            FormsModule,\n            ReactiveFormsModule,\n            CommonModule,\n            MatButtonModule,\n            MatButtonToggleModule,\n            MatTabsModule,\n            MatSelectModule,\n            MatOptionModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatSlideToggleModule,\n            IgoLanguageModule,\n            IgoSpinnerModule,\n            IgoKeyValueModule,\n            IgoDrapDropModule,\n            IgoStyleListModule.forRoot()\n        ], IgoStyleListModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoImportExportModule, { declarations: [ImportExportComponent, DropGeoFileDirective, ExportButtonComponent], imports: [MatIconModule,\n        MatTooltipModule,\n        FormsModule,\n        ReactiveFormsModule,\n        CommonModule,\n        MatButtonModule,\n        MatButtonToggleModule,\n        MatTabsModule,\n        MatSelectModule,\n        MatOptionModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatSlideToggleModule,\n        IgoLanguageModule,\n        IgoSpinnerModule,\n        IgoKeyValueModule,\n        IgoDrapDropModule, IgoStyleListModule], exports: [ImportExportComponent, DropGeoFileDirective, IgoStyleListModule, ExportButtonComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoImportExportModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    MatIconModule,\n                    MatTooltipModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    CommonModule,\n                    MatButtonModule,\n                    MatButtonToggleModule,\n                    MatTabsModule,\n                    MatSelectModule,\n                    MatOptionModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatSlideToggleModule,\n                    IgoLanguageModule,\n                    IgoSpinnerModule,\n                    IgoKeyValueModule,\n                    IgoDrapDropModule,\n                    IgoStyleListModule.forRoot()\n                ],\n                exports: [ImportExportComponent, DropGeoFileDirective, IgoStyleListModule, ExportButtonComponent],\n                declarations: [ImportExportComponent, DropGeoFileDirective, ExportButtonComponent]\n            }]\n    }], null, null); })();\n\nclass IgoMapModule {\n}\nIgoMapModule.ɵmod = ɵɵdefineNgModule({ type: IgoMapModule });\nIgoMapModule.ɵinj = ɵɵdefineInjector({ factory: function IgoMapModule_Factory(t) { return new (t || IgoMapModule)(); }, imports: [[\n            CommonModule,\n            IgoLanguageModule,\n            IgoConfirmDialogModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTooltipModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoMapModule, { declarations: [MapBrowserComponent,\n        ZoomButtonComponent,\n        GeolocateButtonComponent,\n        RotationButtonComponent,\n        BaseLayersSwitcherComponent,\n        MiniBaseMapComponent,\n        MapOfflineDirective,\n        OfflineButtonComponent,\n        PointerPositionDirective,\n        HoverFeatureDirective], imports: [CommonModule,\n        IgoLanguageModule,\n        IgoConfirmDialogModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTooltipModule], exports: [MapBrowserComponent,\n        ZoomButtonComponent,\n        GeolocateButtonComponent,\n        RotationButtonComponent,\n        BaseLayersSwitcherComponent,\n        MiniBaseMapComponent,\n        MapOfflineDirective,\n        OfflineButtonComponent,\n        PointerPositionDirective,\n        HoverFeatureDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoMapModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoLanguageModule,\n                    IgoConfirmDialogModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTooltipModule\n                ],\n                exports: [\n                    MapBrowserComponent,\n                    ZoomButtonComponent,\n                    GeolocateButtonComponent,\n                    RotationButtonComponent,\n                    BaseLayersSwitcherComponent,\n                    MiniBaseMapComponent,\n                    MapOfflineDirective,\n                    OfflineButtonComponent,\n                    PointerPositionDirective,\n                    HoverFeatureDirective\n                ],\n                declarations: [\n                    MapBrowserComponent,\n                    ZoomButtonComponent,\n                    GeolocateButtonComponent,\n                    RotationButtonComponent,\n                    BaseLayersSwitcherComponent,\n                    MiniBaseMapComponent,\n                    MapOfflineDirective,\n                    OfflineButtonComponent,\n                    PointerPositionDirective,\n                    HoverFeatureDirective\n                ]\n            }]\n    }], null, null); })();\nɵɵsetComponentScope(BaseLayersSwitcherComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, TranslateDirective, ConfirmDialogComponent, MatIcon, Dir, MatButton, MatAnchor, MatTooltip, TooltipComponent, CdkScrollable, MapBrowserComponent,\n    ZoomButtonComponent,\n    GeolocateButtonComponent,\n    RotationButtonComponent,\n    BaseLayersSwitcherComponent,\n    MiniBaseMapComponent,\n    MapOfflineDirective,\n    OfflineButtonComponent,\n    PointerPositionDirective,\n    HoverFeatureDirective], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe]);\nɵɵsetComponentScope(MiniBaseMapComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, TranslateDirective, ConfirmDialogComponent, MatIcon, Dir, MatButton, MatAnchor, MatTooltip, TooltipComponent, CdkScrollable, MapBrowserComponent,\n    ZoomButtonComponent,\n    GeolocateButtonComponent,\n    RotationButtonComponent,\n    BaseLayersSwitcherComponent,\n    MiniBaseMapComponent,\n    MapOfflineDirective,\n    OfflineButtonComponent,\n    PointerPositionDirective,\n    HoverFeatureDirective], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe]);\n\nfunction MeasurerItemComponent_mat_option_6_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 5);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const measureUnit_r1 = ctx.$implicit;\n    ɵɵproperty(\"value\", measureUnit_r1);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.measure.\" + measureUnit_r1), \" \");\n} }\n/**\n * Measurer item\n */\nclass MeasurerItemComponent {\n    constructor() {\n        /**\n         * Measure observable\n         * @internal\n         */\n        this.measure$ = new BehaviorSubject(undefined);\n        this._auto = false;\n        /**\n         * Event emitted when the measure unit changes\n         */\n        this.measureUnitChange = new EventEmitter();\n    }\n    /**\n     * Measure\n     */\n    set measure(value) {\n        this.measure$.next(value);\n    }\n    get measure() { return this.measure$.value; }\n    /**\n     * Whther measure units should be automatically determined\n     */\n    set auto(value) { this.toggleAutoUnit(value); }\n    get auto() { return this._auto; }\n    /**\n     * Available measure units for the measure type given\n     * @internal\n     */\n    get measureUnits() {\n        if (this.measureType === MeasureType.Area) {\n            return Object.values(MeasureAreaUnit);\n        }\n        return Object.values(MeasureLengthUnit);\n    }\n    /**\n     * Toggle the auto unit off\n     * @internal\n     */\n    ngOnDestroy() {\n        this.toggleAutoUnit(false);\n    }\n    /**\n     * Set the measure unit\n     * @internal\n     */\n    onMeasureUnitChange(unit) {\n        this.measureUnit = unit;\n        this.measureUnitChange.emit(unit);\n    }\n    toggleAutoUnit(toggle) {\n        if (this.measure$$ !== undefined) {\n            this.measure$$.unsubscribe();\n        }\n        if (toggle === true) {\n            this.measure$$ = this.measure$.subscribe((measure) => {\n                this.computeBestMeasureUnit(measure);\n            });\n        }\n        this._auto = toggle;\n    }\n    computeBestMeasureUnit(measure) {\n        let measureUnit = this.measureUnit;\n        if (this.measureType === MeasureType.Area) {\n            measureUnit = computeBestAreaUnit(measure);\n        }\n        else if (this.measureType === MeasureType.Length) {\n            measureUnit = computeBestLengthUnit(measure);\n        }\n        if (measureUnit !== this.measureUnit) {\n            this.onMeasureUnitChange(measureUnit);\n        }\n    }\n}\nMeasurerItemComponent.ɵfac = function MeasurerItemComponent_Factory(t) { return new (t || MeasurerItemComponent)(); };\nMeasurerItemComponent.ɵcmp = ɵɵdefineComponent({ type: MeasurerItemComponent, selectors: [[\"igo-measurer-item\"]], inputs: { measureType: \"measureType\", measureUnit: \"measureUnit\", measure: \"measure\", auto: \"auto\", placeholder: \"placeholder\" }, outputs: { measureUnitChange: \"measureUnitChange\" }, decls: 7, vars: 11, consts: [[1, \"measure-field\"], [\"matInput\", \"\", 3, \"readonly\", \"placeholder\", \"value\"], [1, \"unit-field\"], [3, \"value\", \"disabled\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]], template: function MeasurerItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-form-field\", 0);\n        ɵɵelement(1, \"input\", 1);\n        ɵɵpipe(2, \"measureFormat\");\n        ɵɵpipe(3, \"async\");\n        ɵɵelementEnd();\n        ɵɵelementStart(4, \"mat-form-field\", 2);\n        ɵɵelementStart(5, \"mat-select\", 3);\n        ɵɵlistener(\"selectionChange\", function MeasurerItemComponent_Template_mat_select_selectionChange_5_listener($event) { return ctx.onMeasureUnitChange($event.value); });\n        ɵɵtemplate(6, MeasurerItemComponent_mat_option_6_Template, 3, 4, \"mat-option\", 4);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"readonly\", true)(\"placeholder\", ctx.placeholder)(\"value\", ɵɵpipeBind2(2, 6, ɵɵpipeBind1(3, 9, ctx.measure$) || 0, ctx.measureUnit));\n        ɵɵadvance(4);\n        ɵɵproperty(\"value\", ctx.measureUnit)(\"disabled\", ctx.auto);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ctx.measureUnits);\n    } }, directives: [MatFormField, MatInput, MatSelect, NgForOf, MatOption], pipes: [MeasureFormatPipe, AsyncPipe, TranslatePipe], styles: [\"[_nghost-%COMP%]{padding:5px 10px}.measure-field[_ngcontent-%COMP%], [_nghost-%COMP%]{display:flex;width:100%}.measure-field[_ngcontent-%COMP%]{flex-flow:column nowrap}.unit-field[_ngcontent-%COMP%]{margin-left:10px;width:110px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MeasurerItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-measurer-item',\n                templateUrl: './measurer-item.component.html',\n                styleUrls: ['./measurer-item.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { measureType: [{\n            type: Input\n        }], measureUnit: [{\n            type: Input\n        }], measure: [{\n            type: Input\n        }], auto: [{\n            type: Input\n        }], placeholder: [{\n            type: Input\n        }], measureUnitChange: [{\n            type: Output\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoMeasurerModule {\n}\nIgoMeasurerModule.ɵmod = ɵɵdefineNgModule({ type: IgoMeasurerModule });\nIgoMeasurerModule.ɵinj = ɵɵdefineInjector({ factory: function IgoMeasurerModule_Factory(t) { return new (t || IgoMeasurerModule)(); }, imports: [[\n            CommonModule,\n            MatButtonModule,\n            MatButtonToggleModule,\n            MatIconModule,\n            MatTooltipModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatSelectModule,\n            MatSlideToggleModule,\n            IgoLanguageModule,\n            IgoEntityTableModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoMeasurerModule, { declarations: [MeasureFormatPipe,\n        MeasurerItemComponent,\n        MeasurerComponent,\n        MeasurerDialogComponent], imports: [CommonModule,\n        MatButtonModule,\n        MatButtonToggleModule,\n        MatIconModule,\n        MatTooltipModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatSelectModule,\n        MatSlideToggleModule,\n        IgoLanguageModule,\n        IgoEntityTableModule], exports: [MeasureFormatPipe,\n        MeasurerComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoMeasurerModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatButtonModule,\n                    MatButtonToggleModule,\n                    MatIconModule,\n                    MatTooltipModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatSelectModule,\n                    MatSlideToggleModule,\n                    IgoLanguageModule,\n                    IgoEntityTableModule\n                ],\n                declarations: [\n                    MeasureFormatPipe,\n                    MeasurerItemComponent,\n                    MeasurerComponent,\n                    MeasurerDialogComponent\n                ],\n                exports: [\n                    MeasureFormatPipe,\n                    MeasurerComponent\n                ]\n            }]\n    }], null, null); })();\nɵɵsetComponentScope(MeasurerComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, MatButton, MatAnchor, Dir, MatButtonToggleGroup, MatButtonToggle, MatIcon, MatTooltip, TooltipComponent, CdkScrollable, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatOption, MatOptgroup, MatSlideToggleRequiredValidator, MatSlideToggle, TranslateDirective, EntityTableComponent, MeasurerItemComponent,\n    MeasurerComponent,\n    MeasurerDialogComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, MeasureFormatPipe]);\nɵɵsetComponentScope(MeasurerDialogComponent, [NgClass, NgComponentOutlet, NgForOf, NgIf, NgTemplateOutlet, NgStyle, NgSwitch, NgSwitchCase, NgSwitchDefault, NgPlural, NgPluralCase, MatButton, MatAnchor, Dir, MatButtonToggleGroup, MatButtonToggle, MatIcon, MatTooltip, TooltipComponent, CdkScrollable, MatError, MatFormField, MatHint, MatLabel, MatPlaceholder, MatPrefix, MatSuffix, CdkAutofill, CdkTextareaAutosize, MatInput, MatTextareaAutosize, MatSelect, MatSelectTrigger, MatOption, MatOptgroup, MatSlideToggleRequiredValidator, MatSlideToggle, TranslateDirective, EntityTableComponent, MeasurerItemComponent,\n    MeasurerComponent,\n    MeasurerDialogComponent], [AsyncPipe, UpperCasePipe, LowerCasePipe, JsonPipe, SlicePipe, DecimalPipe, PercentPipe, TitleCasePipe, CurrencyPipe, DatePipe, I18nPluralPipe, I18nSelectPipe, KeyValuePipe, TranslatePipe, MeasureFormatPipe]);\n\nclass IgoMeasureModule {\n}\nIgoMeasureModule.ɵmod = ɵɵdefineNgModule({ type: IgoMeasureModule });\nIgoMeasureModule.ɵinj = ɵɵdefineInjector({ factory: function IgoMeasureModule_Factory(t) { return new (t || IgoMeasureModule)(); }, imports: [[], IgoMeasurerModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoMeasureModule, { exports: [IgoMeasurerModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoMeasureModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: [\n                    IgoMeasurerModule\n                ]\n            }]\n    }], null, null); })();\n\nvar OverlayAction;\n(function (OverlayAction) {\n    OverlayAction[OverlayAction[\"None\"] = 0] = \"None\";\n    OverlayAction[OverlayAction[\"Move\"] = 1] = \"Move\";\n    OverlayAction[OverlayAction[\"Zoom\"] = 2] = \"Zoom\";\n    OverlayAction[OverlayAction[\"ZoomIfOutMapExtent\"] = 3] = \"ZoomIfOutMapExtent\";\n})(OverlayAction || (OverlayAction = {}));\n\nclass OverlayService {\n    constructor() {\n        this.features$ = new BehaviorSubject([\n            [],\n            undefined\n        ]);\n    }\n    setFeatures(features, action = OverlayAction.None) {\n        this.features$.next([features, action]);\n    }\n    clear() {\n        this.features$.next([[], OverlayAction.None]);\n    }\n}\nOverlayService.ɵfac = function OverlayService_Factory(t) { return new (t || OverlayService)(); };\nOverlayService.ɵprov = ɵɵdefineInjectable({ token: OverlayService, factory: OverlayService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OverlayService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nclass OverlayDirective {\n    constructor(component, overlayService) {\n        this.component = component;\n        this.overlayService = overlayService;\n        this.format = new OlGeoJSON();\n    }\n    get map() {\n        return this.component.map;\n    }\n    ngOnInit() {\n        this.features$$ = this.overlayService.features$.subscribe(res => this.handleFeatures(res[0], res[1]));\n    }\n    ngOnDestroy() {\n        this.features$$.unsubscribe();\n    }\n    handleFeatures(features, action) { }\n}\nOverlayDirective.ɵfac = function OverlayDirective_Factory(t) { return new (t || OverlayDirective)(ɵɵdirectiveInject(MapBrowserComponent, 2), ɵɵdirectiveInject(OverlayService)); };\nOverlayDirective.ɵdir = ɵɵdefineDirective({ type: OverlayDirective, selectors: [[\"\", \"igoOverlay\", \"\"]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OverlayDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoOverlay]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent, decorators: [{\n                type: Self\n            }] }, { type: OverlayService }]; }, null); })();\n\nclass IgoOverlayModule {\n    static forRoot() {\n        return {\n            ngModule: IgoOverlayModule\n        };\n    }\n}\nIgoOverlayModule.ɵmod = ɵɵdefineNgModule({ type: IgoOverlayModule });\nIgoOverlayModule.ɵinj = ɵɵdefineInjector({ factory: function IgoOverlayModule_Factory(t) { return new (t || IgoOverlayModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoOverlayModule, { declarations: [OverlayDirective], exports: [OverlayDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoOverlayModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                exports: [OverlayDirective],\n                declarations: [OverlayDirective]\n            }]\n    }], null, null); })();\n\nconst PrintOutputFormat = strEnum(['Pdf', 'Image']);\nconst PrintPaperFormat = strEnum([\n    'A0',\n    'A1',\n    'A2',\n    'A3',\n    'A4',\n    'A5',\n    'Letter',\n    'Legal'\n]);\nconst PrintOrientation = strEnum(['landscape', 'portrait']);\nconst PrintResolution = strEnum(['72', '96', '150', '300']);\nconst PrintSaveImageFormat = strEnum([\n    'Bmp',\n    'Gif',\n    'Jpeg',\n    'Png',\n    'Tiff'\n]);\nconst PrintLegendPosition = strEnum([\n    'none',\n    'topright',\n    'topleft',\n    'bottomleft',\n    'bottomright',\n    'newpage'\n]);\n\nclass PrintService {\n    constructor(http, messageService, activityService, languageService) {\n        this.http = http;\n        this.messageService = messageService;\n        this.activityService = activityService;\n        this.languageService = languageService;\n    }\n    print(map, options) {\n        const status$ = new Subject();\n        const paperFormat = options.paperFormat;\n        const resolution = +options.resolution; // Default is 96\n        const orientation = options.orientation;\n        const legendPostion = options.legendPosition;\n        this.activityId = this.activityService.register();\n        const doc = new jsPDF({\n            orientation,\n            format: paperFormat.toLowerCase()\n        });\n        const dimensions = [\n            doc.internal.pageSize.width,\n            doc.internal.pageSize.height\n        ];\n        const margins = [10, 10, 10, 10];\n        const width = dimensions[0] - margins[3] - margins[1];\n        const height = dimensions[1] - margins[0] - margins[2];\n        const size = [width, height];\n        let titleSizeResults = [0, 0];\n        if (options.title !== undefined) {\n            titleSizeResults = this.getTitleSize(options.title, width, height, doc); // return : size(pt) and left margin (mm)\n            this.addTitle(doc, options.title, titleSizeResults[0], margins[3] + titleSizeResults[1], titleSizeResults[0] * (25.4 / 72));\n        }\n        if (options.subtitle !== undefined) {\n            let subtitleSizeResult = 0;\n            const titleH = titleSizeResults[0];\n            subtitleSizeResult = this.getSubTitleSize(options.subtitle, width, height, doc); // return : size(pt) and left margin (mm)\n            this.addSubTitle(doc, options.subtitle, titleH * 0.7, margins[3] + subtitleSizeResult, titleH * 1.7 * (25.4 / 72));\n            margins[0] = margins[0] + titleSizeResults[0] * 0.7 * (25.4 / 72);\n        }\n        if (options.showProjection === true || options.showScale === true) {\n            this.addProjScale(doc, map, resolution, options.showProjection, options.showScale);\n        }\n        if (options.comment !== '') {\n            this.addComment(doc, options.comment);\n        }\n        this.addMap(doc, map, resolution, size, margins).subscribe((status) => __awaiter(this, void 0, void 0, function* () {\n            if (status === SubjectStatus.Done) {\n                yield this.addScale(doc, map, margins);\n                yield this.handleMeasureLayer(doc, map, margins);\n                if (options.legendPosition !== 'none') {\n                    if (['topleft', 'topright', 'bottomleft', 'bottomright'].indexOf(options.legendPosition) > -1) {\n                        yield this.addLegendSamePage(doc, map, margins, resolution, options.legendPosition);\n                    }\n                    else if (options.legendPosition === 'newpage') {\n                        yield this.addLegend(doc, map, margins, resolution);\n                    }\n                }\n                else {\n                    yield this.saveDoc(doc);\n                }\n            }\n            if (status === SubjectStatus.Done || status === SubjectStatus.Error) {\n                this.activityService.unregister(this.activityId);\n                status$.next(SubjectStatus.Done);\n            }\n        }));\n        return status$;\n    }\n    /**\n     * Add measure overlay on the map on the document when the measure layer is present\n     * @param  doc - Pdf document where measure tooltip will be added\n     * @param  map - Map of the app\n     * @param  margins - Page margins\n     */\n    handleMeasureLayer(doc, map, margins) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (map.layers.find(layer => layer.visible && layer.id.startsWith('igo-measures-'))) {\n                let canvasOverlayHTMLMeasures;\n                const mapOverlayMeasuresHTML = map.ol.getOverlayContainer();\n                yield html2canvas(mapOverlayMeasuresHTML, {\n                    scale: 1,\n                    backgroundColor: null\n                }).then(e => {\n                    canvasOverlayHTMLMeasures = e;\n                });\n                this.addCanvas(doc, canvasOverlayHTMLMeasures, margins); // this adds measure overlays\n            }\n        });\n    }\n    /**\n     * Get html code for all layers legend\n     * @param  map IgoMap\n     * @param  width The width that the legend need to be\n     * @return Html code for the legend\n     */\n    getLayersLegendHtml(map$1, width, resolution) {\n        return new Observable((observer) => {\n            let html = '';\n            const legends = getLayersLegends(map$1.layers, {\n                resolution: map$1.viewController.getResolution(),\n                extent: map$1.viewController.getExtent(),\n                projection: map$1.viewController.getOlProjection().getCode(),\n                scale: map$1.viewController.getScale(resolution),\n                size: map$1.ol.getSize()\n            });\n            if (legends.length === 0) {\n                observer.next(html);\n                observer.complete();\n                return;\n            }\n            // Define important style to be sure that all container is convert\n            // to image not just visible part\n            html += '<style media=\"screen\" type=\"text/css\">';\n            html += '.html2canvas-container { width: ' + width + 'mm !important; height: 2000px !important; }';\n            html += 'table.tableLegend {table-layout: auto;}';\n            html += 'div.styleLegend {padding-top: 5px; padding-right:5px;padding-left:5px;padding-bottom:5px;}';\n            html += '</style>';\n            // The font size will also be lowered afterwards (globally along the legend size)\n            // this allows having a good relative font size here and to keep ajusting the legend size\n            // while keeping good relative font size\n            html += '<font size=\"3\" face=\"Times\" >';\n            html += '<div class=\"styleLegend\">';\n            html += '<table class=\"tableLegend\" >';\n            // For each legend, define an html table cell\n            const images$ = legends.map((legend) => this.getDataImage(legend.url).pipe(map((dataImage) => {\n                let htmlImg = '<tr><td>' + legend.title.toUpperCase() + '</td></tr>';\n                htmlImg += '<tr><td><img src=\"' + dataImage + '\"></td></tr>';\n                return htmlImg;\n            })));\n            forkJoin(images$).subscribe((dataImages) => {\n                html = dataImages.reduce((acc, current) => (acc += current), html);\n                html += '</table>';\n                html += '</div>';\n                observer.next(html);\n                observer.complete();\n            });\n        });\n    }\n    getDataImage(url) {\n        const secureIMG = new SecureImagePipe(this.http);\n        return secureIMG.transform(url);\n    }\n    /**\n     * Get all the legend in a single image\n     * * @param  format - Image format. default value to \"png\"\n     * @return The image of the legend\n     */\n    getLayersLegendImage(map, format = 'png', doZipFile, resolution) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const status$ = new Subject();\n            // Get html code for the legend\n            const width = 200; // milimeters unit, originally define for document pdf\n            let html = yield this.getLayersLegendHtml(map, width, resolution).toPromise();\n            format = format.toLowerCase();\n            // If no legend show No LEGEND in an image\n            if (html.length === 0) {\n                html = '<font size=\"12\" face=\"Courier New\" >';\n                html += '<div align=\"center\"><b>NO LEGEND</b></div>';\n            }\n            // Create div to contain html code for legend\n            const div = window.document.createElement('div');\n            div.style.position = 'absolute';\n            div.style.top = '0';\n            // Add html code to convert in the new window\n            window.document.body.appendChild(div);\n            div.innerHTML = html;\n            yield this.timeout(1);\n            const canvas = yield html2canvas(div, { useCORS: true }).catch((e) => {\n                console.log(e);\n            });\n            if (canvas) {\n                let status = SubjectStatus.Done;\n                try {\n                    if (!doZipFile) {\n                        // Save the canvas as file\n                        this.saveCanvasImageAsFile(canvas, 'legendImage', format);\n                    }\n                    else {\n                        // Add the canvas to zip\n                        this.generateCanvaFileToZip(canvas, 'legendImage' + '.' + format);\n                    }\n                    div.parentNode.removeChild(div); // remove temp div (IE)\n                }\n                catch (err) {\n                    status = SubjectStatus.Error;\n                }\n                status$.next(status);\n            }\n            return status$;\n        });\n    }\n    getTitleSize(title, pageWidth, pageHeight, doc) {\n        const pdfResolution = 96;\n        const titleSize = Math.round(2 * (pageHeight + 145) * 0.05) / 2;\n        doc.setFont('Times');\n        doc.setFontType('Bold');\n        const width = doc.getTextWidth(title);\n        const titleWidth = doc.getStringUnitWidth(title) * titleSize / doc.internal.scaleFactor;\n        const titleTailleMinimale = Math.round(2 * (pageHeight + 150) * 0.037) / 2;\n        let titleFontSize = 0;\n        let titleMarginLeft;\n        if (titleWidth >= (pageWidth)) {\n            titleMarginLeft = 0;\n            titleFontSize = Math.round(((pageWidth / title.length) * pdfResolution) / 25.4);\n            // If the formula to find the font size gives below the defined minimum size\n            if (titleFontSize < titleTailleMinimale) {\n                titleFontSize = titleTailleMinimale;\n            }\n        }\n        else {\n            titleMarginLeft = (pageWidth - titleWidth) / 2;\n            titleFontSize = titleSize;\n        }\n        return [titleFontSize, titleMarginLeft];\n    }\n    getSubTitleSize(subtitle, pageWidth, pageHeight, doc) {\n        const subtitleSize = 0.7 * Math.round(2 * (pageHeight + 145) * 0.05) / 2; // 70% of the title's font size\n        doc.setFont('Times');\n        doc.setFontType('Bold');\n        const subtitleWidth = doc.getStringUnitWidth(subtitle) * subtitleSize / doc.internal.scaleFactor;\n        let subtitleMarginLeft;\n        if (subtitleWidth >= (pageWidth)) {\n            subtitleMarginLeft = 0;\n        }\n        else {\n            subtitleMarginLeft = (pageWidth - subtitleWidth) / 2;\n        }\n        return subtitleMarginLeft;\n    }\n    addTitle(doc, title, titleFontSize, titleMarginLeft, titleMarginTop) {\n        doc.setFont('Times');\n        doc.setFontType('Bold');\n        doc.setFontSize(titleFontSize);\n        doc.text(title, titleMarginLeft, titleMarginTop);\n    }\n    addSubTitle(doc, subtitle, subtitleFontSize, subtitleMarginLeft, subtitleMarginTop) {\n        doc.setFont('Times');\n        doc.setFontType();\n        doc.setFontSize(subtitleFontSize);\n        doc.text(subtitle, subtitleMarginLeft, subtitleMarginTop);\n    }\n    /**\n     * Add comment to the document\n     * * @param  doc - pdf document\n     * * @param  comment - Comment to add in the document\n     * * @param  size - Size of the document\n     */\n    addComment(doc, comment) {\n        const commentSize = 16;\n        const commentMarginLeft = 20;\n        const marginBottom = 5;\n        const heightPixels = doc.internal.pageSize.height - marginBottom;\n        doc.setFont('courier');\n        doc.setFontSize(commentSize);\n        doc.text(comment, commentMarginLeft, heightPixels);\n    }\n    /**\n     * Add projection and/or scale to the document\n     * @param  doc - pdf document\n     * @param  map - Map of the app\n     * @param  dpi - DPI resolution of the document\n     * @param  projection - Bool to indicate if projection need to be added\n     * @param  scale - Bool to indicate if scale need to be added\n     */\n    addProjScale(doc, map, dpi, projection, scale) {\n        const translate = this.languageService.translate;\n        const projScaleSize = 16;\n        const projScaleMarginLeft = 20;\n        const marginBottom = 15;\n        const heightPixels = doc.internal.pageSize.height - marginBottom;\n        let textProjScale = '';\n        if (projection === true) {\n            const projText = translate.instant('igo.geo.printForm.projection');\n            textProjScale += projText + ': ' + map.projection;\n        }\n        if (scale === true) {\n            if (projection === true) {\n                textProjScale += '   ';\n            }\n            const scaleText = translate.instant('igo.geo.printForm.scale');\n            const mapScale = map.viewController.getScale(dpi);\n            textProjScale += scaleText + ': ~ 1 / ' + formatScale(mapScale);\n        }\n        doc.setFont('courier');\n        doc.setFontSize(projScaleSize);\n        doc.text(textProjScale, projScaleMarginLeft, heightPixels);\n    }\n    /**\n     * Add the legend to the document\n     * @param  doc - Pdf document where legend will be added\n     * @param  map - Map of the app\n     * @param  margins - Page margins\n     */\n    addLegend(doc, map, margins, resolution) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Get html code for the legend\n            const width = doc.internal.pageSize.width;\n            const html = yield this.getLayersLegendHtml(map, width, resolution).toPromise();\n            // If no legend, save the map directly\n            if (html === '') {\n                yield this.saveDoc(doc);\n                return true;\n            }\n            // Create div to contain html code for legend\n            const div = window.document.createElement('div');\n            div.style.position = 'absolute';\n            div.style.top = '0';\n            // Add html code to convert in the new window\n            window.document.body.appendChild(div);\n            div.innerHTML = html;\n            yield this.timeout(1);\n            const canvas = yield html2canvas(div, { useCORS: true }).catch((e) => {\n                console.log(e);\n            });\n            if (canvas) {\n                const pourcentageReduction = 0.85;\n                const imageSize = [pourcentageReduction * (25.4 * canvas.width) / resolution, pourcentageReduction\n                        * (25.4 * canvas.height) / resolution];\n                let imgData;\n                doc.addPage();\n                imgData = canvas.toDataURL('image/png');\n                doc.addImage(imgData, 'PNG', 10, 10, imageSize[0], imageSize[1]);\n                div.parentNode.removeChild(div); // remove temp div (IE style)\n            }\n            yield this.saveDoc(doc);\n        });\n    }\n    /**\n     * Add the legend to the document\n     * @param  doc - Pdf document where legend will be added\n     * @param  map - Map of the app\n     * @param  margins - Page margins\n     */\n    addLegendSamePage(doc, map, margins, resolution, legendPosition) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Get html code for the legend\n            const width = doc.internal.pageSize.width;\n            const html = yield this.getLayersLegendHtml(map, width, resolution).toPromise();\n            // If no legend, save the map directly\n            if (html === '') {\n                yield this.saveDoc(doc);\n                return true;\n            }\n            // Create div to contain html code for legend\n            const div = window.document.createElement('div');\n            div.style.position = 'absolute';\n            div.style.top = '0';\n            // Add html code to convert in the new window\n            window.document.body.appendChild(div);\n            div.innerHTML = html;\n            yield this.timeout(1);\n            const canvas = yield html2canvas(div, { useCORS: true }).catch((e) => {\n                console.log(e);\n            });\n            let marginsLegend;\n            if (canvas) {\n                const pourcentageReduction = 0.85;\n                const imageSize = [pourcentageReduction * (25.4 * canvas.width) / resolution,\n                    pourcentageReduction * (25.4 * canvas.height) / resolution];\n                // Move the legend to the correct position on the page\n                if (legendPosition === 'bottomright') {\n                    marginsLegend = [doc.internal.pageSize.height - margins[2] - imageSize[1], margins[1],\n                        margins[2], doc.internal.pageSize.width - margins[1] - imageSize[0]];\n                }\n                else if (legendPosition === 'topright') {\n                    marginsLegend = [margins[0], margins[1], doc.internal.pageSize.height - margins[0] - imageSize[1],\n                        doc.internal.pageSize.width - margins[1] - imageSize[0]];\n                }\n                else if (legendPosition === 'bottomleft') {\n                    // When the legend is in the bottom left, raise the legend slightly upward so that attributions are visible\n                    marginsLegend = [doc.internal.pageSize.height - margins[2] - imageSize[1] - 15,\n                        doc.internal.pageSize.width - margins[3] - imageSize[0], margins[2] + 15, margins[3]];\n                }\n                else if (legendPosition === 'topleft') {\n                    marginsLegend = [margins[0], doc.internal.pageSize.width - margins[3] - imageSize[0],\n                        doc.internal.pageSize.height - margins[0] - imageSize[1], margins[3]];\n                }\n                this.addCanvas(doc, canvas, marginsLegend); // this adds the legend\n                div.parentNode.removeChild(div); // remove temp div (IE style)\n                yield this.saveDoc(doc);\n            }\n        });\n    }\n    /**\n     * Add scale and attributions on the map on the document\n     * @param  doc - Pdf document where legend will be added\n     * @param  map - Map of the app\n     * @param  margins - Page margins\n     */\n    addScale(doc, map, margins) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const mapSize = map.ol.getSize();\n            const extent = map.ol.getView().calculateExtent(mapSize);\n            // Get the scale and attribution\n            // we use cloneNode to modify the nodes to print without modifying it on the page, using deep:true to get children\n            let canvasOverlayHTML;\n            const mapOverlayHTML = map.ol.getOverlayContainerStopEvent();\n            // Remove the UI buttons from the nodes\n            const OverlayHTMLButton = mapOverlayHTML.getElementsByTagName('button');\n            for (const but of OverlayHTMLButton) {\n                but.setAttribute('data-html2canvas-ignore', 'true');\n            }\n            // Change the styles of hyperlink in the printed version\n            // Transform the Overlay into a canvas\n            // scale is necessary to make it in google chrome\n            // background as null because otherwise it is white and cover the map\n            // allowtaint is to allow rendering images in the attributions\n            // useCORS: true pour permettre de renderer les images (ne marche pas en local)\n            const canvas = yield html2canvas(mapOverlayHTML, {\n                scale: 1,\n                backgroundColor: null,\n                allowTaint: true,\n                useCORS: true,\n            }).then(e => {\n                canvasOverlayHTML = e;\n            });\n            this.addCanvas(doc, canvasOverlayHTML, margins); // this adds scales and attributions\n        });\n    }\n    defineNbFileToProcess(nbFileToProcess) {\n        this.nbFileToProcess = nbFileToProcess;\n    }\n    timeout(ms) {\n        return new Promise((resolve) => setTimeout(resolve, ms));\n    }\n    addCanvas(doc, canvas, margins) {\n        let image;\n        if (canvas) {\n            image = canvas.toDataURL('image/png');\n        }\n        if (image !== undefined) {\n            const imageSize = this.getImageSizeToFitPdf(doc, canvas, margins);\n            doc.addImage(image, 'PNG', margins[3], margins[0], imageSize[0], imageSize[1]);\n            doc.rect(margins[3], margins[0], imageSize[0], imageSize[1]);\n        }\n    }\n    // TODO fix printing with image resolution\n    addMap(doc, map, resolution, size, margins) {\n        const status$ = new Subject();\n        const mapSize = map.ol.getSize();\n        const extent = map.ol.getView().calculateExtent(mapSize);\n        const widthPixels = Math.round((size[0] * resolution) / 25.4);\n        const heightPixels = Math.round((size[1] * resolution) / 25.4);\n        let timeout;\n        map.ol.once('rendercomplete', (event) => {\n            const canvases = event.target.getViewport().getElementsByTagName('canvas');\n            const mapStatus$$ = map.status$.subscribe((mapStatus) => {\n                clearTimeout(timeout);\n                if (mapStatus !== SubjectStatus.Done) {\n                    return;\n                }\n                mapStatus$$.unsubscribe();\n                let status = SubjectStatus.Done;\n                try {\n                    for (const canvas of canvases) {\n                        if (canvas.width !== 0) {\n                            this.addCanvas(doc, canvas, margins);\n                        }\n                    }\n                }\n                catch (err) {\n                    status = SubjectStatus.Error;\n                    this.messageService.error(this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageBody'), this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageHeader'));\n                }\n                this.renderMap(map, mapSize, extent);\n                status$.next(status);\n            });\n            // If no loading as started after 200ms, then probably no loading\n            // is required.\n            timeout = window.setTimeout(() => {\n                mapStatus$$.unsubscribe();\n                let status = SubjectStatus.Done;\n                try {\n                    for (const canvas of canvases) {\n                        if (canvas.width !== 0) {\n                            this.addCanvas(doc, canvas, margins);\n                        }\n                    }\n                }\n                catch (err) {\n                    status = SubjectStatus.Error;\n                    this.messageService.error(this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageBody'), this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageHeader'));\n                }\n                this.renderMap(map, mapSize, extent);\n                status$.next(status);\n            }, 200);\n        });\n        this.renderMap(map, [widthPixels, heightPixels], extent);\n        return status$;\n    }\n    /**\n     * Download an image of the map with addition of informations\n     * @param  map - Map of the app\n     * @param  format - Image format. default value to \"png\"\n     * @param  projection - Indicate if projection need to be add. Default to false\n     * @param  scale - Indicate if scale need to be add. Default to false\n     * @param  legend - Indicate if the legend of layers need to be download. Default to false\n     * @param  title - Title to add for the map - Default to blank\n     * @param  subtitle - Subtitle to add for the map - Default to blank\n     * @param  comment - Comment to add for the map - Default to blank\n     * @param  doZipFile - Indicate if we do a zip with the file\n     * @return Image file of the map with extension format given as parameter\n     */\n    downloadMapImage(map, resolution, format = 'png', projection = false, scale = false, legend = false, title = '', subtitle = '', comment = '', doZipFile = true) {\n        const status$ = new Subject();\n        // const resolution = map.ol.getView().getResolution();\n        this.activityId = this.activityService.register();\n        const translate = this.languageService.translate;\n        map.ol.once('rendercomplete', (event) => {\n            format = format.toLowerCase();\n            const oldCanvas = event.target\n                .getViewport()\n                .getElementsByTagName('canvas')[0];\n            const newCanvas = document.createElement('canvas');\n            const newContext = newCanvas.getContext('2d');\n            // Postion in height to set the canvas in new canvas\n            let positionHCanvas = 0;\n            // Position in width to set the Proj/Scale in new canvas\n            let positionWProjScale = 10;\n            // Get height/width of map canvas\n            const width = oldCanvas.width;\n            let height = oldCanvas.height;\n            // Set Font to calculate comment width\n            newContext.font = '20px Calibri';\n            const commentWidth = newContext.measureText(comment).width;\n            // Add height for title if defined\n            height = title !== '' ? height + 30 : height;\n            // Add height for title if defined\n            height = subtitle !== '' ? height + 30 : height;\n            // Add height for projection or scale (same line) if defined\n            height = projection !== false || scale !== false ? height + 30 : height;\n            const positionHProjScale = height - 10;\n            // Define number of line depending of the comment length\n            const commentNbLine = Math.ceil(commentWidth / width);\n            // Add height for multiline comment if defined\n            height = comment !== '' ? height + commentNbLine * 30 : height;\n            let positionHComment = height - commentNbLine * 20 + 5;\n            // Set the new canvas with the new calculated size\n            newCanvas.width = width;\n            newCanvas.height = height;\n            // Patch Jpeg default black background to white\n            if (format === 'jpeg') {\n                newContext.fillStyle = '#ffffff';\n                newContext.fillRect(0, 0, width, height);\n                newContext.fillStyle = '#000000';\n            }\n            // If a title need to be added to canvas\n            if (title !== '') {\n                // Set font for title\n                // Adjust according to title length\n                newContext.font = '26px Calibri';\n                positionHCanvas = 30;\n                newContext.textAlign = 'center';\n                newContext.fillText(title, width / 2, 20, width * 0.9);\n            }\n            if (subtitle !== '') {\n                // Set font for subtitle\n                // Adjust according to title length\n                newContext.font = '26px Calibri';\n                positionHCanvas = 60;\n                newContext.textAlign = 'center';\n                newContext.fillText(subtitle, width / 2, 50, width * 0.9);\n            }\n            // Set font for next section\n            newContext.font = '20px Calibri';\n            // If projection need to be added to canvas\n            if (projection !== false) {\n                const projText = translate.instant('igo.geo.printForm.projection');\n                newContext.textAlign = 'start';\n                newContext.fillText(projText + ': ' + map.projection, positionWProjScale, positionHProjScale);\n                positionWProjScale += 200; // Width position change for scale position\n            }\n            // If scale need to be added to canvas\n            if (scale !== false) {\n                const scaleText = translate.instant('igo.geo.printForm.scale');\n                const mapScale = map.viewController.getScale(resolution);\n                newContext.textAlign = 'start';\n                newContext.fillText(scaleText + ': ~ 1 / ' + formatScale(mapScale), positionWProjScale, positionHProjScale);\n            }\n            // If a comment need to be added to canvas\n            if (comment !== '') {\n                newContext.textAlign = 'center';\n                // If only one line, no need to multiline the comment\n                if (commentNbLine === 1) {\n                    newContext.fillText(comment, width / 2, positionHComment);\n                }\n                else {\n                    // Separate the setenses to be approx. the same length\n                    const nbCommentChar = comment.length;\n                    const CommentLengthToCut = Math.floor(nbCommentChar / commentNbLine);\n                    let commentCurrentLine = '';\n                    let positionFirstCutChar = 0;\n                    let positionLastBlank;\n                    // Loop for the number of line calculated\n                    for (let i = 0; i < commentNbLine; i++) {\n                        // For all line except last\n                        if (commentNbLine - 1 > i) {\n                            // Get comment current line to find the right place tu cut comment\n                            commentCurrentLine = comment.substr(positionFirstCutChar, CommentLengthToCut);\n                            // Cut the setence at blank\n                            positionLastBlank = commentCurrentLine.lastIndexOf(' ');\n                            newContext.fillText(commentCurrentLine.substr(0, positionLastBlank), width / 2, positionHComment);\n                            positionFirstCutChar += positionLastBlank;\n                            // Go to next line for insertion\n                            positionHComment += 20;\n                        }\n                        else {\n                            // Don't cut last part\n                            newContext.fillText(comment.substr(positionFirstCutChar), width / 2, positionHComment);\n                        }\n                    }\n                }\n            }\n            // Add map to new canvas\n            newContext.drawImage(oldCanvas, 0, positionHCanvas);\n            let status = SubjectStatus.Done;\n            try {\n                // Save the canvas as file\n                if (!doZipFile) {\n                    this.saveCanvasImageAsFile(newCanvas, 'map', format);\n                }\n                else if (format.toLowerCase() === 'tiff') {\n                    // Add the canvas to zip\n                    this.generateCanvaFileToZip(newCanvas, 'map' + map.projection.replace(':', '_') + '.' + format);\n                }\n                else {\n                    // Add the canvas to zip\n                    this.generateCanvaFileToZip(newCanvas, 'map' + '.' + format);\n                }\n            }\n            catch (err) {\n                status = SubjectStatus.Error;\n            }\n            status$.next(status);\n            if (format.toLowerCase() === 'tiff') {\n                const tiwContent = this.getWorldFileInformation(map);\n                const blob = new Blob([tiwContent], {\n                    type: 'text/plain;charset=utf-8'\n                });\n                if (!doZipFile) {\n                    // saveAs automaticly replace ':' for '_'\n                    saveAs(blob, 'map' + map.projection + '.tfw');\n                    this.saveFileProcessing();\n                }\n                else {\n                    // Add the canvas to zip\n                    this.addFileToZip('map' + map.projection.replace(':', '_') + '.tfw', blob);\n                }\n            }\n        });\n        map.ol.renderSync();\n        return status$;\n    }\n    renderMap(map, size, extent) {\n        map.ol.updateSize();\n        map.ol.renderSync();\n    }\n    /**\n     * Save document\n     * @param  doc - Document to save\n     */\n    saveDoc(doc) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield doc.save('map.pdf', { returnPromise: true });\n        });\n    }\n    /**\n     * Calculate the best Image size to fit in pdf\n     * @param doc - Pdf Document\n     * @param canvas - Canvas of image\n     * @param margins - Page margins\n     */\n    getImageSizeToFitPdf(doc, canvas, margins) {\n        // Define variable to calculate best size to fit in one page\n        const pageHeight = doc.internal.pageSize.getHeight() - (margins[0] + margins[2]);\n        const pageWidth = doc.internal.pageSize.getWidth() - (margins[1] + margins[3]);\n        const canHeight = canvas.height;\n        const canWidth = canvas.width;\n        const heightRatio = canHeight / pageHeight;\n        const widthRatio = canWidth / pageWidth;\n        const maxRatio = heightRatio > widthRatio ? heightRatio : widthRatio;\n        const imgHeigh = maxRatio > 1 ? canHeight / maxRatio : canHeight;\n        const imgWidth = maxRatio > 1 ? canWidth / maxRatio : canWidth;\n        return [imgWidth, imgHeigh];\n    }\n    /**\n     * Get a world file information for tiff\n     * @param  map - Map of the app\n     */\n    getWorldFileInformation(map) {\n        const currentResolution = map.viewController.getResolution();\n        const currentExtent = map.viewController.getExtent(); // Return [minx, miny, maxx, maxy]\n        return [\n            currentResolution,\n            0,\n            0,\n            -currentResolution,\n            currentExtent[0] + currentResolution / 0.5,\n            currentExtent[3] - currentResolution / 0.5\n        ].join('\\n');\n    }\n    /**\n     * Save canvas image as file\n     * @param canvas - Canvas to save\n     * @param name - Name of the file\n     * @param format - file format\n     */\n    saveCanvasImageAsFile(canvas, name, format) {\n        const blobFormat = 'image/' + format;\n        const that = this;\n        try {\n            canvas.toDataURL(); // Just to make the catch trigger wihtout toBlob Error throw not catched\n            // If navigator is Internet Explorer\n            if (navigator.msSaveBlob) {\n                navigator.msSaveBlob(canvas.msToBlob(), name + '.' + format);\n                this.saveFileProcessing();\n            }\n            else {\n                canvas.toBlob((blob) => {\n                    // download image\n                    saveAs(blob, name + '.' + format);\n                    that.saveFileProcessing();\n                }, blobFormat);\n            }\n        }\n        catch (err) {\n            this.messageService.error(this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageBody'), this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageHeader'));\n        }\n    }\n    /**\n     * Add file to a zip\n     * @param canvas - File to add to the zip\n     * @param  name -Name of the fileoverview\n     */\n    generateCanvaFileToZip(canvas, name) {\n        const blobFormat = 'image/' + 'jpeg';\n        const that = this;\n        if (!this.hasOwnProperty('zipFile') ||\n            typeof this.zipFile === 'undefined') {\n            this.zipFile = new JSZip();\n        }\n        try {\n            canvas.toDataURL(); // Just to make the catch trigger wihtout toBlob Error throw not catched\n            if (navigator.msSaveBlob) {\n                this.addFileToZip(name, canvas.msToBlob());\n            }\n            else {\n                canvas.toBlob((blob) => {\n                    that.addFileToZip(name, blob);\n                }, blobFormat);\n            }\n        }\n        catch (err) {\n            this.messageService.error(this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageBody'), this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageHeader'));\n        }\n    }\n    /**\n     * Add file to zip, if all file are zipped, download\n     * @param name - Name of the files\n     * @param blob - Contain of file\n     */\n    addFileToZip(name, blob) {\n        // add file to zip\n        this.zipFile.file(name, blob);\n        this.nbFileToProcess--;\n        // If all files are proccessed\n        if (this.nbFileToProcess === 0) {\n            // Download zip file\n            this.getZipFile();\n            // Stop loading\n            this.activityService.unregister(this.activityId);\n        }\n    }\n    saveFileProcessing() {\n        this.nbFileToProcess--;\n        // If all files are proccessed\n        if (this.nbFileToProcess === 0) {\n            // Stop loading\n            this.activityService.unregister(this.activityId);\n        }\n    }\n    /**\n     * Get the zipped file\n     * @return Retun a zip file\n     */\n    getZipFile() {\n        const that = this;\n        this.zipFile.generateAsync({ type: 'blob' }).then((blob) => {\n            // 1) generate the zip file\n            saveAs(blob, 'map.zip');\n            delete that.zipFile;\n        });\n    }\n}\nPrintService.ɵfac = function PrintService_Factory(t) { return new (t || PrintService)(ɵɵinject(HttpClient), ɵɵinject(MessageService), ɵɵinject(ActivityService), ɵɵinject(LanguageService)); };\nPrintService.ɵprov = ɵɵdefineInjectable({ token: PrintService, factory: PrintService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(PrintService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: HttpClient }, { type: MessageService }, { type: ActivityService }, { type: LanguageService }]; }, null); })();\n\nfunction PrintFormComponent_mat_option_28_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 19);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const legendPosition_r6 = ctx.$implicit;\n    ɵɵproperty(\"value\", legendPosition_r6.key);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.printForm.legendPositions.\" + legendPosition_r6.value), \" \");\n} }\nfunction PrintFormComponent_mat_option_34_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 19);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const outputFormat_r7 = ctx.$implicit;\n    ɵɵproperty(\"value\", outputFormat_r7.key);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", outputFormat_r7.value, \" \");\n} }\nfunction PrintFormComponent_mat_option_40_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 19);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const paperFormat_r8 = ctx.$implicit;\n    ɵɵproperty(\"value\", paperFormat_r8.key);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.printForm.paperFormats.\" + paperFormat_r8.value), \" \");\n} }\nfunction PrintFormComponent_mat_option_46_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 19);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const imageFormat_r9 = ctx.$implicit;\n    ɵɵproperty(\"value\", imageFormat_r9.key);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", imageFormat_r9.value, \" \");\n} }\nfunction PrintFormComponent_mat_option_52_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 19);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const resolution_r10 = ctx.$implicit;\n    ɵɵproperty(\"value\", resolution_r10.key);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", resolution_r10.value + \" PPI\", \" \");\n} }\nfunction PrintFormComponent_mat_option_58_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 19);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const orientation_r11 = ctx.$implicit;\n    ɵɵproperty(\"value\", orientation_r11.key);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.geo.printForm.\" + orientation_r11.value), \" \");\n} }\nclass PrintFormComponent {\n    constructor(formBuilder) {\n        this.formBuilder = formBuilder;\n        this.outputFormats = PrintOutputFormat;\n        this.paperFormats = PrintPaperFormat;\n        this.orientations = PrintOrientation;\n        this.resolutions = PrintResolution;\n        this.imageFormats = PrintSaveImageFormat;\n        this.legendPositions = PrintLegendPosition;\n        this.isPrintService = true;\n        this.submit = new EventEmitter();\n        this.form = this.formBuilder.group({\n            title: ['', []],\n            subtitle: ['', []],\n            comment: ['', []],\n            outputFormat: ['', [Validators.required]],\n            paperFormat: ['', [Validators.required]],\n            imageFormat: ['', [Validators.required]],\n            resolution: ['', [Validators.required]],\n            orientation: ['', [Validators.required]],\n            legendPosition: ['', [Validators.required]],\n            showProjection: false,\n            showScale: false,\n            showLegend: false,\n            doZipFile: [{ hidden: this.isPrintService }]\n        });\n    }\n    get imageFormat() {\n        return this.imageFormatField.value;\n    }\n    set imageFormat(value) {\n        this.imageFormatField.setValue(value || PrintSaveImageFormat.Jpeg, {\n            onlySelf: true\n        });\n    }\n    get outputFormat() {\n        return this.outputFormatField.value;\n    }\n    set outputFormat(value) {\n        this.outputFormatField.setValue(value || PrintOutputFormat.Pdf, {\n            onlySelf: true\n        });\n    }\n    get paperFormat() {\n        return this.paperFormatField.value;\n    }\n    set paperFormat(value) {\n        this.paperFormatField.setValue(value || PrintPaperFormat.Letter, {\n            onlySelf: true\n        });\n    }\n    get orientation() {\n        return this.orientationField.value;\n    }\n    set orientation(value) {\n        this.orientationField.setValue(value || PrintOrientation.landscape, {\n            onlySelf: true\n        });\n    }\n    get resolution() {\n        return this.resolutionField.value;\n    }\n    set resolution(value) {\n        this.resolutionField.setValue(value || PrintResolution['96'], {\n            onlySelf: true\n        });\n    }\n    get legendPosition() {\n        return this.legendPositionField.value;\n    }\n    set legendPosition(value) {\n        this.legendPositionField.setValue(value || PrintLegendPosition.none, {\n            onlySelf: true\n        });\n    }\n    get title() {\n        return this.titleField.value;\n    }\n    set title(value) {\n        this.titleField.setValue(value, { onlySelf: true });\n    }\n    get subtitle() {\n        return this.subtitleField.value;\n    }\n    set subtitle(value) {\n        this.subtitleField.setValue(value, { onlySelf: true });\n    }\n    get comment() {\n        return this.commentField.value;\n    }\n    set comment(value) {\n        this.commentField.setValue(value, { onlySelf: true });\n    }\n    get showProjection() {\n        return this.showProjectionField.value;\n    }\n    set showProjection(value) {\n        this.showProjectionField.setValue(value, { onlySelf: true });\n    }\n    get showScale() {\n        return this.showScaleField.value;\n    }\n    set showScale(value) {\n        this.showScaleField.setValue(value, { onlySelf: true });\n    }\n    get showLegend() {\n        return this.showLegendField.value;\n    }\n    set showLegend(value) {\n        this.showLegendField.setValue(value, { onlySelf: true });\n    }\n    get doZipFile() {\n        return this.doZipFileField.value;\n    }\n    set doZipFile(value) {\n        this.doZipFileField.setValue(value, { onlySelf: true });\n    }\n    get outputFormatField() {\n        return this.form.controls.outputFormat;\n    }\n    get paperFormatField() {\n        return this.form.controls.paperFormat;\n    }\n    get imageFormatField() {\n        return this.form.controls.imageFormat;\n    }\n    get orientationField() {\n        return this.form.controls.orientation;\n    }\n    get resolutionField() {\n        return this.form.controls.resolution;\n    }\n    get commentField() {\n        return this.form.controls.comment;\n    }\n    get showProjectionField() {\n        return this.form.controls.showProjection;\n    }\n    get showScaleField() {\n        return this.form.controls.showScale;\n    }\n    get showLegendField() {\n        return this.form.controls.showLegend;\n    }\n    get doZipFileField() {\n        return this.form.controls.doZipFile;\n    }\n    get titleField() {\n        return this.form.controls.title;\n    }\n    get subtitleField() {\n        return this.form.controls.subtitle;\n    }\n    get legendPositionField() {\n        return this.form.controls.legendPosition;\n    }\n    ngOnInit() {\n        this.doZipFileField.setValue(false);\n    }\n    handleFormSubmit(data, isValid) {\n        data.isPrintService = this.isPrintService;\n        if (isValid) {\n            this.submit.emit(data);\n        }\n    }\n    toggleImageSaveProp() {\n        if (this.outputFormatField.value === 'Image') {\n            this.isPrintService = false;\n        }\n        else {\n            this.isPrintService = true;\n        }\n    }\n}\nPrintFormComponent.ɵfac = function PrintFormComponent_Factory(t) { return new (t || PrintFormComponent)(ɵɵdirectiveInject(FormBuilder)); };\nPrintFormComponent.ɵcmp = ɵɵdefineComponent({ type: PrintFormComponent, selectors: [[\"igo-print-form\"]], inputs: { disabled$: \"disabled$\", imageFormat: \"imageFormat\", outputFormat: \"outputFormat\", paperFormat: \"paperFormat\", orientation: \"orientation\", resolution: \"resolution\", legendPosition: \"legendPosition\", title: \"title\", subtitle: \"subtitle\", comment: \"comment\", showProjection: \"showProjection\", showScale: \"showScale\", showLegend: \"showLegend\", doZipFile: \"doZipFile\" }, outputs: { submit: \"submit\" }, decls: 65, vars: 72, consts: [[1, \"igo-form\", 3, \"formGroup\"], [1, \"igo-input-container\"], [\"matInput\", \"\", \"formControlName\", \"title\", 3, \"placeholder\"], [\"matInput\", \"\", \"formControlName\", \"subtitle\", 3, \"placeholder\"], [\"matInput\", \"\", \"formControlName\", \"comment\", 3, \"placeholder\"], [1, \"print-slide-toggle-container\", \"mat-typography\"], [\"formControlName\", \"showProjection\", 1, \"print-option\", 3, \"labelPosition\"], [\"formControlName\", \"showScale\", 1, \"print-option\", 3, \"labelPosition\"], [\"formControlName\", \"doZipFile\", 1, \"print-option\", 3, \"labelPosition\"], [\"formControlName\", \"legendPosition\", 3, \"placeholder\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"outputFormat\", 3, \"placeholder\", \"selectionChange\"], [\"formControlName\", \"paperFormat\", 3, \"placeholder\"], [\"formControlName\", \"imageFormat\", 3, \"placeholder\"], [1, \"igo-input-container\", 2, \"display\", \"none\"], [\"formControlName\", \"resolution\", 3, \"placeholder\"], [\"formControlName\", \"orientation\", 3, \"placeholder\"], [1, \"igo-form-button-group\", \"print-button-top-padding\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 3, \"disabled\", \"click\"], [3, \"value\"]], template: function PrintFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"form\", 0);\n        ɵɵelementStart(1, \"div\", 1);\n        ɵɵelementStart(2, \"mat-form-field\");\n        ɵɵelement(3, \"input\", 2);\n        ɵɵpipe(4, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(5, \"div\", 1);\n        ɵɵelementStart(6, \"mat-form-field\");\n        ɵɵelement(7, \"input\", 3);\n        ɵɵpipe(8, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(9, \"div\", 1);\n        ɵɵelementStart(10, \"mat-form-field\");\n        ɵɵelement(11, \"input\", 4);\n        ɵɵpipe(12, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(13, \"div\", 1);\n        ɵɵelementStart(14, \"div\", 5);\n        ɵɵelementStart(15, \"mat-slide-toggle\", 6);\n        ɵɵtext(16);\n        ɵɵpipe(17, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(18, \"mat-slide-toggle\", 7);\n        ɵɵtext(19);\n        ɵɵpipe(20, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(21, \"mat-slide-toggle\", 8);\n        ɵɵtext(22);\n        ɵɵpipe(23, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(24, \"div\", 1);\n        ɵɵelementStart(25, \"mat-form-field\");\n        ɵɵelementStart(26, \"mat-select\", 9);\n        ɵɵpipe(27, \"translate\");\n        ɵɵtemplate(28, PrintFormComponent_mat_option_28_Template, 3, 4, \"mat-option\", 10);\n        ɵɵpipe(29, \"keyvalue\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(30, \"div\", 1);\n        ɵɵelementStart(31, \"mat-form-field\");\n        ɵɵelementStart(32, \"mat-select\", 11);\n        ɵɵlistener(\"selectionChange\", function PrintFormComponent_Template_mat_select_selectionChange_32_listener() { return ctx.toggleImageSaveProp(); });\n        ɵɵpipe(33, \"translate\");\n        ɵɵtemplate(34, PrintFormComponent_mat_option_34_Template, 2, 2, \"mat-option\", 10);\n        ɵɵpipe(35, \"keyvalue\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(36, \"div\", 1);\n        ɵɵelementStart(37, \"mat-form-field\");\n        ɵɵelementStart(38, \"mat-select\", 12);\n        ɵɵpipe(39, \"translate\");\n        ɵɵtemplate(40, PrintFormComponent_mat_option_40_Template, 3, 4, \"mat-option\", 10);\n        ɵɵpipe(41, \"keyvalue\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(42, \"div\", 1);\n        ɵɵelementStart(43, \"mat-form-field\");\n        ɵɵelementStart(44, \"mat-select\", 13);\n        ɵɵpipe(45, \"translate\");\n        ɵɵtemplate(46, PrintFormComponent_mat_option_46_Template, 2, 2, \"mat-option\", 10);\n        ɵɵpipe(47, \"keyvalue\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(48, \"div\", 14);\n        ɵɵelementStart(49, \"mat-form-field\");\n        ɵɵelementStart(50, \"mat-select\", 15);\n        ɵɵpipe(51, \"translate\");\n        ɵɵtemplate(52, PrintFormComponent_mat_option_52_Template, 2, 2, \"mat-option\", 10);\n        ɵɵpipe(53, \"keyvalue\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(54, \"div\", 1);\n        ɵɵelementStart(55, \"mat-form-field\");\n        ɵɵelementStart(56, \"mat-select\", 16);\n        ɵɵpipe(57, \"translate\");\n        ɵɵtemplate(58, PrintFormComponent_mat_option_58_Template, 3, 4, \"mat-option\", 10);\n        ɵɵpipe(59, \"keyvalue\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(60, \"div\", 17);\n        ɵɵelementStart(61, \"button\", 18);\n        ɵɵlistener(\"click\", function PrintFormComponent_Template_button_click_61_listener() { return ctx.handleFormSubmit(ctx.form.value, ctx.form.valid); });\n        ɵɵpipe(62, \"async\");\n        ɵɵtext(63);\n        ɵɵpipe(64, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"formGroup\", ctx.form);\n        ɵɵadvance(3);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(4, 32, \"igo.geo.printForm.title\"));\n        ɵɵadvance(4);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(8, 34, \"igo.geo.printForm.subtitle\"));\n        ɵɵadvance(4);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(12, 36, \"igo.geo.printForm.comment\"));\n        ɵɵadvance(4);\n        ɵɵproperty(\"labelPosition\", \"before\");\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(17, 38, \"igo.geo.printForm.showProjection\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"labelPosition\", \"before\");\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(20, 40, \"igo.geo.printForm.showScale\"), \" \");\n        ɵɵadvance(2);\n        ɵɵstyleProp(\"display\", ctx.isPrintService ? \"none\" : \"\");\n        ɵɵproperty(\"labelPosition\", \"before\");\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(23, 42, \"igo.geo.printForm.doZipFile\"), \" \");\n        ɵɵadvance(4);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(27, 44, \"igo.geo.printForm.legendPosition\"));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(29, 46, ctx.legendPositions));\n        ɵɵadvance(4);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(33, 48, \"igo.geo.printForm.outputFormat\"));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(35, 50, ctx.outputFormats));\n        ɵɵadvance(2);\n        ɵɵstyleProp(\"display\", ctx.isPrintService ? \"block\" : \"none\");\n        ɵɵadvance(2);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(39, 52, \"igo.geo.printForm.paperFormat\"));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(41, 54, ctx.paperFormats));\n        ɵɵadvance(2);\n        ɵɵstyleProp(\"display\", ctx.isPrintService ? \"none\" : \"block\");\n        ɵɵadvance(2);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(45, 56, \"igo.geo.printForm.imageFormat\"));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(47, 58, ctx.imageFormats));\n        ɵɵadvance(4);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(51, 60, \"igo.geo.printForm.resolution\"));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(53, 62, ctx.resolutions));\n        ɵɵadvance(2);\n        ɵɵstyleProp(\"display\", ctx.isPrintService ? \"block\" : \"none\");\n        ɵɵadvance(2);\n        ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(57, 64, \"igo.geo.printForm.orientation\"));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(59, 66, ctx.orientations));\n        ɵɵadvance(3);\n        ɵɵproperty(\"disabled\", !ctx.form.valid || ɵɵpipeBind1(62, 68, ctx.disabled$));\n        ɵɵadvance(2);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(64, 70, \"igo.geo.printForm.saveBtn\"), \" \");\n    } }, directives: [ɵangular_packages_forms_forms_y, NgControlStatusGroup, FormGroupDirective, MatFormField, MatInput, DefaultValueAccessor, NgControlStatus, FormControlName, MatSlideToggle, MatSelect, NgForOf, MatButton, MatOption], pipes: [TranslatePipe, KeyValuePipe$1, AsyncPipe], styles: [\"mat-form-field[_ngcontent-%COMP%]{width:100%}.print-slide-toggle-container[_ngcontent-%COMP%]{overflow-x:hidden}.print-slide-toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:10px;width:100%}.print-slide-toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-content{width:calc(100% - 60px)}.print-option[_ngcontent-%COMP%]{display:block;margin-bottom:15px;margin-right:10px}.print-button-top-padding[_ngcontent-%COMP%]{padding-top:25px}.igo-form[_ngcontent-%COMP%]{padding:10px 5px 5px}.igo-form-button-group[_ngcontent-%COMP%]{text-align:center}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(PrintFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-print-form',\n                templateUrl: './print-form.component.html',\n                styleUrls: ['./print-form.component.scss']\n            }]\n    }], function () { return [{ type: FormBuilder }]; }, { disabled$: [{\n            type: Input\n        }], imageFormat: [{\n            type: Input\n        }], outputFormat: [{\n            type: Input\n        }], paperFormat: [{\n            type: Input\n        }], orientation: [{\n            type: Input\n        }], resolution: [{\n            type: Input\n        }], legendPosition: [{\n            type: Input\n        }], title: [{\n            type: Input\n        }], subtitle: [{\n            type: Input\n        }], comment: [{\n            type: Input\n        }], showProjection: [{\n            type: Input\n        }], showScale: [{\n            type: Input\n        }], showLegend: [{\n            type: Input\n        }], doZipFile: [{\n            type: Input\n        }], submit: [{\n            type: Output\n        }] }); })();\n\nclass PrintComponent {\n    constructor(printService) {\n        this.printService = printService;\n        this.disabled$ = new BehaviorSubject(false);\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get outputFormat() {\n        return this._outputFormat;\n    }\n    set outputFormat(value) {\n        this._outputFormat = value;\n    }\n    get paperFormat() {\n        return this._paperFormat;\n    }\n    set paperFormat(value) {\n        this._paperFormat = value;\n    }\n    get orientation() {\n        return this._orientation;\n    }\n    set orientation(value) {\n        this._orientation = value;\n    }\n    get imageFormat() {\n        return this._imageFormat;\n    }\n    set imageFormat(value) {\n        this._imageFormat = value;\n    }\n    get legendPosition() {\n        return this._legendPosition;\n    }\n    set legendPosition(value) {\n        this._legendPosition = value;\n    }\n    get resolution() {\n        return this._resolution;\n    }\n    set resolution(value) {\n        this._resolution = value;\n    }\n    handleFormSubmit(data) {\n        this.disabled$.next(true);\n        if (data.isPrintService === true) {\n            this.printService\n                .print(this.map, data)\n                .pipe(take(1))\n                .subscribe(() => {\n                this.disabled$.next(false);\n            });\n        }\n        else {\n            let nbFileToProcess = 1;\n            if (data.showLegend) {\n                nbFileToProcess++;\n            }\n            if (data.imageFormat.toLowerCase() === 'tiff') {\n                nbFileToProcess++;\n            }\n            this.printService.defineNbFileToProcess(nbFileToProcess);\n            const resolution = +data.resolution;\n            let nbRequests = data.showLegend ? 2 : 1;\n            this.printService\n                .downloadMapImage(this.map, resolution, data.imageFormat, data.showProjection, data.showScale, data.showLegend, data.title, data.subtitle, data.comment, data.doZipFile)\n                .pipe(take(1))\n                .subscribe(() => {\n                nbRequests--;\n                if (!nbRequests) {\n                    this.disabled$.next(false);\n                }\n            });\n            if (data.showLegend) {\n                this.printService\n                    .getLayersLegendImage(this.map, data.imageFormat, data.doZipFile, +resolution)\n                    .then(() => {\n                    nbRequests--;\n                    if (!nbRequests) {\n                        this.disabled$.next(false);\n                    }\n                });\n            }\n        }\n    }\n}\nPrintComponent.ɵfac = function PrintComponent_Factory(t) { return new (t || PrintComponent)(ɵɵdirectiveInject(PrintService)); };\nPrintComponent.ɵcmp = ɵɵdefineComponent({ type: PrintComponent, selectors: [[\"igo-print\"]], inputs: { map: \"map\", outputFormat: \"outputFormat\", paperFormat: \"paperFormat\", orientation: \"orientation\", imageFormat: \"imageFormat\", legendPosition: \"legendPosition\", resolution: \"resolution\" }, decls: 1, vars: 7, consts: [[3, \"outputFormat\", \"paperFormat\", \"orientation\", \"imageFormat\", \"resolution\", \"legendPosition\", \"disabled$\", \"submit\"]], template: function PrintComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-print-form\", 0);\n        ɵɵlistener(\"submit\", function PrintComponent_Template_igo_print_form_submit_0_listener($event) { return ctx.handleFormSubmit($event); });\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"outputFormat\", ctx.outputFormat)(\"paperFormat\", ctx.paperFormat)(\"orientation\", ctx.orientation)(\"imageFormat\", ctx.imageFormat)(\"resolution\", ctx.resolution)(\"legendPosition\", ctx.legendPosition)(\"disabled$\", ctx.disabled$);\n    } }, directives: [PrintFormComponent], encapsulation: 2 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(PrintComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-print',\n                templateUrl: './print.component.html'\n            }]\n    }], function () { return [{ type: PrintService }]; }, { map: [{\n            type: Input\n        }], outputFormat: [{\n            type: Input\n        }], paperFormat: [{\n            type: Input\n        }], orientation: [{\n            type: Input\n        }], imageFormat: [{\n            type: Input\n        }], legendPosition: [{\n            type: Input\n        }], resolution: [{\n            type: Input\n        }] }); })();\n\nclass IgoPrintModule {\n}\nIgoPrintModule.ɵmod = ɵɵdefineNgModule({ type: IgoPrintModule });\nIgoPrintModule.ɵinj = ɵɵdefineInjector({ factory: function IgoPrintModule_Factory(t) { return new (t || IgoPrintModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatIconModule,\n            MatButtonModule,\n            MatSelectModule,\n            MatOptionModule,\n            MatInputModule,\n            MatFormFieldModule,\n            MatSlideToggleModule,\n            IgoLanguageModule,\n            IgoKeyValueModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoPrintModule, { declarations: [PrintComponent, PrintFormComponent], imports: [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatIconModule,\n        MatButtonModule,\n        MatSelectModule,\n        MatOptionModule,\n        MatInputModule,\n        MatFormFieldModule,\n        MatSlideToggleModule,\n        IgoLanguageModule,\n        IgoKeyValueModule], exports: [PrintComponent, PrintFormComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoPrintModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatSelectModule,\n                    MatOptionModule,\n                    MatInputModule,\n                    MatFormFieldModule,\n                    MatSlideToggleModule,\n                    IgoLanguageModule,\n                    IgoKeyValueModule\n                ],\n                exports: [PrintComponent, PrintFormComponent],\n                declarations: [PrintComponent, PrintFormComponent]\n            }]\n    }], null, null); })();\n\n/**\n * Map search source factory\n * @ignore\n */\nfunction querySearchSourceFactory(config) {\n    return new QuerySearchSource(config.getConfig(`searchSources.${QuerySearchSource.id}`) || {});\n}\n/**\n * Function that returns a provider for the map search source\n */\nfunction provideQuerySearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: querySearchSourceFactory,\n        multi: true,\n        deps: [ConfigService]\n    };\n}\n\nclass IgoQueryModule {\n    static forRoot() {\n        return {\n            ngModule: IgoQueryModule,\n            providers: [provideQuerySearchSource()]\n        };\n    }\n}\nIgoQueryModule.ɵmod = ɵɵdefineNgModule({ type: IgoQueryModule });\nIgoQueryModule.ɵinj = ɵɵdefineInjector({ factory: function IgoQueryModule_Factory(t) { return new (t || IgoQueryModule)(); }, providers: [QueryService], imports: [[CommonModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoQueryModule, { declarations: [QueryDirective], imports: [CommonModule], exports: [QueryDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoQueryModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule],\n                exports: [QueryDirective],\n                declarations: [QueryDirective],\n                providers: [QueryService]\n            }]\n    }], null, null); })();\n\n/**\n * Service where all available search sources are registered.\n */\nclass SearchSourceService {\n    constructor(sources) {\n        this.sources = sources;\n    }\n    /**\n     * Return available search sources\n     * @returns Search sources\n     */\n    getSources() {\n        return this.sources;\n    }\n    /**\n     * Return enabled search sources\n     * @returns Search sources\n     */\n    getEnabledSources() {\n        return this.getSources().filter((source) => source.enabled === true);\n    }\n    /**\n     * Enable search sources of given type\n     * @param type Search type\n     * @todo It would be better to track the enabled search sources\n     *  without updating their 'enabled' property.\n     */\n    enableSourcesByType(type) {\n        this.getSources().forEach((source) => {\n            if (source.constructor.type === type) {\n                source.enabled = true;\n            }\n            else {\n                source.enabled = false;\n            }\n        });\n    }\n    /**\n     * Set Param from the selected settings\n     * @param source search-source\n     * @param setting settings\n     */\n    setParamFromSetting(source, setting) {\n        source.setParamFromSetting(setting);\n    }\n}\n\n/**\n * Function that checks whether a search source implements TextSearch\n * @param source Search source\n * @returns True if the search source implements TextSearch\n */\nfunction sourceCanSearch(source) {\n    return source.search !== undefined;\n}\n/**\n * Function that checks whether a search source implements ReverseSearch\n * @param source Search source\n * @returns True if the search source implements ReverseSearch\n */\nfunction sourceCanReverseSearch(source) {\n    return source.reverseSearch !== undefined;\n}\n/**\n * Function that checks whether a search source implements ReverseSearch AND is shown in the pointer summary\n * @param source Search source\n * @returns True if the search source implements ReverseSearch AND is shown in the pointer summary\n */\nfunction sourceCanReverseSearchAsSummary(source) {\n    return source.reverseSearch !== undefined && source.showInPointerSummary === true;\n}\n/**\n * Return a search result out of an Feature. This is used to adapt\n * the IGO query module to the new Feature/SearchResult interfaces\n * @param feature feature\n * @param source Search source\n * @returns SearchResult\n */\nfunction featureToSearchResult(feature, source) {\n    feature.sourceId = source.getId();\n    return {\n        source,\n        data: feature,\n        meta: {\n            dataType: FEATURE,\n            id: feature.meta.id,\n            title: feature.meta.title,\n            icon: feature.meta.icon || 'map-marker'\n        }\n    };\n}\nfunction findDiff(str1, str2) {\n    let diff = '';\n    str2.split('').forEach((val, i) => {\n        if (val !== str1.charAt(i)) {\n            diff += val;\n        }\n    });\n    return diff;\n}\n/**\n * Return a score calculation based on \"from\" term with the \"to\" term,\n * where the perfect match is 100 and a total difference is 0 or under.\n * @param from string\n * @param to string\n * @param caseSensitive boolean\n * @returns number\n */\nfunction computeTermSimilarity(from, to, caseSensitive = false) {\n    if (!from || !to) {\n        return 0;\n    }\n    const termFrom = caseSensitive ? from : from.toLowerCase();\n    const termTo = caseSensitive ? to : to.toLowerCase();\n    const fromToDiff = findDiff(termFrom, termTo);\n    const toFromDiff = findDiff(termTo, termFrom);\n    const totalDiff = fromToDiff + toFromDiff;\n    let delta = 0;\n    if (totalDiff.length) {\n        delta = totalDiff.length / termFrom.length * 100;\n    }\n    return 100 - Math.floor(delta);\n}\n\n/**\n * This service perform researches in all the search sources enabled.\n * It returns Research objects who's 'request' property needs to be\n * subscribed to in order to trigger the research. This services has\n * keeps internal state of the researches it performed\n * and the results they yielded.\n */\nclass SearchService {\n    constructor(searchSourceService, mapService) {\n        this.searchSourceService = searchSourceService;\n        this.mapService = mapService;\n    }\n    /**\n     * Perform a research by text\n     * @param term Any text\n     * @returns Researches\n     */\n    search(term, options = {}) {\n        var _a, _b;\n        if (!this.termIsValid(term)) {\n            return [];\n        }\n        const proj = ((_a = this.mapService.getMap()) === null || _a === void 0 ? void 0 : _a.projection) || 'EPSG:3857';\n        const response = stringToLonLat(term, proj, {\n            forceNA: options.forceNA\n        });\n        if (response.lonLat) {\n            return this.reverseSearch(response.lonLat, { distance: response.radius, conf: response.conf });\n        }\n        else if (response.message) {\n            console.log(response.message);\n        }\n        options.extent = (_b = this.mapService\n            .getMap()) === null || _b === void 0 ? void 0 : _b.viewController.getExtent('EPSG:4326');\n        let sources;\n        if (options.getEnabledOnly || options.getEnabledOnly === undefined) {\n            sources = this.searchSourceService.getEnabledSources();\n        }\n        else {\n            sources = this.searchSourceService.getSources();\n        }\n        if (options.sourceId) {\n            sources = sources.filter((source) => source.getId() === options.sourceId);\n        }\n        else if (options.searchType) {\n            sources = sources.filter((source) => source.getType() === options.searchType);\n        }\n        sources = sources.filter(sourceCanSearch);\n        return this.searchSources(sources, term, options);\n    }\n    /**\n     * Perform a research by lon/lat\n     * @param lonLat Any lon/lat coordinates\n     * @returns Researches\n     */\n    reverseSearch(lonLat, options, asPointerSummary = false) {\n        const reverseSourceFonction = asPointerSummary\n            ? sourceCanReverseSearchAsSummary\n            : sourceCanReverseSearch;\n        const sources = this.searchSourceService\n            .getEnabledSources()\n            .filter(reverseSourceFonction);\n        return this.reverseSearchSources(sources, lonLat, options || {});\n    }\n    /**\n     * Create a text research out of all given search sources\n     * @param sources Search sources that implement TextSearch\n     * @param term Search term\n     * @returns Observable of Researches\n     */\n    searchSources(sources, term, options) {\n        return sources.map((source) => {\n            return {\n                request: source.search(term, options),\n                reverse: false,\n                source\n            };\n        });\n    }\n    /**\n     * Create a reverse research out of all given search sources\n     * @param sources Search sources that implement ReverseSearch\n     * @param lonLat Any lon/lat coordinates\n     * @returns Observable of Researches\n     */\n    reverseSearchSources(sources, lonLat, options) {\n        return sources.map((source) => {\n            return {\n                request: source.reverseSearch(lonLat, options),\n                reverse: true,\n                source\n            };\n        });\n    }\n    /**\n     * Validate that a search term is valid\n     * @param term Search term\n     * @returns True if the search term is valid\n     */\n    termIsValid(term) {\n        return typeof term === 'string' && term !== '';\n    }\n}\nSearchService.ɵfac = function SearchService_Factory(t) { return new (t || SearchService)(ɵɵinject(SearchSourceService), ɵɵinject(MapService)); };\nSearchService.ɵprov = ɵɵdefineInjectable({ token: SearchService, factory: SearchService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SearchService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: SearchSourceService }, { type: MapService }]; }, null); })();\n\nclass DirectionsSource {\n}\n\nclass DirectionsSourceService {\n    constructor(sources) {\n        this.sources = sources;\n    }\n}\nfunction directionsSourceServiceFactory(sources) {\n    return new DirectionsSourceService(sources);\n}\nfunction provideDirectionsSourceService() {\n    return {\n        provide: DirectionsSourceService,\n        useFactory: directionsSourceServiceFactory,\n        deps: [DirectionsSource]\n    };\n}\n\nclass DirectionsService {\n    constructor(directionsSourceService) {\n        this.directionsSourceService = directionsSourceService;\n    }\n    route(coordinates, directionsOptions = {}) {\n        if (coordinates.length === 0) {\n            return;\n        }\n        return this.directionsSourceService.sources\n            .filter((source) => source.enabled)\n            .map((source) => this.routeSource(source, coordinates, directionsOptions));\n    }\n    routeSource(source, coordinates, directionsOptions = {}) {\n        const request = source.route(coordinates, directionsOptions);\n        return request;\n    }\n}\nDirectionsService.ɵfac = function DirectionsService_Factory(t) { return new (t || DirectionsService)(ɵɵinject(DirectionsSourceService)); };\nDirectionsService.ɵprov = ɵɵdefineInjectable({ token: DirectionsService, factory: DirectionsService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DirectionsService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: DirectionsSourceService }]; }, null); })();\n\nclass DirectionsFormService {\n    constructor() { }\n    getStopsCoordinates() {\n        const stopsCoordinates = [];\n        if (this.stops) {\n            this.stops.forEach(stop => {\n                stopsCoordinates.push(stop.stopCoordinates);\n            });\n        }\n        return stopsCoordinates;\n    }\n    setStops(stops) {\n        this.stops = stops;\n    }\n    getStops() {\n        return this.stops;\n    }\n}\nDirectionsFormService.ɵfac = function DirectionsFormService_Factory(t) { return new (t || DirectionsFormService)(); };\nDirectionsFormService.ɵprov = ɵɵdefineInjectable({ token: DirectionsFormService, factory: DirectionsFormService.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DirectionsFormService, [{\n        type: Injectable\n    }], function () { return []; }, null); })();\n\nfunction DirectionsFormComponent_div_1_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 17);\n    ɵɵlistener(\"click\", function DirectionsFormComponent_div_1_button_4_Template_button_click_0_listener() { ɵɵrestoreView(_r16); const i_r7 = ɵɵnextContext().index; const ctx_r14 = ɵɵnextContext(); return ctx_r14.geolocateStop(i_r7); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 18);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.directionsForm.geolocate\"));\n} }\nfunction DirectionsFormComponent_div_1_button_8_Template(rf, ctx) { if (rf & 1) {\n    const _r19 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 19);\n    ɵɵlistener(\"click\", function DirectionsFormComponent_div_1_button_8_Template_button_click_0_listener() { ɵɵrestoreView(_r19); const i_r7 = ɵɵnextContext().index; const ctx_r17 = ɵɵnextContext(); return ctx_r17.clearStop(i_r7); });\n    ɵɵelement(1, \"mat-icon\", 20);\n    ɵɵelementEnd();\n} }\nfunction DirectionsFormComponent_div_1_mat_optgroup_11_mat_option_1_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-option\", 23);\n    ɵɵlistener(\"onSelectionChange\", function DirectionsFormComponent_div_1_mat_optgroup_11_mat_option_1_Template_mat_option_onSelectionChange_0_listener() { ɵɵrestoreView(_r25); const result_r22 = ctx.$implicit; const i_r7 = ɵɵnextContext(2).index; const ctx_r23 = ɵɵnextContext(); return ctx_r23.chooseProposal(result_r22, i_r7); });\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const result_r22 = ctx.$implicit;\n    ɵɵproperty(\"value\", result_r22.meta ? result_r22.meta.title : \"\")(\"matTooltip\", result_r22.meta ? result_r22.meta.title : \"\");\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", result_r22.meta ? result_r22.meta.title : \"\", \" \");\n} }\nfunction DirectionsFormComponent_div_1_mat_optgroup_11_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-optgroup\", 21);\n    ɵɵtemplate(1, DirectionsFormComponent_div_1_mat_optgroup_11_mat_option_1_Template, 2, 3, \"mat-option\", 22);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const source_r20 = ctx.$implicit;\n    ɵɵproperty(\"label\", source_r20.source.title)(\"disabled\", source_r20.source.enabled === false);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", source_r20.results);\n} }\nfunction DirectionsFormComponent_div_1_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 24);\n    ɵɵlistener(\"click\", function DirectionsFormComponent_div_1_button_12_Template_button_click_0_listener() { ɵɵrestoreView(_r28); const i_r7 = ɵɵnextContext().index; const ctx_r26 = ɵɵnextContext(); return ctx_r26.removeStop(i_r7); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 25);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.directionsForm.removeStop\"));\n} }\nfunction DirectionsFormComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r30 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 8, 9);\n    ɵɵelementStart(2, \"mat-list-item\", 10);\n    ɵɵelementStart(3, \"div\", 11);\n    ɵɵtemplate(4, DirectionsFormComponent_div_1_button_4_Template, 3, 3, \"button\", 12);\n    ɵɵelementStart(5, \"mat-form-field\");\n    ɵɵelementStart(6, \"input\", 13);\n    ɵɵlistener(\"focus\", function DirectionsFormComponent_div_1_Template_input_focus_6_listener() { ɵɵrestoreView(_r30); const i_r7 = ctx.index; const ctx_r29 = ɵɵnextContext(); return ctx_r29.focus(i_r7); })(\"keyup\", function DirectionsFormComponent_div_1_Template_input_keyup_6_listener($event) { ɵɵrestoreView(_r30); const i_r7 = ctx.index; const ctx_r31 = ɵɵnextContext(); return ctx_r31.keyup(i_r7, $event); })(\"keydown.enter\", function DirectionsFormComponent_div_1_Template_input_keydown_enter_6_listener($event) { ɵɵrestoreView(_r30); const ctx_r32 = ɵɵnextContext(); return ctx_r32.prevent($event); });\n    ɵɵpipe(7, \"translate\");\n    ɵɵelementEnd();\n    ɵɵtemplate(8, DirectionsFormComponent_div_1_button_8_Template, 2, 0, \"button\", 14);\n    ɵɵelementStart(9, \"mat-autocomplete\", null, 15);\n    ɵɵtemplate(11, DirectionsFormComponent_div_1_mat_optgroup_11_Template, 2, 3, \"mat-optgroup\", 16);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵtemplate(12, DirectionsFormComponent_div_1_button_12_Template, 3, 3, \"button\", 6);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const stop_r6 = ctx.$implicit;\n    const i_r7 = ctx.index;\n    const _r11 = ɵɵreference(10);\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵproperty(\"formGroupName\", i_r7);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r0.map.geolocationFeature);\n    ɵɵadvance(2);\n    ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(7, 7, \"igo.geo.directionsForm.\" + stop_r6.value.directionsText));\n    ɵɵproperty(\"matAutocomplete\", _r11);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", stop_r6.value && (stop_r6.value.stopPoint.length > 0 || stop_r6.value.stopProposals.length > 0));\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngForOf\", stop_r6.value.stopProposals);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", i_r7 !== 0 && i_r7 !== ctx_r0.stops.length - 1);\n} }\nfunction DirectionsFormComponent_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 3);\n    ɵɵlistener(\"click\", function DirectionsFormComponent_button_6_Template_button_click_0_listener() { ɵɵrestoreView(_r34); const ctx_r33 = ɵɵnextContext(); return ctx_r33.zoomRoute(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 26);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.directionsForm.zoomRoute\"));\n} }\nfunction DirectionsFormComponent_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r36 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 24);\n    ɵɵlistener(\"click\", function DirectionsFormComponent_button_7_Template_button_click_0_listener() { ɵɵrestoreView(_r36); const ctx_r35 = ɵɵnextContext(); return ctx_r35.resetForm(true); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 27);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.directionsForm.resetDirectionsBtn\"));\n} }\nfunction DirectionsFormComponent_button_8_Template(rf, ctx) { if (rf & 1) {\n    const _r38 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 3);\n    ɵɵlistener(\"click\", function DirectionsFormComponent_button_8_Template_button_click_0_listener() { ɵɵrestoreView(_r38); const ctx_r37 = ɵɵnextContext(); return ctx_r37.copyDirectionsToClipboard(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 28);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.directionsForm.copy\"));\n} }\nfunction DirectionsFormComponent_button_9_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 3);\n    ɵɵlistener(\"click\", function DirectionsFormComponent_button_9_Template_button_click_0_listener() { ɵɵrestoreView(_r40); const ctx_r39 = ɵɵnextContext(); return ctx_r39.copyLinkToClipboard(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 29);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.geo.directionsForm.link\"));\n} }\nfunction DirectionsFormComponent_div_10_mat_form_field_1_mat_option_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 36);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const pathDirections_r45 = ctx.$implicit;\n    const cnt_r46 = ctx.index;\n    const ctx_r44 = ɵɵnextContext(3);\n    ɵɵproperty(\"value\", pathDirections_r45);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate3(\" Option \", cnt_r46 + 1, \" : \", ctx_r44.formatDistance(pathDirections_r45.distance), \" (\", ctx_r44.formatDuration(pathDirections_r45.duration), \") \");\n} }\nfunction DirectionsFormComponent_div_10_mat_form_field_1_Template(rf, ctx) { if (rf & 1) {\n    const _r48 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\");\n    ɵɵelementStart(1, \"mat-select\", 34);\n    ɵɵlistener(\"selectionChange\", function DirectionsFormComponent_div_10_mat_form_field_1_Template_mat_select_selectionChange_1_listener() { ɵɵrestoreView(_r48); const ctx_r47 = ɵɵnextContext(2); return ctx_r47.changeRoute(); })(\"ngModelChange\", function DirectionsFormComponent_div_10_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) { ɵɵrestoreView(_r48); const ctx_r49 = ɵɵnextContext(2); return ctx_r49.activeRoute = $event; });\n    ɵɵpipe(2, \"translate\");\n    ɵɵtemplate(3, DirectionsFormComponent_div_10_mat_form_field_1_mat_option_3_Template, 2, 4, \"mat-option\", 35);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r41 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"placeholder\", ɵɵpipeBind1(2, 3, \"igo.geo.directionsForm.drivingOptions\"));\n    ɵɵproperty(\"ngModel\", ctx_r41.activeRoute);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", ctx_r41.routesResults);\n} }\nfunction DirectionsFormComponent_div_10_mat_divider_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"mat-divider\");\n} }\nfunction DirectionsFormComponent_div_10_mat_list_item_8_Template(rf, ctx) { if (rf & 1) {\n    const _r53 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\", 37);\n    ɵɵlistener(\"mouseenter\", function DirectionsFormComponent_div_10_mat_list_item_8_Template_mat_list_item_mouseenter_0_listener() { ɵɵrestoreView(_r53); const step_r50 = ctx.$implicit; const ctx_r52 = ɵɵnextContext(2); return ctx_r52.showSegment(step_r50); })(\"click\", function DirectionsFormComponent_div_10_mat_list_item_8_Template_mat_list_item_click_0_listener() { ɵɵrestoreView(_r53); const step_r50 = ctx.$implicit; const ctx_r54 = ɵɵnextContext(2); return ctx_r54.showSegment(step_r50, true); });\n    ɵɵelement(1, \"mat-icon\", 38);\n    ɵɵelementStart(2, \"h4\", 39);\n    ɵɵtext(3);\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"h4\", 40);\n    ɵɵtext(5);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const step_r50 = ctx.$implicit;\n    const cnt_r51 = ctx.index;\n    const ctx_r43 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"svgIcon\", ctx_r43.formatStep(step_r50, cnt_r51).image);\n    ɵɵproperty(\"ngClass\", ctx_r43.formatStep(step_r50, cnt_r51).cssClass);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate2(\"\", cnt_r51 + 1, \". \", ctx_r43.formatStep(step_r50, cnt_r51).instruction, \"\");\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ctx_r43.formatDistance(step_r50.distance));\n} }\nfunction DirectionsFormComponent_div_10_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 11);\n    ɵɵtemplate(1, DirectionsFormComponent_div_10_mat_form_field_1_Template, 4, 5, \"mat-form-field\", 30);\n    ɵɵtemplate(2, DirectionsFormComponent_div_10_mat_divider_2_Template, 1, 0, \"mat-divider\", 30);\n    ɵɵelementStart(3, \"mat-list\");\n    ɵɵelementStart(4, \"h2\", 31);\n    ɵɵtext(5);\n    ɵɵelementEnd();\n    ɵɵelementStart(6, \"h2\", 32);\n    ɵɵtext(7);\n    ɵɵelementEnd();\n    ɵɵtemplate(8, DirectionsFormComponent_div_10_mat_list_item_8_Template, 6, 5, \"mat-list-item\", 33);\n    ɵɵelement(9, \"mat-divider\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r5.routesResults && ctx_r5.routesResults.length > 1);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r5.routesResults && ctx_r5.routesResults.length === 0);\n    ɵɵadvance(3);\n    ɵɵtextInterpolate(ctx_r5.activeRoute.title);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate2(\"\", ctx_r5.formatDistance(ctx_r5.activeRoute.distance), \", \", ctx_r5.formatDuration(ctx_r5.activeRoute.duration), \"\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r5.activeRoute.steps);\n} }\nclass DirectionsFormComponent {\n    constructor(formBuilder, directionsService, languageService, messageService, searchService, queryService, directionsFormService, changeDetectorRefs, route) {\n        this.formBuilder = formBuilder;\n        this.directionsService = directionsService;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.searchService = searchService;\n        this.queryService = queryService;\n        this.directionsFormService = directionsFormService;\n        this.changeDetectorRefs = changeDetectorRefs;\n        this.route = route;\n        this.invalidKeys = ['Control', 'Shift', 'Alt'];\n        this.projection = 'EPSG:4326';\n        this.routesQueries$$ = [];\n        this.stream$ = new Subject();\n        this.activeRoute$ = new BehaviorSubject(undefined);\n        this.focusOnStop = false;\n        this.focusKey = [];\n        this.debounce = 200;\n        this.length = 2;\n        this.stopsStore$ = new BehaviorSubject(undefined);\n        this.activeRouteDescription = new EventEmitter();\n    }\n    get activeRoute() {\n        return this._activeRoute;\n    }\n    set activeRoute(value) {\n        this._activeRoute = value;\n        if (value && this.activeRoute$.getValue() && value.id !== this.activeRoute$.getValue().id) {\n            this.activeRoute$.next(value);\n        }\n        this.activeRouteDescription.emit(this.directionsToText());\n    }\n    /**\n     * The stops store\n     */\n    get stopsStore() {\n        return this._stopsStore;\n    }\n    set stopsStore(value) {\n        this._stopsStore = value;\n        this.stopsStore$.next(value);\n    }\n    get routeFromFeatureDetail() {\n        return this._routeFromFeatureDetail;\n    }\n    set routeFromFeatureDetail(value) {\n        this._routeFromFeatureDetail = value;\n    }\n    changeRoute() {\n        this.showRouteGeometry(true);\n    }\n    prevent(event) {\n        event.preventDefault();\n    }\n    ngOnInit() {\n        this.queryService.queryEnabled = false;\n        this.focusOnStop = false;\n        this.browserLanguage = this.languageService.getLanguage();\n        this.stopsForm = this.formBuilder.group({\n            directionsType: 'car',\n            directionsMode: 'driving',\n            stopOrderPriority: true,\n            directionsFixedStartEnd: false,\n            stops: this.formBuilder.array([\n                this.createStop('start'),\n                this.createStop('end')\n            ])\n        });\n        setTimeout(() => {\n            this.initStores();\n            this.initOlInteraction();\n        }, 1);\n        this.subscribeToFormChange();\n        this.routesQueries$$.push(this.stream$\n            .pipe(debounceTime(this.debounce), distinctUntilChanged())\n            .subscribe((term) => this.handleTermChanged(term)));\n        this.stopsStore$.subscribe(() => {\n            if (this.routeFromFeatureDetail === true) {\n                this.directionsFormService.setStops([]);\n                setTimeout(() => {\n                    this.resetForm(false);\n                    for (const feature of this.stopsStore.all()) {\n                        if (feature.properties.id && feature.properties.id.toString().startsWith('directionsStop')) {\n                            this.stopsStore.delete(feature);\n                        }\n                    }\n                    if (this.stopsStore.all().length === 2) {\n                        let i = 0;\n                        const coordinates = [];\n                        for (const feature of this.stopsStore.all()) {\n                            coordinates.push(feature.geometry.coordinates);\n                            this.handleLocationProposals(feature.geometry.coordinates, i);\n                            this.chooseProposal(feature, i);\n                            i++;\n                        }\n                        this.writeStopsToFormService(coordinates);\n                        const routeResponse = this.directionsService.route(coordinates, {});\n                        if (routeResponse) {\n                            routeResponse.map(res => this.routesQueries$$.push(res.subscribe(route => {\n                                this.routesResults = route;\n                                this.activeRoute = this.routesResults[0];\n                                this.showRouteGeometry(true);\n                                this.changeDetectorRefs.detectChanges();\n                            })));\n                        }\n                    }\n                    else if (this.stopsStore.all().length === 1) {\n                        this.handleLocationProposals(this.stopsStore.all()[0].geometry.coordinates, 1);\n                        this.chooseProposal(this.stopsStore.all()[0], 1);\n                        this.writeStopsToFormService(this.stopsStore.all()[0].geometry.coordinates);\n                    }\n                }, 1);\n                this.routeFromFeatureDetail = false;\n            }\n        });\n    }\n    ngOnDestroy() {\n        this.unsubscribeRoutesQueries();\n        this.unlistenSingleClick();\n        this.queryService.queryEnabled = true;\n        this.freezeStores();\n        this.writeStopsToFormService();\n    }\n    initStores() {\n        const loadingStrategy = new FeatureStoreLoadingStrategy({\n            motion: FeatureMotion.None\n        });\n        // STOP STORE\n        const stopsStore = this.stopsStore;\n        const stopsLayer = new VectorLayer({\n            title: this.languageService.translate.instant('igo.geo.directionsForm.stopLayer'),\n            zIndex: 911,\n            source: new FeatureDataSource(),\n            showInLayerList: true,\n            workspace: {\n                enabled: false,\n            },\n            exportable: true,\n            browsable: false,\n            style: stopMarker\n        });\n        tryBindStoreLayer(stopsStore, stopsLayer);\n        tryAddLoadingStrategy(stopsStore, loadingStrategy);\n        // ROUTE AND VERTEX STORE\n        const routeStore = this.routeStore;\n        const routeLayer = new VectorLayer({\n            title: this.languageService.translate.instant('igo.geo.directionsForm.routeLayer'),\n            zIndex: 910,\n            source: new FeatureDataSource(),\n            showInLayerList: true,\n            workspace: {\n                enabled: false,\n            },\n            exportable: true,\n            browsable: false,\n            style: stopMarker\n        });\n        tryBindStoreLayer(routeStore, routeLayer);\n        tryAddLoadingStrategy(routeStore, loadingStrategy);\n    }\n    initOlInteraction() {\n        let selectedStopFeature;\n        this.selectStop = new Select({\n            layers: [this.stopsStore.layer.ol],\n            condition: pointerMove,\n            hitTolerance: 7,\n            filter: feature => {\n                return feature.get('type') === 'stop';\n            }\n        });\n        this.selectStop.on('select', evt => {\n            selectedStopFeature = evt.target.getFeatures()[0];\n        });\n        this.translateStop = new Translate({\n            layers: [this.stopsStore.layer.ol],\n            features: selectedStopFeature\n            // TODO In Openlayers >= 6.x, filter is now allowed.\n        });\n        this.translateStop.on('translating', evt => {\n            const features = evt.features;\n            if (features.getLength() === 0) {\n                return;\n            }\n            this.executeTranslation(features, false, 50, true);\n        });\n        this.translateStop.on('translateend', evt => {\n            const features = evt.features;\n            if (features.getLength() === 0) {\n                return;\n            }\n            this.executeTranslation(features, true, 0, false);\n        });\n        this.selectedRoute = new Select({\n            layers: [this.routeStore.layer.ol],\n            condition: click,\n            hitTolerance: 7,\n            filter: feature => {\n                return feature.getId() === 'route';\n            }\n        });\n        this.selectedRoute.on('select', evt => {\n            if (this.focusOnStop === false) {\n                const selectCoordinates = transform(evt.mapBrowserEvent.coordinate, this.map.projection, this.projection);\n                this.addStop();\n                const pos = this.stops.length - 2;\n                this.stops.at(pos).patchValue({ stopCoordinates: selectCoordinates });\n                this.handleLocationProposals(selectCoordinates, pos);\n                this.addStopOverlay(selectCoordinates, pos);\n                this.selectedRoute.getFeatures().clear();\n            }\n            this.selectedRoute.getFeatures().clear();\n        });\n        this.map.ol.addInteraction(this.selectStop);\n        this.map.ol.addInteraction(this.translateStop);\n        this.map.ol.addInteraction(this.selectedRoute);\n    }\n    subscribeToFormChange() {\n        this.routesQueries$$.push(this.stopsForm.valueChanges\n            .pipe(debounceTime(this.debounce))\n            .subscribe(val => {\n            this.writeStopsToFormService();\n        }));\n    }\n    /**\n     * Freeze any store, meaning the layer is removed, strategies are deactivated\n     * and some listener removed\n     * @internal\n     */\n    freezeStores() {\n        const stopsStore = this.stopsStore;\n        const routeStore = this.routeStore;\n        this.map.ol.removeInteraction(this.selectStop);\n        this.map.ol.removeInteraction(this.translateStop);\n        this.map.ol.removeInteraction(this.selectedRoute);\n        stopsStore.deactivateStrategyOfType(FeatureStoreLoadingStrategy);\n        routeStore.deactivateStrategyOfType(FeatureStoreLoadingStrategy);\n    }\n    executeTranslation(features, reverseSearchProposal = false, delay = 0, overview = false) {\n        this.routeStore.clear();\n        const firstFeature = features.getArray()[0];\n        const translatedID = firstFeature.getId();\n        const translatedPos = translatedID.split('_');\n        let p;\n        switch (translatedPos[1]) {\n            case 'start':\n                p = 0;\n                break;\n            case 'end':\n                p = this.stops.length - 1;\n                break;\n            default:\n                p = Number(translatedPos[1]);\n                break;\n        }\n        const translationCoordinates = transform(firstFeature.getGeometry().getCoordinates(), this.map.projection, this.projection);\n        this.stops\n            .at(p)\n            .patchValue({\n            stopCoordinates: translationCoordinates,\n            stopProposals: []\n        });\n        if (reverseSearchProposal) {\n            this.handleLocationProposals(translationCoordinates, p);\n        }\n        const directionsOptions = {\n            steps: true,\n            overview: false,\n            alternatives: true\n        };\n        if (overview) {\n            directionsOptions.overview = true;\n            directionsOptions.steps = false;\n            directionsOptions.alternatives = false;\n        }\n        if (delay > 0) {\n            if (typeof this.lastTimeoutRequest !== 'undefined') {\n                // cancel timeout when the mouse moves\n                clearTimeout(this.lastTimeoutRequest);\n            }\n            this.lastTimeoutRequest = setTimeout(() => {\n                this.getRoutes(undefined, directionsOptions);\n            }, delay);\n        }\n        else {\n            clearTimeout(this.lastTimeoutRequest);\n            this.getRoutes(undefined, directionsOptions);\n        }\n    }\n    handleLocationProposals(coordinates, stopIndex) {\n        const groupedLocations = [];\n        const roundedCoordinates = [\n            coordinates[0].toFixed(5),\n            coordinates[1].toFixed(5)\n        ];\n        this.stops\n            .at(stopIndex)\n            .patchValue({ stopPoint: roundedCoordinates.join(',') });\n        this.searchService\n            .reverseSearch(coordinates, { zoom: this.map.viewController.getZoom() })\n            .map(res => this.routesQueries$$.push(res.request.pipe(map(f => f)).subscribe(results => {\n            results.forEach(result => {\n                if (groupedLocations.filter(f => f.source === result.source)\n                    .length === 0) {\n                    groupedLocations.push({\n                        source: result.source,\n                        results: results.map(r => r.data)\n                    });\n                }\n            });\n            this.stops\n                .at(stopIndex)\n                .patchValue({ stopProposals: groupedLocations });\n            // TODO: Prefer another source?\n            if (results[0]) {\n                if (results[0].source.getId() === 'icherchereverse') {\n                    // prefer address type.\n                    let resultPos = 0;\n                    for (let i = 0; i < results.length; i++) {\n                        const feature = results[i].data;\n                        if (feature.properties.type === 'adresses') {\n                            resultPos = i;\n                            break;\n                        }\n                    }\n                    this.stops.at(stopIndex).patchValue({\n                        stopPoint: getEntityTitle(results[resultPos])\n                    });\n                    if (results[resultPos].data.geometry.type === 'Point') {\n                        this.stops.at(stopIndex).patchValue({\n                            stopCoordinates: results[resultPos].data.geometry.coordinates\n                        });\n                    }\n                    else {\n                        // Not moving the translated point Only to suggest value into the UI.\n                    }\n                }\n                else if (results[0].source.getId() === 'coordinatesreverse') {\n                    this.stops.at(stopIndex).patchValue({\n                        stopPoint: [\n                            results[0].data.geometry.coordinates[0].toFixed(5),\n                            results[0].data.geometry.coordinates[1].toFixed(5)\n                        ].join(',')\n                    });\n                    if (results[0].data.geometry.type === 'Point') {\n                        this.stops.at(stopIndex).patchValue({\n                            stopCoordinates: results[0].data.geometry.coordinates\n                        });\n                    }\n                    else {\n                        // Not moving the translated point Only to suggest value into the UI.\n                    }\n                }\n            }\n            else {\n                this.stops\n                    .at(stopIndex)\n                    .patchValue({\n                    stopPoint: roundedCoordinates.join(','),\n                    stopProposals: []\n                });\n            }\n            this.changeDetectorRefs.detectChanges();\n        })));\n    }\n    directionsText(index, stopsCounts = this.stops.length) {\n        if (index === 0) {\n            return 'start';\n        }\n        else if (index === stopsCounts - 1 || stopsCounts === 1) {\n            return 'end';\n        }\n        else {\n            return 'intermediate';\n        }\n    }\n    raiseStop(index) {\n        if (index > 0) {\n            this.moveStop(index, -1);\n        }\n    }\n    lowerStop(index) {\n        if (index < this.stops.length - 1) {\n            this.moveStop(index, 1);\n        }\n    }\n    moveStop(index, diff) {\n        const fromValue = this.stops.at(index);\n        this.removeStop(index);\n        this.stops.insert(index + diff, fromValue);\n        this.stops\n            .at(index)\n            .patchValue({ directionsText: this.directionsText(index) });\n        this.stops\n            .at(index + diff)\n            .patchValue({ directionsText: this.directionsText(index + diff) });\n        if (this.stops.at(index).value.stopCoordinates) {\n            this.addStopOverlay(this.stops.at(index).value.stopCoordinates, index);\n        }\n        if (this.stops.at(index + diff).value.stopCoordinates) {\n            this.addStopOverlay(this.stops.at(index + diff).value.stopCoordinates, index + diff);\n        }\n    }\n    get stops() {\n        return this.stopsForm.get('stops');\n    }\n    writeStopsToFormService(stopsArray) {\n        if (stopsArray) {\n            this.directionsFormService.setStops(stopsArray);\n        }\n        else {\n            const stops = [];\n            this.stops.value.forEach(stop => {\n                if (stop.stopCoordinates instanceof Array) {\n                    stops.push(stop);\n                }\n            });\n            this.directionsFormService.setStops(stops);\n        }\n    }\n    addStop() {\n        const insertIndex = this.stops.length - 1;\n        this.stops.insert(insertIndex, this.createStop());\n    }\n    createStop(directionsPos = 'intermediate') {\n        return this.formBuilder.group({\n            stopPoint: [''],\n            stopProposals: [[]],\n            directionsText: directionsPos,\n            stopCoordinates: ['', [Validators.required]]\n        });\n    }\n    removeStop(index) {\n        const id = this.getStopOverlayID(index);\n        this.deleteStoreFeatureByID(this.stopsStore, id);\n        this.stops.removeAt(index);\n        let cnt = 0;\n        this.stops.value.forEach(stop => {\n            this.stops\n                .at(cnt)\n                .patchValue({ directionsText: this.directionsText(cnt) });\n            this.addStopOverlay(this.stops.at(cnt).value.stopCoordinates, cnt);\n            cnt++;\n        });\n    }\n    resetForm(stop) {\n        this.routesResults = undefined;\n        const nbStops = this.stops.length;\n        for (let i = 0; i < nbStops; i++) {\n            this.stops.removeAt(0);\n        }\n        this.stops.insert(0, this.createStop('start'));\n        this.stops.insert(1, this.createStop('end'));\n        if (stop === true) {\n            this.stopsStore.clear();\n        }\n        this.routeStore.clear();\n    }\n    formatStep(step, cnt) {\n        return this.formatInstruction(step.maneuver.type, step.maneuver.modifier, step.name, step.maneuver.bearing_after, cnt, step.maneuver.exit, cnt === this.activeRoute.steps.length - 1);\n    }\n    formatInstruction(type, modifier, route, direction, stepPosition, exit, lastStep = false) {\n        let directiveFr;\n        let directiveEn;\n        let image = 'forward';\n        let cssClass = 'rotate-270';\n        const translatedDirection = this.translateBearing(direction);\n        const translatedModifier = this.translateModifier(modifier);\n        const enPrefix = modifier === 'straight' ? '' : 'on the ';\n        const frPrefix = modifier === 'straight' ? '' : 'à ';\n        let frAggregatedDirection = frPrefix + translatedModifier;\n        let enAggregatedDirection = enPrefix + translatedModifier;\n        if (modifier && modifier.search('slight') >= 0) {\n            enAggregatedDirection = translatedModifier;\n        }\n        if (modifier === 'uturn') {\n            image = 'forward';\n            cssClass = 'rotate-90';\n        }\n        else if (modifier === 'sharp right') {\n            image = 'subdirectory-arrow-right';\n            cssClass = 'icon-flipped';\n        }\n        else if (modifier === 'right') {\n            image = 'subdirectory-arrow-right';\n            cssClass = 'icon-flipped';\n        }\n        else if (modifier === 'slight right') {\n            image = 'forward';\n            cssClass = 'rotate-290';\n        }\n        else if (modifier === 'straight') {\n            image = 'forward';\n        }\n        else if (modifier === 'slight left') {\n            image = 'forward';\n            cssClass = 'rotate-250';\n        }\n        else if (modifier === 'left') {\n            image = 'subdirectory-arrow-left';\n            cssClass = 'icon-flipped';\n        }\n        else if (modifier === 'sharp left') {\n            image = 'subdirectory-arrow-left';\n            cssClass = 'icon-flipped';\n        }\n        if (type === 'turn') {\n            if (modifier === 'straight') {\n                directiveFr = 'Continuer sur ' + route;\n                directiveEn = 'Continue on ' + route;\n            }\n            else if (modifier === 'uturn') {\n                directiveFr = 'Faire demi-tour sur ' + route;\n                directiveEn = 'Make u-turn on ' + route;\n            }\n            else {\n                directiveFr = 'Tourner ' + frAggregatedDirection + ' sur ' + route;\n                directiveEn = 'Turn ' + translatedModifier + ' onto ' + route;\n            }\n        }\n        else if (type === 'new name') {\n            directiveFr =\n                'Continuer en direction ' + translatedDirection + ' sur ' + route;\n            directiveEn = 'Head ' + translatedDirection + ' on ' + route;\n            image = 'compass';\n            cssClass = '';\n        }\n        else if (type === 'depart') {\n            directiveFr =\n                'Aller en direction ' + translatedDirection + ' sur ' + route;\n            directiveEn = 'Head ' + translatedDirection + ' on ' + route;\n            image = 'compass';\n            cssClass = '';\n        }\n        else if (type === 'arrive') {\n            if (lastStep) {\n                let coma = ', ';\n                if (!translatedModifier) {\n                    frAggregatedDirection = '';\n                    enAggregatedDirection = '';\n                    coma = '';\n                }\n                directiveFr = 'Vous êtes arrivé' + coma + frAggregatedDirection;\n                directiveEn =\n                    'You have reached your destination' + coma + enAggregatedDirection;\n            }\n            else {\n                directiveFr = 'Vous atteignez le point intermédiare sur ' + route;\n                directiveEn = 'You have reached the intermediate stop onto ' + route;\n                image = 'map-marker';\n                cssClass = '';\n            }\n        }\n        else if (type === 'merge') {\n            directiveFr = 'Continuer sur ' + route;\n            directiveEn = 'Continue on ' + route;\n            image = 'forward';\n            cssClass = 'rotate-270';\n        }\n        else if (type === 'on ramp') {\n            directiveFr = \"Prendre l'entrée d'autoroute \" + frAggregatedDirection;\n            directiveEn = 'Take the ramp ' + enAggregatedDirection;\n        }\n        else if (type === 'off ramp') {\n            directiveFr = \"Prendre la sortie d'autoroute \" + frAggregatedDirection;\n            directiveEn = 'Take exit ' + enAggregatedDirection;\n        }\n        else if (type === 'fork') {\n            if (modifier.search('left') >= 0) {\n                directiveFr = 'Garder la gauche sur ' + route;\n                directiveEn = 'Merge left onto ' + route;\n            }\n            else if (modifier.search('right') >= 0) {\n                directiveFr = 'Garder la droite sur ' + route;\n                directiveEn = 'Merge right onto ' + route;\n            }\n            else {\n                directiveFr = 'Continuer sur ' + route;\n                directiveEn = 'Continue on ' + route;\n            }\n        }\n        else if (type === 'end of road') {\n            directiveFr =\n                'À la fin de la route, tourner ' + translatedModifier + ' sur ' + route;\n            directiveEn =\n                'At the end of the road, turn ' + translatedModifier + ' onto ' + route;\n        }\n        else if (type === 'use lane') {\n            directiveFr = 'Prendre la voie de ... ';\n            directiveEn = 'Take the lane ...';\n        }\n        else if (type === 'continue' && modifier !== 'uturn') {\n            directiveFr = 'Continuer sur ' + route;\n            directiveEn = 'Continue on ' + route;\n            image = 'forward';\n            cssClass = 'rotate-270';\n        }\n        else if (type === 'roundabout') {\n            directiveFr = 'Au rond-point, prendre la ' + exit;\n            directiveFr += exit === 1 ? 're' : 'e';\n            directiveFr += ' sortie vers ' + route;\n            directiveEn = 'At the roundabout, take the ' + exit;\n            directiveEn += exit === 1 ? 'st' : 'rd';\n            directiveEn += ' exit towards ' + route;\n            image = 'chart-donut';\n            cssClass = '';\n        }\n        else if (type === 'rotary') {\n            directiveFr = 'Rond-point rotary....';\n            directiveEn = 'Roundabout rotary....';\n            image = 'chart-donut';\n            cssClass = '';\n        }\n        else if (type === 'roundabout turn') {\n            directiveFr = 'Rond-point, prendre la ...';\n            directiveEn = 'Roundabout, take the ...';\n            image = 'chart-donut';\n            cssClass = '';\n        }\n        else if (type === 'exit roundabout') {\n            directiveFr = 'Poursuivre vers ' + route;\n            directiveEn = 'Continue to ' + route;\n            image = 'forward';\n            cssClass = 'rotate-270';\n        }\n        else if (type === 'notification') {\n            directiveFr = 'notification ....';\n            directiveEn = 'notification ....';\n        }\n        else if (modifier === 'uturn') {\n            directiveFr =\n                'Faire demi-tour et continuer en direction ' +\n                    translatedDirection +\n                    ' sur ' +\n                    route;\n            directiveEn =\n                'Make u-turn and head ' + translatedDirection + ' on ' + route;\n        }\n        else {\n            directiveFr = '???';\n            directiveEn = '???';\n        }\n        if (lastStep) {\n            image = 'flag-variant';\n            cssClass = '';\n        }\n        if (stepPosition === 0) {\n            image = 'compass';\n            cssClass = '';\n        }\n        let directive;\n        if (this.browserLanguage === 'fr') {\n            directive = directiveFr;\n        }\n        else if (this.browserLanguage === 'en') {\n            directive = directiveEn;\n        }\n        return { instruction: directive, image, cssClass };\n    }\n    translateModifier(modifier) {\n        if (modifier === 'uturn') {\n            return this.languageService.translate.instant('igo.geo.directions.uturn');\n        }\n        else if (modifier === 'sharp right') {\n            return this.languageService.translate.instant('igo.geo.directions.sharp right');\n        }\n        else if (modifier === 'right') {\n            return this.languageService.translate.instant('igo.geo.directions.right');\n        }\n        else if (modifier === 'slight right') {\n            return this.languageService.translate.instant('igo.geo.directions.slight right');\n        }\n        else if (modifier === 'sharp left') {\n            return this.languageService.translate.instant('igo.geo.directions.sharp left');\n        }\n        else if (modifier === 'left') {\n            return this.languageService.translate.instant('igo.geo.directions.left');\n        }\n        else if (modifier === 'slight left') {\n            return this.languageService.translate.instant('igo.geo.directions.slight left');\n        }\n        else if (modifier === 'straight') {\n            return this.languageService.translate.instant('igo.geo.directions.straight');\n        }\n        else {\n            return modifier;\n        }\n    }\n    translateBearing(bearing) {\n        if (bearing >= 337 || bearing < 23) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.n');\n        }\n        else if (bearing < 67) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.ne');\n        }\n        else if (bearing < 113) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.e');\n        }\n        else if (bearing < 157) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.se');\n        }\n        else if (bearing < 203) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.s');\n        }\n        else if (bearing < 247) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.sw');\n        }\n        else if (bearing < 293) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.w');\n        }\n        else if (bearing < 337) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.nw');\n        }\n        else {\n            return;\n        }\n    }\n    formatDistance(distance) {\n        if (distance === 0) {\n            return;\n        }\n        if (distance >= 100000) {\n            return Math.round(distance / 1000) + ' km';\n        }\n        if (distance >= 10000) {\n            return Math.round(distance / 100) / 10 + ' km';\n        }\n        if (distance >= 100) {\n            return Math.round(distance / 100) / 10 + ' km';\n        }\n        return distance + ' m';\n    }\n    formatDuration(duration, summary = false) {\n        if (duration >= 3600) {\n            const hour = Math.floor(duration / 3600);\n            const minute = Math.round((duration / 3600 - hour) * 60);\n            if (minute === 60) {\n                return hour + 1 + ' h';\n            }\n            return hour + ' h ' + minute + ' min';\n        }\n        if (duration >= 60) {\n            return Math.round(duration / 60) + ' min';\n        }\n        return duration + ' s';\n    }\n    showSegment(step, zoomToExtent = false) {\n        this.showRouteSegmentGeometry(step.geometry.coordinates, zoomToExtent);\n    }\n    showRouteSegmentGeometry(coordinates, zoomToExtent = false) {\n        const vertexId = 'vertex';\n        const geometry4326 = new LineString(coordinates);\n        const geometryMapProjection = geometry4326.transform('EPSG:4326', this.map.projection);\n        const routeSegmentCoordinates = geometryMapProjection.getCoordinates();\n        const lastPoint = routeSegmentCoordinates[0];\n        const geometry = new Point(lastPoint);\n        const feature = new olFeature({ geometry });\n        const geojsonGeom = new OlGeoJSON().writeGeometryObject(geometry, {\n            featureProjection: this.map.projection,\n            dataProjection: this.map.projection\n        });\n        const previousVertex = this.routeStore.get(vertexId);\n        const previousVertexRevision = previousVertex\n            ? previousVertex.meta.revision\n            : 0;\n        const vertexFeature = {\n            type: FEATURE,\n            geometry: geojsonGeom,\n            projection: this.map.projection,\n            properties: {\n                id: vertexId,\n                type: 'vertex'\n            },\n            meta: {\n                id: vertexId,\n                revision: previousVertexRevision + 1\n            },\n            ol: feature\n        };\n        this.routeStore.update(vertexFeature);\n        if (zoomToExtent) {\n            this.map.viewController.zoomToExtent(feature.getGeometry().getExtent());\n        }\n    }\n    zoomRoute(extent) {\n        if (extent) {\n            this.map.viewController.zoomToExtent(extent);\n        }\n        else {\n            if (this.routeStore.layer) {\n                const routeFeature = this.routeStore.layer.ol\n                    .getSource()\n                    .getFeatures()\n                    .find(f => f.getId() === 'route');\n                if (routeFeature) {\n                    const routeExtent = routeFeature.getGeometry().getExtent();\n                    this.map.viewController.zoomToExtent(routeExtent);\n                }\n            }\n        }\n    }\n    showRouteGeometry(moveToExtent = false) {\n        const geom = this.activeRoute.geometry.coordinates;\n        const geometry4326 = new LineString(geom);\n        const geometryMapProjection = geometry4326.transform('EPSG:4326', this.map.projection);\n        if (moveToExtent) {\n            this.zoomRoute(geometryMapProjection.getExtent());\n        }\n        const geojsonGeom = new OlGeoJSON().writeGeometryObject(geometryMapProjection, {\n            featureProjection: this.map.projection,\n            dataProjection: this.map.projection\n        });\n        const previousRoute = this.routeStore.get('route');\n        const previousRouteRevision = previousRoute\n            ? previousRoute.meta.revision\n            : 0;\n        const routeFeature = {\n            type: FEATURE,\n            geometry: geojsonGeom,\n            projection: this.map.projection,\n            properties: {\n                id: 'route',\n                type: 'route'\n            },\n            meta: {\n                id: 'route',\n                revision: previousRouteRevision + 1\n            },\n            ol: new olFeature({ geometry: geometryMapProjection })\n        };\n        this.routeStore.update(routeFeature);\n    }\n    getRoutes(moveToExtent = false, directionsOptions = {}) {\n        this.deleteStoreFeatureByID(this.routeStore, 'vertex');\n        this.writeStopsToFormService();\n        const coords = this.directionsFormService.getStopsCoordinates();\n        if (coords.length < 2) {\n            return;\n        }\n        const routeResponse = this.directionsService.route(coords, directionsOptions);\n        if (routeResponse) {\n            routeResponse.map(res => this.routesQueries$$.push(res.subscribe(route => {\n                this.routesResults = route;\n                this.activeRoute = this.routesResults[0];\n                this.showRouteGeometry(moveToExtent);\n                this.changeDetectorRefs.detectChanges();\n            })));\n        }\n    }\n    unlistenSingleClick() {\n        if (this.focusKey.length !== 0) {\n            this.focusKey.forEach(key => {\n                unByKey(key);\n            });\n        }\n    }\n    unsubscribeRoutesQueries() {\n        this.routesQueries$$.forEach((sub) => sub.unsubscribe());\n        this.routesQueries$$ = [];\n    }\n    copyLinkToClipboard() {\n        const successful = Clipboard.copy(this.getUrl());\n        if (successful) {\n            const translate = this.languageService.translate;\n            const title = translate.instant('igo.geo.directionsForm.dialog.copyTitle');\n            const msg = translate.instant('igo.geo.directionsForm.dialog.copyMsgLink');\n            this.messageService.success(msg, title);\n        }\n    }\n    copyDirectionsToClipboard() {\n        const directionsBody = this.directionsToText();\n        const successful = Clipboard.copy(directionsBody);\n        if (successful) {\n            const translate = this.languageService.translate;\n            const title = translate.instant('igo.geo.directionsForm.dialog.copyTitle');\n            const msg = translate.instant('igo.geo.directionsForm.dialog.copyMsg');\n            this.messageService.success(msg, title);\n        }\n    }\n    directionsToText() {\n        const indent = '\\t';\n        let activeRouteDirective = this.languageService.translate.instant('igo.geo.directionsForm.instructions') + ':\\n';\n        let wayPointList = '';\n        const summary = this.languageService.translate.instant('igo.geo.directionsForm.summary') +\n            ': \\n' +\n            indent +\n            this.activeRoute.title +\n            '\\n' +\n            indent +\n            this.formatDistance(this.activeRoute.distance) +\n            '\\n' +\n            indent +\n            this.formatDuration(this.activeRoute.duration) +\n            '\\n\\n' +\n            this.languageService.translate.instant('igo.geo.directionsForm.stopsList') +\n            ':\\n';\n        const url = this.languageService.translate.instant('igo.geo.directionsForm.link') +\n            ':\\n' +\n            indent +\n            this.getUrl();\n        let wayPointsCnt = 1;\n        this.stops.value.forEach(stop => {\n            let coord = '';\n            let stopPoint = '';\n            if (stop.stopPoint !== stop.stopCoordinates) {\n                stopPoint = stop.stopPoint;\n                coord =\n                    ' (' +\n                        [stop.stopCoordinates[1], stop.stopCoordinates[0]].join(',') +\n                        ')';\n            }\n            else {\n                stopPoint = [stop.stopCoordinates[1], stop.stopCoordinates[0]].join(',');\n            }\n            wayPointList =\n                wayPointList +\n                    indent +\n                    wayPointsCnt.toLocaleString() +\n                    '. ' +\n                    stopPoint +\n                    coord +\n                    '\\n';\n            wayPointsCnt++;\n        });\n        // Directions\n        let localCnt = 0;\n        this.activeRoute.steps.forEach(step => {\n            const instruction = this.formatStep(step, localCnt).instruction;\n            const distance = this.formatDistance(step.distance) === undefined\n                ? ''\n                : ' (' + this.formatDistance(step.distance) + ')';\n            activeRouteDirective =\n                activeRouteDirective +\n                    indent +\n                    (localCnt + 1).toLocaleString() +\n                    '. ' +\n                    instruction +\n                    distance +\n                    '\\n';\n            localCnt++;\n        });\n        const directionsBody = summary + wayPointList + '\\n' + url + '\\n\\n' + activeRouteDirective;\n        return directionsBody;\n    }\n    handleTermChanged(term) {\n        if (term !== undefined || term.length !== 0) {\n            const searchProposals = [];\n            if (this.search$$) {\n                this.search$$.unsubscribe();\n            }\n            const researches = this.searchService.search(term, { searchType: 'Feature' });\n            researches.map(res => this.search$$ =\n                res.request.subscribe(results => {\n                    results\n                        .filter(r => r.data.geometry)\n                        .forEach(element => {\n                        if (searchProposals.filter(r => r.source === element.source)\n                            .length === 0) {\n                            searchProposals.push({\n                                source: element.source,\n                                meta: element.meta,\n                                results: results.map(r => r.data)\n                            });\n                        }\n                    });\n                    if (this.stops) {\n                        this.stops\n                            .at(this.currentStopIndex)\n                            .patchValue({ stopProposals: searchProposals });\n                    }\n                    this.changeDetectorRefs.detectChanges();\n                }));\n        }\n    }\n    setTerm(term) {\n        this.term = term;\n        if (this.keyIsValid(term) &&\n            (term.length >= this.length || term.length === 0)) {\n            this.stream$.next(term);\n        }\n    }\n    keyIsValid(key) {\n        return this.invalidKeys.find(value => value === key) === undefined;\n    }\n    keyup(i, event) {\n        const term = event.target.value;\n        this.setTerm(term);\n        this.map.ol.un('singleclick', evt => {\n            this.handleMapClick(evt, i);\n        });\n    }\n    clearStop(stopIndex) {\n        // this.deleteDirectionsOverlaybyID(this.getStopOverlayID(stopIndex));\n        const id = this.getStopOverlayID(stopIndex);\n        this.deleteStoreFeatureByID(this.stopsStore, id);\n        this.routeStore.clear();\n        const stopsCounts = this.stops.length;\n        this.stops.removeAt(stopIndex);\n        this.stops.insert(stopIndex, this.createStop(this.directionsText(stopIndex, stopsCounts)));\n        this.routesResults = undefined;\n        this.getRoutes(false);\n    }\n    chooseProposal(proposal, i) {\n        if (proposal !== undefined) {\n            let geomCoord;\n            const geom = proposal.geometry;\n            if (geom.type === 'Point') {\n                geomCoord = geom.coordinates;\n            }\n            else if (geom.type.search('Line') >= 0) {\n                const line = new OlGeoJSON().readFeatures(geom);\n                geomCoord = line[0].getGeometry().getFirstCoordinate();\n                geomCoord = [geomCoord[0], geomCoord[1]];\n            }\n            else if (geom.type.search('Polygon') >= 0) {\n                const poly = new OlGeoJSON().readFeatures(geom);\n                geomCoord = poly[0].getGeometry().getType() === 'Polygon' ?\n                    geomCoord = poly[0].getGeometry().getInteriorPoint().getFirstCoordinate() :\n                    geomCoord = poly[0].getGeometry().getInteriorPoints().getFirstCoordinate();\n                geomCoord = [geomCoord[0], geomCoord[1]];\n            }\n            if (geomCoord !== undefined) {\n                this.stops.at(i).patchValue({ stopCoordinates: geomCoord });\n                this.addStopOverlay(geomCoord, i);\n                /*  const proposalExtent = this.directionsStopsOverlayDataSource.ol\n                  .getFeatureById(this.getStopOverlayID(i))\n                  .getGeometry()\n                  .getExtent();*/\n                /* if (!olextent.intersects(proposalExtent, this.map.viewController.getExtent())) {\n                  this.map.viewController.moveToExtent(proposalExtent);\n                }*/\n            }\n        }\n    }\n    focus(i) {\n        this.unlistenSingleClick();\n        this.currentStopIndex = i;\n        this.focusOnStop = true;\n        this.focusKey.push(this.map.ol.once('singleclick', evt => {\n            this.handleMapClick(evt, i);\n        }));\n    }\n    handleMapClick(event, indexPos) {\n        if (this.currentStopIndex === undefined) {\n            this.addStop();\n            indexPos = this.stops.length - 2;\n            this.stops.at(indexPos).value.stopProposals = [];\n        }\n        else {\n            indexPos = this.currentStopIndex;\n        }\n        const clickCoordinates = transform(event.coordinate, this.map.projection, this.projection);\n        this.stops\n            .at(indexPos)\n            .patchValue({ stopProposals: [], stopCoordinates: clickCoordinates });\n        this.handleLocationProposals(clickCoordinates, indexPos);\n        this.addStopOverlay(clickCoordinates, indexPos);\n        setTimeout(() => {\n            this.focusOnStop = false; // prevent to trigger map click and Select on routes at same time.\n        }, 500);\n    }\n    geolocateStop(index) {\n        moveToOlFeatures(this.map, [this.map.geolocationFeature], FeatureMotion.Move);\n        const geolocateCoordinates = this.map.viewController.getCenter(this.projection);\n        this.stops.at(index).patchValue({ stopCoordinates: geolocateCoordinates });\n        this.addStopOverlay(geolocateCoordinates, index);\n        this.handleLocationProposals(geolocateCoordinates, index);\n    }\n    addStopOverlay(coordinates, index) {\n        const directionsText = this.directionsText(index);\n        let stopColor;\n        let stopText;\n        if (directionsText === 'start') {\n            stopColor = '#008000';\n            stopText = this.languageService.translate.instant('igo.geo.directionsForm.start');\n        }\n        else if (directionsText === 'end') {\n            stopColor = '#f64139';\n            stopText = this.languageService.translate.instant('igo.geo.directionsForm.end');\n        }\n        else {\n            stopColor = '#ffd700';\n            stopText =\n                this.languageService.translate.instant('igo.geo.directionsForm.intermediate') +\n                    ' #' +\n                    index;\n        }\n        const geometry = new Point(transform(coordinates, this.projection, this.map.projection));\n        const stopID = this.getStopOverlayID(index);\n        const geojsonGeom = new OlGeoJSON().writeGeometryObject(geometry, {\n            featureProjection: this.map.projection,\n            dataProjection: this.map.projection\n        });\n        const previousStop = this.stopsStore.get(stopID);\n        const previousStopRevision = previousStop ? previousStop.meta.revision : 0;\n        const stopFeature = {\n            type: FEATURE,\n            geometry: geojsonGeom,\n            projection: this.map.projection,\n            properties: {\n                id: stopID,\n                type: 'stop',\n                stopText,\n                stopColor,\n                stopOpacity: 1\n            },\n            meta: {\n                id: stopID,\n                revision: previousStopRevision + 1\n            },\n            ol: new olFeature({ geometry })\n        };\n        this.stopsStore.update(stopFeature);\n        this.getRoutes();\n    }\n    getStopOverlayID(index) {\n        let txt;\n        if (index === 0) {\n            txt = 'start';\n        }\n        else if (index === this.stops.length - 1) {\n            txt = 'end';\n        }\n        else {\n            txt = index;\n        }\n        return 'directionsStop_' + txt;\n    }\n    deleteStoreFeatureByID(store, id) {\n        const entity = store.get(id);\n        if (entity) {\n            store.delete(entity);\n        }\n    }\n    getUrl() {\n        if (!this.route) {\n            return;\n        }\n        const directionsKey = this.route.options.directionsCoordKey;\n        const stopsCoordinates = [];\n        if (this.directionsFormService &&\n            this.directionsFormService.getStopsCoordinates() &&\n            this.directionsFormService.getStopsCoordinates().length !== 0) {\n            this.directionsFormService.getStopsCoordinates().forEach(coord => {\n                stopsCoordinates.push(roundCoordTo(coord, 6));\n            });\n        }\n        let directionsUrl = '';\n        if (stopsCoordinates.length >= 2) {\n            directionsUrl = `${directionsKey}=${stopsCoordinates.join(';')}`;\n        }\n        return `${location.origin}${location.pathname}?tool=directions&sidenav=1&${directionsUrl}`;\n    }\n}\nDirectionsFormComponent.ɵfac = function DirectionsFormComponent_Factory(t) { return new (t || DirectionsFormComponent)(ɵɵdirectiveInject(FormBuilder), ɵɵdirectiveInject(DirectionsService), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(SearchService), ɵɵdirectiveInject(QueryService), ɵɵdirectiveInject(DirectionsFormService), ɵɵdirectiveInject(ChangeDetectorRef), ɵɵdirectiveInject(RouteService, 8)); };\nDirectionsFormComponent.ɵcmp = ɵɵdefineComponent({ type: DirectionsFormComponent, selectors: [[\"igo-directions-form\"]], inputs: { term: \"term\", debounce: \"debounce\", length: \"length\", map: \"map\", stopsStore: \"stopsStore\", routeFromFeatureDetail: \"routeFromFeatureDetail\", routeStore: \"routeStore\" }, outputs: { activeRouteDescription: \"activeRouteDescription\" }, decls: 11, vars: 10, consts: [[1, \"igo-form\", 3, \"formGroup\"], [\"formArrayName\", \"stops\", 4, \"ngFor\", \"ngForOf\"], [1, \"igo-form-button-group\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"primary\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"map-marker-plus\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"primary\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"class\", \"igo-input-container\", 4, \"ngIf\"], [\"formArrayName\", \"stops\"], [\"inputs\", \"\"], [3, \"formGroupName\"], [1, \"igo-input-container\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"matInput\", \"\", \"formControlName\", \"stopPoint\", 3, \"matAutocomplete\", \"placeholder\", \"focus\", \"keyup\", \"keydown.enter\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"color\", \"warn\", \"aria-label\", \"Clear\", 3, \"click\", 4, \"ngIf\"], [\"auto\", \"matAutocomplete\"], [3, \"label\", \"disabled\", 4, \"ngFor\", \"ngForOf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"crosshairs-gps\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"color\", \"warn\", \"aria-label\", \"Clear\", 3, \"click\"], [\"svgIcon\", \"close\"], [3, \"label\", \"disabled\"], [\"matTooltipShowDelay\", \"500\", 3, \"value\", \"matTooltip\", \"onSelectionChange\", 4, \"ngFor\", \"ngForOf\"], [\"matTooltipShowDelay\", \"500\", 3, \"value\", \"matTooltip\", \"onSelectionChange\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"delete\"], [\"svgIcon\", \"magnify-plus-outline\"], [\"svgIcon\", \"file-restore\"], [\"svgIcon\", \"content-copy\"], [\"svgIcon\", \"link\"], [4, \"ngIf\"], [\"mat-header\", \"\", 1, \"igo-route-title\", \"mat-typography\"], [\"mat-subheader\", \"\"], [\"class\", \"igo-steps\", \"igoListItem\", \"\", 3, \"mouseenter\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"placeholder\", \"ngModel\", \"selectionChange\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"igoListItem\", \"\", 1, \"igo-steps\", 3, \"mouseenter\", \"click\"], [\"mat-list-icon\", \"\", 3, \"ngClass\", \"svgIcon\"], [\"mat-line\", \"\"], [\"mat-line\", \"\", 1, \"right\"]], template: function DirectionsFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"form\", 0);\n        ɵɵtemplate(1, DirectionsFormComponent_div_1_Template, 13, 9, \"div\", 1);\n        ɵɵelementStart(2, \"div\", 2);\n        ɵɵelementStart(3, \"button\", 3);\n        ɵɵlistener(\"click\", function DirectionsFormComponent_Template_button_click_3_listener() { return ctx.addStop(); });\n        ɵɵpipe(4, \"translate\");\n        ɵɵelement(5, \"mat-icon\", 4);\n        ɵɵelementEnd();\n        ɵɵtemplate(6, DirectionsFormComponent_button_6_Template, 3, 3, \"button\", 5);\n        ɵɵtemplate(7, DirectionsFormComponent_button_7_Template, 3, 3, \"button\", 6);\n        ɵɵtemplate(8, DirectionsFormComponent_button_8_Template, 3, 3, \"button\", 5);\n        ɵɵtemplate(9, DirectionsFormComponent_button_9_Template, 3, 3, \"button\", 5);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵtemplate(10, DirectionsFormComponent_div_10_Template, 10, 6, \"div\", 7);\n    } if (rf & 2) {\n        ɵɵproperty(\"formGroup\", ctx.stopsForm);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ctx.stops.controls);\n        ɵɵadvance(2);\n        ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(4, 8, \"igo.geo.directionsForm.addStop\"));\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngIf\", ctx.routesResults);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.routesResults);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.routesResults);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.routesResults);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.routesResults);\n    } }, directives: [ɵangular_packages_forms_forms_y, NgControlStatusGroup, FormGroupDirective, NgForOf, MatButton, MatTooltip, MatIcon, NgIf, FormArrayName, MatListItem, FormGroupName, MatFormField, MatInput, DefaultValueAccessor, MatAutocompleteTrigger, NgControlStatus, FormControlName, MatAutocomplete, MatSuffix, MatOptgroup, MatOption, MatList, MatListSubheaderCssMatStyler, MatDivider, MatSelect, NgModel, MatListIconCssMatStyler, NgClass, MatLine], pipes: [TranslatePipe], styles: [\"mat-form-field[_ngcontent-%COMP%]{width:85%}.igo-route-title[_ngcontent-%COMP%]{font-weight:700}.igo-steps[_ngcontent-%COMP%]{cursor:pointer}form[_ngcontent-%COMP%]{padding:10px}h3[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}.mat-line[_ngcontent-%COMP%]{white-space:pre-wrap!important;word-wrap:break-word!important}.mat-line.right[_ngcontent-%COMP%]{text-align:right}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-45[_ngcontent-%COMP%]{transform:rotate(45deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-250[_ngcontent-%COMP%]{transform:rotate(250deg)}.rotate-290[_ngcontent-%COMP%]{transform:rotate(290deg)}.icon-flipped[_ngcontent-%COMP%]{transform:scaleY(-1)}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DirectionsFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-directions-form',\n                templateUrl: './directions-form.component.html',\n                styleUrls: ['./directions-form.component.scss']\n            }]\n    }], function () { return [{ type: FormBuilder }, { type: DirectionsService }, { type: LanguageService }, { type: MessageService }, { type: SearchService }, { type: QueryService }, { type: DirectionsFormService }, { type: ChangeDetectorRef }, { type: RouteService, decorators: [{\n                type: Optional\n            }] }]; }, { term: [{\n            type: Input\n        }], debounce: [{\n            type: Input\n        }], length: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], stopsStore: [{\n            type: Input\n        }], routeFromFeatureDetail: [{\n            type: Input\n        }], routeStore: [{\n            type: Input\n        }], activeRouteDescription: [{\n            type: Output\n        }] }); })();\n/**\n * Create a style for the directions stops and routes\n * @param feature OlFeature\n * @returns OL style function\n */\nfunction stopMarker(feature, resolution) {\n    const vertexStyle = [\n        new Style({\n            geometry: feature.getGeometry(),\n            image: new Circle({\n                radius: 7,\n                stroke: new Stroke({ color: '#FF0000', width: 3 })\n            })\n        })\n    ];\n    const stopStyle = createOverlayMarkerStyle({\n        text: feature.get('stopText'),\n        opacity: feature.get('stopOpacity'),\n        markerColor: feature.get('stopColor'),\n        markerOutlineColor: [255, 255, 255]\n    });\n    const routeStyle = [\n        new Style({\n            stroke: new Stroke({ color: '#6a7982', width: 10, opacity: 0.75 })\n        }),\n        new Style({\n            stroke: new Stroke({ color: '#4fa9dd', width: 6, opacity: 0.75 })\n        })\n    ];\n    if (feature.get('type') === 'stop') {\n        return stopStyle;\n    }\n    if (feature.get('type') === 'vertex') {\n        return vertexStyle;\n    }\n    if (feature.get('type') === 'route') {\n        return routeStyle;\n    }\n}\n\nclass DirectionsFormBindingDirective {\n    constructor(component, directionsFormService, directionsService, changeDetectorRefs, route) {\n        this.component = component;\n        this.directionsFormService = directionsFormService;\n        this.directionsService = directionsService;\n        this.changeDetectorRefs = changeDetectorRefs;\n        this.route = route;\n    }\n    ngAfterViewInit() {\n        const storedStops = this.directionsFormService.getStops();\n        if (!storedStops && this.route && this.route.options.directionsCoordKey) {\n            this.route.queryParams.subscribe((params) => {\n                const directionsParams = params[this.route.options.directionsCoordKey];\n                const stopsCoordinatesFromURL = [];\n                if (directionsParams) {\n                    const directionsCoordUrl = directionsParams.split(';');\n                    if (directionsCoordUrl.length >= 2) {\n                        let cnt = 0;\n                        directionsCoordUrl.forEach((coord) => {\n                            if (cnt !== 0 && cnt !== directionsCoordUrl.length - 1) {\n                                this.component.stops.insert(cnt, this.component.createStop());\n                            }\n                            const stopCoordinatesFromURL = JSON.parse('[' + coord + ']');\n                            this.component.stops\n                                .at(cnt)\n                                .patchValue({ stopCoordinates: stopCoordinatesFromURL });\n                            this.component.stops\n                                .at(cnt)\n                                .patchValue({ stopPoint: stopCoordinatesFromURL });\n                            this.component.handleLocationProposals(stopCoordinatesFromURL, cnt);\n                            stopsCoordinatesFromURL.push(stopCoordinatesFromURL);\n                            this.component.addStopOverlay(stopCoordinatesFromURL, cnt);\n                            cnt++;\n                        });\n                        this.component.activeRoute$\n                            .pipe(delay(250))\n                            .subscribe((activeRoute) => {\n                            this.getRoutes(activeRoute);\n                        });\n                    }\n                }\n            });\n        }\n        else if (storedStops) {\n            for (let i = 0; i < storedStops.length; i++) {\n                if (i !== 0 && i !== storedStops.length - 1) {\n                    this.component.stops.insert(i, this.component.createStop());\n                }\n                if (storedStops[i].stopCoordinates instanceof Array) {\n                    this.component.addStopOverlay(storedStops[i].stopCoordinates, i);\n                    this.component.stops.at(i).patchValue(storedStops[i]);\n                }\n            }\n            this.component.getRoutes();\n        }\n        this.component.writeStopsToFormService();\n    }\n    getRoutes(activeRoute) {\n        this.component.deleteStoreFeatureByID(this.component.routeStore, 'vertex');\n        this.component.writeStopsToFormService();\n        const coords = this.directionsFormService.getStopsCoordinates();\n        if (coords.length < 2) {\n            return;\n        }\n        const routeResponse = this.directionsService.route(coords, {});\n        if (routeResponse) {\n            routeResponse.map((res) => this.component.routesQueries$$.push(res.subscribe((route) => {\n                this.component.routesResults = route;\n                if (!activeRoute) {\n                    this.component.activeRoute = route[0];\n                    this.component.showRouteGeometry(true);\n                    return;\n                }\n                this.component.showRouteGeometry(true);\n                this.changeDetectorRefs.detectChanges();\n            })));\n        }\n    }\n}\nDirectionsFormBindingDirective.ɵfac = function DirectionsFormBindingDirective_Factory(t) { return new (t || DirectionsFormBindingDirective)(ɵɵdirectiveInject(DirectionsFormComponent, 2), ɵɵdirectiveInject(DirectionsFormService), ɵɵdirectiveInject(DirectionsService), ɵɵdirectiveInject(ChangeDetectorRef), ɵɵdirectiveInject(RouteService, 8)); };\nDirectionsFormBindingDirective.ɵdir = ɵɵdefineDirective({ type: DirectionsFormBindingDirective, selectors: [[\"\", \"igoDirectionsFormBinding\", \"\"]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DirectionsFormBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoDirectionsFormBinding]'\n            }]\n    }], function () { return [{ type: DirectionsFormComponent, decorators: [{\n                type: Self\n            }] }, { type: DirectionsFormService }, { type: DirectionsService }, { type: ChangeDetectorRef }, { type: RouteService, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\nclass IgoDirectionsModule {\n    static forRoot() {\n        return {\n            ngModule: IgoDirectionsModule\n        };\n    }\n}\nIgoDirectionsModule.ɵmod = ɵɵdefineNgModule({ type: IgoDirectionsModule });\nIgoDirectionsModule.ɵinj = ɵɵdefineInjector({ factory: function IgoDirectionsModule_Factory(t) { return new (t || IgoDirectionsModule)(); }, providers: [DirectionsFormService, provideDirectionsSourceService()], imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatIconModule,\n            MatButtonModule,\n            MatListModule,\n            MatDividerModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatOptionModule,\n            MatSelectModule,\n            MatTooltipModule,\n            MatAutocompleteModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoDirectionsModule, { declarations: [DirectionsFormComponent, DirectionsFormBindingDirective], imports: [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatIconModule,\n        MatButtonModule,\n        MatListModule,\n        MatDividerModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatOptionModule,\n        MatSelectModule,\n        MatTooltipModule,\n        MatAutocompleteModule,\n        IgoLanguageModule], exports: [DirectionsFormComponent, DirectionsFormBindingDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoDirectionsModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatListModule,\n                    MatDividerModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatOptionModule,\n                    MatSelectModule,\n                    MatTooltipModule,\n                    MatAutocompleteModule,\n                    IgoLanguageModule\n                ],\n                exports: [DirectionsFormComponent, DirectionsFormBindingDirective],\n                declarations: [DirectionsFormComponent, DirectionsFormBindingDirective],\n                providers: [DirectionsFormService, provideDirectionsSourceService()]\n            }]\n    }], null, null); })();\n\n/**\n * Search source factory\n * @ignore\n */\nfunction searchSourceServiceFactory(sources) {\n    return new SearchSourceService(sources);\n}\n/**\n * Function that returns a provider for the SearchSource service\n */\nfunction provideSearchSourceService() {\n    return {\n        provide: SearchSourceService,\n        useFactory: searchSourceServiceFactory,\n        deps: [SearchSource]\n    };\n}\n\nclass IChercheSearchResultFormatter {\n    constructor(languageService) {\n        this.languageService = languageService;\n    }\n    formatResult(result) {\n        return result;\n    }\n}\nIChercheSearchResultFormatter.ɵfac = function IChercheSearchResultFormatter_Factory(t) { return new (t || IChercheSearchResultFormatter)(ɵɵinject(LanguageService)); };\nIChercheSearchResultFormatter.ɵprov = ɵɵdefineInjectable({ token: IChercheSearchResultFormatter, factory: IChercheSearchResultFormatter.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IChercheSearchResultFormatter, [{\n        type: Injectable\n    }], function () { return [{ type: LanguageService }]; }, null); })();\n// Fix the \"+\" is replaced with space \" \" in a query string\n// https://github.com/angular/angular/issues/11058\nclass IgoHttpParameterCodec {\n    encodeKey(key) {\n        return encodeURIComponent(key);\n    }\n    encodeValue(value) {\n        return encodeURIComponent(value);\n    }\n    decodeKey(key) {\n        return decodeURIComponent(key);\n    }\n    decodeValue(value) {\n        return decodeURIComponent(value);\n    }\n}\n/**\n * ICherche search source\n */\nclass IChercheSearchSource extends SearchSource {\n    constructor(http, languageService, storageService, options, formatter, injector) {\n        super(options, storageService);\n        this.http = http;\n        this.languageService = languageService;\n        this.formatter = formatter;\n        this.title$ = new BehaviorSubject('');\n        this.hashtagsLieuxToKeep = [];\n        this.languageService.translate\n            .get(this.options.title)\n            .subscribe((title) => this.title$.next(title));\n        const authService = injector.get(AuthService);\n        if (this.settings.length) {\n            if (!authService) {\n                this.getAllowedTypes();\n            }\n            else {\n                authService.authenticate$.subscribe(() => {\n                    this.getAllowedTypes();\n                });\n            }\n        }\n    }\n    get title() {\n        return this.title$.getValue();\n    }\n    getId() {\n        return IChercheSearchSource.id;\n    }\n    getType() {\n        return IChercheSearchSource.type;\n    }\n    getDefaultOptions() {\n        var _a;\n        const limit = this.options.params && this.options.params.limit\n            ? Number(this.options.params.limit)\n            : undefined;\n        const ecmax = this.options.params && this.options.params.ecmax\n            ? Number(this.options.params.ecmax)\n            : undefined;\n        const types = ((_a = this.options.params) === null || _a === void 0 ? void 0 : _a.type) ? this.options.params.type.replace(/\\s/g, '').toLowerCase().split(',')\n            : [\n                'adresses',\n                'codes-postaux',\n                'routes',\n                'intersections',\n                'municipalites',\n                'mrc',\n                'regadmin',\n                'lieux'\n            ];\n        return {\n            title: 'igo.geo.search.icherche.name',\n            searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche',\n            settings: [\n                {\n                    type: 'checkbox',\n                    title: 'results type',\n                    name: 'type',\n                    values: [\n                        {\n                            title: 'igo.geo.search.icherche.type.address',\n                            value: 'adresses',\n                            enabled: types.indexOf('adresses') !== -1,\n                            hashtags: ['adresse']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.oldAddress',\n                            value: 'anciennes-adresses',\n                            enabled: types.indexOf('anciennes-adresses') !== -1,\n                            hashtags: ['anciennes-adresses']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.postalCode',\n                            value: 'codes-postaux',\n                            enabled: types.indexOf('codes-postaux') !== -1,\n                            hashtags: ['code-postal']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.road',\n                            value: 'routes',\n                            enabled: types.indexOf('routes') !== -1,\n                            hashtags: ['route']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.intersection',\n                            value: 'intersections',\n                            enabled: types.indexOf('intersections') !== -1,\n                            hashtags: ['intersection', '+']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.city',\n                            value: 'municipalites',\n                            enabled: types.indexOf('municipalites') !== -1,\n                            hashtags: ['municipalité', 'mun']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.oldCity',\n                            value: 'anciennes-municipalites',\n                            enabled: types.indexOf('anciennes-municipalites') !== -1,\n                            hashtags: ['anciennes-municipalites']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.mrc',\n                            value: 'mrc',\n                            enabled: types.indexOf('mrc') !== -1,\n                            hashtags: ['mrc']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.regadmin',\n                            value: 'regadmin',\n                            enabled: types.indexOf('regadmin') !== -1,\n                            hashtags: ['région-administrative', 'regadmin']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.entreprise',\n                            value: 'entreprises',\n                            enabled: types.indexOf('entreprises') !== -1,\n                            available: false,\n                            hashtags: ['entreprise']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.place',\n                            value: 'lieux',\n                            enabled: types.indexOf('lieux') !== -1,\n                            hashtags: ['lieu']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.exit',\n                            value: 'sorties-autoroute',\n                            enabled: types.indexOf('sorties-autoroute') !== -1,\n                            hashtags: ['sortie', 'sorties', 'exit']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.km',\n                            value: 'bornes-km',\n                            enabled: types.indexOf('bornes-km') !== -1,\n                            hashtags: ['borne', 'bornes', 'repère', 'km']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.gcc',\n                            value: 'bornes-gcc',\n                            enabled: types.indexOf('bornes-gcc') !== -1,\n                            hashtags: ['borne', 'bornes', 'repère', 'gcc', 'ccg']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.cn',\n                            value: 'bornes-cn',\n                            enabled: types.indexOf('bornes-cn') !== -1,\n                            hashtags: ['borne', 'bornes', 'cn']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.sumi',\n                            value: 'bornes-sumi',\n                            enabled: types.indexOf('bornes-sumi') !== -1,\n                            hashtags: ['borne', 'bornes', 'sumi']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.hq',\n                            value: 'hq',\n                            enabled: types.indexOf('hq') !== -1,\n                            hashtags: ['hq']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.cadastre',\n                            value: 'cadastre',\n                            enabled: types.indexOf('cadastre') !== -1,\n                            hashtags: ['cadastre']\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'results limit',\n                    name: 'limit',\n                    values: [\n                        {\n                            title: '1',\n                            value: 1,\n                            enabled: limit === 1\n                        },\n                        {\n                            title: '5',\n                            value: 5,\n                            enabled: limit === 5 || !limit\n                        },\n                        {\n                            title: '10',\n                            value: 10,\n                            enabled: limit === 10\n                        },\n                        {\n                            title: '25',\n                            value: 25,\n                            enabled: limit === 25\n                        },\n                        {\n                            title: '50',\n                            value: 50,\n                            enabled: limit === 50\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'ecmax',\n                    name: 'ecmax',\n                    values: [\n                        {\n                            title: '10 %',\n                            value: 10,\n                            enabled: ecmax === 10\n                        },\n                        {\n                            title: '30 %',\n                            value: 30,\n                            enabled: ecmax === 30 || !ecmax\n                        },\n                        {\n                            title: '50 %',\n                            value: 50,\n                            enabled: ecmax === 50\n                        },\n                        {\n                            title: '75 %',\n                            value: 75,\n                            enabled: ecmax === 75\n                        },\n                        {\n                            title: '100 %',\n                            value: 100,\n                            enabled: ecmax === 100\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'restrictExtent',\n                    name: 'loc',\n                    values: [\n                        {\n                            title: 'igo.geo.search.icherche.restrictExtent.map',\n                            value: 'true',\n                            enabled: false\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.restrictExtent.quebec',\n                            value: 'false',\n                            enabled: true\n                        }\n                    ]\n                }\n            ]\n        };\n    }\n    /**\n     * Search a location by name or keyword\n     * @param term Location name or keyword\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    search(term, options) {\n        const params = this.computeRequestParams(term, options || {});\n        if (!params.get('type').length) {\n            return of([]);\n        }\n        this.options.params.page = params.get('page') || '1';\n        return this.http.get(`${this.searchUrl}/geocode`, { params }).pipe(map((response) => this.extractResults(response, term)), catchError((err) => {\n            err.error.toDisplay = true;\n            err.error.title = this.languageService.translate.instant(this.getDefaultOptions().title);\n            throw err;\n        }));\n    }\n    getAllowedTypes() {\n        return this.http\n            .get(`${this.searchUrl}/types`)\n            .subscribe((types) => {\n            const typeSetting = this.settings.find((s) => s.name === 'type');\n            typeSetting.values.forEach((v) => {\n                const regex = new RegExp(`^${v.value}(\\\\.|$)`);\n                const typesMatched = types.filter((value) => regex.test(value));\n                v.available = typesMatched.length > 0;\n                if (v.value === 'lieux') {\n                    this.hashtagsLieuxToKeep = [\n                        ...new Set(typesMatched\n                            .map((t) => t.split('.'))\n                            .reduce((a, b) => a.concat(b))\n                            .filter((t) => t !== 'lieux'))\n                    ];\n                }\n            });\n            this.setParamFromSetting(typeSetting, false);\n        });\n    }\n    computeRequestParams(term, options) {\n        const queryParams = Object.assign({\n            geometry: true,\n            bbox: true,\n            icon: true,\n            type: 'adresses,codes-postaux,municipalites,mrc,regadmin,lieux,entreprises,bornes-sumi'\n        }, this.params, this.computeOptionsParam(term, options || {}).params, {\n            q: this.computeTerm(term),\n            page: options.page\n        });\n        if (queryParams.loc === 'true') {\n            const [xMin, yMin, xMax, yMax] = options.extent;\n            queryParams.loc = `${xMin},${yMin};${xMax},${yMin};${xMax},${yMax};${xMin},${yMax};${xMin},${yMin}`;\n        }\n        else if (queryParams.loc === 'false') {\n            delete queryParams.loc;\n        }\n        if (/#[A-Za-z]+/.test(queryParams.q)) {\n            queryParams.type = 'lieux';\n        }\n        return new HttpParams({\n            fromObject: ObjectUtils.removeUndefined(queryParams),\n            encoder: new IgoHttpParameterCodec()\n        });\n    }\n    extractResults(response, term) {\n        return response.features.map((data) => {\n            return this.formatter.formatResult(this.dataToResult(data, term, response));\n        });\n    }\n    dataToResult(data, term, response) {\n        const properties = this.computeProperties(data);\n        const id = [this.getId(), properties.type, properties.code].join('.');\n        const titleHtml = data.highlight.title || data.properties.nom;\n        const subtitleHtml = data.highlight.title2\n            ? ' <small> ' + data.highlight.title2 + '</small>'\n            : '';\n        const subtitleHtml2 = data.highlight.title3\n            ? '<br><small> ' + data.highlight.title3 + '</small>'\n            : '';\n        return {\n            source: this,\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry: data.geometry,\n                extent: data.bbox,\n                properties,\n                meta: {\n                    id,\n                    title: data.properties.nom\n                }\n            },\n            meta: {\n                dataType: FEATURE,\n                id,\n                title: data.properties.nom,\n                titleHtml: titleHtml + subtitleHtml + subtitleHtml2,\n                icon: data.icon || 'map-marker',\n                score: data.score || computeTermSimilarity(term.trim(), data.properties.nom),\n                nextPage: response.features.length % +this.options.params.limit === 0 &&\n                    +this.options.params.page < 10\n            }\n        };\n    }\n    computeProperties(data) {\n        const properties = ObjectUtils.removeKeys(data.properties, IChercheSearchSource.propertiesBlacklist);\n        if (!data.geometry) {\n            return Object.assign({ type: data.index }, properties);\n        }\n        const googleLinksProperties = {\n            GoogleMaps: ''\n        };\n        let googleMaps;\n        if (data.geometry.type === 'Point') {\n            googleMaps = GoogleLinks.getGoogleMapsCoordLink(data.geometry.coordinates[0], data.geometry.coordinates[1]);\n        }\n        else {\n            const point = pointOnFeature(data.geometry);\n            googleMaps = GoogleLinks.getGoogleMapsCoordLink(point.geometry.coordinates[0], point.geometry.coordinates[1]);\n        }\n        let googleMapsNom;\n        if (data.index === 'routes') {\n            googleMapsNom = GoogleLinks.getGoogleMapsNameLink(data.properties.nom + ', ' + data.properties.municipalite);\n        }\n        else if (data.index === 'municipalites') {\n            googleMapsNom = GoogleLinks.getGoogleMapsNameLink(data.properties.nom + ', ' + 'ville');\n        }\n        else if (data.index === 'mrc') {\n            googleMapsNom = GoogleLinks.getGoogleMapsNameLink('mrc+' + data.properties.nom);\n        }\n        else if (data.index === 'regadmin') {\n            googleMapsNom = GoogleLinks.getGoogleMapsNameLink(data.properties.nom + ',+QC');\n        }\n        else {\n            googleMapsNom = GoogleLinks.getGoogleMapsNameLink(data.properties.nom || data.highlight.title);\n        }\n        googleLinksProperties.GoogleMaps =\n            '<a href=' +\n                googleMaps +\n                ' target=\"_blank\">' +\n                this.languageService.translate.instant('igo.geo.searchByCoord') +\n                '</a> <br /> <a href=' +\n                googleMapsNom +\n                ' target=\"_blank\">' +\n                this.languageService.translate.instant('igo.geo.searchByName') +\n                '</a>';\n        if (data.geometry.type === 'Point') {\n            googleLinksProperties.GoogleStreetView = GoogleLinks.getGoogleStreetViewLink(data.geometry.coordinates[0], data.geometry.coordinates[1]);\n        }\n        const routing = {\n            Route: '<span class=\"routing\"> <u>' +\n                this.languageService.translate.instant('igo.geo.seeRouting') +\n                '</u> </span>'\n        };\n        return Object.assign({ type: data.index }, properties, googleLinksProperties, routing);\n    }\n    /**\n     * Remove hashtag from query\n     * @param term Query with hashtag\n     */\n    computeTerm(term) {\n        // Keep hashtags for \"lieux\"\n        const hashtags = term.match(/(#[A-Za-z]+)/g) || [];\n        let keep = false;\n        keep = hashtags.some((hashtag) => {\n            const hashtagKey = hashtag.substring(1);\n            return this.hashtagsLieuxToKeep.some((h) => h\n                .toLowerCase()\n                .normalize('NFD')\n                .replace(/[\\u0300-\\u036f]/g, '') ===\n                hashtagKey\n                    .toLowerCase()\n                    .normalize('NFD')\n                    .replace(/[\\u0300-\\u036f]/g, ''));\n        });\n        if (!keep) {\n            term = term.replace(/(#[A-Za-z]+)/g, '');\n        }\n        return term.replace(/[^\\wÀ-ÿ !\\-\\+\\(\\)\\.\\/½¼¾,'#]+/g, '');\n    }\n    /**\n     * Add hashtag to param if valid\n     * @param term Query with hashtag\n     * @param options TextSearchOptions\n     */\n    computeOptionsParam(term, options) {\n        const hashtags = super.getHashtagsValid(term, 'type');\n        if (hashtags) {\n            options.params = Object.assign(options.params || {}, {\n                type: hashtags.join(',')\n            });\n        }\n        return options;\n    }\n}\nIChercheSearchSource.id = 'icherche';\nIChercheSearchSource.type = FEATURE;\nIChercheSearchSource.propertiesBlacklist = [];\nIChercheSearchSource.ɵfac = function IChercheSearchSource_Factory(t) { return new (t || IChercheSearchSource)(ɵɵinject(HttpClient), ɵɵinject(LanguageService), ɵɵinject(StorageService), ɵɵinject('options'), ɵɵinject(IChercheSearchResultFormatter), ɵɵinject(Injector)); };\nIChercheSearchSource.ɵprov = ɵɵdefineInjectable({ token: IChercheSearchSource, factory: IChercheSearchSource.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IChercheSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: HttpClient }, { type: LanguageService }, { type: StorageService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }, { type: IChercheSearchResultFormatter, decorators: [{\n                type: Inject,\n                args: [IChercheSearchResultFormatter]\n            }] }, { type: Injector }]; }, null); })();\n/**\n * IChercheReverse search source\n */\nclass IChercheReverseSearchSource extends SearchSource {\n    constructor(http, languageService, storageService, options, injector) {\n        super(options, storageService);\n        this.http = http;\n        this.languageService = languageService;\n        this.title$ = new BehaviorSubject('');\n        this.languageService.translate\n            .get(this.options.title)\n            .subscribe((title) => this.title$.next(title));\n        const authService = injector.get(AuthService);\n        if (this.settings.length) {\n            if (!authService) {\n                this.getAllowedTypes();\n            }\n            else {\n                authService.authenticate$.subscribe(() => {\n                    this.getAllowedTypes();\n                });\n            }\n        }\n    }\n    get title() {\n        return this.title$.getValue();\n    }\n    getId() {\n        return IChercheReverseSearchSource.id;\n    }\n    getType() {\n        return IChercheReverseSearchSource.type;\n    }\n    getDefaultOptions() {\n        const types = this.options.params && this.options.params.type\n            ? this.options.params.type.replace(/\\s/g, '').toLowerCase().split(',')\n            : ['adresses', 'municipalites', 'mrc', 'regadmin'];\n        return {\n            title: 'igo.geo.search.ichercheReverse.name',\n            searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/terrapi',\n            settings: [\n                {\n                    type: 'checkbox',\n                    title: 'results type',\n                    name: 'type',\n                    values: [\n                        {\n                            title: 'igo.geo.search.icherche.type.address',\n                            value: 'adresses',\n                            enabled: types.indexOf('adresses') !== -1\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.road',\n                            value: 'routes',\n                            enabled: types.indexOf('routes') !== -1,\n                            available: false\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.district',\n                            value: 'arrondissements',\n                            enabled: types.indexOf('arrondissements') !== -1\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.city',\n                            value: 'municipalites',\n                            enabled: types.indexOf('municipalites') !== -1\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.mrc',\n                            value: 'mrc',\n                            enabled: types.indexOf('mrc') !== -1\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.regadmin',\n                            value: 'regadmin',\n                            enabled: types.indexOf('regadmin') !== -1\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'radius',\n                    name: 'bufferInput',\n                    values: [\n                        {\n                            title: '100 m',\n                            value: 100,\n                            enabled: !this.options.distance || this.options.distance === 100\n                        },\n                        {\n                            title: '500 m',\n                            value: 500,\n                            enabled: this.options.distance === 500\n                        },\n                        {\n                            title: '1 km',\n                            value: 1000,\n                            enabled: this.options.distance === 1000\n                        },\n                        {\n                            title: '2 km',\n                            value: 2000,\n                            enabled: this.options.distance === 2000\n                        },\n                        {\n                            title: '5 km',\n                            value: 5000,\n                            enabled: this.options.distance === 5000\n                        }\n                    ]\n                }\n            ]\n        };\n    }\n    /**\n     * Search a location by coordinates\n     * @param lonLat Location coordinates\n     * @param distance Search raidus around lonLat\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    reverseSearch(lonLat, options) {\n        const params = this.computeRequestParams(lonLat, options || {});\n        if (!params.get('type').length) {\n            return of([]);\n        }\n        return this.http.get(`${this.searchUrl}/locate`, { params }).pipe(map((response) => {\n            return this.extractResults(response);\n        }));\n    }\n    getAllowedTypes() {\n        return this.http\n            .get(`${this.searchUrl}/types`)\n            .subscribe((types) => {\n            const typeSetting = this.settings.find((s) => s.name === 'type');\n            typeSetting.values.forEach((v) => {\n                v.available = types.indexOf(v.value) > -1;\n            });\n            this.setParamFromSetting(typeSetting, false);\n        });\n    }\n    computeRequestParams(lonLat, options) {\n        if (options.distance || this.options.distance) {\n            options.params = Object.assign(options.params || {}, {\n                bufferInput: options.distance || this.options.distance\n            });\n        }\n        return new HttpParams({\n            fromObject: Object.assign({\n                loc: lonLat.join(','),\n                sort: 'distance',\n                geometry: true,\n                icon: true\n            }, options.params || {}, this.params)\n        });\n    }\n    extractResults(response) {\n        return response.features.map((data) => {\n            return this.dataToResult(data);\n        });\n    }\n    getSubtitle(data) {\n        if (!this.settings.length) {\n            return '';\n        }\n        let subtitle = '';\n        switch (data.properties.type) {\n            case 'arrondissements':\n                subtitle = data.properties.municipalite + ' (Arrondissement)';\n                break;\n            default:\n                const typeSetting = this.settings.find((s) => s.name === 'type');\n                const type = typeSetting.values.find((t) => t.value === data.properties.type);\n                if (type) {\n                    subtitle = this.languageService.translate.instant(type.title);\n                }\n        }\n        return subtitle;\n    }\n    dataToResult(data) {\n        const properties = this.computeProperties(data);\n        const extent = this.computeExtent(data);\n        const id = [this.getId(), properties.type, properties.code].join('.');\n        const titleHtml = data.properties.nom;\n        const subtitleHtml = ' <small> ' + this.getSubtitle(data) + '</small>';\n        return {\n            source: this,\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry: data.geometry,\n                extent,\n                properties,\n                meta: {\n                    id,\n                    title: data.properties.nom\n                }\n            },\n            meta: {\n                dataType: FEATURE,\n                id,\n                title: data.properties.nom,\n                titleHtml: titleHtml + subtitleHtml,\n                icon: data.icon || 'map-marker'\n            }\n        };\n    }\n    computeProperties(data) {\n        const properties = ObjectUtils.removeKeys(data.properties, IChercheReverseSearchSource.propertiesBlacklist);\n        const routing = {\n            Route: '<span class=\"routing\"> <u>' +\n                this.languageService.translate.instant('igo.geo.seeRouting') +\n                '</u> </span>'\n        };\n        return Object.assign(properties, routing);\n    }\n    computeExtent(data) {\n        return data.bbox\n            ? [data.bbox[0], data.bbox[2], data.bbox[1], data.bbox[3]]\n            : undefined;\n    }\n}\nIChercheReverseSearchSource.id = 'icherchereverse';\nIChercheReverseSearchSource.type = FEATURE;\nIChercheReverseSearchSource.propertiesBlacklist = [];\nIChercheReverseSearchSource.ɵfac = function IChercheReverseSearchSource_Factory(t) { return new (t || IChercheReverseSearchSource)(ɵɵinject(HttpClient), ɵɵinject(LanguageService), ɵɵinject(StorageService), ɵɵinject('options'), ɵɵinject(Injector)); };\nIChercheReverseSearchSource.ɵprov = ɵɵdefineInjectable({ token: IChercheReverseSearchSource, factory: IChercheReverseSearchSource.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IChercheReverseSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: HttpClient }, { type: LanguageService }, { type: StorageService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }, { type: Injector }]; }, null); })();\n\n/**\n * ICherche search result formatter factory\n * @ignore\n */\nfunction defaultIChercheSearchResultFormatterFactory(languageService) {\n    return new IChercheSearchResultFormatter(languageService);\n}\n/**\n * Function that returns a provider for the ICherche search result formatter\n */\nfunction provideDefaultIChercheSearchResultFormatter() {\n    return {\n        provide: IChercheSearchResultFormatter,\n        useFactory: defaultIChercheSearchResultFormatterFactory,\n        deps: [LanguageService]\n    };\n}\n/**\n * ICherche search source factory\n * @ignore\n */\nfunction ichercheSearchSourceFactory(http, languageService, storageService, config, formatter, injector) {\n    return new IChercheSearchSource(http, languageService, storageService, config.getConfig(`searchSources.${IChercheSearchSource.id}`), formatter, injector);\n}\n/**\n * Function that returns a provider for the ICherche search source\n */\nfunction provideIChercheSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: ichercheSearchSourceFactory,\n        multi: true,\n        deps: [\n            HttpClient,\n            LanguageService,\n            StorageService,\n            ConfigService,\n            IChercheSearchResultFormatter,\n            Injector\n        ]\n    };\n}\n/**\n * IChercheReverse search source factory\n * @ignore\n */\nfunction ichercheReverseSearchSourceFactory(http, languageService, storageService, config, injector) {\n    return new IChercheReverseSearchSource(http, languageService, storageService, config.getConfig(`searchSources.${IChercheReverseSearchSource.id}`), injector);\n}\n/**\n * Function that returns a provider for the IChercheReverse search source\n */\nfunction provideIChercheReverseSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: ichercheReverseSearchSourceFactory,\n        multi: true,\n        deps: [HttpClient, LanguageService, StorageService, ConfigService, Injector]\n    };\n}\n\nclass CoordinatesSearchResultFormatter {\n    constructor(languageService) {\n        this.languageService = languageService;\n    }\n    formatResult(result) {\n        return result;\n    }\n}\nCoordinatesSearchResultFormatter.ɵfac = function CoordinatesSearchResultFormatter_Factory(t) { return new (t || CoordinatesSearchResultFormatter)(ɵɵinject(LanguageService)); };\nCoordinatesSearchResultFormatter.ɵprov = ɵɵdefineInjectable({ token: CoordinatesSearchResultFormatter, factory: CoordinatesSearchResultFormatter.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CoordinatesSearchResultFormatter, [{\n        type: Injectable\n    }], function () { return [{ type: LanguageService }]; }, null); })();\n/**\n * CoordinatesReverse search source\n */\nclass CoordinatesReverseSearchSource extends SearchSource {\n    constructor(options, languageService, storageService, projections) {\n        super(options, storageService);\n        this.languageService = languageService;\n        this.title$ = new BehaviorSubject('');\n        this.projections = projections;\n        this.languageService.translate\n            .get(this.options.title)\n            .subscribe(title => this.title$.next(title));\n    }\n    get title() {\n        return this.title$.getValue();\n    }\n    getId() {\n        return CoordinatesReverseSearchSource.id;\n    }\n    getType() {\n        return CoordinatesReverseSearchSource.type;\n    }\n    getDefaultOptions() {\n        return {\n            title: 'igo.geo.search.coordinates.name',\n            order: 1,\n            showInSettings: false\n        };\n    }\n    /**\n     * Search a location by coordinates\n     * @param lonLat Location coordinates\n     * @param options options of ReverseSearchOptions (distance, conf, zoom, params)\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    reverseSearch(lonLat, options) {\n        return of([this.dataToResult(lonLat, options)]);\n    }\n    dataToResult(data, options) {\n        const dataDMS = convertDDToDMS(data);\n        const convertedCoord = lonLatConversion(data, this.projections);\n        const coords = convertedCoord.reduce((obj, item) => (obj[item.alias] = item.igo2CoordFormat, obj), {});\n        const roundedCoordString = roundCoordTo(data, 6).join(', ');\n        const roundedCoordStringDMS = dataDMS.join(', ');\n        let geometry = {\n            type: 'Point',\n            coordinates: [data[0], data[1]]\n        };\n        const properties = {};\n        let subtitleHtml = '';\n        if (options.distance) {\n            const radiusKey = this.languageService.translate.instant('igo.geo.search.coordinates.radius');\n            properties[radiusKey] = options.distance;\n            subtitleHtml = '<br><small>Rayon: ' + options.distance + ' m</small>';\n            // Create polygon\n            const center = transform([data[0], data[1]], 'EPSG:4326', 'EPSG:3857');\n            const circleGeometry = new OlCircle(center, options.distance);\n            const polygonGeometry = fromCircle(circleGeometry);\n            const writer = new GeoJSON();\n            geometry = JSON.parse(writer.writeGeometry(polygonGeometry.transform('EPSG:3857', 'EPSG:4326')));\n        }\n        if (options.conf) {\n            const confKey = this.languageService.translate.instant('igo.geo.search.coordinates.conf');\n            properties[confKey] = options.conf;\n            subtitleHtml += subtitleHtml === '' ? '<br>' : '<small> - </small>';\n            subtitleHtml += '<small>Confiance: ' + options.conf + '%</small>';\n        }\n        const coordKey = this.languageService.translate.instant('igo.geo.search.coordinates.coord');\n        properties[coordKey] = roundedCoordString;\n        const coordKeyDMS = this.languageService.translate.instant('igo.geo.search.coordinates.coordDMS');\n        properties[coordKeyDMS] = roundedCoordStringDMS;\n        return {\n            source: this,\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry,\n                extent: undefined,\n                properties: Object.assign(properties, coords, {\n                    GoogleMaps: GoogleLinks.getGoogleMapsCoordLink(data[0], data[1]),\n                    GoogleStreetView: GoogleLinks.getGoogleStreetViewLink(data[0], data[1]),\n                    OpenStreetMap: OsmLinks.getOpenStreetMapLink(data[0], data[1], 14),\n                    Route: '<span class=\"routing\"> <u>' + this.languageService.translate.instant('igo.geo.seeRouting') + '</u> </span>'\n                }),\n                meta: {\n                    id: data[0].toString() + ',' + data[1].toString(),\n                    title: roundedCoordString\n                }\n            },\n            meta: {\n                dataType: FEATURE,\n                id: data[0].toString() + ',' + data[1].toString(),\n                title: roundedCoordString,\n                titleHtml: roundedCoordString + subtitleHtml,\n                icon: 'map-marker',\n                score: 100,\n            }\n        };\n    }\n}\nCoordinatesReverseSearchSource.id = 'coordinatesreverse';\nCoordinatesReverseSearchSource.type = FEATURE;\nCoordinatesReverseSearchSource.ɵfac = function CoordinatesReverseSearchSource_Factory(t) { return new (t || CoordinatesReverseSearchSource)(ɵɵinject('options'), ɵɵinject(LanguageService), ɵɵinject(StorageService), ɵɵinject('projections')); };\nCoordinatesReverseSearchSource.ɵprov = ɵɵdefineInjectable({ token: CoordinatesReverseSearchSource, factory: CoordinatesReverseSearchSource.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CoordinatesReverseSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }, { type: LanguageService }, { type: StorageService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['projections']\n            }] }]; }, null); })();\n\n/**\n * ICherche search result formatter factory\n * @ignore\n */\nfunction defaultCoordinatesSearchResultFormatterFactory(languageService) {\n    return new CoordinatesSearchResultFormatter(languageService);\n}\n/**\n * Function that returns a provider for the ICherche search result formatter\n */\nfunction provideDefaultCoordinatesSearchResultFormatter() {\n    return {\n        provide: CoordinatesSearchResultFormatter,\n        useFactory: defaultCoordinatesSearchResultFormatterFactory,\n        deps: [LanguageService]\n    };\n}\n/**\n * CoordinatesReverse search source factory\n * @ignore\n */\nfunction CoordinatesReverseSearchSourceFactory(config, languageService, storageService, _projectionService) {\n    return new CoordinatesReverseSearchSource(config.getConfig(`searchSources.${CoordinatesReverseSearchSource.id}`), languageService, storageService, config.getConfig('projections') || []);\n}\n/**\n * Function that returns a provider for the IChercheReverse search source\n */\nfunction provideCoordinatesReverseSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: CoordinatesReverseSearchSourceFactory,\n        multi: true,\n        deps: [ConfigService, LanguageService, StorageService, ProjectionService]\n    };\n}\n\nclass ILayerSearchResultFormatter {\n    constructor(languageService) {\n        this.languageService = languageService;\n    }\n    formatResult(data) {\n        const allowedKey = [\n            'title',\n            'abstract',\n            'groupTitle',\n            'metadataUrl',\n            'downloadUrl',\n            'urlInfo',\n            'name'\n        ];\n        const property = Object.entries(data.properties)\n            .filter(([key]) => allowedKey.indexOf(key) !== -1)\n            .reduce((out, entries) => {\n            const [key, value] = entries;\n            let newKey;\n            try {\n                newKey = this.languageService.translate.instant('igo.geo.search.ilayer.properties.' + key);\n            }\n            catch (e) {\n                newKey = key;\n            }\n            out[newKey] = value ? value : '';\n            return out;\n        }, {});\n        const dataR = Object.assign({}, data);\n        dataR.properties = property;\n        return dataR;\n    }\n}\nILayerSearchResultFormatter.ɵfac = function ILayerSearchResultFormatter_Factory(t) { return new (t || ILayerSearchResultFormatter)(ɵɵinject(LanguageService)); };\nILayerSearchResultFormatter.ɵprov = ɵɵdefineInjectable({ token: ILayerSearchResultFormatter, factory: ILayerSearchResultFormatter.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ILayerSearchResultFormatter, [{\n        type: Injectable\n    }], function () { return [{ type: LanguageService }]; }, null); })();\n/**\n * ILayer search source\n */\nclass ILayerSearchSource extends SearchSource {\n    constructor(http, languageService, storageService, options, formatter) {\n        super(options, storageService);\n        this.http = http;\n        this.languageService = languageService;\n        this.formatter = formatter;\n        this.title$ = new BehaviorSubject('');\n        this.languageService.translate\n            .get(this.options.title)\n            .subscribe(title => this.title$.next(title));\n    }\n    get title() {\n        return this.title$.getValue();\n    }\n    getId() {\n        return ILayerSearchSource.id;\n    }\n    getType() {\n        return ILayerSearchSource.type;\n    }\n    getDefaultOptions() {\n        const limit = this.options.params && this.options.params.limit\n            ? Number(this.options.params.limit)\n            : undefined;\n        const ecmax = this.options.params && this.options.params.ecmax\n            ? Number(this.options.params.ecmax)\n            : undefined;\n        return {\n            title: 'igo.geo.search.ilayer.name',\n            searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/layers/search',\n            settings: [\n                {\n                    type: 'checkbox',\n                    title: 'results type',\n                    name: 'type',\n                    values: [\n                        {\n                            title: 'igo.geo.search.ilayer.type.layer',\n                            value: 'layer',\n                            enabled: true,\n                            hashtags: ['layer', 'layers', 'couche', 'couches']\n                        },\n                        {\n                            title: 'igo.geo.search.ilayer.type.groupLayer',\n                            value: 'group',\n                            enabled: false,\n                            hashtags: ['gr-layer', 'gr-layers', 'gr-couche', 'gr-couches']\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'results limit',\n                    name: 'limit',\n                    values: [\n                        {\n                            title: '1',\n                            value: 1,\n                            enabled: limit === 1\n                        },\n                        {\n                            title: '5',\n                            value: 5,\n                            enabled: limit === 5 || !limit\n                        },\n                        {\n                            title: '10',\n                            value: 10,\n                            enabled: limit === 10\n                        },\n                        {\n                            title: '25',\n                            value: 25,\n                            enabled: limit === 25\n                        },\n                        {\n                            title: '50',\n                            value: 50,\n                            enabled: limit === 50\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'ecmax',\n                    name: 'ecmax',\n                    values: [\n                        {\n                            title: '10 %',\n                            value: 10,\n                            enabled: ecmax === 10\n                        },\n                        {\n                            title: '30 %',\n                            value: 30,\n                            enabled: ecmax === 30\n                        },\n                        {\n                            title: '50 %',\n                            value: 50,\n                            enabled: ecmax === 50 || !ecmax\n                        },\n                        {\n                            title: '75 %',\n                            value: 75,\n                            enabled: ecmax === 75\n                        },\n                        {\n                            title: '100 %',\n                            value: 100,\n                            enabled: ecmax === 100\n                        }\n                    ]\n                }\n            ]\n        };\n    }\n    /**\n     * Search a layer by name or keyword\n     * @param term Layer name or keyword\n     * @returns Observable of <SearchResult<LayerOptions>[]\n     */\n    search(term, options) {\n        const params = this.computeSearchRequestParams(term, options || {});\n        if (!params.get('q') || !params.get('type')) {\n            return of([]);\n        }\n        this.options.params.page = params.get('page') || '1';\n        return this.http\n            .get(this.searchUrl, { params })\n            .pipe(map((response) => this.extractResults(response, term)));\n    }\n    computeSearchRequestParams(term, options) {\n        return new HttpParams({\n            fromObject: ObjectUtils.removeUndefined(Object.assign({\n                q: this.computeTerm(term)\n            }, this.params, this.computeOptionsParam(term, options || {}).params, {\n                page: options.page\n            }))\n        });\n    }\n    /**\n     * Remove hashtag from query\n     * @param term Query with hashtag\n     */\n    computeTerm(term) {\n        return term.replace(/(#[^\\s]*)/g, '').replace(/[^\\wÀ-ÿ !\\-\\(\\),'#]+/g, '');\n    }\n    /**\n     * Add hashtag to param if valid\n     * @param term Query with hashtag\n     * @param options TextSearchOptions\n     */\n    computeOptionsParam(term, options) {\n        const hashtags = super.getHashtagsValid(term, 'type');\n        if (hashtags) {\n            options.params = Object.assign(options.params || {}, {\n                type: hashtags.join(',')\n            });\n        }\n        return options;\n    }\n    extractResults(response, term) {\n        return response.items.map((data) => this.dataToResult(data, term, response));\n    }\n    dataToResult(data, term, response) {\n        const layerOptions = this.computeLayerOptions(data);\n        const titleHtml = data.highlight.title || data.properties.title;\n        const groupTitle = data.highlight.groupTitle || data.properties.groupTitle;\n        const subtitleHtml = groupTitle\n            ? ' <small style=\"color: #6f6969\"> ' + groupTitle + '</small>'\n            : '';\n        return {\n            source: this,\n            meta: {\n                dataType: LAYER,\n                id: [this.getId(), data.properties.id].join('.'),\n                title: data.properties.title,\n                titleHtml: titleHtml + subtitleHtml,\n                icon: data.properties.type === 'Layer' ? 'layers' : 'map',\n                score: data.score || computeTermSimilarity(term.trim(), data.properties.name),\n                nextPage: response.items.length % +this.options.params.limit === 0 &&\n                    +this.options.params.page < 10\n            },\n            data: layerOptions\n        };\n    }\n    computeLayerOptions(data) {\n        const url = data.properties.url;\n        const queryParams = this.extractQueryParamsFromSourceUrl(url);\n        return ObjectUtils.removeUndefined({\n            sourceOptions: {\n                id: data.properties.id,\n                type: data.properties.format,\n                url,\n                queryFormat: queryParams.queryFormat,\n                queryHtmlTarget: queryParams.queryHtmlTarget,\n                params: data.properties.format === 'wms' ? { LAYERS: data.properties.name } : undefined,\n                layer: data.properties.format === 'wms' ? undefined : data.properties.name,\n                optionsFromCapabilities: true,\n                crossOrigin: 'anonymous'\n            },\n            title: data.properties.title,\n            maxResolution: getResolutionFromScale(Number(data.properties.maxScaleDenom)),\n            minResolution: getResolutionFromScale(Number(data.properties.minScaleDenom)),\n            metadata: {\n                url: data.properties.metadataUrl,\n                extern: true\n            },\n            properties: this.formatter.formatResult(data).properties\n        });\n    }\n    extractQueryParamsFromSourceUrl(url) {\n        let queryFormat;\n        let queryHtmlTarget;\n        const formatOpt = this.options.queryFormat;\n        if (formatOpt) {\n            for (const key of Object.keys(formatOpt)) {\n                const value = formatOpt[key];\n                if (value === '*') {\n                    queryFormat = QueryFormat[key.toUpperCase()];\n                    break;\n                }\n                const urls = value.urls;\n                if (Array.isArray(urls)) {\n                    urls.forEach(urlOpt => {\n                        if (url.indexOf(urlOpt) !== -1) {\n                            queryFormat = QueryFormat[key.toUpperCase()];\n                        }\n                    });\n                    break;\n                }\n            }\n            if (queryFormat === QueryFormat.HTML ||\n                queryFormat === QueryFormat.HTMLGML2) {\n                queryHtmlTarget = 'iframe';\n            }\n        }\n        return {\n            queryFormat,\n            queryHtmlTarget\n        };\n    }\n}\nILayerSearchSource.id = 'ilayer';\nILayerSearchSource.type = LAYER;\nILayerSearchSource.ɵfac = function ILayerSearchSource_Factory(t) { return new (t || ILayerSearchSource)(ɵɵinject(HttpClient), ɵɵinject(LanguageService), ɵɵinject(StorageService), ɵɵinject('options'), ɵɵinject(ILayerSearchResultFormatter)); };\nILayerSearchSource.ɵprov = ɵɵdefineInjectable({ token: ILayerSearchSource, factory: ILayerSearchSource.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ILayerSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: HttpClient }, { type: LanguageService }, { type: StorageService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }, { type: ILayerSearchResultFormatter, decorators: [{\n                type: Inject,\n                args: [ILayerSearchResultFormatter]\n            }] }]; }, null); })();\n\n/**\n * ILayer search result formatter factory\n * @ignore\n */\nfunction ilayerSearchResultFormatterFactory(languageService) {\n    return new ILayerSearchResultFormatter(languageService);\n}\n/**\n * Function that returns a provider for the ILayer search result formatter\n */\nfunction provideILayerSearchResultFormatter() {\n    return {\n        provide: ILayerSearchResultFormatter,\n        useFactory: ilayerSearchResultFormatterFactory,\n        deps: [LanguageService]\n    };\n}\n/**\n * ILayer search source factory\n * @ignore\n */\nfunction ilayerSearchSourceFactory(http, languageService, storageService, config, formatter) {\n    return new ILayerSearchSource(http, languageService, storageService, config.getConfig(`searchSources.${ILayerSearchSource.id}`), formatter);\n}\n/**\n * Function that returns a provider for the ILayer search source\n */\nfunction provideILayerSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: ilayerSearchSourceFactory,\n        multi: true,\n        deps: [HttpClient, LanguageService, StorageService, ConfigService, ILayerSearchResultFormatter]\n    };\n}\n\nconst SEARCH_TYPES = [FEATURE, LAYER];\n\nfunction SearchSelectorComponent_mat_radio_button_8_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-radio-button\", 7);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const searchType_r2 = ctx.$implicit;\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"value\", searchType_r2);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, ctx_r1.getSearchTypeTitle(searchType_r2)), \" \");\n} }\n/**\n * This component allows a user to select a search type yo enable. In it's\n * current version, only one search type can be selected at once (radio). If\n * this component were to support more than one search source enabled (checkbox),\n * the searchbar component would require a small change to it's\n * placeholder getter. The search source service already supports having\n * more than one search source enabled.\n */\nclass SearchSelectorComponent {\n    constructor(searchSourceService) {\n        this.searchSourceService = searchSourceService;\n        this.searchType$ = new BehaviorSubject(undefined);\n        /**\n         * List of available search types\n         */\n        this.searchTypes = SEARCH_TYPES;\n        /**\n         * Event emitted when the enabled search type changes\n         */\n        this.searchTypeChange = new EventEmitter();\n    }\n    /**\n     * The search type enabled\n     */\n    set searchType(value) { this.setSearchType(value); }\n    get searchType() { return this.searchType$.value; }\n    ngOnInit() {\n        this.searchType$$ = this.searchType$\n            .pipe(distinctUntilChanged())\n            .subscribe((searchType) => this.onSetSearchType(searchType));\n    }\n    ngOnDestroy() {\n        this.searchType$$.unsubscribe();\n    }\n    /**\n     * Enable the selected search type\n     * @param searchType Search type\n     * @internal\n     */\n    onSearchTypeChange(searchType) {\n        this.setSearchType(searchType);\n    }\n    /**\n     * Get a search type's title. The title\n     * for all availables search typers needs to be defined in the locale\n     * files or an error will be thrown.\n     * @param searchType Search type\n     * @internal\n     */\n    getSearchTypeTitle(searchType) {\n        return `igo.geo.search.${searchType.toLowerCase()}.title`;\n    }\n    /**\n     * Emit an event and enable the search sources of the given type.\n     * @param searchType Search type\n     */\n    setSearchType(searchType) {\n        this.searchType$.next(searchType);\n    }\n    onSetSearchType(searchType) {\n        if (searchType === undefined || searchType === null) {\n            return;\n        }\n        this.searchSourceService.enableSourcesByType(searchType);\n        this.searchTypeChange.emit(searchType);\n    }\n}\nSearchSelectorComponent.ɵfac = function SearchSelectorComponent_Factory(t) { return new (t || SearchSelectorComponent)(ɵɵdirectiveInject(SearchSourceService)); };\nSearchSelectorComponent.ɵcmp = ɵɵdefineComponent({ type: SearchSelectorComponent, selectors: [[\"igo-search-selector\"]], inputs: { searchTypes: \"searchTypes\", searchType: \"searchType\" }, outputs: { searchTypeChange: \"searchTypeChange\" }, decls: 9, vars: 8, consts: [[1, \"igo-search-selector\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"igo-search-selector-button\", 3, \"matTooltip\", \"matMenuTriggerFor\"], [\"svgIcon\", \"menu-down\"], [\"xPosition\", \"before\", \"yPosition\", \"above\", 1, \"no-border-radius\"], [\"searchSelectorMenu\", \"matMenu\"], [1, \"igo-search-selector-radio-group\", 3, \"value\", \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]], template: function SearchSelectorComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵelementStart(1, \"button\", 1);\n        ɵɵpipe(2, \"translate\");\n        ɵɵelement(3, \"mat-icon\", 2);\n        ɵɵelementEnd();\n        ɵɵelementStart(4, \"mat-menu\", 3, 4);\n        ɵɵelementStart(6, \"mat-radio-group\", 5);\n        ɵɵlistener(\"change\", function SearchSelectorComponent_Template_mat_radio_group_change_6_listener($event) { return ctx.onSearchTypeChange($event.value); });\n        ɵɵpipe(7, \"async\");\n        ɵɵtemplate(8, SearchSelectorComponent_mat_radio_button_8_Template, 3, 4, \"mat-radio-button\", 6);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r0 = ɵɵreference(5);\n        ɵɵadvance(1);\n        ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(2, 4, \"igo.geo.search.menu.tooltip\"))(\"matMenuTriggerFor\", _r0);\n        ɵɵadvance(5);\n        ɵɵproperty(\"value\", ɵɵpipeBind1(7, 6, ctx.searchType$));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngForOf\", ctx.searchTypes);\n    } }, directives: [MatButton, MatTooltip, MatMenuTrigger, MatIcon, _MatMenu, MatRadioGroup, NgForOf, MatRadioButton], pipes: [TranslatePipe, AsyncPipe], styles: [\".igo-search-selector-button[_ngcontent-%COMP%]     div.mat-button-ripple-round{border-radius:0}.igo-search-selector-radio-group[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column}.igo-search-selector-radio-group[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin:5px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SearchSelectorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-selector',\n                templateUrl: './search-selector.component.html',\n                styleUrls: ['./search-selector.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: SearchSourceService }]; }, { searchTypes: [{\n            type: Input\n        }], searchType: [{\n            type: Input\n        }], searchTypeChange: [{\n            type: Output\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoSearchSelectorModule {\n}\nIgoSearchSelectorModule.ɵmod = ɵɵdefineNgModule({ type: IgoSearchSelectorModule });\nIgoSearchSelectorModule.ɵinj = ɵɵdefineInjector({ factory: function IgoSearchSelectorModule_Factory(t) { return new (t || IgoSearchSelectorModule)(); }, imports: [[\n            CommonModule,\n            MatTooltipModule,\n            MatIconModule,\n            MatButtonModule,\n            MatMenuModule,\n            MatRadioModule,\n            MatTabsModule,\n            MatCheckboxModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoSearchSelectorModule, { declarations: [SearchSelectorComponent], imports: [CommonModule,\n        MatTooltipModule,\n        MatIconModule,\n        MatButtonModule,\n        MatMenuModule,\n        MatRadioModule,\n        MatTabsModule,\n        MatCheckboxModule,\n        IgoLanguageModule], exports: [SearchSelectorComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoSearchSelectorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatTooltipModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatMenuModule,\n                    MatRadioModule,\n                    MatTabsModule,\n                    MatCheckboxModule,\n                    IgoLanguageModule\n                ],\n                exports: [SearchSelectorComponent],\n                declarations: [SearchSelectorComponent]\n            }]\n    }], null, null); })();\n\nfunction SearchSettingsComponent_div_6_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 8);\n    ɵɵelementStart(1, \"button\", 9);\n    ɵɵlistener(\"click\", function SearchSettingsComponent_div_6_Template_button_click_1_listener($event) { ɵɵrestoreView(_r5); const ctx_r4 = ɵɵnextContext(); return ctx_r4.checkUncheckAllSources($event); });\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(!ctx_r1.searchSourcesAllEnabled ? ɵɵpipeBind1(3, 1, \"igo.geo.search.searchSources.unselectAll\") : ɵɵpipeBind1(4, 3, \"igo.geo.search.searchSources.selectAll\"));\n} }\nfunction SearchSettingsComponent_ng_container_7_button_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 15);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const source_r6 = ɵɵnextContext().$implicit;\n    const _r9 = ɵɵreference(6);\n    ɵɵproperty(\"matMenuTriggerFor\", _r9);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", source_r6.title, \" \");\n} }\nfunction SearchSettingsComponent_ng_container_7_button_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 16);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const source_r6 = ɵɵnextContext().$implicit;\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", source_r6.title, \" \");\n} }\nfunction SearchSettingsComponent_ng_container_7_ng_container_7_span_6_mat_radio_button_2_Template(rf, ctx) { if (rf & 1) {\n    const _r20 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-radio-button\", 22);\n    ɵɵlistener(\"click\", function SearchSettingsComponent_ng_container_7_ng_container_7_span_6_mat_radio_button_2_Template_mat_radio_button_click_0_listener($event) { ɵɵrestoreView(_r20); return $event.stopPropagation(); })(\"change\", function SearchSettingsComponent_ng_container_7_ng_container_7_span_6_mat_radio_button_2_Template_mat_radio_button_change_0_listener($event) { ɵɵrestoreView(_r20); const settingValue_r18 = ctx.$implicit; const setting_r13 = ɵɵnextContext(2).$implicit; const source_r6 = ɵɵnextContext().$implicit; const ctx_r21 = ɵɵnextContext(); return ctx_r21.settingsValueCheckedRadioButton($event, source_r6, setting_r13, settingValue_r18); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const settingValue_r18 = ctx.$implicit;\n    const ctx_r17 = ɵɵnextContext(4);\n    ɵɵproperty(\"value\", settingValue_r18)(\"matTooltip\", ctx_r17.getAvailableHashtagsValues(settingValue_r18))(\"checked\", settingValue_r18.enabled);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 4, settingValue_r18.title), \" \");\n} }\nfunction SearchSettingsComponent_ng_container_7_ng_container_7_span_6_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"span\");\n    ɵɵelementStart(1, \"mat-radio-group\", 20);\n    ɵɵtemplate(2, SearchSettingsComponent_ng_container_7_ng_container_7_span_6_mat_radio_button_2_Template, 3, 6, \"mat-radio-button\", 21);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const setting_r13 = ɵɵnextContext().$implicit;\n    ɵɵadvance(1);\n    ɵɵproperty(\"value\", setting_r13);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", setting_r13.values);\n} }\nfunction SearchSettingsComponent_ng_container_7_ng_container_7_span_7_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 8);\n    ɵɵelementStart(1, \"button\", 9);\n    ɵɵlistener(\"click\", function SearchSettingsComponent_ng_container_7_ng_container_7_span_7_div_1_Template_button_click_1_listener($event) { ɵɵrestoreView(_r28); const setting_r13 = ɵɵnextContext(2).$implicit; const source_r6 = ɵɵnextContext().$implicit; const ctx_r27 = ɵɵnextContext(); return ctx_r27.checkUncheckAll($event, source_r6, setting_r13); });\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const setting_r13 = ɵɵnextContext(2).$implicit;\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(setting_r13.allEnabled || setting_r13.allEnabled === undefined ? ɵɵpipeBind1(3, 1, \"igo.geo.search.searchSources.settings.unselectAll\") : ɵɵpipeBind1(4, 3, \"igo.geo.search.searchSources.settings.selectAll\"));\n} }\nfunction SearchSettingsComponent_ng_container_7_ng_container_7_span_7_mat_checkbox_2_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-checkbox\", 24);\n    ɵɵlistener(\"click\", function SearchSettingsComponent_ng_container_7_ng_container_7_span_7_mat_checkbox_2_Template_mat_checkbox_click_0_listener($event) { ɵɵrestoreView(_r34); return $event.stopPropagation(); })(\"change\", function SearchSettingsComponent_ng_container_7_ng_container_7_span_7_mat_checkbox_2_Template_mat_checkbox_change_0_listener($event) { ɵɵrestoreView(_r34); const settingValue_r32 = ctx.$implicit; const setting_r13 = ɵɵnextContext(2).$implicit; const source_r6 = ɵɵnextContext().$implicit; const ctx_r35 = ɵɵnextContext(); return ctx_r35.settingsValueCheckedCheckbox($event, source_r6, setting_r13, settingValue_r32); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const settingValue_r32 = ctx.$implicit;\n    const setting_r13 = ɵɵnextContext(2).$implicit;\n    const ctx_r26 = ɵɵnextContext(2);\n    ɵɵproperty(\"checked\", settingValue_r32.enabled)(\"value\", setting_r13)(\"matTooltip\", ctx_r26.getAvailableHashtagsValues(settingValue_r32));\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 4, settingValue_r32.title), \" \");\n} }\nfunction SearchSettingsComponent_ng_container_7_ng_container_7_span_7_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"span\");\n    ɵɵtemplate(1, SearchSettingsComponent_ng_container_7_ng_container_7_span_7_div_1_Template, 5, 5, \"div\", 5);\n    ɵɵtemplate(2, SearchSettingsComponent_ng_container_7_ng_container_7_span_7_mat_checkbox_2_Template, 3, 6, \"mat-checkbox\", 23);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const setting_r13 = ɵɵnextContext().$implicit;\n    const ctx_r16 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", setting_r13.values.length > 3);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ctx_r16.getAvailableValues(setting_r13));\n} }\nfunction SearchSettingsComponent_ng_container_7_ng_container_7_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"button\", 15);\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"mat-menu\", 17, 18);\n    ɵɵtemplate(6, SearchSettingsComponent_ng_container_7_ng_container_7_span_6_Template, 3, 2, \"span\", 19);\n    ɵɵtemplate(7, SearchSettingsComponent_ng_container_7_ng_container_7_span_7_Template, 3, 2, \"span\", 19);\n    ɵɵelementEnd();\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const setting_r13 = ctx.$implicit;\n    const _r14 = ɵɵreference(5);\n    ɵɵadvance(1);\n    ɵɵproperty(\"matMenuTriggerFor\", _r14);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(3, 5, \"igo.geo.search.searchSources.settings.\" + setting_r13.title), \" \");\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngSwitch\", setting_r13.type);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngSwitchCase\", \"radiobutton\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngSwitchCase\", \"checkbox\");\n} }\nfunction SearchSettingsComponent_ng_container_7_Template(rf, ctx) { if (rf & 1) {\n    const _r41 = ɵɵgetCurrentView();\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"span\", 10);\n    ɵɵelementStart(2, \"mat-checkbox\", 11);\n    ɵɵlistener(\"click\", function SearchSettingsComponent_ng_container_7_Template_mat_checkbox_click_2_listener($event) { ɵɵrestoreView(_r41); return $event.stopPropagation(); })(\"change\", function SearchSettingsComponent_ng_container_7_Template_mat_checkbox_change_2_listener($event) { ɵɵrestoreView(_r41); const source_r6 = ctx.$implicit; const ctx_r42 = ɵɵnextContext(); return ctx_r42.onCheckSearchSource($event, source_r6); });\n    ɵɵelementEnd();\n    ɵɵtemplate(3, SearchSettingsComponent_ng_container_7_button_3_Template, 2, 2, \"button\", 12);\n    ɵɵtemplate(4, SearchSettingsComponent_ng_container_7_button_4_Template, 2, 1, \"button\", 13);\n    ɵɵelementEnd();\n    ɵɵelementStart(5, \"mat-menu\", null, 14);\n    ɵɵtemplate(7, SearchSettingsComponent_ng_container_7_ng_container_7_Template, 8, 7, \"ng-container\", 6);\n    ɵɵelementEnd();\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const source_r6 = ctx.$implicit;\n    ɵɵadvance(2);\n    ɵɵproperty(\"checked\", source_r6.enabled)(\"value\", source_r6);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", source_r6.settings.length > 0);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", source_r6.settings.length === 0);\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngForOf\", source_r6.settings);\n} }\nfunction SearchSettingsComponent_span_8_Template(rf, ctx) { if (rf & 1) {\n    const _r44 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"span\");\n    ɵɵelement(1, \"mat-divider\");\n    ɵɵelementStart(2, \"span\", 25);\n    ɵɵelementStart(3, \"mat-slide-toggle\", 26);\n    ɵɵlistener(\"change\", function SearchSettingsComponent_span_8_Template_mat_slide_toggle_change_3_listener($event) { ɵɵrestoreView(_r44); const ctx_r43 = ɵɵnextContext(); return ctx_r43.changePointerReverseSearch($event); })(\"click\", function SearchSettingsComponent_span_8_Template_mat_slide_toggle_click_3_listener($event) { ɵɵrestoreView(_r44); return $event.stopPropagation(); });\n    ɵɵpipe(4, \"translate\");\n    ɵɵtext(5);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(7, \"mat-slide-toggle\", 26);\n    ɵɵlistener(\"change\", function SearchSettingsComponent_span_8_Template_mat_slide_toggle_change_7_listener($event) { ɵɵrestoreView(_r44); const ctx_r46 = ɵɵnextContext(); return ctx_r46.changeSearchResultsGeometry($event); })(\"click\", function SearchSettingsComponent_span_8_Template_mat_slide_toggle_click_7_listener($event) { ɵɵrestoreView(_r44); return $event.stopPropagation(); });\n    ɵɵpipe(8, \"translate\");\n    ɵɵtext(9);\n    ɵɵpipe(10, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵadvance(3);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(4, 8, \"igo.geo.search.pointerSearchSummary.tooltip\"))(\"checked\", ctx_r3.pointerSummaryEnabled)(\"labelPosition\", \"after\");\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(6, 10, \"igo.geo.search.pointerSearchSummary.title\"), \" \");\n    ɵɵadvance(2);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(8, 12, \"igo.geo.search.searchResultsGeometry.tooltip\"))(\"checked\", ctx_r3.searchResultsGeometryEnabled)(\"labelPosition\", \"after\");\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(10, 14, \"igo.geo.search.searchResultsGeometry.title\"), \" \");\n} }\n/**\n * This component allows a user to select a search type yo enable. In it's\n * current version, only one search type can be selected at once (radio). If\n * this component were to support more than one search source enabled (checkbox),\n * the searchbar component would require a small change to it's\n * placeholder getter. The search source service already supports having\n * more than one search source enabled.\n */\nclass SearchSettingsComponent {\n    constructor(searchSourceService, mediaService, storageService) {\n        this.searchSourceService = searchSourceService;\n        this.mediaService = mediaService;\n        this.storageService = storageService;\n        this.hasPointerReverseSearchSource = false;\n        this.searchSourcesAllEnabled = false;\n        this.buffer = [];\n        this.lastKeyTime = Date.now();\n        this.pointerSummaryEnabled = false;\n        this.searchResultsGeometryEnabled = false;\n        /**\n         * Event emitted when the enabled search source changes\n         */\n        this.searchSourceChange = new EventEmitter();\n        /**\n         * Event emitted when the pointer summary is activated\n         */\n        this.pointerSummaryStatus = new EventEmitter();\n        /**\n         * Event emitted when the show geometry summary is changed\n         */\n        this.searchResultsGeometryStatus = new EventEmitter();\n    }\n    get isTouchScreen() {\n        return this.mediaService.isTouchScreen();\n    }\n    handleKeyboardEvent(event) {\n        if (event.key === 'F2') {\n            this.pointerSummaryEnabled = !this.pointerSummaryEnabled;\n            this.pointerSummaryStatus.emit(this.pointerSummaryEnabled);\n        }\n    }\n    ngOnInit() {\n        this.hasPointerReverseSearchSource = this.hasReverseSearchSourcesForPointerSummary();\n    }\n    /**\n     * Get all search sources\n     * @internal\n     */\n    getSearchSources() {\n        const textSearchSources = this.searchSourceService\n            .getSources()\n            .filter(sourceCanSearch)\n            .filter((s) => s.available && s.getId() !== 'map' && s.showInSettings);\n        const reverseSearchSources = this.searchSourceService\n            .getSources()\n            .filter(sourceCanReverseSearch)\n            .filter((s) => s.available && s.getId() !== 'map' && s.showInSettings);\n        const sources = textSearchSources.concat(reverseSearchSources);\n        this.computeSourcesCheckAllBehavior(sources);\n        return sources;\n    }\n    /**\n     * Get all search sources usable for pointer summary\n     * @internal\n     */\n    hasReverseSearchSourcesForPointerSummary() {\n        if (this.searchSourceService\n            .getEnabledSources()\n            .filter(sourceCanReverseSearchAsSummary).length) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    /**\n     * Triggered when a setting is checked (checkbox style)\n     * @internal\n     */\n    settingsValueCheckedCheckbox(event, source, setting, settingValue) {\n        settingValue.enabled = event.checked;\n        source.setParamFromSetting(setting);\n        this.searchSourceChange.emit(source);\n    }\n    /**\n     * Defining the action to do for check/uncheck checkboxes (settings)\n     * return true if all checkbox must be checked\n     * return false if all checkbox must be unchecked\n     * @internal\n     */\n    computeSettingCheckAllBehavior(setting) {\n        if (setting.allEnabled === undefined) {\n            if (setting.values.find((settingValue) => settingValue.enabled)) {\n                setting.allEnabled = false;\n            }\n            else {\n                setting.allEnabled = true;\n            }\n        }\n        else {\n            setting.allEnabled = !setting.allEnabled;\n        }\n    }\n    /**\n     * Defining the action to do for check/uncheck checkboxes (sources)\n     * return true if all checkbox must be checked\n     * return false if all checkbox must be unchecked\n     * @internal\n     */\n    computeSourcesCheckAllBehavior(sources) {\n        const enabledSourcesCnt = sources.filter((source) => source.enabled).length;\n        const disabledSourcesCnt = sources.filter((source) => !source.enabled)\n            .length;\n        this.searchSourcesAllEnabled =\n            enabledSourcesCnt >= disabledSourcesCnt ? false : true;\n    }\n    /**\n     * Triggered when the check all / uncheck all type is clicked,\n     * @internal\n     */\n    checkUncheckAll(event, source, setting) {\n        event.stopPropagation();\n        this.computeSettingCheckAllBehavior(setting);\n        setting.values.forEach((settingValue) => {\n            settingValue.enabled = setting.allEnabled;\n        });\n        source.setParamFromSetting(setting);\n        this.searchSourceChange.emit(source);\n    }\n    /**\n     * Triggered when the check all / uncheck all type is clicked,\n     * @internal\n     */\n    checkUncheckAllSources(event) {\n        event.stopPropagation();\n        this.getSearchSources().map((source) => {\n            source.enabled = this.searchSourcesAllEnabled;\n            this.searchSourceChange.emit(source);\n        });\n    }\n    /**\n     * Triggered when a setting is checked (radiobutton style)\n     * @internal\n     */\n    settingsValueCheckedRadioButton(event, source, setting, settingValue) {\n        setting.values.forEach((conf) => {\n            if (conf.value !== settingValue.value) {\n                conf.enabled = !event.source.checked;\n            }\n            else {\n                conf.enabled = event.source.checked;\n            }\n        });\n        source.setParamFromSetting(setting);\n        this.searchSourceChange.emit(source);\n    }\n    onCheckSearchSource(event, source) {\n        source.enabled = event.checked;\n        const storage = (this.storageService.get(source.getId() + '.options') || {});\n        storage.enabled = source.enabled;\n        this.storageService.set(source.getId() + '.options', storage);\n        this.searchSourceChange.emit(source);\n    }\n    getAvailableValues(setting) {\n        return setting.values.filter((s) => s.available !== false);\n    }\n    getAvailableHashtagsValues(setting) {\n        if (setting.hashtags) {\n            return setting.hashtags.map((h) => '#' + h).join(', ');\n        }\n        return;\n    }\n    stopPropagation(event) {\n        event.stopPropagation();\n    }\n    changePointerReverseSearch(event) {\n        this.pointerSummaryEnabled = event.checked;\n        this.pointerSummaryStatus.emit(this.pointerSummaryEnabled);\n    }\n    changeSearchResultsGeometry(event) {\n        this.searchResultsGeometryEnabled = event.checked;\n        this.searchResultsGeometryStatus.emit(this.searchResultsGeometryEnabled);\n    }\n}\nSearchSettingsComponent.ɵfac = function SearchSettingsComponent_Factory(t) { return new (t || SearchSettingsComponent)(ɵɵdirectiveInject(SearchSourceService), ɵɵdirectiveInject(MediaService), ɵɵdirectiveInject(StorageService)); };\nSearchSettingsComponent.ɵcmp = ɵɵdefineComponent({ type: SearchSettingsComponent, selectors: [[\"igo-search-settings\"]], hostBindings: function SearchSettingsComponent_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"keydown\", function SearchSettingsComponent_keydown_HostBindingHandler($event) { return ctx.handleKeyboardEvent($event); }, false, ɵɵresolveDocument);\n    } }, inputs: { pointerSummaryEnabled: \"pointerSummaryEnabled\", searchResultsGeometryEnabled: \"searchResultsGeometryEnabled\" }, outputs: { searchSourceChange: \"searchSourceChange\", pointerSummaryStatus: \"pointerSummaryStatus\", searchResultsGeometryStatus: \"searchResultsGeometryStatus\" }, decls: 9, vars: 7, consts: [[1, \"igo-search-settings\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"igo-search-settings-button\", 3, \"matTooltip\", \"matMenuTriggerFor\"], [\"svgIcon\", \"chevron-down\"], [1, \"no-border-radius\"], [\"searchSettingsMenu\", \"matMenu\"], [\"class\", \"checkAllButton\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"checkAllButton\"], [\"mat-raised-button\", \"\", 3, \"click\"], [1, \"igo-search-settings-search-source\"], [1, \"igo-search-settings-checkbox\", 3, \"checked\", \"value\", \"click\", \"change\"], [\"mat-menu-item\", \"\", 3, \"matMenuTriggerFor\", 4, \"ngIf\"], [\"mat-menu-item\", \"\", 4, \"ngIf\"], [\"sub_menu\", \"matMenu\"], [\"mat-menu-item\", \"\", 3, \"matMenuTriggerFor\"], [\"mat-menu-item\", \"\"], [\"yPosition\", \"above\", 3, \"ngSwitch\"], [\"test_sub_menu\", \"matMenu\"], [4, \"ngSwitchCase\"], [1, \"igo-search-settings-radio-group\", 3, \"value\"], [\"class\", \"mat-typography\", 3, \"value\", \"matTooltip\", \"checked\", \"click\", \"change\", 4, \"ngFor\", \"ngForOf\"], [1, \"mat-typography\", 3, \"value\", \"matTooltip\", \"checked\", \"click\", \"change\"], [\"class\", \"mat-menu-item\", 3, \"checked\", \"value\", \"matTooltip\", \"click\", \"change\", 4, \"ngFor\", \"ngForOf\"], [1, \"mat-menu-item\", 3, \"checked\", \"value\", \"matTooltip\", \"click\", \"change\"], [1, \"pointer-summary-slide-toggle-container\", \"mat-typography\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"pointer-summary-option\", 3, \"matTooltip\", \"checked\", \"labelPosition\", \"change\", \"click\"]], template: function SearchSettingsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵelementStart(1, \"button\", 1);\n        ɵɵpipe(2, \"translate\");\n        ɵɵelement(3, \"mat-icon\", 2);\n        ɵɵelementEnd();\n        ɵɵelementStart(4, \"mat-menu\", 3, 4);\n        ɵɵtemplate(6, SearchSettingsComponent_div_6_Template, 5, 5, \"div\", 5);\n        ɵɵtemplate(7, SearchSettingsComponent_ng_container_7_Template, 8, 5, \"ng-container\", 6);\n        ɵɵtemplate(8, SearchSettingsComponent_span_8_Template, 11, 16, \"span\", 7);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r0 = ɵɵreference(5);\n        ɵɵadvance(1);\n        ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(2, 5, \"igo.geo.search.menu.tooltip\"))(\"matMenuTriggerFor\", _r0);\n        ɵɵadvance(5);\n        ɵɵproperty(\"ngIf\", ctx.getSearchSources().length > 4);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ctx.getSearchSources());\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.hasPointerReverseSearchSource && !ctx.isTouchScreen);\n    } }, directives: [MatButton, MatTooltip, MatMenuTrigger, MatIcon, _MatMenu, NgIf, NgForOf, MatCheckbox, MatMenuItem, NgSwitch, NgSwitchCase, MatRadioGroup, MatRadioButton, MatDivider, MatSlideToggle], pipes: [TranslatePipe], styles: [\".checkAllButton[_ngcontent-%COMP%]{padding:0 5px;text-align:center}.igo-search-settings-button[_ngcontent-%COMP%]     div.mat-button-ripple-round{border-radius:0}.igo-search-settings-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.igo-search-settings-radio-group[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin:5px}.igo-search-settings-checkbox[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{display:flex}.igo-search-settings-search-source[_ngcontent-%COMP%]{display:flex;width:100%}.igo-search-settings-search-source[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:flex;margin-left:5px;margin-right:5px}.pointer-summary-option[_ngcontent-%COMP%]{display:block;margin-bottom:15px;margin-right:10px}.pointer-summary-slide-toggle-container[_ngcontent-%COMP%]{overflow-x:hidden}.pointer-summary-slide-toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:10px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SearchSettingsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-settings',\n                templateUrl: './search-settings.component.html',\n                styleUrls: ['./search-settings.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: SearchSourceService }, { type: MediaService }, { type: StorageService }]; }, { pointerSummaryEnabled: [{\n            type: Input\n        }], searchResultsGeometryEnabled: [{\n            type: Input\n        }], searchSourceChange: [{\n            type: Output\n        }], pointerSummaryStatus: [{\n            type: Output\n        }], searchResultsGeometryStatus: [{\n            type: Output\n        }], handleKeyboardEvent: [{\n            type: HostListener,\n            args: ['document:keydown', ['$event']]\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoSearchSettingsModule {\n}\nIgoSearchSettingsModule.ɵmod = ɵɵdefineNgModule({ type: IgoSearchSettingsModule });\nIgoSearchSettingsModule.ɵinj = ɵɵdefineInjector({ factory: function IgoSearchSettingsModule_Factory(t) { return new (t || IgoSearchSettingsModule)(); }, imports: [[\n            CommonModule,\n            MatTooltipModule,\n            MatIconModule,\n            MatButtonModule,\n            MatMenuModule,\n            MatRadioModule,\n            MatCheckboxModule,\n            MatDividerModule,\n            MatSlideToggleModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoSearchSettingsModule, { declarations: [SearchSettingsComponent], imports: [CommonModule,\n        MatTooltipModule,\n        MatIconModule,\n        MatButtonModule,\n        MatMenuModule,\n        MatRadioModule,\n        MatCheckboxModule,\n        MatDividerModule,\n        MatSlideToggleModule,\n        IgoLanguageModule], exports: [SearchSettingsComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoSearchSettingsModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [SearchSettingsComponent],\n                imports: [\n                    CommonModule,\n                    MatTooltipModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatMenuModule,\n                    MatRadioModule,\n                    MatCheckboxModule,\n                    MatDividerModule,\n                    MatSlideToggleModule,\n                    IgoLanguageModule\n                ],\n                exports: [SearchSettingsComponent]\n            }]\n    }], null, null); })();\n\nconst _c0$g = [\"input\"];\nfunction SearchBarComponent_mat_label_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-label\");\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ctx_r0.label);\n} }\nfunction SearchBarComponent_button_11_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 10);\n    ɵɵelement(1, \"mat-icon\", 11);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵproperty(\"color\", ctx_r2.color);\n    ɵɵadvance(1);\n    ɵɵpropertyInterpolate(\"svgIcon\", ctx_r2.searchIcon);\n} }\nfunction SearchBarComponent_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 12);\n    ɵɵlistener(\"click\", function SearchBarComponent_button_12_Template_button_click_0_listener() { ɵɵrestoreView(_r7); const ctx_r6 = ɵɵnextContext(); return ctx_r6.onClearButtonClick(); });\n    ɵɵelement(1, \"mat-icon\", 13);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵproperty(\"color\", ctx_r3.color);\n} }\nfunction SearchBarComponent_igo_search_selector_14_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-search-selector\", 14);\n    ɵɵlistener(\"searchTypeChange\", function SearchBarComponent_igo_search_selector_14_Template_igo_search_selector_searchTypeChange_0_listener($event) { ɵɵrestoreView(_r9); const ctx_r8 = ɵɵnextContext(); return ctx_r8.onSearchTypeChange($event); });\n    ɵɵpipe(1, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵɵnextContext();\n    ɵɵproperty(\"searchTypes\", ctx_r4.searchTypes)(\"searchType\", ɵɵpipeBind1(1, 2, ctx_r4.searchType$));\n} }\nfunction SearchBarComponent_igo_search_settings_15_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-search-settings\", 15);\n    ɵɵlistener(\"pointerSummaryStatus\", function SearchBarComponent_igo_search_settings_15_Template_igo_search_settings_pointerSummaryStatus_0_listener($event) { ɵɵrestoreView(_r11); const ctx_r10 = ɵɵnextContext(); return ctx_r10.pointerSummaryStatus.emit($event); })(\"searchResultsGeometryStatus\", function SearchBarComponent_igo_search_settings_15_Template_igo_search_settings_searchResultsGeometryStatus_0_listener($event) { ɵɵrestoreView(_r11); const ctx_r12 = ɵɵnextContext(); return ctx_r12.searchResultsGeometryStatus.emit($event); })(\"searchSourceChange\", function SearchBarComponent_igo_search_settings_15_Template_igo_search_settings_searchSourceChange_0_listener() { ɵɵrestoreView(_r11); const ctx_r13 = ɵɵnextContext(); return ctx_r13.onSearchSettingsChange(); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵɵnextContext();\n    ɵɵproperty(\"pointerSummaryEnabled\", ctx_r5.pointerSummaryEnabled)(\"searchResultsGeometryEnabled\", ctx_r5.searchResultsGeometryEnabled);\n} }\nconst _c1$a = function (a0) { return { empty: a0 }; };\nconst _c2$4 = function (a0) { return { \"hasSearchIcon\": a0 }; };\n/**\n * Searchbar that triggers a research in all search sources enabled.\n * If the store input is defined, the search results will be loaded\n * into that store. An event is always emitted when a research is completed.\n */\nclass SearchBarComponent {\n    constructor(languageService, searchService, searchSourceService) {\n        this.languageService = languageService;\n        this.searchService = searchService;\n        this.searchSourceService = searchSourceService;\n        this.placeholder$ = new BehaviorSubject('igo.geo.search.placeholder');\n        this.empty$ = new BehaviorSubject(true);\n        /**\n         * Search term stream\n         */\n        this.stream$ = new BehaviorSubject('');\n        /**\n         * List of available search types\n         */\n        this.searchTypes = SEARCH_TYPES;\n        this.searchType$ = new BehaviorSubject(undefined);\n        /**\n         * Event emitted when the pointer summary is activated by the searchbar setting\n         */\n        this.pointerSummaryStatus = new EventEmitter();\n        /**\n         * Event emitted when the show geometry setting is changed\n         */\n        this.searchResultsGeometryStatus = new EventEmitter();\n        this.term$ = new BehaviorSubject('');\n        this.disabled$ = new BehaviorSubject(false);\n        this.pointerSummaryEnabled = false;\n        this.searchResultsGeometryEnabled = false;\n        /**\n         * Whether a float label should be displayed\n         */\n        this.floatLabel = 'never';\n        this.appearance = 'legacy';\n        /**\n         * Icons color (search and clear)\n         */\n        this.color = 'primary';\n        this.termSplitter = '|';\n        /**\n         * Debounce time between each keystroke\n         */\n        this.debounce = 200;\n        /**\n         * Minimum term length required to trigger a research\n         */\n        this.minLength = 2;\n        /**\n         * Search Selector\n         */\n        this.searchSelector = false;\n        /**\n         * Search Settings\n         */\n        this.searchSettings = false;\n        /**\n         * Force coordinates in north america\n         */\n        this.forceNA = false;\n        /**\n         * Event emitted when the search term changes\n         */\n        this.searchTermChange = new EventEmitter();\n        /**\n         * Event emitted when a research is completed\n         */\n        this.search = new EventEmitter();\n        /**\n         * Event emitted when the search type changes\n         */\n        this.searchTypeChange = new EventEmitter();\n        /**\n         * Event emitted when the search type changes\n         */\n        this.clearFeature = new EventEmitter();\n        /**\n         * Event emitted when the search settings changes\n         */\n        this.searchSettingsChange = new EventEmitter();\n    }\n    /**\n     * Search term\n     */\n    set searchType(value) {\n        this.setSearchType(value);\n    }\n    get searchType() {\n        return this.searchType$.value;\n    }\n    /**\n     * Search term\n     */\n    set term(value) {\n        this.setTerm(value);\n    }\n    get term() {\n        return this.term$.value;\n    }\n    /**\n     * Whether this component is disabled\n     */\n    set disabled(value) {\n        this.disabled$.next(value);\n    }\n    get disabled() {\n        return this.disabled$.value;\n    }\n    /**\n     * Whether the search bar is empty\n     * @internal\n     */\n    get empty() {\n        return this.term.length === 0;\n    }\n    /**\n     * Subscribe to the search term stream and trigger researches\n     * @internal\n     */\n    ngOnInit() {\n        this.term$$ = this.term$.subscribe((term) => {\n            this.empty$.next(term === undefined || term.length === 0);\n        });\n        this.stream$$ = this.stream$\n            .pipe(debounce((term) => (term === '' ? EMPTY : timer(this.debounce))))\n            .subscribe((term) => this.onSetTerm(term));\n        this.handlePlaceholder();\n        this.searchType$$ = this.searchType$\n            .pipe(distinctUntilChanged())\n            .subscribe((searchType) => this.onSetSearchType(searchType));\n    }\n    /**\n     * Unsubscribe to the search term stream\n     * @internal\n     */\n    ngOnDestroy() {\n        this.term$$.unsubscribe();\n        this.stream$$.unsubscribe();\n        this.searchType$$.unsubscribe();\n    }\n    /**\n     * When a user types, validates the key and send it into the\n     * stream if it's valid\n     * @param event Keyboard event\n     * @internal\n     */\n    onKeyup(event) {\n        const key = event.key;\n        if (!this.keyIsValid(key)) {\n            return;\n        }\n        const term = event.target.value;\n        this.setTerm(term);\n    }\n    /**\n     * Clear the stream and the input\n     * @internal\n     */\n    onClearButtonClick() {\n        this.clear();\n        this.clearFeature.emit();\n    }\n    /**\n     * Update search type\n     * @param searchType Enabled search type\n     * @internal\n     */\n    onSearchTypeChange(searchType) {\n        this.setSearchType(searchType);\n    }\n    /**\n     * Update the placeholder with the enabled search type. The placeholder\n     * for all availables search typers needs to be defined in the locale\n     * files or an error will be thrown.\n     * @param searchType Enabled search type\n     * @internal\n     */\n    setSearchType(searchType) {\n        this.searchType$.next(searchType);\n    }\n    onSearchSettingsChange() {\n        this.doSearch(this.term);\n        this.searchSettingsChange.emit();\n        this.handlePlaceholder();\n    }\n    /**\n     * Send the term into the stream only if this component is not disabled\n     * @param term Search term\n     */\n    setTerm(term) {\n        if (this.disabled) {\n            return;\n        }\n        term = term || '';\n        if (term !== this.term) {\n            this.term$.next(term);\n        }\n        const slug = term.replace(/(#[^\\s]*)/g, '').trim();\n        if (slug.length >= this.minLength || slug.length === 0) {\n            this.stream$.next(term);\n        }\n    }\n    /**\n     * Clear the stream and the input\n     */\n    clear() {\n        this.term$.next('');\n        this.stream$.next('');\n        this.input.nativeElement.focus();\n    }\n    /**\n     * Validate if a given key stroke is a valid input\n     */\n    keyIsValid(key) {\n        return SearchBarComponent.invalidKeys.indexOf(key) === -1;\n    }\n    /**\n     * When the search term changes, emit an event and trigger a\n     * research in every enabled search sources.\n     * @param term Search term\n     */\n    onSetTerm(term) {\n        this.searchTermChange.emit(term);\n        this.doSearch(term);\n    }\n    handlePlaceholder() {\n        const searchTypes = [\n            ...new Set(this.searchSourceService\n                .getEnabledSources()\n                .filter((ss) => !['map', 'coordinatesreverse'].includes(ss.getId()))\n                .map((ss) => ss.getType()))\n        ];\n        let placeholder = `igo.geo.search.placeholder`;\n        if (searchTypes.length === 1) {\n            placeholder = `igo.geo.search.${searchTypes[0].toLowerCase()}.placeholder`;\n        }\n        else if (searchTypes.length === 0) {\n            placeholder = `igo.geo.search.emptyType.placeholder`;\n        }\n        this.placeholder$.next(placeholder);\n    }\n    onSetSearchType(searchType) {\n        if (searchType === undefined || searchType === null) {\n            return;\n        }\n        this.searchTypeChange.emit(searchType);\n        const placeholder = `igo.geo.search.${searchType.toLowerCase()}.placeholder`;\n        this.placeholder$.next(placeholder);\n        this.setTerm(this.term);\n    }\n    /**\n     * Execute the search\n     * @param term Search term\n     */\n    doSearch(rawTerm) {\n        if (this.researches$$) {\n            this.researches$$.map((research) => research.unsubscribe());\n            this.researches$$ = undefined;\n        }\n        let terms;\n        if (this.termSplitter && rawTerm.match(new RegExp(this.termSplitter, 'g'))) {\n            terms = rawTerm.split(this.termSplitter).filter((t) => t.length >= this.minLength);\n            this.store.clear();\n        }\n        else {\n            terms = [rawTerm];\n        }\n        let researches = [];\n        terms.map((term) => {\n            const slug = term ? term.replace(/(#[^\\s]*)/g, '').trim() : '';\n            if (slug === '') {\n                if (this.store !== undefined) {\n                    this.store.clear();\n                }\n                return;\n            }\n            researches = researches.concat(this.searchService.search(term, {\n                forceNA: this.forceNA\n            }));\n        });\n        this.researches$$ = researches.map((research) => {\n            return research.request.subscribe((results) => {\n                this.onResearchCompleted(research, results);\n            });\n        });\n    }\n    /**\n     * When a research  is completed, emit an event and update\n     * the store's items.\n     * @param research Research\n     * @param results Research results\n     */\n    onResearchCompleted(research, results) {\n        this.search.emit({ research, results });\n        if (this.store !== undefined) {\n            const newResults = this.store\n                .all()\n                .filter((result) => result.source !== research.source)\n                .concat(results);\n            this.store.updateMany(newResults);\n        }\n    }\n}\n/**\n * Invalid keys\n */\nSearchBarComponent.invalidKeys = [\n    'Control',\n    'Shift',\n    'Alt',\n    'ArrowDown',\n    'ArrowUp',\n    'ArrowRight',\n    'ArrowLeft'\n];\nSearchBarComponent.ɵfac = function SearchBarComponent_Factory(t) { return new (t || SearchBarComponent)(ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(SearchService), ɵɵdirectiveInject(SearchSourceService)); };\nSearchBarComponent.ɵcmp = ɵɵdefineComponent({ type: SearchBarComponent, selectors: [[\"igo-search-bar\"]], viewQuery: function SearchBarComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵstaticViewQuery(_c0$g, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.input = _t.first);\n    } }, inputs: { searchTypes: \"searchTypes\", searchType: \"searchType\", term: \"term\", disabled: \"disabled\", pointerSummaryEnabled: \"pointerSummaryEnabled\", searchResultsGeometryEnabled: \"searchResultsGeometryEnabled\", floatLabel: \"floatLabel\", appearance: \"appearance\", placeholder: \"placeholder\", label: \"label\", color: \"color\", termSplitter: \"termSplitter\", debounce: \"debounce\", minLength: \"minLength\", searchIcon: \"searchIcon\", searchSelector: \"searchSelector\", searchSettings: \"searchSettings\", forceNA: \"forceNA\", store: \"store\" }, outputs: { pointerSummaryStatus: \"pointerSummaryStatus\", searchResultsGeometryStatus: \"searchResultsGeometryStatus\", searchTermChange: \"searchTermChange\", search: \"search\", searchTypeChange: \"searchTypeChange\", clearFeature: \"clearFeature\", searchSettingsChange: \"searchSettingsChange\" }, decls: 16, vars: 28, consts: [[1, \"igo-search-bar-container\", 3, \"ngClass\"], [3, \"floatLabel\", \"appearance\"], [4, \"ngIf\"], [\"matInput\", \"\", \"autocomplete\", \"off\", 3, \"ngClass\", \"disabled\", \"placeholder\", \"value\", \"keyup\", \"touchend\"], [\"input\", \"\"], [1, \"search-bar-buttons\"], [\"mat-icon-button\", \"\", 3, \"color\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", 3, \"color\", \"click\", 4, \"ngIf\"], [3, \"searchTypes\", \"searchType\", \"searchTypeChange\", 4, \"ngIf\"], [3, \"pointerSummaryEnabled\", \"searchResultsGeometryEnabled\", \"pointerSummaryStatus\", \"searchResultsGeometryStatus\", \"searchSourceChange\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", 3, \"color\"], [3, \"svgIcon\"], [\"mat-icon-button\", \"\", 3, \"color\", \"click\"], [\"svgIcon\", \"close\"], [3, \"searchTypes\", \"searchType\", \"searchTypeChange\"], [3, \"pointerSummaryEnabled\", \"searchResultsGeometryEnabled\", \"pointerSummaryStatus\", \"searchResultsGeometryStatus\", \"searchSourceChange\"]], template: function SearchBarComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵpipe(1, \"async\");\n        ɵɵelementStart(2, \"mat-form-field\", 1);\n        ɵɵtemplate(3, SearchBarComponent_mat_label_3_Template, 2, 1, \"mat-label\", 2);\n        ɵɵelementStart(4, \"input\", 3, 4);\n        ɵɵlistener(\"keyup\", function SearchBarComponent_Template_input_keyup_4_listener($event) { return ctx.onKeyup($event); })(\"touchend\", function SearchBarComponent_Template_input_touchend_4_listener($event) { return ctx.onKeyup($event); });\n        ɵɵpipe(6, \"async\");\n        ɵɵpipe(7, \"async\");\n        ɵɵpipe(8, \"translate\");\n        ɵɵpipe(9, \"async\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(10, \"div\", 5);\n        ɵɵtemplate(11, SearchBarComponent_button_11_Template, 2, 2, \"button\", 6);\n        ɵɵtemplate(12, SearchBarComponent_button_12_Template, 2, 1, \"button\", 7);\n        ɵɵpipe(13, \"async\");\n        ɵɵtemplate(14, SearchBarComponent_igo_search_selector_14_Template, 2, 4, \"igo-search-selector\", 8);\n        ɵɵtemplate(15, SearchBarComponent_igo_search_settings_15_Template, 1, 2, \"igo-search-settings\", 9);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"ngClass\", ɵɵpureFunction1(24, _c1$a, ɵɵpipeBind1(1, 12, ctx.empty$)));\n        ɵɵadvance(2);\n        ɵɵproperty(\"floatLabel\", ctx.floatLabel)(\"appearance\", ctx.appearance);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.label);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngClass\", ɵɵpureFunction1(26, _c2$4, ctx.searchIcon))(\"disabled\", ɵɵpipeBind1(6, 14, ctx.disabled$))(\"placeholder\", ctx.placeholder ? ctx.placeholder : ɵɵpipeBind1(7, 16, ctx.placeholder$) ? ɵɵpipeBind1(8, 18, ctx.placeholder$.value) : undefined)(\"value\", ɵɵpipeBind1(9, 20, ctx.term$));\n        ɵɵadvance(7);\n        ɵɵproperty(\"ngIf\", ctx.searchIcon !== undefined);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", !ɵɵpipeBind1(13, 22, ctx.empty$));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ctx.searchSelector);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.searchSettings);\n    } }, directives: [NgClass, MatFormField, NgIf, MatInput, MatLabel, MatButton, MatIcon, SearchSelectorComponent, SearchSettingsComponent], pipes: [AsyncPipe, TranslatePipe], styles: [\"[_nghost-%COMP%]     .mat-form-field{padding:0 5px}[_nghost-%COMP%]     .mat-form-field-wrapper{margin-bottom:-1.5em}[_nghost-%COMP%]     span.mat-form-field-label-wrapper{top:-20px}[_nghost-%COMP%]     div.mat-form-field-infix{left:5px;padding:0 0 12px!important;right:5px}[_nghost-%COMP%]     div.mat-form-field-underline{display:none}.igo-search-bar-container[_ngcontent-%COMP%]{display:inline-flex;overflow:hidden;position:relative;width:100%}.igo-search-bar-container[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{width:calc(100% - 80px)}.igo-search-bar-container.empty[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{width:calc(100% - 40px)}.search-bar-buttons[_ngcontent-%COMP%]{display:inline-flex;position:relative;right:0;top:0}.search-bar-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:nth-child(2):before{border-right:1px solid #ddd;content:\\\"\\\";height:28px;left:0;top:5px}igo-search-selector[_ngcontent-%COMP%], igo-search-settings[_ngcontent-%COMP%]{background-color:#fff;border-radius:0;top:0}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SearchBarComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-bar',\n                templateUrl: './search-bar.component.html',\n                styleUrls: ['./search-bar.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: LanguageService }, { type: SearchService }, { type: SearchSourceService }]; }, { searchTypes: [{\n            type: Input\n        }], searchType: [{\n            type: Input\n        }], pointerSummaryStatus: [{\n            type: Output\n        }], searchResultsGeometryStatus: [{\n            type: Output\n        }], term: [{\n            type: Input\n        }], disabled: [{\n            type: Input\n        }], pointerSummaryEnabled: [{\n            type: Input\n        }], searchResultsGeometryEnabled: [{\n            type: Input\n        }], floatLabel: [{\n            type: Input\n        }], appearance: [{\n            type: Input\n        }], placeholder: [{\n            type: Input\n        }], label: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }], termSplitter: [{\n            type: Input\n        }], debounce: [{\n            type: Input\n        }], minLength: [{\n            type: Input\n        }], searchIcon: [{\n            type: Input\n        }], searchSelector: [{\n            type: Input\n        }], searchSettings: [{\n            type: Input\n        }], forceNA: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], searchTermChange: [{\n            type: Output\n        }], search: [{\n            type: Output\n        }], searchTypeChange: [{\n            type: Output\n        }], clearFeature: [{\n            type: Output\n        }], searchSettingsChange: [{\n            type: Output\n        }], input: [{\n            type: ViewChild,\n            args: ['input', { static: true }]\n        }] }); })();\n\nclass SearchUrlParamDirective {\n    constructor(component, ref, route) {\n        this.component = component;\n        this.ref = ref;\n        this.route = route;\n    }\n    ngOnInit() {\n        if (this.route && this.route.options.searchKey) {\n            this.route.queryParams.subscribe(params => {\n                const searchParams = params[this.route.options.searchKey];\n                if (searchParams) {\n                    this.component.setTerm(searchParams);\n                    this.ref.detectChanges();\n                }\n            });\n        }\n    }\n}\nSearchUrlParamDirective.ɵfac = function SearchUrlParamDirective_Factory(t) { return new (t || SearchUrlParamDirective)(ɵɵdirectiveInject(SearchBarComponent, 2), ɵɵdirectiveInject(ChangeDetectorRef), ɵɵdirectiveInject(RouteService, 8)); };\nSearchUrlParamDirective.ɵdir = ɵɵdefineDirective({ type: SearchUrlParamDirective, selectors: [[\"\", \"igoSearchUrlParam\", \"\"]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SearchUrlParamDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoSearchUrlParam]'\n            }]\n    }], function () { return [{ type: SearchBarComponent, decorators: [{\n                type: Self\n            }] }, { type: ChangeDetectorRef }, { type: RouteService, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\n/**\n * @ignore\n */\nclass IgoSearchBarModule {\n}\nIgoSearchBarModule.ɵmod = ɵɵdefineNgModule({ type: IgoSearchBarModule });\nIgoSearchBarModule.ɵinj = ɵɵdefineInjector({ factory: function IgoSearchBarModule_Factory(t) { return new (t || IgoSearchBarModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            MatTooltipModule,\n            MatIconModule,\n            MatButtonModule,\n            MatMenuModule,\n            MatRadioModule,\n            MatFormFieldModule,\n            MatInputModule,\n            IgoLanguageModule,\n            IgoSearchSelectorModule,\n            IgoSearchSettingsModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoSearchBarModule, { declarations: [SearchBarComponent,\n        SearchUrlParamDirective], imports: [CommonModule,\n        FormsModule,\n        MatTooltipModule,\n        MatIconModule,\n        MatButtonModule,\n        MatMenuModule,\n        MatRadioModule,\n        MatFormFieldModule,\n        MatInputModule,\n        IgoLanguageModule,\n        IgoSearchSelectorModule,\n        IgoSearchSettingsModule], exports: [SearchBarComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoSearchBarModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    MatTooltipModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatMenuModule,\n                    MatRadioModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    IgoLanguageModule,\n                    IgoSearchSelectorModule,\n                    IgoSearchSettingsModule\n                ],\n                exports: [\n                    SearchBarComponent,\n                ],\n                declarations: [\n                    SearchBarComponent,\n                    SearchUrlParamDirective\n                ]\n            }]\n    }], null, null); })();\n\nfunction SearchResultsItemComponent_mat_icon_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"mat-icon\", 4);\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵpropertyInterpolate(\"svgIcon\", ctx_r0.showIcons ? ctx_r0.icon : \"blank\");\n} }\nfunction SearchResultsItemComponent_h4_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"h4\", 5);\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"innerHtml\", ctx_r1.titleHtml, ɵɵsanitizeHtml)(\"matTooltip\", ctx_r1.tooltipHtml);\n} }\nfunction SearchResultsItemComponent_h4_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"h4\", 6);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ctx_r2.title);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ctx_r2.title);\n} }\nfunction SearchResultsItemComponent_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 7);\n    ɵɵlistener(\"click\", function SearchResultsItemComponent_button_4_Template_button_click_0_listener() { ɵɵrestoreView(_r5); const ctx_r4 = ɵɵnextContext(); return ctx_r4.onZoomHandler(); });\n    ɵɵelement(1, \"mat-icon\", 8);\n    ɵɵelementEnd();\n} }\nconst _c0$h = [[[\"\", \"igoSearchItemToolbar\", \"\"]]];\nconst _c1$b = [\"[igoSearchItemToolbar]\"];\n/**\n * Search results list item\n */\nclass SearchResultsItemComponent {\n    constructor() {\n        /**\n         * Whether there should be a zoom button\n         */\n        this.withZoomButton = false;\n        this.zoomEvent = new EventEmitter();\n        this.format = new OlGeoJSON();\n    }\n    get title() {\n        return getEntityTitle(this.result);\n    }\n    /**\n     * Search result HTML title\n     * @internal\n     */\n    get titleHtml() {\n        return getEntityTitleHtml(this.result);\n    }\n    /**\n     * Search result tooltip\n     * @internal\n     */\n    get tooltipHtml() {\n        return this.titleHtml\n            .replace(/<small?[^>]+(>|$)/g, '\\n')\n            .replace(/<\\/?[^>]+(>|$)/g, '');\n    }\n    /**\n     * Search result icon\n     * @internal\n     */\n    get icon() {\n        return getEntityIcon(this.result);\n    }\n    onZoomHandler() {\n        const olFeature = this.format.readFeature(this.result.data, {\n            dataProjection: this.result.data.projection,\n            featureProjection: this.map.projection\n        });\n        moveToOlFeatures(this.map, [olFeature], FeatureMotion.Default);\n    }\n}\nSearchResultsItemComponent.ɵfac = function SearchResultsItemComponent_Factory(t) { return new (t || SearchResultsItemComponent)(); };\nSearchResultsItemComponent.ɵcmp = ɵɵdefineComponent({ type: SearchResultsItemComponent, selectors: [[\"igo-search-results-item\"]], inputs: { result: \"result\", map: \"map\", showIcons: \"showIcons\", withZoomButton: \"withZoomButton\" }, outputs: { zoomEvent: \"zoomEvent\" }, ngContentSelectors: _c1$b, decls: 6, vars: 4, consts: [[\"mat-list-avatar\", \"\", 3, \"svgIcon\", 4, \"ngIf\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"search-result-tooltip\", 3, \"innerHtml\", \"matTooltip\", 4, \"ngIf\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", 4, \"ngIf\"], [\"igoStopPropagation\", \"\", \"mat-icon-button\", \"\", 3, \"click\", 4, \"ngIf\"], [\"mat-list-avatar\", \"\", 3, \"svgIcon\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"search-result-tooltip\", 3, \"innerHtml\", \"matTooltip\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\"], [\"igoStopPropagation\", \"\", \"mat-icon-button\", \"\", 3, \"click\"], [\"svgIcon\", \"magnify\"]], template: function SearchResultsItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵprojectionDef(_c0$h);\n        ɵɵelementStart(0, \"mat-list-item\");\n        ɵɵtemplate(1, SearchResultsItemComponent_mat_icon_1_Template, 1, 1, \"mat-icon\", 0);\n        ɵɵtemplate(2, SearchResultsItemComponent_h4_2_Template, 1, 2, \"h4\", 1);\n        ɵɵtemplate(3, SearchResultsItemComponent_h4_3_Template, 2, 2, \"h4\", 2);\n        ɵɵtemplate(4, SearchResultsItemComponent_button_4_Template, 2, 0, \"button\", 3);\n        ɵɵprojection(5);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.icon);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.titleHtml);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", !ctx.titleHtml);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.withZoomButton);\n    } }, directives: [MatListItem, NgIf, MatIcon, MatListAvatarCssMatStyler, MatLine, MatTooltip, MatButton, StopPropagationDirective], styles: [\"[_nghost-%COMP%]     small{color:#8c8c8c}  .search-result-tooltip{white-space:pre-line}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SearchResultsItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-results-item',\n                templateUrl: './search-results-item.component.html',\n                styleUrls: ['./search-results-item.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { result: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], showIcons: [{\n            type: Input\n        }], withZoomButton: [{\n            type: Input\n        }], zoomEvent: [{\n            type: Output\n        }] }); })();\n\nconst _c0$i = [\"igoSearchItemToolbar\"];\nfunction SearchResultsComponent_ng_template_1_igo_collapsible_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainer(0);\n} }\nconst _c1$c = function (a0) { return { results: a0 }; };\nfunction SearchResultsComponent_ng_template_1_igo_collapsible_0_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-collapsible\", 6);\n    ɵɵlistener(\"toggle\", function SearchResultsComponent_ng_template_1_igo_collapsible_0_Template_igo_collapsible_toggle_0_listener($event) { ɵɵrestoreView(_r10); const group_r2 = ɵɵnextContext().$implicit; const ctx_r9 = ɵɵnextContext(); return (ctx_r9.collapsed[group_r2.source.title] = $event); });\n    ɵɵtemplate(1, SearchResultsComponent_ng_template_1_igo_collapsible_0_ng_container_1_Template, 1, 0, \"ng-container\", 7);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const group_r2 = ɵɵnextContext().$implicit;\n    const _r6 = ɵɵreference(4);\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵclassMap(group_r2.source.getId());\n    ɵɵproperty(\"title\", ctx_r3.computeGroupTitle(group_r2))(\"collapsed\", ctx_r3.collapsed[group_r2.source.title]);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngTemplateOutlet\", _r6)(\"ngTemplateOutletContext\", ɵɵpureFunction1(6, _c1$c, group_r2.results));\n} }\nfunction SearchResultsComponent_ng_template_1_ng_template_1_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainer(0);\n} }\nfunction SearchResultsComponent_ng_template_1_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, SearchResultsComponent_ng_template_1_ng_template_1_ng_container_0_Template, 1, 0, \"ng-container\", 7);\n} if (rf & 2) {\n    const group_r2 = ɵɵnextContext().$implicit;\n    const _r6 = ɵɵreference(4);\n    ɵɵproperty(\"ngTemplateOutlet\", _r6)(\"ngTemplateOutletContext\", ɵɵpureFunction1(2, _c1$c, group_r2.results));\n} }\nconst _c2$5 = function (a0) { return { result: a0 }; };\nfunction SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    const _r20 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-search-results-item\", 9);\n    ɵɵlistener(\"focus\", function SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template_igo_search_results_item_focus_0_listener() { ɵɵrestoreView(_r20); const result_r18 = ctx.$implicit; const ctx_r19 = ɵɵnextContext(3); return ctx_r19.resultFocus.emit(result_r18); })(\"unfocus\", function SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template_igo_search_results_item_unfocus_0_listener() { ɵɵrestoreView(_r20); const result_r18 = ctx.$implicit; const ctx_r21 = ɵɵnextContext(3); return ctx_r21.resultUnfocus.emit(result_r18); })(\"select\", function SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template_igo_search_results_item_select_0_listener() { ɵɵrestoreView(_r20); const result_r18 = ctx.$implicit; const ctx_r22 = ɵɵnextContext(3); return ctx_r22.onResultSelect(result_r18); })(\"mouseenter\", function SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template_igo_search_results_item_mouseenter_0_listener() { ɵɵrestoreView(_r20); const result_r18 = ctx.$implicit; const ctx_r23 = ɵɵnextContext(3); return ctx_r23.resultFocus.emit(result_r18); })(\"mouseleave\", function SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template_igo_search_results_item_mouseleave_0_listener() { ɵɵrestoreView(_r20); const result_r18 = ctx.$implicit; const ctx_r24 = ɵɵnextContext(3); return ctx_r24.resultUnfocus.emit(result_r18); });\n    ɵɵelementContainer(1, 10);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const result_r18 = ctx.$implicit;\n    const ctx_r16 = ɵɵnextContext(3);\n    ɵɵproperty(\"map\", ctx_r16.map)(\"result\", result_r18)(\"showIcons\", ctx_r16.showIcons)(\"withZoomButton\", ctx_r16.withZoomButton)(\"focused\", ctx_r16.store.state.get(result_r18).focused)(\"selected\", ctx_r16.store.state.get(result_r18).selected);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngTemplateOutlet\", ctx_r16.templateSearchToolbar)(\"ngTemplateOutletContext\", ɵɵpureFunction1(8, _c2$5, result_r18));\n} }\nfunction SearchResultsComponent_ng_template_1_ng_template_3_span_1_Template(rf, ctx) { if (rf & 1) {\n    const _r27 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"span\", 11);\n    ɵɵlistener(\"click\", function SearchResultsComponent_ng_template_1_ng_template_3_span_1_Template_span_click_0_listener() { ɵɵrestoreView(_r27); const group_r2 = ɵɵnextContext(2).$implicit; const ctx_r25 = ɵɵnextContext(); return ctx_r25.displayMoreResults(group_r2); });\n    ɵɵelementStart(1, \"u\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(3, 1, \"igo.geo.search.displayMoreResults\"));\n} }\nfunction SearchResultsComponent_ng_template_1_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template, 2, 10, \"ng-template\", 1);\n    ɵɵtemplate(1, SearchResultsComponent_ng_template_1_ng_template_3_span_1_Template, 4, 3, \"span\", 8);\n} if (rf & 2) {\n    const results_r15 = ctx.results;\n    const group_r2 = ɵɵnextContext().$implicit;\n    const ctx_r7 = ɵɵnextContext();\n    ɵɵproperty(\"ngForOf\", results_r15);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r7.isMoreResults(group_r2));\n} }\nfunction SearchResultsComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, SearchResultsComponent_ng_template_1_igo_collapsible_0_Template, 2, 8, \"igo-collapsible\", 3);\n    ɵɵtemplate(1, SearchResultsComponent_ng_template_1_ng_template_1_Template, 1, 4, \"ng-template\", null, 4, ɵɵtemplateRefExtractor);\n    ɵɵtemplate(3, SearchResultsComponent_ng_template_1_ng_template_3_Template, 2, 2, \"ng-template\", null, 5, ɵɵtemplateRefExtractor);\n} if (rf & 2) {\n    const _r4 = ɵɵreference(2);\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"ngIf\", ctx_r1.mode === ctx_r1.searchResultMode.Grouped)(\"ngIfElse\", _r4);\n} }\nvar SearchResultMode;\n(function (SearchResultMode) {\n    SearchResultMode[\"Grouped\"] = \"grouped\";\n    SearchResultMode[\"Flat\"] = \"flat\";\n})(SearchResultMode || (SearchResultMode = {}));\n/**\n * List of search results with focus and selection capabilities.\n * This component is dumb and only emits events.\n */\nclass SearchResultsComponent {\n    constructor(cdRef, searchService) {\n        this.cdRef = cdRef;\n        this.searchService = searchService;\n        /**\n         * Reference to the SearchResultMode enum\n         * @internal\n         */\n        this.searchResultMode = SearchResultMode;\n        this.pageIterator = [];\n        this.collapsed = [];\n        /**\n         * Search results display mode\n         */\n        this.mode = SearchResultMode.Grouped;\n        /**\n         * Whether there should be a zoom button\n         */\n        this.withZoomButton = false;\n        this.settingsChange$ = new BehaviorSubject(undefined);\n        this.termSplitter = '|';\n        /**\n         * Event emitted when a result is focused\n         */\n        this.resultFocus = new EventEmitter();\n        /**\n         * Event emitted when a result is unfocused\n         */\n        this.resultUnfocus = new EventEmitter();\n        /**\n         * Event emitted when a result is selected\n         */\n        this.resultSelect = new EventEmitter();\n        /**\n         * Event emitted when a research is completed after displaying more results is clicked\n         */\n        this.moreResults = new EventEmitter();\n        /**\n         * Events emitted when a result is focus or unfocus by mouse event\n         */\n        this.resultMouseenter = new EventEmitter();\n        this.resultMouseleave = new EventEmitter();\n    }\n    /**\n     * Search term\n     */\n    get term() {\n        return this._term;\n    }\n    set term(value) {\n        this._term = value;\n        this.pageIterator = [];\n    }\n    get results$() {\n        if (this._results$ === undefined) {\n            this._results$ = this.liftResults();\n        }\n        return this._results$;\n    }\n    /**\n     * Bind the search results store to the watcher\n     * @internal\n     */\n    ngOnInit() {\n        this.watcher = new EntityStoreWatcher(this.store, this.cdRef);\n        this.settingsChange$$ = this.settingsChange$.subscribe(() => {\n            this.pageIterator = [];\n        });\n    }\n    /**\n     * Unbind the search results store from the watcher\n     * @internal\n     */\n    ngOnDestroy() {\n        this.watcher.destroy();\n        this.settingsChange$$.unsubscribe();\n    }\n    /**\n     * Compute a group title\n     * @param group Search results group\n     * @returns Group title\n     * @internal\n     */\n    computeGroupTitle(group) {\n        const parts = [group.source.title];\n        const count = group.results.length;\n        if (count > 1) {\n            parts.push(`(${count})`);\n        }\n        return parts.join(' ');\n    }\n    /**\n     * When a result is selected, update it's state in the store and emit\n     * an event. A selected result is also considered focused\n     * @param result Search result\n     * @internal\n     */\n    onResultSelect(result) {\n        if (this.store.state.get(result)) {\n            if (this.store.state.get(result).selected === true) {\n                return;\n            }\n        }\n        this.store.state.update(result, { focused: true, selected: true }, true);\n        this.resultSelect.emit(result);\n    }\n    /**\n     * Return an observable of the search results, grouped by search source\n     * @returns Observable of grouped search results\n     * @internal\n     */\n    liftResults() {\n        return this.store.stateView.all$().pipe(debounce((results) => {\n            return results.length === 0 ? EMPTY : timer(200);\n        }), map((results) => {\n            return this.groupResults(results.map(r => r.entity).sort(this.sortByOrder));\n        }));\n    }\n    /**\n     * Sort the results by display order.\n     * @param r1 First result\n     * @param r2 Second result\n     */\n    sortByOrder(r1, r2) {\n        return r1.source.displayOrder - r2.source.displayOrder;\n    }\n    /**\n     * Group results by search source\n     * @param results Search results from all sources\n     * @returns Search results grouped by source\n     */\n    groupResults(results) {\n        const grouped = new Map();\n        results.forEach((result) => {\n            const source = result.source;\n            let sourceResults = grouped.get(source);\n            if (sourceResults === undefined) {\n                sourceResults = [];\n                grouped.set(source, sourceResults);\n            }\n            sourceResults.push(result);\n        });\n        return Array.from(grouped.keys()).map((source) => {\n            if (this.pageIterator[source.getId()] === undefined) {\n                this.pageIterator[source.getId()] = 1;\n            }\n            return { source, results: grouped.get(source) };\n        });\n    }\n    isMoreResults(group) {\n        // getStrategyOfType is to avoid display more result based on a filtered state\n        const stategy = this.store.getStrategyOfType(EntityStoreFilterCustomFuncStrategy);\n        const active = (stategy === null || stategy === void 0 ? void 0 : stategy.active) || false;\n        return !active && group.results &&\n            group.results[group.results.length - 1].meta.nextPage === true;\n    }\n    displayMoreResults(group) {\n        const options = {\n            sourceId: group.source.getId(),\n            page: ++this.pageIterator[group.source.getId()]\n        };\n        let terms;\n        if (this.termSplitter && this.term.match(new RegExp(this.termSplitter, 'g'))) {\n            terms = this.term.split(this.termSplitter);\n        }\n        else {\n            terms = [this.term];\n        }\n        let researches = [];\n        terms.map((term) => {\n            researches = researches.concat(this.searchService.search(term, options));\n        });\n        researches.map(research => {\n            research.request.subscribe((results) => {\n                const newResults = group.results.concat(results);\n                if (!results.length) {\n                    newResults[newResults.length - 1].meta.nextPage = false;\n                }\n                this.moreResults.emit({ research, results: newResults });\n            });\n        });\n        return;\n    }\n}\nSearchResultsComponent.ɵfac = function SearchResultsComponent_Factory(t) { return new (t || SearchResultsComponent)(ɵɵdirectiveInject(ChangeDetectorRef), ɵɵdirectiveInject(SearchService)); };\nSearchResultsComponent.ɵcmp = ɵɵdefineComponent({ type: SearchResultsComponent, selectors: [[\"igo-search-results\"]], contentQueries: function SearchResultsComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ɵɵcontentQuery(dirIndex, _c0$i, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.templateSearchToolbar = _t.first);\n    } }, inputs: { map: \"map\", store: \"store\", showIcons: \"showIcons\", mode: \"mode\", withZoomButton: \"withZoomButton\", term: \"term\", settingsChange$: \"settingsChange$\", termSplitter: \"termSplitter\" }, outputs: { resultFocus: \"resultFocus\", resultUnfocus: \"resultUnfocus\", resultSelect: \"resultSelect\", moreResults: \"moreResults\", resultMouseenter: \"resultMouseenter\", resultMouseleave: \"resultMouseleave\" }, decls: 4, vars: 4, consts: [[3, \"navigation\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"groupTemplate\", \"\"], [3, \"class\", \"title\", \"collapsed\", \"toggle\", 4, \"ngIf\", \"ngIfElse\"], [\"flatTemplate\", \"\"], [\"storeItemTemplate\", \"\"], [3, \"title\", \"collapsed\", \"toggle\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"class\", \"moreResults mat-typography\", 3, \"click\", 4, \"ngIf\"], [\"igoListItem\", \"\", \"color\", \"accent\", 3, \"map\", \"result\", \"showIcons\", \"withZoomButton\", \"focused\", \"selected\", \"focus\", \"unfocus\", \"select\", \"mouseenter\", \"mouseleave\"], [\"igoSearchItemToolbar\", \"\", 3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [1, \"moreResults\", \"mat-typography\", 3, \"click\"]], template: function SearchResultsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-list\", 0);\n        ɵɵtemplate(1, SearchResultsComponent_ng_template_1_Template, 5, 2, \"ng-template\", 1, 2, ɵɵtemplateRefExtractor);\n        ɵɵpipe(3, \"async\");\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"navigation\", true);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(3, 2, ctx.results$));\n    } }, directives: [ListComponent, NgForOf, NgIf, CollapsibleComponent, NgTemplateOutlet, SearchResultsItemComponent, ListItemDirective], pipes: [AsyncPipe, TranslatePipe], styles: [\".moreResults[_ngcontent-%COMP%]{color:#00f;cursor:pointer;float:right;margin-right:10px;margin-top:5px}igo-list[_ngcontent-%COMP%]     mat-list{height:100%}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SearchResultsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-results',\n                templateUrl: './search-results.component.html',\n                styleUrls: ['./search-results.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ChangeDetectorRef }, { type: SearchService }]; }, { map: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], showIcons: [{\n            type: Input\n        }], mode: [{\n            type: Input\n        }], withZoomButton: [{\n            type: Input\n        }], term: [{\n            type: Input\n        }], settingsChange$: [{\n            type: Input\n        }], termSplitter: [{\n            type: Input\n        }], resultFocus: [{\n            type: Output\n        }], resultUnfocus: [{\n            type: Output\n        }], resultSelect: [{\n            type: Output\n        }], moreResults: [{\n            type: Output\n        }], resultMouseenter: [{\n            type: Output\n        }], resultMouseleave: [{\n            type: Output\n        }], templateSearchToolbar: [{\n            type: ContentChild,\n            args: ['igoSearchItemToolbar', /* TODO: add static flag */ {}]\n        }] }); })();\n\nfunction SearchResultAddButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 1);\n    ɵɵlistener(\"mouseenter\", function SearchResultAddButtonComponent_button_0_Template_button_mouseenter_0_listener($event) { ɵɵrestoreView(_r2); const ctx_r1 = ɵɵnextContext(); return ctx_r1.onMouseEvent($event); })(\"mouseleave\", function SearchResultAddButtonComponent_button_0_Template_button_mouseleave_0_listener($event) { ɵɵrestoreView(_r2); const ctx_r3 = ɵɵnextContext(); return ctx_r3.onMouseEvent($event); })(\"click\", function SearchResultAddButtonComponent_button_0_Template_button_click_0_listener($event) { ɵɵrestoreView(_r2); const ctx_r4 = ɵɵnextContext(); return ctx_r4.onToggleClick($event); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵpipe(2, \"async\");\n    ɵɵpipe(3, \"async\");\n    ɵɵelement(4, \"mat-icon\", 2);\n    ɵɵpipe(5, \"async\");\n    ɵɵpipe(6, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 4, ɵɵpipeBind1(2, 6, ctx_r0.tooltip$)))(\"color\", ɵɵpipeBind1(3, 8, ctx_r0.isPreview$) ? \"\" : ctx_r0.added ? \"warn\" : \"\");\n    ɵɵadvance(4);\n    ɵɵproperty(\"matBadgeHidden\", ɵɵpipeBind1(5, 10, ctx_r0.inRange$))(\"svgIcon\", ɵɵpipeBind1(6, 12, ctx_r0.isPreview$) ? \"plus\" : ctx_r0.added ? \"delete\" : \"plus\");\n} }\nclass SearchResultAddButtonComponent {\n    constructor(layerService) {\n        this.layerService = layerService;\n        this.tooltip$ = new BehaviorSubject('igo.geo.catalog.layer.addToMap');\n        this.inRange$ = new BehaviorSubject(true);\n        this.isPreview$ = new BehaviorSubject(false);\n        this.layersSubcriptions = [];\n        this.mouseInsideAdd = false;\n        this._color = 'primary';\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    /**\n     * @internal\n     */\n    ngOnInit() {\n        if (this.layer.meta.dataType === 'Layer') {\n            this.added =\n                this.map.layers.findIndex(lay => lay.id === this.layer.data.sourceOptions.id) !== -1;\n        }\n        this.resolution$$ = this.map.viewController.resolution$.subscribe(value => {\n            this.isInResolutionsRange(value);\n            this.tooltip$.next(this.computeTooltip());\n        });\n    }\n    ngOnDestroy() {\n        this.resolution$$.unsubscribe();\n    }\n    /**\n     * On mouse event, mouseenter /mouseleave\n     * @internal\n     */\n    onMouseEvent(event) {\n        this.onToggleClick(event);\n    }\n    /**\n     * On toggle button click, emit the added change event\n     * @internal\n     */\n    onToggleClick(event) {\n        if (typeof this.lastTimeoutRequest !== 'undefined') {\n            clearTimeout(this.lastTimeoutRequest);\n        }\n        if (event.type === 'mouseenter' && this.mouseInsideAdd) {\n            return;\n        }\n        switch (event.type) {\n            case 'click':\n                if (!this.isPreview$.value) {\n                    if (this.added) {\n                        this.remove();\n                    }\n                    else {\n                        this.add();\n                    }\n                }\n                this.isPreview$.next(false);\n                break;\n            case 'mouseenter':\n                if (!this.isPreview$.value && !this.added) {\n                    this.lastTimeoutRequest = setTimeout(() => {\n                        this.add();\n                        this.isPreview$.next(true);\n                    }, 500);\n                }\n                this.mouseInsideAdd = true;\n                break;\n            case 'mouseleave':\n                if (this.isPreview$.value) {\n                    this.remove();\n                    this.isPreview$.next(false);\n                }\n                this.mouseInsideAdd = false;\n                break;\n            default:\n                break;\n        }\n    }\n    add() {\n        if (!this.added) {\n            this.added = true;\n            this.addLayerToMap();\n        }\n    }\n    remove() {\n        if (this.added) {\n            this.added = false;\n            this.removeLayerFromMap();\n            this.layersSubcriptions.map(s => s.unsubscribe());\n            this.layersSubcriptions = [];\n        }\n    }\n    /**\n     * Emit added change event with added = true\n     */\n    addLayerToMap() {\n        if (this.map === undefined) {\n            return;\n        }\n        if (this.layer.meta.dataType !== LAYER) {\n            return undefined;\n        }\n        const layerOptions = this.layer.data;\n        if (layerOptions.sourceOptions.optionsFromApi === undefined) {\n            layerOptions.sourceOptions.optionsFromApi = true;\n        }\n        this.layersSubcriptions.push(this.layerService\n            .createAsyncLayer(layerOptions)\n            .subscribe(layer => this.map.addLayer(layer)));\n    }\n    /**\n     * Emit added change event with added = false\n     */\n    removeLayerFromMap() {\n        if (this.map === undefined) {\n            return;\n        }\n        if (this.layer.meta.dataType !== LAYER) {\n            return undefined;\n        }\n        const oLayer = this.map.getLayerById(this.layer.data.sourceOptions.id);\n        this.map.removeLayer(oLayer);\n    }\n    isInResolutionsRange(resolution) {\n        const minResolution = this.layer.data.minResolution || 0;\n        const maxResolution = this.layer.data.maxResolution || Infinity;\n        this.inRange$.next(resolution >= minResolution && resolution <= maxResolution);\n    }\n    computeTooltip() {\n        if (this.added) {\n            return this.inRange$.value\n                ? 'igo.geo.catalog.layer.removeFromMap'\n                : 'igo.geo.catalog.layer.removeFromMapOutRange';\n        }\n        else {\n            return this.inRange$.value\n                ? 'igo.geo.catalog.layer.addToMap'\n                : 'igo.geo.catalog.layer.addToMapOutRange';\n        }\n    }\n}\nSearchResultAddButtonComponent.ɵfac = function SearchResultAddButtonComponent_Factory(t) { return new (t || SearchResultAddButtonComponent)(ɵɵdirectiveInject(LayerService)); };\nSearchResultAddButtonComponent.ɵcmp = ɵɵdefineComponent({ type: SearchResultAddButtonComponent, selectors: [[\"igo-search-add-button\"]], inputs: { layer: \"layer\", added: \"added\", map: \"map\", color: \"color\" }, decls: 1, vars: 1, consts: [[\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"mouseenter\", \"mouseleave\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"mouseenter\", \"mouseleave\", \"click\"], [\"matBadge\", \"\", \"igoMatBadgeIcon\", \"eye-off\", \"igoMatBadgeInverseColor\", \"true\", \"matBadgeDisabled\", \"true\", \"matBadgeSize\", \"small\", \"matBadgePosition\", \"after\", 3, \"matBadgeHidden\", \"svgIcon\"]], template: function SearchResultAddButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, SearchResultAddButtonComponent_button_0_Template, 7, 14, \"button\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.layer.meta.dataType === \"Layer\");\n    } }, directives: [NgIf, MatButton, MatTooltip, MatIcon, MatBadge, IgoBadgeIconDirective], pipes: [TranslatePipe, AsyncPipe], styles: [\"\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SearchResultAddButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-add-button',\n                templateUrl: './search-results-add-button.component.html',\n                styleUrls: ['./search-results-add-button.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: LayerService }]; }, { layer: [{\n            type: Input\n        }], added: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoSearchResultsModule {\n}\nIgoSearchResultsModule.ɵmod = ɵɵdefineNgModule({ type: IgoSearchResultsModule });\nIgoSearchResultsModule.ɵinj = ɵɵdefineInjector({ factory: function IgoSearchResultsModule_Factory(t) { return new (t || IgoSearchResultsModule)(); }, imports: [[\n            CommonModule,\n            MatBadgeModule,\n            MatTooltipModule,\n            MatIconModule,\n            MatListModule,\n            MatButtonModule,\n            IgoCollapsibleModule,\n            IgoListModule,\n            IgoStopPropagationModule,\n            IgoLanguageModule,\n            IgoMatBadgeIconModule,\n            IgoMetadataModule,\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoSearchResultsModule, { declarations: [SearchResultsComponent,\n        SearchResultsItemComponent,\n        SearchResultAddButtonComponent], imports: [CommonModule,\n        MatBadgeModule,\n        MatTooltipModule,\n        MatIconModule,\n        MatListModule,\n        MatButtonModule,\n        IgoCollapsibleModule,\n        IgoListModule,\n        IgoStopPropagationModule,\n        IgoLanguageModule,\n        IgoMatBadgeIconModule,\n        IgoMetadataModule], exports: [SearchResultsComponent,\n        SearchResultAddButtonComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoSearchResultsModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatBadgeModule,\n                    MatTooltipModule,\n                    MatIconModule,\n                    MatListModule,\n                    MatButtonModule,\n                    IgoCollapsibleModule,\n                    IgoListModule,\n                    IgoStopPropagationModule,\n                    IgoLanguageModule,\n                    IgoMatBadgeIconModule,\n                    IgoMetadataModule,\n                ],\n                exports: [\n                    SearchResultsComponent,\n                    SearchResultAddButtonComponent\n                ],\n                declarations: [\n                    SearchResultsComponent,\n                    SearchResultsItemComponent,\n                    SearchResultAddButtonComponent\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * This directive makes the mouse coordinate trigger a reverse search on available search sources.\n * The search results are placed into a label, on a cross icon, representing the mouse coordinate.\n * By default, no search sources. Config in config file must be defined.\n * the layer level.\n */\nclass SearchPointerSummaryDirective {\n    constructor(component, searchService, searchSourceService, mediaService) {\n        this.component = component;\n        this.searchService = searchService;\n        this.searchSourceService = searchSourceService;\n        this.mediaService = mediaService;\n        this.pointerSearchStore = new EntityStore([]);\n        this.reverseSearch$$ = [];\n        this.hasPointerReverseSearchSource = false;\n        this.searchPointerSummaryFeatureId = 'searchPointerSummaryFeatureId';\n        /**\n         * The delay where the mouse must be motionless before trigger the reverse search\n         */\n        this.igoSearchPointerSummaryDelay = 1000;\n        /**\n         * If the user has enabled or not the directive\n         */\n        this.igoSearchPointerSummaryEnabled = false;\n    }\n    /**\n     * IGO map\n     * @internal\n     */\n    get map() {\n        return this.component.map;\n    }\n    get mapProjection() {\n        return this.component.map.projection;\n    }\n    /**\n     * Start listening to pointermove and reverse search results.\n     * @internal\n     */\n    ngOnInit() {\n        this.listenToMapPointerMove();\n        this.subscribeToPointerStore();\n        this.map.status$.pipe(take(1)).subscribe(() => {\n            this.store = new FeatureStore([], { map: this.map });\n            this.initStore();\n        });\n        // To handle context change without using the contextService.\n        this.layers$$ = this.map.layers$.subscribe((layers) => {\n            if (this.store && !layers.find(l => l.id === 'searchPointerSummaryId')) {\n                this.initStore();\n            }\n        });\n    }\n    /**\n     * Initialize the pointer position store\n     * @internal\n     */\n    initStore() {\n        const store = this.store;\n        const layer = new VectorLayer({\n            id: 'searchPointerSummaryId',\n            title: 'searchPointerSummary',\n            zIndex: 900,\n            source: new FeatureDataSource(),\n            showInLayerList: false,\n            exportable: false,\n            browsable: false,\n            style: pointerPositionSummaryMarker\n        });\n        tryBindStoreLayer(store, layer);\n    }\n    ngAfterContentChecked() {\n        if (!this.searchSourceService.getEnabledSources().filter(sourceCanReverseSearchAsSummary).length) {\n            this.hasPointerReverseSearchSource = false;\n        }\n        else {\n            this.hasPointerReverseSearchSource = true;\n        }\n    }\n    /**\n     * Stop listening to pointermove and reverse search results.\n     * @internal\n     */\n    ngOnDestroy() {\n        this.unlistenToMapPointerMove();\n        this.unsubscribeToPointerStore();\n        this.unsubscribeReverseSearch();\n        this.layers$$.unsubscribe();\n    }\n    /**\n     * Subscribe to pointermove result store\n     * @internal\n     */\n    subscribeToPointerStore() {\n        this.store$$ = this.pointerSearchStore.entities$.subscribe(resultsUnderPointerPosition => {\n            this.entitiesToPointerOverlay(resultsUnderPointerPosition);\n        });\n    }\n    /**\n     * Build an object based on the closest feature by type (base on type and distance properties )\n     * @param results SearchResult[]\n     * @returns OL style function\n     */\n    computeSummaryClosestFeature(results) {\n        const closestResultByType = {};\n        results.map(result => {\n            if (result.data.properties.type && result.data.properties.distance >= 0) {\n                if (closestResultByType.hasOwnProperty(result.data.properties.type)) {\n                    const prevDistance = closestResultByType[result.data.properties.type].distance;\n                    if (result.data.properties.distance < prevDistance) {\n                        closestResultByType[result.data.properties.type] = { distance: result.data.properties.distance, title: result.meta.title };\n                    }\n                }\n                else {\n                    closestResultByType[result.data.properties.type] = { distance: result.data.properties.distance, title: result.meta.title };\n                }\n            }\n        });\n        return closestResultByType;\n    }\n    /**\n     * convert store entities to a pointer position overlay with label summary on.\n     * @param event OL map browser pointer event\n     */\n    entitiesToPointerOverlay(resultsUnderPointerPosition) {\n        const closestResultByType = this.computeSummaryClosestFeature(resultsUnderPointerPosition);\n        const summarizedClosestType = Object.keys(closestResultByType);\n        const processedSummarizedClosestType = [];\n        const summary = [];\n        resultsUnderPointerPosition.map(result => {\n            const typeIndex = summarizedClosestType.indexOf(result.data.properties.type);\n            if (typeIndex !== -1) {\n                summary.push(closestResultByType[result.data.properties.type].title);\n                summarizedClosestType.splice(typeIndex, 1);\n                processedSummarizedClosestType.push(result.data.properties.type);\n            }\n            else {\n                if (processedSummarizedClosestType.indexOf(result.data.properties.type) === -1) {\n                    summary.push(result.meta.title);\n                }\n            }\n        });\n        if (summary.length) {\n            this.addPointerOverlay(summary.join('\\n'));\n        }\n    }\n    /**\n     * On map pointermove\n     */\n    listenToMapPointerMove() {\n        this.pointerMoveListener = this.map.ol.on('pointermove', (event) => this.onMapEvent(event));\n    }\n    /**\n     * Unsubscribe to pointer store.\n     * @internal\n     */\n    unsubscribeToPointerStore() {\n        this.store$$.unsubscribe();\n    }\n    /**\n     * Unsubscribe to reverse seatch store.\n     * @internal\n     */\n    unsubscribeReverseSearch() {\n        this.reverseSearch$$.map(s => s.unsubscribe());\n        this.reverseSearch$$ = [];\n    }\n    /**\n     * Stop listening for map pointermove\n     * @internal\n     */\n    unlistenToMapPointerMove() {\n        this.map.ol.un(this.pointerMoveListener.type, this.pointerMoveListener.listener);\n        this.pointerMoveListener = undefined;\n    }\n    /**\n     * Trigger reverse search when the mouse is motionless during the defined delay (pointerMoveDelay).\n     * @param event OL map browser pointer event\n     */\n    onMapEvent(event) {\n        if (event.dragging || !this.igoSearchPointerSummaryEnabled ||\n            !this.hasPointerReverseSearchSource || this.mediaService.isTouchScreen()) {\n            this.clearLayer();\n            return;\n        }\n        if (typeof this.lastTimeoutRequest !== 'undefined') { // cancel timeout when the mouse moves\n            clearTimeout(this.lastTimeoutRequest);\n            this.clearLayer();\n            this.unsubscribeReverseSearch();\n        }\n        this.lonLat = transform(event.coordinate, this.mapProjection, 'EPSG:4326');\n        this.lastTimeoutRequest = setTimeout(() => {\n            this.onSearchCoordinate();\n        }, this.igoSearchPointerSummaryDelay);\n    }\n    onSearchCoordinate() {\n        this.pointerSearchStore.clear();\n        const results = this.searchService.reverseSearch(this.lonLat, { params: { geometry: 'false', icon: 'false' } }, true);\n        for (const i in results) {\n            if (results.length > 0) {\n                this.reverseSearch$$.push(results[i].request.subscribe((_results) => {\n                    this.onSearch({ research: results[i], results: _results });\n                }));\n            }\n        }\n    }\n    onSearch(event) {\n        const results = event.results;\n        const newResults = this.pointerSearchStore.all()\n            .filter((result) => result.source !== event.research.source)\n            .concat(results);\n        this.pointerSearchStore.load(newResults);\n    }\n    /**\n     * Add a feature to the pointer store\n     * @param text string\n     */\n    addPointerOverlay(text) {\n        this.clearLayer();\n        const geometry = new Point(transform(this.lonLat, 'EPSG:4326', this.mapProjection));\n        const feature = new olFeature({ geometry });\n        const geojsonGeom = new OlGeoJSON().writeGeometryObject(geometry, {\n            featureProjection: this.mapProjection,\n            dataProjection: this.mapProjection\n        });\n        const f = {\n            type: FEATURE,\n            geometry: geojsonGeom,\n            projection: this.mapProjection,\n            properties: {\n                id: this.searchPointerSummaryFeatureId,\n                pointerSummary: text\n            },\n            meta: {\n                id: this.searchPointerSummaryFeatureId\n            },\n            ol: feature\n        };\n        this.store.setLayerFeatures([f], FeatureMotion.None);\n    }\n    /**\n     * Clear the pointer store features\n     */\n    clearLayer() {\n        if (this.store) {\n            this.store.clearLayer();\n        }\n    }\n}\nSearchPointerSummaryDirective.ɵfac = function SearchPointerSummaryDirective_Factory(t) { return new (t || SearchPointerSummaryDirective)(ɵɵdirectiveInject(MapBrowserComponent, 2), ɵɵdirectiveInject(SearchService), ɵɵdirectiveInject(SearchSourceService), ɵɵdirectiveInject(MediaService)); };\nSearchPointerSummaryDirective.ɵdir = ɵɵdefineDirective({ type: SearchPointerSummaryDirective, selectors: [[\"\", \"igoSearchPointerSummary\", \"\"]], inputs: { igoSearchPointerSummaryDelay: \"igoSearchPointerSummaryDelay\", igoSearchPointerSummaryEnabled: \"igoSearchPointerSummaryEnabled\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SearchPointerSummaryDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoSearchPointerSummary]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent, decorators: [{\n                type: Self\n            }] }, { type: SearchService }, { type: SearchSourceService }, { type: MediaService }]; }, { igoSearchPointerSummaryDelay: [{\n            type: Input\n        }], igoSearchPointerSummaryEnabled: [{\n            type: Input\n        }] }); })();\n/**\n * Create a default style for the pointer position and it's label summary.\n * @param feature OlFeature\n * @returns OL style function\n */\nfunction pointerPositionSummaryMarker(feature, resolution) {\n    return new Style({\n        image: new Icon({\n            src: './assets/igo2/geo/icons/cross_black_18px.svg',\n            imgSize: [18, 18],\n        }),\n        text: new Text({\n            text: feature.get('pointerSummary'),\n            textAlign: 'left',\n            textBaseline: 'bottom',\n            font: '12px Calibri,sans-serif',\n            fill: new Fill({ color: '#000' }),\n            backgroundFill: new Fill({ color: 'rgba(255, 255, 255, 0.5)' }),\n            backgroundStroke: new Stroke({ color: 'rgba(200, 200, 200, 0.75)', width: 2 }),\n            stroke: new Stroke({ color: '#fff', width: 3 }),\n            overflow: true,\n            offsetX: 10,\n            offsetY: -10,\n            padding: [2.5, 2.5, 2.5, 2.5]\n        })\n    });\n}\n\nclass IgoSearchModule {\n    static forRoot() {\n        return {\n            ngModule: IgoSearchModule,\n            providers: [\n                SearchService,\n                provideSearchSourceService(),\n                provideDefaultIChercheSearchResultFormatter(),\n                provideDefaultCoordinatesSearchResultFormatter(),\n                provideILayerSearchResultFormatter()\n            ]\n        };\n    }\n}\nIgoSearchModule.ɵmod = ɵɵdefineNgModule({ type: IgoSearchModule });\nIgoSearchModule.ɵinj = ɵɵdefineInjector({ factory: function IgoSearchModule_Factory(t) { return new (t || IgoSearchModule)(); }, imports: [[\n            CommonModule,\n            IgoSearchBarModule,\n            IgoSearchSelectorModule,\n            IgoSearchResultsModule,\n            IgoSearchSettingsModule\n        ], IgoSearchBarModule,\n        IgoSearchSelectorModule,\n        IgoSearchResultsModule,\n        IgoSearchSettingsModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoSearchModule, { declarations: [SearchPointerSummaryDirective], imports: [CommonModule,\n        IgoSearchBarModule,\n        IgoSearchSelectorModule,\n        IgoSearchResultsModule,\n        IgoSearchSettingsModule], exports: [IgoSearchBarModule,\n        IgoSearchSelectorModule,\n        IgoSearchResultsModule,\n        IgoSearchSettingsModule,\n        SearchPointerSummaryDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoSearchModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoSearchBarModule,\n                    IgoSearchSelectorModule,\n                    IgoSearchResultsModule,\n                    IgoSearchSettingsModule\n                ],\n                exports: [\n                    IgoSearchBarModule,\n                    IgoSearchSelectorModule,\n                    IgoSearchResultsModule,\n                    IgoSearchSettingsModule,\n                    SearchPointerSummaryDirective\n                ],\n                declarations: [SearchPointerSummaryDirective]\n            }]\n    }], null, null); })();\n\nfunction ToastComponent_button_5_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 7);\n    ɵɵlistener(\"click\", function ToastComponent_button_5_Template_button_click_0_listener() { ɵɵrestoreView(_r3); const ctx_r2 = ɵɵnextContext(); return ctx_r2.zoomToFeatureExtent(); });\n    ɵɵelement(1, \"mat-icon\", 8);\n    ɵɵelementEnd();\n} }\nconst _c0$j = function () { return [\"collapsed\", \"initial\"]; };\nclass ToastComponent {\n    constructor() {\n        this.format = new OlGeoJSON();\n        this.opened = new EventEmitter();\n    }\n    get expanded() {\n        return this._expanded;\n    }\n    set expanded(value) {\n        this.state = value ? 'expanded' : 'collapsed';\n        this._expanded = value;\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get feature() {\n        return this._feature;\n    }\n    set feature(value) {\n        this._feature = value;\n    }\n    /**\n     * @internal\n     */\n    get title() { return getEntityTitle(this.feature); }\n    toggle() {\n        this.expanded = !this.expanded;\n        this.opened.emit(this.expanded);\n    }\n    zoomToFeatureExtent() {\n        if (this.feature.geometry) {\n            const olFeature = this.format.readFeature(this.feature, {\n                dataProjection: this.feature.projection,\n                featureProjection: this.map.projection\n            });\n            moveToOlFeatures(this.map, [olFeature], FeatureMotion.Zoom);\n        }\n    }\n    swipe(action) {\n        if (action === ToastComponent.SWIPE_ACTION.UP) {\n            if (!this.expanded) {\n                this.toggle();\n            }\n        }\n        else if (action === ToastComponent.SWIPE_ACTION.DOWN) {\n            if (this.expanded) {\n                this.toggle();\n            }\n        }\n    }\n}\nToastComponent.SWIPE_ACTION = {\n    UP: 'swipeup',\n    DOWN: 'swipedown'\n};\nToastComponent.ɵfac = function ToastComponent_Factory(t) { return new (t || ToastComponent)(); };\nToastComponent.ɵcmp = ɵɵdefineComponent({ type: ToastComponent, selectors: [[\"igo-toast\"]], inputs: { expanded: \"expanded\", map: \"map\", feature: \"feature\" }, outputs: { opened: \"opened\" }, decls: 7, vars: 6, consts: [[\"collapsedMobile\", \"51px\", \"expandedMobile\", \"300px\", 3, \"state\", \"swipeup\", \"swipedown\"], [\"flex\", \"\"], [3, \"title\"], [\"mat-icon-button\", \"\", \"panelLeftButton\", \"\", 3, \"click\"], [3, \"svgIcon\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", \"class\", \"igo-icon-button\", 3, \"click\", 4, \"ngIf\"], [3, \"feature\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", 1, \"igo-icon-button\", 3, \"click\"], [\"svgIcon\", \"zoom-in\"]], template: function ToastComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-flexible\", 0, 1);\n        ɵɵlistener(\"swipeup\", function ToastComponent_Template_igo_flexible_swipeup_0_listener($event) { return ctx.swipe($event.type); })(\"swipedown\", function ToastComponent_Template_igo_flexible_swipedown_0_listener($event) { return ctx.swipe($event.type); });\n        ɵɵelementStart(2, \"igo-panel\", 2);\n        ɵɵelementStart(3, \"button\", 3);\n        ɵɵlistener(\"click\", function ToastComponent_Template_button_click_3_listener() { return ctx.toggle(); });\n        ɵɵelement(4, \"mat-icon\", 4);\n        ɵɵelementEnd();\n        ɵɵtemplate(5, ToastComponent_button_5_Template, 2, 0, \"button\", 5);\n        ɵɵelement(6, \"igo-feature-details\", 6);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r0 = ɵɵreference(1);\n        ɵɵproperty(\"state\", ctx.state);\n        ɵɵadvance(2);\n        ɵɵproperty(\"title\", ctx.title);\n        ɵɵadvance(2);\n        ɵɵproperty(\"svgIcon\", ɵɵpureFunction0(5, _c0$j).indexOf(_r0.state) >= 0 ? \"arrow_upward\" : \"arrow_downward\");\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.feature.geometry);\n        ɵɵadvance(1);\n        ɵɵproperty(\"feature\", ctx.feature);\n    } }, directives: [FlexibleComponent, PanelComponent, MatButton, MatIcon, NgIf, FeatureDetailsComponent], styles: [\"[_nghost-%COMP%]{background-color:#fff;bottom:0;max-height:calc(100% - 50px);position:absolute}[_nghost-%COMP%], igo-feature-details[_ngcontent-%COMP%]     table{width:100%}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ToastComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-toast',\n                templateUrl: './toast.component.html',\n                styleUrls: ['./toast.component.scss']\n            }]\n    }], function () { return []; }, { expanded: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], feature: [{\n            type: Input\n        }], opened: [{\n            type: Output\n        }] }); })();\n\nclass IgoToastModule {\n    static forRoot() {\n        return {\n            ngModule: IgoToastModule\n        };\n    }\n}\nIgoToastModule.ɵmod = ɵɵdefineNgModule({ type: IgoToastModule });\nIgoToastModule.ɵinj = ɵɵdefineInjector({ factory: function IgoToastModule_Factory(t) { return new (t || IgoToastModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatButtonModule,\n            IgoPanelModule,\n            IgoFlexibleModule,\n            IgoFeatureModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoToastModule, { declarations: [ToastComponent], imports: [CommonModule,\n        MatIconModule,\n        MatButtonModule,\n        IgoPanelModule,\n        IgoFlexibleModule,\n        IgoFeatureModule], exports: [ToastComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoToastModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    IgoPanelModule,\n                    IgoFlexibleModule,\n                    IgoFeatureModule\n                ],\n                exports: [ToastComponent],\n                declarations: [ToastComponent]\n            }]\n    }], null, null); })();\n\nclass OgcFilterComponent {\n    constructor(cdRef) {\n        this.cdRef = cdRef;\n        /**\n         * Event emitted on complete\n         */\n        this.complete = new EventEmitter();\n        /**\n         * Event emitted on cancel\n         */\n        this.cancel = new EventEmitter();\n    }\n    /**\n     * Implemented as part of OnUpdateInputs\n     */\n    onUpdateInputs() {\n        this.cdRef.detectChanges();\n    }\n    /**\n     * On close, emit the cancel event\n     */\n    onClose() {\n        this.cancel.emit();\n    }\n}\nOgcFilterComponent.ɵfac = function OgcFilterComponent_Factory(t) { return new (t || OgcFilterComponent)(ɵɵdirectiveInject(ChangeDetectorRef)); };\nOgcFilterComponent.ɵcmp = ɵɵdefineComponent({ type: OgcFilterComponent, selectors: [[\"igo-ogc-filter\"]], inputs: { layer: \"layer\", map: \"map\" }, outputs: { complete: \"complete\", cancel: \"cancel\" }, decls: 1, vars: 3, consts: [[\"igoListItem\", \"\", 3, \"layer\", \"header\", \"map\"]], template: function OgcFilterComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"igo-ogc-filterable-item\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"layer\", ctx.layer)(\"header\", false)(\"map\", ctx.map);\n    } }, directives: [OgcFilterableItemComponent], styles: [\"\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OgcFilterComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filter',\n                templateUrl: './ogc-filter.component.html',\n                styleUrls: ['./ogc-filter.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ChangeDetectorRef }]; }, { layer: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], complete: [{\n            type: Output\n        }], cancel: [{\n            type: Output\n        }] }); })();\n\nconst OgcFilterWidget = new InjectionToken('OgcFilterWidget');\nfunction ogcFilterWidgetFactory(widgetService) {\n    return widgetService.create(OgcFilterComponent);\n}\nfunction provideOgcFilterWidget() {\n    return {\n        provide: OgcFilterWidget,\n        useFactory: ogcFilterWidgetFactory,\n        deps: [WidgetService]\n    };\n}\n\n/**\n * @ignore\n */\nclass IgoOgcFilterModule {\n}\nIgoOgcFilterModule.ɵmod = ɵɵdefineNgModule({ type: IgoOgcFilterModule });\nIgoOgcFilterModule.ɵinj = ɵɵdefineInjector({ factory: function IgoOgcFilterModule_Factory(t) { return new (t || IgoOgcFilterModule)(); }, imports: [[\n            CommonModule,\n            MatButtonModule,\n            IgoLanguageModule,\n            IgoFilterModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoOgcFilterModule, { declarations: [OgcFilterComponent], imports: [CommonModule,\n        MatButtonModule,\n        IgoLanguageModule,\n        IgoFilterModule], exports: [OgcFilterComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoOgcFilterModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatButtonModule,\n                    IgoLanguageModule,\n                    IgoFilterModule\n                ],\n                exports: [OgcFilterComponent],\n                declarations: [OgcFilterComponent]\n            }]\n    }], null, null); })();\n\nclass WfsWorkspace extends Workspace {\n    constructor(options) {\n        super(options);\n        this.options = options;\n        this.inResolutionRange$ = new BehaviorSubject(true);\n        this.map.viewController.resolution$.subscribe((mapResolution) => {\n            if (mapResolution > this.layer.minResolution && mapResolution < this.layer.maxResolution) {\n                this.inResolutionRange$.next(true);\n            }\n            else {\n                this.inResolutionRange$.next(false);\n            }\n        });\n    }\n    get layer() { return this.options.layer; }\n    get map() { return this.options.map; }\n}\n\nclass WfsWorkspaceService {\n    constructor(storageService) {\n        this.storageService = storageService;\n    }\n    get zoomAuto() {\n        return this.storageService.get('zoomAuto');\n    }\n    createWorkspace(layer, map) {\n        var _a;\n        if (((_a = layer.options.workspace) === null || _a === void 0 ? void 0 : _a.enabled) === false) {\n            return;\n        }\n        layer.options.workspace = Object.assign({}, layer.options.workspace, {\n            enabled: true,\n            srcId: layer.id,\n            workspaceId: layer.id\n        });\n        const wks = new WfsWorkspace({\n            id: layer.id,\n            title: layer.title,\n            layer,\n            map,\n            entityStore: this.createFeatureStore(layer, map),\n            actionStore: new ActionStore([]),\n            meta: {\n                tableTemplate: undefined\n            }\n        });\n        this.createTableTemplate(wks, layer);\n        return wks;\n    }\n    createFeatureStore(layer, map) {\n        const store = new FeatureStore([], { map });\n        store.bindLayer(layer);\n        const loadingStrategy = new FeatureStoreLoadingLayerStrategy({});\n        const inMapExtentStrategy = new FeatureStoreInMapExtentStrategy({});\n        const inMapResolutionStrategy = new FeatureStoreInMapResolutionStrategy({});\n        const selectedRecordStrategy = new EntityStoreFilterSelectionStrategy({});\n        const selectionStrategy = new FeatureStoreSelectionStrategy({\n            layer: new VectorLayer({\n                zIndex: 300,\n                source: new FeatureDataSource(),\n                style: undefined,\n                showInLayerList: false,\n                exportable: false,\n                browsable: false\n            }),\n            map,\n            hitTolerance: 15,\n            motion: this.zoomAuto ? FeatureMotion.Default : FeatureMotion.None,\n            many: true,\n            dragBox: true\n        });\n        store.addStrategy(loadingStrategy, true);\n        store.addStrategy(inMapExtentStrategy, true);\n        store.addStrategy(inMapResolutionStrategy, true);\n        store.addStrategy(selectionStrategy, true);\n        store.addStrategy(selectedRecordStrategy, false);\n        store.addStrategy(this.createFilterInMapExtentOrResolutionStrategy(), true);\n        return store;\n    }\n    createTableTemplate(workspace, layer) {\n        const fields = layer.dataSource.options.sourceFields || [];\n        if (fields.length === 0) {\n            workspace.entityStore.entities$.pipe(skipWhile(val => val.length === 0), take(1)).subscribe(entities => {\n                const columnsFromFeatures = entities[0].ol.getKeys()\n                    .filter(col => !col.startsWith('_') &&\n                    col !== 'geometry' &&\n                    col !== entities[0].ol.getGeometryName() &&\n                    !col.match(/boundedby/gi))\n                    .map(key => {\n                    return {\n                        name: `properties.${key}`,\n                        title: key,\n                        renderer: EntityTableColumnRenderer.UnsanitizedHTML\n                    };\n                });\n                workspace.meta.tableTemplate = {\n                    selection: true,\n                    sort: true,\n                    columns: columnsFromFeatures\n                };\n            });\n            return;\n        }\n        const columns = fields.map((field) => {\n            return {\n                name: `properties.${field.name}`,\n                title: field.alias ? field.alias : field.name,\n                renderer: EntityTableColumnRenderer.UnsanitizedHTML\n            };\n        });\n        workspace.meta.tableTemplate = {\n            selection: true,\n            sort: true,\n            columns\n        };\n    }\n    createFilterInMapExtentOrResolutionStrategy() {\n        const filterClauseFunc = (record) => {\n            return record.state.inMapExtent === true && record.state.inMapResolution === true;\n        };\n        return new EntityStoreFilterCustomFuncStrategy({ filterClauseFunc });\n    }\n}\nWfsWorkspaceService.ɵfac = function WfsWorkspaceService_Factory(t) { return new (t || WfsWorkspaceService)(ɵɵinject(StorageService)); };\nWfsWorkspaceService.ɵprov = ɵɵdefineInjectable({ token: WfsWorkspaceService, factory: WfsWorkspaceService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(WfsWorkspaceService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: StorageService }]; }, null); })();\n\nclass WmsWorkspaceService {\n    constructor(layerService, storageService) {\n        this.layerService = layerService;\n        this.storageService = storageService;\n    }\n    get zoomAuto() {\n        return this.storageService.get('zoomAuto');\n    }\n    createWorkspace(layer, map) {\n        var _a, _b, _c, _d, _e, _f;\n        if (((_a = layer.options.workspace) === null || _a === void 0 ? void 0 : _a.enabled) !== true) {\n            return;\n        }\n        const dataSource = layer.dataSource;\n        const wmsLinkId = layer.id + '.WmsWorkspaceTableSrc';\n        const wfsLinkId = layer.id + '.WfsWorkspaceTableDest';\n        if (!layer.options.linkedLayers) {\n            layer.options.linkedLayers = { linkId: wmsLinkId, links: [] };\n        }\n        const linkProperties = {\n            bidirectionnal: true,\n            syncedDelete: true,\n            linkedIds: [wfsLinkId],\n            properties: [\n                LinkedProperties.ZINDEX,\n                LinkedProperties.VISIBLE\n            ]\n        };\n        if (!((_b = layer.options.workspace) === null || _b === void 0 ? void 0 : _b.minResolution)) {\n            linkProperties.properties.push(LinkedProperties.MINRESOLUTION);\n        }\n        let hasOgcFilters = false;\n        if ((_c = dataSource.options.ogcFilters) === null || _c === void 0 ? void 0 : _c.enabled) {\n            linkProperties.properties.push(LinkedProperties.OGCFILTERS);\n            hasOgcFilters = true;\n        }\n        if (!((_d = layer.options.workspace) === null || _d === void 0 ? void 0 : _d.maxResolution)) {\n            linkProperties.properties.push(LinkedProperties.MAXRESOLUTION);\n        }\n        let clonedLinks = [];\n        if (layer.options.linkedLayers.links) {\n            clonedLinks = JSON.parse(JSON.stringify(layer.options.linkedLayers.links));\n        }\n        clonedLinks.push(linkProperties);\n        layer.options.linkedLayers.linkId = layer.options.linkedLayers.linkId ? layer.options.linkedLayers.linkId : wmsLinkId,\n            layer.options.linkedLayers.links = clonedLinks;\n        let wks;\n        this.layerService\n            .createAsyncLayer({\n            id: wfsLinkId,\n            linkedLayers: {\n                linkId: wfsLinkId\n            },\n            workspace: {\n                srcId: layer.id,\n                workspaceId: undefined,\n                enabled: false,\n            },\n            showInLayerList: false,\n            opacity: 0,\n            title: layer.title,\n            minResolution: ((_e = layer.options.workspace) === null || _e === void 0 ? void 0 : _e.minResolution) || layer.minResolution || 0,\n            maxResolution: ((_f = layer.options.workspace) === null || _f === void 0 ? void 0 : _f.maxResolution) || layer.maxResolution || Infinity,\n            sourceOptions: {\n                download: dataSource.options.download,\n                type: 'wfs',\n                url: dataSource.options.urlWfs || dataSource.options.url,\n                queryable: true,\n                queryTitle: dataSource.options.queryTitle,\n                params: dataSource.options.paramsWFS,\n                ogcFilters: Object.assign({}, dataSource.ogcFilters$.value, { enabled: hasOgcFilters }),\n                sourceFields: dataSource.options.sourceFields || undefined\n            }\n        })\n            .subscribe((workspaceLayer) => {\n            map.addLayer(workspaceLayer);\n            layer.ol.setProperties({ linkedLayers: { linkId: layer.options.linkedLayers.linkId, links: clonedLinks } }, false);\n            workspaceLayer.dataSource.ol.refresh();\n            wks = new WfsWorkspace({\n                id: layer.id,\n                title: layer.title,\n                layer: workspaceLayer,\n                map,\n                entityStore: this.createFeatureStore(workspaceLayer, map),\n                actionStore: new ActionStore([]),\n                meta: {\n                    tableTemplate: undefined\n                }\n            });\n            this.createTableTemplate(wks, workspaceLayer);\n            workspaceLayer.options.workspace.workspaceId = workspaceLayer.id;\n            layer.options.workspace = Object.assign({}, layer.options.workspace, {\n                enabled: true,\n                srcId: layer.id,\n                workspaceId: workspaceLayer.id\n            });\n            delete dataSource.options.download;\n            return wks;\n        });\n        return wks;\n    }\n    createFeatureStore(layer, map) {\n        const store = new FeatureStore([], { map });\n        store.bindLayer(layer);\n        const loadingStrategy = new FeatureStoreLoadingLayerStrategy({});\n        const inMapExtentStrategy = new FeatureStoreInMapExtentStrategy({});\n        const inMapResolutionStrategy = new FeatureStoreInMapResolutionStrategy({});\n        const selectedRecordStrategy = new EntityStoreFilterSelectionStrategy({});\n        const selectionStrategy = new FeatureStoreSelectionStrategy({\n            layer: new VectorLayer({\n                zIndex: 300,\n                source: new FeatureDataSource(),\n                style: undefined,\n                showInLayerList: false,\n                exportable: false,\n                browsable: false\n            }),\n            map,\n            hitTolerance: 15,\n            motion: this.zoomAuto ? FeatureMotion.Default : FeatureMotion.None,\n            many: true,\n            dragBox: true\n        });\n        store.addStrategy(loadingStrategy, true);\n        store.addStrategy(inMapExtentStrategy, true);\n        store.addStrategy(inMapResolutionStrategy, true);\n        store.addStrategy(selectionStrategy, true);\n        store.addStrategy(selectedRecordStrategy, false);\n        store.addStrategy(this.createFilterInMapExtentOrResolutionStrategy(), true);\n        return store;\n    }\n    createTableTemplate(workspace, layer) {\n        const fields = layer.dataSource.options.sourceFields || [];\n        if (fields.length === 0) {\n            workspace.entityStore.entities$.pipe(skipWhile(val => val.length === 0), take(1)).subscribe(entities => {\n                const columnsFromFeatures = entities[0].ol.getKeys()\n                    .filter(col => !col.startsWith('_') &&\n                    col !== 'geometry' &&\n                    col !== entities[0].ol.getGeometryName() &&\n                    !col.match(/boundedby/gi))\n                    .map(key => {\n                    return {\n                        name: `properties.${key}`,\n                        title: key,\n                        renderer: EntityTableColumnRenderer.UnsanitizedHTML\n                    };\n                });\n                workspace.meta.tableTemplate = {\n                    selection: true,\n                    sort: true,\n                    columns: columnsFromFeatures\n                };\n            });\n            return;\n        }\n        const columns = fields.map((field) => {\n            return {\n                name: `properties.${field.name}`,\n                title: field.alias ? field.alias : field.name,\n                renderer: EntityTableColumnRenderer.UnsanitizedHTML\n            };\n        });\n        workspace.meta.tableTemplate = {\n            selection: true,\n            sort: true,\n            columns\n        };\n    }\n    createFilterInMapExtentOrResolutionStrategy() {\n        const filterClauseFunc = (record) => {\n            return record.state.inMapExtent === true && record.state.inMapResolution === true;\n        };\n        return new EntityStoreFilterCustomFuncStrategy({ filterClauseFunc });\n    }\n}\nWmsWorkspaceService.ɵfac = function WmsWorkspaceService_Factory(t) { return new (t || WmsWorkspaceService)(ɵɵinject(LayerService), ɵɵinject(StorageService)); };\nWmsWorkspaceService.ɵprov = ɵɵdefineInjectable({ token: WmsWorkspaceService, factory: WmsWorkspaceService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(WmsWorkspaceService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: LayerService }, { type: StorageService }]; }, null); })();\n\nclass FeatureWorkspace extends Workspace {\n    constructor(options) {\n        super(options);\n        this.options = options;\n        this.inResolutionRange$ = new BehaviorSubject(true);\n        this.map.viewController.resolution$.subscribe((mapResolution) => {\n            if (mapResolution > this.layer.minResolution && mapResolution < this.layer.maxResolution) {\n                this.inResolutionRange$.next(true);\n            }\n            else {\n                this.inResolutionRange$.next(false);\n            }\n        });\n    }\n    get layer() { return this.options.layer; }\n    get map() { return this.options.map; }\n}\n\nclass FeatureWorkspaceService {\n    constructor(storageService) {\n        this.storageService = storageService;\n    }\n    get zoomAuto() {\n        return this.storageService.get('zoomAuto');\n    }\n    createWorkspace(layer, map) {\n        var _a;\n        if (((_a = layer.options.workspace) === null || _a === void 0 ? void 0 : _a.enabled) === false) {\n            return;\n        }\n        layer.options.workspace = Object.assign({}, layer.options.workspace, { enabled: true });\n        layer.options.workspace = Object.assign({}, layer.options.workspace, {\n            enabled: true,\n            srcId: layer.id,\n            workspaceId: layer.id\n        });\n        const wks = new FeatureWorkspace({\n            id: layer.id,\n            title: layer.title,\n            layer,\n            map,\n            entityStore: this.createFeatureStore(layer, map),\n            actionStore: new ActionStore([]),\n            meta: {\n                tableTemplate: undefined\n            }\n        });\n        this.createTableTemplate(wks, layer);\n        return wks;\n    }\n    createFeatureStore(layer, map) {\n        const store = new FeatureStore([], { map });\n        store.bindLayer(layer);\n        const loadingStrategy = new FeatureStoreLoadingLayerStrategy({});\n        const inMapExtentStrategy = new FeatureStoreInMapExtentStrategy({});\n        const inMapResolutionStrategy = new FeatureStoreInMapResolutionStrategy({});\n        const selectedRecordStrategy = new EntityStoreFilterSelectionStrategy({});\n        const selectionStrategy = new FeatureStoreSelectionStrategy({\n            layer: new VectorLayer({\n                zIndex: 300,\n                source: new FeatureDataSource(),\n                style: undefined,\n                showInLayerList: false,\n                exportable: false,\n                browsable: false\n            }),\n            map,\n            hitTolerance: 15,\n            motion: this.zoomAuto ? FeatureMotion.Default : FeatureMotion.None,\n            many: true,\n            dragBox: true\n        });\n        store.addStrategy(loadingStrategy, true);\n        store.addStrategy(inMapExtentStrategy, true);\n        store.addStrategy(inMapResolutionStrategy, true);\n        store.addStrategy(selectionStrategy, true);\n        store.addStrategy(selectedRecordStrategy, false);\n        store.addStrategy(this.createFilterInMapExtentOrResolutionStrategy(), true);\n        return store;\n    }\n    createTableTemplate(workspace, layer) {\n        const fields = layer.dataSource.options.sourceFields || [];\n        if (fields.length === 0) {\n            workspace.entityStore.entities$.pipe(skipWhile(val => val.length === 0), take(1)).subscribe(entities => {\n                const columnsFromFeatures = entities[0].ol.getKeys()\n                    .filter(col => !col.startsWith('_') &&\n                    col !== 'geometry' &&\n                    col !== entities[0].ol.getGeometryName() &&\n                    !col.match(/boundedby/gi))\n                    .map(key => {\n                    return {\n                        name: `properties.${key}`,\n                        title: key,\n                        renderer: EntityTableColumnRenderer.UnsanitizedHTML\n                    };\n                });\n                workspace.meta.tableTemplate = {\n                    selection: true,\n                    sort: true,\n                    columns: columnsFromFeatures\n                };\n            });\n            return;\n        }\n        const columns = fields.map((field) => {\n            return {\n                name: `properties.${field.name}`,\n                title: field.alias ? field.alias : field.name,\n                renderer: EntityTableColumnRenderer.UnsanitizedHTML\n            };\n        });\n        workspace.meta.tableTemplate = {\n            selection: true,\n            sort: true,\n            columns\n        };\n    }\n    createFilterInMapExtentOrResolutionStrategy() {\n        const filterClauseFunc = (record) => {\n            return record.state.inMapExtent === true && record.state.inMapResolution === true;\n        };\n        return new EntityStoreFilterCustomFuncStrategy({ filterClauseFunc });\n    }\n}\nFeatureWorkspaceService.ɵfac = function FeatureWorkspaceService_Factory(t) { return new (t || FeatureWorkspaceService)(ɵɵinject(StorageService)); };\nFeatureWorkspaceService.ɵprov = ɵɵdefineInjectable({ token: FeatureWorkspaceService, factory: FeatureWorkspaceService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FeatureWorkspaceService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: StorageService }]; }, null); })();\n\nclass WorkspaceSelectorDirective {\n    constructor(component, wfsWorkspaceService, wmsWorkspaceService, featureWorkspaceService) {\n        this.component = component;\n        this.wfsWorkspaceService = wfsWorkspaceService;\n        this.wmsWorkspaceService = wmsWorkspaceService;\n        this.featureWorkspaceService = featureWorkspaceService;\n        this.entities$$ = [];\n    }\n    get workspaceStore() {\n        return this.component.store;\n    }\n    ngOnInit() {\n        this.layers$$ = this.map.layers$\n            .pipe(debounceTime(50))\n            .subscribe((layers) => this.onLayersChange(layers));\n    }\n    ngOnDestroy() {\n        this.layers$$.unsubscribe();\n        this.entities$$.map(entities => entities.unsubscribe());\n    }\n    onLayersChange(layers) {\n        const editableLayers = layers.filter((layer) => this.layerIsEditable(layer));\n        const editableLayersIds = editableLayers.map((layer) => layer.id);\n        const workspacesToAdd = editableLayers\n            .map((layer) => this.getOrCreateWorkspace(layer))\n            .filter((workspace) => workspace !== undefined);\n        const workspacesToRemove = this.workspaceStore.all()\n            .filter((workspace) => {\n            return editableLayersIds.indexOf(workspace.id) < 0;\n        });\n        if (workspacesToRemove.length > 0) {\n            workspacesToRemove.forEach((workspace) => {\n                workspace.entityStore.deactivateStrategyOfType(FeatureStoreInMapExtentStrategy);\n                workspace.deactivate();\n            });\n            this.workspaceStore.state.updateMany(workspacesToRemove, { active: false, selected: false });\n            this.workspaceStore.deleteMany(workspacesToRemove);\n        }\n        if (workspacesToAdd.length > 0) {\n            this.workspaceStore.insertMany(workspacesToAdd);\n        }\n    }\n    getOrCreateWorkspace(layer) {\n        const workspace = this.workspaceStore.get(layer.id);\n        if (workspace !== undefined) {\n            return;\n        }\n        if (layer.dataSource instanceof WFSDataSource) {\n            const wfsWks = this.wfsWorkspaceService.createWorkspace(layer, this.map);\n            return wfsWks;\n        }\n        else if (layer.dataSource instanceof WMSDataSource) {\n            if (!layer.dataSource.options.paramsWFS) {\n                return;\n            }\n            const wmsWks = this.wmsWorkspaceService.createWorkspace(layer, this.map);\n            wmsWks === null || wmsWks === void 0 ? void 0 : wmsWks.inResolutionRange$.subscribe((inResolutionRange) => {\n                layer.dataSource.options.queryable = !inResolutionRange;\n                wmsWks.layer.dataSource.options.queryable = inResolutionRange;\n            });\n            return wmsWks;\n        }\n        else if (layer.dataSource instanceof FeatureDataSource && layer.exportable === true) {\n            const featureWks = this.featureWorkspaceService.createWorkspace(layer, this.map);\n            return featureWks;\n        }\n        return;\n    }\n    layerIsEditable(layer) {\n        var _a, _b;\n        const dataSource = layer.dataSource;\n        if (dataSource instanceof WFSDataSource) {\n            return true;\n        }\n        if (dataSource instanceof FeatureDataSource) {\n            return true;\n        }\n        if (dataSource instanceof WMSDataSource) {\n            const dataSourceOptions = (dataSource.options ||\n                {});\n            return (((_a = dataSourceOptions.ogcFilters) === null || _a === void 0 ? void 0 : _a.enabled) || ((_b = dataSource.options.paramsWFS) === null || _b === void 0 ? void 0 : _b.featureTypes) !== undefined);\n        }\n        return false;\n    }\n}\nWorkspaceSelectorDirective.ɵfac = function WorkspaceSelectorDirective_Factory(t) { return new (t || WorkspaceSelectorDirective)(ɵɵdirectiveInject(WorkspaceSelectorComponent), ɵɵdirectiveInject(WfsWorkspaceService), ɵɵdirectiveInject(WmsWorkspaceService), ɵɵdirectiveInject(FeatureWorkspaceService)); };\nWorkspaceSelectorDirective.ɵdir = ɵɵdefineDirective({ type: WorkspaceSelectorDirective, selectors: [[\"\", \"igoWorkspaceSelector\", \"\"]], inputs: { map: \"map\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(WorkspaceSelectorDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoWorkspaceSelector]'\n            }]\n    }], function () { return [{ type: WorkspaceSelectorComponent }, { type: WfsWorkspaceService }, { type: WmsWorkspaceService }, { type: FeatureWorkspaceService }]; }, { map: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoWorkspaceSelectorModule {\n}\nIgoWorkspaceSelectorModule.ɵmod = ɵɵdefineNgModule({ type: IgoWorkspaceSelectorModule });\nIgoWorkspaceSelectorModule.ɵinj = ɵɵdefineInjector({ factory: function IgoWorkspaceSelectorModule_Factory(t) { return new (t || IgoWorkspaceSelectorModule)(); }, imports: [[\n            CommonModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoWorkspaceSelectorModule, { declarations: [WorkspaceSelectorDirective], imports: [CommonModule], exports: [WorkspaceSelectorDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoWorkspaceSelectorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    WorkspaceSelectorDirective\n                ],\n                declarations: [\n                    WorkspaceSelectorDirective\n                ]\n            }]\n    }], null, null); })();\n\nclass WorkspaceUpdatorDirective {\n    constructor(wfsWorkspaceService, wmsWorkspaceService, featureWorkspaceService) {\n        this.wfsWorkspaceService = wfsWorkspaceService;\n        this.wmsWorkspaceService = wmsWorkspaceService;\n        this.featureWorkspaceService = featureWorkspaceService;\n        this.entities$$ = [];\n    }\n    ngOnInit() {\n        this.layers$$ = this.map.layers$\n            .pipe(debounceTime(50))\n            .subscribe((layers) => this.onLayersChange(layers));\n    }\n    ngOnDestroy() {\n        this.layers$$.unsubscribe();\n        this.entities$$.map(entities => entities.unsubscribe());\n    }\n    onLayersChange(layers) {\n        const editableLayers = layers.filter((layer) => this.layerIsEditable(layer));\n        const editableLayersIds = editableLayers.map((layer) => layer.id);\n        const workspacesToAdd = editableLayers\n            .map((layer) => this.getOrCreateWorkspace(layer))\n            .filter((workspace) => workspace !== undefined);\n        const workspacesToRemove = this.workspaceStore.all()\n            .filter((workspace) => {\n            return editableLayersIds.indexOf(workspace.id) < 0;\n        });\n        if (workspacesToRemove.length > 0) {\n            workspacesToRemove.forEach((workspace) => {\n                workspace.entityStore.deactivateStrategyOfType(FeatureStoreInMapExtentStrategy);\n                workspace.deactivate();\n            });\n            this.workspaceStore.state.updateMany(workspacesToRemove, { active: false, selected: false });\n            this.workspaceStore.deleteMany(workspacesToRemove);\n        }\n        if (workspacesToAdd.length > 0) {\n            this.workspaceStore.insertMany(workspacesToAdd);\n        }\n    }\n    getOrCreateWorkspace(layer) {\n        const workspace = this.workspaceStore.get(layer.id);\n        if (workspace !== undefined) {\n            return;\n        }\n        if (layer.dataSource instanceof WFSDataSource) {\n            const wfsWks = this.wfsWorkspaceService.createWorkspace(layer, this.map);\n            return wfsWks;\n        }\n        else if (layer.dataSource instanceof WMSDataSource) {\n            if (!layer.dataSource.options.paramsWFS) {\n                return;\n            }\n            const wmsWks = this.wmsWorkspaceService.createWorkspace(layer, this.map);\n            wmsWks === null || wmsWks === void 0 ? void 0 : wmsWks.inResolutionRange$.subscribe((inResolutionRange) => {\n                layer.dataSource.options.queryable = !inResolutionRange;\n                wmsWks.layer.dataSource.options.queryable = inResolutionRange;\n            });\n            return wmsWks;\n        }\n        else if (layer.dataSource instanceof FeatureDataSource && layer.exportable === true) {\n            const featureWks = this.featureWorkspaceService.createWorkspace(layer, this.map);\n            return featureWks;\n        }\n        return;\n    }\n    layerIsEditable(layer) {\n        var _a, _b;\n        const dataSource = layer.dataSource;\n        if (dataSource instanceof WFSDataSource) {\n            return true;\n        }\n        if (dataSource instanceof FeatureDataSource) {\n            return true;\n        }\n        if (dataSource instanceof WMSDataSource) {\n            const dataSourceOptions = (dataSource.options ||\n                {});\n            return (((_a = dataSourceOptions.ogcFilters) === null || _a === void 0 ? void 0 : _a.enabled) || ((_b = dataSource.options.paramsWFS) === null || _b === void 0 ? void 0 : _b.featureTypes) !== undefined);\n        }\n        return false;\n    }\n}\nWorkspaceUpdatorDirective.ɵfac = function WorkspaceUpdatorDirective_Factory(t) { return new (t || WorkspaceUpdatorDirective)(ɵɵdirectiveInject(WfsWorkspaceService), ɵɵdirectiveInject(WmsWorkspaceService), ɵɵdirectiveInject(FeatureWorkspaceService)); };\nWorkspaceUpdatorDirective.ɵdir = ɵɵdefineDirective({ type: WorkspaceUpdatorDirective, selectors: [[\"\", \"igoWorkspaceUpdator\", \"\"]], inputs: { map: \"map\", workspaceStore: \"workspaceStore\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(WorkspaceUpdatorDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoWorkspaceUpdator]'\n            }]\n    }], function () { return [{ type: WfsWorkspaceService }, { type: WmsWorkspaceService }, { type: FeatureWorkspaceService }]; }, { map: [{\n            type: Input\n        }], workspaceStore: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoWorkspaceUpdatorModule {\n}\nIgoWorkspaceUpdatorModule.ɵmod = ɵɵdefineNgModule({ type: IgoWorkspaceUpdatorModule });\nIgoWorkspaceUpdatorModule.ɵinj = ɵɵdefineInjector({ factory: function IgoWorkspaceUpdatorModule_Factory(t) { return new (t || IgoWorkspaceUpdatorModule)(); }, imports: [[\n            CommonModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoWorkspaceUpdatorModule, { declarations: [WorkspaceUpdatorDirective], imports: [CommonModule], exports: [WorkspaceUpdatorDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoWorkspaceUpdatorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    WorkspaceUpdatorDirective\n                ],\n                declarations: [\n                    WorkspaceUpdatorDirective\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoGeoWorkspaceModule {\n}\nIgoGeoWorkspaceModule.ɵmod = ɵɵdefineNgModule({ type: IgoGeoWorkspaceModule });\nIgoGeoWorkspaceModule.ɵinj = ɵɵdefineInjector({ factory: function IgoGeoWorkspaceModule_Factory(t) { return new (t || IgoGeoWorkspaceModule)(); }, providers: [\n        provideOgcFilterWidget()\n    ], imports: [[\n            CommonModule,\n            IgoWidgetModule,\n            IgoWorkspaceSelectorModule,\n            IgoWorkspaceUpdatorModule,\n            IgoOgcFilterModule\n        ], IgoWorkspaceSelectorModule,\n        IgoWorkspaceUpdatorModule,\n        IgoOgcFilterModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoGeoWorkspaceModule, { imports: [CommonModule,\n        IgoWidgetModule,\n        IgoWorkspaceSelectorModule,\n        IgoWorkspaceUpdatorModule,\n        IgoOgcFilterModule], exports: [IgoWorkspaceSelectorModule,\n        IgoWorkspaceUpdatorModule,\n        IgoOgcFilterModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoGeoWorkspaceModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoWidgetModule,\n                    IgoWorkspaceSelectorModule,\n                    IgoWorkspaceUpdatorModule,\n                    IgoOgcFilterModule\n                ],\n                exports: [\n                    IgoWorkspaceSelectorModule,\n                    IgoWorkspaceUpdatorModule,\n                    IgoOgcFilterModule\n                ],\n                declarations: [],\n                providers: [\n                    provideOgcFilterWidget()\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoWktModule {\n    static forRoot() {\n        return {\n            ngModule: IgoWktModule,\n            providers: []\n        };\n    }\n}\nIgoWktModule.ɵmod = ɵɵdefineNgModule({ type: IgoWktModule });\nIgoWktModule.ɵinj = ɵɵdefineInjector({ factory: function IgoWktModule_Factory(t) { return new (t || IgoWktModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoWktModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                exports: [],\n                declarations: []\n            }]\n    }], null, null); })();\n\nclass IgoGeoModule {\n    static forRoot() {\n        return {\n            ngModule: IgoGeoModule,\n            providers: []\n        };\n    }\n}\nIgoGeoModule.ɵmod = ɵɵdefineNgModule({ type: IgoGeoModule });\nIgoGeoModule.ɵinj = ɵɵdefineInjector({ factory: function IgoGeoModule_Factory(t) { return new (t || IgoGeoModule)(); }, imports: [[], IgoCatalogModule,\n        IgoDataSourceModule,\n        IgoDownloadModule,\n        IgoDrawingToolModule,\n        IgoFeatureModule,\n        IgoFilterModule,\n        IgoGeometryModule,\n        IgoImportExportModule,\n        IgoLayerModule,\n        IgoMapModule,\n        IgoMeasureModule,\n        IgoMetadataModule,\n        IgoOverlayModule,\n        IgoPrintModule,\n        IgoQueryModule,\n        IgoDirectionsModule,\n        IgoSearchModule,\n        IgoToastModule,\n        IgoGeoWorkspaceModule,\n        IgoWktModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoGeoModule, { exports: [IgoCatalogModule,\n        IgoDataSourceModule,\n        IgoDownloadModule,\n        IgoDrawingToolModule,\n        IgoFeatureModule,\n        IgoFilterModule,\n        IgoGeometryModule,\n        IgoImportExportModule,\n        IgoLayerModule,\n        IgoMapModule,\n        IgoMeasureModule,\n        IgoMetadataModule,\n        IgoOverlayModule,\n        IgoPrintModule,\n        IgoQueryModule,\n        IgoDirectionsModule,\n        IgoSearchModule,\n        IgoToastModule,\n        IgoGeoWorkspaceModule,\n        IgoWktModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoGeoModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: [\n                    IgoCatalogModule,\n                    IgoDataSourceModule,\n                    IgoDownloadModule,\n                    IgoDrawingToolModule,\n                    IgoFeatureModule,\n                    IgoFilterModule,\n                    IgoGeometryModule,\n                    IgoImportExportModule,\n                    IgoLayerModule,\n                    IgoMapModule,\n                    IgoMeasureModule,\n                    IgoMetadataModule,\n                    IgoOverlayModule,\n                    IgoPrintModule,\n                    IgoQueryModule,\n                    IgoDirectionsModule,\n                    IgoSearchModule,\n                    IgoToastModule,\n                    IgoGeoWorkspaceModule,\n                    IgoWktModule\n                ]\n            }]\n    }], null, null); })();\n\nvar DirectionsFormat;\n(function (DirectionsFormat) {\n    DirectionsFormat[DirectionsFormat[\"GeoJSON\"] = 0] = \"GeoJSON\";\n    DirectionsFormat[DirectionsFormat[\"JSON\"] = 1] = \"JSON\";\n})(DirectionsFormat || (DirectionsFormat = {}));\nvar SourceDirectionsType;\n(function (SourceDirectionsType) {\n    SourceDirectionsType[\"Route\"] = \"Route\";\n    SourceDirectionsType[\"Trip\"] = \"Trip\";\n})(SourceDirectionsType || (SourceDirectionsType = {}));\n\nclass OsrmDirectionsSource extends DirectionsSource {\n    constructor(http, config) {\n        super();\n        this.http = http;\n        this.config = config;\n        this.directionsUrl = 'https://geoegl.msp.gouv.qc.ca/services/itineraire/route/v1/driving/';\n        this.options = this.config.getConfig('directionsSources.osrm') || {};\n        this.directionsUrl = this.options.url || this.directionsUrl;\n    }\n    get enabled() {\n        return this.options.enabled !== false;\n    }\n    set enabled(value) {\n        this.options.enabled = value;\n    }\n    getName() {\n        return OsrmDirectionsSource._name;\n    }\n    route(coordinates, directionsOptions = {}) {\n        const directionsParams = this.getRouteParams(directionsOptions);\n        return this.http\n            .get(this.directionsUrl + coordinates.join(';'), {\n            params: directionsParams\n        })\n            .pipe(map(res => this.extractRoutesData(res)));\n    }\n    extractRoutesData(response) {\n        const routeResponse = [];\n        response.routes.forEach(route => {\n            routeResponse.push(this.formatRoute(route, response.waypoints));\n        });\n        return routeResponse;\n    }\n    getRouteParams(directionsOptions = {}) {\n        directionsOptions.alternatives = directionsOptions.alternatives !== undefined ? directionsOptions.alternatives : true;\n        directionsOptions.steps = directionsOptions.steps !== undefined ? directionsOptions.steps : true;\n        directionsOptions.geometries = directionsOptions.geometries !== undefined ? directionsOptions.geometries : 'geojson';\n        directionsOptions.overview = directionsOptions.overview !== undefined ? directionsOptions.overview : false;\n        return new HttpParams({\n            fromObject: {\n                alternatives: directionsOptions.alternatives ? 'true' : 'false',\n                overview: directionsOptions.overview ? 'simplified' : 'full',\n                steps: directionsOptions.steps ? 'true' : 'false',\n                geometries: directionsOptions.geometries ? directionsOptions.geometries : 'geojson',\n            }\n        });\n    }\n    formatRoute(roadNetworkRoute, waypoints) {\n        const stepsUI = [];\n        roadNetworkRoute.legs.forEach(leg => {\n            leg.steps.forEach(step => {\n                stepsUI.push(step);\n            });\n        });\n        return {\n            id: uuid(),\n            title: roadNetworkRoute.legs[0].summary,\n            source: OsrmDirectionsSource._name,\n            sourceType: SourceDirectionsType.Route,\n            order: 1,\n            format: DirectionsFormat.GeoJSON,\n            icon: 'directions',\n            projection: 'EPSG:4326',\n            waypoints,\n            distance: roadNetworkRoute.distance,\n            duration: roadNetworkRoute.duration,\n            geometry: roadNetworkRoute.geometry,\n            legs: roadNetworkRoute.legs,\n            steps: stepsUI,\n            weight: roadNetworkRoute.weight,\n            weight_name: roadNetworkRoute.weight_name\n        };\n    }\n}\nOsrmDirectionsSource._name = 'OSRM Québec';\nOsrmDirectionsSource.ɵfac = function OsrmDirectionsSource_Factory(t) { return new (t || OsrmDirectionsSource)(ɵɵinject(HttpClient), ɵɵinject(ConfigService)); };\nOsrmDirectionsSource.ɵprov = ɵɵdefineInjectable({ token: OsrmDirectionsSource, factory: OsrmDirectionsSource.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OsrmDirectionsSource, [{\n        type: Injectable\n    }], function () { return [{ type: HttpClient }, { type: ConfigService }]; }, null); })();\n\nfunction osrmDirectionsSourcesFactory(http, config) {\n    return new OsrmDirectionsSource(http, config);\n}\nfunction provideOsrmDirectionsSource() {\n    return {\n        provide: DirectionsSource,\n        useFactory: osrmDirectionsSourcesFactory,\n        multi: true,\n        deps: [HttpClient, ConfigService]\n    };\n}\n\n/**\n * Cadastre search source\n */\nclass CadastreSearchSource extends SearchSource {\n    constructor(http, languageService, storageService, options) {\n        super(options, storageService);\n        this.http = http;\n        this.languageService = languageService;\n    }\n    getId() {\n        return CadastreSearchSource.id;\n    }\n    getType() {\n        return CadastreSearchSource.type;\n    }\n    /*\n     * Source : https://wiki.openstreetmap.org/wiki/Key:amenity\n     */\n    getDefaultOptions() {\n        return {\n            title: 'Cadastre (Québec)',\n            searchUrl: 'https://carto.cptaq.gouv.qc.ca/php/find_lot_v1.php?'\n        };\n    }\n    /**\n     * Search a place by name\n     * @param term Place name\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    search(term, options) {\n        term = term.endsWith(',') ? term.slice(0, -1) : term;\n        term = term.startsWith(',') ? term.substr(1) : term;\n        term = term.replace(/ /g, '');\n        const params = this.computeSearchRequestParams(term, options || {});\n        if (!params.get('numero') || !params.get('numero').match(/^[0-9,]+$/g)) {\n            return of([]);\n        }\n        return this.http\n            .get(this.searchUrl, { params, responseType: 'text' })\n            .pipe(map((response) => this.extractResults(response, term)));\n    }\n    computeSearchRequestParams(term, options) {\n        return new HttpParams({\n            fromObject: Object.assign({\n                numero: term,\n                epsg: '4326'\n            }, this.params, options.params || {})\n        });\n    }\n    extractResults(response, term) {\n        return response\n            .split('<br />')\n            .filter((lot) => lot.length > 0)\n            .map((lot) => this.dataToResult(lot, term));\n    }\n    dataToResult(data, term) {\n        const lot = data.split(';');\n        const numero = lot[0];\n        const wkt = lot[7];\n        const geometry = this.computeGeometry(wkt);\n        const properties = {\n            NoLot: numero,\n            Route: '<span class=\"routing\"> <u>' + this.languageService.translate.instant('igo.geo.seeRouting') + '</u> </span>'\n        };\n        const id = [this.getId(), 'cadastre', numero].join('.');\n        return {\n            source: this,\n            meta: {\n                dataType: FEATURE,\n                id,\n                title: numero,\n                score: computeTermSimilarity(term.trim(), numero),\n                icon: 'map-marker'\n            },\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry,\n                properties,\n                meta: {\n                    id,\n                    title: numero\n                }\n            }\n        };\n    }\n    computeGeometry(wkt) {\n        const feature = new olWKT().readFeature(wkt, {\n            dataProjection: 'EPSG:4326',\n            featureProjection: 'EPSG:4326'\n        });\n        return {\n            type: feature.getGeometry().getType(),\n            coordinates: feature.getGeometry().getCoordinates()\n        };\n    }\n}\nCadastreSearchSource.id = 'cadastre';\nCadastreSearchSource.type = FEATURE;\nCadastreSearchSource.ɵfac = function CadastreSearchSource_Factory(t) { return new (t || CadastreSearchSource)(ɵɵinject(HttpClient), ɵɵinject(LanguageService), ɵɵinject(StorageService), ɵɵinject('options')); };\nCadastreSearchSource.ɵprov = ɵɵdefineInjectable({ token: CadastreSearchSource, factory: CadastreSearchSource.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CadastreSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: HttpClient }, { type: LanguageService }, { type: StorageService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }]; }, null); })();\n\n/**\n * Cadastre search source factory\n * @ignore\n */\nfunction cadastreSearchSourceFactory(http, languageService, storageService, config) {\n    return new CadastreSearchSource(http, languageService, storageService, config.getConfig(`searchSources.${CadastreSearchSource.id}`));\n}\n/**\n * Function that returns a provider for the Cadastre search source\n */\nfunction provideCadastreSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: cadastreSearchSourceFactory,\n        multi: true,\n        deps: [HttpClient, LanguageService, StorageService, ConfigService]\n    };\n}\n\n/**\n * Nominatim search source\n */\nclass NominatimSearchSource extends SearchSource {\n    constructor(http, options, storageService) {\n        super(options, storageService);\n        this.http = http;\n    }\n    getId() {\n        return NominatimSearchSource.id;\n    }\n    getType() {\n        return NominatimSearchSource.type;\n    }\n    /*\n     * Source : https://wiki.openstreetmap.org/wiki/Key:amenity\n     */\n    getDefaultOptions() {\n        return {\n            title: 'Nominatim (OSM)',\n            searchUrl: 'https://nominatim.openstreetmap.org/search',\n            settings: [\n                {\n                    type: 'checkbox',\n                    title: 'results type',\n                    name: 'amenity',\n                    values: [\n                        {\n                            title: 'igo.geo.search.nominatim.type.food',\n                            value: 'bar,bbq,biergaten,cafe,drinking_water,fast_food,food_court,ice_cream,pub,restaurant',\n                            enabled: false\n                        },\n                        {\n                            title: 'igo.geo.search.nominatim.type.health',\n                            value: 'baby_hatch,clinic,dentist,doctors,hospital,nursing_home,pharmacy,social_facility,veterinary',\n                            enabled: false\n                        },\n                        {\n                            title: 'igo.geo.search.nominatim.type.entertainment',\n                            value: 'arts_centre,brothel,casino,cinema,community_center_fountain,gambling,nightclub,planetarium \\\n                          ,public_bookcase,social_centre,stripclub,studio,swingerclub,theatre,internet_cafe',\n                            enabled: false\n                        },\n                        {\n                            title: 'igo.geo.search.nominatim.type.finance',\n                            value: 'atm,bank,bureau_de_change',\n                            enabled: false\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'results limit',\n                    name: 'limit',\n                    values: [\n                        {\n                            title: '10',\n                            value: 10,\n                            enabled: true\n                        },\n                        {\n                            title: '20',\n                            value: 20,\n                            enabled: false\n                        },\n                        {\n                            title: '50',\n                            value: 50,\n                            enabled: false\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'restrictExtent',\n                    name: 'countrycodes',\n                    values: [\n                        {\n                            title: 'igo.geo.search.nominatim.country.canada',\n                            value: 'CA',\n                            enabled: true\n                        },\n                        {\n                            title: 'igo.geo.search.nominatim.country.all',\n                            value: null,\n                            enabled: false\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'multiple object',\n                    name: 'dedupe',\n                    values: [\n                        {\n                            title: 'igo.geo.search.searchSources.settings.true',\n                            value: 0,\n                            enabled: false\n                        },\n                        {\n                            title: 'igo.geo.search.searchSources.settings.false',\n                            value: 1,\n                            enabled: true\n                        }\n                    ]\n                }\n            ]\n        };\n    }\n    /**\n     * Search a place by name\n     * @param term Place name\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    search(term, options) {\n        const params = this.computeSearchRequestParams(term, options || {});\n        if (!params.get('q')) {\n            return of([]);\n        }\n        return this.http\n            .get(this.searchUrl, { params })\n            .pipe(map((response) => this.extractResults(response, term)));\n    }\n    computeSearchRequestParams(term, options) {\n        return new HttpParams({\n            fromObject: Object.assign({\n                q: this.computeTerm(term),\n                format: 'json'\n            }, this.params, options.params || {})\n        });\n    }\n    extractResults(response, term) {\n        return response.map((data) => this.dataToResult(data, term));\n    }\n    dataToResult(data, term) {\n        const properties = this.computeProperties(data);\n        const geometry = this.computeGeometry(data);\n        const extent = this.computeExtent(data);\n        const id = [this.getId(), 'place', data.place_id].join('.');\n        return {\n            source: this,\n            meta: {\n                dataType: FEATURE,\n                id,\n                title: data.display_name,\n                icon: 'map-marker',\n                score: computeTermSimilarity(term.trim(), data.display_name)\n            },\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry,\n                extent,\n                properties,\n                meta: {\n                    id,\n                    title: data.display_name\n                }\n            }\n        };\n    }\n    computeProperties(data) {\n        return {\n            display_name: data.display_name,\n            place_id: data.place_id,\n            osm_type: data.osm_type,\n            class: data.class,\n            type: data.type\n        };\n    }\n    computeGeometry(data) {\n        return {\n            type: 'Point',\n            coordinates: [parseFloat(data.lon), parseFloat(data.lat)]\n        };\n    }\n    computeExtent(data) {\n        return [\n            parseFloat(data.boundingbox[2]),\n            parseFloat(data.boundingbox[0]),\n            parseFloat(data.boundingbox[3]),\n            parseFloat(data.boundingbox[1])\n        ];\n    }\n    computeTerm(term) {\n        return this.computeTermTags(term);\n    }\n    /**\n     * Add hashtag from query in Nominatim's format (+[])\n     * @param term Query with hashtag\n     */\n    computeTermTags(term) {\n        const hashtags = super.getHashtagsValid(term, 'amenity');\n        if (!hashtags) {\n            return this.computeTermSettings(term);\n        }\n        if (!hashtags.length) {\n            return null;\n        }\n        term = term.replace(/(#[^\\s]*)/g, '');\n        hashtags.forEach(tag => {\n            term += '+[' + tag + ']';\n        });\n        return term;\n    }\n    /**\n     * Add hashtag from settings in Nominatim's format (+[])\n     * @param term Query\n     */\n    computeTermSettings(term) {\n        this.options.settings.forEach(settings => {\n            if (settings.name === 'amenity') {\n                settings.values.forEach(conf => {\n                    if (conf.enabled && typeof conf.value === 'string') {\n                        const splitted = conf.value.split(',');\n                        splitted.forEach(value => {\n                            term += '+[' + value + ']';\n                        });\n                    }\n                });\n            }\n        });\n        return term;\n    }\n}\nNominatimSearchSource.id = 'nominatim';\nNominatimSearchSource.type = FEATURE;\nNominatimSearchSource.ɵfac = function NominatimSearchSource_Factory(t) { return new (t || NominatimSearchSource)(ɵɵinject(HttpClient), ɵɵinject('options'), ɵɵinject(StorageService)); };\nNominatimSearchSource.ɵprov = ɵɵdefineInjectable({ token: NominatimSearchSource, factory: NominatimSearchSource.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(NominatimSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: HttpClient }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }, { type: StorageService }]; }, null); })();\n\n/**\n * Nominatim search source factory\n * @ignore\n */\nfunction nominatimSearchSourceFactory(http, config, storageService) {\n    return new NominatimSearchSource(http, config.getConfig(`searchSources.${NominatimSearchSource.id}`), storageService);\n}\n/**\n * Function that returns a provider for the Nominatim search source\n */\nfunction provideNominatimSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: nominatimSearchSourceFactory,\n        multi: true,\n        deps: [HttpClient, ConfigService, StorageService]\n    };\n}\n\n/**\n * StoredQueries search source\n */\nclass StoredQueriesSearchSource extends SearchSource {\n    constructor(http, languageService, storageService, options) {\n        super(options, storageService);\n        this.http = http;\n        this.languageService = languageService;\n        this.storedQueriesOptions = options;\n        if (this.storedQueriesOptions && !this.storedQueriesOptions.available) {\n            return;\n        }\n        const defaultStoredqueryId = 'rtss';\n        const defaultFieldSplitter = [\n            { name: 'rtss', defaultValue: '-99' },\n            { name: 'chainage', defaultValue: '0', splitPrefix: '\\\\+' }\n        ];\n        const defaultOutputformat = 'text/xml; subtype=gml/3.1.1';\n        const defaultSrsname = 'EPSG:4326';\n        const defaultResultTitle = 'title';\n        if (!this.storedQueriesOptions) {\n            console.log(' No configuration for this search source (storedqueries). You will use the default values');\n            this.storedQueriesOptions = {\n                storedquery_id: defaultStoredqueryId,\n                fields: defaultFieldSplitter,\n                outputformat: defaultOutputformat,\n                srsname: defaultSrsname,\n                resultTitle: defaultResultTitle\n            };\n            this.resultTitle = defaultResultTitle;\n            console.log('Default values', this.storedQueriesOptions);\n        }\n        if (!this.storedQueriesOptions.storedquery_id) {\n            const err = 'Stored Queries :You have to set \"storedquery_id\" into StoredQueries options. ex: storedquery_id: \"nameofstoredquerie\"';\n            throw new Error(err);\n        }\n        if (!this.storedQueriesOptions.fields) {\n            throw new Error('Stored Queries :You have to set \"fields\" into options. ex: fields: {\"name\": \"rtss\", \"defaultValue\": \"-99\"}');\n        }\n        this.storedQueriesOptions.outputformat =\n            this.storedQueriesOptions.outputformat || 'text/xml; subtype=gml/3.1.1';\n        this.storedQueriesOptions.srsname =\n            this.storedQueriesOptions.srsname || 'EPSG:4326';\n        const storedQueryId = this.storedQueriesOptions.storedquery_id.toLowerCase();\n        if (storedQueryId.includes('getfeaturebyid') &&\n            this.storedQueriesOptions.outputformat\n                .toLowerCase()\n                .includes('getfeaturebyid')) {\n            let err = 'You must set a geojson format for your stored query. This is due to an openlayers issue)';\n            err += ' (wfs 1.1.0 & gml 3.1.1 limitation)';\n            throw new Error(err);\n        }\n        if (!(this.storedQueriesOptions.fields instanceof Array)) {\n            this.storedQueriesOptions.fields = [this.storedQueriesOptions.fields];\n        }\n        this.multipleFieldsQuery =\n            this.storedQueriesOptions.fields.length > 1 ? true : false;\n        this.storedQueriesOptions.fields.forEach((field, index) => {\n            if (this.multipleFieldsQuery && !field.splitPrefix && index !== 0) {\n                throw new Error('Stored Queries :You must set a field spliter into your field definition (optional for the first one!)');\n            }\n            if (!field.defaultValue) {\n                throw new Error('Stored Queries :You must set a field default value into your field definition');\n            }\n        });\n        this.storedQueriesOptions.resultTitle =\n            this.storedQueriesOptions.resultTitle || this.resultTitle;\n    }\n    getId() {\n        return StoredQueriesSearchSource.id;\n    }\n    getType() {\n        return StoredQueriesSearchSource.type;\n    }\n    getDefaultOptions() {\n        return {\n            title: 'Stored Queries',\n            searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq'\n        };\n    }\n    // URL CALL EXAMPLES:\n    //  GetFeatureById (mandatory storedquery for wfs server) (outputformat must be in geojson)\n    //  tslint:disable-next-line:max-line-length\n    //  https://geoegl.msp.gouv.qc.ca/apis/ws/swtq?service=wfs&version=2.0.0&request=GetFeature&storedquery_id=urn:ogc:def:query:OGC-WFS::GetFeatureById&srsname=epsg:4326&outputformat=geojson&ID=a_num_route.132\n    //  Custom StoredQuery\n    //  tslint:disable-next-line:max-line-length\n    //  https://geoegl.msp.gouv.qc.ca/apis/ws/swtq?service=wfs&version=1.1.0&request=GetFeature&storedquery_id=rtss&srsname=epsg:4326&outputformat=text/xml;%20subtype=gml/3.1.1&rtss=0013801110000c&chainage=12\n    /**\n     * Search a location by name or keyword\n     * @param term Location name or keyword\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    search(term, options) {\n        const storedqueriesParams = this.termSplitter(term, this.storedQueriesOptions.fields);\n        const params = this.computeRequestParams(options || {}, storedqueriesParams);\n        if (this.options.params == null) {\n            this.options.params = { page: '1' };\n        }\n        else {\n            this.options.params.page = options.page != null ? String(options.page) : '1';\n        }\n        if (new RegExp('.*?gml.*?', 'i').test(this.storedQueriesOptions.outputformat)) {\n            return this.http\n                .get(this.searchUrl, { params, responseType: 'text' })\n                .pipe(map(response => {\n                let resultArray = this.extractResults(this.extractWFSData(response), term);\n                resultArray.sort((a, b) => (a.meta.score > b.meta.score) ? 1 :\n                    (a.meta.score === b.meta.score) ? ((a.meta.titleHtml < b.meta.titleHtml) ? 1 : -1) : -1);\n                resultArray.reverse();\n                if (resultArray.length > Number(this.options.params.limit)) {\n                    const idxEnd = Number(this.options.params.limit) * Number(this.options.params.page);\n                    const resultTotLenght = resultArray.length;\n                    resultArray = resultArray.slice(0, idxEnd);\n                    if (idxEnd < resultTotLenght) {\n                        resultArray[resultArray.length - 1].meta.nextPage = true;\n                    }\n                    else {\n                        resultArray[resultArray.length - 1].meta.nextPage = false;\n                    }\n                }\n                return resultArray;\n            }));\n        }\n        else {\n            return this.http.get(this.searchUrl, { params }).pipe(map(response => {\n                return this.extractResults(this.extractWFSData(response), term);\n            }));\n        }\n    }\n    getFormatFromOptions() {\n        let olFormatCls;\n        const outputFormat = this.storedQueriesOptions.outputformat;\n        const patternGml3 = new RegExp('.*?gml.*?', 'i');\n        const patternGeojson = new RegExp('.*?json.*?', 'i');\n        if (patternGeojson.test(outputFormat)) {\n            olFormatCls = GeoJSON;\n        }\n        if (patternGml3.test(outputFormat)) {\n            olFormatCls = WFS;\n        }\n        return new olFormatCls();\n    }\n    extractWFSData(res) {\n        const olFormat = this.getFormatFromOptions();\n        const geojson = GeoJSON;\n        const wfsfeatures = olFormat.readFeatures(res);\n        const features = JSON.parse(new geojson().writeFeatures(wfsfeatures));\n        return features;\n    }\n    termSplitter(term, fields) {\n        const splittedTerm = {};\n        let remainingTerm = term;\n        let cnt = 0;\n        // Used to build the default values\n        fields.forEach(field => {\n            splittedTerm[field.name] = field.defaultValue;\n            const splitterRegex = new RegExp(field.splitPrefix + '(.+)', 'i');\n            if (splitterRegex.test(remainingTerm)) {\n                cnt = field.splitPrefix ? (cnt += 1) : cnt;\n                remainingTerm = remainingTerm.split(splitterRegex)[1];\n            }\n        });\n        if (cnt === 0) {\n            splittedTerm[fields[0].name] = term;\n            return splittedTerm;\n        }\n        remainingTerm = term;\n        const localFields = [...fields].reverse();\n        localFields.forEach(field => {\n            const splitterRegex = new RegExp(field.splitPrefix || '' + '(.+)', 'i');\n            if (remainingTerm || remainingTerm !== '') {\n                const values = remainingTerm.split(splitterRegex);\n                remainingTerm = values[0];\n                if (values[1]) {\n                    splittedTerm[field.name] = values[1].trim();\n                }\n            }\n        });\n        return splittedTerm;\n    }\n    computeRequestParams(options, queryParams) {\n        const wfsversion = this.storedQueriesOptions.storedquery_id\n            .toLowerCase()\n            .includes('getfeaturebyid')\n            ? '2.0.0'\n            : '1.1.0';\n        return new HttpParams({\n            fromObject: Object.assign({\n                service: 'wfs',\n                version: wfsversion,\n                request: 'GetFeature',\n                storedquery_id: this.storedQueriesOptions.storedquery_id,\n                srsname: this.storedQueriesOptions.srsname,\n                outputformat: this.storedQueriesOptions.outputformat\n            }, queryParams, this.params, options.params || {})\n        });\n    }\n    extractResults(response, term) {\n        return response.features.map((data) => {\n            return this.dataToResult(data, term);\n        });\n    }\n    dataToResult(data, term) {\n        const properties = this.computeProperties(data);\n        const id = [this.getId(), properties.type, data.id].join('.');\n        const title = data.properties[this.storedQueriesOptions.resultTitle]\n            ? this.storedQueriesOptions.resultTitle\n            : this.resultTitle;\n        return {\n            source: this,\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry: data.geometry,\n                // extent: data.bbox,\n                properties,\n                meta: {\n                    id,\n                    title: data.properties[title]\n                }\n            },\n            meta: {\n                dataType: FEATURE,\n                id,\n                title: data.properties.title,\n                titleHtml: data.properties[title],\n                icon: 'map-marker',\n                score: (data.properties.title) ?\n                    computeTermSimilarity(term.trim(), data.properties.title) :\n                    computeTermSimilarity(term.trim(), data.properties[title]),\n            }\n        };\n    }\n    computeProperties(data) {\n        const properties = Object.assign({}, ObjectUtils.removeKeys(data.properties, StoredQueriesSearchSource.propertiesBlacklist), { Route: '<span class=\"routing\"> <u>' + this.languageService.translate.instant('igo.geo.seeRouting') + '</u> </span>' });\n        return properties;\n    }\n}\nStoredQueriesSearchSource.id = 'storedqueries';\nStoredQueriesSearchSource.type = FEATURE;\nStoredQueriesSearchSource.propertiesBlacklist = [\n    'boundedBy',\n    'id',\n    'coord_x',\n    'coord_y'\n];\nStoredQueriesSearchSource.ɵfac = function StoredQueriesSearchSource_Factory(t) { return new (t || StoredQueriesSearchSource)(ɵɵinject(HttpClient), ɵɵinject(LanguageService), ɵɵinject(StorageService), ɵɵinject('options')); };\nStoredQueriesSearchSource.ɵprov = ɵɵdefineInjectable({ token: StoredQueriesSearchSource, factory: StoredQueriesSearchSource.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(StoredQueriesSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: HttpClient }, { type: LanguageService }, { type: StorageService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }]; }, null); })();\n/**\n * StoredQueriesReverse search source\n */\n// EXAMPLE CALLS\n// tslint:disable-next-line:max-line-length\n// https://ws.mapserver.transports.gouv.qc.ca/swtq?service=wfs&version=1.1.0&request=GetFeature&storedquery_id=lim_adm&srsname=epsg:4326&outputformat=text/xml;%20subtype=gml/3.1.1&long=-71.292469&lat=46.748107\n//\nclass StoredQueriesReverseSearchSource extends SearchSource {\n    constructor(http, languageService, storageService, options) {\n        super(options, storageService);\n        this.http = http;\n        this.languageService = languageService;\n        this.storedQueriesOptions = options;\n        if (!this.storedQueriesOptions || (this.storedQueriesOptions && !this.storedQueriesOptions.available)) {\n            return;\n        }\n        if (!this.storedQueriesOptions.storedquery_id) {\n            const err = 'Stored Queries :You have to set \"storedquery_id\" into StoredQueries options. ex: storedquery_id: \"nameofstoredquerie\"';\n            throw new Error(err);\n        }\n        if (!this.storedQueriesOptions.longField) {\n            throw new Error('Stored Queries :You have to set \"longField\" to map the longitude coordinate to the query params.');\n        }\n        if (!this.storedQueriesOptions.latField) {\n            throw new Error('Stored Queries :You have to set \"latField\" to map the latitude coordinate to the query params.');\n        }\n        this.storedQueriesOptions.outputformat =\n            this.storedQueriesOptions.outputformat || 'text/xml; subtype=gml/3.1.1';\n        this.storedQueriesOptions.srsname =\n            this.storedQueriesOptions.srsname || 'EPSG:4326';\n        this.storedQueriesOptions.resultTitle =\n            this.storedQueriesOptions.resultTitle || this.resultTitle;\n    }\n    getId() {\n        return StoredQueriesReverseSearchSource.id;\n    }\n    getType() {\n        return StoredQueriesReverseSearchSource.type;\n    }\n    getDefaultOptions() {\n        return {\n            title: 'Stored Queries (reverse)',\n            searchUrl: 'https://ws.mapserver.transports.gouv.qc.ca/swtq'\n        };\n    }\n    /**\n     * Search a location by coordinates\n     * @param lonLat Location coordinates\n     * @param distance Search raidus around lonLat\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    reverseSearch(lonLat, options) {\n        const params = this.computeRequestParams(lonLat, options || {});\n        if (new RegExp('.*?gml.*?', 'i').test(this.storedQueriesOptions.outputformat)) {\n            return this.http\n                .get(this.searchUrl, { params, responseType: 'text' })\n                .pipe(map(response => {\n                return this.extractResults(this.extractWFSData(response));\n            }));\n        }\n        else {\n            return this.http.get(this.searchUrl, { params }).pipe(map(response => {\n                return this.extractResults(this.extractWFSData(response));\n            }));\n        }\n    }\n    getFormatFromOptions() {\n        let olFormatCls;\n        const outputFormat = this.storedQueriesOptions.outputformat;\n        const patternGml3 = new RegExp('.*?gml.*?', 'i');\n        const patternGeojson = new RegExp('.*?json.*?', 'i');\n        if (patternGeojson.test(outputFormat)) {\n            olFormatCls = GeoJSON;\n        }\n        if (patternGml3.test(outputFormat)) {\n            olFormatCls = WFS;\n        }\n        return new olFormatCls();\n    }\n    extractWFSData(res) {\n        const olFormat = this.getFormatFromOptions();\n        const geojson = GeoJSON;\n        const wfsfeatures = olFormat.readFeatures(res);\n        const features = JSON.parse(new geojson().writeFeatures(wfsfeatures));\n        return features;\n    }\n    computeRequestParams(lonLat, options) {\n        const longLatParams = {};\n        longLatParams[this.storedQueriesOptions.longField] = lonLat[0];\n        longLatParams[this.storedQueriesOptions.latField] = lonLat[1];\n        return new HttpParams({\n            fromObject: Object.assign({\n                service: 'WFS',\n                version: '1.1.0',\n                request: 'GetFeature',\n                storedquery_id: this.storedQueriesOptions.storedquery_id,\n                srsname: this.storedQueriesOptions.srsname,\n                outputformat: this.storedQueriesOptions.outputformat\n            }, longLatParams, this.params, options.params || {})\n        });\n    }\n    extractResults(response) {\n        return response.features.map((data) => {\n            return this.dataToResult(data);\n        });\n    }\n    dataToResult(data) {\n        const properties = this.computeProperties(data);\n        const id = [this.getId(), properties.type, data.id].join('.');\n        const title = data.properties[this.storedQueriesOptions.resultTitle]\n            ? this.storedQueriesOptions.resultTitle\n            : this.resultTitle;\n        return {\n            source: this,\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry: data.geometry,\n                properties,\n                meta: {\n                    id,\n                    title: data.properties[title]\n                }\n            },\n            meta: {\n                dataType: FEATURE,\n                id,\n                title: data.properties[title],\n                icon: 'map-marker'\n            }\n        };\n    }\n    computeProperties(data) {\n        const properties = ObjectUtils.removeKeys(data.properties, StoredQueriesReverseSearchSource.propertiesBlacklist);\n        const routing = {\n            Route: '<span class=\"routing\"> <u>' + this.languageService.translate.instant('igo.geo.seeRouting') + '</u> </span>'\n        };\n        return Object.assign(properties, { type: data.properties.doc_type }, routing);\n    }\n}\nStoredQueriesReverseSearchSource.id = 'storedqueriesreverse';\nStoredQueriesReverseSearchSource.type = FEATURE;\nStoredQueriesReverseSearchSource.propertiesBlacklist = [];\nStoredQueriesReverseSearchSource.ɵfac = function StoredQueriesReverseSearchSource_Factory(t) { return new (t || StoredQueriesReverseSearchSource)(ɵɵinject(HttpClient), ɵɵinject(LanguageService), ɵɵinject(StorageService), ɵɵinject('options')); };\nStoredQueriesReverseSearchSource.ɵprov = ɵɵdefineInjectable({ token: StoredQueriesReverseSearchSource, factory: StoredQueriesReverseSearchSource.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(StoredQueriesReverseSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: HttpClient }, { type: LanguageService }, { type: StorageService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }]; }, null); })();\n\n/**\n * StoredQueries search source factory\n * @ignore\n */\nfunction storedqueriesSearchSourceFactory(http, languageService, storageService, config) {\n    return new StoredQueriesSearchSource(http, languageService, storageService, config.getConfig(`searchSources.${StoredQueriesSearchSource.id}`));\n}\n/**\n * Function that returns a provider for the StoredQueries search source\n */\nfunction provideStoredQueriesSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: storedqueriesSearchSourceFactory,\n        multi: true,\n        deps: [HttpClient, LanguageService, StorageService, ConfigService]\n    };\n}\n/**\n * StoredQueriesReverse search source factory\n * @ignore\n */\nfunction storedqueriesReverseSearchSourceFactory(http, languageService, storageService, config) {\n    return new StoredQueriesReverseSearchSource(http, languageService, storageService, config.getConfig(`searchSources.${StoredQueriesReverseSearchSource.id}`));\n}\n/**\n * Function that returns a provider for the StoredQueriesReverse search source\n */\nfunction provideStoredQueriesReverseSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: storedqueriesReverseSearchSourceFactory,\n        multi: true,\n        deps: [HttpClient, LanguageService, StorageService, ConfigService]\n    };\n}\n\nfunction getRowsInMapExtent(layerId, storageService) {\n    return storageService.get(`workspace.rowsInMapExtent.${layerId}`) || true;\n}\nfunction setRowsInMapExtent(value, layerId, storageService) {\n    storageService.set(`workspace.rowsInMapExtent.${layerId}`, value, StorageScope.SESSION);\n}\nfunction getSelectedOnly(layerId, storageService) {\n    return storageService.get(`workspace.selectedOnly.${layerId}`) || false;\n}\nfunction setSelectedOnly(value, layerId, storageService) {\n    storageService.set(`workspace.selectedOnly.${layerId}`, value, StorageScope.SESSION);\n}\nfunction mapExtentStrategyActiveToolTip(ws) {\n    return ws.entityStore.getStrategyOfType(EntityStoreFilterCustomFuncStrategy).active$.pipe(map((active) => active ? 'igo.geo.workspace.inMapExtent.active.tooltip' : 'igo.geo.workspace.inMapExtent.inactive.tooltip'));\n}\nfunction noElementSelected(ws) {\n    return ws.entityStore.stateView.manyBy$((record) => {\n        return record.state.selected === true;\n    }).pipe(map((entities) => entities.length >= 1));\n}\n\n/*\n * Public API Surface of geo\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AddCatalogDialogComponent, ArcGISRestDataSource, BaseLayersSwitcherComponent, CadastreSearchSource, CapabilitiesService, CartoDataSource, Catalog, CatalogBrowserComponent, CatalogFactory, CatalogItemType, CatalogLibaryComponent, CatalogService, ClusterDataSource, CompositeCatalog, CoordinatesReverseSearchSource, CoordinatesReverseSearchSourceFactory, CoordinatesSearchResultFormatter, DataService, DataSource, DataSourceService, DirectionsFormBindingDirective, DirectionsFormComponent, DirectionsFormService, DirectionsFormat, DirectionsService, DirectionsSource, DownloadButtonComponent, DownloadService, DrawComponent, DrawControl, DrawIconService, DrawStyleService, DrawType, DropGeoFileDirective, EncodingFormat, EsriStyleGenerator, ExportButtonComponent, ExportError, ExportFormat, ExportInvalidFileError, ExportNothingToExportError, ExportService, FEATURE, FeatureDataSource, FeatureDetailsComponent, FeatureDetailsDirective, FeatureFormComponent, FeatureMotion, FeatureStore, FeatureStoreInMapExtentStrategy, FeatureStoreInMapResolutionStrategy, FeatureStoreLoadingLayerStrategy, FeatureStoreLoadingStrategy, FeatureStoreSelectionStrategy, FeatureWorkspace, FeatureWorkspaceService, FilterableDataSourcePipe, GeolocateButtonComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, GeometrySliceError, GeometrySliceLineStringError, GeometrySliceMultiPolygonError, GeometrySliceTooManyIntersectionError, GoogleLinks, HoverFeatureDirective, IChercheReverseSearchSource, IChercheSearchResultFormatter, IChercheSearchSource, ILayerSearchResultFormatter, ILayerSearchSource, IgoCatalogBrowserModule, IgoCatalogLibraryModule, IgoCatalogModule, IgoDataSourceModule, IgoDirectionsModule, IgoDownloadModule, IgoDrawModule, IgoDrawingToolModule, IgoFeatureDetailsModule, IgoFeatureFormModule, IgoFeatureModule, IgoFilterModule, IgoGeoModule, IgoGeoWorkspaceModule, IgoGeometryFormFieldModule, IgoGeometryModule, IgoHttpParameterCodec, IgoImportExportModule, IgoLayerModule, IgoMap, IgoMapModule, IgoMeasureModule, IgoMeasurerModule, IgoMetadataModule, IgoOgcFilterModule, IgoOverlayModule, IgoPrintModule, IgoQueryModule, IgoSearchBarModule, IgoSearchModule, IgoSearchResultsModule, IgoSearchSelectorModule, IgoSearchSettingsModule, IgoStyleListModule, IgoToastModule, IgoWktModule, IgoWorkspaceSelectorModule, IgoWorkspaceUpdatorModule, ImageArcGISRestDataSource, ImageLayer, ImageWatcher, ImportError, ImportExportComponent, ImportInvalidFileError, ImportNothingToImportError, ImportSRSError, ImportService, ImportSizeError, ImportUnreadableFileError, LAYER, Layer, LayerItemComponent, LayerLegendComponent, LayerLegendItemComponent, LayerLegendListBindingDirective, LayerLegendListComponent, LayerListBindingDirective, LayerListComponent, LayerListControlsEnum, LayerListDisplacement, LayerListSelectVisibleEnum, LayerListToolComponent, LayerListToolControlsEnum, LayerListToolService, LayerService, LayerSyncWatcher, LinkedProperties, MEASURE_UNIT_AUTO, MVTDataSource, MapBrowserComponent, MapController, MapOfflineDirective, MapService, MapViewAction, MapViewController, MeasureAreaUnit, MeasureAreaUnitAbbreviation, MeasureFormatPipe, MeasureLengthUnit, MeasureLengthUnitAbbreviation, MeasureType, MeasurerComponent, MetadataAbstractComponent, MetadataButtonComponent, MetadataService, MiniBaseMapComponent, ModifyControl, NominatimSearchSource, OGCFilterService, OSMDataSource, OfflineButtonComponent, OgcFilterButtonComponent, OgcFilterComponent, OgcFilterFormComponent, OgcFilterOperator, OgcFilterOperatorType, OgcFilterSelectionComponent, OgcFilterTimeComponent, OgcFilterTimeSliderComponent, OgcFilterWidget, OgcFilterWriter, OgcFilterableFormComponent, OgcFilterableItemComponent, OgcFilterableListBindingDirective, OgcFilterableListComponent, OlDragSelectInteraction, OptionsApiService, OptionsService, OsmLinks, OsrmDirectionsSource, Overlay, OverlayAction, OverlayDirective, OverlayService, PointerPositionDirective, PrintComponent, PrintFormComponent, PrintLegendPosition, PrintOrientation, PrintOutputFormat, PrintPaperFormat, PrintResolution, PrintSaveImageFormat, PrintService, ProjectionService, QueryDirective, QueryFormat, QueryFormatMimeType, QueryHtmlTarget, QuerySearchSource, QueryService, RotationButtonComponent, SEARCH_TYPES, STYLELIST_OPTIONS, SearchBarComponent, SearchPointerSummaryDirective, SearchResultAddButtonComponent, SearchResultMode, SearchResultsComponent, SearchResultsItemComponent, SearchSelectorComponent, SearchService, SearchSettingsComponent, SearchSource, SearchSourceService, SliceControl, SourceDirectionsType, SpatialFilterItemComponent, SpatialFilterItemType, SpatialFilterListComponent, SpatialFilterQueryType, SpatialFilterService, SpatialFilterType, SpatialFilterTypeComponent, StoredQueriesReverseSearchSource, StoredQueriesSearchSource, StyleListService, StyleService, TileArcGISRestDataSource, TileDebugDataSource, TileLayer, TileWatcher, TimeFilterButtonComponent, TimeFilterFormComponent, TimeFilterItemComponent, TimeFilterListBindingDirective, TimeFilterListComponent, TimeFilterService, TimeFilterStyle, TimeFilterType, ToastComponent, TooltipType, TrackFeatureButtonComponent, TypeCapabilities, TypeCatalog, VectorLayer, VectorTileLayer, VectorWatcher, WFSDataSource, WFSService, WMSDataSource, WMTSDataSource, WebSocketDataSource, WfsWorkspace, WfsWorkspaceService, WktService, WorkspaceSelectorDirective, WorkspaceUpdatorDirective, XYZDataSource, ZoomButtonComponent, addLayerAndFeaturesStyledToMap, addLayerAndFeaturesToMap, addLinearRingToOlPolygon, cadastreSearchSourceFactory, checkWfsParams, clearOlGeometryMidpoints, computeBestAreaUnit, computeBestLengthUnit, computeLayerTitleFromFile, computeOlFeatureExtent, computeOlFeaturesDiff, computeOlFeaturesExtent, computeTermSimilarity, convertDDToDMS, createDefaultTileGrid, createDrawHoleInteractionStyle, createDrawInteractionStyle, createDrawingInteractionStyle, createMeasureInteractionStyle, createMeasureLayerStyle, createOlTooltipAtPoint, createOlTooltipDrawAtPoint, createOverlayDefaultStyle, createOverlayLayer, createOverlayMarkerStyle, ctrlKeyDown, defaultCoordinatesSearchResultFormatterFactory, defaultEpsg, defaultFieldNameGeometry, defaultIChercheSearchResultFormatterFactory, defaultMaxFeatures, defaultWfsVersion, entitiesToRowData, exportToCSV, featureFromOl, featureToOl, featureToSearchResult, featuresAreOutOfView, featuresAreTooDeepInView, findDiff, formatMeasure, formatScale, formatWFSQueryString, generateArcgisRestIdFromSourceOptions, generateFeatureIdFromSourceOptions, generateId, generateIdFromSourceOptions, generateWMSIdFromSourceOptions, generateWMTSIdFromSourceOptions, generateWfsIdFromSourceOptions, generateXYZIdFromSourceOptions, getCommonVectorSelectedStyle, getCommonVectorStyle, getFileExtension, getFormatFromOptions, getLayersLegends, getMousePositionFromOlGeometryEvent, getOlTooltipAtCenter, getOlTooltipsAtMidpoints, getResolutionFromScale, getRowsInMapExtent, getScaleFromResolution, getSelectedOnly, getTooltipsOfOlGeometry, gmlRegex, handleFileExportError, handleFileExportSuccess, handleFileImportError, handleFileImportSuccess, handleInvalidFileImportError, handleNothingToExportError, handleNothingToImportError, handleSRSImportError, handleSizeFileImportError, handleUnreadbleFileImportError, hideOlFeature, hoverFeatureMarker, ichercheReverseSearchSourceFactory, ichercheSearchSourceFactory, ilayerSearchResultFormatterFactory, ilayerSearchSourceFactory, jsonRegex, layerIsQueryable, lonLatConversion, mapExtentStrategyActiveToolTip, measureOlGeometry, measureOlGeometryArea, measureOlGeometryLength, metersToFeet, metersToKilometers, metersToMiles, metersToUnit, moveToOlFeatures, mtmZoneFromLonLat, noElementSelected, nominatimSearchSourceFactory, ogcFilterWidgetFactory, olLayerIsQueryable, optionsApiFactory, osrmDirectionsSourcesFactory, pointerPositionSummaryMarker, provideCadastreSearchSource, provideCoordinatesReverseSearchSource, provideDefaultCoordinatesSearchResultFormatter, provideDefaultIChercheSearchResultFormatter, provideIChercheReverseSearchSource, provideIChercheSearchSource, provideILayerSearchResultFormatter, provideILayerSearchSource, provideNominatimSearchSource, provideOgcFilterWidget, provideOptionsApi, provideOsrmDirectionsSource, provideSearchSourceService, provideStoredQueriesReverseSearchSource, provideStoredQueriesSearchSource, provideStyleListLoader, provideStyleListOptions, renderFeatureFromOl, roundCoordTo, scaleExtent, searchSourceServiceFactory, setRowsInMapExtent, setSelectedOnly, sliceOlGeometry, sliceOlLineString, sliceOlPolygon, sourceCanReverseSearch, sourceCanReverseSearchAsSummary, sourceCanSearch, squareMetersToAcres, squareMetersToHectares, squareMetersToSquareFeet, squareMetersToSquareKilometers, squareMetersToSquareMiles, squareMetersToUnit, standardizeUrl, stopMarker, storedqueriesReverseSearchSourceFactory, storedqueriesSearchSourceFactory, stringToLonLat, styleListFactory, tryAddLoadingStrategy, tryAddSelectionStrategy, tryBindStoreLayer, updateOlGeometryCenter, updateOlGeometryMidpoints, updateOlTooltipAtCenter, updateOlTooltipDrawAtCenter, updateOlTooltipsAtMidpoints, updateOlTooltipsDrawAtMidpoints, utmZoneFromLonLat, viewStatesAreEqual };\n//# sourceMappingURL=igo2-geo.js.map\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Simple Map</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/simple-map\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\"\n  igoPointerPosition\n  [pointerPositionDelay]=\"pointerCoordDelay\"\n  (pointerPositionCoord)=\"onPointerMove($event)\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n    <igo-geolocate-button [map]=\"map\" color=\"primary\"></igo-geolocate-button>\n    <igo-rotation-button [map]=\"map\" [showIfNoRotation]=\"true\" color=\"primary\"></igo-rotation-button>\n  </igo-map-browser>\n\n</mat-card>\n\n<p *ngIf=\"!isTouchScreen\">{{pointerCoord}}</p>","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppSimpleMapComponent } from './simple-map.component';\n\nconst routes: Routes = [\n  {\n    path: 'simple-map',\n    component: AppSimpleMapComponent\n  }\n];\n\nexport const AppSimpleMapRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService, MediaService } from '@igo2/core';\nimport { IgoMap, DataSourceService, LayerService } from '@igo2/geo';\n\n@Component({\n  selector: 'app-simple-map',\n  templateUrl: './simple-map.component.html',\n  styleUrls: ['./simple-map.component.scss']\n})\nexport class AppSimpleMapComponent {\n  public pointerCoord;\n  public pointerCoordDelay: number = 0;\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      },\n      scaleLine: true\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 6,\n    rotation: 0.75\n  };\n\n  get media() {\n    return this.mediaService.getMedia();\n  }\n\n  get isTouchScreen() {\n    return this.mediaService.isTouchScreen();\n  }\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService,\n    private mediaService: MediaService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n  }\n\n  onPointerMove(event) {\n    this.pointerCoord = event;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMapModule } from '@igo2/geo';\n\nimport { AppSimpleMapComponent } from './simple-map.component';\nimport { AppSimpleMapRoutingModule } from './simple-map-routing.module';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  declarations: [AppSimpleMapComponent],\n  imports: [\n    CommonModule,\n    AppSimpleMapRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoMapModule\n  ],\n  exports: [AppSimpleMapComponent]\n})\nexport class AppSimpleMapModule {}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Simple Map</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/layer\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Layers\">\n    <igo-layer-list\n    [map]=\"map\"\n    [layers]=\"map.layers\"\n    [expandLegendOfVisibleLayers]=\"false\"\n    floatLabel=\"never\"\n    [queryBadge]=\"true\">\n\n      <ng-template #igoLayerItemToolbar let-layer=\"layer\">\n        <igo-metadata-button [layer]=\"layer\"></igo-metadata-button>\n        <igo-download-button [layer]=\"layer\"></igo-download-button>\n        <igo-ogc-filter-button [header]=\"true\" [layer]=\"layer\"></igo-ogc-filter-button>\n        <igo-time-filter-button [header]=\"true\" [layer]=\"layer\"></igo-time-filter-button>\n        <igo-track-feature-button [layer]=\"layer\" [trackFeature]=\"true\"></igo-track-feature-button>\n      </ng-template>\n\n    </igo-layer-list>\n  </igo-panel>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppLayerComponent } from './layer.component';\n\nconst routes: Routes = [\n  {\n    path: 'layer',\n    component: AppLayerComponent\n  }\n];\n\nexport const AppLayerRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  WMSDataSourceOptions,\n  LayerOptions,\n  WFSDataSourceOptions,\n  OgcFilterableDataSourceOptions,\n  MetadataLayerOptions\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-layer',\n  templateUrl: './layer.component.html',\n  styleUrls: ['./layer.component.scss']\n})\nexport class AppLayerComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    maxLayerZoomExtent: [-11000000, 4500000, -4500000, 10000000],\n    zoom: 7\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            visible: true,\n            baseLayer: true,\n            source: dataSource\n          })\n        );\n      });\n\n    interface WFSoptions\n      extends WFSDataSourceOptions,\n        OgcFilterableDataSourceOptions {}\n\n    const wfsDatasource: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'shp'\n      },\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        filters: {\n          operator: 'PropertyIsEqualTo',\n          propertyName: 'code_municipalite',\n          expression: '10043'\n        }\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDatasource)\n      .subscribe(dataSource => {\n        const layer: LayerOptions = {\n          title: 'WFS ',\n          visible: true,\n          source: dataSource\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n\n    const wfsDatasourceCustomEPSG: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: 'geojson_utf8',\n        srsName: 'EPSG:32198',\n        outputFormatDownload: 'shp'\n      },\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        filters: {\n          operator: 'PropertyIsEqualTo',\n          propertyName: 'code_municipalite',\n          expression: '12072'\n        }\n      },\n      formatOptions: {\n        dataProjection: 'EPSG:32198'\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDatasourceCustomEPSG)\n      .subscribe(dataSource => {\n        const layer: LayerOptions = {\n          title: 'WFS (Custom EPSG)',\n          visible: true,\n          source: dataSource,\n          removable: false\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n\n    this.layerService\n      .createAsyncLayer({\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'MELS_CS_ANGLO_S',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Réseau routier',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          params: {\n            LAYERS: 'bgr_v_sous_route_res_sup_act',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'lieu habité',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'lieuhabite',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'sh_dis_eco',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'sh_dis_eco',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'nurc:Arc_Sample_Parent',\n        visible: false,\n        legendOptions: {\n          // collapsed: false,\n          display: true,\n          // url: 'https://v.seloger.com/s/width/1144/visuels/0/m/l/4/0ml42xbt1n3itaboek3qec5dtskdgw6nlscu7j69k.jpg',\n          stylesAvailable: [\n            { name: 'rain', title: 'Pluie' },\n            { name: 'raster', title: 'Défaut' }\n          ] //\n        },\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://demo.geo-solutions.it/geoserver/ows',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'nurc:Arc_Sample', // , test:Linea_costa\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Avertissements routier',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          params: {\n            LAYERS: 'evenements',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    const datasource: WMSDataSourceOptions = {\n      type: 'wms',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      refreshIntervalSec: 15,\n      params: {\n        LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n        VERSION: '1.3.0'\n      }\n    };\n\n    interface LayerOptionsWithMetadata\n      extends LayerOptions,\n        MetadataLayerOptions {}\n\n    this.dataSourceService\n      .createAsyncDataSource(datasource)\n      .subscribe(dataSource => {\n        const layer: LayerOptionsWithMetadata = {\n          title: 'Embâcle',\n          source: dataSource,\n          metadata: {\n            url:\n              'https://www.donneesquebec.ca/recherche/fr/dataset/historique-publique-d-embacles-repertories-au-msp',\n            extern: true\n          }\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule } from '@igo2/common';\nimport {\n  IgoMapModule,\n  IgoLayerModule,\n  IgoFilterModule,\n  IgoMetadataModule,\n  IgoDownloadModule\n} from '@igo2/geo';\n\nimport { AppLayerComponent } from './layer.component';\nimport { AppLayerRoutingModule } from './layer-routing.module';\n\n@NgModule({\n  declarations: [AppLayerComponent],\n  imports: [\n    AppLayerRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoLayerModule,\n    IgoFilterModule,\n    IgoMetadataModule,\n    IgoDownloadModule\n  ],\n  exports: [AppLayerComponent]\n})\nexport class AppLayerModule {}\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  WMSDataSourceOptions,\n  LayerOptions,\n  WFSDataSourceOptions,\n  OgcFilterableDataSourceOptions,\n  MetadataLayerOptions\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-legend',\n  templateUrl: './legend.component.html',\n  styleUrls: ['./legend.component.scss']\n})\nexport class AppLegendComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            visible: true,\n            baseLayer: true,\n            source: dataSource\n          })\n        );\n      });\n\n    interface WFSoptions\n      extends WFSDataSourceOptions,\n        OgcFilterableDataSourceOptions {}\n\n    const wfsDatasource: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'shp'\n      },\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        filters: {\n          operator: 'PropertyIsEqualTo',\n          propertyName: 'code_municipalite',\n          expression: '10043'\n        }\n      }\n    };\n\n    this.layerService\n    .createAsyncLayer({\n      title: 'legend with display:false',\n      visible: true,\n      legendOptions: {\n        display: false,\n        html: 'test html'\n      },\n      sourceOptions: {\n        type: 'wms',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n        optionsFromCapabilities: true,\n        params: {\n          LAYERS: 'sh_dis_eco',\n          VERSION: '1.3.0'\n        }\n      }\n    })\n    .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n    .createAsyncLayer({\n      title: 'legend in html',\n      visible: true,\n      legendOptions: {\n        display: true,\n        html: '<h2>HTML légende</h2>'\n      },\n      sourceOptions: {\n        type: 'wms',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n        optionsFromCapabilities: true,\n        params: {\n          LAYERS: 'sh_sreg_eco',\n          VERSION: '1.3.0'\n        }\n      }\n    })\n    .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n    .createAsyncLayer({\n      title: 'legend with url param',\n      visible: true,\n      legendOptions: {\n        url: 'data:image/jpeg;base64,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'\n\n      },\n      sourceOptions: {\n        type: 'wms',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n        optionsFromCapabilities: true,\n        params: {\n          LAYERS: 'sh_reg_eco',\n          VERSION: '1.3.0'\n        }\n      }\n    })\n    .subscribe(l => this.map.addLayer(l));\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDatasource)\n      .subscribe(dataSource => {\n        const layer: LayerOptions = {\n          title: 'WFS ',\n          visible: true,\n          source: dataSource\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n\n    this.layerService\n      .createAsyncLayer({\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'MELS_CS_ANGLO_S',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Réseau routier',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          params: {\n            LAYERS: 'bgr_v_sous_route_res_sup_act',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'lieu habité',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'lieuhabite',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: '2 styles nurc:Arc_Sample_Parent',\n        visible: true,\n        legendOptions: {\n          // collapsed: false,\n          display: true,\n          // url: 'https://v.seloger.com/s/width/1144/visuels/0/m/l/4/0ml42xbt1n3itaboek3qec5dtskdgw6nlscu7j69k.jpg',\n          stylesAvailable: [\n            { name: 'rain', title: 'Pluie' },\n            { name: 'raster', title: 'Défaut' }\n          ] //\n        },\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://demo.geo-solutions.it/geoserver/ows',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'nurc:Arc_Sample', // , test:Linea_costa\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Avertissements routier',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          params: {\n            LAYERS: 'evenements',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    const datasource: WMSDataSourceOptions = {\n      type: 'wms',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      refreshIntervalSec: 15,\n      params: {\n        LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n        VERSION: '1.3.0'\n      }\n    };\n\n    interface LayerOptionsWithMetadata\n      extends LayerOptions,\n        MetadataLayerOptions {}\n\n    this.dataSourceService\n      .createAsyncDataSource(datasource)\n      .subscribe(dataSource => {\n        const layer: LayerOptionsWithMetadata = {\n          title: 'Embâcle',\n          visible: true,\n          source: dataSource,\n          metadata: {\n            url:\n              'https://www.donneesquebec.ca/recherche/fr/dataset/historique-publique-d-embacles-repertories-au-msp',\n            extern: true\n          }\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule } from '@igo2/common';\nimport {\n  IgoMapModule,\n  IgoLayerModule,\n  IgoFilterModule,\n  IgoMetadataModule,\n  IgoDownloadModule\n} from '@igo2/geo';\n\nimport { AppLegendComponent } from './legend.component';\nimport { AppLegendRoutingModule } from './legend-routing.module';\n\n@NgModule({\n  declarations: [AppLegendComponent],\n  imports: [\n    AppLegendRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoLayerModule,\n    IgoFilterModule,\n    IgoMetadataModule,\n    IgoDownloadModule\n  ],\n  exports: [AppLegendComponent]\n})\nexport class AppLegendModule {}\n","import { Component, OnInit, AfterViewInit } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  FEATURE,\n  Feature,\n  FeatureMotion\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-overlay',\n  templateUrl: './overlay.component.html',\n  styleUrls: ['./overlay.component.scss']\n})\nexport class AppOverlayComponent implements OnInit, AfterViewInit {\n  public map = new IgoMap({\n    overlay: true,\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 6\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {}\n\n  ngOnInit() {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n  }\n\n  ngAfterViewInit() {\n    const feature1: Feature = {\n      type: FEATURE,\n      projection: 'EPSG:4326',\n      meta: {\n        id: 1\n      },\n      properties: {},\n      geometry: {\n        type: 'Point',\n        coordinates: [-73, 46.6]\n      }\n    };\n\n    const feature2: Feature = {\n      type: FEATURE,\n      projection: 'EPSG:4326',\n      meta: {\n        id: 2\n      },\n      properties: {},\n      geometry: {\n        type: 'LineString',\n        coordinates: [[-72, 47.8], [-73.5, 47.4], [-72.4, 48.6]]\n      }\n    };\n\n    const feature3: Feature = {\n      type: FEATURE,\n      projection: 'EPSG:4326',\n      meta: {\n        id: 3\n      },\n      properties: {},\n      geometry: {\n        type: 'Polygon',\n        coordinates: [[[-71, 46.8], [-73, 47], [-71.2, 46.6]]]\n      }\n    };\n\n    this.map.overlay.setFeatures(\n      [feature1, feature2, feature3],\n      FeatureMotion.None\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMapModule, IgoOverlayModule } from '@igo2/geo';\n\nimport { AppOverlayComponent } from './overlay.component';\nimport { AppOverlayRoutingModule } from './overlay-routing.module';\n\n@NgModule({\n  declarations: [AppOverlayComponent],\n  imports: [\n    AppOverlayRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoMapModule,\n    IgoOverlayModule\n  ],\n  exports: [AppOverlayComponent]\n})\nexport class AppOverlayModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppLegendComponent } from './legend.component';\n\nconst routes: Routes = [\n  {\n    path: 'legend',\n    component: AppLegendComponent\n  }\n];\n\nexport const AppLegendRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Simple Map with a legend list</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/layer\">code of this\n      example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Legends\">\n    <igo-layer-legend-list [layers]=\"map.layers\"\n    [excludeBaseLayers]=\"true\"\n    [allowShowAllLegends]=\"true\"\n    [updateLegendOnResolutionChange]=\"false\"\n    [showAllLegendsValue]=\"false\">\n  </igo-layer-legend-list>\n\n  </igo-panel>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppOverlayComponent } from './overlay.component';\n\nconst routes: Routes = [\n  {\n    path: 'overlay',\n    component: AppOverlayComponent\n  }\n];\n\nexport const AppOverlayRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Overlay</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/overlay\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n</mat-card>\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Geometry Form</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/form\">code of this example</a>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-form\n    *ngIf=\"form$ | async as form\"\n    [form]=\"form\"\n    [formData]=\"data$ | async\"\n    (submitForm)=\"onSubmit($event)\">\n\n    <igo-form-group [group]=\"form.groups[0]\"></igo-form-group>\n\n    <div formButtons>\n      <button\n        mat-stroked-button\n        type=\"button\"\n        color=\"primary\"\n        (click)=\"fillForm()\">\n        Fill Form\n      </button>\n      <button\n        mat-stroked-button\n        type=\"button\"\n        color=\"primary\"\n        (click)=\"clearForm()\">\n        Clear Form\n      </button>\n      <button\n        mat-flat-button\n        type=\"submit\"\n        color=\"primary\"\n        [disabled]=\"submitDisabled\">\n        Submit\n      </button>\n    </div>\n  </igo-form>\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppGeometryComponent } from './geometry.component';\n\nconst routes: Routes = [\n  {\n    path: 'geometry',\n    component: AppGeometryComponent\n  }\n];\n\nexport const AppGeometryRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { BehaviorSubject, Subscription } from 'rxjs';\nimport * as olstyle from 'ol/style';\n\nimport { LanguageService } from '@igo2/core';\nimport { Form, FormService } from '@igo2/common';\nimport { IgoMap, DataSourceService, LayerService } from '@igo2/geo';\n\n@Component({\n  selector: 'app-geometry',\n  templateUrl: './geometry.component.html',\n  styleUrls: ['./geometry.component.scss']\n})\nexport class AppGeometryComponent implements OnInit, OnDestroy {\n\n  map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      },\n      scaleLine: true\n    }\n  });\n\n  view = {\n    center: [-73, 47.2],\n    zoom: 15\n  };\n\n  form$ = new BehaviorSubject<Form>(undefined);\n\n  data$ = new BehaviorSubject<{[key: string]: any}>(undefined);\n\n  submitDisabled = true;\n\n  private valueChanges$$: Subscription;\n\n  constructor(\n    private languageService: LanguageService,\n    private formService: FormService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {}\n\n  ngOnInit() {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n\n    const fieldConfigs = [\n      {\n        name: 'geometry',\n        title: 'Geometry',\n        options:  {\n          validator: Validators.required\n        },\n        type: 'geometry',\n        inputs: {\n          map: this.map,\n          geometryTypeField: true,\n          geometryType: 'Polygon',\n          drawGuideField: true,\n          drawGuide: 50,\n          drawGuidePlaceholder: 'Draw Guide',\n          drawStyle: new olstyle.Style({\n            stroke: new olstyle.Stroke({\n              color: [255, 0, 0, 1],\n              width: 2\n            }),\n            fill:  new olstyle.Fill({\n              color: [255, 0, 0, 0.2]\n            }),\n            image: new olstyle.Circle({\n              radius: 8,\n              stroke: new olstyle.Stroke({\n                color: [255, 0, 0, 1]\n              }),\n              fill: new olstyle.Fill({\n                color: [255, 0, 0, 0.2]\n              })\n            })\n          })\n        }\n      },\n      {\n        name: 'name',\n        title: 'Name',\n        options:  {\n          validator: Validators.required\n        }\n      }\n    ];\n\n    const fields = fieldConfigs.map((config) => this.formService.field(config));\n    const form = this.formService.form([], [this.formService.group({name: 'info'}, fields)]);\n\n    this.valueChanges$$ = form.control.valueChanges.subscribe(() => {\n      this.submitDisabled = !form.control.valid;\n    });\n\n    this.form$.next(form);\n  }\n\n  ngOnDestroy() {\n    this.valueChanges$$.unsubscribe();\n  }\n\n  fillForm() {\n    this.data$.next({\n      name: 'Place',\n      geometry: JSON.stringify({type: 'Polygon', coordinates: [[\n        [-106, 42],\n        [-107, 31],\n        [-81, 32],\n        [-82, 42],\n        [-106, 42]\n      ]]})\n    });\n  }\n\n  clearForm() {\n    this.form$.value.control.reset();\n  }\n\n  onSubmit(data: {[key: string]: any}) {\n    alert(JSON.stringify(data));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoFormModule } from '@igo2/common';\nimport { IgoGeometryModule, IgoMapModule } from '@igo2/geo';\n\nimport { AppGeometryComponent } from './geometry.component';\nimport { AppGeometryRoutingModule } from './geometry-routing.module';\n\n@NgModule({\n  declarations: [AppGeometryComponent],\n  imports: [\n    CommonModule,\n    AppGeometryRoutingModule,\n    MatButtonModule,\n    MatCardModule,\n    IgoFormModule,\n    IgoGeometryModule,\n    IgoMapModule\n  ],\n  exports: [AppGeometryComponent]\n})\nexport class AppGeometryModule {}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  VectorLayer,\n  FeatureStore,\n  FeatureStoreLoadingStrategy,\n  FeatureStoreSelectionStrategy,\n  FeatureMotion\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-feature',\n  templateUrl: './feature.component.html',\n  styleUrls: ['./feature.component.scss']\n})\nexport class AppFeatureComponent implements OnInit, OnDestroy {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 6\n  };\n\n  public tableTemplate = {\n    selection: true,\n    selectMany: true,\n    sort: true,\n    columns: [\n      {\n        name: 'properties.id',\n        title: 'ID'\n      },\n      {\n        name: 'properties.name',\n        title: 'Name'\n      },\n      {\n        name: 'properties.description',\n        title: 'Description'\n      }\n    ]\n  };\n\n  public store = new FeatureStore([], { map: this.map });\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {}\n\n  ngOnInit() {\n    const loadingStrategy = new FeatureStoreLoadingStrategy({});\n    this.store.addStrategy(loadingStrategy);\n\n    const selectionStrategy = new FeatureStoreSelectionStrategy({\n      map: this.map,\n      motion: FeatureMotion.Default\n    });\n    this.store.addStrategy(selectionStrategy);\n\n    this.store.load([\n      {\n        meta: { id: 1 },\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: [-72, 47.8]\n        },\n        projection: 'EPSG:4326',\n        properties: {\n          id: 1,\n          name: 'Name 1',\n          description: 'Description 1'\n        }\n      },\n      {\n        meta: { id: 2 },\n        type: 'Feature',\n        geometry: {\n          type: 'LineString',\n          coordinates: [[-72, 47.8], [-73.5, 47.4], [-72.4, 48.6]]\n        },\n        projection: 'EPSG:4326',\n        properties: {\n          id: 2,\n          name: 'Name 2',\n          description: 'Description 2'\n        }\n      },\n      {\n        meta: { id: 3 },\n        type: 'Feature',\n        geometry: {\n          type: 'Polygon',\n          coordinates: [[[-71, 46.8], [-73, 47], [-71.2, 46.6]]]\n        },\n        projection: 'EPSG:4326',\n        properties: {\n          id: 3,\n          name: 'Name 3',\n          description: 'Description 3'\n        }\n      }\n    ]);\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'MVT test',\n        visible: true,\n        sourceOptions: {\n          type: 'mvt',\n          url:\n            'https://ahocevar.com/geoserver/gwc/service/tms/1.0.0/ne:ne_10m_admin_0_countries@EPSG:900913@pbf/{z}/{x}/{-y}.pbf',\n          queryable: true\n        },\n        mapboxStyle: {\n          url: 'assets/mapboxStyleExample-vectortile.json',\n          source: 'ahocevar'\n        }\n      } as any)\n      .subscribe(l => this.map.addLayer(l));\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'vector'\n      })\n      .subscribe(dataSource => {\n        const layer = this.layerService.createLayer({\n          title: 'Vector Layer',\n          source: dataSource,\n          animation: {\n            duration: 2000\n          },\n          mapboxStyle: {\n            url: 'assets/mapboxStyleExample-feature.json',\n            source: 'source_nameX'\n          }\n        }) as VectorLayer;\n        this.map.addLayer(layer);\n        this.store.bindLayer(layer);\n        loadingStrategy.activate();\n        selectionStrategy.activate();\n      });\n  }\n\n  ngOnDestroy() {\n    this.store.destroy();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule, IgoEntityTableModule } from '@igo2/common';\nimport { IgoMapModule, IgoFeatureModule } from '@igo2/geo';\n\nimport { AppFeatureComponent } from './feature.component';\nimport { AppFeatureRoutingModule } from './feature-routing.module';\n\n@NgModule({\n  declarations: [AppFeatureComponent],\n  imports: [\n    AppFeatureRoutingModule,\n    CommonModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoEntityTableModule,\n    IgoMapModule,\n    IgoFeatureModule\n  ],\n  exports: [AppFeatureComponent]\n})\nexport class AppFeatureModule {}\n","import { Component } from '@angular/core';\n\nimport { LanguageService, MediaService } from '@igo2/core';\nimport { IgoMap, DataSourceService, LayerService, WFSDataSourceOptions, VectorLayerOptions, WFSDataSource } from '@igo2/geo';\nimport { transform } from 'ol/proj';\n\n@Component({\n  selector: 'app-hover',\n  templateUrl: './hover.component.html',\n  styleUrls: ['./hover.component.scss']\n})\nexport class AppHoverComponent {\n  public selected;\n  public pointerCoord;\n  public pointerCoordDelay: number = 0;\n  public pointerHoverFeatureDelay: number = 0;\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      },\n      scaleLine: true\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 8,\n    projection: 'EPSG:3857'\n  };\n\n\n  get media() {\n    return this.mediaService.getMedia();\n  }\n\n  get isTouchScreen() {\n    return this.mediaService.isTouchScreen();\n  }\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService,\n    private mediaService: MediaService\n  ) {\n\n    this.dataSourceService\n    .createAsyncDataSource({\n      type: 'wmts',\n      url: 'https://geoegl.msp.gouv.qc.ca/carto/wmts/1.0.0/wmts',\n      layer: 'carte_gouv_qc_public',\n      matrixSet: 'EPSG_3857',\n      version: '1.3.0'\n    })\n    .subscribe(dataSource => {\n      this.map.addLayer(\n        this.layerService.createLayer({\n          title: 'Quebec',\n          visible: true,\n          baseLayer: true,\n          source: dataSource\n        })\n      );\n    });\n\n    interface WFSDataOptions\n      extends WFSDataSourceOptions {}\n\n    const wfsDatasourcePolygon: WFSDataOptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'adn_bassin_n1_public_v',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '3.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'shp'\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDatasourcePolygon)\n      .subscribe((dataSource: WFSDataSource) => {\n        const layer: VectorLayerOptions = {\n          title: 'WFS (polygon)',\n          visible: true,\n          source: dataSource\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n\n    const wfsDatasourcePoint: WFSDataOptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'CASERNE',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '3.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'shp'\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDatasourcePoint)\n      .subscribe((dataSource: WFSDataSource) => {\n        const layer: VectorLayerOptions = {\n          title: 'WFS (point)',\n          visible: true,\n          source: dataSource,\n          styleByAttribute: {\n            attribute: 'en_caserne',\n            data: ['true', 'false'],\n            stroke: ['red', 'blue'],\n            fill: ['#ffffff', '#ffffff'],\n            radius: [7, 7],\n            width: [2, 2],\n            hoverStyle: {\n                label: {\n                  attribute: 'Caserne: ${nom_service_incendie} \\n Mun: ${ville}',\n                  style: {\n                    textAlign: 'left',\n                    textBaseline: 'bottom',\n                    font: '12px Calibri,sans-serif',\n                    fill: { color: '#000' },\n                    backgroundFill: { color: 'rgba(255, 255, 255, 0.5)' },\n                    backgroundStroke: { color: 'rgba(200, 200, 200, 0.75)', width: 2 },\n                    stroke: { color: '#fff', width: 3 },\n                    overflow: true,\n                    offsetX: 10,\n                    offsetY: -10,\n                    padding: [2.5, 2.5, 2.5, 2.5]\n                  }\n                },\n                baseStyle: {\n                  circle: {\n                    stroke: {\n                      color: 'orange',\n                      width: 5\n                    },\n                    width: [5],\n                    radius: 15\n                  }\n                }\n            }\n          }\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMapModule } from '@igo2/geo';\n\nimport { AppHoverComponent } from './hover.component';\nimport { AppHoverRoutingModule } from './hover-routing.module';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  declarations: [AppHoverComponent],\n  imports: [\n    CommonModule,\n    AppHoverRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoMapModule\n  ],\n  exports: [AppHoverComponent]\n})\nexport class AppHoverModule {}\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  FeatureStore,\n  FeatureWithMeasure\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-measure',\n  templateUrl: './measure.component.html',\n  styleUrls: ['./measure.component.scss']\n})\nexport class AppMeasureComponent {\n\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      },\n      scaleLine: true\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 6,\n    projection: 'EPSG:3857'\n  };\n\n  public store = new FeatureStore<FeatureWithMeasure>([], {map: this.map});\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMapModule, IgoMeasureModule } from '@igo2/geo';\n\nimport { AppMeasureComponent } from './measure.component';\nimport { AppMeasureRoutingModule } from './measure-routing.module';\n\n@NgModule({\n  declarations: [AppMeasureComponent],\n  imports: [\n    AppMeasureRoutingModule,\n    MatCardModule,\n    IgoMapModule,\n    IgoMeasureModule\n  ],\n  exports: [AppMeasureComponent]\n})\nexport class AppMeasureModule {}\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  FeatureStore,\n  FeatureWithDraw\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-draw',\n  templateUrl: './draw.component.html',\n  styleUrls: ['./draw.component.scss']\n})\nexport class AppDrawComponent {\n\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      },\n      scaleLine: true\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 6,\n    projection: 'EPSG:3857'\n  };\n\n  public store = new FeatureStore<FeatureWithDraw>([], {map: this.map});\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMapModule, IgoDrawModule } from '@igo2/geo';\n\nimport { AppDrawComponent } from './draw.component';\nimport { AppDrawRoutingModule } from './draw-routing.module';\n\n@NgModule({\n  declarations: [AppDrawComponent],\n  imports: [\n    AppDrawRoutingModule,\n    MatCardModule,\n    IgoMapModule,\n    IgoDrawModule\n  ],\n  exports: [AppDrawComponent]\n})\nexport class AppDrawModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppFeatureComponent } from './feature.component';\n\nconst routes: Routes = [\n  {\n    path: 'feature',\n    component: AppFeatureComponent\n  }\n];\n\nexport const AppFeatureRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Feature</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geom/feature\">code of this example</a>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-entity-table\n    [store]=\"store\"\n    [template]=\"tableTemplate\">\n  </igo-entity-table>\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\nimport { AppHoverComponent } from './hover.component';\n\nconst routes: Routes = [\n  {\n    path: 'hover',\n    component: AppHoverComponent\n  }\n];\n\nexport const AppHoverRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Hover</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/hover\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\"\n  igoHoverFeature\n  [igoHoverFeatureDelay]=\"pointerHoverFeatureDelay\"\n  [igoHoverFeatureEnabled]=\"true\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n    <igo-geolocate-button [map]=\"map\" color=\"primary\"></igo-geolocate-button>\n    <igo-rotation-button [map]=\"map\" [showIfNoRotation]=\"true\" color=\"primary\"></igo-rotation-button>\n  </igo-map-browser>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppMeasureComponent } from './measure.component';\n\nconst routes: Routes = [\n  {\n    path: 'measure',\n    component: AppMeasureComponent\n  }\n];\n\nexport const AppMeasureRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Simple Map</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/measure\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-measurer [store]=\"store\" [map]=\"map\"></igo-measurer>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\nimport { AppDrawComponent } from './draw.component';\n\nconst routes: Routes = [\n  {\n    path: 'draw',\n    component: AppDrawComponent\n  }\n];\n\nexport const AppDrawRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Simple Map</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/draw\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-draw [store]=\"store\" [map]=\"map\"></igo-draw>\n\n</mat-card>\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Query</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/query\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser\n    [map]=\"map\"\n    [view]=\"view\"\n    igoOverlay\n    igoQuery\n    [queryFeatures]=\"true\"\n    (query)=\"handleQueryResults($event)\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Details\">\n    <ng-container *ngIf=\"feature$ | async as feature\">\n      <h1>Query Title : <span style=\"background-color: #e0e0e0;\">{{getTitle(feature)}}</span></h1>\n      <igo-feature-details [feature]=\"feature\"></igo-feature-details>\n    </ng-container>\n  </igo-panel>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppQueryComponent } from './query.component';\n\nconst routes: Routes = [\n  {\n    path: 'query',\n    component: AppQueryComponent\n  }\n];\n\nexport const AppQueryRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport olFeature from 'ol/Feature';\nimport olPoint from 'ol/geom/Point';\nimport olPolygon from 'ol/geom/Polygon';\nimport olLineString from 'ol/geom/LineString';\nimport * as olproj from 'ol/proj';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  FeatureDataSource,\n  DataSourceService,\n  LayerService,\n  OverlayService,\n  Feature,\n  QueryableDataSourceOptions,\n  QueryFormat,\n  QueryHtmlTarget,\n  SearchResult,\n  FeatureMotion\n} from '@igo2/geo';\n\nimport { getEntityTitle, EntityStore } from '@igo2/common';\n\n@Component({\n  selector: 'app-query',\n  templateUrl: './query.component.html',\n  styleUrls: ['./query.component.scss']\n})\nexport class AppQueryComponent {\n  public feature$ = new BehaviorSubject<Feature>(undefined);\n\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 6\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService,\n    private overlayService: OverlayService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'wms',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n        queryable: true,\n        queryTitle: 'num_rts',\n        params: {\n          layers: 'bgr_v_sous_route_res_sup_act',\n          version: '1.3.0'\n        }\n      } as QueryableDataSourceOptions)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'WMS',\n            source: dataSource,\n            sourceOptions: dataSource.options\n          })\n        );\n      });\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'wms',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n        queryable: true,\n        queryFormat: QueryFormat.HTMLGML2,\n        queryHtmlTarget: QueryHtmlTarget.IFRAME,\n        params: {\n          layers: 'bgr_v_sous_route_res_sup_act',\n          version: '1.3.0'\n        }\n      } as QueryableDataSourceOptions)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'WMS html with a pre call in GML',\n            source: dataSource,\n            sourceOptions: dataSource.options\n          })\n        );\n      });\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'vector',\n        queryable: true,\n        queryTitle: 'So beautiful ${name}',\n        sourceFields: [\n          { name: 'name', alias: 'Alias name' },\n          { name: 'description', alias: 'Alias description' }\n        ]\n      } as QueryableDataSourceOptions)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Vector Layer',\n            source: dataSource,\n            sourceOptions: dataSource.options\n          })\n        );\n        this.addFeatures(dataSource as FeatureDataSource);\n      });\n  }\n\n  addFeatures(dataSource: FeatureDataSource) {\n    const feature1 = new olFeature({\n      name: 'feature1',\n      geometry: new olLineString([\n        olproj.transform([-72, 47.8], 'EPSG:4326', 'EPSG:3857'),\n        olproj.transform([-73.5, 47.4], 'EPSG:4326', 'EPSG:3857'),\n        olproj.transform([-72.4, 48.6], 'EPSG:4326', 'EPSG:3857')\n      ]),\n    });\n\n    const feature2 = new olFeature({\n      name: 'feature2',\n      geometry: new olPoint(\n        olproj.transform([-73, 46.6], 'EPSG:4326', 'EPSG:3857')\n      ),\n    });\n\n    const feature3 = new olFeature({\n      name: 'feature3',\n      geometry: new olPolygon([\n        [\n          olproj.transform([-71, 46.8], 'EPSG:4326', 'EPSG:3857'),\n          olproj.transform([-73, 47], 'EPSG:4326', 'EPSG:3857'),\n          olproj.transform([-71.2, 46.6], 'EPSG:4326', 'EPSG:3857')\n        ]\n      ]),\n    });\n\n    dataSource.ol.addFeatures([feature1, feature2, feature3]);\n  }\n\n  handleQueryResults(results) {\n    const features: Feature[] = results.features;\n    let feature: Feature;\n    if (features.length) {\n      feature = features[0];\n    }\n    this.feature$.next(feature);\n\n    this.map.queryResultsOverlay.setFeatures([feature], FeatureMotion.None);\n  }\n\n  getTitle(result: SearchResult) {\n    return getEntityTitle(result);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule } from '@igo2/common';\nimport {\n  IgoMapModule,\n  IgoOverlayModule,\n  IgoQueryModule,\n  IgoFeatureModule\n} from '@igo2/geo';\n\nimport { AppQueryComponent } from './query.component';\nimport { AppQueryRoutingModule } from './query-routing.module';\n\n@NgModule({\n  declarations: [AppQueryComponent],\n  imports: [\n    AppQueryRoutingModule,\n    CommonModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoOverlayModule,\n    IgoQueryModule,\n    IgoFeatureModule\n  ],\n  exports: [AppQueryComponent]\n})\nexport class AppQueryModule {}\n","import { Component, OnInit } from '@angular/core';\n\nimport { LanguageService, ConfigService, StorageService } from '@igo2/core';\nimport { IgoMap, LayerService, Catalog, CatalogItem, CatalogService } from '@igo2/geo';\nimport { EntityStore } from '@igo2/common';\n\n@Component({\n  selector: 'app-catalog',\n  templateUrl: './catalog.component.html',\n  styleUrls: ['./catalog.component.scss']\n})\nexport class AppCatalogComponent implements OnInit {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  public catalogStore = new EntityStore<Catalog>([]);\n\n  public catalogItemStore = new EntityStore<CatalogItem>([]);\n\n  constructor(\n    private configService: ConfigService,\n    private languageService: LanguageService,\n    private layerService: LayerService,\n    private catalogService: CatalogService,\n    private storageService: StorageService\n  ) {}\n\n  /**\n   * @internal\n   */\n  ngOnInit() {\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        sourceOptions: {\n          type: 'osm'\n        }\n      })\n      .subscribe(layer => this.map.addLayer(layer));\n\n    this.loadCatalogs();\n  }\n\n  /**\n   * When the selected catalog changes, toggle the the CatalogBrowser tool.\n   * @internal\n   * @param event Select event\n   */\n  onCatalogSelectChange(event: {selected: boolean; catalog: Catalog}) {\n    this.loadCatalogItems(event.catalog);\n  }\n\n  /**\n   * Get all the available catalogs from the CatalogService and\n   * load them into the store.\n   */\n  private loadCatalogs() {\n    this.catalogService.loadCatalogs()\n      .subscribe((catalogs: Catalog[]) => {\n        this.catalogStore.clear();\n        this.catalogStore.load(catalogs.concat((this.storageService.get('addedCatalogs') || []) as Catalog[]));\n      });\n  }\n\n  /**\n   * Get the selected catalog's items from the CatalogService and\n   * load them into the store.\n   * @param catalog Selected catalog\n   */\n  private loadCatalogItems(catalog: Catalog) {\n    this.catalogService.loadCatalogItems(catalog)\n      .subscribe((items: CatalogItem[]) => {\n        this.catalogItemStore.clear();\n        this.catalogItemStore.load(items);\n      });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoConfigModule, provideConfigOptions } from '@igo2/core';\nimport { IgoPanelModule } from '@igo2/common';\nimport { IgoMapModule, IgoCatalogModule } from '@igo2/geo';\n\nimport { environment } from '../../../environments/environment';\nimport { AppCatalogComponent } from './catalog.component';\nimport { AppCatalogRoutingModule } from './catalog-routing.module';\n\n@NgModule({\n  declarations: [AppCatalogComponent],\n  imports: [\n    CommonModule,\n    AppCatalogRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    MatTooltipModule,\n    IgoConfigModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoCatalogModule\n  ],\n  exports: [AppCatalogComponent],\n  providers: [\n    provideConfigOptions({\n      default: environment.igo\n    })\n  ]\n})\nexport class AppCatalogModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppCatalogComponent } from './catalog.component';\n\nconst routes: Routes = [\n  {\n    path: 'catalog',\n    component: AppCatalogComponent\n  }\n];\n\nexport const AppCatalogRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Catalog</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: ConfigService, LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/catalog\">code of this example</a><br>\n    See catalog section of the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/environments\"> environment config</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Catalog Library\">\n    <igo-catalog-library\n      [store]=\"catalogStore\"\n      (catalogSelectChange)=\"onCatalogSelectChange($event)\">\n    </igo-catalog-library>\n  </igo-panel>\n\n  <igo-panel title=\"Catalog Browser\">\n    <igo-catalog-browser\n      [store]=\"catalogItemStore\"\n      [map]=\"map\">\n    </igo-catalog-browser>\n  </igo-panel>\n\n</mat-card>\n","import { ɵɵinject, ɵɵdefineInjectable, ɵsetClassMetadata, Injectable, Optional, ɵɵgetCurrentView, ɵɵelementStart, ɵɵlistener, ɵɵrestoreView, ɵɵreference, ɵɵpipe, ɵɵtext, ɵɵelementEnd, ɵɵelement, ɵɵnextContext, ɵɵadvance, ɵɵproperty, ɵɵpipeBind1, ɵɵtextInterpolate1, ɵɵstyleProp, ɵɵtextInterpolate, ɵɵpipeBind2, ɵɵpureFunction1, ɵɵtemplate, ɵɵdirectiveInject, ɵɵdefineComponent, Component, Input, ɵɵdefineNgModule, ɵɵdefineInjector, ɵɵsetNgModuleScope, NgModule, ɵɵdefineDirective, Directive, ɵɵpropertyInterpolate, ɵɵsanitizeUrl, EventEmitter, ChangeDetectionStrategy, Output, ɵɵelementContainerStart, ɵɵelementContainerEnd, ChangeDetectorRef, Self, HostListener, ɵɵtextInterpolate2, ɵɵpureFunction0 } from '@angular/core';\nimport { MatFormField, MatLabel, MatFormFieldModule, MatSuffix, MatError } from '@angular/material/form-field';\nimport { MatInput, MatInputModule } from '@angular/material/input';\nimport { _MatMenu, MatMenuItem, MatMenuTrigger, MatMenuModule } from '@angular/material/menu';\nimport { NgIf, NgForOf, AsyncPipe, CommonModule, NgClass } from '@angular/common';\nimport { MatButton, MatButtonModule } from '@angular/material/button';\nimport { MatButtonToggleGroup, MatButtonToggle, MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatOption, MatOptionModule, MatLine } from '@angular/material/core';\nimport { MatDivider, MatDividerModule } from '@angular/material/divider';\nimport { MatSelect, MatSelectModule } from '@angular/material/select';\nimport { MatCheckboxModule, MatCheckbox } from '@angular/material/checkbox';\nimport { MatTabsModule, MatTabGroup, MatTab } from '@angular/material/tabs';\nimport { MatTooltipModule, MatTooltip } from '@angular/material/tooltip';\nimport { LanguageService, ConfigService, MessageService, RouteService, IgoLanguageModule, MediaService, StorageService } from '@igo2/core';\nimport { Validators, FormBuilder, ɵangular_packages_forms_forms_y, NgControlStatusGroup, NgForm, FormGroupDirective, DefaultValueAccessor, NgControlStatus, FormControlName, FormsModule, ReactiveFormsModule, RequiredValidator, MaxLengthValidator, NgModel, FormControl, FormControlDirective } from '@angular/forms';\nimport { BehaviorSubject, Subject, of, Observable, merge, ReplaySubject, EMPTY, timer, combineLatest } from 'rxjs';\nimport { skip, first, catchError, tap, map, mergeMap, debounceTime, take, filter, buffer, debounce } from 'rxjs/operators';\nimport { Stroke, Fill, Style, Circle } from 'ol/style';\nimport { FeatureDataSource, VectorLayer, ClusterDataSource, MapBrowserComponent, LayerService, StyleListService, StyleService, MapService, moveToOlFeatures, FeatureMotion, FeatureDetailsComponent, IgoFeatureModule } from '@igo2/geo';\nimport { HttpClient } from '@angular/common/http';\nimport olPoint from 'ol/geom/Point';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport Cluster from 'ol/source/Cluster';\nimport { ObjectUtils, uuid, downloadContent, Clipboard } from '@igo2/utils';\nimport { AuthService, IgoAuthModule } from '@igo2/auth';\nimport { SpinnerComponent, IgoSpinnerModule, StopPropagationDirective, CollapseDirective, ActionStore, ActionbarMode, ListComponent, ActionbarComponent, CollapsibleComponent, ListItemDirective, KeyValuePipe, ConfirmDialogService, IgoConfirmDialogModule, IgoStopPropagationModule, IgoListModule, IgoKeyValueModule, IgoCollapsibleModule, IgoActionbarModule, getEntityTitle, FlexibleComponent, PanelComponent, IgoPanelModule, IgoFlexibleModule } from '@igo2/common';\nimport { TranslatePipe } from '@ngx-translate/core';\nimport { MatAutocompleteTrigger, MatAutocomplete, MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatDialogRef, MatDialogTitle, MatDialogContent, MatDialogActions, MatDialog, MatDialogModule } from '@angular/material/dialog';\nimport { MatIcon, MatIconModule } from '@angular/material/icon';\nimport { MatListItem, MatListAvatarCssMatStyler, MatListModule } from '@angular/material/list';\nimport { MatRadioGroup, MatRadioButton, MatRadioModule } from '@angular/material/radio';\nimport { fromLonLat } from 'ol/proj';\nimport { easeOut } from 'ol/easing';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { MatSidenav, MatSidenavModule } from '@angular/material/sidenav';\nimport { Title } from '@angular/platform-browser';\n\nclass ExportError extends Error {\n}\nclass ExportInvalidFileError extends ExportError {\n    constructor() {\n        super('Invalid context');\n        Object.setPrototypeOf(this, ExportInvalidFileError.prototype);\n    }\n}\nclass ExportNothingToExportError extends ExportError {\n    constructor() {\n        super('Nothing to export');\n        Object.setPrototypeOf(this, ExportNothingToExportError.prototype);\n    }\n}\n\nfunction handleFileExportError(error, messageService, languageService) {\n    if (error instanceof ExportNothingToExportError) {\n        this.handleNothingToExportError(messageService, languageService);\n        return;\n    }\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.export.failed.title');\n    const message = translate.instant('igo.context.contextImportExport.export.failed.text');\n    messageService.error(message, title);\n}\nfunction handleFileExportSuccess(messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.export.success.title');\n    const message = translate.instant('igo.context.contextImportExport.export.success.text');\n    messageService.success(message, title);\n}\nfunction handleNothingToExportError(messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.export.nothing.title');\n    const message = translate.instant('igo.context.contextImportExport.export.nothing.text');\n    messageService.error(message, title);\n}\n\nfunction handleFileImportSuccess(file, context, messageService, languageService, contextService) {\n    if (Object.keys(context).length <= 0) {\n        handleNothingToImportError(file, messageService, languageService);\n        return;\n    }\n    const contextTitle = computeLayerTitleFromFile(file);\n    addContextToContextList(context, contextTitle, contextService);\n    const translate = languageService.translate;\n    const messageTitle = translate.instant('igo.context.contextImportExport.import.success.title');\n    const message = translate.instant('igo.context.contextImportExport.import.success.text', {\n        value: contextTitle\n    });\n    messageService.success(message, messageTitle);\n}\nfunction handleFileImportError(file, error, messageService, languageService, sizeMb) {\n    sizeMb = sizeMb ? sizeMb : 30;\n    const errMapping = {\n        'Invalid file': handleInvalidFileImportError,\n        'File is too large': handleSizeFileImportError,\n        'Failed to read file': handleUnreadbleFileImportError\n    };\n    errMapping[error.message](file, error, messageService, languageService, sizeMb);\n}\nfunction handleInvalidFileImportError(file, error, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.import.invalid.title');\n    const message = translate.instant('igo.context.contextImportExport.import.invalid.text', {\n        value: file.name,\n        mimeType: file.type\n    });\n    messageService.error(message, title);\n}\nfunction handleSizeFileImportError(file, error, messageService, languageService, sizeMb) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.import.tooLarge.title');\n    const message = translate.instant('igo.context.contextImportExport.import.tooLarge.text', {\n        value: file.name,\n        size: sizeMb\n    });\n    messageService.error(message, title);\n}\nfunction handleUnreadbleFileImportError(file, error, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.import.unreadable.title');\n    const message = translate.instant('igo.context.contextImportExport.import.unreadable.text', {\n        value: file.name\n    });\n    messageService.error(message, title);\n}\nfunction handleNothingToImportError(file, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.import.empty.title');\n    const message = translate.instant('igo.context.contextImportExport.import.empty.text', {\n        value: file.name\n    });\n    messageService.error(message, title);\n}\nfunction addContextToContextList(context, contextTitle, contextService) {\n    context.title = contextTitle;\n    context.imported = true;\n    contextService.contexts$.value.ours.unshift(context);\n    contextService.contexts$.next(contextService.contexts$.value);\n    contextService.importedContext.unshift(context);\n    contextService.loadContext(context.uri);\n}\nfunction getFileExtension(file) {\n    return file.name.split('.').pop().toLowerCase();\n}\nfunction computeLayerTitleFromFile(file) {\n    return file.name.substr(0, file.name.lastIndexOf('.'));\n}\nfunction addImportedFeaturesToMap(olFeatures, map, layerTitle) {\n    const r = Math.floor(Math.random() * 255);\n    const g = Math.floor(Math.random() * 255);\n    const b = Math.floor(Math.random() * 255);\n    const stroke = new Stroke({\n        color: [r, g, b, 1],\n        width: 2\n    });\n    const fill = new Fill({\n        color: [r, g, b, 0.4]\n    });\n    const sourceOptions = {\n        type: 'vector',\n        queryable: true\n    };\n    const source = new FeatureDataSource(sourceOptions);\n    source.ol.addFeatures(olFeatures);\n    const layer = new VectorLayer({\n        title: layerTitle,\n        source,\n        style: new Style({\n            stroke,\n            fill,\n            image: new Circle({\n                radius: 5,\n                stroke,\n                fill\n            })\n        })\n    });\n    map.addLayer(layer);\n    return layer;\n}\nfunction addImportedFeaturesStyledToMap(olFeatures, map, layerTitle, styleListService, styleService) {\n    let style;\n    let distance;\n    if (styleListService.getStyleList(layerTitle.toString() + '.styleByAttribute')) {\n        const styleByAttribute = styleListService.getStyleList(layerTitle.toString() + '.styleByAttribute');\n        style = (feature) => {\n            return styleService.createStyleByAttribute(feature, styleByAttribute);\n        };\n    }\n    else if (styleListService.getStyleList(layerTitle.toString() + '.clusterStyle')) {\n        const clusterParam = styleListService.getStyleList(layerTitle.toString() + '.clusterParam');\n        distance = styleListService.getStyleList(layerTitle.toString() + '.distance');\n        const baseStyle = styleService.createStyle(styleListService.getStyleList(layerTitle.toString() + '.clusterStyle'));\n        style = (feature) => {\n            return styleService.createClusterStyle(feature, clusterParam, baseStyle);\n        };\n    }\n    else if (styleListService.getStyleList(layerTitle.toString() + '.style')) {\n        style = styleService.createStyle(styleListService.getStyleList(layerTitle.toString() + '.style'));\n    }\n    else {\n        style = styleService.createStyle(styleListService.getStyleList('default.style'));\n    }\n    let source;\n    if (styleListService.getStyleList(layerTitle.toString() + '.clusterStyle')) {\n        const sourceOptions = {\n            distance,\n            type: 'cluster',\n            queryable: true\n        };\n        source = new ClusterDataSource(sourceOptions);\n        source.ol.source.addFeatures(olFeatures);\n    }\n    else {\n        const sourceOptions = {\n            type: 'vector',\n            queryable: true\n        };\n        source = new FeatureDataSource(sourceOptions);\n        source.ol.addFeatures(olFeatures);\n    }\n    const layer = new VectorLayer({\n        title: layerTitle,\n        source,\n        style\n    });\n    map.addLayer(layer);\n    return layer;\n}\n\nvar TypePermission;\n(function (TypePermission) {\n    TypePermission[TypePermission[\"null\"] = 0] = \"null\";\n    TypePermission[TypePermission[\"read\"] = 1] = \"read\";\n    TypePermission[TypePermission[\"write\"] = 2] = \"write\";\n})(TypePermission || (TypePermission = {}));\nvar Scope;\n(function (Scope) {\n    Scope[Scope[\"public\"] = 0] = \"public\";\n    Scope[Scope[\"protected\"] = 1] = \"protected\";\n    Scope[Scope[\"private\"] = 2] = \"private\";\n})(Scope || (Scope = {}));\n\nclass ContextService {\n    constructor(http, authService, languageService, config, messageService, route) {\n        this.http = http;\n        this.authService = authService;\n        this.languageService = languageService;\n        this.config = config;\n        this.messageService = messageService;\n        this.route = route;\n        this.context$ = new BehaviorSubject(undefined);\n        this.contexts$ = new BehaviorSubject({ ours: [] });\n        this.defaultContextId$ = new BehaviorSubject(undefined);\n        this.editedContext$ = new BehaviorSubject(undefined);\n        this.importedContext = [];\n        this.toolsChanged$ = new Subject();\n        this.mapViewFromRoute = {};\n        this.options = Object.assign({\n            basePath: 'contexts',\n            contextListFile: '_contexts.json',\n            defaultContextUri: '_default'\n        }, this.config.getConfig('context'));\n        this.baseUrl = this.options.url;\n        this.readParamsFromRoute();\n        if (this.authService.hasAuthService) {\n            this.authService.logged$.subscribe((logged) => {\n                if (logged) {\n                    this.contexts$.pipe(skip(1), first()).subscribe((c) => {\n                        this.handleContextsChange();\n                    });\n                    this.loadContexts();\n                }\n            });\n        }\n        else {\n            this.loadContexts();\n            this.handleContextsChange(false);\n        }\n    }\n    get defaultContextUri() {\n        return this._defaultContextUri || this.options.defaultContextUri;\n    }\n    set defaultContextUri(uri) {\n        this._defaultContextUri = uri;\n    }\n    get(permissions, hidden) {\n        let url = this.baseUrl + '/contexts';\n        if (permissions && this.authService.authenticated) {\n            url += '?permission=' + permissions.join();\n            if (hidden) {\n                url += '&hidden=true';\n            }\n        }\n        return this.http.get(url);\n    }\n    getById(id) {\n        const url = this.baseUrl + '/contexts/' + id;\n        return this.http.get(url);\n    }\n    getDetails(id) {\n        const url = `${this.baseUrl}/contexts/${id}/details`;\n        return this.http.get(url).pipe(catchError((res) => {\n            return this.handleError(res, id);\n        }));\n    }\n    getDefault() {\n        const url = this.baseUrl + '/contexts/default';\n        return this.http.get(url).pipe(tap((context) => {\n            this.defaultContextId$.next(context.id);\n        }));\n    }\n    getProfilByUser() {\n        if (this.baseUrl) {\n            const url = this.baseUrl + '/profils?';\n            return this.http.get(url);\n        }\n        return of([]);\n    }\n    setDefault(id) {\n        const url = this.baseUrl + '/contexts/default';\n        return this.http.post(url, { defaultContextId: id });\n    }\n    hideContext(id) {\n        const url = this.baseUrl + '/contexts/' + id + '/hide';\n        return this.http.post(url, {});\n    }\n    showContext(id) {\n        const url = this.baseUrl + '/contexts/' + id + '/show';\n        return this.http.post(url, {});\n    }\n    delete(id, imported = false) {\n        const contexts = { ours: [] };\n        Object.keys(this.contexts$.value).forEach((key) => (contexts[key] = this.contexts$.value[key].filter((c) => c.id !== id)));\n        if (imported) {\n            this.importedContext = this.importedContext.filter((c) => c.id !== id);\n            return of(this.contexts$.next(contexts));\n        }\n        const url = this.baseUrl + '/contexts/' + id;\n        return this.http.delete(url).pipe(tap((res) => {\n            this.contexts$.next(contexts);\n        }));\n    }\n    create(context) {\n        const url = this.baseUrl + '/contexts';\n        return this.http.post(url, context).pipe(map((contextCreated) => {\n            if (this.authService.authenticated) {\n                contextCreated.permission = TypePermission[TypePermission.write];\n            }\n            else {\n                contextCreated.permission = TypePermission[TypePermission.read];\n            }\n            this.contexts$.value.ours.unshift(contextCreated);\n            this.contexts$.next(this.contexts$.value);\n            return contextCreated;\n        }));\n    }\n    clone(id, properties = {}) {\n        const url = this.baseUrl + '/contexts/' + id + '/clone';\n        return this.http.post(url, properties).pipe(map((contextCloned) => {\n            contextCloned.permission = TypePermission[TypePermission.write];\n            this.contexts$.value.ours.unshift(contextCloned);\n            this.contexts$.next(this.contexts$.value);\n            return contextCloned;\n        }));\n    }\n    update(id, context) {\n        const url = this.baseUrl + '/contexts/' + id;\n        return this.http.patch(url, context);\n    }\n    // =================================================================\n    addToolAssociation(contextId, toolId) {\n        const url = `${this.baseUrl}/contexts/${contextId}/tools`;\n        const association = {\n            toolId\n        };\n        return this.http.post(url, association);\n    }\n    deleteToolAssociation(contextId, toolId) {\n        const url = `${this.baseUrl}/contexts/${contextId}/tools/${toolId}`;\n        return this.http.delete(url);\n    }\n    getPermissions(id) {\n        const url = this.baseUrl + '/contexts/' + id + '/permissions';\n        return this.http.get(url);\n    }\n    addPermissionAssociation(contextId, profil, type) {\n        const url = `${this.baseUrl}/contexts/${contextId}/permissions`;\n        const association = {\n            profil,\n            typePermission: type\n        };\n        return this.http.post(url, association).pipe(catchError((res) => {\n            return [this.handleError(res, undefined, true)];\n        }));\n    }\n    deletePermissionAssociation(contextId, permissionId) {\n        const url = `${this.baseUrl}/contexts/${contextId}/permissions/${permissionId}`;\n        return this.http.delete(url);\n    }\n    // ======================================================================\n    getLocalContexts() {\n        const url = this.getPath(this.options.contextListFile);\n        return this.http.get(url).pipe(map((res) => {\n            return { ours: res };\n        }));\n    }\n    getLocalContext(uri) {\n        const url = this.getPath(`${uri}.json`);\n        return this.http.get(url).pipe(mergeMap((res) => {\n            if (!res.base) {\n                return of(res);\n            }\n            const urlBase = this.getPath(`${res.base}.json`);\n            return this.http.get(urlBase).pipe(map((resBase) => {\n                const resMerge = res;\n                resMerge.map = ObjectUtils.mergeDeep(resBase.map, res.map);\n                resMerge.layers = (resBase.layers || [])\n                    .concat(res.layers || [])\n                    .reverse()\n                    .filter((l, index, self) => !l.id || self.findIndex((l2) => l2.id === l.id) === index)\n                    .reverse();\n                resMerge.toolbar = res.toolbar || resBase.toolbar;\n                resMerge.message = res.message || resBase.message;\n                resMerge.messages = res.messages || resBase.messages;\n                resMerge.tools = (res.tools || [])\n                    .concat(resBase.tools || [])\n                    .filter((t, index, self) => self.findIndex((t2) => t2.name === t.name) === index);\n                return resMerge;\n            }), catchError((err) => {\n                return this.handleError(err, uri);\n            }));\n        }), catchError((err2) => {\n            return this.handleError(err2, uri);\n        }));\n    }\n    loadContexts(permissions, hidden) {\n        let request;\n        if (this.baseUrl) {\n            request = this.get(permissions, hidden);\n        }\n        else {\n            request = this.getLocalContexts();\n        }\n        request.subscribe((contexts) => {\n            contexts.ours = this.importedContext.concat(contexts.ours);\n            this.contexts$.next(contexts);\n        });\n    }\n    loadDefaultContext() {\n        const loadFct = (direct = false) => {\n            if (!direct && this.baseUrl && this.authService.authenticated) {\n                this.getDefault().subscribe((_context) => {\n                    this.defaultContextUri = _context.uri;\n                    this.addContextToList(_context);\n                    this.setContext(_context);\n                }, () => {\n                    this.defaultContextId$.next(undefined);\n                    this.loadContext(this.defaultContextUri);\n                });\n            }\n            else {\n                this.loadContext(this.defaultContextUri);\n            }\n        };\n        if (this.route && this.route.options.contextKey) {\n            this.route.queryParams.pipe(debounceTime(100)).subscribe((params) => {\n                const contextParam = params[this.route.options.contextKey];\n                let direct = false;\n                if (contextParam) {\n                    this.defaultContextUri = contextParam;\n                    direct = true;\n                }\n                loadFct(direct);\n            });\n        }\n        else {\n            loadFct();\n        }\n    }\n    loadContext(uri) {\n        const context = this.context$.value;\n        if (context && context.uri === uri) {\n            return;\n        }\n        this.getContextByUri(uri)\n            .pipe(first())\n            .subscribe((_context) => {\n            this.addContextToList(_context);\n            this.setContext(_context);\n        }, (err) => {\n            if (uri !== this.options.defaultContextUri) {\n                this.loadContext(this.options.defaultContextUri);\n            }\n        });\n    }\n    setContext(context) {\n        this.handleContextMessage(context);\n        const currentContext = this.context$.value;\n        if (currentContext && context && context.id === currentContext.id) {\n            if (context.map.view.keepCurrentView === undefined) {\n                context.map.view.keepCurrentView = true;\n            }\n            this.context$.next(context);\n            return;\n        }\n        if (!context.map) {\n            context.map = { view: {} };\n        }\n        Object.assign(context.map.view, this.mapViewFromRoute);\n        this.context$.next(context);\n    }\n    loadEditedContext(uri) {\n        this.getContextByUri(uri).subscribe((_context) => {\n            this.setEditedContext(_context);\n        });\n    }\n    setEditedContext(context) {\n        this.editedContext$.next(context);\n    }\n    getContextFromMap(igoMap, empty) {\n        const view = igoMap.ol.getView();\n        const proj = view.getProjection().getCode();\n        const center = new olPoint(view.getCenter()).transform(proj, 'EPSG:4326');\n        const context = {\n            uri: uuid(),\n            title: '',\n            scope: 'private',\n            map: {\n                view: {\n                    center: center.getCoordinates(),\n                    zoom: view.getZoom(),\n                    projection: proj,\n                    maxZoomOnExtent: igoMap.viewController.maxZoomOnExtent\n                }\n            },\n            layers: [],\n            tools: []\n        };\n        let layers = [];\n        if (empty === true) {\n            layers = igoMap.layers$\n                .getValue()\n                .filter((lay) => lay.baseLayer === true ||\n                lay.options.id === 'searchPointerSummaryId')\n                .sort((a, b) => a.zIndex - b.zIndex);\n        }\n        else {\n            layers = igoMap.layers$.getValue().sort((a, b) => a.zIndex - b.zIndex);\n        }\n        let i = 0;\n        for (const l of layers) {\n            const layer = l;\n            const opts = {\n                id: layer.options.id ? String(layer.options.id) : undefined,\n                layerOptions: {\n                    title: layer.options.title,\n                    zIndex: ++i,\n                    visible: layer.visible\n                },\n                sourceOptions: {\n                    type: layer.dataSource.options.type,\n                    params: layer.dataSource.options.params,\n                    url: layer.dataSource.options.url,\n                    queryable: layer.queryable\n                }\n            };\n            if (opts.sourceOptions.type) {\n                context.layers.push(opts);\n            }\n        }\n        context.tools = this.tools.map((tool) => {\n            return { id: String(tool.id), global: tool.global };\n        });\n        return context;\n    }\n    getContextFromLayers(igoMap, layers, name) {\n        const currentContext = this.context$.getValue();\n        const view = igoMap.ol.getView();\n        const proj = view.getProjection().getCode();\n        const center = new olPoint(view.getCenter()).transform(proj, 'EPSG:4326');\n        const context = {\n            uri: name,\n            title: name,\n            map: {\n                view: {\n                    center: center.getCoordinates(),\n                    zoom: view.getZoom(),\n                    projection: proj\n                }\n            },\n            layers: [],\n            toolbar: [],\n            tools: [],\n            extraFeatures: []\n        };\n        const currentLayers = igoMap.layers$.getValue();\n        context.layers = currentLayers\n            .filter((l) => l.baseLayer)\n            .map((l) => {\n            return {\n                baseLayer: true,\n                sourceOptions: l.options.sourceOptions,\n                title: l.options.title,\n                visible: l.visible\n            };\n        });\n        layers.forEach((layer) => {\n            const layerFound = currentContext.layers.find((contextLayer) => layer.id === contextLayer.source.id && !contextLayer.baseLayer);\n            if (layerFound) {\n                let layerStyle = layerFound[`style`];\n                if (layerFound[`styleByAttribute`]) {\n                    layerStyle = undefined;\n                }\n                else if (layerFound[`clusterBaseStyle`]) {\n                    layerStyle = undefined;\n                    delete layerFound.sourceOptions[`source`];\n                    delete layerFound.sourceOptions[`format`];\n                }\n                const opts = {\n                    baseLayer: layerFound.baseLayer,\n                    title: layer.options.title,\n                    zIndex: layer.zIndex,\n                    styleByAttribute: layerFound[`styleByAttribute`],\n                    clusterBaseStyle: layerFound[`clusterBaseStyle`],\n                    style: layerStyle,\n                    clusterParam: layerFound[`clusterParam`],\n                    visible: layer.visible,\n                    opacity: layer.opacity,\n                    sourceOptions: layerFound.sourceOptions\n                };\n                context.layers.push(opts);\n            }\n            else {\n                if (layer.ol.type !== 'VECTOR') {\n                    const catalogLayer = layer.options;\n                    catalogLayer.zIndex = layer.zIndex;\n                    delete catalogLayer.source;\n                    context.layers.push(catalogLayer);\n                }\n                else {\n                    let features;\n                    const writer = new GeoJSON();\n                    if (layer.ol.getSource() instanceof Cluster) {\n                        features = writer.writeFeatures(layer.ol.getSource().getSource().getFeatures(), {\n                            dataProjection: 'EPSG:4326',\n                            featureProjection: 'EPSG:3857'\n                        });\n                    }\n                    else {\n                        features = writer.writeFeatures(layer.ol.getSource().getFeatures(), {\n                            dataProjection: 'EPSG:4326',\n                            featureProjection: 'EPSG:3857'\n                        });\n                    }\n                    features = JSON.parse(features);\n                    features.name = layer.options.title;\n                    context.extraFeatures.push(features);\n                }\n            }\n        });\n        context.toolbar = this.toolbar;\n        context.tools = this.tools;\n        return context;\n    }\n    setTools(tools) {\n        this.tools = tools;\n    }\n    setToolbar(toolbar) {\n        this.toolbar = toolbar;\n    }\n    handleContextMessage(context) {\n        if (this.contextMessage) {\n            this.messageService.remove(this.contextMessage.id);\n        }\n        if (this.context$.value && context.uri && this.context$.value.uri !== context.uri) {\n            this.messageService.removeAllAreNotError();\n        }\n        context.messages = context.messages ? context.messages : [];\n        context.messages.push(context.message);\n        context.messages.map(message => {\n            if (message) {\n                message.title = message.title\n                    ? this.languageService.translate.instant(message.title)\n                    : undefined;\n                message.text = message.text\n                    ? this.languageService.translate.instant(message.text)\n                    : undefined;\n                this.messageService.message(message);\n            }\n        });\n    }\n    getContextByUri(uri) {\n        if (this.baseUrl) {\n            let contextToLoad;\n            for (const key of Object.keys(this.contexts$.value)) {\n                contextToLoad = this.contexts$.value[key].find((c) => {\n                    return c.uri === uri;\n                });\n                if (contextToLoad) {\n                    break;\n                }\n            }\n            if (contextToLoad && contextToLoad.imported) {\n                return of(contextToLoad);\n            }\n            // TODO : use always id or uri\n            const id = contextToLoad ? contextToLoad.id : uri;\n            return this.getDetails(id);\n        }\n        const importedContext = this.contexts$.value.ours.find((currentContext) => {\n            return currentContext.uri === uri && currentContext.imported === true;\n        });\n        if (importedContext) {\n            return of(importedContext);\n        }\n        else {\n            return this.getLocalContext(uri);\n        }\n    }\n    getContextLayers(igoMap) {\n        const layers = [];\n        const mapLayers = igoMap.layers$.getValue();\n        mapLayers.forEach((layer) => {\n            if (!layer.baseLayer && layer.options.id !== 'searchPointerSummaryId') {\n                layers.push(layer);\n            }\n        });\n        return layers;\n    }\n    readParamsFromRoute() {\n        if (!this.route) {\n            return;\n        }\n        this.route.queryParams.subscribe((params) => {\n            const centerKey = this.route.options.centerKey;\n            if (centerKey && params[centerKey]) {\n                const centerParams = params[centerKey];\n                this.mapViewFromRoute.center = centerParams.split(',').map(Number);\n                this.mapViewFromRoute.geolocate = false;\n            }\n            const projectionKey = this.route.options.projectionKey;\n            if (projectionKey && params[projectionKey]) {\n                const projectionParam = params[projectionKey];\n                this.mapViewFromRoute.projection = projectionParam;\n            }\n            const zoomKey = this.route.options.zoomKey;\n            if (zoomKey && params[zoomKey]) {\n                const zoomParam = params[zoomKey];\n                this.mapViewFromRoute.zoom = Number(zoomParam);\n            }\n        });\n    }\n    getPath(file) {\n        const basePath = this.options.basePath.replace(/\\/$/, '');\n        return `${basePath}/${file}`;\n    }\n    handleError(error, uri, permissionError) {\n        const context = this.contexts$.value.ours.find((obj) => obj.uri === uri);\n        const titleContext = context ? context.title : uri;\n        error.error.title = this.languageService.translate.instant('igo.context.contextManager.invalid.title');\n        error.error.message = this.languageService.translate.instant('igo.context.contextManager.invalid.text', { value: titleContext });\n        error.error.toDisplay = true;\n        if (permissionError) {\n            error.error.title = this.languageService.translate.instant('igo.context.contextManager.errors.addPermissionTitle');\n            error.error.message = this.languageService.translate.instant('igo.context.contextManager.errors.addPermission');\n        }\n        throw error;\n    }\n    handleContextsChange(keepCurrentContext = true) {\n        const context = this.context$.value;\n        const editedContext = this.editedContext$.value;\n        if (!context || context.uri === this.options.defaultContextUri) {\n            keepCurrentContext = false;\n        }\n        if (!keepCurrentContext || !this.findContext(context)) {\n            this.defaultContextUri = undefined;\n            this.loadDefaultContext();\n        }\n        else {\n            this.getContextByUri(context.uri)\n                .pipe(first())\n                .subscribe((newContext) => {\n                this.toolsChanged$.next(newContext);\n            });\n            if (this.baseUrl && this.authService.authenticated) {\n                this.getDefault().subscribe();\n            }\n        }\n        const editedFound = this.findContext(editedContext);\n        if (!editedFound || editedFound.permission !== 'write') {\n            this.setEditedContext(undefined);\n        }\n    }\n    addContextToList(context) {\n        const contextFound = this.findContext(context);\n        if (!contextFound) {\n            const contextSimplifie = {\n                id: context.id,\n                uri: context.uri,\n                title: context.title,\n                scope: context.scope,\n                permission: TypePermission[TypePermission.read]\n            };\n            if (this.contexts$.value && this.contexts$.value.public) {\n                this.contexts$.value.public.push(contextSimplifie);\n                this.contexts$.next(this.contexts$.value);\n            }\n        }\n    }\n    findContext(context) {\n        if (!context) {\n            return false;\n        }\n        const contexts = this.contexts$.value;\n        let found;\n        for (const key of Object.keys(contexts)) {\n            const value = contexts[key];\n            found = value.find((c) => (context.id && c.id === context.id) ||\n                (context.uri && c.uri === context.uri));\n            if (found) {\n                break;\n            }\n        }\n        return found;\n    }\n}\nContextService.ɵfac = function ContextService_Factory(t) { return new (t || ContextService)(ɵɵinject(HttpClient), ɵɵinject(AuthService), ɵɵinject(LanguageService), ɵɵinject(ConfigService), ɵɵinject(MessageService), ɵɵinject(RouteService, 8)); };\nContextService.ɵprov = ɵɵdefineInjectable({ token: ContextService, factory: ContextService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: HttpClient }, { type: AuthService }, { type: LanguageService }, { type: ConfigService }, { type: MessageService }, { type: RouteService, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\nclass ImportError extends Error {\n}\nclass ImportInvalidFileError extends ImportError {\n    constructor() {\n        super('Invalid file');\n        Object.setPrototypeOf(this, ImportInvalidFileError.prototype);\n    }\n}\nclass ImportUnreadableFileError extends ImportError {\n    constructor() {\n        super('Failed to read file');\n        Object.setPrototypeOf(this, ImportUnreadableFileError.prototype);\n    }\n}\nclass ImportNothingToImportError extends ImportError {\n    constructor() {\n        super('Nothing to import');\n        Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n    }\n}\nclass ImportSizeError extends ImportError {\n    constructor() {\n        super('File is too large');\n        Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n    }\n}\nclass ImportSRSError extends ImportError {\n    constructor() {\n        super('Invalid SRS definition');\n        Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n    }\n}\n\nclass ContextImportService {\n    constructor(config) {\n        this.config = config;\n        const configFileSizeMb = this.config.getConfig('importExport.clientSideFileSizeMaxMb');\n        this.clientSideFileSizeMax =\n            (configFileSizeMb ? configFileSizeMb : 30) * Math.pow(1024, 2);\n    }\n    import(file) {\n        return this.importAsync(file);\n    }\n    getFileImporter(file) {\n        const extension = getFileExtension(file);\n        const mimeType = file.type;\n        const allowedMimeTypes = [...ContextImportService.allowedMimeTypes];\n        const allowedExtensions = ContextImportService.allowedExtensions;\n        if (allowedMimeTypes.indexOf(mimeType) < 0 &&\n            allowedExtensions.indexOf(extension) < 0) {\n            return undefined;\n        }\n        else if (mimeType === 'application/json' ||\n            extension === ContextImportService.allowedExtensions) {\n            return this.importFile;\n        }\n        return undefined;\n    }\n    importAsync(file) {\n        const doImport = (observer) => {\n            if (file.size >= this.clientSideFileSizeMax) {\n                observer.error(new ImportSizeError());\n                return;\n            }\n            const importer = this.getFileImporter(file);\n            if (importer === undefined) {\n                observer.error(new ImportInvalidFileError());\n                return;\n            }\n            importer.call(this, file, observer);\n        };\n        return new Observable(doImport);\n    }\n    importFile(file, observer) {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n            try {\n                const context = this.parseContextFromFile(file, event.target.result);\n                observer.next(context);\n            }\n            catch (e) {\n                observer.error(new ImportUnreadableFileError());\n            }\n            observer.complete();\n        };\n        reader.onerror = (evt) => {\n            observer.error(new ImportUnreadableFileError());\n        };\n        reader.readAsText(file, 'UTF-8');\n    }\n    parseContextFromFile(file, data) {\n        const context = JSON.parse(data);\n        return context;\n    }\n}\nContextImportService.allowedMimeTypes = ['application/json'];\nContextImportService.allowedExtensions = 'json';\nContextImportService.ɵfac = function ContextImportService_Factory(t) { return new (t || ContextImportService)(ɵɵinject(ConfigService)); };\nContextImportService.ɵprov = ɵɵdefineInjectable({ token: ContextImportService, factory: ContextImportService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextImportService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ConfigService }]; }, null); })();\n\nclass ContextExportService {\n    export(res) {\n        return this.exportAsync(res);\n    }\n    exportAsync(res) {\n        const doExport = (observer) => {\n            const nothingToExport = this.nothingToExport(res);\n            if (nothingToExport === true) {\n                observer.error(new ExportNothingToExportError());\n                return;\n            }\n            const contextJSON = JSON.stringify(res);\n            downloadContent(contextJSON, 'text/json;charset=utf-8', `${res.uri}.json`);\n            observer.complete();\n        };\n        return new Observable(doExport);\n    }\n    nothingToExport(res) {\n        if (res.map === undefined) {\n            return true;\n        }\n        return false;\n    }\n}\nContextExportService.ɵfac = function ContextExportService_Factory(t) { return new (t || ContextExportService)(); };\nContextExportService.ɵprov = ɵɵdefineInjectable({ token: ContextExportService, factory: ContextExportService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextExportService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], null, null); })();\n\nconst _c0 = function (a0) { return { size: a0 }; };\nfunction ContextImportExportComponent_div_8_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\");\n    ɵɵelementStart(1, \"form\", 5);\n    ɵɵelementStart(2, \"div\", 6);\n    ɵɵelementStart(3, \"button\", 7);\n    ɵɵlistener(\"click\", function ContextImportExportComponent_div_8_Template_button_click_3_listener() { ɵɵrestoreView(_r4); const _r2 = ɵɵreference(10); return _r2.click(); });\n    ɵɵpipe(4, \"async\");\n    ɵɵtext(5);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelement(7, \"igo-spinner\", 8);\n    ɵɵpipe(8, \"async\");\n    ɵɵelementStart(9, \"input\", 9, 10);\n    ɵɵlistener(\"click\", function ContextImportExportComponent_div_8_Template_input_click_9_listener() { ɵɵrestoreView(_r4); const _r2 = ɵɵreference(10); return _r2.value = null; })(\"change\", function ContextImportExportComponent_div_8_Template_input_change_9_listener($event) { ɵɵrestoreView(_r4); const ctx_r6 = ɵɵnextContext(); return ctx_r6.importFiles($event.target.files); });\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(11, \"section\", 11);\n    ɵɵelementStart(12, \"h4\");\n    ɵɵtext(13);\n    ɵɵpipe(14, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(15, \"ul\");\n    ɵɵelementStart(16, \"li\");\n    ɵɵtext(17);\n    ɵɵpipe(18, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(3);\n    ɵɵproperty(\"disabled\", ɵɵpipeBind1(4, 7, ctx_r0.loading$));\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(6, 9, \"igo.geo.importExportForm.importButton\"), \" \");\n    ɵɵadvance(2);\n    ɵɵproperty(\"shown\", ɵɵpipeBind1(8, 11, ctx_r0.loading$));\n    ɵɵadvance(2);\n    ɵɵstyleProp(\"display\", \"none\");\n    ɵɵadvance(4);\n    ɵɵtextInterpolate(ɵɵpipeBind1(14, 13, \"igo.geo.importExportForm.importClarifications\"));\n    ɵɵadvance(4);\n    ɵɵtextInterpolate(ɵɵpipeBind2(18, 15, \"igo.geo.importExportForm.importSizeMax\", ɵɵpureFunction1(18, _c0, ctx_r0.fileSizeMb)));\n} }\nfunction ContextImportExportComponent_form_9_mat_option_18_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 2);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const layer_r9 = ctx.$implicit;\n    ɵɵproperty(\"value\", layer_r9);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(layer_r9.title);\n} }\nfunction ContextImportExportComponent_form_9_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"form\", 12);\n    ɵɵelementStart(1, \"div\", 13);\n    ɵɵelementStart(2, \"mat-form-field\", 14);\n    ɵɵelementStart(3, \"mat-label\");\n    ɵɵtext(4);\n    ɵɵpipe(5, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelement(6, \"input\", 15);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(7, \"div\", 13);\n    ɵɵelementStart(8, \"mat-form-field\");\n    ɵɵelementStart(9, \"mat-label\");\n    ɵɵtext(10);\n    ɵɵpipe(11, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(12, \"mat-select\", 16);\n    ɵɵelementStart(13, \"mat-option\", 17, 18);\n    ɵɵlistener(\"click\", function ContextImportExportComponent_form_9_Template_mat_option_click_13_listener() { ɵɵrestoreView(_r11); const _r7 = ɵɵreference(14); const ctx_r10 = ɵɵnextContext(); return ctx_r10.selectAll(_r7); });\n    ɵɵtext(15);\n    ɵɵpipe(16, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelement(17, \"mat-divider\");\n    ɵɵtemplate(18, ContextImportExportComponent_form_9_mat_option_18_Template, 2, 2, \"mat-option\", 19);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(19, \"div\", 6);\n    ɵɵelementStart(20, \"button\", 7);\n    ɵɵlistener(\"click\", function ContextImportExportComponent_form_9_Template_button_click_20_listener() { ɵɵrestoreView(_r11); const ctx_r12 = ɵɵnextContext(); return ctx_r12.handleExportFormSubmit(ctx_r12.form.value); });\n    ɵɵpipe(21, \"async\");\n    ɵɵtext(22);\n    ɵɵpipe(23, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelement(24, \"igo-spinner\", 8);\n    ɵɵpipe(25, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"formGroup\", ctx_r1.form);\n    ɵɵadvance(4);\n    ɵɵtextInterpolate(ɵɵpipeBind1(5, 9, \"igo.context.contextImportExport.export.exportContextName\"));\n    ɵɵadvance(6);\n    ɵɵtextInterpolate(ɵɵpipeBind1(11, 11, \"igo.context.contextImportExport.export.exportPlaceHolder\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"value\", 1);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(16, 13, \"igo.context.contextImportExport.export.exportSelectAll\"), \" \");\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngForOf\", ctx_r1.userControlledLayerList);\n    ɵɵadvance(2);\n    ɵɵproperty(\"disabled\", !ctx_r1.form.valid || ɵɵpipeBind1(21, 15, ctx_r1.loading$));\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(23, 17, \"igo.geo.importExportForm.exportButton\"), \" \");\n    ɵɵadvance(2);\n    ɵɵproperty(\"shown\", ɵɵpipeBind1(25, 19, ctx_r1.loading$));\n} }\nclass ContextImportExportComponent {\n    constructor(contextImportService, contextExportService, languageService, messageService, formBuilder, config, contextService) {\n        this.contextImportService = contextImportService;\n        this.contextExportService = contextExportService;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.formBuilder = formBuilder;\n        this.config = config;\n        this.contextService = contextService;\n        this.inputProj = 'EPSG:4326';\n        this.loading$ = new BehaviorSubject(false);\n        this.forceNaming = false;\n        this.activeImportExport = 'import';\n        this.buildForm();\n    }\n    ngOnInit() {\n        const configFileSizeMb = this.config.getConfig('importExport.clientSideFileSizeMaxMb');\n        this.clientSideFileSizeMax =\n            (configFileSizeMb ? configFileSizeMb : 30) * Math.pow(1024, 2);\n        this.fileSizeMb = this.clientSideFileSizeMax / Math.pow(1024, 2);\n        this.layerList = this.contextService.getContextLayers(this.map);\n        this.userControlledLayerList = this.layerList.filter(layer => layer.showInLayerList);\n    }\n    importFiles(files) {\n        this.loading$.next(true);\n        for (const file of files) {\n            this.contextImportService.import(file).pipe(take(1)).subscribe((context) => this.onFileImportSuccess(file, context), (error) => this.onFileImportError(file, error), () => {\n                this.loading$.next(false);\n            });\n        }\n    }\n    handleExportFormSubmit(contextOptions) {\n        this.loading$.next(true);\n        this.res = this.contextService.getContextFromLayers(this.map, contextOptions.layers, contextOptions.name);\n        this.res.imported = true;\n        this.contextExportService.export(this.res).pipe(take(1)).subscribe(() => { }, (error) => this.onFileExportError(error), () => {\n            this.onFileExportSuccess();\n            this.loading$.next(false);\n        });\n    }\n    buildForm() {\n        this.form = this.formBuilder.group({\n            layers: ['', [Validators.required]],\n            name: ['', [Validators.required]]\n        });\n    }\n    onFileImportSuccess(file, context) {\n        handleFileImportSuccess(file, context, this.messageService, this.languageService, this.contextService);\n    }\n    onFileImportError(file, error) {\n        this.loading$.next(false);\n        handleFileImportError(file, error, this.messageService, this.languageService, this.fileSizeMb);\n    }\n    onFileExportError(error) {\n        this.loading$.next(false);\n        handleFileExportError(error, this.messageService, this.languageService);\n    }\n    onFileExportSuccess() {\n        handleFileExportSuccess(this.messageService, this.languageService);\n    }\n    selectAll(e) {\n        if (e._selected) {\n            this.form.controls.layers.setValue(this.userControlledLayerList);\n            e._selected = true;\n        }\n        if (e._selected === false) {\n            this.form.controls.layers.setValue([]);\n        }\n    }\n    onImportExportChange(event) {\n        this.activeImportExport = event.value;\n    }\n}\nContextImportExportComponent.ɵfac = function ContextImportExportComponent_Factory(t) { return new (t || ContextImportExportComponent)(ɵɵdirectiveInject(ContextImportService), ɵɵdirectiveInject(ContextExportService), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(FormBuilder), ɵɵdirectiveInject(ConfigService), ɵɵdirectiveInject(ContextService)); };\nContextImportExportComponent.ɵcmp = ɵɵdefineComponent({ type: ContextImportExportComponent, selectors: [[\"igo-context-import-export\"]], inputs: { map: \"map\" }, decls: 10, vars: 11, consts: [[1, \"import-export-toggle\", \"mat-typography\"], [3, \"value\", \"change\"], [3, \"value\"], [4, \"ngIf\"], [\"class\", \"igo-form\", 3, \"formGroup\", 4, \"ngIf\"], [1, \"igo-form\"], [1, \"igo-form-button-group\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 3, \"disabled\", \"click\"], [3, \"shown\"], [\"type\", \"file\", 3, \"click\", \"change\"], [\"fileInput\", \"\"], [1, \"mat-typography\"], [1, \"igo-form\", 3, \"formGroup\"], [1, \"igo-input-container\"], [1, \"example-full-width\"], [\"formControlName\", \"name\", \"matInput\", \"\", 3, \"value\"], [\"formControlName\", \"layers\", \"multiple\", \"\"], [3, \"value\", \"click\"], [\"e\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"]], template: function ContextImportExportComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵelementStart(1, \"mat-button-toggle-group\", 1);\n        ɵɵlistener(\"change\", function ContextImportExportComponent_Template_mat_button_toggle_group_change_1_listener($event) { return ctx.onImportExportChange($event); });\n        ɵɵelementStart(2, \"mat-button-toggle\", 2);\n        ɵɵtext(3);\n        ɵɵpipe(4, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(5, \"mat-button-toggle\", 2);\n        ɵɵtext(6);\n        ɵɵpipe(7, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵtemplate(8, ContextImportExportComponent_div_8_Template, 19, 20, \"div\", 3);\n        ɵɵtemplate(9, ContextImportExportComponent_form_9_Template, 26, 21, \"form\", 4);\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"value\", ctx.activeImportExport);\n        ɵɵadvance(1);\n        ɵɵproperty(\"value\", \"import\");\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(4, 7, \"igo.geo.importExportForm.importTabTitle\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"value\", \"export\");\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(7, 9, \"igo.geo.importExportForm.exportTabTitle\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ctx.activeImportExport === \"import\");\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.activeImportExport === \"export\");\n    } }, directives: [MatButtonToggleGroup, MatButtonToggle, NgIf, ɵangular_packages_forms_forms_y, NgControlStatusGroup, NgForm, MatButton, SpinnerComponent, FormGroupDirective, MatFormField, MatLabel, DefaultValueAccessor, MatInput, NgControlStatus, FormControlName, MatSelect, MatOption, MatDivider, NgForOf], pipes: [TranslatePipe, AsyncPipe], styles: [\".import-export-toggle[_ngcontent-%COMP%]{padding:10px;text-align:center}.import-export-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}.import-export-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{width:50%}.igo-input-container[_ngcontent-%COMP%]{padding:10px}.igo-input-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}h4[_ngcontent-%COMP%]{padding:0 5px}.igo-form[_ngcontent-%COMP%]{padding:15px 5px}.igo-form-button-group[_ngcontent-%COMP%]{padding-top:10px;text-align:center}igo-spinner[_ngcontent-%COMP%]{padding-left:10px;position:absolute}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextImportExportComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-import-export',\n                templateUrl: './context-import-export.component.html',\n                styleUrls: ['./context-import-export.component.scss']\n            }]\n    }], function () { return [{ type: ContextImportService }, { type: ContextExportService }, { type: LanguageService }, { type: MessageService }, { type: FormBuilder }, { type: ConfigService }, { type: ContextService }]; }, { map: [{\n            type: Input\n        }] }); })();\n\nclass IgoContextImportExportModule {\n    static forRoot() {\n        return {\n            ngModule: IgoContextImportExportModule\n        };\n    }\n}\nIgoContextImportExportModule.ɵmod = ɵɵdefineNgModule({ type: IgoContextImportExportModule });\nIgoContextImportExportModule.ɵinj = ɵɵdefineInjector({ factory: function IgoContextImportExportModule_Factory(t) { return new (t || IgoContextImportExportModule)(); }, imports: [[\n            FormsModule,\n            ReactiveFormsModule,\n            CommonModule,\n            MatButtonModule,\n            MatButtonToggleModule,\n            MatDividerModule,\n            MatTabsModule,\n            MatSelectModule,\n            MatOptionModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatCheckboxModule,\n            IgoLanguageModule,\n            IgoSpinnerModule,\n            MatTooltipModule,\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoContextImportExportModule, { declarations: [ContextImportExportComponent], imports: [FormsModule,\n        ReactiveFormsModule,\n        CommonModule,\n        MatButtonModule,\n        MatButtonToggleModule,\n        MatDividerModule,\n        MatTabsModule,\n        MatSelectModule,\n        MatOptionModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatCheckboxModule,\n        IgoLanguageModule,\n        IgoSpinnerModule,\n        MatTooltipModule], exports: [ContextImportExportComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoContextImportExportModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    FormsModule,\n                    ReactiveFormsModule,\n                    CommonModule,\n                    MatButtonModule,\n                    MatButtonToggleModule,\n                    MatDividerModule,\n                    MatTabsModule,\n                    MatSelectModule,\n                    MatOptionModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatCheckboxModule,\n                    IgoLanguageModule,\n                    IgoSpinnerModule,\n                    MatTooltipModule,\n                ],\n                exports: [\n                    ContextImportExportComponent\n                ],\n                declarations: [\n                    ContextImportExportComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass MapContextDirective {\n    constructor(component, contextService, mediaService) {\n        this.contextService = contextService;\n        this.mediaService = mediaService;\n        this.component = component;\n    }\n    get map() {\n        return this.component.map;\n    }\n    ngOnInit() {\n        this.context$$ = this.contextService.context$\n            .pipe(filter(context => context !== undefined))\n            .subscribe(context => this.handleContextChange(context));\n    }\n    ngOnDestroy() {\n        this.context$$.unsubscribe();\n    }\n    handleContextChange(context) {\n        if (context.map === undefined) {\n            return;\n        }\n        // This creates a new ol.Map when the context changes. Doing that\n        // allows the print tool to work properly even when the map's canvas\n        // has been tainted (CORS) with the layers of another context. This could\n        // have some side effects such as unbinding all listeners on the first map.\n        // A better solution would be to create a new map (preview) before\n        // printing and avoid the tainted canvas issue. This will come later so\n        // this snippet of code is kept here in case it takes too long becomes\n        // an issue\n        // const target = this.component.map.ol.getTarget();\n        // this.component.map.ol.setTarget(undefined);\n        // this.component.map.init();\n        // this.component.map.ol.setTarget(target);\n        const viewContext = context.map.view;\n        if (!this.component.view || viewContext.keepCurrentView !== true) {\n            this.component.view = viewContext;\n        }\n        const controlsContext = context.map.controls;\n        if (!this.component.controls && controlsContext) {\n            if (this.mediaService.isMobile()) {\n                if (typeof (controlsContext.scaleLine) !== 'boolean') {\n                    const scaleLineOption = controlsContext.scaleLine;\n                    if (!scaleLineOption.minWidth) {\n                        scaleLineOption.minWidth = Math.min(64, scaleLineOption.minWidth);\n                        controlsContext.scaleLine = scaleLineOption;\n                    }\n                }\n            }\n            this.component.controls = controlsContext;\n        }\n    }\n}\nMapContextDirective.ɵfac = function MapContextDirective_Factory(t) { return new (t || MapContextDirective)(ɵɵdirectiveInject(MapBrowserComponent), ɵɵdirectiveInject(ContextService), ɵɵdirectiveInject(MediaService)); };\nMapContextDirective.ɵdir = ɵɵdefineDirective({ type: MapContextDirective, selectors: [[\"\", \"igoMapContext\", \"\"]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MapContextDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoMapContext]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent }, { type: ContextService }, { type: MediaService }]; }, null); })();\n\nclass LayerContextDirective {\n    constructor(component, contextService, layerService, configService, styleListService, styleService, route) {\n        this.component = component;\n        this.contextService = contextService;\n        this.layerService = layerService;\n        this.configService = configService;\n        this.styleListService = styleListService;\n        this.styleService = styleService;\n        this.route = route;\n        this.contextLayers = [];\n        this.removeLayersOnContextChange = true;\n    }\n    get map() {\n        return this.component.map;\n    }\n    ngOnInit() {\n        this.context$$ = this.contextService.context$\n            .pipe(filter((context) => context !== undefined))\n            .subscribe((context) => this.handleContextChange(context));\n        if (this.route &&\n            this.route.options.visibleOnLayersKey &&\n            this.route.options.visibleOffLayersKey &&\n            this.route.options.contextKey) {\n            const queryParams$$ = this.route.queryParams.subscribe((params) => {\n                if (Object.keys(params).length > 0) {\n                    this.queryParams = params;\n                    queryParams$$.unsubscribe();\n                }\n            });\n        }\n    }\n    ngOnDestroy() {\n        this.context$$.unsubscribe();\n    }\n    handleContextChange(context) {\n        if (context.layers === undefined) {\n            return;\n        }\n        if (this.removeLayersOnContextChange === true) {\n            this.map.removeAllLayers();\n        }\n        else {\n            this.map.removeLayers(this.contextLayers);\n        }\n        this.contextLayers = [];\n        const layersAndIndex$ = merge(...context.layers.map((layerOptions, index) => {\n            return this.layerService.createAsyncLayer(layerOptions, context.uri);\n        }));\n        layersAndIndex$\n            .pipe(buffer(layersAndIndex$.pipe(debounceTime(500))))\n            .subscribe((layers) => {\n            layers = layers\n                .filter((layer) => layer !== undefined)\n                .map((layer) => {\n                layer.visible = this.computeLayerVisibilityFromUrl(layer);\n                layer.zIndex = layer.zIndex;\n                return layer;\n            });\n            this.contextLayers.concat(layers);\n            this.map.addLayers(layers);\n            if (context.extraFeatures) {\n                context.extraFeatures.forEach((featureCollection) => {\n                    const format = new GeoJSON();\n                    const title = featureCollection.name;\n                    featureCollection = JSON.stringify(featureCollection);\n                    featureCollection = format.readFeatures(featureCollection, {\n                        dataProjection: 'EPSG:4326',\n                        featureProjection: 'EPSG:3857'\n                    });\n                    if (!this.configService.getConfig('importWithStyle')) {\n                        addImportedFeaturesToMap(featureCollection, this.map, title);\n                    }\n                    else {\n                        addImportedFeaturesStyledToMap(featureCollection, this.map, title, this.styleListService, this.styleService);\n                    }\n                });\n            }\n        });\n    }\n    computeLayerVisibilityFromUrl(layer) {\n        const params = this.queryParams;\n        const currentContext = this.contextService.context$.value.uri;\n        const currentLayerid = layer.id;\n        let visible = layer.visible;\n        if (!params || !currentLayerid) {\n            return visible;\n        }\n        const contextParams = params[this.route.options.contextKey];\n        if (contextParams === currentContext || !contextParams) {\n            let visibleOnLayersParams = '';\n            let visibleOffLayersParams = '';\n            let visiblelayers = [];\n            let invisiblelayers = [];\n            if (this.route.options.visibleOnLayersKey &&\n                params[this.route.options.visibleOnLayersKey]) {\n                visibleOnLayersParams =\n                    params[this.route.options.visibleOnLayersKey];\n            }\n            if (this.route.options.visibleOffLayersKey &&\n                params[this.route.options.visibleOffLayersKey]) {\n                visibleOffLayersParams =\n                    params[this.route.options.visibleOffLayersKey];\n            }\n            /* This order is important because to control whichever\n             the order of * param. First whe open and close everything.*/\n            if (visibleOnLayersParams === '*') {\n                visible = true;\n            }\n            if (visibleOffLayersParams === '*') {\n                visible = false;\n            }\n            // After, managing named layer by id (context.json OR id from datasource)\n            visiblelayers = visibleOnLayersParams.split(',');\n            invisiblelayers = visibleOffLayersParams.split(',');\n            if (visiblelayers.indexOf(currentLayerid) > -1 || visiblelayers.indexOf(currentLayerid.toString()) > -1) {\n                visible = true;\n            }\n            if (invisiblelayers.indexOf(currentLayerid) > -1 || invisiblelayers.indexOf(currentLayerid.toString()) > -1) {\n                visible = false;\n            }\n        }\n        return visible;\n    }\n}\nLayerContextDirective.ɵfac = function LayerContextDirective_Factory(t) { return new (t || LayerContextDirective)(ɵɵdirectiveInject(MapBrowserComponent), ɵɵdirectiveInject(ContextService), ɵɵdirectiveInject(LayerService), ɵɵdirectiveInject(ConfigService), ɵɵdirectiveInject(StyleListService), ɵɵdirectiveInject(StyleService), ɵɵdirectiveInject(RouteService, 8)); };\nLayerContextDirective.ɵdir = ɵɵdefineDirective({ type: LayerContextDirective, selectors: [[\"\", \"igoLayerContext\", \"\"]], inputs: { removeLayersOnContextChange: \"removeLayersOnContextChange\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LayerContextDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoLayerContext]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent }, { type: ContextService }, { type: LayerService }, { type: ConfigService }, { type: StyleListService }, { type: StyleService }, { type: RouteService, decorators: [{\n                type: Optional\n            }] }]; }, { removeLayersOnContextChange: [{\n            type: Input\n        }] }); })();\n\nvar ContextListControlsEnum;\n(function (ContextListControlsEnum) {\n    ContextListControlsEnum[\"always\"] = \"always\";\n    ContextListControlsEnum[\"never\"] = \"never\";\n    ContextListControlsEnum[\"default\"] = \"default\";\n})(ContextListControlsEnum || (ContextListControlsEnum = {}));\n\nclass BookmarkDialogComponent {\n    constructor(dialogRef) {\n        this.dialogRef = dialogRef;\n    }\n}\nBookmarkDialogComponent.ɵfac = function BookmarkDialogComponent_Factory(t) { return new (t || BookmarkDialogComponent)(ɵɵdirectiveInject(MatDialogRef)); };\nBookmarkDialogComponent.ɵcmp = ɵɵdefineComponent({ type: BookmarkDialogComponent, selectors: [[\"igo-bookmark-dialog\"]], decls: 14, vars: 14, consts: [[\"mat-dialog-title\", \"\", 1, \"mat-typography\"], [\"mat-dialog-content\", \"\", 1, \"mat-typography\"], [\"matInput\", \"\", \"required\", \"\", \"autocomplete\", \"off\", \"maxlength\", \"128\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [\"mat-dialog-actions\", \"\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [\"mat-button\", \"\", 3, \"click\"]], template: function BookmarkDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"h1\", 0);\n        ɵɵtext(1);\n        ɵɵpipe(2, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(3, \"div\", 1);\n        ɵɵelementStart(4, \"mat-form-field\");\n        ɵɵelementStart(5, \"input\", 2);\n        ɵɵlistener(\"ngModelChange\", function BookmarkDialogComponent_Template_input_ngModelChange_5_listener($event) { return ctx.title = $event; });\n        ɵɵpipe(6, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(7, \"div\", 3);\n        ɵɵelementStart(8, \"button\", 4);\n        ɵɵlistener(\"click\", function BookmarkDialogComponent_Template_button_click_8_listener() { return ctx.dialogRef.close(ctx.title); });\n        ɵɵtext(9);\n        ɵɵpipe(10, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(11, \"button\", 5);\n        ɵɵlistener(\"click\", function BookmarkDialogComponent_Template_button_click_11_listener() { return ctx.dialogRef.close(false); });\n        ɵɵtext(12);\n        ɵɵpipe(13, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵtextInterpolate(ɵɵpipeBind1(2, 6, \"igo.context.bookmarkButton.dialog.title\"));\n        ɵɵadvance(4);\n        ɵɵproperty(\"placeholder\", ɵɵpipeBind1(6, 8, \"igo.context.bookmarkButton.dialog.placeholder\"))(\"ngModel\", ctx.title);\n        ɵɵadvance(3);\n        ɵɵproperty(\"disabled\", !ctx.title);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(10, 10, \"igo.common.confirmDialog.confirmBtn\"), \" \");\n        ɵɵadvance(3);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(13, 12, \"igo.common.confirmDialog.cancelBtn\"), \" \");\n    } }, directives: [MatDialogTitle, MatDialogContent, MatFormField, MatInput, DefaultValueAccessor, RequiredValidator, MaxLengthValidator, NgControlStatus, NgModel, MatDialogActions, MatButton], pipes: [TranslatePipe], encapsulation: 2 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(BookmarkDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-bookmark-dialog',\n                templateUrl: './bookmark-dialog.component.html'\n            }]\n    }], function () { return [{ type: MatDialogRef }]; }, null); })();\n\nfunction ContextItemComponent_button_1_mat_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"mat-icon\", 7);\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext(2);\n    ɵɵpropertyInterpolate(\"svgIcon\", ctx_r2.context.icon ? ctx_r2.context.icon : ctx_r2.context.scope === \"public\" ? \"earth\" : \"star\");\n} }\nfunction ContextItemComponent_button_1_img_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"img\", 8);\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext(2);\n    ɵɵproperty(\"src\", ctx_r3.context.iconImage, ɵɵsanitizeUrl);\n} }\nfunction ContextItemComponent_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 4);\n    ɵɵlistener(\"click\", function ContextItemComponent_button_1_Template_button_click_0_listener() { ɵɵrestoreView(_r5); const ctx_r4 = ɵɵnextContext(); return ctx_r4.favoriteClick(ctx_r4.context); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵtemplate(2, ContextItemComponent_button_1_mat_icon_2_Template, 1, 1, \"mat-icon\", 5);\n    ɵɵtemplate(3, ContextItemComponent_button_1_img_3_Template, 1, 1, \"img\", 6);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ctx_r0.auth.authenticated ? ɵɵpipeBind1(1, 4, \"igo.context.contextManager.favorite\") : \"\")(\"color\", ctx_r0.default ? \"primary\" : \"default\");\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", !ctx_r0.context.iconImage);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.context.iconImage);\n} }\nfunction ContextItemComponent_div_4_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 20);\n    ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_1_Template_button_click_0_listener() { ɵɵrestoreView(_r15); const ctx_r14 = ɵɵnextContext(2); return ctx_r14.save.emit(ctx_r14.context); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 21);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵɵnextContext(2);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.context.contextManager.save\"))(\"color\", ctx_r6.color);\n} }\nfunction ContextItemComponent_div_4_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 22);\n    ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_4_Template_button_click_0_listener() { ɵɵrestoreView(_r17); const ctx_r16 = ɵɵnextContext(2); return ctx_r16.managePermissions.emit(ctx_r16.context); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 23);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r8 = ɵɵnextContext(2);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.context.contextManager.managePermissions\"))(\"color\", ctx_r8.color);\n} }\nfunction ContextItemComponent_div_4_button_5_Template(rf, ctx) { if (rf & 1) {\n    const _r19 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 24);\n    ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_5_Template_button_click_0_listener() { ɵɵrestoreView(_r19); const ctx_r18 = ɵɵnextContext(2); return ctx_r18.clone.emit(ctx_r18.context); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 25);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r9 = ɵɵnextContext(2);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.context.contextManager.clone\"))(\"color\", ctx_r9.color);\n} }\nfunction ContextItemComponent_div_4_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r21 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 26);\n    ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_6_Template_button_click_0_listener() { ɵɵrestoreView(_r21); const ctx_r20 = ɵɵnextContext(2); return ctx_r20.edit.emit(ctx_r20.context); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 27);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r10 = ɵɵnextContext(2);\n    ɵɵproperty(\"color\", ctx_r10.color)(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.context.contextManager.edit\"));\n} }\nfunction ContextItemComponent_div_4_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r23 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 28);\n    ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_7_Template_button_click_0_listener() { ɵɵrestoreView(_r23); const ctx_r22 = ɵɵnextContext(2); return ctx_r22.hide.emit(ctx_r22.context); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 29);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r11 = ɵɵnextContext(2);\n    ɵɵproperty(\"color\", ctx_r11.color)(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.context.contextManager.hide\"));\n} }\nfunction ContextItemComponent_div_4_button_8_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 28);\n    ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_8_Template_button_click_0_listener() { ɵɵrestoreView(_r25); const ctx_r24 = ɵɵnextContext(2); return ctx_r24.show.emit(ctx_r24.context); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 30);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r12 = ɵɵnextContext(2);\n    ɵɵproperty(\"color\", ctx_r12.color)(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.context.contextManager.show\"));\n} }\nfunction ContextItemComponent_div_4_button_9_Template(rf, ctx) { if (rf & 1) {\n    const _r27 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 31);\n    ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_9_Template_button_click_0_listener() { ɵɵrestoreView(_r27); const ctx_r26 = ɵɵnextContext(2); return ctx_r26.delete.emit(ctx_r26.context); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 32);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.context.contextManager.delete\"));\n} }\nfunction ContextItemComponent_div_4_Template(rf, ctx) { if (rf & 1) {\n    const _r29 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 9);\n    ɵɵtemplate(1, ContextItemComponent_div_4_button_1_Template, 3, 4, \"button\", 10);\n    ɵɵelementStart(2, \"div\", 11, 12);\n    ɵɵtemplate(4, ContextItemComponent_div_4_button_4_Template, 3, 4, \"button\", 13);\n    ɵɵtemplate(5, ContextItemComponent_div_4_button_5_Template, 3, 4, \"button\", 14);\n    ɵɵtemplate(6, ContextItemComponent_div_4_button_6_Template, 3, 4, \"button\", 15);\n    ɵɵtemplate(7, ContextItemComponent_div_4_button_7_Template, 3, 4, \"button\", 16);\n    ɵɵtemplate(8, ContextItemComponent_div_4_button_8_Template, 3, 4, \"button\", 16);\n    ɵɵtemplate(9, ContextItemComponent_div_4_button_9_Template, 3, 3, \"button\", 17);\n    ɵɵelementEnd();\n    ɵɵelementStart(10, \"button\", 18);\n    ɵɵlistener(\"click\", function ContextItemComponent_div_4_Template_button_click_10_listener() { ɵɵrestoreView(_r29); const ctx_r28 = ɵɵnextContext(); return ctx_r28.collapsed = !ctx_r28.collapsed; });\n    ɵɵelement(11, \"mat-icon\", 19);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r7 = ɵɵreference(3);\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r1.collapsed && ctx_r1.selected && (ctx_r1.context.permission === ctx_r1.typePermission[ctx_r1.typePermission.write] || ctx_r1.context.imported));\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngIf\", ctx_r1.canShare && !ctx_r1.context.imported);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r1.context.imported);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r1.context.permission === ctx_r1.typePermission[ctx_r1.typePermission.write] && !ctx_r1.context.imported);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r1.context.hidden && !ctx_r1.context.imported);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r1.context.hidden && !ctx_r1.context.imported);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r1.context.permission === ctx_r1.typePermission[ctx_r1.typePermission.write] || ctx_r1.context.imported);\n    ɵɵadvance(1);\n    ɵɵproperty(\"color\", ctx_r1.color)(\"target\", _r7)(\"collapsed\", ctx_r1.collapsed);\n} }\nconst _c0$1 = function (a0) { return { \"mat-list-item-light\": a0 }; };\nclass ContextItemComponent {\n    constructor(auth, storageService) {\n        this.auth = auth;\n        this.storageService = storageService;\n        this.typePermission = TypePermission;\n        this.color = 'primary';\n        this.collapsed = true;\n        this._default = false;\n        this.edit = new EventEmitter();\n        this.delete = new EventEmitter();\n        this.save = new EventEmitter();\n        this.clone = new EventEmitter();\n        this.hide = new EventEmitter();\n        this.show = new EventEmitter();\n        this.favorite = new EventEmitter();\n        this.managePermissions = new EventEmitter();\n        this.manageTools = new EventEmitter();\n    }\n    get context() {\n        return this._context;\n    }\n    set context(value) {\n        this._context = value;\n    }\n    get default() {\n        return this._default;\n    }\n    set default(value) {\n        this._default = value;\n    }\n    get hidden() {\n        return this.context.hidden;\n    }\n    get canShare() {\n        return this.storageService.get('canShare') === true;\n    }\n    favoriteClick(context) {\n        if (this.auth.authenticated) {\n            this.favorite.emit(context);\n        }\n    }\n}\nContextItemComponent.ɵfac = function ContextItemComponent_Factory(t) { return new (t || ContextItemComponent)(ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(StorageService)); };\nContextItemComponent.ɵcmp = ɵɵdefineComponent({ type: ContextItemComponent, selectors: [[\"igo-context-item\"]], inputs: { context: \"context\", default: \"default\", selected: \"selected\" }, outputs: { edit: \"edit\", delete: \"delete\", save: \"save\", clone: \"clone\", hide: \"hide\", show: \"show\", favorite: \"favorite\", managePermissions: \"managePermissions\", manageTools: \"manageTools\" }, decls: 5, vars: 6, consts: [[1, \"mat-list-item\", 3, \"ngClass\"], [\"mat-list-avatar\", \"\", \"mat-icon-button\", \"\", \"igoStopPropagation\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"matLine\", \"\"], [\"igoStopPropagation\", \"\", \"class\", \"igo-actions-container\", 4, \"ngIf\"], [\"mat-list-avatar\", \"\", \"mat-icon-button\", \"\", \"igoStopPropagation\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\"], [3, \"svgIcon\", 4, \"ngIf\"], [3, \"src\", 4, \"ngIf\"], [3, \"svgIcon\"], [3, \"src\"], [\"igoStopPropagation\", \"\", 1, \"igo-actions-container\"], [\"class\", \"save-button\", \"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [1, \"igo-actions-expand-container\"], [\"actions\", \"\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"class\", \"clone-button\", \"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"class\", \"edit-button\", \"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"class\", \"hide-button\", \"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"class\", \"delete-button\", \"mat-icon-button\", \"\", \"color\", \"warn\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"igoCollapse\", \"\", 1, \"actions-button\", 3, \"color\", \"target\", \"collapsed\", \"click\"], [\"svgIcon\", \"dots-horizontal\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 1, \"save-button\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"content-save\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"account-arrow-right\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 1, \"clone-button\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"content-copy\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 1, \"edit-button\", 3, \"color\", \"matTooltip\", \"click\"], [\"svgIcon\", \"pencil\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 1, \"hide-button\", 3, \"color\", \"matTooltip\", \"click\"], [\"svgIcon\", \"eye\"], [\"svgIcon\", \"eye-off\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", \"matTooltipShowDelay\", \"500\", 1, \"delete-button\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"delete\"]], template: function ContextItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-list-item\", 0);\n        ɵɵtemplate(1, ContextItemComponent_button_1_Template, 4, 6, \"button\", 1);\n        ɵɵelementStart(2, \"h4\", 2);\n        ɵɵtext(3);\n        ɵɵelementEnd();\n        ɵɵtemplate(4, ContextItemComponent_div_4_Template, 12, 10, \"div\", 3);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"ngClass\", ɵɵpureFunction1(4, _c0$1, ctx.hidden));\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.auth.authenticated);\n        ɵɵadvance(2);\n        ɵɵtextInterpolate(ctx.context.title);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.auth.authenticated);\n    } }, directives: [MatListItem, NgClass, NgIf, MatLine, MatButton, MatListAvatarCssMatStyler, StopPropagationDirective, MatTooltip, MatIcon, CollapseDirective], pipes: [TranslatePipe], styles: [\"[_nghost-%COMP%]{overflow:hidden}.igo-actions-container[_ngcontent-%COMP%]{flex-shrink:0}.igo-actions-expand-container[_ngcontent-%COMP%]{display:inline-flex}mat-list-item[_ngcontent-%COMP%]     .mat-list-item-content .mat-list-text{padding:0}mat-icon.disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}mat-list-item.mat-list-item-light[_ngcontent-%COMP%]     .mat-list-item-content{color:#969696}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-item',\n                templateUrl: './context-item.component.html',\n                styleUrls: ['./context-item.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: AuthService }, { type: StorageService }]; }, { context: [{\n            type: Input\n        }], default: [{\n            type: Input\n        }], selected: [{\n            type: Input\n        }], edit: [{\n            type: Output\n        }], delete: [{\n            type: Output\n        }], save: [{\n            type: Output\n        }], clone: [{\n            type: Output\n        }], hide: [{\n            type: Output\n        }], show: [{\n            type: Output\n        }], favorite: [{\n            type: Output\n        }], managePermissions: [{\n            type: Output\n        }], manageTools: [{\n            type: Output\n        }] }); })();\n\nfunction ContextListComponent_mat_form_field_1_button_3_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 14);\n    ɵɵlistener(\"click\", function ContextListComponent_mat_form_field_1_button_3_Template_button_click_0_listener() { ɵɵrestoreView(_r10); const ctx_r9 = ɵɵnextContext(2); return ctx_r9.clearFilter(); });\n    ɵɵelement(1, \"mat-icon\", 15);\n    ɵɵelementEnd();\n} }\nfunction ContextListComponent_mat_form_field_1_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-form-field\", 11);\n    ɵɵelementStart(1, \"input\", 12);\n    ɵɵlistener(\"ngModelChange\", function ContextListComponent_mat_form_field_1_Template_input_ngModelChange_1_listener($event) { ɵɵrestoreView(_r12); const ctx_r11 = ɵɵnextContext(); return ctx_r11.term = $event; });\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n    ɵɵtemplate(3, ContextListComponent_mat_form_field_1_button_3_Template, 2, 0, \"button\", 13);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"ngClass\", ctx_r0.auth.authenticated && ctx_r0.configService.getConfig(\"context\") ? \"context-filter-min-width\" : \"context-filter-max-width\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"placeholder\", ɵɵpipeBind1(2, 4, \"igo.context.contextManager.filterPlaceHolder\"))(\"ngModel\", ctx_r0.term);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r0.term.length);\n} }\nfunction ContextListComponent_button_2_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 16);\n    ɵɵlistener(\"click\", function ContextListComponent_button_2_Template_button_click_0_listener() { ɵɵrestoreView(_r14); const ctx_r13 = ɵɵnextContext(); return ctx_r13.toggleSort(true); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 17);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.context.contextManager.sortAlphabetically\"));\n} }\nfunction ContextListComponent_button_3_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 16);\n    ɵɵlistener(\"click\", function ContextListComponent_button_3_Template_button_click_0_listener() { ɵɵrestoreView(_r16); const ctx_r15 = ɵɵnextContext(); return ctx_r15.toggleSort(false); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 18);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.context.contextManager.sortContextOrder\"));\n} }\nfunction ContextListComponent_igo_actionbar_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-actionbar\", 19);\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵproperty(\"iconColor\", ctx_r3.color)(\"store\", ctx_r3.actionStore)(\"withIcon\", true)(\"withTitle\", ctx_r3.actionbarMode === \"overlay\")(\"horizontal\", false)(\"mode\", ctx_r3.actionbarMode);\n} }\nfunction ContextListComponent_button_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 20);\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 21);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵnextContext();\n    const _r5 = ɵɵreference(7);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.context.contextManager.filterUser\"))(\"matMenuTriggerFor\", _r5);\n} }\nfunction ContextListComponent_ng_container_8_button_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 27);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const user_r17 = ɵɵnextContext().$implicit;\n    const _r20 = ɵɵreference(6);\n    ɵɵproperty(\"matMenuTriggerFor\", _r20);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", user_r17.title, \" \");\n} }\nfunction ContextListComponent_ng_container_8_button_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 9);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const user_r17 = ɵɵnextContext().$implicit;\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", user_r17.title, \" \");\n} }\nfunction ContextListComponent_ng_container_8_mat_checkbox_7_Template(rf, ctx) { if (rf & 1) {\n    const _r26 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-checkbox\", 8);\n    ɵɵlistener(\"click\", function ContextListComponent_ng_container_8_mat_checkbox_7_Template_mat_checkbox_click_0_listener($event) { ɵɵrestoreView(_r26); return $event.stopPropagation(); })(\"change\", function ContextListComponent_ng_container_8_mat_checkbox_7_Template_mat_checkbox_change_0_listener() { ɵɵrestoreView(_r26); const child_r24 = ctx.$implicit; const user_r17 = ɵɵnextContext().$implicit; const ctx_r27 = ɵɵnextContext(); return ctx_r27.userSelection(child_r24, user_r17); });\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const child_r24 = ctx.$implicit;\n    const ctx_r21 = ɵɵnextContext(2);\n    ɵɵproperty(\"checked\", ctx_r21.getPermission(child_r24).checked);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", child_r24.title, \" \");\n} }\nfunction ContextListComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    const _r30 = ɵɵgetCurrentView();\n    ɵɵelementContainerStart(0);\n    ɵɵelementStart(1, \"span\", 7);\n    ɵɵelementStart(2, \"mat-checkbox\", 22);\n    ɵɵlistener(\"click\", function ContextListComponent_ng_container_8_Template_mat_checkbox_click_2_listener($event) { ɵɵrestoreView(_r30); return $event.stopPropagation(); })(\"change\", function ContextListComponent_ng_container_8_Template_mat_checkbox_change_2_listener() { ɵɵrestoreView(_r30); const user_r17 = ctx.$implicit; const ctx_r31 = ɵɵnextContext(); return ctx_r31.userSelection(user_r17); });\n    ɵɵelementEnd();\n    ɵɵtemplate(3, ContextListComponent_ng_container_8_button_3_Template, 2, 2, \"button\", 23);\n    ɵɵtemplate(4, ContextListComponent_ng_container_8_button_4_Template, 2, 1, \"button\", 24);\n    ɵɵelementEnd();\n    ɵɵelementStart(5, \"mat-menu\", null, 25);\n    ɵɵtemplate(7, ContextListComponent_ng_container_8_mat_checkbox_7_Template, 2, 2, \"mat-checkbox\", 26);\n    ɵɵelementEnd();\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const user_r17 = ctx.$implicit;\n    const ctx_r6 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵproperty(\"checked\", ctx_r6.getPermission(user_r17).checked)(\"indeterminate\", ctx_r6.getPermission(user_r17).indeterminate);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", user_r17.childs);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !user_r17.childs);\n    ɵɵadvance(3);\n    ɵɵproperty(\"ngForOf\", user_r17.childs);\n} }\nfunction ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    const _r38 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-context-item\", 31);\n    ɵɵlistener(\"edit\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_edit_0_listener() { ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r37 = ɵɵnextContext(3); return ctx_r37.edit.emit(context_r36); })(\"delete\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_delete_0_listener() { ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r39 = ɵɵnextContext(3); return ctx_r39.delete.emit(context_r36); })(\"clone\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_clone_0_listener() { ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r40 = ɵɵnextContext(3); return ctx_r40.clone.emit(context_r36); })(\"save\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_save_0_listener() { ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r41 = ɵɵnextContext(3); return ctx_r41.save.emit(context_r36); })(\"hide\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_hide_0_listener() { ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r42 = ɵɵnextContext(3); return ctx_r42.hideContext(context_r36); })(\"show\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_show_0_listener() { ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r43 = ɵɵnextContext(3); return ctx_r43.showContext(context_r36); })(\"favorite\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_favorite_0_listener() { ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r44 = ɵɵnextContext(3); return ctx_r44.favorite.emit(context_r36); })(\"manageTools\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_manageTools_0_listener() { ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r45 = ɵɵnextContext(3); return ctx_r45.manageTools.emit(context_r36); })(\"managePermissions\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_managePermissions_0_listener() { ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r46 = ɵɵnextContext(3); return ctx_r46.managePermissions.emit(context_r36); })(\"select\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_select_0_listener() { ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r47 = ɵɵnextContext(3); return ctx_r47.select.emit(context_r36); })(\"unselect\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_unselect_0_listener() { ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r48 = ɵɵnextContext(3); return ctx_r48.unselect.emit(context_r36); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const context_r36 = ctx.$implicit;\n    const ctx_r35 = ɵɵnextContext(3);\n    ɵɵproperty(\"selected\", ctx_r35.selectedContext && ctx_r35.selectedContext.uri === context_r36.uri)(\"context\", context_r36)(\"default\", context_r36.id && ctx_r35.defaultContextId && ctx_r35.defaultContextId === context_r36.id);\n} }\nfunction ContextListComponent_ng_template_14_igo_collapsible_0_Template(rf, ctx) { if (rf & 1) {\n    const _r50 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-collapsible\", 30);\n    ɵɵlistener(\"toggle\", function ContextListComponent_ng_template_14_igo_collapsible_0_Template_igo_collapsible_toggle_0_listener($event) { ɵɵrestoreView(_r50); const groupContexts_r32 = ɵɵnextContext().$implicit; const ctx_r49 = ɵɵnextContext(); return (ctx_r49.collapsed[ctx_r49.titleMapping[groupContexts_r32.key]] = $event); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵtemplate(2, ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template, 1, 3, \"ng-template\", 10);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const groupContexts_r32 = ɵɵnextContext().$implicit;\n    const ctx_r33 = ɵɵnextContext();\n    ɵɵproperty(\"title\", ɵɵpipeBind1(1, 3, ctx_r33.titleMapping[groupContexts_r32.key]))(\"collapsed\", ctx_r33.collapsed[ctx_r33.titleMapping[groupContexts_r32.key]]);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", groupContexts_r32.value);\n} }\nfunction ContextListComponent_ng_template_14_1_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    const _r56 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-context-item\", 32);\n    ɵɵlistener(\"select\", function ContextListComponent_ng_template_14_1_ng_template_0_Template_igo_context_item_select_0_listener() { ɵɵrestoreView(_r56); const context_r54 = ctx.$implicit; const ctx_r55 = ɵɵnextContext(3); return ctx_r55.select.emit(context_r54); })(\"unselect\", function ContextListComponent_ng_template_14_1_ng_template_0_Template_igo_context_item_unselect_0_listener() { ɵɵrestoreView(_r56); const context_r54 = ctx.$implicit; const ctx_r57 = ɵɵnextContext(3); return ctx_r57.unselect.emit(context_r54); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const context_r54 = ctx.$implicit;\n    const ctx_r53 = ɵɵnextContext(3);\n    ɵɵproperty(\"selected\", ctx_r53.selectedContext && ctx_r53.selectedContext.uri === context_r54.uri)(\"context\", context_r54)(\"default\", ctx_r53.defaultContextId === context_r54.id);\n} }\nfunction ContextListComponent_ng_template_14_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, ContextListComponent_ng_template_14_1_ng_template_0_Template, 1, 3, \"ng-template\", 10);\n} if (rf & 2) {\n    const groupContexts_r32 = ɵɵnextContext().$implicit;\n    ɵɵproperty(\"ngForOf\", groupContexts_r32.value);\n} }\nfunction ContextListComponent_ng_template_14_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, ContextListComponent_ng_template_14_igo_collapsible_0_Template, 3, 5, \"igo-collapsible\", 28);\n    ɵɵtemplate(1, ContextListComponent_ng_template_14_1_Template, 1, 1, undefined, 29);\n} if (rf & 2) {\n    const groupContexts_r32 = ctx.$implicit;\n    const ctx_r7 = ɵɵnextContext();\n    ɵɵproperty(\"ngIf\", groupContexts_r32.value.length && ctx_r7.auth.authenticated);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", groupContexts_r32.value.length && !ctx_r7.auth.authenticated);\n} }\nclass ContextListComponent {\n    constructor(cdRef, contextService, configService, auth, dialog, languageService, storageService) {\n        this.cdRef = cdRef;\n        this.contextService = contextService;\n        this.configService = configService;\n        this.auth = auth;\n        this.dialog = dialog;\n        this.languageService = languageService;\n        this.storageService = storageService;\n        this.contextsInitial = { ours: [] };\n        this.contexts$ = new BehaviorSubject(this.contextsInitial);\n        this.change$ = new ReplaySubject(1);\n        this._contexts = { ours: [] };\n        this.collapsed = [];\n        this.select = new EventEmitter();\n        this.unselect = new EventEmitter();\n        this.edit = new EventEmitter();\n        this.delete = new EventEmitter();\n        this.save = new EventEmitter();\n        this.clone = new EventEmitter();\n        this.create = new EventEmitter();\n        this.hide = new EventEmitter();\n        this.show = new EventEmitter();\n        this.showHiddenContexts = new EventEmitter();\n        this.favorite = new EventEmitter();\n        this.managePermissions = new EventEmitter();\n        this.manageTools = new EventEmitter();\n        this.filterPermissionsChanged = new EventEmitter();\n        this.titleMapping = {\n            ours: 'igo.context.contextManager.ourContexts',\n            shared: 'igo.context.contextManager.sharedContexts',\n            public: 'igo.context.contextManager.publicContexts'\n        };\n        this.permissions = [];\n        this.actionStore = new ActionStore([]);\n        this.actionbarMode = ActionbarMode.Overlay;\n        this.color = 'primary';\n        this.showHidden = false;\n        this._term = '';\n        this._sortedAlpha = undefined;\n        this.showContextFilter = ContextListControlsEnum.always;\n        this.thresholdToFilter = 5;\n    }\n    get contexts() {\n        return this._contexts;\n    }\n    set contexts(value) {\n        this._contexts = value;\n        this.cdRef.detectChanges();\n        this.next();\n    }\n    get selectedContext() {\n        return this._selectedContext;\n    }\n    set selectedContext(value) {\n        this._selectedContext = value;\n        this.cdRef.detectChanges();\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get defaultContextId() {\n        return this._defaultContextId;\n    }\n    set defaultContextId(value) {\n        this._defaultContextId = value;\n    }\n    /**\n     * Context filter term\n     */\n    set term(value) {\n        this._term = value;\n        this.next();\n    }\n    get term() {\n        return this._term;\n    }\n    get sortedAlpha() {\n        return this._sortedAlpha;\n    }\n    set sortedAlpha(value) {\n        this._sortedAlpha = value;\n        this.next();\n    }\n    ngOnInit() {\n        this.change$$ = this.change$\n            .pipe(debounce(() => {\n            return this.contexts.ours.length === 0 ? EMPTY : timer(50);\n        }))\n            .subscribe(() => {\n            this.contexts$.next(this.filterContextsList(this.contexts));\n        });\n        this.actionStore.load([\n            {\n                id: 'emptyContext',\n                title: this.languageService.translate.instant('igo.context.contextManager.emptyContext'),\n                icon: 'map-outline',\n                tooltip: this.languageService.translate.instant('igo.context.contextManager.emptyContextTooltip'),\n                handler: () => {\n                    this.createContext(true);\n                }\n            },\n            {\n                id: 'contextFromMap',\n                title: this.languageService.translate.instant('igo.context.contextManager.contextMap'),\n                icon: 'map-check',\n                tooltip: this.languageService.translate.instant('igo.context.contextManager.contextMapTooltip'),\n                handler: () => {\n                    this.createContext(false);\n                }\n            }\n        ]);\n    }\n    next() {\n        this.change$.next();\n    }\n    filterContextsList(contexts) {\n        if (this.term === '') {\n            if (this.sortedAlpha) {\n                contexts = this.sortContextsList(contexts);\n            }\n            return contexts;\n        }\n        else {\n            const ours = contexts.ours.filter((context) => {\n                const filterNormalized = this.term\n                    .toLowerCase()\n                    .normalize('NFD')\n                    .replace(/[\\u0300-\\u036f]/g, '');\n                const contextTitleNormalized = context.title\n                    .toLowerCase()\n                    .normalize('NFD')\n                    .replace(/[\\u0300-\\u036f]/g, '');\n                return contextTitleNormalized.includes(filterNormalized);\n            });\n            let updateContexts = {\n                ours\n            };\n            if (this.contexts.public) {\n                const publics = contexts.public.filter((context) => {\n                    const filterNormalized = this.term\n                        .toLowerCase()\n                        .normalize('NFD')\n                        .replace(/[\\u0300-\\u036f]/g, '');\n                    const contextTitleNormalized = context.title\n                        .toLowerCase()\n                        .normalize('NFD')\n                        .replace(/[\\u0300-\\u036f]/g, '');\n                    return contextTitleNormalized.includes(filterNormalized);\n                });\n                updateContexts.public = publics;\n            }\n            if (this.contexts.shared) {\n                const shared = contexts.shared.filter((context) => {\n                    const filterNormalized = this.term\n                        .toLowerCase()\n                        .normalize('NFD')\n                        .replace(/[\\u0300-\\u036f]/g, '');\n                    const contextTitleNormalized = context.title\n                        .toLowerCase()\n                        .normalize('NFD')\n                        .replace(/[\\u0300-\\u036f]/g, '');\n                    return contextTitleNormalized.includes(filterNormalized);\n                });\n                updateContexts.shared = shared;\n            }\n            if (this.sortedAlpha) {\n                updateContexts = this.sortContextsList(updateContexts);\n            }\n            return updateContexts;\n        }\n    }\n    ngOnDestroy() {\n        this.change$$.unsubscribe();\n    }\n    showFilter() {\n        switch (this.showContextFilter) {\n            case ContextListControlsEnum.always:\n                return true;\n            case ContextListControlsEnum.never:\n                return false;\n            default:\n                let totalLength = this.contexts.ours.length;\n                this.contexts.public\n                    ? (totalLength += this.contexts.public.length)\n                    : (totalLength += 0);\n                this.contexts.shared\n                    ? (totalLength += this.contexts.shared.length)\n                    : (totalLength += 0);\n                if (totalLength >= this.thresholdToFilter) {\n                    return true;\n                }\n                return false;\n        }\n    }\n    sortContextsList(contexts) {\n        if (contexts) {\n            const contextsList = JSON.parse(JSON.stringify(contexts));\n            contextsList.ours.sort((a, b) => {\n                if (this.normalize(a.title) < this.normalize(b.title)) {\n                    return -1;\n                }\n                if (this.normalize(a.title) > this.normalize(b.title)) {\n                    return 1;\n                }\n                return 0;\n            });\n            if (contextsList.shared) {\n                contextsList.shared.sort((a, b) => {\n                    if (this.normalize(a.title) < this.normalize(b.title)) {\n                        return -1;\n                    }\n                    if (this.normalize(a.title) > this.normalize(b.title)) {\n                        return 1;\n                    }\n                    return 0;\n                });\n            }\n            else if (contextsList.public) {\n                contextsList.public.sort((a, b) => {\n                    if (this.normalize(a.title) < this.normalize(b.title)) {\n                        return -1;\n                    }\n                    if (this.normalize(a.title) > this.normalize(b.title)) {\n                        return 1;\n                    }\n                    return 0;\n                });\n            }\n            return contextsList;\n        }\n    }\n    normalize(str) {\n        return str\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '')\n            .toLowerCase();\n    }\n    toggleSort(sortAlpha) {\n        this.sortedAlpha = sortAlpha;\n    }\n    clearFilter() {\n        this.term = '';\n    }\n    createContext(empty) {\n        this.dialog\n            .open(BookmarkDialogComponent, { disableClose: false })\n            .afterClosed()\n            .pipe(take(1))\n            .subscribe((title) => {\n            if (title) {\n                this.create.emit({ title, empty });\n            }\n        });\n    }\n    getPermission(user) {\n        if (user) {\n            const permission = this.permissions.find((p) => p.name === user.name);\n            return permission;\n        }\n    }\n    userSelection(user, parent) {\n        const permission = this.getPermission(user);\n        if (permission) {\n            permission.checked = !permission.checked;\n            this.storageService.set('contexts.permissions.' + permission.name, permission.checked);\n            permission.indeterminate = false;\n        }\n        if (parent) {\n            let indeterminate = false;\n            for (const c of parent.childs) {\n                const cPermission = this.getPermission(c);\n                if (cPermission.checked !== permission.checked) {\n                    indeterminate = true;\n                    break;\n                }\n            }\n            const parentPermission = this.getPermission(parent);\n            if (parentPermission) {\n                parentPermission.checked = permission.checked;\n                this.storageService.set('contexts.permissions.' + parentPermission.name, permission.checked);\n                parentPermission.indeterminate = indeterminate;\n            }\n        }\n        if (user.childs) {\n            for (const c of user.childs) {\n                const childrenPermission = this.getPermission(c);\n                if (childrenPermission &&\n                    childrenPermission.checked !== permission.checked) {\n                    childrenPermission.checked = permission.checked;\n                    this.storageService.set('contexts.permissions.' + childrenPermission.name, permission.checked);\n                }\n            }\n        }\n        this.filterPermissionsChanged.emit(this.permissions);\n    }\n    hideContext(context) {\n        context.hidden = true;\n        if (!this.showHidden) {\n            const contexts = { ours: [], shared: [], public: [] };\n            contexts.ours = this.contexts.ours.filter((c) => c.id !== context.id);\n            contexts.shared = this.contexts.shared.filter((c) => c.id !== context.id);\n            contexts.public = this.contexts.public.filter((c) => c.id !== context.id);\n            this.contexts = contexts;\n        }\n        this.hide.emit(context);\n    }\n    showContext(context) {\n        context.hidden = false;\n        this.show.emit(context);\n    }\n}\nContextListComponent.ɵfac = function ContextListComponent_Factory(t) { return new (t || ContextListComponent)(ɵɵdirectiveInject(ChangeDetectorRef), ɵɵdirectiveInject(ContextService), ɵɵdirectiveInject(ConfigService), ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(MatDialog), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(StorageService)); };\nContextListComponent.ɵcmp = ɵɵdefineComponent({ type: ContextListComponent, selectors: [[\"igo-context-list\"]], inputs: { contexts: \"contexts\", selectedContext: \"selectedContext\", map: \"map\", defaultContextId: \"defaultContextId\", term: \"term\" }, outputs: { select: \"select\", unselect: \"unselect\", edit: \"edit\", delete: \"delete\", save: \"save\", clone: \"clone\", create: \"create\", hide: \"hide\", show: \"show\", showHiddenContexts: \"showHiddenContexts\", favorite: \"favorite\", managePermissions: \"managePermissions\", manageTools: \"manageTools\", filterPermissionsChanged: \"filterPermissionsChanged\" }, decls: 17, vars: 16, consts: [[3, \"navigation\"], [3, \"ngClass\", 4, \"ngIf\"], [\"class\", \"sort-alpha\", \"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"class\", \"add-context-button\", \"icon\", \"plus\", 3, \"iconColor\", \"store\", \"withIcon\", \"withTitle\", \"horizontal\", \"mode\", 4, \"ngIf\"], [\"class\", \"users-filter\", \"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"matMenuTriggerFor\", 4, \"ngIf\"], [\"accountMenu\", \"matMenu\"], [4, \"ngFor\", \"ngForOf\"], [1, \"profilsMenu\"], [1, \"mat-menu-item\", 3, \"checked\", \"click\", \"change\"], [\"mat-menu-item\", \"\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [3, \"ngClass\"], [\"matInput\", \"\", \"type\", \"text\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [\"mat-button\", \"\", \"mat-icon-button\", \"\", \"matSuffix\", \"\", \"class\", \"clear-button\", \"aria-label\", \"Clear\", \"color\", \"warn\", 3, \"click\", 4, \"ngIf\"], [\"mat-button\", \"\", \"mat-icon-button\", \"\", \"matSuffix\", \"\", \"aria-label\", \"Clear\", \"color\", \"warn\", 1, \"clear-button\", 3, \"click\"], [\"svgIcon\", \"close\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 1, \"sort-alpha\", 3, \"matTooltip\", \"click\"], [\"color\", \"primary\", \"svgIcon\", \"sort-alphabetical-variant\"], [\"color\", \"warn\", \"svgIcon\", \"sort-variant-remove\"], [\"icon\", \"plus\", 1, \"add-context-button\", 3, \"iconColor\", \"store\", \"withIcon\", \"withTitle\", \"horizontal\", \"mode\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 1, \"users-filter\", 3, \"matTooltip\", \"matMenuTriggerFor\"], [\"color\", \"primary\", \"svgIcon\", \"filter-menu\"], [1, \"mat-menu-item\", 3, \"checked\", \"indeterminate\", \"click\", \"change\"], [\"mat-menu-item\", \"\", 3, \"matMenuTriggerFor\", 4, \"ngIf\"], [\"mat-menu-item\", \"\", 4, \"ngIf\"], [\"subAccountMenu\", \"matMenu\"], [\"class\", \"mat-menu-item\", 3, \"checked\", \"click\", \"change\", 4, \"ngFor\", \"ngForOf\"], [\"mat-menu-item\", \"\", 3, \"matMenuTriggerFor\"], [3, \"title\", \"collapsed\", \"toggle\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"title\", \"collapsed\", \"toggle\"], [\"igoListItem\", \"\", \"color\", \"accent\", 3, \"selected\", \"context\", \"default\", \"edit\", \"delete\", \"clone\", \"save\", \"hide\", \"show\", \"favorite\", \"manageTools\", \"managePermissions\", \"select\", \"unselect\"], [\"igoListItem\", \"\", \"color\", \"accent\", 3, \"selected\", \"context\", \"default\", \"select\", \"unselect\"]], template: function ContextListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-list\", 0);\n        ɵɵtemplate(1, ContextListComponent_mat_form_field_1_Template, 4, 6, \"mat-form-field\", 1);\n        ɵɵtemplate(2, ContextListComponent_button_2_Template, 3, 3, \"button\", 2);\n        ɵɵtemplate(3, ContextListComponent_button_3_Template, 3, 3, \"button\", 2);\n        ɵɵtemplate(4, ContextListComponent_igo_actionbar_4_Template, 1, 6, \"igo-actionbar\", 3);\n        ɵɵtemplate(5, ContextListComponent_button_5_Template, 3, 4, \"button\", 4);\n        ɵɵelementStart(6, \"mat-menu\", null, 5);\n        ɵɵtemplate(8, ContextListComponent_ng_container_8_Template, 8, 5, \"ng-container\", 6);\n        ɵɵelementStart(9, \"span\", 7);\n        ɵɵelementStart(10, \"mat-checkbox\", 8);\n        ɵɵlistener(\"click\", function ContextListComponent_Template_mat_checkbox_click_10_listener($event) { return $event.stopPropagation(); })(\"change\", function ContextListComponent_Template_mat_checkbox_change_10_listener() { return ctx.showHiddenContexts.emit(); });\n        ɵɵelementEnd();\n        ɵɵelementStart(11, \"button\", 9);\n        ɵɵtext(12);\n        ɵɵpipe(13, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵtemplate(14, ContextListComponent_ng_template_14_Template, 2, 2, \"ng-template\", 10);\n        ɵɵpipe(15, \"keyvalue\");\n        ɵɵpipe(16, \"async\");\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"navigation\", true);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.showFilter());\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", !ctx.sortedAlpha);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.sortedAlpha);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.auth.authenticated && ctx.configService.getConfig(\"context\"));\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.auth.authenticated && ctx.configService.getConfig(\"context\"));\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngForOf\", ctx.users);\n        ɵɵadvance(2);\n        ɵɵproperty(\"checked\", ctx.showHidden);\n        ɵɵadvance(2);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(13, 10, \"igo.context.contextManager.showHidden\"), \" \");\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(15, 12, ɵɵpipeBind1(16, 14, ctx.contexts$)));\n    } }, directives: [ListComponent, NgIf, _MatMenu, NgForOf, MatCheckbox, MatMenuItem, MatFormField, NgClass, MatInput, DefaultValueAccessor, NgControlStatus, NgModel, MatButton, MatSuffix, MatIcon, MatTooltip, ActionbarComponent, MatMenuTrigger, CollapsibleComponent, ContextItemComponent, ListItemDirective], pipes: [TranslatePipe, KeyValuePipe, AsyncPipe], styles: [\".context-filter-max-width[_ngcontent-%COMP%]{margin:5px;padding-left:6px;width:calc(100% - 100px)}.context-filter-min-width[_ngcontent-%COMP%]{margin:5px;padding-left:6px;width:calc(100% - 135px)}.clear-button[_ngcontent-%COMP%]{padding-right:5px}mat-form-field[_ngcontent-%COMP%]{height:40px}.profilsMenu[_ngcontent-%COMP%]{display:flex}.profilsMenu[_ngcontent-%COMP%] > mat-checkbox[_ngcontent-%COMP%]{width:8px}.add-context-button[_ngcontent-%COMP%]{display:inline-flex;margin:0;width:40px}\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-list',\n                templateUrl: './context-list.component.html',\n                styleUrls: ['./context-list.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ChangeDetectorRef }, { type: ContextService }, { type: ConfigService }, { type: AuthService }, { type: MatDialog }, { type: LanguageService }, { type: StorageService }]; }, { contexts: [{\n            type: Input\n        }], selectedContext: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], defaultContextId: [{\n            type: Input\n        }], select: [{\n            type: Output\n        }], unselect: [{\n            type: Output\n        }], edit: [{\n            type: Output\n        }], delete: [{\n            type: Output\n        }], save: [{\n            type: Output\n        }], clone: [{\n            type: Output\n        }], create: [{\n            type: Output\n        }], hide: [{\n            type: Output\n        }], show: [{\n            type: Output\n        }], showHiddenContexts: [{\n            type: Output\n        }], favorite: [{\n            type: Output\n        }], managePermissions: [{\n            type: Output\n        }], manageTools: [{\n            type: Output\n        }], filterPermissionsChanged: [{\n            type: Output\n        }], term: [{\n            type: Input\n        }] }); })();\n\nclass ContextListBindingDirective {\n    constructor(component, contextService, mapService, languageService, confirmDialogService, messageService, auth, storageService) {\n        this.contextService = contextService;\n        this.mapService = mapService;\n        this.languageService = languageService;\n        this.confirmDialogService = confirmDialogService;\n        this.messageService = messageService;\n        this.auth = auth;\n        this.storageService = storageService;\n        this.component = component;\n    }\n    onSelect(context) {\n        this.contextService.loadContext(context.uri);\n    }\n    onEdit(context) {\n        this.contextService.loadEditedContext(context.uri);\n    }\n    onSave(context) {\n        const map = this.mapService.getMap();\n        const contextFromMap = this.contextService.getContextFromMap(map);\n        const msgSuccess = () => {\n            const translate = this.languageService.translate;\n            const message = translate.instant('igo.context.contextManager.dialog.saveMsg', {\n                value: context.title\n            });\n            const title = translate.instant('igo.context.contextManager.dialog.saveTitle');\n            this.messageService.success(message, title);\n        };\n        if (context.imported) {\n            contextFromMap.title = context.title;\n            this.contextService.delete(context.id, true);\n            this.contextService.create(contextFromMap).subscribe((contextCreated) => {\n                this.contextService.loadContext(contextCreated.uri);\n                msgSuccess();\n            });\n            return;\n        }\n        const changes = {\n            layers: contextFromMap.layers,\n            map: {\n                view: contextFromMap.map.view\n            }\n        };\n        this.contextService.update(context.id, changes).subscribe(() => {\n            msgSuccess();\n        });\n    }\n    onFavorite(context) {\n        this.contextService.setDefault(context.id).subscribe(() => {\n            this.contextService.defaultContextId$.next(context.id);\n            const translate = this.languageService.translate;\n            const message = translate.instant('igo.context.contextManager.dialog.favoriteMsg', {\n                value: context.title\n            });\n            const title = translate.instant('igo.context.contextManager.dialog.favoriteTitle');\n            this.messageService.success(message, title);\n        });\n    }\n    onManageTools(context) {\n        this.contextService.loadEditedContext(context.uri);\n    }\n    onManagePermissions(context) {\n        this.contextService.loadEditedContext(context.uri);\n    }\n    onDelete(context) {\n        const translate = this.languageService.translate;\n        this.confirmDialogService\n            .open(translate.instant('igo.context.contextManager.dialog.confirmDelete'))\n            .subscribe((confirm) => {\n            if (confirm) {\n                this.contextService\n                    .delete(context.id, context.imported)\n                    .subscribe(() => {\n                    const message = translate.instant('igo.context.contextManager.dialog.deleteMsg', {\n                        value: context.title\n                    });\n                    const title = translate.instant('igo.context.contextManager.dialog.deleteTitle');\n                    this.messageService.info(message, title);\n                });\n            }\n        });\n    }\n    onClone(context) {\n        const properties = {\n            title: context.title + '-copy',\n            uri: context.uri + '-copy'\n        };\n        this.contextService.clone(context.id, properties).subscribe(() => {\n            const translate = this.languageService.translate;\n            const message = translate.instant('igo.context.contextManager.dialog.cloneMsg', {\n                value: context.title\n            });\n            const title = translate.instant('igo.context.contextManager.dialog.cloneTitle');\n            this.messageService.success(message, title);\n        });\n    }\n    onCreate(opts) {\n        const { title, empty } = opts;\n        const context = this.contextService.getContextFromMap(this.component.map, empty);\n        context.title = title;\n        this.contextService.create(context).subscribe(() => {\n            const translate = this.languageService.translate;\n            const titleD = translate.instant('igo.context.bookmarkButton.dialog.createTitle');\n            const message = translate.instant('igo.context.bookmarkButton.dialog.createMsg', {\n                value: context.title\n            });\n            this.messageService.success(message, titleD);\n            this.contextService.loadContext(context.uri);\n        });\n    }\n    loadContexts() {\n        const permissions = ['none'];\n        for (const p of this.component.permissions) {\n            if (p.checked === true || p.indeterminate === true) {\n                permissions.push(p.name);\n            }\n        }\n        this.component.showHidden\n            ? this.contextService.loadContexts(permissions, true)\n            : this.contextService.loadContexts(permissions, false);\n    }\n    showHiddenContexts() {\n        this.component.showHidden = !this.component.showHidden;\n        this.storageService.set('contexts.showHidden', this.component.showHidden);\n        this.loadContexts();\n    }\n    onShowContext(context) {\n        this.contextService.showContext(context.id).subscribe();\n    }\n    onHideContext(context) {\n        this.contextService.hideContext(context.id).subscribe();\n    }\n    ngOnInit() {\n        // Override input contexts\n        this.component.contexts = { ours: [] };\n        this.component.showHidden = this.storageService.get('contexts.showHidden');\n        this.contexts$$ = this.contextService.contexts$.subscribe((contexts) => this.handleContextsChange(contexts));\n        this.defaultContextId$$ = this.contextService.defaultContextId$.subscribe((id) => {\n            this.component.defaultContextId = id;\n        });\n        // See feature-list.component for an explanation about the debounce time\n        this.selectedContext$$ = this.contextService.context$\n            .pipe(debounceTime(100))\n            .subscribe((context) => (this.component.selectedContext = context));\n        this.auth.authenticate$.subscribe((authenticate) => {\n            if (authenticate) {\n                this.contextService.getProfilByUser().subscribe((profils) => {\n                    this.component.users = profils;\n                    this.component.permissions = [];\n                    const profilsAcc = this.component.users.reduce((acc, cur) => {\n                        acc = acc.concat(cur);\n                        acc = cur.childs ? acc.concat(cur.childs) : acc;\n                        return acc;\n                    }, []);\n                    for (const user of profilsAcc) {\n                        const permission = {\n                            name: user.name,\n                            checked: this.storageService.get('contexts.permissions.' + user.name)\n                        };\n                        if (permission.checked === null) {\n                            permission.checked = true;\n                        }\n                        this.component.permissions.push(permission);\n                    }\n                    const permissions = ['none'];\n                    for (const p of this.component.permissions) {\n                        if (p.checked === true || p.indeterminate === true) {\n                            permissions.push(p.name);\n                        }\n                    }\n                    this.component.showHidden\n                        ? this.contextService.loadContexts(permissions, true)\n                        : this.contextService.loadContexts(permissions, false);\n                });\n            }\n        });\n    }\n    ngOnDestroy() {\n        this.contexts$$.unsubscribe();\n        this.selectedContext$$.unsubscribe();\n        this.defaultContextId$$.unsubscribe();\n    }\n    handleContextsChange(contexts) {\n        this.component.contexts = contexts;\n    }\n}\nContextListBindingDirective.ɵfac = function ContextListBindingDirective_Factory(t) { return new (t || ContextListBindingDirective)(ɵɵdirectiveInject(ContextListComponent, 2), ɵɵdirectiveInject(ContextService), ɵɵdirectiveInject(MapService), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(ConfirmDialogService), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(StorageService)); };\nContextListBindingDirective.ɵdir = ɵɵdefineDirective({ type: ContextListBindingDirective, selectors: [[\"\", \"igoContextListBinding\", \"\"]], hostBindings: function ContextListBindingDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"select\", function ContextListBindingDirective_select_HostBindingHandler($event) { return ctx.onSelect($event); })(\"edit\", function ContextListBindingDirective_edit_HostBindingHandler($event) { return ctx.onEdit($event); })(\"save\", function ContextListBindingDirective_save_HostBindingHandler($event) { return ctx.onSave($event); })(\"favorite\", function ContextListBindingDirective_favorite_HostBindingHandler($event) { return ctx.onFavorite($event); })(\"manageTools\", function ContextListBindingDirective_manageTools_HostBindingHandler($event) { return ctx.onManageTools($event); })(\"managePermissions\", function ContextListBindingDirective_managePermissions_HostBindingHandler($event) { return ctx.onManagePermissions($event); })(\"delete\", function ContextListBindingDirective_delete_HostBindingHandler($event) { return ctx.onDelete($event); })(\"clone\", function ContextListBindingDirective_clone_HostBindingHandler($event) { return ctx.onClone($event); })(\"create\", function ContextListBindingDirective_create_HostBindingHandler($event) { return ctx.onCreate($event); })(\"filterPermissionsChanged\", function ContextListBindingDirective_filterPermissionsChanged_HostBindingHandler() { return ctx.loadContexts(); })(\"showHiddenContexts\", function ContextListBindingDirective_showHiddenContexts_HostBindingHandler() { return ctx.showHiddenContexts(); })(\"show\", function ContextListBindingDirective_show_HostBindingHandler($event) { return ctx.onShowContext($event); })(\"hide\", function ContextListBindingDirective_hide_HostBindingHandler($event) { return ctx.onHideContext($event); });\n    } } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextListBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoContextListBinding]'\n            }]\n    }], function () { return [{ type: ContextListComponent, decorators: [{\n                type: Self\n            }] }, { type: ContextService }, { type: MapService }, { type: LanguageService }, { type: ConfirmDialogService }, { type: MessageService }, { type: AuthService }, { type: StorageService }]; }, { onSelect: [{\n            type: HostListener,\n            args: ['select', ['$event']]\n        }], onEdit: [{\n            type: HostListener,\n            args: ['edit', ['$event']]\n        }], onSave: [{\n            type: HostListener,\n            args: ['save', ['$event']]\n        }], onFavorite: [{\n            type: HostListener,\n            args: ['favorite', ['$event']]\n        }], onManageTools: [{\n            type: HostListener,\n            args: ['manageTools', ['$event']]\n        }], onManagePermissions: [{\n            type: HostListener,\n            args: ['managePermissions', ['$event']]\n        }], onDelete: [{\n            type: HostListener,\n            args: ['delete', ['$event']]\n        }], onClone: [{\n            type: HostListener,\n            args: ['clone', ['$event']]\n        }], onCreate: [{\n            type: HostListener,\n            args: ['create', ['$event']]\n        }], loadContexts: [{\n            type: HostListener,\n            args: ['filterPermissionsChanged']\n        }], showHiddenContexts: [{\n            type: HostListener,\n            args: ['showHiddenContexts']\n        }], onShowContext: [{\n            type: HostListener,\n            args: ['show', ['$event']]\n        }], onHideContext: [{\n            type: HostListener,\n            args: ['hide', ['$event']]\n        }] }); })();\n\nfunction ContextFormComponent_span_8_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"span\", 11);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ctx_r0.prefix, \"-\");\n} }\nclass ContextFormComponent {\n    constructor(formBuilder, languageService, messageService) {\n        this.formBuilder = formBuilder;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this._disabled = false;\n        // TODO: replace any by ContextOptions or Context\n        this.submitForm = new EventEmitter();\n        this.clone = new EventEmitter();\n        this.delete = new EventEmitter();\n    }\n    get btnSubmitText() {\n        return this._btnSubmitText;\n    }\n    set btnSubmitText(value) {\n        this._btnSubmitText = value;\n    }\n    get context() {\n        return this._context;\n    }\n    set context(value) {\n        this._context = value;\n        this.buildForm();\n    }\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = value;\n    }\n    ngOnInit() {\n        this.buildForm();\n    }\n    handleFormSubmit(value) {\n        let inputs = Object.assign({}, value);\n        inputs = ObjectUtils.removeNull(inputs);\n        inputs.uri = inputs.uri.replace(' ', '');\n        if (inputs.uri) {\n            inputs.uri = this.prefix + '-' + inputs.uri;\n        }\n        else {\n            inputs.uri = this.prefix;\n        }\n        this.submitForm.emit(inputs);\n    }\n    copyTextToClipboard() {\n        const text = this.prefix + '-' + this.form.value.uri.replace(' ', '');\n        const successful = Clipboard.copy(text);\n        if (successful) {\n            const translate = this.languageService.translate;\n            const title = translate.instant('igo.context.contextManager.dialog.copyTitle');\n            const msg = translate.instant('igo.context.contextManager.dialog.copyMsg');\n            this.messageService.success(msg, title);\n        }\n    }\n    buildForm() {\n        const context = this.context || {};\n        const uriSplit = context.uri.split('-');\n        this.prefix = uriSplit.shift();\n        const uri = uriSplit.join('-');\n        this.form = this.formBuilder.group({\n            title: [context.title],\n            uri: [uri || ' ']\n        });\n    }\n}\nContextFormComponent.ɵfac = function ContextFormComponent_Factory(t) { return new (t || ContextFormComponent)(ɵɵdirectiveInject(FormBuilder), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(MessageService)); };\nContextFormComponent.ɵcmp = ɵɵdefineComponent({ type: ContextFormComponent, selectors: [[\"igo-context-form\"]], inputs: { btnSubmitText: \"btnSubmitText\", context: \"context\", disabled: \"disabled\" }, outputs: { submitForm: \"submitForm\", clone: \"clone\", delete: \"delete\" }, decls: 19, vars: 18, consts: [[1, \"igo-form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"full-width\"], [\"matInput\", \"\", \"required\", \"\", \"maxlength\", \"128\", \"formControlName\", \"title\", 3, \"placeholder\"], [\"id\", \"uriInput\", 1, \"full-width\"], [\"class\", \"prefix\", 4, \"ngIf\"], [1, \"fieldWrapper\"], [\"matInput\", \"\", \"maxlength\", \"64\", \"floatLabel\", \"always\", \"formControlName\", \"uri\", 3, \"placeholder\"], [\"id\", \"copyButton\", \"type\", \"button\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"primary\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"content-copy\"], [1, \"igo-form-button-group\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", 3, \"disabled\"], [1, \"prefix\"]], template: function ContextFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"form\", 0);\n        ɵɵlistener(\"ngSubmit\", function ContextFormComponent_Template_form_ngSubmit_0_listener() { return ctx.handleFormSubmit(ctx.form.value); });\n        ɵɵelementStart(1, \"mat-form-field\", 1);\n        ɵɵelement(2, \"input\", 2);\n        ɵɵpipe(3, \"translate\");\n        ɵɵelementStart(4, \"mat-error\");\n        ɵɵtext(5);\n        ɵɵpipe(6, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(7, \"mat-form-field\", 3);\n        ɵɵtemplate(8, ContextFormComponent_span_8_Template, 2, 1, \"span\", 4);\n        ɵɵelementStart(9, \"span\", 5);\n        ɵɵelement(10, \"input\", 6);\n        ɵɵpipe(11, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(12, \"button\", 7);\n        ɵɵlistener(\"click\", function ContextFormComponent_Template_button_click_12_listener() { return ctx.copyTextToClipboard(); });\n        ɵɵpipe(13, \"translate\");\n        ɵɵelement(14, \"mat-icon\", 8);\n        ɵɵelementEnd();\n        ɵɵelementStart(15, \"div\", 9);\n        ɵɵelementStart(16, \"button\", 10);\n        ɵɵtext(17);\n        ɵɵpipe(18, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"formGroup\", ctx.form);\n        ɵɵadvance(2);\n        ɵɵproperty(\"placeholder\", ɵɵpipeBind1(3, 8, \"igo.context.contextManager.form.title\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(6, 10, \"igo.context.contextManager.form.titleRequired\"), \" \");\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngIf\", ctx.prefix);\n        ɵɵadvance(2);\n        ɵɵproperty(\"placeholder\", ɵɵpipeBind1(11, 12, \"igo.context.contextManager.form.uri\"));\n        ɵɵadvance(2);\n        ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(13, 14, \"igo.context.contextManager.form.copy\"));\n        ɵɵadvance(4);\n        ɵɵproperty(\"disabled\", !ctx.form.valid || ctx.disabled);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(18, 16, \"igo.context.contextManager.form.edit\"), \" \");\n    } }, directives: [ɵangular_packages_forms_forms_y, NgControlStatusGroup, FormGroupDirective, MatFormField, MatInput, DefaultValueAccessor, RequiredValidator, MaxLengthValidator, NgControlStatus, FormControlName, MatError, NgIf, MatButton, MatTooltip, MatIcon], pipes: [TranslatePipe], styles: [\"form[_ngcontent-%COMP%]{margin:10px}.full-width[_ngcontent-%COMP%]{width:100%}#uriInput[_ngcontent-%COMP%]   .fieldWrapper[_ngcontent-%COMP%]{display:block;overflow:hidden}#uriInput[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]{float:left}#copyButton[_ngcontent-%COMP%]{float:right;left:5px;position:relative;top:-58px;width:24px}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-form',\n                templateUrl: './context-form.component.html',\n                styleUrls: ['./context-form.component.scss']\n            }]\n    }], function () { return [{ type: FormBuilder }, { type: LanguageService }, { type: MessageService }]; }, { btnSubmitText: [{\n            type: Input\n        }], context: [{\n            type: Input\n        }], disabled: [{\n            type: Input\n        }], submitForm: [{\n            type: Output\n        }], clone: [{\n            type: Output\n        }], delete: [{\n            type: Output\n        }] }); })();\n\nfunction ContextEditComponent_igo_context_form_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-context-form\", 1);\n    ɵɵlistener(\"submitForm\", function ContextEditComponent_igo_context_form_0_Template_igo_context_form_submitForm_0_listener($event) { ɵɵrestoreView(_r2); const ctx_r1 = ɵɵnextContext(); return ctx_r1.submitForm.emit($event); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"btnSubmitText\", ɵɵpipeBind1(1, 2, \"igo.context.contextManager.save\"))(\"context\", ctx_r0.context);\n} }\nclass ContextEditComponent {\n    constructor(cd) {\n        this.cd = cd;\n        this.submitForm = new EventEmitter();\n    }\n    get context() {\n        return this._context;\n    }\n    set context(value) {\n        this._context = value;\n        this.refresh();\n    }\n    refresh() {\n        this.cd.detectChanges();\n    }\n}\nContextEditComponent.ɵfac = function ContextEditComponent_Factory(t) { return new (t || ContextEditComponent)(ɵɵdirectiveInject(ChangeDetectorRef)); };\nContextEditComponent.ɵcmp = ɵɵdefineComponent({ type: ContextEditComponent, selectors: [[\"igo-context-edit\"]], inputs: { context: \"context\" }, outputs: { submitForm: \"submitForm\" }, decls: 1, vars: 1, consts: [[3, \"btnSubmitText\", \"context\", \"submitForm\", 4, \"ngIf\"], [3, \"btnSubmitText\", \"context\", \"submitForm\"]], template: function ContextEditComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, ContextEditComponent_igo_context_form_0_Template, 2, 4, \"igo-context-form\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.context);\n    } }, directives: [NgIf, ContextFormComponent], pipes: [TranslatePipe], encapsulation: 2 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextEditComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-edit',\n                templateUrl: './context-edit.component.html'\n            }]\n    }], function () { return [{ type: ChangeDetectorRef }]; }, { context: [{\n            type: Input\n        }], submitForm: [{\n            type: Output\n        }] }); })();\n\nclass ContextEditBindingDirective {\n    constructor(component, contextService, messageService, languageService) {\n        this.contextService = contextService;\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.submitSuccessed = new EventEmitter();\n        this.component = component;\n    }\n    onEdit(context) {\n        const id = this.component.context.id;\n        this.contextService.update(id, context).subscribe(() => {\n            const translate = this.languageService.translate;\n            const message = translate.instant('igo.context.contextManager.dialog.saveMsg', {\n                value: context.title || this.component.context.title\n            });\n            const title = translate.instant('igo.context.contextManager.dialog.saveTitle');\n            this.messageService.success(message, title);\n            this.contextService.setEditedContext(undefined);\n            this.submitSuccessed.emit(context);\n        });\n    }\n    ngOnInit() {\n        this.editedContext$$ = this.contextService.editedContext$.subscribe(context => this.handleEditedContextChange(context));\n    }\n    ngOnDestroy() {\n        this.editedContext$$.unsubscribe();\n    }\n    handleEditedContextChange(context) {\n        this.component.context = context;\n    }\n}\nContextEditBindingDirective.ɵfac = function ContextEditBindingDirective_Factory(t) { return new (t || ContextEditBindingDirective)(ɵɵdirectiveInject(ContextEditComponent, 2), ɵɵdirectiveInject(ContextService), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(LanguageService)); };\nContextEditBindingDirective.ɵdir = ɵɵdefineDirective({ type: ContextEditBindingDirective, selectors: [[\"\", \"igoContextEditBinding\", \"\"]], hostBindings: function ContextEditBindingDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"submitForm\", function ContextEditBindingDirective_submitForm_HostBindingHandler($event) { return ctx.onEdit($event); });\n    } }, outputs: { submitSuccessed: \"submitSuccessed\" } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextEditBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoContextEditBinding]'\n            }]\n    }], function () { return [{ type: ContextEditComponent, decorators: [{\n                type: Self\n            }] }, { type: ContextService }, { type: MessageService }, { type: LanguageService }]; }, { submitSuccessed: [{\n            type: Output\n        }], onEdit: [{\n            type: HostListener,\n            args: ['submitForm', ['$event']]\n        }] }); })();\n\nfunction ContextPermissionsComponent_div_0_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 3);\n    ɵɵelementStart(1, \"h4\");\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"p\");\n    ɵɵtext(5);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(ɵɵpipeBind1(3, 2, \"igo.context.permission.readOnlyTitle\"));\n    ɵɵadvance(3);\n    ɵɵtextInterpolate(ɵɵpipeBind1(6, 4, \"igo.context.permission.readOnlyMsg\"));\n} }\nfunction ContextPermissionsComponent_div_0_div_2_mat_radio_button_8_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-radio-button\", 8);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, \"igo.context.permission.scope.public\"), \" \");\n} }\nfunction ContextPermissionsComponent_div_0_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 3);\n    ɵɵelementStart(1, \"mat-radio-group\", 4);\n    ɵɵlistener(\"ngModelChange\", function ContextPermissionsComponent_div_0_div_2_Template_mat_radio_group_ngModelChange_1_listener($event) { ɵɵrestoreView(_r7); const ctx_r6 = ɵɵnextContext(2); return ctx_r6.context.scope = $event; })(\"change\", function ContextPermissionsComponent_div_0_div_2_Template_mat_radio_group_change_1_listener() { ɵɵrestoreView(_r7); const ctx_r8 = ɵɵnextContext(2); return ctx_r8.scopeChanged.emit(ctx_r8.context); });\n    ɵɵelementStart(2, \"mat-radio-button\", 5);\n    ɵɵtext(3);\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(5, \"mat-radio-button\", 6);\n    ɵɵtext(6);\n    ɵɵpipe(7, \"translate\");\n    ɵɵelementEnd();\n    ɵɵtemplate(8, ContextPermissionsComponent_div_0_div_2_mat_radio_button_8_Template, 3, 3, \"mat-radio-button\", 7);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngModel\", ctx_r2.context.scope);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(4, 4, \"igo.context.permission.scope.private\"), \" \");\n    ɵɵadvance(3);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(7, 6, \"igo.context.permission.scope.shared\"), \" \");\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r2.authService.isAdmin);\n} }\nfunction ContextPermissionsComponent_div_0_form_3_mat_option_6_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-option\", 20);\n    ɵɵtext(1);\n    ɵɵelement(2, \"br\");\n    ɵɵelementStart(3, \"small\", 21);\n    ɵɵtext(4);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const profil_r11 = ctx.$implicit;\n    ɵɵproperty(\"value\", profil_r11);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", profil_r11.title, \"\");\n    ɵɵadvance(3);\n    ɵɵtextInterpolate(profil_r11.name);\n} }\nfunction ContextPermissionsComponent_div_0_form_3_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"form\", 9);\n    ɵɵlistener(\"ngSubmit\", function ContextPermissionsComponent_div_0_form_3_Template_form_ngSubmit_0_listener() { ɵɵrestoreView(_r13); const ctx_r12 = ɵɵnextContext(2); return ctx_r12.handleFormSubmit(ctx_r12.form.value); });\n    ɵɵelementStart(1, \"mat-form-field\", 10);\n    ɵɵelement(2, \"input\", 11);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementStart(4, \"mat-autocomplete\", 12, 13);\n    ɵɵlistener(\"optionSelected\", function ContextPermissionsComponent_div_0_form_3_Template_mat_autocomplete_optionSelected_4_listener($event) { ɵɵrestoreView(_r13); const ctx_r14 = ɵɵnextContext(2); return ctx_r14.onProfilSelected($event.option.value); });\n    ɵɵtemplate(6, ContextPermissionsComponent_div_0_form_3_mat_option_6_Template, 5, 3, \"mat-option\", 14);\n    ɵɵelementEnd();\n    ɵɵelementStart(7, \"mat-error\");\n    ɵɵtext(8);\n    ɵɵpipe(9, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(10, \"mat-radio-group\", 15);\n    ɵɵelementStart(11, \"mat-radio-button\", 16);\n    ɵɵtext(12);\n    ɵɵpipe(13, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementStart(14, \"mat-radio-button\", 17);\n    ɵɵtext(15);\n    ɵɵpipe(16, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(17, \"div\", 18);\n    ɵɵelementStart(18, \"button\", 19);\n    ɵɵtext(19);\n    ɵɵpipe(20, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const _r9 = ɵɵreference(5);\n    const ctx_r3 = ɵɵnextContext(2);\n    ɵɵproperty(\"formGroup\", ctx_r3.form);\n    ɵɵadvance(2);\n    ɵɵproperty(\"placeholder\", ɵɵpipeBind1(3, 11, \"igo.context.permission.user\"))(\"formControl\", ctx_r3.formControl)(\"matAutocomplete\", _r9);\n    ɵɵadvance(2);\n    ɵɵproperty(\"displayWith\", ctx_r3.displayFn);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", ctx_r3.profils);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(9, 13, \"igo.context.permission.profilRequired\"), \" \");\n    ɵɵadvance(4);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(13, 15, \"igo.context.permission.read\"), \" \");\n    ɵɵadvance(3);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(16, 17, \"igo.context.permission.write\"), \" \");\n    ɵɵadvance(3);\n    ɵɵproperty(\"disabled\", !ctx_r3.form.valid);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(20, 19, \"igo.context.permission.addBtn\"), \" \");\n} }\nfunction ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_ng_template_2_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r23 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 29);\n    ɵɵlistener(\"click\", function ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_ng_template_2_button_7_Template_button_click_0_listener() { ɵɵrestoreView(_r23); const permission_r19 = ɵɵnextContext().$implicit; const ctx_r21 = ɵɵnextContext(5); return ctx_r21.removePermission.emit(permission_r19); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 30);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.context.permission.delete\"));\n} }\nfunction ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-list-item\");\n    ɵɵelement(1, \"mat-icon\", 25);\n    ɵɵelementStart(2, \"h4\", 26);\n    ɵɵtext(3);\n    ɵɵelementStart(4, \"small\", 21);\n    ɵɵtext(5);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(6, \"div\", 27);\n    ɵɵtemplate(7, ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_ng_template_2_button_7_Template, 3, 3, \"button\", 28);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const permission_r19 = ctx.$implicit;\n    const ctx_r18 = ɵɵnextContext(5);\n    ɵɵadvance(3);\n    ɵɵtextInterpolate1(\"\", permission_r19.profilTitle, \" \");\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(permission_r19.profil);\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r18.canWrite || permission_r19.profil === ctx_r18.authService.decodeToken().user.sourceId);\n} }\nfunction ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"igo-collapsible\", 24);\n    ɵɵpipe(1, \"translate\");\n    ɵɵtemplate(2, ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_ng_template_2_Template, 8, 3, \"ng-template\", 22);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const groupPermissions_r16 = ɵɵnextContext().$implicit;\n    ɵɵproperty(\"title\", ɵɵpipeBind1(1, 2, \"igo.context.permission.\" + groupPermissions_r16.key));\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngForOf\", groupPermissions_r16.value);\n} }\nfunction ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_Template, 3, 4, \"igo-collapsible\", 23);\n} if (rf & 2) {\n    const groupPermissions_r16 = ctx.$implicit;\n    ɵɵproperty(\"ngIf\", groupPermissions_r16.value.length);\n} }\nfunction ContextPermissionsComponent_div_0_igo_list_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"igo-list\");\n    ɵɵtemplate(1, ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_Template, 1, 1, \"ng-template\", 22);\n    ɵɵpipe(2, \"keyvalue\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵɵnextContext(2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngForOf\", ɵɵpipeBind1(2, 1, ctx_r4.permissions));\n} }\nfunction ContextPermissionsComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\");\n    ɵɵtemplate(1, ContextPermissionsComponent_div_0_div_1_Template, 7, 6, \"div\", 1);\n    ɵɵtemplate(2, ContextPermissionsComponent_div_0_div_2_Template, 9, 8, \"div\", 1);\n    ɵɵtemplate(3, ContextPermissionsComponent_div_0_form_3_Template, 21, 21, \"form\", 2);\n    ɵɵtemplate(4, ContextPermissionsComponent_div_0_igo_list_4_Template, 3, 3, \"igo-list\", 0);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", !ctx_r0.canWrite);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.canWrite);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.context.scope !== \"private\" && ctx_r0.canWrite);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.permissions && ctx_r0.context.scope !== \"private\");\n} }\nclass ContextPermissionsComponent {\n    constructor(formBuilder, cd, http, authService, config) {\n        this.formBuilder = formBuilder;\n        this.cd = cd;\n        this.http = http;\n        this.authService = authService;\n        this.config = config;\n        this._profils = [];\n        this.formControl = new FormControl();\n        this.addPermission = new EventEmitter();\n        this.removePermission = new EventEmitter();\n        this.scopeChanged = new EventEmitter();\n    }\n    get context() {\n        return this._context;\n    }\n    set context(value) {\n        this._context = value;\n        this.cd.detectChanges();\n    }\n    get permissions() {\n        return this._permissions;\n    }\n    set permissions(value) {\n        this._permissions = value;\n        this.cd.detectChanges();\n    }\n    get profils() {\n        return this._profils;\n    }\n    set profils(value) {\n        this._profils = value;\n        this.cd.detectChanges();\n    }\n    get canWrite() {\n        return this.context.permission === TypePermission[TypePermission.write];\n    }\n    ngOnInit() {\n        this.buildForm();\n        this.baseUrlProfils = this.config.getConfig('context.url') + '/profils-users?';\n        this.formValueChanges$$ = this.formControl.valueChanges.subscribe((value) => {\n            if (value.length) {\n                this.http.get(this.baseUrlProfils + 'q=' + value).subscribe(profils => {\n                    this.profils = profils;\n                });\n                this.profils.filter((profil) => {\n                    const filterNormalized = value.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n                    const profilTitleNormalized = profil.title.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n                    const profilNameNormalized = profil.name.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n                    const profilNormalized = profilNameNormalized + profilTitleNormalized;\n                    return profilNormalized.includes(filterNormalized);\n                });\n            }\n            else {\n                this.profils = [];\n            }\n        });\n    }\n    displayFn(profil) {\n        return profil ? profil.title : undefined;\n    }\n    handleFormSubmit(value) {\n        this.addPermission.emit(value);\n    }\n    buildForm() {\n        this.form = this.formBuilder.group({\n            profil: [],\n            typePermission: ['read']\n        });\n    }\n    onProfilSelected(value) {\n        this.form.setValue({\n            profil: value.name,\n            typePermission: this.form.value.typePermission\n        });\n    }\n}\nContextPermissionsComponent.ɵfac = function ContextPermissionsComponent_Factory(t) { return new (t || ContextPermissionsComponent)(ɵɵdirectiveInject(FormBuilder), ɵɵdirectiveInject(ChangeDetectorRef), ɵɵdirectiveInject(HttpClient), ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(ConfigService)); };\nContextPermissionsComponent.ɵcmp = ɵɵdefineComponent({ type: ContextPermissionsComponent, selectors: [[\"igo-context-permissions\"]], inputs: { context: \"context\", permissions: \"permissions\" }, outputs: { addPermission: \"addPermission\", removePermission: \"removePermission\", scopeChanged: \"scopeChanged\" }, decls: 1, vars: 1, consts: [[4, \"ngIf\"], [\"class\", \"scopeForm\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [1, \"scopeForm\"], [3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"private\"], [\"value\", \"protected\"], [\"value\", \"public\", 4, \"ngIf\"], [\"value\", \"public\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"full-width\"], [\"matInput\", \"\", \"required\", \"\", 3, \"placeholder\", \"formControl\", \"matAutocomplete\"], [3, \"displayWith\", \"optionSelected\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"typePermission\"], [\"value\", \"read\"], [\"value\", \"write\"], [1, \"igo-form-button-group\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", 3, \"disabled\"], [3, \"value\"], [1, \"mat-typography\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [3, \"title\", 4, \"ngIf\"], [3, \"title\"], [\"mat-list-avatar\", \"\", \"svgIcon\", \"account-outline\"], [\"mat-line\", \"\"], [\"igoStopPropagation\", \"\", 1, \"igo-actions-container\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"delete\"]], template: function ContextPermissionsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, ContextPermissionsComponent_div_0_Template, 5, 4, \"div\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.context);\n    } }, directives: [NgIf, MatRadioGroup, NgControlStatus, NgModel, MatRadioButton, ɵangular_packages_forms_forms_y, NgControlStatusGroup, FormGroupDirective, MatFormField, MatInput, DefaultValueAccessor, MatAutocompleteTrigger, RequiredValidator, FormControlDirective, MatAutocomplete, NgForOf, MatError, FormControlName, MatButton, MatOption, ListComponent, CollapsibleComponent, MatListItem, MatIcon, MatListAvatarCssMatStyler, MatLine, StopPropagationDirective, MatTooltip], pipes: [TranslatePipe, KeyValuePipe], styles: [\"[_nghost-%COMP%]{margin:10px}.full-width[_ngcontent-%COMP%]{width:100%}mat-radio-button[_ngcontent-%COMP%]{padding:14px 14px 14px 0}.scopeForm[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{padding:5px}mat-option[_ngcontent-%COMP%]     .mat-option-text{line-height:normal}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextPermissionsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-permissions',\n                templateUrl: './context-permissions.component.html',\n                styleUrls: ['./context-permissions.component.scss']\n            }]\n    }], function () { return [{ type: FormBuilder }, { type: ChangeDetectorRef }, { type: HttpClient }, { type: AuthService }, { type: ConfigService }]; }, { context: [{\n            type: Input\n        }], permissions: [{\n            type: Input\n        }], addPermission: [{\n            type: Output\n        }], removePermission: [{\n            type: Output\n        }], scopeChanged: [{\n            type: Output\n        }] }); })();\n\nclass ContextPermissionsBindingDirective {\n    constructor(component, contextService, languageService, messageService, cd) {\n        this.contextService = contextService;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.cd = cd;\n        this.component = component;\n    }\n    onAddPermission(permission) {\n        const translate = this.languageService.translate;\n        if (!permission.profil) {\n            const message = translate.instant('igo.context.contextManager.errors.addPermissionEmpty');\n            const title = translate.instant('igo.context.contextManager.errors.addPermissionTitle');\n            this.messageService.error(message, title);\n            return;\n        }\n        const contextId = this.component.context.id;\n        this.contextService\n            .addPermissionAssociation(contextId, permission.profil, permission.typePermission)\n            .subscribe(profils => {\n            for (const p of profils) {\n                this.component.permissions[permission.typePermission].push(p);\n            }\n            const profil = permission.profil;\n            const message = translate.instant('igo.context.permission.dialog.addMsg', {\n                value: profil\n            });\n            const title = translate.instant('igo.context.permission.dialog.addTitle');\n            this.messageService.success(message, title);\n            this.cd.detectChanges();\n        });\n    }\n    onRemovePermission(permission) {\n        const contextId = this.component.context.id;\n        this.contextService\n            .deletePermissionAssociation(contextId, permission.id)\n            .subscribe(() => {\n            const index = this.component.permissions[permission.typePermission].findIndex(p => {\n                return p.id === permission.id;\n            });\n            this.component.permissions[permission.typePermission].splice(index, 1);\n            const profil = permission.profil;\n            const translate = this.languageService.translate;\n            const message = translate.instant('igo.context.permission.dialog.deleteMsg', {\n                value: profil\n            });\n            const title = translate.instant('igo.context.permission.dialog.deleteTitle');\n            this.messageService.success(message, title);\n            this.cd.detectChanges();\n        });\n    }\n    onScopeChanged(context) {\n        const scope = context.scope;\n        this.contextService.update(context.id, { scope }).subscribe(() => {\n            const translate = this.languageService.translate;\n            const message = translate.instant('igo.context.permission.dialog.scopeChangedMsg', {\n                value: translate.instant('igo.context.permission.scope.' + scope)\n            });\n            const title = translate.instant('igo.context.permission.dialog.scopeChangedTitle');\n            this.messageService.success(message, title);\n        });\n    }\n    ngOnInit() {\n        this.editedContext$$ = this.contextService.editedContext$.subscribe(context => this.handleEditedContextChange(context));\n    }\n    ngOnDestroy() {\n        this.editedContext$$.unsubscribe();\n        this.contextService.editedContext$.next(undefined);\n    }\n    handleEditedContextChange(context) {\n        this.component.context = context;\n        if (context) {\n            this.contextService\n                .getPermissions(context.id)\n                .subscribe(permissionsArray => {\n                permissionsArray = permissionsArray || [];\n                const permissions = {\n                    read: permissionsArray.filter(p => {\n                        return p.typePermission.toString() === 'read';\n                    }),\n                    write: permissionsArray.filter(p => {\n                        return p.typePermission.toString() === 'write';\n                    })\n                };\n                return (this.component.permissions = permissions);\n            });\n        }\n    }\n}\nContextPermissionsBindingDirective.ɵfac = function ContextPermissionsBindingDirective_Factory(t) { return new (t || ContextPermissionsBindingDirective)(ɵɵdirectiveInject(ContextPermissionsComponent, 2), ɵɵdirectiveInject(ContextService), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(ChangeDetectorRef)); };\nContextPermissionsBindingDirective.ɵdir = ɵɵdefineDirective({ type: ContextPermissionsBindingDirective, selectors: [[\"\", \"igoContextPermissionsBinding\", \"\"]], hostBindings: function ContextPermissionsBindingDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"addPermission\", function ContextPermissionsBindingDirective_addPermission_HostBindingHandler($event) { return ctx.onAddPermission($event); })(\"removePermission\", function ContextPermissionsBindingDirective_removePermission_HostBindingHandler($event) { return ctx.onRemovePermission($event); })(\"scopeChanged\", function ContextPermissionsBindingDirective_scopeChanged_HostBindingHandler($event) { return ctx.onScopeChanged($event); });\n    } } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextPermissionsBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoContextPermissionsBinding]'\n            }]\n    }], function () { return [{ type: ContextPermissionsComponent, decorators: [{\n                type: Self\n            }] }, { type: ContextService }, { type: LanguageService }, { type: MessageService }, { type: ChangeDetectorRef }]; }, { onAddPermission: [{\n            type: HostListener,\n            args: ['addPermission', ['$event']]\n        }], onRemovePermission: [{\n            type: HostListener,\n            args: ['removePermission', ['$event']]\n        }], onScopeChanged: [{\n            type: HostListener,\n            args: ['scopeChanged', ['$event']]\n        }] }); })();\n\nclass BookmarkButtonComponent {\n    constructor(dialog, contextService, languageService, messageService) {\n        this.dialog = dialog;\n        this.contextService = contextService;\n        this.languageService = languageService;\n        this.messageService = messageService;\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    createContext() {\n        this.dialog\n            .open(BookmarkDialogComponent, { disableClose: false })\n            .afterClosed()\n            .pipe(take(1))\n            .subscribe(title => {\n            if (title) {\n                const context = this.contextService.getContextFromMap(this.map);\n                context.title = title;\n                this.contextService.create(context).subscribe(() => {\n                    const translate = this.languageService.translate;\n                    const titleD = translate.instant('igo.context.bookmarkButton.dialog.createTitle');\n                    const message = translate.instant('igo.context.bookmarkButton.dialog.createMsg', {\n                        value: context.title\n                    });\n                    this.messageService.success(message, titleD);\n                    this.contextService.loadContext(context.uri);\n                });\n            }\n        });\n    }\n}\nBookmarkButtonComponent.ɵfac = function BookmarkButtonComponent_Factory(t) { return new (t || BookmarkButtonComponent)(ɵɵdirectiveInject(MatDialog), ɵɵdirectiveInject(ContextService), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(MessageService)); };\nBookmarkButtonComponent.ɵcmp = ɵɵdefineComponent({ type: BookmarkButtonComponent, selectors: [[\"igo-bookmark-button\"]], inputs: { map: \"map\", color: \"color\" }, decls: 4, vars: 4, consts: [[1, \"igo-bookmark-button-container\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"above\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"star\"]], template: function BookmarkButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵelementStart(1, \"button\", 1);\n        ɵɵlistener(\"click\", function BookmarkButtonComponent_Template_button_click_1_listener() { return ctx.createContext(); });\n        ɵɵpipe(2, \"translate\");\n        ɵɵelement(3, \"mat-icon\", 2);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(2, 2, \"igo.context.bookmarkButton.create\"))(\"color\", ctx.color);\n    } }, directives: [MatButton, MatTooltip, MatIcon], pipes: [TranslatePipe], styles: [\".igo-bookmark-button-container[_ngcontent-%COMP%]{width:40px}.igo-bookmark-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff}.igo-bookmark-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#efefef}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(BookmarkButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-bookmark-button',\n                templateUrl: './bookmark-button.component.html',\n                styleUrls: ['./bookmark-button.component.scss']\n            }]\n    }], function () { return [{ type: MatDialog }, { type: ContextService }, { type: LanguageService }, { type: MessageService }]; }, { map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\nclass PoiService {\n    constructor(http, config) {\n        this.http = http;\n        this.config = config;\n        this.baseUrl = this.config.getConfig('context.url');\n    }\n    get() {\n        if (!this.baseUrl) {\n            return EMPTY;\n        }\n        const url = this.baseUrl + '/pois';\n        return this.http.get(url);\n    }\n    delete(id) {\n        const url = this.baseUrl + '/pois/' + id;\n        return this.http.delete(url);\n    }\n    create(context) {\n        const url = this.baseUrl + '/pois';\n        return this.http.post(url, context);\n    }\n}\nPoiService.ɵfac = function PoiService_Factory(t) { return new (t || PoiService)(ɵɵinject(HttpClient), ɵɵinject(ConfigService)); };\nPoiService.ɵprov = ɵɵdefineInjectable({ token: PoiService, factory: PoiService.ɵfac });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(PoiService, [{\n        type: Injectable\n    }], function () { return [{ type: HttpClient }, { type: ConfigService }]; }, null); })();\n\nclass PoiDialogComponent {\n    constructor(dialogRef) {\n        this.dialogRef = dialogRef;\n    }\n}\nPoiDialogComponent.ɵfac = function PoiDialogComponent_Factory(t) { return new (t || PoiDialogComponent)(ɵɵdirectiveInject(MatDialogRef)); };\nPoiDialogComponent.ɵcmp = ɵɵdefineComponent({ type: PoiDialogComponent, selectors: [[\"igo-poi-dialog\"]], decls: 14, vars: 14, consts: [[\"mat-dialog-title\", \"\", 1, \"mat-typography\"], [\"mat-dialog-content\", \"\"], [\"matInput\", \"\", \"required\", \"\", \"autocomplete\", \"off\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [\"mat-dialog-actions\", \"\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [\"mat-button\", \"\", 3, \"click\"]], template: function PoiDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"h1\", 0);\n        ɵɵtext(1);\n        ɵɵpipe(2, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(3, \"div\", 1);\n        ɵɵelementStart(4, \"mat-form-field\");\n        ɵɵelementStart(5, \"input\", 2);\n        ɵɵlistener(\"ngModelChange\", function PoiDialogComponent_Template_input_ngModelChange_5_listener($event) { return ctx.title = $event; });\n        ɵɵpipe(6, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(7, \"div\", 3);\n        ɵɵelementStart(8, \"button\", 4);\n        ɵɵlistener(\"click\", function PoiDialogComponent_Template_button_click_8_listener() { return ctx.dialogRef.close(ctx.title); });\n        ɵɵtext(9);\n        ɵɵpipe(10, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(11, \"button\", 5);\n        ɵɵlistener(\"click\", function PoiDialogComponent_Template_button_click_11_listener() { return ctx.dialogRef.close(false); });\n        ɵɵtext(12);\n        ɵɵpipe(13, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵtextInterpolate(ɵɵpipeBind1(2, 6, \"igo.context.poiButton.dialog.title\"));\n        ɵɵadvance(4);\n        ɵɵproperty(\"placeholder\", ɵɵpipeBind1(6, 8, \"igo.context.poiButton.dialog.placeholder\"))(\"ngModel\", ctx.title);\n        ɵɵadvance(3);\n        ɵɵproperty(\"disabled\", !ctx.title);\n        ɵɵadvance(1);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(10, 10, \"igo.common.confirmDialog.confirmBtn\"), \" \");\n        ɵɵadvance(3);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(13, 12, \"igo.common.confirmDialog.cancelBtn\"), \" \");\n    } }, directives: [MatDialogTitle, MatDialogContent, MatFormField, MatInput, DefaultValueAccessor, RequiredValidator, NgControlStatus, NgModel, MatDialogActions, MatButton], pipes: [TranslatePipe], encapsulation: 2 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(PoiDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-poi-dialog',\n                templateUrl: './poi-dialog.component.html'\n            }]\n    }], function () { return [{ type: MatDialogRef }]; }, null); })();\n\nfunction PoiButtonComponent_mat_option_8_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-option\", 6);\n    ɵɵlistener(\"click\", function PoiButtonComponent_mat_option_8_Template_mat_option_click_0_listener() { ɵɵrestoreView(_r3); const poi_r1 = ctx.$implicit; const ctx_r2 = ɵɵnextContext(); return ctx_r2.zoomOnPoi(poi_r1.id); });\n    ɵɵelementStart(1, \"div\", 2);\n    ɵɵtext(2);\n    ɵɵelementEnd();\n    ɵɵelementStart(3, \"button\", 7);\n    ɵɵlistener(\"click\", function PoiButtonComponent_mat_option_8_Template_button_click_3_listener() { ɵɵrestoreView(_r3); const poi_r1 = ctx.$implicit; const ctx_r4 = ɵɵnextContext(); return ctx_r4.deletePoi(poi_r1); });\n    ɵɵelement(4, \"mat-icon\", 8);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const poi_r1 = ctx.$implicit;\n    ɵɵproperty(\"value\", poi_r1.id);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate(poi_r1.title);\n} }\nclass PoiButtonComponent {\n    constructor(dialog, authService, poiService, messageService, languageService, confirmDialogService) {\n        this.dialog = dialog;\n        this.authService = authService;\n        this.poiService = poiService;\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.confirmDialogService = confirmDialogService;\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    ngOnInit() {\n        this.authenticate$$ = this.authService.authenticate$.subscribe(auth => {\n            if (auth) {\n                this.getPois();\n            }\n        });\n    }\n    ngOnDestroy() {\n        this.authenticate$$.unsubscribe();\n    }\n    deletePoi(poi) {\n        if (poi && poi.id) {\n            const translate = this.languageService.translate;\n            this.confirmDialogService\n                .open(translate.instant('igo.context.poiButton.dialog.confirmDelete'))\n                .subscribe(confirm => {\n                if (confirm) {\n                    this.poiService.delete(poi.id).subscribe(() => {\n                        const title = translate.instant('igo.context.poiButton.dialog.deleteTitle');\n                        const message = translate.instant('igo.context.poiButton.dialog.deleteMsg', {\n                            value: poi.title\n                        });\n                        this.messageService.info(message, title);\n                        this.pois = this.pois.filter(p => p.id !== poi.id);\n                    }, err => {\n                        err.error.title = 'DELETE Pois';\n                        this.messageService.showError(err);\n                    });\n                }\n            });\n        }\n    }\n    getPois() {\n        this.poiService.get().pipe(take(1)).subscribe(rep => {\n            this.pois = rep;\n        }, err => {\n            err.error.title = 'GET Pois';\n            this.messageService.showError(err);\n        });\n    }\n    createPoi() {\n        const view = this.map.ol.getView();\n        const proj = view.getProjection().getCode();\n        const center = new olPoint(view.getCenter()).transform(proj, 'EPSG:4326');\n        const poi = {\n            title: '',\n            x: center.getCoordinates()[0],\n            y: center.getCoordinates()[1],\n            zoom: view.getZoom()\n        };\n        this.dialog\n            .open(PoiDialogComponent, { disableClose: false })\n            .afterClosed()\n            .subscribe(title => {\n            if (title) {\n                poi.title = title;\n                this.poiService.create(poi).subscribe(newPoi => {\n                    const translate = this.languageService.translate;\n                    const titleD = translate.instant('igo.context.poiButton.dialog.createTitle');\n                    const message = translate.instant('igo.context.poiButton.dialog.createMsg', {\n                        value: poi.title\n                    });\n                    this.messageService.success(message, titleD);\n                    poi.id = newPoi.id;\n                    this.pois.push(poi);\n                }, err => {\n                    err.error.title = 'POST Pois';\n                    this.messageService.showError(err);\n                });\n            }\n        });\n    }\n    zoomOnPoi(id) {\n        const poi = this.pois.find(p => p.id === id);\n        const center = fromLonLat([Number(poi.x), Number(poi.y)], this.map.projection);\n        this.map.ol.getView().animate({\n            center,\n            zoom: poi.zoom,\n            duration: 500,\n            easing: easeOut\n        });\n    }\n}\nPoiButtonComponent.ɵfac = function PoiButtonComponent_Factory(t) { return new (t || PoiButtonComponent)(ɵɵdirectiveInject(MatDialog), ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(PoiService), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(ConfirmDialogService)); };\nPoiButtonComponent.ɵcmp = ɵɵdefineComponent({ type: PoiButtonComponent, selectors: [[\"igo-poi-button\"]], inputs: { map: \"map\", color: \"color\" }, decls: 9, vars: 7, consts: [[\"floatPlaceholder\", \"never\", 3, \"placeholder\"], [3, \"click\"], [1, \"titlePoi\"], [\"igoStopPropagation\", \"\", \"mat-icon-button\", \"\", \"color\", \"primary\", 1, \"addPoi\", \"buttonPoi\", 3, \"click\"], [\"svgIcon\", \"plus-circle\"], [3, \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\", \"click\"], [\"igoStopPropagation\", \"\", \"mat-icon-button\", \"\", \"color\", \"warn\", 1, \"deletePoi\", \"buttonPoi\", 3, \"click\"], [\"svgIcon\", \"delete\"]], template: function PoiButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-select\", 0);\n        ɵɵpipe(1, \"translate\");\n        ɵɵelementStart(2, \"mat-option\", 1);\n        ɵɵlistener(\"click\", function PoiButtonComponent_Template_mat_option_click_2_listener() { return ctx.createPoi(); });\n        ɵɵelementStart(3, \"div\", 2);\n        ɵɵtext(4);\n        ɵɵpipe(5, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(6, \"button\", 3);\n        ɵɵlistener(\"click\", function PoiButtonComponent_Template_button_click_6_listener() { return ctx.createPoi(); });\n        ɵɵelement(7, \"mat-icon\", 4);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵtemplate(8, PoiButtonComponent_mat_option_8_Template, 5, 2, \"mat-option\", 5);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"placeholder\", ɵɵpipeBind1(1, 3, \"igo.context.poiButton.placeholder\"));\n        ɵɵadvance(4);\n        ɵɵtextInterpolate(ɵɵpipeBind1(5, 5, \"igo.context.poiButton.create\"));\n        ɵɵadvance(4);\n        ɵɵproperty(\"ngForOf\", ctx.pois);\n    } }, directives: [MatSelect, MatOption, MatButton, StopPropagationDirective, MatIcon, NgForOf], pipes: [TranslatePipe], styles: [\"mat-select[_ngcontent-%COMP%]{background-color:#fff;padding-top:0;width:150px}mat-select[_ngcontent-%COMP%], mat-select[_ngcontent-%COMP%]     .mat-select-trigger{height:40px}mat-select[_ngcontent-%COMP%]     .mat-select-placeholder, mat-select[_ngcontent-%COMP%]     .mat-select-value-text{padding:5px;position:relative;top:12px}.mat-option[_ngcontent-%COMP%]{text-overflow:inherit}.titlePoi[_ngcontent-%COMP%]{float:left;max-width:135px;overflow:hidden;text-overflow:ellipsis}.buttonPoi[_ngcontent-%COMP%]{float:right;margin:4px -10px 4px 0}.buttonPoi[_ngcontent-%COMP%]     .mat-icon{margin:0 8px}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(PoiButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-poi-button',\n                templateUrl: './poi-button.component.html',\n                styleUrls: ['./poi-button.component.scss']\n            }]\n    }], function () { return [{ type: MatDialog }, { type: AuthService }, { type: PoiService }, { type: MessageService }, { type: LanguageService }, { type: ConfirmDialogService }]; }, { map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\nclass UserDialogComponent {\n    constructor(dialogRef, auth, storageService) {\n        this.dialogRef = dialogRef;\n        this.auth = auth;\n        this.storageService = storageService;\n        const decodeToken = this.auth.decodeToken();\n        this.user = decodeToken.user;\n        this.exp = new Date(decodeToken.exp * 1000).toLocaleString();\n    }\n    clearPreferences() {\n        this.storageService.clear();\n    }\n}\nUserDialogComponent.ɵfac = function UserDialogComponent_Factory(t) { return new (t || UserDialogComponent)(ɵɵdirectiveInject(MatDialogRef), ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(StorageService)); };\nUserDialogComponent.ɵcmp = ɵɵdefineComponent({ type: UserDialogComponent, selectors: [[\"igo-user-dialog\"]], decls: 20, vars: 18, consts: [[\"mat-dialog-title\", \"\", 1, \"mat-typography\"], [\"mat-dialog-content\", \"\", 1, \"mat-typography\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-dialog-actions\", \"\", 2, \"justify-content\", \"center\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"]], template: function UserDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"h1\", 0);\n        ɵɵtext(1);\n        ɵɵpipe(2, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(3, \"div\", 1);\n        ɵɵelementStart(4, \"p\");\n        ɵɵtext(5);\n        ɵɵpipe(6, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(7, \"p\");\n        ɵɵtext(8);\n        ɵɵpipe(9, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(10, \"p\");\n        ɵɵtext(11);\n        ɵɵpipe(12, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(13, \"button\", 2);\n        ɵɵlistener(\"click\", function UserDialogComponent_Template_button_click_13_listener() { return ctx.clearPreferences(); });\n        ɵɵtext(14);\n        ɵɵpipe(15, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelement(16, \"br\");\n        ɵɵelementEnd();\n        ɵɵelementStart(17, \"div\", 3);\n        ɵɵelementStart(18, \"button\", 4);\n        ɵɵlistener(\"click\", function UserDialogComponent_Template_button_click_18_listener() { return ctx.dialogRef.close(false); });\n        ɵɵtext(19, \" OK \");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵtextInterpolate(ɵɵpipeBind1(2, 8, \"igo.context.userButton.infoTitle\"));\n        ɵɵadvance(4);\n        ɵɵtextInterpolate2(\"\", ɵɵpipeBind1(6, 10, \"igo.context.userButton.dialog.user\"), \": \", ctx.user.sourceId, \"\");\n        ɵɵadvance(3);\n        ɵɵtextInterpolate2(\"\", ɵɵpipeBind1(9, 12, \"igo.context.userButton.dialog.email\"), \": \", ctx.user.email, \"\");\n        ɵɵadvance(3);\n        ɵɵtextInterpolate2(\"\", ɵɵpipeBind1(12, 14, \"igo.context.userButton.dialog.expiration\"), \": \", ctx.exp, \"\");\n        ɵɵadvance(3);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(15, 16, \"igo.context.userButton.dialog.clearPreferences\"), \" \");\n    } }, directives: [MatDialogTitle, MatDialogContent, MatButton, MatDialogActions], pipes: [TranslatePipe], encapsulation: 2 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(UserDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-user-dialog',\n                templateUrl: './user-dialog.component.html'\n            }]\n    }], function () { return [{ type: MatDialogRef }, { type: AuthService }, { type: StorageService }]; }, null); })();\n\nfunction userButtonSlideInOut() {\n    return trigger('userButtonState', [\n        state('collapse', style({\n            width: '0',\n            overflow: 'hidden',\n            display: 'none'\n        })),\n        state('expand', style({\n            overflow: 'hidden',\n            display: 'display'\n        })),\n        transition('collapse => expand', animate('200ms')),\n        transition('expand => collapse', animate('200ms'))\n    ]);\n}\n\nfunction UserButtonComponent_div_0_igo_poi_button_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-poi-button\", 9);\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext(2);\n    ɵɵproperty(\"color\", ctx_r1.color)(\"map\", ctx_r1.map);\n} }\nfunction UserButtonComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 1);\n    ɵɵelementStart(1, \"div\", 2);\n    ɵɵtemplate(2, UserButtonComponent_div_0_igo_poi_button_2_Template, 1, 2, \"igo-poi-button\", 3);\n    ɵɵelementStart(3, \"button\", 4);\n    ɵɵlistener(\"click\", function UserButtonComponent_div_0_Template_button_click_3_listener() { ɵɵrestoreView(_r3); const ctx_r2 = ɵɵnextContext(); return ctx_r2.infoUser(); });\n    ɵɵpipe(4, \"translate\");\n    ɵɵelement(5, \"mat-icon\", 5);\n    ɵɵelementEnd();\n    ɵɵelementStart(6, \"button\", 4);\n    ɵɵlistener(\"click\", function UserButtonComponent_div_0_Template_button_click_6_listener() { ɵɵrestoreView(_r3); const ctx_r4 = ɵɵnextContext(); return ctx_r4.logout(); });\n    ɵɵpipe(7, \"translate\");\n    ɵɵelement(8, \"mat-icon\", 6);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(9, \"button\", 7);\n    ɵɵlistener(\"click\", function UserButtonComponent_div_0_Template_button_click_9_listener() { ɵɵrestoreView(_r3); const ctx_r5 = ɵɵnextContext(); return ctx_r5.accountClick(); });\n    ɵɵelement(10, \"mat-icon\", 8);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"@userButtonState\", ctx_r0.expand ? \"expand\" : \"collapse\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r0.hasApi);\n    ɵɵadvance(1);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(4, 7, \"igo.context.userButton.infoTitle\"))(\"color\", ctx_r0.color);\n    ɵɵadvance(3);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(7, 9, \"igo.context.userButton.logout\"))(\"color\", ctx_r0.color);\n    ɵɵadvance(3);\n    ɵɵproperty(\"color\", ctx_r0.auth.authenticated ? ctx_r0.color : \"warn\");\n} }\nclass UserButtonComponent {\n    constructor(dialog, config, auth) {\n        this.dialog = dialog;\n        this.config = config;\n        this.auth = auth;\n        this.expand = false;\n        this.visible = false;\n        this.hasApi = false;\n        this.visible = this.config.getConfig('auth') ? true : false;\n        this.hasApi = this.config.getConfig('context.url') !== undefined;\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    accountClick() {\n        if (this.auth.authenticated) {\n            this.expand = !this.expand;\n        }\n        else {\n            this.auth.logout();\n        }\n    }\n    logout() {\n        this.expand = false;\n        this.auth.logout();\n    }\n    infoUser() {\n        this.dialog.open(UserDialogComponent, { disableClose: false });\n    }\n}\nUserButtonComponent.ɵfac = function UserButtonComponent_Factory(t) { return new (t || UserButtonComponent)(ɵɵdirectiveInject(MatDialog), ɵɵdirectiveInject(ConfigService), ɵɵdirectiveInject(AuthService)); };\nUserButtonComponent.ɵcmp = ɵɵdefineComponent({ type: UserButtonComponent, selectors: [[\"igo-user-button\"]], inputs: { map: \"map\", color: \"color\" }, decls: 1, vars: 1, consts: [[\"class\", \"igo-user-button-container\", 4, \"ngIf\"], [1, \"igo-user-button-container\"], [1, \"igo-user-button-more-container\"], [3, \"color\", \"map\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"above\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"information-outline\"], [\"svgIcon\", \"power\"], [\"mat-icon-button\", \"\", 3, \"color\", \"click\"], [\"svgIcon\", \"account-box\"], [3, \"color\", \"map\"]], template: function UserButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, UserButtonComponent_div_0_Template, 11, 11, \"div\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.visible);\n    } }, directives: [NgIf, MatButton, MatTooltip, MatIcon, PoiButtonComponent], pipes: [TranslatePipe], styles: [\".igo-user-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff}.igo-user-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#efefef}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.igo-user-button-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{bottom:0;position:absolute}}.igo-user-button-more-container[_ngcontent-%COMP%]{float:left;height:40px}.igo-user-button-more-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{float:left;margin-right:2px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.igo-user-button-more-container[_ngcontent-%COMP%]{height:80px;left:24px;position:relative;width:150px}}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}\"], data: { animation: [userButtonSlideInOut()] } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(UserButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-user-button',\n                templateUrl: './user-button.component.html',\n                styleUrls: ['./user-button.component.scss'],\n                animations: [userButtonSlideInOut()]\n            }]\n    }], function () { return [{ type: MatDialog }, { type: ConfigService }, { type: AuthService }]; }, { map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\nclass IgoContextMapButtonModule {\n    static forRoot() {\n        return {\n            ngModule: IgoContextMapButtonModule\n        };\n    }\n}\nIgoContextMapButtonModule.ɵmod = ɵɵdefineNgModule({ type: IgoContextMapButtonModule });\nIgoContextMapButtonModule.ɵinj = ɵɵdefineInjector({ factory: function IgoContextMapButtonModule_Factory(t) { return new (t || IgoContextMapButtonModule)(); }, providers: [PoiService], imports: [[\n            CommonModule,\n            IgoLanguageModule,\n            IgoConfirmDialogModule,\n            IgoStopPropagationModule,\n            IgoAuthModule,\n            FormsModule,\n            MatIconModule,\n            MatButtonModule,\n            MatSelectModule,\n            MatOptionModule,\n            MatTooltipModule,\n            MatFormFieldModule,\n            MatDialogModule,\n            MatInputModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoContextMapButtonModule, { declarations: [BookmarkButtonComponent,\n        BookmarkDialogComponent,\n        PoiButtonComponent,\n        PoiDialogComponent,\n        UserButtonComponent,\n        UserDialogComponent], imports: [CommonModule,\n        IgoLanguageModule,\n        IgoConfirmDialogModule,\n        IgoStopPropagationModule,\n        IgoAuthModule,\n        FormsModule,\n        MatIconModule,\n        MatButtonModule,\n        MatSelectModule,\n        MatOptionModule,\n        MatTooltipModule,\n        MatFormFieldModule,\n        MatDialogModule,\n        MatInputModule], exports: [BookmarkButtonComponent, PoiButtonComponent, UserButtonComponent, BookmarkDialogComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoContextMapButtonModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoLanguageModule,\n                    IgoConfirmDialogModule,\n                    IgoStopPropagationModule,\n                    IgoAuthModule,\n                    FormsModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatSelectModule,\n                    MatOptionModule,\n                    MatTooltipModule,\n                    MatFormFieldModule,\n                    MatDialogModule,\n                    MatInputModule\n                ],\n                exports: [BookmarkButtonComponent, PoiButtonComponent, UserButtonComponent, BookmarkDialogComponent],\n                declarations: [\n                    BookmarkButtonComponent,\n                    BookmarkDialogComponent,\n                    PoiButtonComponent,\n                    PoiDialogComponent,\n                    UserButtonComponent,\n                    UserDialogComponent\n                ],\n                providers: [PoiService]\n            }]\n    }], null, null); })();\n\nconst CONTEXT_DIRECTIVES = [\n    MapContextDirective,\n    LayerContextDirective\n];\nclass IgoContextManagerModule {\n    static forRoot() {\n        return {\n            ngModule: IgoContextManagerModule\n        };\n    }\n}\nIgoContextManagerModule.ɵmod = ɵɵdefineNgModule({ type: IgoContextManagerModule });\nIgoContextManagerModule.ɵinj = ɵɵdefineInjector({ factory: function IgoContextManagerModule_Factory(t) { return new (t || IgoContextManagerModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTooltipModule,\n            MatListModule,\n            MatCheckboxModule,\n            MatRadioModule,\n            MatDialogModule,\n            MatMenuModule,\n            MatOptionModule,\n            MatAutocompleteModule,\n            IgoAuthModule,\n            IgoListModule,\n            IgoKeyValueModule,\n            IgoCollapsibleModule,\n            IgoStopPropagationModule,\n            IgoLanguageModule,\n            IgoContextImportExportModule,\n            IgoContextMapButtonModule,\n            IgoActionbarModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoContextManagerModule, { declarations: [ContextListComponent,\n        ContextListBindingDirective,\n        ContextItemComponent,\n        ContextFormComponent,\n        ContextEditComponent,\n        ContextEditBindingDirective,\n        ContextPermissionsComponent,\n        ContextPermissionsBindingDirective, MapContextDirective,\n        LayerContextDirective], imports: [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTooltipModule,\n        MatListModule,\n        MatCheckboxModule,\n        MatRadioModule,\n        MatDialogModule,\n        MatMenuModule,\n        MatOptionModule,\n        MatAutocompleteModule,\n        IgoAuthModule,\n        IgoListModule,\n        IgoKeyValueModule,\n        IgoCollapsibleModule,\n        IgoStopPropagationModule,\n        IgoLanguageModule,\n        IgoContextImportExportModule,\n        IgoContextMapButtonModule,\n        IgoActionbarModule], exports: [ContextListComponent,\n        ContextListBindingDirective,\n        ContextItemComponent,\n        ContextFormComponent,\n        ContextEditComponent,\n        ContextEditBindingDirective,\n        ContextPermissionsComponent,\n        ContextPermissionsBindingDirective, MapContextDirective,\n        LayerContextDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoContextManagerModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTooltipModule,\n                    MatListModule,\n                    MatCheckboxModule,\n                    MatRadioModule,\n                    MatDialogModule,\n                    MatMenuModule,\n                    MatOptionModule,\n                    MatAutocompleteModule,\n                    IgoAuthModule,\n                    IgoListModule,\n                    IgoKeyValueModule,\n                    IgoCollapsibleModule,\n                    IgoStopPropagationModule,\n                    IgoLanguageModule,\n                    IgoContextImportExportModule,\n                    IgoContextMapButtonModule,\n                    IgoActionbarModule\n                ],\n                exports: [\n                    ContextListComponent,\n                    ContextListBindingDirective,\n                    ContextItemComponent,\n                    ContextFormComponent,\n                    ContextEditComponent,\n                    ContextEditBindingDirective,\n                    ContextPermissionsComponent,\n                    ContextPermissionsBindingDirective,\n                    ...CONTEXT_DIRECTIVES\n                ],\n                declarations: [\n                    ContextListComponent,\n                    ContextListBindingDirective,\n                    ContextItemComponent,\n                    ContextFormComponent,\n                    ContextEditComponent,\n                    ContextEditBindingDirective,\n                    ContextPermissionsComponent,\n                    ContextPermissionsBindingDirective,\n                    ...CONTEXT_DIRECTIVES\n                ]\n            }]\n    }], null, null); })();\n\nclass ShareMapService {\n    constructor(contextService, messageService, route) {\n        this.contextService = contextService;\n        this.messageService = messageService;\n        this.route = route;\n    }\n    getUrlWithApi(formValues) {\n        return `${location.origin + location.pathname}?context=${formValues.uri}`;\n    }\n    createContextShared(map, formValues) {\n        const context = this.contextService.getContextFromMap(map);\n        context.scope = 'public';\n        context.title = formValues.title;\n        context.uri = formValues.uri;\n        return this.contextService.create(context);\n    }\n    updateContextShared(map, formValues, id) {\n        const context = this.contextService.getContextFromMap(map);\n        return this.contextService.update(id, {\n            title: formValues.title,\n            map: context.map\n        });\n    }\n    getUrlWithoutApi(map, publicShareOption) {\n        if (!this.route ||\n            !this.route.options.visibleOnLayersKey ||\n            !this.route.options.visibleOffLayersKey ||\n            !map.viewController.getZoom()) {\n            return;\n        }\n        const llc = publicShareOption.layerlistControls.querystring;\n        let visibleKey = this.route.options.visibleOnLayersKey;\n        let invisibleKey = this.route.options.visibleOffLayersKey;\n        const layers = map.layers;\n        const visibleLayers = layers.filter(lay => lay.visible && lay.id !== 'searchPointerSummaryId');\n        const invisibleLayers = layers.filter(lay => !lay.visible && lay.id !== 'searchPointerSummaryId');\n        if (visibleLayers.length === 0) {\n            visibleKey = '';\n        }\n        if (invisibleLayers.length === 0) {\n            invisibleKey = '';\n        }\n        let layersUrl = '';\n        let layersToLoop = [];\n        if (visibleLayers.length > invisibleLayers.length) {\n            layersUrl = `${visibleKey}=*&${invisibleKey}=`;\n            layersToLoop = invisibleLayers;\n        }\n        else {\n            layersUrl = `${invisibleKey}=*&${visibleKey}=`;\n            layersToLoop = visibleLayers;\n        }\n        for (const layer of layersToLoop) {\n            if (layer.id) {\n                layersUrl += layer.id + ',';\n            }\n        }\n        const contextLayersID = [];\n        const contextLayers = this.contextService.context$.value.layers;\n        for (const contextLayer of contextLayers) {\n            if (typeof contextLayer.id !== 'undefined' || typeof contextLayer.source !== 'undefined') {\n                contextLayersID.push(contextLayer.id || contextLayer.source.id);\n            }\n        }\n        const addedLayersQueryParamsWms = this.makeLayersByService(layers, contextLayersID, 'wms');\n        const addedLayersQueryParamsWmts = this.makeLayersByService(layers, contextLayersID, 'wmts');\n        const addedLayersQueryParamsArcgisRest = this.makeLayersByService(layers, contextLayersID, 'arcgisrest');\n        const addedLayersQueryParamsImageArcgisRest = this.makeLayersByService(layers, contextLayersID, 'imagearcgisrest');\n        const addedLayersQueryParamsTileArcgisRest = this.makeLayersByService(layers, contextLayersID, 'tilearcgisrest');\n        layersUrl = layersUrl.substr(0, layersUrl.length - 1);\n        const zoomKey = this.route.options.zoomKey;\n        const centerKey = this.route.options.centerKey;\n        const contextKey = this.route.options.contextKey;\n        const zoom = `${zoomKey}=${map.viewController.getZoom()}`;\n        const arrayCenter = map.viewController.getCenter('EPSG:4326') || [];\n        const long = arrayCenter[0].toFixed(5).replace(/\\.([^0]+)0+$/, '.$1');\n        const lat = arrayCenter[1].toFixed(5).replace(/\\.([^0]+)0+$/, '.$1');\n        const center = `${centerKey}=${long},${lat}`.replace(/.00000/g, '');\n        let context = '';\n        if (this.contextService.context$.value) {\n            context = `${contextKey}=${this.contextService.context$.value.uri}`;\n        }\n        let url = `${location.origin}${location.pathname}?${context}&${zoom}&${center}&${layersUrl}&${llc}&${addedLayersQueryParamsWms}&${llc}&${addedLayersQueryParamsWmts}&${addedLayersQueryParamsArcgisRest}&${addedLayersQueryParamsImageArcgisRest}&${addedLayersQueryParamsTileArcgisRest}`;\n        for (let i = 0; i < 5; i++) {\n            url = url.replace(/&&/g, '&');\n            url = url.endsWith('&') ? url.slice(0, -1) : url;\n        }\n        url = url.endsWith('&') ? url.slice(0, -1) : url;\n        url = url.replace('?&wm', '&wm');\n        url = url.replace('?&', '?');\n        return url;\n    }\n    makeLayersByService(layers, contextLayersID, typeService) {\n        const addedLayersByService = [];\n        for (const layer of layers.filter(l => { var _a; return ((_a = l.dataSource.options) === null || _a === void 0 ? void 0 : _a.type) === typeService; })) {\n            if (contextLayersID.indexOf(layer.id) === -1) {\n                const linkUrl = encodeURIComponent(layer.dataSource.options.url);\n                let addedLayer = '';\n                switch (layer.dataSource.options.type.toLowerCase()) {\n                    case 'wms':\n                        addedLayer = encodeURIComponent(layer.dataSource.options.params.LAYERS);\n                        break;\n                    case 'wmts':\n                    case 'arcgisrest':\n                    case 'imagearcgisrest':\n                    case 'tilearcgisrest':\n                        addedLayer = encodeURIComponent(layer.dataSource.options.layer);\n                        break;\n                }\n                const addedLayerPosition = `${addedLayer}:igoz${layer.zIndex}`;\n                if (!addedLayersByService.find(definedUrl => definedUrl.url === linkUrl)) {\n                    addedLayersByService.push({\n                        url: linkUrl,\n                        layers: [addedLayerPosition]\n                    });\n                }\n                else {\n                    addedLayersByService.forEach(service => {\n                        if (service.url === linkUrl) {\n                            service.layers.push(addedLayerPosition);\n                        }\n                    });\n                }\n            }\n        }\n        let addedLayersQueryParams = '';\n        if (addedLayersByService.length >= 1) {\n            let linkUrlKey;\n            let layersKey;\n            /*\n            const linkUrlKey = (typeService === 'wms') ? this.route.options.wmsUrlKey :\n              (typeService === 'wmts') ? this.route.options.wmtsUrlKey : '' ;\n            const layersKey = (typeService === 'wms') ? this.route.options.wmsLayersKey :\n              (typeService === 'wmts') ? this.route.options.wmtsLayersKey : '' ;\n      */\n            switch (typeService.toLowerCase()) {\n                case 'wms':\n                    linkUrlKey = this.route.options.wmsUrlKey;\n                    layersKey = this.route.options.wmsLayersKey;\n                    break;\n                case 'wmts':\n                    linkUrlKey = this.route.options.wmtsUrlKey;\n                    layersKey = this.route.options.wmtsLayersKey;\n                    break;\n                case 'arcgisrest':\n                    linkUrlKey = this.route.options.arcgisUrlKey;\n                    layersKey = this.route.options.arcgisLayersKey;\n                    break;\n                case 'imagearcgisrest':\n                    linkUrlKey = this.route.options.iarcgisUrlKey;\n                    layersKey = this.route.options.iarcgisLayersKey;\n                    break;\n                case 'tilearcgisrest':\n                    linkUrlKey = this.route.options.tarcgisUrlKey;\n                    layersKey = this.route.options.tarcgisLayersKey;\n                    break;\n                default:\n                    linkUrlKey = '';\n                    layersKey = '';\n            }\n            let linkUrlQueryParams = '';\n            let layersQueryParams = '';\n            addedLayersByService.forEach(service => {\n                linkUrlQueryParams += `${service.url},`;\n                layersQueryParams += `(${service.layers.join(',')}),`;\n            });\n            linkUrlQueryParams = linkUrlQueryParams.endsWith(',')\n                ? linkUrlQueryParams.slice(0, -1)\n                : linkUrlQueryParams;\n            layersQueryParams = layersQueryParams.endsWith(',')\n                ? layersQueryParams.slice(0, -1)\n                : layersQueryParams;\n            addedLayersQueryParams = `${linkUrlKey}=${linkUrlQueryParams}&${layersKey}=${layersQueryParams}`;\n        }\n        return addedLayersQueryParams;\n    }\n}\nShareMapService.ɵfac = function ShareMapService_Factory(t) { return new (t || ShareMapService)(ɵɵinject(ContextService), ɵɵinject(MessageService), ɵɵinject(RouteService, 8)); };\nShareMapService.ɵprov = ɵɵdefineInjectable({ token: ShareMapService, factory: ShareMapService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ShareMapService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ContextService }, { type: MessageService }, { type: RouteService, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\nfunction ShareMapApiComponent_span_10_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"span\", 11);\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\"\", ctx_r0.userId, \"-\");\n} }\nfunction ShareMapApiComponent_button_18_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 12);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"disabled\", !ctx_r1.form.valid);\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 2, \"igo.context.shareMap.button\"), \" \");\n} }\nfunction ShareMapApiComponent_button_19_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 13);\n    ɵɵlistener(\"click\", function ShareMapApiComponent_button_19_Template_button_click_0_listener() { ɵɵrestoreView(_r5); const ctx_r4 = ɵɵnextContext(); return ctx_r4.updateContextShared(ctx_r4.form.value); });\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, \"igo.context.shareMap.refreshBtn\"), \" \");\n} }\nfunction ShareMapApiComponent_div_20_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"div\", 14);\n    ɵɵelementStart(1, \"mat-form-field\");\n    ɵɵelement(2, \"textarea\", 15, 16);\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementStart(5, \"button\", 17);\n    ɵɵlistener(\"click\", function ShareMapApiComponent_div_20_Template_button_click_5_listener() { ɵɵrestoreView(_r8); const _r6 = ɵɵreference(3); const ctx_r7 = ɵɵnextContext(); return ctx_r7.copyTextToClipboard(_r6); });\n    ɵɵpipe(6, \"translate\");\n    ɵɵelement(7, \"mat-icon\", 18);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelement(8, \"div\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵadvance(2);\n    ɵɵproperty(\"placeholder\", ɵɵpipeBind1(4, 3, \"igo.context.shareMap.placeholderLink\"))(\"value\", ctx_r3.url);\n    ɵɵadvance(3);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(6, 5, \"igo.context.shareMap.copy\"));\n} }\nclass ShareMapApiComponent {\n    constructor(languageService, messageService, auth, shareMapService, formBuilder) {\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.auth = auth;\n        this.shareMapService = shareMapService;\n        this.formBuilder = formBuilder;\n    }\n    ngOnInit() {\n        this.auth.authenticate$.subscribe(auth => {\n            const decodeToken = this.auth.decodeToken();\n            this.userId = decodeToken.user ? decodeToken.user.id : undefined;\n            this.buildForm();\n        });\n    }\n    createUrl(values = {}) {\n        const inputs = Object.assign({}, values);\n        inputs.uri = this.userId ? `${this.userId}-${values.uri}` : values.uri;\n        this.url = this.shareMapService.getUrlWithApi(inputs);\n        this.shareMapService.createContextShared(this.map, inputs).subscribe(rep => {\n            this.idContextShared = rep.id;\n            const title = this.languageService.translate.instant('igo.context.contextManager.dialog.saveTitle');\n            const msg = this.languageService.translate.instant('igo.context.contextManager.dialog.saveMsg', {\n                value: inputs.title\n            });\n            this.messageService.success(msg, title);\n        }, err => {\n            err.error.title = this.languageService.translate.instant('igo.context.shareMap.errorTitle');\n            this.messageService.showError(err);\n        });\n    }\n    updateContextShared(values = {}) {\n        const inputs = Object.assign({}, values);\n        inputs.uri = this.userId ? `${this.userId}-${values.uri}` : values.uri;\n        this.shareMapService.updateContextShared(this.map, inputs, this.idContextShared).subscribe(rep => {\n            const title = this.languageService.translate.instant('igo.context.contextManager.dialog.saveTitle');\n            const msg = this.languageService.translate.instant('igo.context.contextManager.dialog.saveMsg', {\n                value: inputs.title\n            });\n            this.messageService.success(msg, title);\n        }, err => {\n            err.error.title = this.languageService.translate.instant('igo.context.shareMap.errorTitle');\n            this.messageService.showError(err);\n        });\n    }\n    copyTextToClipboard(textArea) {\n        const successful = Clipboard.copy(textArea);\n        if (successful) {\n            const translate = this.languageService.translate;\n            const title = translate.instant('igo.context.shareMap.dialog.copyTitle');\n            const msg = translate.instant('igo.context.shareMap.dialog.copyMsg');\n            this.messageService.success(msg, title);\n        }\n    }\n    buildForm() {\n        this.url = undefined;\n        const id = uuid();\n        let title = 'Partage ';\n        title += this.userId ? `(${this.userId}-${id})` : `(${id})`;\n        this.form = this.formBuilder.group({\n            title: [title],\n            uri: [id]\n        });\n    }\n}\nShareMapApiComponent.ɵfac = function ShareMapApiComponent_Factory(t) { return new (t || ShareMapApiComponent)(ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(ShareMapService), ɵɵdirectiveInject(FormBuilder)); };\nShareMapApiComponent.ɵcmp = ɵɵdefineComponent({ type: ShareMapApiComponent, selectors: [[\"igo-share-map-api\"]], inputs: { map: \"map\" }, decls: 21, vars: 18, consts: [[1, \"igo-form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"igo-input-container\"], [\"matInput\", \"\", \"required\", \"\", \"formControlName\", \"title\", 3, \"placeholder\"], [\"id\", \"uriInput\", 1, \"igo-input-container\"], [\"class\", \"prefix\", 4, \"ngIf\"], [1, \"fieldWrapper\"], [\"matInput\", \"\", \"required\", \"\", \"formControlName\", \"uri\", 3, \"readonly\", \"placeholder\"], [1, \"igo-form-button-group\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", 3, \"disabled\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"igo-input-container linkToShare\", 4, \"ngIf\"], [1, \"prefix\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", 3, \"disabled\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 3, \"click\"], [1, \"igo-input-container\", \"linkToShare\"], [\"matInput\", \"\", \"readonly\", \"\", \"rows\", \"1\", 1, \"textAreaWithButton\", 3, \"placeholder\", \"value\"], [\"textArea\", \"\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"primary\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"content-copy\"]], template: function ShareMapApiComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"form\", 0);\n        ɵɵlistener(\"ngSubmit\", function ShareMapApiComponent_Template_form_ngSubmit_0_listener() { return ctx.createUrl(ctx.form.value); });\n        ɵɵelementStart(1, \"div\", 1);\n        ɵɵelementStart(2, \"mat-form-field\");\n        ɵɵelement(3, \"input\", 2);\n        ɵɵpipe(4, \"translate\");\n        ɵɵelementStart(5, \"mat-error\");\n        ɵɵtext(6);\n        ɵɵpipe(7, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(8, \"div\", 3);\n        ɵɵelementStart(9, \"mat-form-field\");\n        ɵɵtemplate(10, ShareMapApiComponent_span_10_Template, 2, 1, \"span\", 4);\n        ɵɵelementStart(11, \"span\", 5);\n        ɵɵelement(12, \"input\", 6);\n        ɵɵpipe(13, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(14, \"mat-error\");\n        ɵɵtext(15);\n        ɵɵpipe(16, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(17, \"div\", 7);\n        ɵɵtemplate(18, ShareMapApiComponent_button_18_Template, 3, 4, \"button\", 8);\n        ɵɵtemplate(19, ShareMapApiComponent_button_19_Template, 3, 3, \"button\", 9);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵtemplate(20, ShareMapApiComponent_div_20_Template, 9, 7, \"div\", 10);\n    } if (rf & 2) {\n        ɵɵproperty(\"formGroup\", ctx.form);\n        ɵɵadvance(3);\n        ɵɵproperty(\"placeholder\", ɵɵpipeBind1(4, 10, \"igo.context.contextManager.form.title\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(7, 12, \"igo.context.contextManager.form.titleRequired\"), \" \");\n        ɵɵadvance(4);\n        ɵɵproperty(\"ngIf\", ctx.userId);\n        ɵɵadvance(2);\n        ɵɵproperty(\"readonly\", !ctx.userId)(\"placeholder\", ɵɵpipeBind1(13, 14, \"igo.context.contextManager.form.uri\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(16, 16, \"igo.context.contextManager.form.uriRequired\"), \" \");\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngIf\", !ctx.url);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.url);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.url);\n    } }, directives: [ɵangular_packages_forms_forms_y, NgControlStatusGroup, FormGroupDirective, MatFormField, MatInput, DefaultValueAccessor, RequiredValidator, NgControlStatus, FormControlName, MatError, NgIf, MatButton, MatTooltip, MatIcon], pipes: [TranslatePipe], styles: [\"@charset \\\"UTF-8\\\";mat-form-field[_ngcontent-%COMP%]{width:100%}#uriInput[_ngcontent-%COMP%]   .fieldWrapper[_ngcontent-%COMP%]{display:block;overflow:hidden}#uriInput[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]{float:left}.linkToShare[_ngcontent-%COMP%]{padding:25px 5px 5px}.linkToShare[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:40px;line-height:1.3;overflow-y:hidden;resize:none;width:100%;word-break:break-all;word-wrap:normal}.linkToShare[_ngcontent-%COMP%]   textarea.textAreaWithButton[_ngcontent-%COMP%]{width:calc(100% - 60px)}.linkToShare[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{float:right;margin:-10px 0}.igo-form[_ngcontent-%COMP%]{padding:20px 5px 5px}.igo-form-button-group[_ngcontent-%COMP%]{padding-top:10px;text-align:center}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ShareMapApiComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-share-map-api',\n                templateUrl: './share-map-api.component.html',\n                styleUrls: ['./share-map-api.component.scss']\n            }]\n    }], function () { return [{ type: LanguageService }, { type: MessageService }, { type: AuthService }, { type: ShareMapService }, { type: FormBuilder }]; }, { map: [{\n            type: Input\n        }] }); })();\n\nclass ShareMapUrlComponent {\n    constructor(languageService, messageService, shareMapService, cdRef) {\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.shareMapService = shareMapService;\n        this.cdRef = cdRef;\n        this.publicShareOption = {\n            layerlistControls: { querystring: '' }\n        };\n    }\n    ngOnInit() {\n        this.resetUrl();\n        this.mapState$$ = combineLatest([\n            this.map.viewController.state$,\n            this.map.status$\n        ]).subscribe(c => {\n            this.resetUrl();\n            this.cdRef.detectChanges();\n        });\n    }\n    ngAfterViewInit() {\n        this.resetUrl();\n    }\n    ngOnDestroy() {\n        this.mapState$$.unsubscribe();\n    }\n    resetUrl(values = {}) {\n        this.url = this.shareMapService.getUrlWithoutApi(this.map, this.publicShareOption);\n    }\n    copyTextToClipboard(textArea) {\n        const successful = Clipboard.copy(textArea);\n        if (successful) {\n            const translate = this.languageService.translate;\n            const title = translate.instant('igo.context.shareMap.dialog.copyTitle');\n            const msg = translate.instant('igo.context.shareMap.dialog.copyMsg');\n            this.messageService.success(msg, title);\n        }\n    }\n}\nShareMapUrlComponent.ɵfac = function ShareMapUrlComponent_Factory(t) { return new (t || ShareMapUrlComponent)(ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(ShareMapService), ɵɵdirectiveInject(ChangeDetectorRef)); };\nShareMapUrlComponent.ɵcmp = ɵɵdefineComponent({ type: ShareMapUrlComponent, selectors: [[\"igo-share-map-url\"]], inputs: { map: \"map\" }, decls: 48, vars: 40, consts: [[1, \"igo-input-container\", \"linkToShare\"], [\"matInput\", \"\", \"readonly\", \"\", \"rows\", \"1\", 3, \"placeholder\", \"value\"], [\"textArea\", \"\"], [1, \"igo-form-button-group\"], [\"mat-raised-button\", \"\", 3, \"click\"], [\"svgIcon\", \"content-copy\"], [1, \"mat-typography\"]], template: function ShareMapUrlComponent_Template(rf, ctx) { if (rf & 1) {\n        const _r1 = ɵɵgetCurrentView();\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵelementStart(1, \"mat-form-field\");\n        ɵɵelement(2, \"textarea\", 1, 2);\n        ɵɵpipe(4, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(5, \"div\", 3);\n        ɵɵelementStart(6, \"button\", 4);\n        ɵɵlistener(\"click\", function ShareMapUrlComponent_Template_button_click_6_listener() { ɵɵrestoreView(_r1); const _r0 = ɵɵreference(3); return ctx.copyTextToClipboard(_r0); });\n        ɵɵelement(7, \"mat-icon\", 5);\n        ɵɵtext(8);\n        ɵɵpipe(9, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(10, \"div\");\n        ɵɵelement(11, \"br\");\n        ɵɵelementStart(12, \"section\", 6);\n        ɵɵelementStart(13, \"h4\");\n        ɵɵtext(14);\n        ɵɵpipe(15, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(16, \"ul\");\n        ɵɵelementStart(17, \"li\");\n        ɵɵtext(18);\n        ɵɵpipe(19, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(20, \"li\");\n        ɵɵtext(21);\n        ɵɵpipe(22, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(23, \"li\");\n        ɵɵtext(24);\n        ɵɵpipe(25, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(26, \"li\");\n        ɵɵtext(27);\n        ɵɵpipe(28, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(29, \"li\");\n        ɵɵtext(30);\n        ɵɵpipe(31, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(32, \"h4\");\n        ɵɵtext(33);\n        ɵɵpipe(34, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(35, \"ul\");\n        ɵɵelementStart(36, \"li\");\n        ɵɵtext(37);\n        ɵɵpipe(38, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(39, \"li\");\n        ɵɵtext(40);\n        ɵɵpipe(41, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(42, \"li\");\n        ɵɵtext(43);\n        ɵɵpipe(44, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementStart(45, \"li\");\n        ɵɵtext(46);\n        ɵɵpipe(47, \"translate\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(2);\n        ɵɵproperty(\"placeholder\", ɵɵpipeBind1(4, 14, \"igo.context.shareMap.placeholderLink\"))(\"value\", ctx.url);\n        ɵɵadvance(6);\n        ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(9, 16, \"igo.context.shareMap.copy\"), \" \");\n        ɵɵadvance(6);\n        ɵɵtextInterpolate(ɵɵpipeBind1(15, 18, \"igo.context.shareMap.included\"));\n        ɵɵadvance(4);\n        ɵɵtextInterpolate(ɵɵpipeBind1(19, 20, \"igo.context.shareMap.context\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind1(22, 22, \"igo.context.shareMap.center\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind1(25, 24, \"igo.context.shareMap.zoom\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind1(28, 26, \"igo.context.shareMap.addedLayers\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind1(31, 28, \"igo.context.shareMap.visibleInvisible\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind1(34, 30, \"igo.context.shareMap.excluded\"));\n        ɵɵadvance(4);\n        ɵɵtextInterpolate(ɵɵpipeBind1(38, 32, \"igo.context.shareMap.order\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind1(41, 34, \"igo.context.shareMap.opacity\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind1(44, 36, \"igo.context.shareMap.filterOgc\"));\n        ɵɵadvance(3);\n        ɵɵtextInterpolate(ɵɵpipeBind1(47, 38, \"igo.context.shareMap.filterTime\"));\n    } }, directives: [MatFormField, MatInput, MatButton, MatIcon], pipes: [TranslatePipe], styles: [\"@charset \\\"UTF-8\\\";mat-form-field[_ngcontent-%COMP%]{width:100%}.linkToShare[_ngcontent-%COMP%]{padding:25px 5px 5px}.linkToShare[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:40px;line-height:1.3;overflow-y:hidden;resize:none;width:100%;word-break:break-all;word-wrap:normal}.linkToShare[_ngcontent-%COMP%]   textarea.textAreaWithButton[_ngcontent-%COMP%]{width:calc(100% - 60px)}.linkToShare[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{float:right;margin:-10px 0}.igo-form-button-group[_ngcontent-%COMP%]{padding-top:10px;text-align:center}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ShareMapUrlComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-share-map-url',\n                templateUrl: './share-map-url.component.html',\n                styleUrls: ['./share-map-url.component.scss']\n            }]\n    }], function () { return [{ type: LanguageService }, { type: MessageService }, { type: ShareMapService }, { type: ChangeDetectorRef }]; }, { map: [{\n            type: Input\n        }] }); })();\n\nfunction ShareMapComponent_mat_tab_group_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-tab-group\");\n    ɵɵelementStart(1, \"mat-tab\", 2);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelement(3, \"igo-share-map-api\", 3);\n    ɵɵelementEnd();\n    ɵɵelementStart(4, \"mat-tab\", 2);\n    ɵɵpipe(5, \"translate\");\n    ɵɵelement(6, \"igo-share-map-url\", 3);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"label\", ɵɵpipeBind1(2, 4, \"igo.context.shareMap.shareWithApi\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"map\", ctx_r0.map);\n    ɵɵadvance(1);\n    ɵɵproperty(\"label\", ɵɵpipeBind1(5, 6, \"igo.context.shareMap.shareWithUrl\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"map\", ctx_r0.map);\n} }\nfunction ShareMapComponent_igo_share_map_url_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-share-map-url\", 3);\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"map\", ctx_r1.map);\n} }\nclass ShareMapComponent {\n    constructor(config) {\n        this.config = config;\n        this.hasApi = false;\n        this.hasApi = this.config.getConfig('context.url') ? true : false;\n    }\n}\nShareMapComponent.ɵfac = function ShareMapComponent_Factory(t) { return new (t || ShareMapComponent)(ɵɵdirectiveInject(ConfigService)); };\nShareMapComponent.ɵcmp = ɵɵdefineComponent({ type: ShareMapComponent, selectors: [[\"igo-share-map\"]], inputs: { map: \"map\" }, decls: 2, vars: 2, consts: [[4, \"ngIf\"], [3, \"map\", 4, \"ngIf\"], [3, \"label\"], [3, \"map\"]], template: function ShareMapComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, ShareMapComponent_mat_tab_group_0_Template, 7, 8, \"mat-tab-group\", 0);\n        ɵɵtemplate(1, ShareMapComponent_igo_share_map_url_1_Template, 1, 1, \"igo-share-map-url\", 1);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.hasApi);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", !ctx.hasApi);\n    } }, directives: [NgIf, MatTabGroup, MatTab, ShareMapApiComponent, ShareMapUrlComponent], pipes: [TranslatePipe], styles: [\"\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ShareMapComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-share-map',\n                templateUrl: './share-map.component.html',\n                styleUrls: ['./share-map.component.scss']\n            }]\n    }], function () { return [{ type: ConfigService }]; }, { map: [{\n            type: Input\n        }] }); })();\n\nclass IgoShareMapModule {\n    static forRoot() {\n        return {\n            ngModule: IgoShareMapModule\n        };\n    }\n}\nIgoShareMapModule.ɵmod = ɵɵdefineNgModule({ type: IgoShareMapModule });\nIgoShareMapModule.ɵinj = ɵɵdefineInjector({ factory: function IgoShareMapModule_Factory(t) { return new (t || IgoShareMapModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatIconModule,\n            MatTooltipModule,\n            MatTabsModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatButtonModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoShareMapModule, { declarations: [ShareMapComponent, ShareMapUrlComponent, ShareMapApiComponent], imports: [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatIconModule,\n        MatTooltipModule,\n        MatTabsModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatButtonModule,\n        IgoLanguageModule], exports: [ShareMapComponent, ShareMapUrlComponent, ShareMapApiComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoShareMapModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatIconModule,\n                    MatTooltipModule,\n                    MatTabsModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatButtonModule,\n                    IgoLanguageModule\n                ],\n                exports: [ShareMapComponent, ShareMapUrlComponent, ShareMapApiComponent],\n                declarations: [ShareMapComponent, ShareMapUrlComponent, ShareMapApiComponent]\n            }]\n    }], null, null); })();\n\nfunction SidenavComponent_button_8_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 11);\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 12);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.context.sidenav.goBack\"));\n} }\nfunction SidenavComponent_button_9_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 13);\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 14);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 1, \"igo.context.sidenav.mainMenu\"));\n} }\nfunction SidenavComponent_igo_panel_11_button_3_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 19);\n    ɵɵlistener(\"click\", function SidenavComponent_igo_panel_11_button_3_Template_button_click_0_listener() { ɵɵrestoreView(_r8); const ctx_r7 = ɵɵnextContext(2); return ctx_r7.zoomToFeatureExtent(); });\n    ɵɵelement(1, \"mat-icon\", 20);\n    ɵɵelementEnd();\n} }\nfunction SidenavComponent_igo_panel_11_igo_feature_details_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-feature-details\", 21);\n} if (rf & 2) {\n    const ctx_r6 = ɵɵnextContext(2);\n    ɵɵproperty(\"feature\", ctx_r6.feature);\n} }\nconst _c0$2 = function () { return [\"collapsed\", \"initial\"]; };\nfunction SidenavComponent_igo_panel_11_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-panel\", 6);\n    ɵɵelementStart(1, \"button\", 15);\n    ɵɵlistener(\"click\", function SidenavComponent_igo_panel_11_Template_button_click_1_listener() { ɵɵrestoreView(_r10); const ctx_r9 = ɵɵnextContext(); return ctx_r9.toggleTopPanel(); });\n    ɵɵelement(2, \"mat-icon\", 16);\n    ɵɵelementEnd();\n    ɵɵtemplate(3, SidenavComponent_igo_panel_11_button_3_Template, 2, 0, \"button\", 17);\n    ɵɵtemplate(4, SidenavComponent_igo_panel_11_igo_feature_details_4_Template, 1, 1, \"igo-feature-details\", 18);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵɵnextContext();\n    const _r1 = ɵɵreference(4);\n    ɵɵproperty(\"title\", ctx_r4.featureTitle);\n    ɵɵadvance(2);\n    ɵɵproperty(\"svgIcon\", ɵɵpureFunction0(4, _c0$2).indexOf(_r1.state) >= 0 ? \"arrow_downward\" : \"arrow_upward\");\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r4.feature.geometry);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ɵɵpureFunction0(5, _c0$2).indexOf(_r1.state) >= 0);\n} }\nclass SidenavComponent {\n    constructor(titleService) {\n        this.titleService = titleService;\n        this.format = new GeoJSON();\n        this._title = this.titleService.getTitle();\n        this.topPanelState = 'initial';\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get opened() {\n        return this._opened;\n    }\n    set opened(value) {\n        this._opened = value;\n    }\n    get feature() {\n        return this._feature;\n    }\n    set feature(value) {\n        this._feature = value;\n    }\n    get tool() {\n        return this._tool;\n    }\n    set tool(value) {\n        this._tool = value;\n    }\n    get media() {\n        return this._media;\n    }\n    set media(value) {\n        this._media = value;\n    }\n    get title() {\n        return this._title;\n    }\n    set title(value) {\n        if (value) {\n            this._title = value;\n        }\n    }\n    get featureTitle() {\n        return this.feature ? getEntityTitle(this.feature) : undefined;\n    }\n    zoomToFeatureExtent() {\n        if (this.feature.geometry) {\n            const olFeature = this.format.readFeature(this.feature, {\n                dataProjection: this.feature.projection,\n                featureProjection: this.map.projection\n            });\n            moveToOlFeatures(this.map, [olFeature], FeatureMotion.Zoom);\n        }\n    }\n    toggleTopPanel() {\n        if (this.topPanelState === 'initial') {\n            this.topPanelState = 'expanded';\n        }\n        else {\n            this.topPanelState = 'initial';\n        }\n    }\n}\nSidenavComponent.ɵfac = function SidenavComponent_Factory(t) { return new (t || SidenavComponent)(ɵɵdirectiveInject(Title)); };\nSidenavComponent.ɵcmp = ɵɵdefineComponent({ type: SidenavComponent, selectors: [[\"igo-sidenav\"]], inputs: { map: \"map\", opened: \"opened\", feature: \"feature\", tool: \"tool\", media: \"media\", title: \"title\" }, decls: 12, vars: 8, consts: [[\"igoSidenavShim\", \"\", \"mode\", \"side\", 3, \"opened\"], [\"sidenav\", \"\"], [1, \"igo-sidenav-content\"], [\"initial\", \"50%\", \"initialMobile\", \"100%\", \"expanded\", \"calc(100% - 58px)\", 3, \"state\"], [\"topPanel\", \"\"], [1, \"igo-content\"], [3, \"title\"], [\"mat-icon-button\", \"\", \"panelLeftButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", 4, \"ngIf\"], [\"igoFlexibleFill\", \"\", 1, \"igo-content\"], [3, \"title\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"panelLeftButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\"], [\"svgIcon\", \"arrow-back\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\"], [\"svgIcon\", \"menu\"], [\"mat-icon-button\", \"\", \"panelLeftButton\", \"\", 1, \"igo-icon-button\", 3, \"click\"], [3, \"svgIcon\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", \"class\", \"igo-icon-button\", 3, \"click\", 4, \"ngIf\"], [3, \"feature\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", 1, \"igo-icon-button\", 3, \"click\"], [\"svgIcon\", \"zoom-in\"], [3, \"feature\"]], template: function SidenavComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-sidenav\", 0, 1);\n        ɵɵelementStart(2, \"div\", 2);\n        ɵɵelementStart(3, \"igo-flexible\", 3, 4);\n        ɵɵelementStart(5, \"div\", 5);\n        ɵɵelementStart(6, \"igo-panel\", 6);\n        ɵɵpipe(7, \"translate\");\n        ɵɵtemplate(8, SidenavComponent_button_8_Template, 3, 3, \"button\", 7);\n        ɵɵtemplate(9, SidenavComponent_button_9_Template, 3, 3, \"button\", 8);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(10, \"div\", 9);\n        ɵɵtemplate(11, SidenavComponent_igo_panel_11_Template, 5, 6, \"igo-panel\", 10);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"opened\", ctx.opened);\n        ɵɵadvance(3);\n        ɵɵproperty(\"state\", ctx.topPanelState);\n        ɵɵadvance(3);\n        ɵɵproperty(\"title\", ctx.tool ? ɵɵpipeBind1(7, 6, ctx.tool.title) : ctx.title);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ctx.tool);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.tool);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ctx.feature && ctx.media !== \"mobile\");\n    } }, directives: [MatSidenav, FlexibleComponent, PanelComponent, NgIf, MatButton, MatTooltip, MatIcon, FeatureDetailsComponent], pipes: [TranslatePipe], styles: [\".igo-sidenav-content[_ngcontent-%COMP%]   .igo-flexible-fill[_ngcontent-%COMP%]   .igo-container[_ngcontent-%COMP%], [_nghost-%COMP%]     .igo-flexible-fill .igo-container{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;border-top:1px solid rgba(0,0,0,.2);box-sizing:border-box}mat-sidenav[_ngcontent-%COMP%]{-o-box-shadow:2px 0 2px 0 #ddd;box-shadow:2px 0 2px 0 #ddd}[_nghost-%COMP%]{background-color:#fff}[_nghost-%COMP%]     mat-sidenav{z-index:3!important}mat-sidenav[_ngcontent-%COMP%]{width:400px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){mat-sidenav[_ngcontent-%COMP%]{width:calc(100% - 45px)}}.igo-sidenav-content[_ngcontent-%COMP%]{height:calc(100% - 50px);margin-top:50px}igo-feature-details[_ngcontent-%COMP%]     table{width:100%}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SidenavComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-sidenav',\n                templateUrl: './sidenav.component.html',\n                styleUrls: ['./sidenav.component.scss']\n            }]\n    }], function () { return [{ type: Title }]; }, { map: [{\n            type: Input\n        }], opened: [{\n            type: Input\n        }], feature: [{\n            type: Input\n        }], tool: [{\n            type: Input\n        }], media: [{\n            type: Input\n        }], title: [{\n            type: Input\n        }] }); })();\n\nclass IgoSidenavModule {\n    static forRoot() {\n        return {\n            ngModule: IgoSidenavModule\n        };\n    }\n}\nIgoSidenavModule.ɵmod = ɵɵdefineNgModule({ type: IgoSidenavModule });\nIgoSidenavModule.ɵinj = ɵɵdefineInjector({ factory: function IgoSidenavModule_Factory(t) { return new (t || IgoSidenavModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatButtonModule,\n            MatSidenavModule,\n            MatTooltipModule,\n            IgoLanguageModule,\n            IgoPanelModule,\n            IgoFlexibleModule,\n            IgoFeatureModule,\n            IgoContextManagerModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoSidenavModule, { declarations: [SidenavComponent], imports: [CommonModule,\n        MatIconModule,\n        MatButtonModule,\n        MatSidenavModule,\n        MatTooltipModule,\n        IgoLanguageModule,\n        IgoPanelModule,\n        IgoFlexibleModule,\n        IgoFeatureModule,\n        IgoContextManagerModule], exports: [SidenavComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoSidenavModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatSidenavModule,\n                    MatTooltipModule,\n                    IgoLanguageModule,\n                    IgoPanelModule,\n                    IgoFlexibleModule,\n                    IgoFeatureModule,\n                    IgoContextManagerModule\n                ],\n                exports: [SidenavComponent],\n                declarations: [SidenavComponent]\n            }]\n    }], null, null); })();\n\nclass IgoContextModule {\n    static forRoot() {\n        return {\n            ngModule: IgoContextModule,\n            providers: []\n        };\n    }\n}\nIgoContextModule.ɵmod = ɵɵdefineNgModule({ type: IgoContextModule });\nIgoContextModule.ɵinj = ɵɵdefineInjector({ factory: function IgoContextModule_Factory(t) { return new (t || IgoContextModule)(); }, imports: [[MatInputModule, MatFormFieldModule, MatMenuModule], IgoContextImportExportModule,\n        IgoContextManagerModule,\n        IgoContextMapButtonModule,\n        IgoShareMapModule,\n        IgoSidenavModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoContextModule, { imports: [MatInputModule, MatFormFieldModule, MatMenuModule], exports: [IgoContextImportExportModule,\n        IgoContextManagerModule,\n        IgoContextMapButtonModule,\n        IgoShareMapModule,\n        IgoSidenavModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoContextModule, [{\n        type: NgModule,\n        args: [{\n                imports: [MatInputModule, MatFormFieldModule, MatMenuModule],\n                declarations: [],\n                exports: [\n                    IgoContextImportExportModule,\n                    IgoContextManagerModule,\n                    IgoContextMapButtonModule,\n                    IgoShareMapModule,\n                    IgoSidenavModule\n                ]\n            }]\n    }], null, null); })();\n\n/*\n * Public API Surface of context\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BookmarkButtonComponent, BookmarkDialogComponent, ContextEditBindingDirective, ContextEditComponent, ContextExportService, ContextFormComponent, ContextImportExportComponent, ContextImportService, ContextItemComponent, ContextListBindingDirective, ContextListComponent, ContextPermissionsBindingDirective, ContextPermissionsComponent, ContextService, ExportError, ExportInvalidFileError, ExportNothingToExportError, IgoContextImportExportModule, IgoContextManagerModule, IgoContextMapButtonModule, IgoContextModule, IgoShareMapModule, IgoSidenavModule, ImportError, ImportInvalidFileError, ImportNothingToImportError, ImportSRSError, ImportSizeError, ImportUnreadableFileError, LayerContextDirective, MapContextDirective, PoiButtonComponent, PoiDialogComponent, PoiService, Scope, ShareMapApiComponent, ShareMapComponent, ShareMapService, ShareMapUrlComponent, SidenavComponent, TypePermission, UserButtonComponent, UserDialogComponent, addContextToContextList, addImportedFeaturesStyledToMap, addImportedFeaturesToMap, computeLayerTitleFromFile, getFileExtension, handleFileExportError, handleFileExportSuccess, handleFileImportError, handleFileImportSuccess, handleInvalidFileImportError, handleNothingToExportError, handleNothingToImportError, handleSizeFileImportError, handleUnreadbleFileImportError };\n//# sourceMappingURL=igo2-context.js.map\n","import { ɵɵdefineNgModule, ɵɵdefineInjector, ɵsetClassMetadata, NgModule, ɵɵdefineInjectable, Injectable, ɵɵinject, ɵɵdirectiveInject, ɵɵdefineComponent, ɵɵelementStart, ɵɵlistener, ɵɵelementEnd, Component, ɵɵproperty, Input, ɵɵelement, ɵɵsetNgModuleScope, CUSTOM_ELEMENTS_SCHEMA, ChangeDetectionStrategy, ɵɵnextContext, ɵɵtemplate, ɵɵpipe, ɵɵpipeBind1, Inject, ɵɵgetCurrentView, ɵɵrestoreView, ɵɵadvance, ɵɵtemplateRefExtractor, ɵɵtext, ɵɵtextInterpolate1, ɵɵnamespaceSVG, ɵɵnamespaceHTML, ChangeDetectorRef, ɵɵreference, ɵɵstaticViewQuery, ɵɵqueryRefresh, ɵɵloadQuery, ViewChild, ɵɵdefineDirective, Directive, Self, HostListener, ɵɵtextInterpolate, ɵɵsanitizeHtml, ElementRef, ɵɵelementContainerStart, ɵɵelementContainerEnd, ɵɵpipeBind2, ɵɵpureFunction1 } from '@angular/core';\nimport { ContextEditComponent, ContextEditBindingDirective, ContextListComponent, ContextListBindingDirective, ContextPermissionsComponent, ContextPermissionsBindingDirective, ShareMapComponent, IgoContextModule, ContextImportExportComponent, IgoContextImportExportModule, ContextService } from '@igo2/context';\nimport { __decorate, __metadata } from 'tslib';\nimport { ToolService, ToolComponent, EntityStore, EntityStoreFilterCustomFuncStrategy, EntityStoreFilterSelectionStrategy, Widget, WorkspaceStore, getEntityTitle, FlexibleComponent, PanelComponent, SanitizeHtmlPipe, IgoFlexibleModule, IgoPanelModule, IgoCustomHtmlModule, InteractiveTourComponent, CustomHtmlComponent, IgoInteractiveTourModule } from '@igo2/common';\nimport { BehaviorSubject, combineLatest, ReplaySubject, Subject, forkJoin, of } from 'rxjs';\nimport { IgoMap, MapService, ProjectionService, CatalogService, CatalogLibaryComponent, IgoCatalogLibraryModule, CatalogBrowserComponent, IgoCatalogBrowserModule, FeatureStore, DirectionsFormComponent, DirectionsFormBindingDirective, IgoDirectionsModule, DrawComponent, IgoDrawingToolModule, FeatureStoreSelectionStrategy, FeatureMotion, mapExtentStrategyActiveToolTip, noElementSelected, OgcFilterWidget, WfsWorkspace, FeatureWorkspace, ImportExportComponent, IgoImportExportModule, LayerListControlsEnum, sourceCanSearch, SearchSourceService, LayerListComponent, LayerListBindingDirective, ExportButtonComponent, OgcFilterButtonComponent, TimeFilterButtonComponent, TrackFeatureButtonComponent, MetadataButtonComponent, VectorLayer, LayerLegendListComponent, LayerLegendListBindingDirective, IgoLayerModule, IgoMetadataModule, IgoDownloadModule, IgoFilterModule, MeasurerComponent, IgoMeasurerModule, PrintComponent, IgoPrintModule, SearchBarComponent, IgoSearchModule, FEATURE, getCommonVectorStyle, featureToOl, computeOlFeaturesExtent, featuresAreOutOfView, featuresAreTooDeepInView, featureFromOl, getCommonVectorSelectedStyle, moveToOlFeatures, SearchResultsComponent, SearchResultAddButtonComponent, FeatureDetailsComponent, FeatureDetailsDirective, IgoFeatureModule, IgoFeatureDetailsModule, OgcFilterableListComponent, OgcFilterableListBindingDirective, TimeFilterListComponent, TimeFilterListBindingDirective, SpatialFilterItemType, MeasureLengthUnit, SpatialFilterType, createOverlayMarkerStyle, SpatialFilterService, DataSourceService, LayerService, SpatialFilterTypeComponent, SpatialFilterItemComponent, TimeFilterItemComponent, OgcFilterableItemComponent, IgoQueryModule } from '@igo2/geo';\nimport { CommonModule, NgIf, AsyncPipe, NgForOf } from '@angular/common';\nimport { take, skipWhile, map, debounceTime, takeUntil, tap, skip } from 'rxjs/operators';\nimport { StorageService, StorageServiceEventEnum, LanguageService, MediaService, IgoLanguageModule, ConfigService, MessageService, AnalyticsService } from '@igo2/core';\nimport { AuthService } from '@igo2/auth';\nimport { MatButton, MatButtonModule } from '@angular/material/button';\nimport { MatTooltip, MatTooltipModule } from '@angular/material/tooltip';\nimport { MatIcon, MatIconModule, MatIconRegistry } from '@angular/material/icon';\nimport { TranslatePipe } from '@ngx-translate/core';\nimport { MatTabGroup, MatTab, MatTabsModule } from '@angular/material/tabs';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatList, MatListItem, MatListIconCssMatStyler, MatListModule } from '@angular/material/list';\nimport { MatMenuModule, _MatMenu, MatMenuTrigger, MatMenuItem } from '@angular/material/menu';\nimport { MatLine } from '@angular/material/core';\nimport { MatBadge, MatBadgeModule } from '@angular/material/badge';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\nimport olFeature from 'ol/Feature';\nimport olPoint from 'ol/geom/Point';\nimport { Style, Circle, Fill, Stroke, Icon } from 'ol/style';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { HttpClient } from '@angular/common/http';\n\nclass IgoAppAnalyticsModule {\n}\nIgoAppAnalyticsModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppAnalyticsModule });\nIgoAppAnalyticsModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppAnalyticsModule_Factory(t) { return new (t || IgoAppAnalyticsModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppAnalyticsModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\nvar ImportExportType;\n(function (ImportExportType) {\n    ImportExportType[\"layer\"] = \"layer\";\n    ImportExportType[\"context\"] = \"context\";\n})(ImportExportType || (ImportExportType = {}));\nvar ImportExportMode;\n(function (ImportExportMode) {\n    ImportExportMode[\"import\"] = \"import\";\n    ImportExportMode[\"export\"] = \"export\";\n})(ImportExportMode || (ImportExportMode = {}));\n/**\n * Service that holds the state of the importExport module\n */\nclass ImportExportState {\n    constructor() {\n        this.importExportType$ = new BehaviorSubject(ImportExportType.layer);\n        this.selectedMode$ = new BehaviorSubject(ImportExportMode.import);\n        this.exportOptions$ = new BehaviorSubject(undefined);\n    }\n    setImportExportType(type) {\n        this.importExportType$.next(type);\n    }\n    setMode(mode) {\n        this.selectedMode$.next(mode);\n    }\n    setsExportOptions(exportOptions) {\n        this.exportOptions$.next(exportOptions);\n    }\n}\nImportExportState.ɵfac = function ImportExportState_Factory(t) { return new (t || ImportExportState)(); };\nImportExportState.ɵprov = ɵɵdefineInjectable({ token: ImportExportState, factory: ImportExportState.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ImportExportState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], null, null); })();\n\n/**\n * Service that holds the state of the search module\n */\nclass ToolState {\n    constructor(toolService, importExportState) {\n        this.toolService = toolService;\n        this.importExportState = importExportState;\n        this.openSidenav$ = new BehaviorSubject(undefined);\n    }\n    get toolbox() {\n        return this.toolService.toolbox;\n    }\n    toolToActivateFromOptions(toolToActivate) {\n        if (!toolToActivate) {\n            return;\n        }\n        if (toolToActivate.tool === 'importExport') {\n            let exportOptions = this.importExportState.exportOptions$.value;\n            if (!exportOptions) {\n                exportOptions = {\n                    layers: toolToActivate.options.layers,\n                    featureInMapExtent: toolToActivate.options.featureInMapExtent\n                };\n            }\n            else {\n                exportOptions.layers = toolToActivate.options.layers;\n                exportOptions.featureInMapExtent = toolToActivate.options.featureInMapExtent;\n            }\n            this.importExportState.setsExportOptions(exportOptions);\n            this.importExportState.setMode(ImportExportMode.export);\n        }\n        if (this.toolbox.getTool(toolToActivate.tool)) {\n            this.toolbox.activateTool(toolToActivate.tool);\n            this.openSidenav$.next(true);\n        }\n    }\n}\nToolState.ɵfac = function ToolState_Factory(t) { return new (t || ToolState)(ɵɵinject(ToolService), ɵɵinject(ImportExportState)); };\nToolState.ɵprov = ɵɵdefineInjectable({ token: ToolState, factory: ToolState.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ToolState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ToolService }, { type: ImportExportState }]; }, null); })();\n\nlet ContextEditorToolComponent = class ContextEditorToolComponent {\n    constructor(toolState) {\n        this.toolState = toolState;\n    }\n    submitSuccessed() {\n        this.toolState.toolbox.activatePreviousTool();\n    }\n};\nContextEditorToolComponent.ɵfac = function ContextEditorToolComponent_Factory(t) { return new (t || ContextEditorToolComponent)(ɵɵdirectiveInject(ToolState)); };\nContextEditorToolComponent.ɵcmp = ɵɵdefineComponent({ type: ContextEditorToolComponent, selectors: [[\"igo-context-editor-tool\"]], decls: 1, vars: 0, consts: [[\"igoContextEditBinding\", \"\", 3, \"submitSuccessed\"]], template: function ContextEditorToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-context-edit\", 0);\n        ɵɵlistener(\"submitSuccessed\", function ContextEditorToolComponent_Template_igo_context_edit_submitSuccessed_0_listener() { return ctx.submitSuccessed(); });\n        ɵɵelementEnd();\n    } }, directives: [ContextEditComponent, ContextEditBindingDirective], encapsulation: 2 });\nContextEditorToolComponent = __decorate([\n    ToolComponent({\n        name: 'contextEditor',\n        title: 'igo.integration.tools.contexts',\n        icon: 'star',\n        parent: 'contextManager'\n    }),\n    __metadata(\"design:paramtypes\", [ToolState])\n], ContextEditorToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextEditorToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-editor-tool',\n                templateUrl: './context-editor-tool.component.html'\n            }]\n    }], function () { return [{ type: ToolState }]; }, null); })();\n\n/**\n * Service that holds the state of the map module\n */\nclass MapState {\n    constructor(mapService, projectionService // Don't remove this or it'll never be injected\n    ) {\n        this.mapService = mapService;\n        this.projectionService = projectionService;\n        this._map = new IgoMap({\n            controls: {\n                scaleLine: true,\n                attribution: {\n                    collapsed: true\n                }\n            }\n        });\n        this.mapService.setMap(this.map);\n    }\n    get showAllLegendsValue() {\n        return this._legendToolShowAll;\n    }\n    set showAllLegendsValue(value) {\n        this._legendToolShowAll = value;\n    }\n    /**\n     * Active map\n     */\n    get map() { return this._map; }\n}\nMapState.ɵfac = function MapState_Factory(t) { return new (t || MapState)(ɵɵinject(MapService), ɵɵinject(ProjectionService)); };\nMapState.ɵprov = ɵɵdefineInjectable({ token: MapState, factory: MapState.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MapState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: MapService }, { type: ProjectionService }]; }, null); })();\n\nlet ContextManagerToolComponent = class ContextManagerToolComponent {\n    constructor(toolState, mapState) {\n        this.toolState = toolState;\n        this.mapState = mapState;\n        this.toolToOpenOnContextChange = 'mapTools';\n    }\n    get map() { return this.mapState.map; }\n    editContext() {\n        this.toolState.toolbox.activateTool('contextEditor');\n    }\n    managePermissions() {\n        this.toolState.toolbox.activateTool('contextPermissionManager');\n    }\n};\nContextManagerToolComponent.ɵfac = function ContextManagerToolComponent_Factory(t) { return new (t || ContextManagerToolComponent)(ɵɵdirectiveInject(ToolState), ɵɵdirectiveInject(MapState)); };\nContextManagerToolComponent.ɵcmp = ɵɵdefineComponent({ type: ContextManagerToolComponent, selectors: [[\"igo-context-manager-tool\"]], inputs: { toolToOpenOnContextChange: \"toolToOpenOnContextChange\" }, decls: 1, vars: 1, consts: [[\"igoContextListBinding\", \"\", 3, \"map\", \"edit\", \"managePermissions\"]], template: function ContextManagerToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-context-list\", 0);\n        ɵɵlistener(\"edit\", function ContextManagerToolComponent_Template_igo_context_list_edit_0_listener() { return ctx.editContext(); })(\"managePermissions\", function ContextManagerToolComponent_Template_igo_context_list_managePermissions_0_listener() { return ctx.managePermissions(); });\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"map\", ctx.map);\n    } }, directives: [ContextListComponent, ContextListBindingDirective], encapsulation: 2 });\nContextManagerToolComponent = __decorate([\n    ToolComponent({\n        name: 'contextManager',\n        title: 'igo.integration.tools.contexts',\n        icon: 'star'\n    }),\n    __metadata(\"design:paramtypes\", [ToolState, MapState])\n], ContextManagerToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextManagerToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-manager-tool',\n                templateUrl: './context-manager-tool.component.html'\n            }]\n    }], function () { return [{ type: ToolState }, { type: MapState }]; }, { toolToOpenOnContextChange: [{\n            type: Input\n        }] }); })();\n\nlet ContextPermissionManagerToolComponent = class ContextPermissionManagerToolComponent {\n};\nContextPermissionManagerToolComponent.ɵfac = function ContextPermissionManagerToolComponent_Factory(t) { return new (t || ContextPermissionManagerToolComponent)(); };\nContextPermissionManagerToolComponent.ɵcmp = ɵɵdefineComponent({ type: ContextPermissionManagerToolComponent, selectors: [[\"igo-context-permission-manager-tool\"]], decls: 1, vars: 0, consts: [[\"igoContextPermissionsBinding\", \"\"]], template: function ContextPermissionManagerToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"igo-context-permissions\", 0);\n    } }, directives: [ContextPermissionsComponent, ContextPermissionsBindingDirective], encapsulation: 2 });\nContextPermissionManagerToolComponent = __decorate([\n    ToolComponent({\n        name: 'contextPermissionManager',\n        title: 'igo.integration.tools.contexts',\n        icon: 'star',\n        parent: 'contextManager'\n    })\n], ContextPermissionManagerToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextPermissionManagerToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-permission-manager-tool',\n                templateUrl: './context-permission-manager-tool.component.html'\n            }]\n    }], null, null); })();\n\n/**\n * Service that holds the state of layer list tool values\n */\nclass LayerListToolState {\n    constructor() {\n        this.keyword$ = new BehaviorSubject('');\n        this.sortAlpha$ = new BehaviorSubject(undefined);\n        this.onlyVisible$ = new BehaviorSubject(undefined);\n        this.selectedTab$ = new BehaviorSubject(undefined);\n    }\n    setKeyword(keyword) {\n        this.keyword$.next(keyword);\n    }\n    setSortAlpha(sort) {\n        this.sortAlpha$.next(sort);\n    }\n    setOnlyVisible(onlyVisible) {\n        this.onlyVisible$.next(onlyVisible);\n    }\n    setSelectedTab(tab) {\n        this.selectedTab$.next(tab);\n    }\n    getLayerListControls() {\n        return {\n            keyword: this.keyword$.value,\n            onlyVisible: this.onlyVisible$.value,\n            sortAlpha: this.sortAlpha$.value\n        };\n    }\n}\nLayerListToolState.ɵfac = function LayerListToolState_Factory(t) { return new (t || LayerListToolState)(); };\nLayerListToolState.ɵprov = ɵɵdefineInjectable({ token: LayerListToolState, factory: LayerListToolState.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(LayerListToolState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], null, null); })();\n\nlet ContextShareToolComponent = class ContextShareToolComponent {\n    constructor(mapState, layerListToolState) {\n        this.mapState = mapState;\n        this.layerListToolState = layerListToolState;\n    }\n    get map() { return this.mapState.map; }\n    get layerListControls() { return this.layerListToolState.getLayerListControls(); }\n};\nContextShareToolComponent.ɵfac = function ContextShareToolComponent_Factory(t) { return new (t || ContextShareToolComponent)(ɵɵdirectiveInject(MapState), ɵɵdirectiveInject(LayerListToolState)); };\nContextShareToolComponent.ɵcmp = ɵɵdefineComponent({ type: ContextShareToolComponent, selectors: [[\"igo-context-share-tool\"]], decls: 1, vars: 1, consts: [[3, \"map\"]], template: function ContextShareToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"igo-share-map\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"map\", ctx.map);\n    } }, directives: [ShareMapComponent], encapsulation: 2 });\nContextShareToolComponent = __decorate([\n    ToolComponent({\n        name: 'shareMap',\n        title: 'igo.integration.tools.shareMap',\n        icon: 'share-variant'\n    }),\n    __metadata(\"design:paramtypes\", [MapState,\n        LayerListToolState])\n], ContextShareToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextShareToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-share-tool',\n                templateUrl: './context-share-tool.component.html'\n            }]\n    }], function () { return [{ type: MapState }, { type: LayerListToolState }]; }, null); })();\n\nclass IgoAppContextModule {\n}\nIgoAppContextModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppContextModule });\nIgoAppContextModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppContextModule_Factory(t) { return new (t || IgoAppContextModule)(); }, imports: [[IgoContextModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppContextModule, { declarations: [ContextEditorToolComponent,\n        ContextManagerToolComponent,\n        ContextPermissionManagerToolComponent,\n        ContextShareToolComponent], imports: [IgoContextModule], exports: [ContextEditorToolComponent,\n        ContextManagerToolComponent,\n        ContextPermissionManagerToolComponent,\n        ContextShareToolComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppContextModule, [{\n        type: NgModule,\n        args: [{\n                imports: [IgoContextModule],\n                declarations: [\n                    ContextEditorToolComponent,\n                    ContextManagerToolComponent,\n                    ContextPermissionManagerToolComponent,\n                    ContextShareToolComponent\n                ],\n                exports: [\n                    ContextEditorToolComponent,\n                    ContextManagerToolComponent,\n                    ContextPermissionManagerToolComponent,\n                    ContextShareToolComponent\n                ],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n\n/**\n * Service that holds the state of the catalog module\n */\nclass CatalogState {\n    constructor(authService) {\n        /**\n         * Catalog -> Catalog items store mapping\n         */\n        this.catalogItemsStores = new Map();\n        this._catalogStore = new EntityStore([]);\n        authService.authenticate$.subscribe(() => {\n            this.clearCatalogItemsStores();\n        });\n    }\n    /**\n     * Store that contains all the catalogs\n     */\n    get catalogStore() { return this._catalogStore; }\n    /**\n     * Get a catalog's items store\n     * @param catalog Catalog\n     * @returns Store that contains the catalog items\n     */\n    getCatalogItemsStore(catalog) {\n        return this.catalogItemsStores.get(catalog.id);\n    }\n    /**\n     * Bind a catalog items store to a catalog\n     * @param catalog Catalog\n     * @param store Catalog items store\n     */\n    setCatalogItemsStore(catalog, store) {\n        this.catalogItemsStores.set(catalog.id, store);\n    }\n    /**\n     * Clear all catalog items stores\n     */\n    clearCatalogItemsStores() {\n        this.catalogItemsStores.clear();\n    }\n}\nCatalogState.ɵfac = function CatalogState_Factory(t) { return new (t || CatalogState)(ɵɵinject(AuthService)); };\nCatalogState.ɵprov = ɵɵdefineInjectable({ token: CatalogState, factory: CatalogState.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CatalogState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: AuthService }]; }, null); })();\n\n/**\n * Tool to browse the list of available catalogs.\n */\nlet CatalogLibraryToolComponent = class CatalogLibraryToolComponent {\n    constructor(catalogService, catalogState, toolState, storageService) {\n        this.catalogService = catalogService;\n        this.catalogState = catalogState;\n        this.toolState = toolState;\n        this.storageService = storageService;\n        /**\n         * Determine if the form to add a catalog is allowed\n         */\n        this.addCatalogAllowed = false;\n        /**\n         * List of predefined catalogs\n         */\n        this.predefinedCatalogs = [];\n    }\n    /**\n     * Store that contains the catalogs\n     * @internal\n     */\n    get store() {\n        return this.catalogState.catalogStore;\n    }\n    /**\n     * @internal\n     */\n    ngOnInit() {\n        if (this.store.count === 0) {\n            this.loadCatalogs();\n        }\n    }\n    /**\n     * When the selected catalog changes, toggle the the CatalogBrowser tool.\n     * @internal\n     * @param event Select event\n     */\n    onCatalogSelectChange(event) {\n        if (event.selected === false) {\n            return;\n        }\n        this.toolState.toolbox.activateTool('catalogBrowser');\n    }\n    /**\n     * Get all the available catalogs from the CatalogService and\n     * load them into the store.\n     */\n    loadCatalogs() {\n        this.catalogService.loadCatalogs().pipe(take(1)).subscribe((catalogs) => {\n            this.store.clear();\n            this.store.load(catalogs.concat((this.storageService.get('addedCatalogs') || [])));\n        });\n    }\n};\nCatalogLibraryToolComponent.ɵfac = function CatalogLibraryToolComponent_Factory(t) { return new (t || CatalogLibraryToolComponent)(ɵɵdirectiveInject(CatalogService), ɵɵdirectiveInject(CatalogState), ɵɵdirectiveInject(ToolState), ɵɵdirectiveInject(StorageService)); };\nCatalogLibraryToolComponent.ɵcmp = ɵɵdefineComponent({ type: CatalogLibraryToolComponent, selectors: [[\"igo-catalog-library-tool\"]], inputs: { addCatalogAllowed: \"addCatalogAllowed\", predefinedCatalogs: \"predefinedCatalogs\" }, decls: 1, vars: 3, consts: [[3, \"predefinedCatalogs\", \"addCatalogAllowed\", \"store\", \"catalogSelectChange\"]], template: function CatalogLibraryToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-catalog-library\", 0);\n        ɵɵlistener(\"catalogSelectChange\", function CatalogLibraryToolComponent_Template_igo_catalog_library_catalogSelectChange_0_listener($event) { return ctx.onCatalogSelectChange($event); });\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"predefinedCatalogs\", ctx.predefinedCatalogs)(\"addCatalogAllowed\", ctx.addCatalogAllowed)(\"store\", ctx.store);\n    } }, directives: [CatalogLibaryComponent], encapsulation: 2, changeDetection: 0 });\nCatalogLibraryToolComponent = __decorate([\n    ToolComponent({\n        name: 'catalog',\n        title: 'igo.integration.tools.catalog',\n        icon: 'layers-plus'\n    }),\n    __metadata(\"design:paramtypes\", [CatalogService,\n        CatalogState,\n        ToolState,\n        StorageService])\n], CatalogLibraryToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CatalogLibraryToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-library-tool',\n                templateUrl: './catalog-library-tool.component.html',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: CatalogService }, { type: CatalogState }, { type: ToolState }, { type: StorageService }]; }, { addCatalogAllowed: [{\n            type: Input\n        }], predefinedCatalogs: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoAppCatalogLibraryToolModule {\n}\nIgoAppCatalogLibraryToolModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppCatalogLibraryToolModule });\nIgoAppCatalogLibraryToolModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppCatalogLibraryToolModule_Factory(t) { return new (t || IgoAppCatalogLibraryToolModule)(); }, imports: [[\n            CommonModule,\n            IgoCatalogLibraryModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppCatalogLibraryToolModule, { declarations: [CatalogLibraryToolComponent], imports: [CommonModule,\n        IgoCatalogLibraryModule], exports: [CatalogLibraryToolComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppCatalogLibraryToolModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoCatalogLibraryModule\n                ],\n                declarations: [CatalogLibraryToolComponent],\n                exports: [CatalogLibraryToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n\nfunction CatalogBrowserToolComponent_igo_catalog_browser_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-catalog-browser\", 1);\n} if (rf & 2) {\n    const store_r1 = ctx.ngIf;\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"catalog\", ctx_r0.catalog)(\"store\", store_r1)(\"map\", ctx_r0.map)(\"toggleCollapsedGroup\", ctx_r0.toggleCollapsedGroup);\n} }\n/**\n * Tool to browse a catalog's groups and layers and display them to a map.\n */\nlet CatalogBrowserToolComponent = class CatalogBrowserToolComponent {\n    constructor(catalogService, catalogState, mapState, authService) {\n        this.catalogService = catalogService;\n        this.catalogState = catalogState;\n        this.mapState = mapState;\n        this.authService = authService;\n        /**\n         * Store that contains the catalog items\n         * @internal\n         */\n        this.store$ = new BehaviorSubject(undefined);\n        /**\n         * Whether a group can be toggled when it's collapsed\n         */\n        this.toggleCollapsedGroup = true;\n    }\n    /**\n     * Map to add layers to\n     * @internal\n     */\n    get map() {\n        return this.mapState.map;\n    }\n    /**\n     * @internal\n     */\n    ngOnInit() {\n        const catalogStore = this.catalogState.catalogStore;\n        this.catalog$$ = catalogStore.stateView\n            .firstBy$((record) => record.state.selected === true)\n            .subscribe((record) => {\n            if (record && record.entity) {\n                const catalog = record.entity;\n                this.catalog = catalog;\n            }\n        });\n        this.authenticate$$ = this.authService.authenticate$.subscribe(() => {\n            this.loadCatalogItems(this.catalog);\n        });\n    }\n    /**\n     * @internal\n     */\n    ngOnDestroy() {\n        this.catalog$$.unsubscribe();\n        this.authenticate$$.unsubscribe();\n    }\n    /**\n     * Get the selected catalog's items from the CatalogService and\n     * load them into the store.\n     * @param catalog Selected catalog\n     */\n    loadCatalogItems(catalog) {\n        let store = this.catalogState.getCatalogItemsStore(catalog);\n        if (store !== undefined) {\n            this.store$.next(store);\n            return;\n        }\n        store = new EntityStore([]);\n        this.catalogState.setCatalogItemsStore(catalog, store);\n        this.catalogService\n            .loadCatalogItems(catalog)\n            .pipe(take(1))\n            .subscribe((items) => {\n            store.load(items);\n            this.store$.next(store);\n        });\n    }\n};\nCatalogBrowserToolComponent.ɵfac = function CatalogBrowserToolComponent_Factory(t) { return new (t || CatalogBrowserToolComponent)(ɵɵdirectiveInject(CatalogService), ɵɵdirectiveInject(CatalogState), ɵɵdirectiveInject(MapState), ɵɵdirectiveInject(AuthService)); };\nCatalogBrowserToolComponent.ɵcmp = ɵɵdefineComponent({ type: CatalogBrowserToolComponent, selectors: [[\"igo-catalog-browser-tool\"]], inputs: { toggleCollapsedGroup: \"toggleCollapsedGroup\" }, decls: 2, vars: 3, consts: [[3, \"catalog\", \"store\", \"map\", \"toggleCollapsedGroup\", 4, \"ngIf\"], [3, \"catalog\", \"store\", \"map\", \"toggleCollapsedGroup\"]], template: function CatalogBrowserToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, CatalogBrowserToolComponent_igo_catalog_browser_0_Template, 1, 4, \"igo-catalog-browser\", 0);\n        ɵɵpipe(1, \"async\");\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(1, 1, ctx.store$));\n    } }, directives: [NgIf, CatalogBrowserComponent], pipes: [AsyncPipe], encapsulation: 2, changeDetection: 0 });\nCatalogBrowserToolComponent = __decorate([\n    ToolComponent({\n        name: 'catalogBrowser',\n        title: 'igo.integration.tools.catalog',\n        icon: 'photo-browser',\n        parent: 'catalog'\n    }),\n    __metadata(\"design:paramtypes\", [CatalogService,\n        CatalogState,\n        MapState,\n        AuthService])\n], CatalogBrowserToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(CatalogBrowserToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-browser-tool',\n                templateUrl: './catalog-browser-tool.component.html',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: CatalogService }, { type: CatalogState }, { type: MapState }, { type: AuthService }]; }, { toggleCollapsedGroup: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoAppCatalogBrowserToolModule {\n}\nIgoAppCatalogBrowserToolModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppCatalogBrowserToolModule });\nIgoAppCatalogBrowserToolModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppCatalogBrowserToolModule_Factory(t) { return new (t || IgoAppCatalogBrowserToolModule)(); }, imports: [[\n            CommonModule,\n            IgoCatalogBrowserModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppCatalogBrowserToolModule, { declarations: [CatalogBrowserToolComponent], imports: [CommonModule,\n        IgoCatalogBrowserModule], exports: [CatalogBrowserToolComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppCatalogBrowserToolModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoCatalogBrowserModule\n                ],\n                declarations: [CatalogBrowserToolComponent],\n                exports: [CatalogBrowserToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n\nclass IgoAppCatalogModule {\n}\nIgoAppCatalogModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppCatalogModule });\nIgoAppCatalogModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppCatalogModule_Factory(t) { return new (t || IgoAppCatalogModule)(); }, imports: [[], IgoAppCatalogLibraryToolModule,\n        IgoAppCatalogBrowserToolModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppCatalogModule, { exports: [IgoAppCatalogLibraryToolModule,\n        IgoAppCatalogBrowserToolModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppCatalogModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                exports: [\n                    IgoAppCatalogLibraryToolModule,\n                    IgoAppCatalogBrowserToolModule\n                ],\n                declarations: []\n            }]\n    }], null, null); })();\n\n/**\n * Service that holds the state of the direction module\n */\nclass DirectionState {\n    constructor(mapState) {\n        this.mapState = mapState;\n        /**\n         * Store that holds the stop and the driving route\n         */\n        this.stopsStore = new FeatureStore([], {\n            map: this.mapState.map\n        });\n        /**\n         * Store that holds the driving route\n         */\n        this.routeStore = new FeatureStore([], {\n            map: this.mapState.map\n        });\n        this.routeFromFeatureDetail = false;\n    }\n    setRouteFromFeatureDetail(value) {\n        this.routeFromFeatureDetail = value;\n    }\n}\nDirectionState.ɵfac = function DirectionState_Factory(t) { return new (t || DirectionState)(ɵɵinject(MapState)); };\nDirectionState.ɵprov = ɵɵdefineInjectable({ token: DirectionState, factory: DirectionState.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DirectionState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: MapState }]; }, null); })();\n\nlet DirectionsToolComponent = class DirectionsToolComponent {\n    constructor(directionState, mapState) {\n        this.directionState = directionState;\n        this.mapState = mapState;\n    }\n    /**\n     * stops\n     * @internal\n     */\n    get stopsStore() { return this.directionState.stopsStore; }\n    /**\n     * routes\n     * @internal\n     */\n    get routeStore() { return this.directionState.routeStore; }\n    /**\n     * Map to measure on\n     * @internal\n     */\n    get map() { return this.mapState.map; }\n    get routeFromFeatureDetail() {\n        return this.directionState.routeFromFeatureDetail;\n    }\n    onActiveRouteDescriptionChange(directions) {\n        this.directionState.activeRouteDescription = directions;\n    }\n};\nDirectionsToolComponent.ɵfac = function DirectionsToolComponent_Factory(t) { return new (t || DirectionsToolComponent)(ɵɵdirectiveInject(DirectionState), ɵɵdirectiveInject(MapState)); };\nDirectionsToolComponent.ɵcmp = ɵɵdefineComponent({ type: DirectionsToolComponent, selectors: [[\"igo-directions-tool\"]], decls: 1, vars: 4, consts: [[\"igoDirectionsFormBinding\", \"\", 3, \"stopsStore\", \"routeStore\", \"map\", \"routeFromFeatureDetail\", \"activeRouteDescription\"]], template: function DirectionsToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-directions-form\", 0);\n        ɵɵlistener(\"activeRouteDescription\", function DirectionsToolComponent_Template_igo_directions_form_activeRouteDescription_0_listener($event) { return ctx.onActiveRouteDescriptionChange($event); });\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵproperty(\"stopsStore\", ctx.stopsStore)(\"routeStore\", ctx.routeStore)(\"map\", ctx.map)(\"routeFromFeatureDetail\", ctx.routeFromFeatureDetail);\n    } }, directives: [DirectionsFormComponent, DirectionsFormBindingDirective], encapsulation: 2 });\nDirectionsToolComponent = __decorate([\n    ToolComponent({\n        name: 'directions',\n        title: 'igo.integration.tools.directions',\n        icon: 'directions'\n    }),\n    __metadata(\"design:paramtypes\", [DirectionState,\n        MapState])\n], DirectionsToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DirectionsToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-directions-tool',\n                templateUrl: './directions-tool.component.html'\n            }]\n    }], function () { return [{ type: DirectionState }, { type: MapState }]; }, null); })();\n\nclass IgoAppDirectionsModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAppDirectionsModule,\n            providers: []\n        };\n    }\n}\nIgoAppDirectionsModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppDirectionsModule });\nIgoAppDirectionsModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppDirectionsModule_Factory(t) { return new (t || IgoAppDirectionsModule)(); }, imports: [[IgoDirectionsModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppDirectionsModule, { declarations: [DirectionsToolComponent], imports: [IgoDirectionsModule], exports: [DirectionsToolComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppDirectionsModule, [{\n        type: NgModule,\n        args: [{\n                imports: [IgoDirectionsModule],\n                declarations: [DirectionsToolComponent],\n                exports: [DirectionsToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n\n/**\n * Service that holds the state of the measure module\n */\nclass DrawState {\n    constructor(mapState) {\n        this.mapState = mapState;\n        /**\n         * Store that holds the measures\n         */\n        this.store = new FeatureStore([], {\n            map: this.mapState.map\n        });\n    }\n}\nDrawState.ɵfac = function DrawState_Factory(t) { return new (t || DrawState)(ɵɵinject(MapState)); };\nDrawState.ɵprov = ɵɵdefineInjectable({ token: DrawState, factory: DrawState.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DrawState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: MapState }]; }, null); })();\n\n/**\n * Tool to measure lengths and areas\n */\nlet DrawingToolComponent = class DrawingToolComponent {\n    constructor(drawState, mapState) {\n        this.drawState = drawState;\n        this.mapState = mapState;\n    }\n    /**\n     * Map to measure on\n     * @internal\n     */\n    get store() { return this.drawState.store; }\n    /**\n     * Map to measure on\n     * @internal\n     */\n    get map() { return this.mapState.map; }\n};\nDrawingToolComponent.ɵfac = function DrawingToolComponent_Factory(t) { return new (t || DrawingToolComponent)(ɵɵdirectiveInject(DrawState), ɵɵdirectiveInject(MapState)); };\nDrawingToolComponent.ɵcmp = ɵɵdefineComponent({ type: DrawingToolComponent, selectors: [[\"igo-drawing-tool\"]], decls: 1, vars: 2, consts: [[3, \"store\", \"map\"]], template: function DrawingToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"igo-draw\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"store\", ctx.store)(\"map\", ctx.map);\n    } }, directives: [DrawComponent], encapsulation: 2, changeDetection: 0 });\nDrawingToolComponent = __decorate([\n    ToolComponent({\n        name: 'draw',\n        title: 'igo.integration.tools.draw',\n        icon: 'draw'\n    }),\n    __metadata(\"design:paramtypes\", [DrawState,\n        MapState])\n], DrawingToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(DrawingToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-drawing-tool',\n                templateUrl: './drawing-tool.component.html',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: DrawState }, { type: MapState }]; }, null); })();\n\nclass IgoAppDrawModule {\n}\nIgoAppDrawModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppDrawModule });\nIgoAppDrawModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppDrawModule_Factory(t) { return new (t || IgoAppDrawModule)(); }, imports: [[IgoDrawingToolModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppDrawModule, { declarations: [DrawingToolComponent], imports: [IgoDrawingToolModule], exports: [DrawingToolComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppDrawModule, [{\n        type: NgModule,\n        args: [{\n                imports: [IgoDrawingToolModule],\n                declarations: [DrawingToolComponent],\n                exports: [\n                    DrawingToolComponent\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * Service that holds the state of storage service\n */\nclass StorageState {\n    constructor(igoStorageService) {\n        this.igoStorageService = igoStorageService;\n    }\n    get storageService() {\n        return this.igoStorageService;\n    }\n}\nStorageState.ɵfac = function StorageState_Factory(t) { return new (t || StorageState)(ɵɵinject(StorageService)); };\nStorageState.ɵprov = ɵɵdefineInjectable({ token: StorageState, factory: StorageState.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(StorageState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: StorageService }]; }, null); })();\n\nfunction handleZoomAuto(workspace, storageService) {\n    const zoomStrategy = workspace.entityStore\n        .getStrategyOfType(FeatureStoreSelectionStrategy);\n    zoomStrategy.setMotion(storageService.get('zoomAuto') ? FeatureMotion.Default : FeatureMotion.None);\n}\n\nclass FeatureActionsService {\n    constructor(storageState, languageService, toolState, mediaService) {\n        this.storageState = storageState;\n        this.languageService = languageService;\n        this.toolState = toolState;\n        this.mediaService = mediaService;\n        this.maximize$ = new BehaviorSubject(this.storageService.get('workspaceMaximize'));\n        this.zoomAuto$ = new BehaviorSubject(false);\n    }\n    get storageService() {\n        return this.storageState.storageService;\n    }\n    get zoomAuto() {\n        return this.storageService.get('zoomAuto');\n    }\n    ngOnDestroy() {\n        if (this.storageChange$$) {\n            this.storageChange$$.unsubscribe();\n        }\n    }\n    loadActions(workspace, rowsInMapExtentCheckCondition$, selectOnlyCheckCondition$) {\n        const actions = this.buildActions(workspace, rowsInMapExtentCheckCondition$, selectOnlyCheckCondition$);\n        workspace.actionStore.load(actions);\n    }\n    buildActions(workspace, rowsInMapExtentCheckCondition$, selectOnlyCheckCondition$) {\n        this.zoomAuto$.next(this.zoomAuto);\n        this.storageChange$$ = this.storageService.storageChange$\n            .pipe(skipWhile((storageChange) => storageChange.key !== 'zoomAuto' || storageChange.event === StorageServiceEventEnum.CLEARED))\n            .subscribe(() => {\n            this.zoomAuto$.next(this.zoomAuto);\n            handleZoomAuto(workspace, this.storageService);\n        });\n        return [\n            {\n                id: 'zoomAuto',\n                checkbox: true,\n                title: 'igo.integration.workspace.zoomAuto.title',\n                tooltip: 'igo.integration.workspace.zoomAuto.tooltip',\n                checkCondition: this.zoomAuto$,\n                handler: () => {\n                    handleZoomAuto(workspace, this.storageService);\n                    this.storageService.set('zoomAuto', !this.storageService.get('zoomAuto'));\n                }\n            },\n            {\n                id: 'filterInMapExtent',\n                checkbox: true,\n                title: 'igo.integration.workspace.inMapExtent.title',\n                tooltip: mapExtentStrategyActiveToolTip(workspace),\n                checkCondition: rowsInMapExtentCheckCondition$,\n                handler: () => rowsInMapExtentCheckCondition$.next(!rowsInMapExtentCheckCondition$.value)\n            },\n            {\n                id: 'selectedOnly',\n                checkbox: true,\n                title: 'igo.integration.workspace.selected.title',\n                tooltip: 'igo.integration.workspace.selected.tooltip',\n                checkCondition: selectOnlyCheckCondition$,\n                handler: () => selectOnlyCheckCondition$.next(!selectOnlyCheckCondition$.value)\n            },\n            {\n                id: 'clearselection',\n                icon: 'select-off',\n                title: 'igo.integration.workspace.clearSelection.title',\n                tooltip: 'igo.integration.workspace.clearSelection.tooltip',\n                handler: (ws) => {\n                    ws.entityStore.state.updateMany(ws.entityStore.view.all(), {\n                        selected: false\n                    });\n                },\n                args: [workspace],\n                availability: (ws) => noElementSelected(ws)\n            },\n            {\n                id: 'featureDownload',\n                icon: 'file-export',\n                title: 'igo.integration.workspace.download.title',\n                tooltip: 'igo.integration.workspace.download.tooltip',\n                handler: (ws) => {\n                    const filterStrategy = ws.entityStore.getStrategyOfType(EntityStoreFilterCustomFuncStrategy);\n                    const filterSelectionStrategy = ws.entityStore.getStrategyOfType(EntityStoreFilterSelectionStrategy);\n                    const layersWithSelection = filterSelectionStrategy.active\n                        ? [ws.layer.id]\n                        : [];\n                    this.toolState.toolToActivateFromOptions({\n                        tool: 'importExport',\n                        options: {\n                            layers: [ws.layer.id],\n                            featureInMapExtent: filterStrategy.active,\n                            layersWithSelection\n                        }\n                    });\n                },\n                args: [workspace]\n            },\n            {\n                id: 'maximize',\n                title: this.languageService.translate.instant('igo.integration.workspace.maximize'),\n                tooltip: this.languageService.translate.instant('igo.integration.workspace.maximizeTooltip'),\n                icon: 'resize',\n                display: () => {\n                    return this.maximize$.pipe(map((v) => !v && !this.mediaService.isMobile()));\n                },\n                handler: () => {\n                    if (!this.mediaService.isMobile()) {\n                        this.maximize$.next(true);\n                    }\n                },\n            },\n            {\n                id: 'standardExtent',\n                title: this.languageService.translate.instant('igo.integration.workspace.standardExtent'),\n                tooltip: this.languageService.translate.instant('igo.integration.workspace.standardExtentTooltip'),\n                icon: 'resize',\n                display: () => {\n                    return this.maximize$.pipe(map((v) => v && !this.mediaService.isMobile()));\n                },\n                handler: () => {\n                    this.maximize$.next(false);\n                }\n            }\n        ];\n    }\n}\nFeatureActionsService.ɵfac = function FeatureActionsService_Factory(t) { return new (t || FeatureActionsService)(ɵɵinject(StorageState), ɵɵinject(LanguageService), ɵɵinject(ToolState), ɵɵinject(MediaService)); };\nFeatureActionsService.ɵprov = ɵɵdefineInjectable({ token: FeatureActionsService, factory: FeatureActionsService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(FeatureActionsService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: StorageState }, { type: LanguageService }, { type: ToolState }, { type: MediaService }]; }, null); })();\n\nclass WfsActionsService {\n    constructor(ogcFilterWidget, storageState, languageService, mediaService, toolState) {\n        this.ogcFilterWidget = ogcFilterWidget;\n        this.storageState = storageState;\n        this.languageService = languageService;\n        this.mediaService = mediaService;\n        this.toolState = toolState;\n        this.maximize$ = new BehaviorSubject(this.storageService.get('workspaceMaximize'));\n        this.selectOnlyCheckCondition$ = new BehaviorSubject(false);\n        // rowsInMapExtentCheckCondition$: BehaviorSubject<boolean> = new BehaviorSubject(true);\n        this.zoomAuto$ = new BehaviorSubject(false);\n    }\n    get storageService() {\n        return this.storageState.storageService;\n    }\n    get zoomAuto() {\n        return this.storageService.get('zoomAuto');\n    }\n    ngOnDestroy() {\n        if (this.storageChange$$) {\n            this.storageChange$$.unsubscribe();\n        }\n    }\n    loadActions(workspace, rowsInMapExtentCheckCondition$, selectOnlyCheckCondition$) {\n        const actions = this.buildActions(workspace, rowsInMapExtentCheckCondition$, selectOnlyCheckCondition$);\n        workspace.actionStore.load(actions);\n    }\n    buildActions(workspace, rowsInMapExtentCheckCondition$, selectOnlyCheckCondition$) {\n        var _a, _b;\n        this.zoomAuto$.next(this.zoomAuto);\n        this.storageChange$$ = this.storageService.storageChange$\n            .pipe(skipWhile((storageChange) => storageChange.key !== 'zoomAuto' || storageChange.event === StorageServiceEventEnum.CLEARED))\n            .subscribe(() => {\n            this.zoomAuto$.next(this.zoomAuto);\n            handleZoomAuto(workspace, this.storageService);\n        });\n        const actions = [\n            {\n                id: 'zoomAuto',\n                checkbox: true,\n                title: 'igo.integration.workspace.zoomAuto.title',\n                tooltip: 'igo.integration.workspace.zoomAuto.tooltip',\n                checkCondition: this.zoomAuto$,\n                handler: () => {\n                    handleZoomAuto(workspace, this.storageService);\n                    this.storageService.set('zoomAuto', !this.storageService.get('zoomAuto'));\n                }\n            },\n            {\n                id: 'filterInMapExtent',\n                checkbox: true,\n                title: 'igo.integration.workspace.inMapExtent.title',\n                tooltip: mapExtentStrategyActiveToolTip(workspace),\n                checkCondition: rowsInMapExtentCheckCondition$,\n                handler: () => rowsInMapExtentCheckCondition$.next(!rowsInMapExtentCheckCondition$.value)\n            },\n            {\n                id: 'selectedOnly',\n                checkbox: true,\n                title: 'igo.integration.workspace.selected.title',\n                tooltip: 'igo.integration.workspace.selected.title',\n                checkCondition: selectOnlyCheckCondition$,\n                handler: () => selectOnlyCheckCondition$.next(!selectOnlyCheckCondition$.value)\n            },\n            {\n                id: 'clearselection',\n                icon: 'select-off',\n                title: 'igo.integration.workspace.clearSelection.title',\n                tooltip: 'igo.integration.workspace.clearSelection.tooltip',\n                handler: (ws) => {\n                    ws.entityStore.state.updateMany(ws.entityStore.view.all(), { selected: false });\n                },\n                args: [workspace],\n                availability: (ws) => noElementSelected(ws)\n            },\n            {\n                id: 'wfsDownload',\n                icon: 'file-export',\n                title: 'igo.integration.workspace.download.title',\n                tooltip: 'igo.integration.workspace.download.tooltip',\n                handler: (ws) => {\n                    const filterStrategy = ws.entityStore.getStrategyOfType(EntityStoreFilterCustomFuncStrategy);\n                    const filterSelectionStrategy = ws.entityStore.getStrategyOfType(EntityStoreFilterSelectionStrategy);\n                    const layersWithSelection = filterSelectionStrategy.active ? [ws.layer.id] : [];\n                    this.toolState.toolToActivateFromOptions({\n                        tool: 'importExport',\n                        options: { layers: [ws.layer.id], featureInMapExtent: filterStrategy.active, layersWithSelection }\n                    });\n                },\n                args: [workspace]\n            },\n            {\n                id: 'ogcFilter',\n                icon: 'filter',\n                title: 'igo.integration.workspace.ogcFilter.title',\n                tooltip: 'igo.integration.workspace.ogcFilter.tooltip',\n                handler: (widget, ws) => {\n                    ws.activateWidget(widget, {\n                        map: ws.map,\n                        layer: ws.layer\n                    });\n                },\n                args: [this.ogcFilterWidget, workspace]\n            },\n            {\n                id: 'maximize',\n                title: this.languageService.translate.instant('igo.integration.workspace.maximize'),\n                tooltip: this.languageService.translate.instant('igo.integration.workspace.maximizeTooltip'),\n                icon: 'resize',\n                display: () => {\n                    return this.maximize$.pipe(map((v) => !v && !this.mediaService.isMobile()));\n                },\n                handler: () => {\n                    if (!this.mediaService.isMobile()) {\n                        this.maximize$.next(true);\n                    }\n                },\n            },\n            {\n                id: 'standardExtent',\n                title: this.languageService.translate.instant('igo.integration.workspace.standardExtent'),\n                tooltip: this.languageService.translate.instant('igo.integration.workspace.standardExtentTooltip'),\n                icon: 'resize',\n                display: () => {\n                    return this.maximize$.pipe(map((v) => v && !this.mediaService.isMobile()));\n                },\n                handler: () => {\n                    this.maximize$.next(false);\n                }\n            }\n        ];\n        return ((_b = (_a = workspace.layer.dataSource.ogcFilters$) === null || _a === void 0 ? void 0 : _a.value) === null || _b === void 0 ? void 0 : _b.enabled) ?\n            actions : actions.filter(action => action.id !== 'ogcFilter');\n    }\n}\nWfsActionsService.ɵfac = function WfsActionsService_Factory(t) { return new (t || WfsActionsService)(ɵɵinject(OgcFilterWidget), ɵɵinject(StorageState), ɵɵinject(LanguageService), ɵɵinject(MediaService), ɵɵinject(ToolState)); };\nWfsActionsService.ɵprov = ɵɵdefineInjectable({ token: WfsActionsService, factory: WfsActionsService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(WfsActionsService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: Widget, decorators: [{\n                type: Inject,\n                args: [OgcFilterWidget]\n            }] }, { type: StorageState }, { type: LanguageService }, { type: MediaService }, { type: ToolState }]; }, null); })();\n\n/**\n * Service that holds the state of the workspace module\n */\nclass WorkspaceState {\n    constructor(featureActionsService, wfsActionsService, storageService) {\n        this.featureActionsService = featureActionsService;\n        this.wfsActionsService = wfsActionsService;\n        this.storageService = storageService;\n        this.workspacePanelExpanded = false;\n        this.workspaceEnabled$ = new BehaviorSubject(false);\n        this.rowsInMapExtentCheckCondition$ = new BehaviorSubject(true);\n        this.selectOnlyCheckCondition$ = new BehaviorSubject(false);\n        this.workspaceMaximize$ = new BehaviorSubject(this.storageService.get('workspaceMaximize'));\n        this.actionMaximize$$ = [];\n        /** Active widget observable. Only one may be active for all available workspaces */\n        this.activeWorkspaceWidget$ = new BehaviorSubject(undefined);\n        /**\n         * Observable of the active workspace\n         */\n        this.workspace$ = new BehaviorSubject(undefined);\n        this.initWorkspaces();\n    }\n    /**\n     * Store that holds all the available workspaces\n     */\n    get store() { return this._store; }\n    /**\n     * Initialize the workspace store. Each time a workspace is activated,\n     * subscribe to it's active widget. Tracking the active widget is useful\n     * to make sure only one widget is active at a time.\n     */\n    initWorkspaces() {\n        this._store = new WorkspaceStore([]);\n        this._store.stateView\n            .firstBy$((record) => record.state.active === true)\n            .subscribe((record) => {\n            const workspace = record ? record.entity : undefined;\n            this.workspace$.next(workspace);\n        });\n        this._store.stateView.all$()\n            .subscribe((workspaces) => {\n            workspaces.map((wks) => {\n                if (wks.entity.actionStore.empty) {\n                    if (wks.entity instanceof WfsWorkspace) {\n                        this.wfsActionsService.loadActions(wks.entity, this.rowsInMapExtentCheckCondition$, this.selectOnlyCheckCondition$);\n                    }\n                    else if (wks.entity instanceof FeatureWorkspace) {\n                        this.featureActionsService.loadActions(wks.entity, this.rowsInMapExtentCheckCondition$, this.selectOnlyCheckCondition$);\n                    }\n                }\n            });\n        });\n        this.actionMaximize$$.push(this.featureActionsService.maximize$.subscribe(maximized => {\n            this.setWorkspaceIsMaximized(maximized);\n        }));\n        this.actionMaximize$$.push(this.wfsActionsService.maximize$.subscribe(maximized => {\n            this.setWorkspaceIsMaximized(maximized);\n        }));\n        this.activeWorkspace$$ = this.workspace$\n            .subscribe((workspace) => {\n            if (this.activeWorkspaceWidget$$ !== undefined) {\n                this.activeWorkspaceWidget$$.unsubscribe();\n                this.activeWorkspaceWidget$$ = undefined;\n            }\n            if (workspace !== undefined) {\n                this.activeWorkspaceWidget$$ = workspace.widget$\n                    .subscribe((widget) => this.activeWorkspaceWidget$.next(widget));\n            }\n        });\n        this.rowsInMapExtentCheckCondition$$ = this.rowsInMapExtentCheckCondition$.subscribe((rowsInMapExtent) => {\n            this._store.stateView.all().map((wks) => {\n                if (!wks.entity.actionStore.empty) {\n                    const filterStrategy = wks.entity.entityStore.getStrategyOfType(EntityStoreFilterCustomFuncStrategy);\n                    if (filterStrategy) {\n                        if (rowsInMapExtent) {\n                            filterStrategy.activate();\n                        }\n                        else {\n                            filterStrategy.deactivate();\n                        }\n                    }\n                }\n            });\n        });\n        this.selectOnlyCheckCondition$$ = this.selectOnlyCheckCondition$.subscribe((selectOnly) => {\n            this._store.stateView.all().map((wks) => {\n                if (!wks.entity.actionStore.empty) {\n                    const filterStrategy = wks.entity.entityStore.getStrategyOfType(EntityStoreFilterSelectionStrategy);\n                    if (filterStrategy) {\n                        if (selectOnly) {\n                            filterStrategy.activate();\n                        }\n                        else {\n                            filterStrategy.deactivate();\n                        }\n                    }\n                }\n            });\n        });\n    }\n    setWorkspaceIsMaximized(maximized) {\n        this.storageService.set('workspaceMaximize', maximized);\n        this.workspaceMaximize$.next(maximized);\n    }\n    setActiveWorkspaceById(id) {\n        const wksFromId = this.store\n            .all()\n            .find(workspace => workspace.id === id);\n        if (wksFromId) {\n            this.store.activateWorkspace(wksFromId);\n        }\n    }\n    /**\n     * Teardown all the workspaces\n     * @internal\n     */\n    ngOnDestroy() {\n        this.teardownWorkspaces();\n        this.actionMaximize$$.map(a => a.unsubscribe());\n        if (this.rowsInMapExtentCheckCondition$$) {\n            this.selectOnlyCheckCondition$$.unsubscribe();\n        }\n        if (this.selectOnlyCheckCondition$$) {\n            this.selectOnlyCheckCondition$$.unsubscribe();\n        }\n    }\n    /**\n     * Teardown the workspace store and any subscribers\n     */\n    teardownWorkspaces() {\n        this.store.clear();\n        if (this.activeWorkspaceWidget$$ !== undefined) {\n            this.activeWorkspaceWidget$$.unsubscribe();\n        }\n        if (this.activeWorkspace$$ !== undefined) {\n            this.activeWorkspace$$.unsubscribe();\n        }\n    }\n}\nWorkspaceState.ɵfac = function WorkspaceState_Factory(t) { return new (t || WorkspaceState)(ɵɵinject(FeatureActionsService), ɵɵinject(WfsActionsService), ɵɵinject(StorageService)); };\nWorkspaceState.ɵprov = ɵɵdefineInjectable({ token: WorkspaceState, factory: WorkspaceState.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(WorkspaceState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: FeatureActionsService }, { type: WfsActionsService }, { type: StorageService }]; }, null); })();\n\nfunction WorkspaceButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 1);\n    ɵɵlistener(\"click\", function WorkspaceButtonComponent_button_0_Template_button_click_0_listener() { ɵɵrestoreView(_r2); const ctx_r1 = ɵɵnextContext(); return ctx_r1.activateWorkspace(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelement(2, \"mat-icon\", 2);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 2, \"igo.integration.workspace.toggleWorkspace\"))(\"color\", ctx_r0.color);\n} }\nclass WorkspaceButtonComponent {\n    constructor(workspaceState) {\n        this.workspaceState = workspaceState;\n        this.hasWorkspace$ = new BehaviorSubject(false);\n        this.layer$ = new BehaviorSubject(undefined);\n        this.color = 'primary';\n    }\n    set layer(value) {\n        this._layer = value;\n        this.layer$.next(this._layer);\n    }\n    get layer() {\n        return this._layer;\n    }\n    ngOnInit() {\n        this.hasWorkspace$$ = combineLatest([this.workspaceState.workspaceEnabled$, this.layer$])\n            .subscribe(bunch => { var _a, _b; return this.hasWorkspace$.next(bunch[0] && ((_b = (_a = bunch[1]) === null || _a === void 0 ? void 0 : _a.options.workspace) === null || _b === void 0 ? void 0 : _b.enabled)); });\n    }\n    ngOnDestroy() {\n        this.hasWorkspace$$.unsubscribe();\n    }\n    activateWorkspace() {\n        if (this.workspaceState.workspace$.value &&\n            this.workspaceState.workspace$.value.layer.id === this.layer.id &&\n            this.workspaceState.workspacePanelExpanded) {\n            this.workspaceState.workspacePanelExpanded = false;\n        }\n        else {\n            this.workspaceState.workspacePanelExpanded = true;\n            this.workspaceState.setActiveWorkspaceById(this.layer.id);\n        }\n    }\n}\nWorkspaceButtonComponent.ɵfac = function WorkspaceButtonComponent_Factory(t) { return new (t || WorkspaceButtonComponent)(ɵɵdirectiveInject(WorkspaceState)); };\nWorkspaceButtonComponent.ɵcmp = ɵɵdefineComponent({ type: WorkspaceButtonComponent, selectors: [[\"igo-workspace-button\"]], inputs: { layer: \"layer\", color: \"color\" }, decls: 2, vars: 3, consts: [[\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"table\"]], template: function WorkspaceButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, WorkspaceButtonComponent_button_0_Template, 3, 4, \"button\", 0);\n        ɵɵpipe(1, \"async\");\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(1, 1, ctx.hasWorkspace$));\n    } }, directives: [NgIf, MatButton, MatTooltip, MatIcon], pipes: [AsyncPipe, TranslatePipe], styles: [\"\"], changeDetection: 0 });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(WorkspaceButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-workspace-button',\n                templateUrl: './workspace-button.component.html',\n                styleUrls: ['./workspace-button.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: WorkspaceState }]; }, { layer: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\nclass IgoAppWorkspaceModule {\n}\nIgoAppWorkspaceModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppWorkspaceModule });\nIgoAppWorkspaceModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppWorkspaceModule_Factory(t) { return new (t || IgoAppWorkspaceModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTooltipModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppWorkspaceModule, { declarations: [WorkspaceButtonComponent], imports: [CommonModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTooltipModule,\n        IgoLanguageModule], exports: [WorkspaceButtonComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppWorkspaceModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTooltipModule,\n                    IgoLanguageModule\n                ],\n                declarations: [WorkspaceButtonComponent],\n                exports: [WorkspaceButtonComponent]\n            }]\n    }], null, null); })();\n\nfunction ImportExportToolComponent_mat_tab_group_0_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-tab-group\");\n    ɵɵelementStart(1, \"mat-tab\", 3);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementStart(3, \"igo-import-export\", 4);\n    ɵɵlistener(\"selectMode\", function ImportExportToolComponent_mat_tab_group_0_Template_igo_import_export_selectMode_3_listener($event) { ɵɵrestoreView(_r4); const ctx_r3 = ɵɵnextContext(); return ctx_r3.modeChanged($event); })(\"exportOptionsChange\", function ImportExportToolComponent_mat_tab_group_0_Template_igo_import_export_exportOptionsChange_3_listener($event) { ɵɵrestoreView(_r4); const ctx_r5 = ɵɵnextContext(); return ctx_r5.exportOptionsChange($event); });\n    ɵɵpipe(4, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(5, \"mat-tab\", 3);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelement(7, \"igo-context-import-export\", 5);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵproperty(\"label\", ɵɵpipeBind1(2, 9, \"igo.integration.importExportTool.importExportData\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"map\", ctx_r0.map)(\"selectFirstProj\", ctx_r0.selectFirstProj)(\"projectionsLimitations\", ctx_r0.projectionsLimitations)(\"store\", ctx_r0.workspaceStore)(\"selectedMode\", ɵɵpipeBind1(4, 11, ctx_r0.importExportState.selectedMode$))(\"exportOptions$\", ctx_r0.importExportState.exportOptions$);\n    ɵɵadvance(2);\n    ɵɵproperty(\"label\", ɵɵpipeBind1(6, 13, \"igo.integration.importExportTool.importExportContext\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"map\", ctx_r0.map);\n} }\nfunction ImportExportToolComponent_igo_import_export_1_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-import-export\", 6);\n    ɵɵlistener(\"selectMode\", function ImportExportToolComponent_igo_import_export_1_Template_igo_import_export_selectMode_0_listener($event) { ɵɵrestoreView(_r7); const ctx_r6 = ɵɵnextContext(); return ctx_r6.modeChanged($event); })(\"exportOptionsChange\", function ImportExportToolComponent_igo_import_export_1_Template_igo_import_export_exportOptionsChange_0_listener($event) { ɵɵrestoreView(_r7); const ctx_r8 = ɵɵnextContext(); return ctx_r8.exportOptionsChange($event); });\n    ɵɵpipe(1, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"map\", ctx_r1.map)(\"store\", ctx_r1.workspaceStore)(\"selectedMode\", ɵɵpipeBind1(1, 4, ctx_r1.importExportState.selectedMode$))(\"exportOptions$\", ctx_r1.importExportState.exportOptions$);\n} }\nfunction ImportExportToolComponent_igo_context_import_export_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-context-import-export\", 5);\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵproperty(\"map\", ctx_r2.map);\n} }\nlet ImportExportToolComponent = class ImportExportToolComponent {\n    constructor(mapState, importExportState, workspaceState) {\n        this.mapState = mapState;\n        this.importExportState = importExportState;\n        this.workspaceState = workspaceState;\n        this.selectFirstProj = false;\n        this.importExportType = ImportExportType.layer;\n        this.importExportShowBothType = true;\n    }\n    /**\n     * Map to measure on\n     * @internal\n     */\n    get map() { return this.mapState.map; }\n    get workspaceStore() {\n        return this.workspaceState.store;\n    }\n    ngOnInit() {\n        this.selectType();\n        this.selectMode();\n    }\n    selectType() {\n        if (this.importExportType) {\n            this.importExportState.importExportType$.next(this.importExportType);\n        }\n        const userSelectedType = this.importExportState.importExportType$.value;\n        if (userSelectedType !== undefined) {\n            this.importExportState.setImportExportType(userSelectedType);\n        }\n        else {\n            this.importExportState.setImportExportType(ImportExportType.layer);\n        }\n    }\n    selectMode() {\n        const userSelectedMode = this.importExportState.selectedMode$.value;\n        if (userSelectedMode !== undefined) {\n            this.importExportState.setMode(userSelectedMode);\n        }\n        else {\n            this.importExportState.setMode(ImportExportMode.import);\n        }\n    }\n    modeChanged(mode) {\n        this.importExportState.setMode(mode);\n    }\n    exportOptionsChange(exportOptions) {\n        this.importExportState.setsExportOptions(exportOptions);\n    }\n    importExportTypeChange(event) {\n        this.importExportType = event.value;\n    }\n};\nImportExportToolComponent.ɵfac = function ImportExportToolComponent_Factory(t) { return new (t || ImportExportToolComponent)(ɵɵdirectiveInject(MapState), ɵɵdirectiveInject(ImportExportState), ɵɵdirectiveInject(WorkspaceState)); };\nImportExportToolComponent.ɵcmp = ɵɵdefineComponent({ type: ImportExportToolComponent, selectors: [[\"igo-import-export-tool\"]], inputs: { projectionsLimitations: \"projectionsLimitations\", selectFirstProj: \"selectFirstProj\", importExportType: \"importExportType\", importExportShowBothType: \"importExportShowBothType\" }, decls: 3, vars: 3, consts: [[4, \"ngIf\"], [3, \"map\", \"store\", \"selectedMode\", \"exportOptions$\", \"selectMode\", \"exportOptionsChange\", 4, \"ngIf\"], [3, \"map\", 4, \"ngIf\"], [3, \"label\"], [3, \"map\", \"selectFirstProj\", \"projectionsLimitations\", \"store\", \"selectedMode\", \"exportOptions$\", \"selectMode\", \"exportOptionsChange\"], [3, \"map\"], [3, \"map\", \"store\", \"selectedMode\", \"exportOptions$\", \"selectMode\", \"exportOptionsChange\"]], template: function ImportExportToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, ImportExportToolComponent_mat_tab_group_0_Template, 8, 15, \"mat-tab-group\", 0);\n        ɵɵtemplate(1, ImportExportToolComponent_igo_import_export_1_Template, 2, 6, \"igo-import-export\", 1);\n        ɵɵtemplate(2, ImportExportToolComponent_igo_context_import_export_2_Template, 1, 1, \"igo-context-import-export\", 2);\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", ctx.importExportShowBothType);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", !ctx.importExportShowBothType && ctx.importExportType === \"layer\");\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", !ctx.importExportShowBothType && ctx.importExportType === \"context\");\n    } }, directives: [NgIf, MatTabGroup, MatTab, ImportExportComponent, ContextImportExportComponent], pipes: [TranslatePipe, AsyncPipe], styles: [\"mat-form-field[_ngcontent-%COMP%]{width:100%}\"], changeDetection: 0 });\nImportExportToolComponent = __decorate([\n    ToolComponent({\n        name: 'importExport',\n        title: 'igo.integration.tools.importExport',\n        icon: 'file-move'\n    }),\n    __metadata(\"design:paramtypes\", [MapState,\n        ImportExportState,\n        WorkspaceState])\n], ImportExportToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ImportExportToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-import-export-tool',\n                templateUrl: './import-export-tool.component.html',\n                styleUrls: ['./import-export-tool.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: MapState }, { type: ImportExportState }, { type: WorkspaceState }]; }, { projectionsLimitations: [{\n            type: Input\n        }], selectFirstProj: [{\n            type: Input\n        }], importExportType: [{\n            type: Input\n        }], importExportShowBothType: [{\n            type: Input\n        }] }); })();\n\nclass IgoAppImportExportModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAppImportExportModule,\n            providers: []\n        };\n    }\n}\nIgoAppImportExportModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppImportExportModule });\nIgoAppImportExportModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppImportExportModule_Factory(t) { return new (t || IgoAppImportExportModule)(); }, imports: [[\n            IgoImportExportModule,\n            IgoContextImportExportModule,\n            CommonModule,\n            IgoLanguageModule,\n            MatButtonToggleModule,\n            MatTabsModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppImportExportModule, { declarations: [ImportExportToolComponent], imports: [IgoImportExportModule,\n        IgoContextImportExportModule,\n        CommonModule,\n        IgoLanguageModule,\n        MatButtonToggleModule,\n        MatTabsModule], exports: [ImportExportToolComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppImportExportModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    IgoImportExportModule,\n                    IgoContextImportExportModule,\n                    CommonModule,\n                    IgoLanguageModule,\n                    MatButtonToggleModule,\n                    MatTabsModule\n                ],\n                declarations: [ImportExportToolComponent],\n                exports: [ImportExportToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n\nfunction MapDetailsToolComponent_igo_layer_list_0_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵɵgetCurrentView();\n    ɵɵelement(0, \"igo-workspace-button\", 4);\n    ɵɵelementStart(1, \"igo-export-button\", 5);\n    ɵɵlistener(\"click\", function MapDetailsToolComponent_igo_layer_list_0_ng_template_1_Template_igo_export_button_click_1_listener() { ɵɵrestoreView(_r7); const layer_r5 = ctx.layer; const ctx_r6 = ɵɵnextContext(2); return ctx_r6.activateExport(layer_r5); });\n    ɵɵelementEnd();\n    ɵɵelement(2, \"igo-ogc-filter-button\", 6);\n    ɵɵelement(3, \"igo-time-filter-button\", 6);\n    ɵɵelement(4, \"igo-track-feature-button\", 7);\n    ɵɵelement(5, \"igo-metadata-button\", 4);\n} if (rf & 2) {\n    const layer_r5 = ctx.layer;\n    const ctx_r4 = ɵɵnextContext(2);\n    ɵɵproperty(\"layer\", layer_r5);\n    ɵɵadvance(1);\n    ɵɵproperty(\"layer\", layer_r5);\n    ɵɵadvance(1);\n    ɵɵproperty(\"header\", ctx_r4.ogcButton)(\"layer\", layer_r5);\n    ɵɵadvance(1);\n    ɵɵproperty(\"header\", ctx_r4.timeButton)(\"layer\", layer_r5);\n    ɵɵadvance(1);\n    ɵɵproperty(\"trackFeature\", true)(\"layer\", layer_r5);\n    ɵɵadvance(1);\n    ɵɵproperty(\"layer\", layer_r5);\n} }\nfunction MapDetailsToolComponent_igo_layer_list_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"igo-layer-list\", 2);\n    ɵɵtemplate(1, MapDetailsToolComponent_igo_layer_list_0_ng_template_1_Template, 6, 9, \"ng-template\", null, 3, ɵɵtemplateRefExtractor);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"map\", ctx_r0.map)(\"excludeBaseLayers\", ctx_r0.excludeBaseLayers)(\"layerFilterAndSortOptions\", ctx_r0.layerFilterAndSortOptions)(\"expandLegendOfVisibleLayers\", ctx_r0.expandLegendOfVisibleLayers)(\"toggleLegendOnVisibilityChange\", ctx_r0.toggleLegendOnVisibilityChange)(\"updateLegendOnResolutionChange\", ctx_r0.updateLegendOnResolutionChange)(\"queryBadge\", ctx_r0.queryBadge);\n} }\nfunction MapDetailsToolComponent_ng_template_2_mat_list_0_p_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\", 9);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, \"igo.integration.mapTool.customize\"), \"\");\n} }\nfunction MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_5_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\");\n    ɵɵelementStart(1, \"mat-icon\", 11);\n    ɵɵnamespaceSVG();\n    ɵɵelementStart(2, \"svg\", 12);\n    ɵɵelement(3, \"path\", 13);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵnamespaceHTML();\n    ɵɵelementStart(4, \"h4\", 14);\n    ɵɵlistener(\"click\", function MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_5_Template_h4_click_4_listener() { ɵɵrestoreView(_r14); const ctx_r13 = ɵɵnextContext(3); return ctx_r13.searchEmit(); });\n    ɵɵtext(5);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(5);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.search-tool\"), \" \");\n} }\nfunction MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_6_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\");\n    ɵɵelementStart(1, \"mat-icon\", 11);\n    ɵɵnamespaceSVG();\n    ɵɵelementStart(2, \"svg\", 12);\n    ɵɵelement(3, \"path\", 15);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵnamespaceHTML();\n    ɵɵelementStart(4, \"h4\", 16);\n    ɵɵlistener(\"click\", function MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_6_Template_h4_click_4_listener() { ɵɵrestoreView(_r16); const ctx_r15 = ɵɵnextContext(3); return ctx_r15.catalogEmit(); });\n    ɵɵtext(5);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(5);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.catalog-tool\"), \" \");\n} }\nfunction MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_7_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\");\n    ɵɵelementStart(1, \"mat-icon\", 11);\n    ɵɵnamespaceSVG();\n    ɵɵelementStart(2, \"svg\", 12);\n    ɵɵelement(3, \"path\", 17);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵnamespaceHTML();\n    ɵɵelementStart(4, \"h4\", 18);\n    ɵɵlistener(\"click\", function MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_7_Template_h4_click_4_listener() { ɵɵrestoreView(_r18); const ctx_r17 = ɵɵnextContext(3); return ctx_r17.contextEmit(); });\n    ɵɵtext(5);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(5);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.context-tool\"), \" \");\n} }\nfunction MapDetailsToolComponent_ng_template_2_mat_list_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-list\");\n    ɵɵelementStart(1, \"p\", 9);\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵtemplate(4, MapDetailsToolComponent_ng_template_2_mat_list_0_p_4_Template, 3, 3, \"p\", 10);\n    ɵɵtemplate(5, MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_5_Template, 7, 3, \"mat-list-item\", 8);\n    ɵɵtemplate(6, MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_6_Template, 7, 3, \"mat-list-item\", 8);\n    ɵɵtemplate(7, MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_7_Template, 7, 3, \"mat-list-item\", 8);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r8 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(3, 5, \"igo.integration.mapTool.empty\"), \"\");\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && (ctx_r8.searchToolInToolbar || ctx_r8.catalogToolInToolbar || ctx_r8.contextToolInToolbar));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && ctx_r8.searchToolInToolbar);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && ctx_r8.catalogToolInToolbar);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && ctx_r8.contextToolInToolbar);\n} }\nfunction MapDetailsToolComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, MapDetailsToolComponent_ng_template_2_mat_list_0_Template, 8, 7, \"mat-list\", 8);\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵproperty(\"ngIf\", ctx_r2.delayedShowEmptyMapContent);\n} }\nlet MapDetailsToolComponent = class MapDetailsToolComponent {\n    constructor(mapState, toolState, searchSourceService, cdRef, importExportState) {\n        this.mapState = mapState;\n        this.toolState = toolState;\n        this.searchSourceService = searchSourceService;\n        this.cdRef = cdRef;\n        this.importExportState = importExportState;\n        this.delayedShowEmptyMapContent = false;\n        this.toggleLegendOnVisibilityChange = false;\n        this.expandLegendOfVisibleLayers = false;\n        this.updateLegendOnResolutionChange = false;\n        this.ogcButton = true;\n        this.timeButton = true;\n        this.layerListControls = {};\n        this.queryBadge = false;\n        this.layerAdditionAllowed = true;\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    get layers$() {\n        return this.map.layers$.pipe(map((layers) => layers.filter((layer) => layer.showInLayerList !== false &&\n            (!this.excludeBaseLayers || !layer.baseLayer))));\n    }\n    get excludeBaseLayers() {\n        return this.layerListControls.excludeBaseLayers || false;\n    }\n    get layerFilterAndSortOptions() {\n        const filterSortOptions = Object.assign({\n            showToolbar: LayerListControlsEnum.default\n        }, this.layerListControls);\n        switch (this.layerListControls.showToolbar) {\n            case LayerListControlsEnum.always:\n                filterSortOptions.showToolbar = LayerListControlsEnum.always;\n                break;\n            case LayerListControlsEnum.never:\n                filterSortOptions.showToolbar = LayerListControlsEnum.never;\n                break;\n            default:\n                break;\n        }\n        return filterSortOptions;\n    }\n    get searchToolInToolbar() {\n        return (this.toolState.toolbox.getToolbar().indexOf('searchResults') !== -1 &&\n            this.searchSourceService\n                .getSources()\n                .filter(sourceCanSearch)\n                .filter((s) => s.available && s.getType() === 'Layer').length > 0);\n    }\n    get catalogToolInToolbar() {\n        return this.toolState.toolbox.getToolbar().indexOf('catalog') !== -1;\n    }\n    get contextToolInToolbar() {\n        return this.toolState.toolbox.getToolbar().indexOf('contextManager') !== -1;\n    }\n    ngOnInit() {\n        // prevent message to be shown too quickly. Waiting for layers\n        setTimeout(() => {\n            this.delayedShowEmptyMapContent = true;\n            this.cdRef.detectChanges();\n        }, 250);\n    }\n    searchEmit() {\n        this.toolState.toolbox.activateTool('searchResults');\n    }\n    catalogEmit() {\n        this.toolState.toolbox.activateTool('catalog');\n    }\n    contextEmit() {\n        this.toolState.toolbox.activateTool('contextManager');\n    }\n    activateExport(layer) {\n        var _a;\n        let id = layer.id;\n        if ((_a = layer.options.workspace) === null || _a === void 0 ? void 0 : _a.workspaceId) {\n            id = layer.options.workspace.workspaceId !== layer.id ? layer.options.workspace.workspaceId : layer.id;\n        }\n        this.importExportState.setsExportOptions({ layers: [id] });\n        this.importExportState.setMode(ImportExportMode.export);\n        this.toolState.toolbox.activateTool('importExport');\n    }\n};\nMapDetailsToolComponent.ɵfac = function MapDetailsToolComponent_Factory(t) { return new (t || MapDetailsToolComponent)(ɵɵdirectiveInject(MapState), ɵɵdirectiveInject(ToolState), ɵɵdirectiveInject(SearchSourceService), ɵɵdirectiveInject(ChangeDetectorRef), ɵɵdirectiveInject(ImportExportState)); };\nMapDetailsToolComponent.ɵcmp = ɵɵdefineComponent({ type: MapDetailsToolComponent, selectors: [[\"igo-map-details-tool\"]], inputs: { toggleLegendOnVisibilityChange: \"toggleLegendOnVisibilityChange\", expandLegendOfVisibleLayers: \"expandLegendOfVisibleLayers\", updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", ogcButton: \"ogcButton\", timeButton: \"timeButton\", layerListControls: \"layerListControls\", queryBadge: \"queryBadge\", layerAdditionAllowed: \"layerAdditionAllowed\" }, decls: 4, vars: 4, consts: [[\"class\", \"mapDetailsList\", \"igoLayerListBinding\", \"\", \"floatLabel\", \"never\", 3, \"map\", \"excludeBaseLayers\", \"layerFilterAndSortOptions\", \"expandLegendOfVisibleLayers\", \"toggleLegendOnVisibilityChange\", \"updateLegendOnResolutionChange\", \"queryBadge\", 4, \"ngIf\", \"ngIfElse\"], [\"empty\", \"\"], [\"igoLayerListBinding\", \"\", \"floatLabel\", \"never\", 1, \"mapDetailsList\", 3, \"map\", \"excludeBaseLayers\", \"layerFilterAndSortOptions\", \"expandLegendOfVisibleLayers\", \"toggleLegendOnVisibilityChange\", \"updateLegendOnResolutionChange\", \"queryBadge\"], [\"igoLayerItemToolbar\", \"\"], [3, \"layer\"], [3, \"layer\", \"click\"], [3, \"header\", \"layer\"], [3, \"trackFeature\", \"layer\"], [4, \"ngIf\"], [1, \"map-empty\", \"mat-typography\"], [\"class\", \"map-empty mat-typography\", 4, \"ngIf\"], [\"mat-list-icon\", \"\"], [\"viewBox\", \"0 0 24 24\", \"fit\", \"\", \"height\", \"100%\", \"width\", \"100%\", \"preserveAspectRatio\", \"xMidYMid meet\", \"focusable\", \"false\"], [\"d\", \"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z\"], [\"matLine\", \"\", 1, \"search-tool\", \"mat-typography\", 3, \"click\"], [\"d\", \"M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z\"], [\"matLine\", \"\", 1, \"catalog-tool\", \"mat-typography\", 3, \"click\"], [\"d\", \"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z\"], [\"matLine\", \"\", 1, \"context-tool\", \"mat-typography\", 3, \"click\"]], template: function MapDetailsToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, MapDetailsToolComponent_igo_layer_list_0_Template, 3, 7, \"igo-layer-list\", 0);\n        ɵɵpipe(1, \"async\");\n        ɵɵtemplate(2, MapDetailsToolComponent_ng_template_2_Template, 1, 1, \"ng-template\", null, 1, ɵɵtemplateRefExtractor);\n    } if (rf & 2) {\n        const _r1 = ɵɵreference(3);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(1, 2, ctx.layers$).length)(\"ngIfElse\", _r1);\n    } }, directives: [NgIf, LayerListComponent, LayerListBindingDirective, WorkspaceButtonComponent, ExportButtonComponent, OgcFilterButtonComponent, TimeFilterButtonComponent, TrackFeatureButtonComponent, MetadataButtonComponent, MatList, MatListItem, MatIcon, MatListIconCssMatStyler, MatLine], pipes: [AsyncPipe, TranslatePipe], styles: [\".catalog-tool[_ngcontent-%COMP%], .context-tool[_ngcontent-%COMP%], .map-empty[_ngcontent-%COMP%], .search-tool[_ngcontent-%COMP%]{margin:10px}.map-empty[_ngcontent-%COMP%]{text-align:justify}.catalog-tool[_ngcontent-%COMP%], .context-tool[_ngcontent-%COMP%], .search-tool[_ngcontent-%COMP%]{cursor:pointer}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700}mat-list-item[_ngcontent-%COMP%]     .mat-list-text{font-size:smaller}mat-list.mat-list-base[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]     div.mat-list-item-content div.mat-list-text{padding-left:5px}.mapDetailsList[_ngcontent-%COMP%]{overflow:hidden}\"] });\nMapDetailsToolComponent = __decorate([\n    ToolComponent({\n        name: 'mapDetails',\n        title: 'igo.integration.tools.map',\n        icon: 'map'\n    }),\n    __metadata(\"design:paramtypes\", [MapState,\n        ToolState,\n        SearchSourceService,\n        ChangeDetectorRef,\n        ImportExportState])\n], MapDetailsToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MapDetailsToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-map-details-tool',\n                templateUrl: './map-details-tool.component.html',\n                styleUrls: ['./map-details-tool.component.scss']\n            }]\n    }], function () { return [{ type: MapState }, { type: ToolState }, { type: SearchSourceService }, { type: ChangeDetectorRef }, { type: ImportExportState }]; }, { toggleLegendOnVisibilityChange: [{\n            type: Input\n        }], expandLegendOfVisibleLayers: [{\n            type: Input\n        }], updateLegendOnResolutionChange: [{\n            type: Input\n        }], ogcButton: [{\n            type: Input\n        }], timeButton: [{\n            type: Input\n        }], layerListControls: [{\n            type: Input\n        }], queryBadge: [{\n            type: Input\n        }], layerAdditionAllowed: [{\n            type: Input\n        }] }); })();\n\nfunction MapToolComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵɵgetCurrentView();\n    ɵɵelement(0, \"igo-workspace-button\", 4);\n    ɵɵelementStart(1, \"igo-export-button\", 5);\n    ɵɵlistener(\"click\", function MapToolComponent_ng_template_4_Template_igo_export_button_click_1_listener() { ɵɵrestoreView(_r4); const layer_r2 = ctx.layer; const ctx_r3 = ɵɵnextContext(); return ctx_r3.activateExport(layer_r2); });\n    ɵɵelementEnd();\n    ɵɵelement(2, \"igo-ogc-filter-button\", 6);\n    ɵɵelement(3, \"igo-time-filter-button\", 6);\n    ɵɵelement(4, \"igo-track-feature-button\", 7);\n    ɵɵelement(5, \"igo-metadata-button\", 4);\n} if (rf & 2) {\n    const layer_r2 = ctx.layer;\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"layer\", layer_r2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"layer\", layer_r2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"header\", ctx_r1.ogcButton)(\"layer\", layer_r2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"header\", ctx_r1.timeButton)(\"layer\", layer_r2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"trackFeature\", true)(\"layer\", layer_r2);\n    ɵɵadvance(1);\n    ɵɵproperty(\"layer\", layer_r2);\n} }\n/**\n * Tool to browse a map's layers or to choose a different map\n */\nlet MapToolComponent = class MapToolComponent {\n    constructor(mapState, toolState, importExportState) {\n        this.mapState = mapState;\n        this.toolState = toolState;\n        this.importExportState = importExportState;\n        this.toggleLegendOnVisibilityChange = false;\n        this.expandLegendOfVisibleLayers = false;\n        this.updateLegendOnResolutionChange = false;\n        this.ogcButton = true;\n        this.timeButton = true;\n        this.layerListControls = {};\n        this.queryBadge = false;\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    get excludeBaseLayers() {\n        return this.layerListControls.excludeBaseLayers || false;\n    }\n    get layerFilterAndSortOptions() {\n        const filterSortOptions = Object.assign({\n            showToolbar: LayerListControlsEnum.default\n        }, this.layerListControls);\n        switch (this.layerListControls.showToolbar) {\n            case LayerListControlsEnum.always:\n                filterSortOptions.showToolbar = LayerListControlsEnum.always;\n                break;\n            case LayerListControlsEnum.never:\n                filterSortOptions.showToolbar = LayerListControlsEnum.never;\n                break;\n            default:\n                break;\n        }\n        return filterSortOptions;\n    }\n    activateExport(layer) {\n        var _a;\n        let id = layer.id;\n        if ((_a = layer.options.workspace) === null || _a === void 0 ? void 0 : _a.workspaceId) {\n            id = layer.options.workspace.workspaceId !== layer.id ? layer.options.workspace.workspaceId : layer.id;\n        }\n        this.importExportState.setsExportOptions({ layers: [id] });\n        this.importExportState.setMode(ImportExportMode.export);\n        this.toolState.toolbox.activateTool('importExport');\n    }\n};\nMapToolComponent.ɵfac = function MapToolComponent_Factory(t) { return new (t || MapToolComponent)(ɵɵdirectiveInject(MapState), ɵɵdirectiveInject(ToolState), ɵɵdirectiveInject(ImportExportState)); };\nMapToolComponent.ɵcmp = ɵɵdefineComponent({ type: MapToolComponent, selectors: [[\"igo-map-tool\"]], inputs: { toggleLegendOnVisibilityChange: \"toggleLegendOnVisibilityChange\", expandLegendOfVisibleLayers: \"expandLegendOfVisibleLayers\", updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", ogcButton: \"ogcButton\", timeButton: \"timeButton\", layerListControls: \"layerListControls\", queryBadge: \"queryBadge\" }, decls: 9, vars: 14, consts: [[3, \"label\"], [\"igoLayerListBinding\", \"\", 3, \"map\", \"excludeBaseLayers\", \"layerFilterAndSortOptions\", \"expandLegendOfVisibleLayers\", \"toggleLegendOnVisibilityChange\", \"updateLegendOnResolutionChange\", \"floatLabel\", \"queryBadge\"], [\"igoLayerItemToolbar\", \"\"], [\"igoContextListBinding\", \"\"], [3, \"layer\"], [3, \"layer\", \"click\"], [3, \"header\", \"layer\"], [3, \"trackFeature\", \"layer\"]], template: function MapToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-tab-group\");\n        ɵɵelementStart(1, \"mat-tab\", 0);\n        ɵɵpipe(2, \"translate\");\n        ɵɵelementStart(3, \"igo-layer-list\", 1);\n        ɵɵtemplate(4, MapToolComponent_ng_template_4_Template, 6, 9, \"ng-template\", null, 2, ɵɵtemplateRefExtractor);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(6, \"mat-tab\", 0);\n        ɵɵpipe(7, \"translate\");\n        ɵɵelement(8, \"igo-context-list\", 3);\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"label\", ɵɵpipeBind1(2, 10, \"igo.integration.tools.map\"));\n        ɵɵadvance(2);\n        ɵɵproperty(\"map\", ctx.map)(\"excludeBaseLayers\", ctx.excludeBaseLayers)(\"layerFilterAndSortOptions\", ctx.layerFilterAndSortOptions)(\"expandLegendOfVisibleLayers\", ctx.expandLegendOfVisibleLayers)(\"toggleLegendOnVisibilityChange\", ctx.toggleLegendOnVisibilityChange)(\"updateLegendOnResolutionChange\", ctx.updateLegendOnResolutionChange)(\"floatLabel\", false)(\"queryBadge\", ctx.queryBadge);\n        ɵɵadvance(3);\n        ɵɵproperty(\"label\", ɵɵpipeBind1(7, 12, \"igo.integration.tools.contexts\"));\n    } }, directives: [MatTabGroup, MatTab, LayerListComponent, LayerListBindingDirective, ContextListComponent, ContextListBindingDirective, WorkspaceButtonComponent, ExportButtonComponent, OgcFilterButtonComponent, TimeFilterButtonComponent, TrackFeatureButtonComponent, MetadataButtonComponent], pipes: [TranslatePipe], styles: [\"mat-tab-group[_ngcontent-%COMP%], mat-tab-group[_ngcontent-%COMP%]     .mat-tab-body-wrapper{height:100%;overflow:hidden}[_nghost-%COMP%]     .mat-tab-body-content{overflow:hidden}\"], changeDetection: 0 });\nMapToolComponent = __decorate([\n    ToolComponent({\n        name: 'map',\n        title: 'igo.integration.tools.map',\n        icon: 'map'\n    }),\n    __metadata(\"design:paramtypes\", [MapState,\n        ToolState,\n        ImportExportState])\n], MapToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MapToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-map-tool',\n                templateUrl: './map-tool.component.html',\n                styleUrls: ['./map-tool.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: MapState }, { type: ToolState }, { type: ImportExportState }]; }, { toggleLegendOnVisibilityChange: [{\n            type: Input\n        }], expandLegendOfVisibleLayers: [{\n            type: Input\n        }], updateLegendOnResolutionChange: [{\n            type: Input\n        }], ogcButton: [{\n            type: Input\n        }], timeButton: [{\n            type: Input\n        }], layerListControls: [{\n            type: Input\n        }], queryBadge: [{\n            type: Input\n        }] }); })();\n\nconst _c0 = [\"tabGroup\"];\nfunction MapToolsComponent_igo_layer_list_5_ng_template_1_igo_time_filter_button_2_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-time-filter-button\", 14);\n    ɵɵlistener(\"click\", function MapToolsComponent_igo_layer_list_5_ng_template_1_igo_time_filter_button_2_Template_igo_time_filter_button_click_0_listener() { ɵɵrestoreView(_r14); const ctx_r13 = ɵɵnextContext(3); return ctx_r13.activateTimeFilter(); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const layer_r9 = ɵɵnextContext().layer;\n    const ctx_r10 = ɵɵnextContext(2);\n    ɵɵproperty(\"header\", ctx_r10.timeButton)(\"layer\", layer_r9);\n} }\nfunction MapToolsComponent_igo_layer_list_5_ng_template_1_igo_ogc_filter_button_3_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-ogc-filter-button\", 14);\n    ɵɵlistener(\"click\", function MapToolsComponent_igo_layer_list_5_ng_template_1_igo_ogc_filter_button_3_Template_igo_ogc_filter_button_click_0_listener() { ɵɵrestoreView(_r17); const ctx_r16 = ɵɵnextContext(3); return ctx_r16.activateOgcFilter(); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const layer_r9 = ɵɵnextContext().layer;\n    const ctx_r11 = ɵɵnextContext(2);\n    ɵɵproperty(\"header\", ctx_r11.ogcButton)(\"layer\", layer_r9);\n} }\nfunction MapToolsComponent_igo_layer_list_5_ng_template_1_igo_export_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r21 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-export-button\", 15);\n    ɵɵlistener(\"click\", function MapToolsComponent_igo_layer_list_5_ng_template_1_igo_export_button_4_Template_igo_export_button_click_0_listener() { ɵɵrestoreView(_r21); const layer_r9 = ɵɵnextContext().layer; const ctx_r19 = ɵɵnextContext(2); return ctx_r19.activateExport(layer_r9); });\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const layer_r9 = ɵɵnextContext().layer;\n    ɵɵproperty(\"layer\", layer_r9);\n} }\nfunction MapToolsComponent_igo_layer_list_5_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-metadata-button\", 10);\n    ɵɵelement(1, \"igo-track-feature-button\", 11);\n    ɵɵtemplate(2, MapToolsComponent_igo_layer_list_5_ng_template_1_igo_time_filter_button_2_Template, 1, 2, \"igo-time-filter-button\", 12);\n    ɵɵtemplate(3, MapToolsComponent_igo_layer_list_5_ng_template_1_igo_ogc_filter_button_3_Template, 1, 2, \"igo-ogc-filter-button\", 12);\n    ɵɵtemplate(4, MapToolsComponent_igo_layer_list_5_ng_template_1_igo_export_button_4_Template, 1, 1, \"igo-export-button\", 13);\n    ɵɵelement(5, \"igo-workspace-button\", 10);\n} if (rf & 2) {\n    const layer_r9 = ctx.layer;\n    const ctx_r8 = ɵɵnextContext(2);\n    ɵɵproperty(\"layer\", layer_r9);\n    ɵɵadvance(1);\n    ɵɵproperty(\"trackFeature\", true)(\"layer\", layer_r9);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r8.isTimeFilterButton(layer_r9));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r8.isOGCFilterButton(layer_r9));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r8.isExportButton(layer_r9));\n    ɵɵadvance(1);\n    ɵɵproperty(\"layer\", layer_r9);\n} }\nfunction MapToolsComponent_igo_layer_list_5_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-layer-list\", 8);\n    ɵɵlistener(\"appliedFilterAndSort\", function MapToolsComponent_igo_layer_list_5_Template_igo_layer_list_appliedFilterAndSort_0_listener($event) { ɵɵrestoreView(_r24); const ctx_r23 = ɵɵnextContext(); return ctx_r23.onLayerListChange($event); });\n    ɵɵtemplate(1, MapToolsComponent_igo_layer_list_5_ng_template_1_Template, 6, 7, \"ng-template\", null, 9, ɵɵtemplateRefExtractor);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"excludeBaseLayers\", ctx_r1.excludeBaseLayers)(\"layerFilterAndSortOptions\", ctx_r1.layerFilterAndSortOptions)(\"expandLegendOfVisibleLayers\", ctx_r1.expandLegendOfVisibleLayers)(\"toggleLegendOnVisibilityChange\", ctx_r1.toggleLegendOnVisibilityChange)(\"updateLegendOnResolutionChange\", ctx_r1.updateLegendOnResolutionChange)(\"floatLabel\", false)(\"queryBadge\", ctx_r1.queryBadge)(\"map\", ctx_r1.map);\n} }\nfunction MapToolsComponent_igo_layer_legend_list_9_Template(rf, ctx) { if (rf & 1) {\n    const _r26 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-layer-legend-list\", 16);\n    ɵɵlistener(\"allLegendsShown\", function MapToolsComponent_igo_layer_legend_list_9_Template_igo_layer_legend_list_allLegendsShown_0_listener($event) { ɵɵrestoreView(_r26); const ctx_r25 = ɵɵnextContext(); return ctx_r25.onShowAllLegends($event); });\n    ɵɵpipe(1, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵproperty(\"allowShowAllLegends\", ctx_r2.allowShowAllLegends)(\"showAllLegendsValue\", ɵɵpipeBind1(1, 4, ctx_r2.showAllLegendsValue$))(\"excludeBaseLayers\", ctx_r2.excludeBaseLayers)(\"updateLegendOnResolutionChange\", ctx_r2.updateLegendOnResolutionChange);\n} }\nfunction MapToolsComponent_10_ng_template_0_Template(rf, ctx) { }\nfunction MapToolsComponent_10_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, MapToolsComponent_10_ng_template_0_Template, 0, 0, \"ng-template\");\n} }\nfunction MapToolsComponent_p_12_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\", 17);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"async\");\n    ɵɵpipe(3, \"translate\");\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, ctx_r4.visibleLayers$).length ? ɵɵpipeBind1(3, 3, \"igo.integration.mapTool.noLayersInRange\") : ɵɵpipeBind1(4, 5, \"igo.integration.mapTool.noLayersVisible\"), \" \");\n} }\nfunction MapToolsComponent_ng_template_15_mat_list_0_p_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\", 17);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, \"igo.integration.mapTool.customize\"), \"\");\n} }\nfunction MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_5_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\");\n    ɵɵelementStart(1, \"mat-icon\", 19);\n    ɵɵnamespaceSVG();\n    ɵɵelementStart(2, \"svg\", 20);\n    ɵɵelement(3, \"path\", 21);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵnamespaceHTML();\n    ɵɵelementStart(4, \"h4\", 22);\n    ɵɵlistener(\"click\", function MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_5_Template_h4_click_4_listener() { ɵɵrestoreView(_r34); const ctx_r33 = ɵɵnextContext(3); return ctx_r33.searchEmit(); });\n    ɵɵtext(5);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(5);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.search-tool\"), \" \");\n} }\nfunction MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_6_Template(rf, ctx) { if (rf & 1) {\n    const _r36 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\");\n    ɵɵelementStart(1, \"mat-icon\", 19);\n    ɵɵnamespaceSVG();\n    ɵɵelementStart(2, \"svg\", 20);\n    ɵɵelement(3, \"path\", 23);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵnamespaceHTML();\n    ɵɵelementStart(4, \"h4\", 24);\n    ɵɵlistener(\"click\", function MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_6_Template_h4_click_4_listener() { ɵɵrestoreView(_r36); const ctx_r35 = ɵɵnextContext(3); return ctx_r35.catalogEmit(); });\n    ɵɵtext(5);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(5);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.catalog-tool\"), \" \");\n} }\nfunction MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_7_Template(rf, ctx) { if (rf & 1) {\n    const _r38 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\");\n    ɵɵelementStart(1, \"mat-icon\", 19);\n    ɵɵnamespaceSVG();\n    ɵɵelementStart(2, \"svg\", 20);\n    ɵɵelement(3, \"path\", 25);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵnamespaceHTML();\n    ɵɵelementStart(4, \"h4\", 26);\n    ɵɵlistener(\"click\", function MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_7_Template_h4_click_4_listener() { ɵɵrestoreView(_r38); const ctx_r37 = ɵɵnextContext(3); return ctx_r37.contextEmit(); });\n    ɵɵtext(5);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(5);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.context-tool\"), \" \");\n} }\nfunction MapToolsComponent_ng_template_15_mat_list_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-list\");\n    ɵɵelementStart(1, \"p\", 17);\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵtemplate(4, MapToolsComponent_ng_template_15_mat_list_0_p_4_Template, 3, 3, \"p\", 6);\n    ɵɵtemplate(5, MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_5_Template, 7, 3, \"mat-list-item\", 18);\n    ɵɵtemplate(6, MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_6_Template, 7, 3, \"mat-list-item\", 18);\n    ɵɵtemplate(7, MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_7_Template, 7, 3, \"mat-list-item\", 18);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r28 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(3, 5, \"igo.integration.mapTool.empty\"), \"\");\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r28.layerAdditionAllowed && (ctx_r28.searchToolInToolbar || ctx_r28.catalogToolInToolbar || ctx_r28.contextToolInToolbar));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r28.layerAdditionAllowed && ctx_r28.searchToolInToolbar);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r28.layerAdditionAllowed && ctx_r28.catalogToolInToolbar);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r28.layerAdditionAllowed && ctx_r28.contextToolInToolbar);\n} }\nfunction MapToolsComponent_ng_template_15_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, MapToolsComponent_ng_template_15_mat_list_0_Template, 8, 7, \"mat-list\", 18);\n} if (rf & 2) {\n    const ctx_r6 = ɵɵnextContext();\n    ɵɵproperty(\"ngIf\", ctx_r6.delayedShowEmptyMapContent);\n} }\n/**\n * Tool to browse a map's layers or to choose a different map\n */\nlet MapToolsComponent = class MapToolsComponent {\n    constructor(layerListToolState, toolState, mapState, searchSourceService, importExportState) {\n        this.layerListToolState = layerListToolState;\n        this.toolState = toolState;\n        this.mapState = mapState;\n        this.searchSourceService = searchSourceService;\n        this.importExportState = importExportState;\n        this.layers$ = new BehaviorSubject([]);\n        this.showAllLegendsValue$ = new BehaviorSubject(false);\n        this.delayedShowEmptyMapContent = false;\n        this.allowShowAllLegends = false;\n        this.showAllLegendsValue = false;\n        this.toggleLegendOnVisibilityChange = false;\n        this.expandLegendOfVisibleLayers = false;\n        this.updateLegendOnResolutionChange = false;\n        this.ogcButton = true;\n        this.timeButton = true;\n        this.layerAdditionAllowed = true;\n        this._layerListControls = {};\n        this.queryBadge = false;\n    }\n    get layerListControls() {\n        return this._layerListControls;\n    }\n    set layerListControls(value) {\n        const stateOptions = this.layerListToolState.getLayerListControls();\n        const stateKeyword = stateOptions.keyword;\n        const stateOnlyVisible = stateOptions.onlyVisible;\n        const stateSortAlpha = stateOptions.sortAlpha;\n        value.keyword = stateKeyword !== '' ? stateKeyword : value.keyword;\n        value.onlyVisible =\n            stateOnlyVisible !== undefined ? stateOnlyVisible : value.onlyVisible;\n        value.sortAlpha =\n            stateSortAlpha !== undefined ? stateSortAlpha : value.sortAlpha;\n        value.onlyVisible =\n            value.onlyVisible === undefined ? false : value.onlyVisible;\n        value.sortAlpha = value.sortAlpha === undefined ? false : value.sortAlpha;\n        this._layerListControls = value;\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    get visibleOrInRangeLayers$() {\n        return this.layers$.pipe(map((layers) => layers.filter((layer) => layer.visible$.value && layer.isInResolutionsRange$.value)));\n    }\n    get visibleLayers$() {\n        return this.layers$.pipe(map((layers) => layers.filter((layer) => layer.visible$.value)));\n    }\n    get excludeBaseLayers() {\n        return this.layerListControls.excludeBaseLayers || false;\n    }\n    get layerFilterAndSortOptions() {\n        const filterSortOptions = Object.assign({\n            showToolbar: LayerListControlsEnum.default\n        }, this.layerListControls);\n        switch (this.layerListControls.showToolbar) {\n            case LayerListControlsEnum.always:\n                filterSortOptions.showToolbar = LayerListControlsEnum.always;\n                break;\n            case LayerListControlsEnum.never:\n                filterSortOptions.showToolbar = LayerListControlsEnum.never;\n                break;\n            default:\n                break;\n        }\n        return filterSortOptions;\n    }\n    get searchToolInToolbar() {\n        return (this.toolState.toolbox.getToolbar().indexOf('searchResults') !== -1 &&\n            this.searchSourceService\n                .getSources()\n                .filter(sourceCanSearch)\n                .filter((s) => s.available && s.getType() === 'Layer').length > 0);\n    }\n    get catalogToolInToolbar() {\n        return this.toolState.toolbox.getToolbar().indexOf('catalog') !== -1;\n    }\n    get contextToolInToolbar() {\n        return this.toolState.toolbox.getToolbar().indexOf('contextManager') !== -1;\n    }\n    ngOnInit() {\n        this.selectedTab();\n        this.resolution$$ = combineLatest([\n            this.map.layers$,\n            this.map.viewController.resolution$\n        ])\n            .pipe(debounceTime(10))\n            .subscribe((bunch) => {\n            this.layers$.next(bunch[0].filter((layer) => layer.showInLayerList !== false &&\n                (!this.excludeBaseLayers || !layer.baseLayer)));\n        });\n        if (this.allowShowAllLegends) {\n            this.mapState.showAllLegendsValue =\n                this.mapState.showAllLegendsValue !== undefined\n                    ? this.mapState.showAllLegendsValue\n                    : this.showAllLegendsValue || false;\n            this.showAllLegendsValue$.next(this.mapState.showAllLegendsValue);\n        }\n        else {\n            this.showAllLegendsValue$.next(false);\n        }\n        // prevent message to be shown too quickly. Waiting for layers\n        setTimeout(() => (this.delayedShowEmptyMapContent = true), 250);\n    }\n    ngOnDestroy() {\n        this.resolution$$.unsubscribe();\n        if (this.visibleOrInRangeLayers$$) {\n            this.visibleOrInRangeLayers$$.unsubscribe();\n        }\n    }\n    onShowAllLegends(event) {\n        this.mapState.showAllLegendsValue = event;\n        this.showAllLegendsValue$.next(event);\n    }\n    selectedTab() {\n        const userSelectedTab = this.layerListToolState.selectedTab$.value;\n        if (userSelectedTab !== undefined) {\n            this.layerListToolState.setSelectedTab(userSelectedTab);\n        }\n        else {\n            if (this.selectedTabAtOpening === 'legend') {\n                this.layerListToolState.setSelectedTab(1);\n            }\n            else {\n                this.layerListToolState.setSelectedTab(0);\n            }\n        }\n    }\n    tabChanged(tab) {\n        this.layerListToolState.setSelectedTab(tab.index);\n        this.layers$.next(this.map.layers.filter((layer) => layer.showInLayerList !== false &&\n            (!this.excludeBaseLayers || !layer.baseLayer)));\n    }\n    onLayerListChange(appliedFilters) {\n        this.layerListToolState.setKeyword(appliedFilters.keyword);\n        this.layerListToolState.setSortAlpha(appliedFilters.sortAlpha);\n        this.layerListToolState.setOnlyVisible(appliedFilters.onlyVisible);\n    }\n    showAllLegend() {\n        if (this.layers$.getValue().length === 0) {\n            return false;\n        }\n        else if (this.layers$.getValue().length !== 0 &&\n            this.allowShowAllLegends === false) {\n            let visibleOrInRangeLayers;\n            this.visibleOrInRangeLayers$$ = this.visibleOrInRangeLayers$.subscribe((value) => {\n                value.length === 0\n                    ? (visibleOrInRangeLayers = false)\n                    : (visibleOrInRangeLayers = true);\n            });\n            if (visibleOrInRangeLayers === false) {\n                return false;\n            }\n        }\n        return true;\n    }\n    activateExport(layer) {\n        var _a;\n        let id = layer.id;\n        if ((_a = layer.options.workspace) === null || _a === void 0 ? void 0 : _a.workspaceId) {\n            id = layer.options.workspace.workspaceId !== layer.id ? layer.options.workspace.workspaceId : layer.id;\n        }\n        this.importExportState.setsExportOptions({ layers: [id] });\n        this.importExportState.setMode(ImportExportMode.export);\n        this.toolState.toolbox.activateTool('importExport');\n    }\n    activateTimeFilter() {\n        this.toolState.toolbox.activateTool('activeTimeFilter');\n    }\n    activateOgcFilter() {\n        this.toolState.toolbox.activateTool('activeOgcFilter');\n    }\n    searchEmit() {\n        this.toolState.toolbox.activateTool('searchResults');\n    }\n    catalogEmit() {\n        this.toolState.toolbox.activateTool('catalog');\n    }\n    contextEmit() {\n        this.toolState.toolbox.activateTool('contextManager');\n    }\n    isTimeFilterButton(layer) {\n        const options = layer.dataSource.options;\n        return this.timeButton && options.timeFilterable && options.timeFilter;\n    }\n    isOGCFilterButton(layer) {\n        const options = layer.dataSource.options;\n        return this.ogcButton && options.ogcFilters && options.ogcFilters.enabled &&\n            (options.ogcFilters.pushButtons || options.ogcFilters.checkboxes || options.ogcFilters.radioButtons\n                || options.ogcFilters.select || options.ogcFilters.editable);\n    }\n    isExportButton(layer) {\n        var _a, _b;\n        if ((layer instanceof VectorLayer && layer.exportable === true) ||\n            (layer.dataSource.options.download && layer.dataSource.options.download.url) ||\n            (((_a = layer.options.workspace) === null || _a === void 0 ? void 0 : _a.enabled) && ((_b = layer.options.workspace) === null || _b === void 0 ? void 0 : _b.workspaceId) !== layer.id)) {\n            return true;\n        }\n        return false;\n    }\n};\nMapToolsComponent.ɵfac = function MapToolsComponent_Factory(t) { return new (t || MapToolsComponent)(ɵɵdirectiveInject(LayerListToolState), ɵɵdirectiveInject(ToolState), ɵɵdirectiveInject(MapState), ɵɵdirectiveInject(SearchSourceService), ɵɵdirectiveInject(ImportExportState)); };\nMapToolsComponent.ɵcmp = ɵɵdefineComponent({ type: MapToolsComponent, selectors: [[\"igo-map-tools\"]], viewQuery: function MapToolsComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵɵstaticViewQuery(_c0, true);\n    } if (rf & 2) {\n        var _t;\n        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.tabGroup = _t.first);\n    } }, inputs: { allowShowAllLegends: \"allowShowAllLegends\", showAllLegendsValue: \"showAllLegendsValue\", toggleLegendOnVisibilityChange: \"toggleLegendOnVisibilityChange\", expandLegendOfVisibleLayers: \"expandLegendOfVisibleLayers\", updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", selectedTabAtOpening: \"selectedTabAtOpening\", ogcButton: \"ogcButton\", timeButton: \"timeButton\", layerAdditionAllowed: \"layerAdditionAllowed\", layerListControls: \"layerListControls\", queryBadge: \"queryBadge\" }, decls: 17, vars: 23, consts: [[3, \"selectedIndex\", \"selectedTabChange\"], [\"tabGroup\", \"\"], [3, \"label\"], [\"igoLayerListBinding\", \"\", 3, \"excludeBaseLayers\", \"layerFilterAndSortOptions\", \"expandLegendOfVisibleLayers\", \"toggleLegendOnVisibilityChange\", \"updateLegendOnResolutionChange\", \"floatLabel\", \"queryBadge\", \"map\", \"appliedFilterAndSort\", 4, \"ngIf\", \"ngIfElse\"], [\"igoLayerLegendListBinding\", \"\", 3, \"allowShowAllLegends\", \"showAllLegendsValue\", \"excludeBaseLayers\", \"updateLegendOnResolutionChange\", \"allLegendsShown\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"class\", \"map-empty mat-typography\", 4, \"ngIf\"], [\"emptyLayers\", \"\"], [\"igoLayerListBinding\", \"\", 3, \"excludeBaseLayers\", \"layerFilterAndSortOptions\", \"expandLegendOfVisibleLayers\", \"toggleLegendOnVisibilityChange\", \"updateLegendOnResolutionChange\", \"floatLabel\", \"queryBadge\", \"map\", \"appliedFilterAndSort\"], [\"igoLayerItemToolbar\", \"\"], [3, \"layer\"], [3, \"trackFeature\", \"layer\"], [3, \"header\", \"layer\", \"click\", 4, \"ngIf\"], [3, \"layer\", \"click\", 4, \"ngIf\"], [3, \"header\", \"layer\", \"click\"], [3, \"layer\", \"click\"], [\"igoLayerLegendListBinding\", \"\", 3, \"allowShowAllLegends\", \"showAllLegendsValue\", \"excludeBaseLayers\", \"updateLegendOnResolutionChange\", \"allLegendsShown\"], [1, \"map-empty\", \"mat-typography\"], [4, \"ngIf\"], [\"mat-list-icon\", \"\"], [\"viewBox\", \"0 0 24 24\", \"fit\", \"\", \"height\", \"100%\", \"width\", \"100%\", \"preserveAspectRatio\", \"xMidYMid meet\", \"focusable\", \"false\"], [\"d\", \"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z\"], [\"matLine\", \"\", 1, \"search-tool\", \"mat-typography\", 3, \"click\"], [\"d\", \"M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z\"], [\"matLine\", \"\", 1, \"catalog-tool\", \"mat-typography\", 3, \"click\"], [\"d\", \"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z\"], [\"matLine\", \"\", 1, \"context-tool\", \"mat-typography\", 3, \"click\"]], template: function MapToolsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"mat-tab-group\", 0, 1);\n        ɵɵlistener(\"selectedTabChange\", function MapToolsComponent_Template_mat_tab_group_selectedTabChange_0_listener($event) { return ctx.tabChanged($event); });\n        ɵɵpipe(2, \"async\");\n        ɵɵelementStart(3, \"mat-tab\", 2);\n        ɵɵpipe(4, \"translate\");\n        ɵɵtemplate(5, MapToolsComponent_igo_layer_list_5_Template, 3, 8, \"igo-layer-list\", 3);\n        ɵɵpipe(6, \"async\");\n        ɵɵelementEnd();\n        ɵɵelementStart(7, \"mat-tab\", 2);\n        ɵɵpipe(8, \"translate\");\n        ɵɵtemplate(9, MapToolsComponent_igo_layer_legend_list_9_Template, 2, 6, \"igo-layer-legend-list\", 4);\n        ɵɵtemplate(10, MapToolsComponent_10_Template, 1, 0, undefined, 5);\n        ɵɵpipe(11, \"async\");\n        ɵɵtemplate(12, MapToolsComponent_p_12_Template, 5, 7, \"p\", 6);\n        ɵɵpipe(13, \"async\");\n        ɵɵpipe(14, \"async\");\n        ɵɵelementEnd();\n        ɵɵtemplate(15, MapToolsComponent_ng_template_15_Template, 1, 1, \"ng-template\", null, 7, ɵɵtemplateRefExtractor);\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r5 = ɵɵreference(16);\n        ɵɵproperty(\"selectedIndex\", ɵɵpipeBind1(2, 9, ctx.layerListToolState.selectedTab$));\n        ɵɵadvance(3);\n        ɵɵproperty(\"label\", ɵɵpipeBind1(4, 11, \"igo.integration.tools.layers\"));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(6, 13, ctx.layers$).length !== 0)(\"ngIfElse\", _r5);\n        ɵɵadvance(2);\n        ɵɵproperty(\"label\", ɵɵpipeBind1(8, 15, \"igo.integration.tools.legend\"));\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ctx.showAllLegend());\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(11, 17, ctx.layers$).length !== 0)(\"ngIfElse\", _r5);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", !ctx.allowShowAllLegends && ɵɵpipeBind1(13, 19, ctx.layers$).length !== 0 && ɵɵpipeBind1(14, 21, ctx.visibleOrInRangeLayers$).length === 0);\n    } }, directives: [MatTabGroup, MatTab, NgIf, LayerListComponent, LayerListBindingDirective, MetadataButtonComponent, TrackFeatureButtonComponent, WorkspaceButtonComponent, TimeFilterButtonComponent, OgcFilterButtonComponent, ExportButtonComponent, LayerLegendListComponent, LayerLegendListBindingDirective, MatList, MatListItem, MatIcon, MatListIconCssMatStyler, MatLine], pipes: [AsyncPipe, TranslatePipe], styles: [\".catalog-tool[_ngcontent-%COMP%], .context-tool[_ngcontent-%COMP%], .map-empty[_ngcontent-%COMP%], .search-tool[_ngcontent-%COMP%]{margin:10px}.map-empty[_ngcontent-%COMP%]{text-align:justify}.catalog-tool[_ngcontent-%COMP%], .context-tool[_ngcontent-%COMP%], .search-tool[_ngcontent-%COMP%]{cursor:pointer}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700}mat-list-item[_ngcontent-%COMP%]     .mat-list-text{font-size:smaller}mat-list.mat-list-base[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]     div.mat-list-item-content div.mat-list-text{padding-left:5px}mat-tab-group[_ngcontent-%COMP%], mat-tab-group[_ngcontent-%COMP%]     .mat-tab-body-wrapper{height:100%;overflow:hidden}[_nghost-%COMP%]     .mat-tab-body-content{overflow:hidden}\"], changeDetection: 0 });\nMapToolsComponent = __decorate([\n    ToolComponent({\n        name: 'mapTools',\n        title: 'igo.integration.tools.map',\n        icon: 'map'\n    }),\n    __metadata(\"design:paramtypes\", [LayerListToolState,\n        ToolState,\n        MapState,\n        SearchSourceService,\n        ImportExportState])\n], MapToolsComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MapToolsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-map-tools',\n                templateUrl: './map-tools.component.html',\n                styleUrls: ['./map-tools.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: LayerListToolState }, { type: ToolState }, { type: MapState }, { type: SearchSourceService }, { type: ImportExportState }]; }, { allowShowAllLegends: [{\n            type: Input\n        }], showAllLegendsValue: [{\n            type: Input\n        }], toggleLegendOnVisibilityChange: [{\n            type: Input\n        }], expandLegendOfVisibleLayers: [{\n            type: Input\n        }], updateLegendOnResolutionChange: [{\n            type: Input\n        }], selectedTabAtOpening: [{\n            type: Input\n        }], ogcButton: [{\n            type: Input\n        }], timeButton: [{\n            type: Input\n        }], layerAdditionAllowed: [{\n            type: Input\n        }], layerListControls: [{\n            type: Input\n        }], queryBadge: [{\n            type: Input\n        }], tabGroup: [{\n            type: ViewChild,\n            args: ['tabGroup', { static: true }]\n        }] }); })();\n\nfunction MapLegendToolComponent_igo_layer_legend_list_0_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-layer-legend-list\", 4);\n    ɵɵlistener(\"allLegendsShown\", function MapLegendToolComponent_igo_layer_legend_list_0_Template_igo_layer_legend_list_allLegendsShown_0_listener($event) { ɵɵrestoreView(_r6); const ctx_r5 = ɵɵnextContext(); return ctx_r5.onShowAllLegends($event); });\n    ɵɵpipe(1, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"excludeBaseLayers\", ctx_r0.excludeBaseLayers)(\"allowShowAllLegends\", ctx_r0.allowShowAllLegends)(\"updateLegendOnResolutionChange\", ctx_r0.updateLegendOnResolutionChange)(\"showAllLegendsValue\", ɵɵpipeBind1(1, 4, ctx_r0.showAllLegendsValue$));\n} }\nfunction MapLegendToolComponent_1_ng_template_0_Template(rf, ctx) { }\nfunction MapLegendToolComponent_1_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, MapLegendToolComponent_1_ng_template_0_Template, 0, 0, \"ng-template\");\n} }\nfunction MapLegendToolComponent_p_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\", 5);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"async\");\n    ɵɵpipe(3, \"translate\");\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, ctx_r2.visibleLayers$).length ? ɵɵpipeBind1(3, 3, \"igo.integration.mapTool.noLayersInRange\") : ɵɵpipeBind1(4, 5, \"igo.integration.mapTool.noLayersVisible\"), \"\\n\");\n} }\nfunction MapLegendToolComponent_ng_template_6_mat_list_0_p_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"p\", 5);\n    ɵɵtext(1);\n    ɵɵpipe(2, \"translate\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(1);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(2, 1, \"igo.integration.mapTool.customize\"), \"\");\n} }\nfunction MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_5_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\");\n    ɵɵelementStart(1, \"mat-icon\", 7);\n    ɵɵnamespaceSVG();\n    ɵɵelementStart(2, \"svg\", 8);\n    ɵɵelement(3, \"path\", 9);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵnamespaceHTML();\n    ɵɵelementStart(4, \"h4\", 10);\n    ɵɵlistener(\"click\", function MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_5_Template_h4_click_4_listener() { ɵɵrestoreView(_r14); const ctx_r13 = ɵɵnextContext(3); return ctx_r13.searchEmit(); });\n    ɵɵtext(5);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(5);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.search-tool\"), \" \");\n} }\nfunction MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_6_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\");\n    ɵɵelementStart(1, \"mat-icon\", 7);\n    ɵɵnamespaceSVG();\n    ɵɵelementStart(2, \"svg\", 8);\n    ɵɵelement(3, \"path\", 11);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵnamespaceHTML();\n    ɵɵelementStart(4, \"h4\", 12);\n    ɵɵlistener(\"click\", function MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_6_Template_h4_click_4_listener() { ɵɵrestoreView(_r16); const ctx_r15 = ɵɵnextContext(3); return ctx_r15.catalogEmit(); });\n    ɵɵtext(5);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(5);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.catalog-tool\"), \" \");\n} }\nfunction MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_7_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"mat-list-item\");\n    ɵɵelementStart(1, \"mat-icon\", 7);\n    ɵɵnamespaceSVG();\n    ɵɵelementStart(2, \"svg\", 8);\n    ɵɵelement(3, \"path\", 13);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵnamespaceHTML();\n    ɵɵelementStart(4, \"h4\", 14);\n    ɵɵlistener(\"click\", function MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_7_Template_h4_click_4_listener() { ɵɵrestoreView(_r18); const ctx_r17 = ɵɵnextContext(3); return ctx_r17.contextEmit(); });\n    ɵɵtext(5);\n    ɵɵpipe(6, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(5);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.context-tool\"), \" \");\n} }\nfunction MapLegendToolComponent_ng_template_6_mat_list_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"mat-list\");\n    ɵɵelementStart(1, \"p\", 5);\n    ɵɵtext(2);\n    ɵɵpipe(3, \"translate\");\n    ɵɵelementEnd();\n    ɵɵtemplate(4, MapLegendToolComponent_ng_template_6_mat_list_0_p_4_Template, 3, 3, \"p\", 2);\n    ɵɵtemplate(5, MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_5_Template, 7, 3, \"mat-list-item\", 6);\n    ɵɵtemplate(6, MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_6_Template, 7, 3, \"mat-list-item\", 6);\n    ɵɵtemplate(7, MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_7_Template, 7, 3, \"mat-list-item\", 6);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r8 = ɵɵnextContext(2);\n    ɵɵadvance(2);\n    ɵɵtextInterpolate1(\" \", ɵɵpipeBind1(3, 5, \"igo.integration.mapTool.empty\"), \"\");\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && (ctx_r8.searchToolInToolbar || ctx_r8.catalogToolInToolbar || ctx_r8.contextToolInToolbar));\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && ctx_r8.searchToolInToolbar);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && ctx_r8.catalogToolInToolbar);\n    ɵɵadvance(1);\n    ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && ctx_r8.contextToolInToolbar);\n} }\nfunction MapLegendToolComponent_ng_template_6_Template(rf, ctx) { if (rf & 1) {\n    ɵɵtemplate(0, MapLegendToolComponent_ng_template_6_mat_list_0_Template, 8, 7, \"mat-list\", 6);\n} if (rf & 2) {\n    const ctx_r4 = ɵɵnextContext();\n    ɵɵproperty(\"ngIf\", ctx_r4.delayedShowEmptyMapContent);\n} }\nlet MapLegendToolComponent = class MapLegendToolComponent {\n    constructor(mapState, toolState, searchSourceService, cdRef) {\n        this.mapState = mapState;\n        this.toolState = toolState;\n        this.searchSourceService = searchSourceService;\n        this.cdRef = cdRef;\n        this.delayedShowEmptyMapContent = false;\n        this.layers$ = new BehaviorSubject([]);\n        this.showAllLegendsValue$ = new BehaviorSubject(false);\n        this.change$ = new ReplaySubject(1);\n        this.updateLegendOnResolutionChange = false;\n        this.layerAdditionAllowed = true;\n        this.allowShowAllLegends = false;\n        this.showAllLegendsValue = false;\n        this.layerListControls = {};\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    get visibleOrInRangeLayers$() {\n        return this.layers$.pipe(map(layers => layers.filter(layer => layer.visible$.value && layer.isInResolutionsRange$.value)));\n    }\n    get visibleLayers$() {\n        return this.layers$.pipe(map(layers => layers.filter(layer => layer.visible$.value)));\n    }\n    get excludeBaseLayers() {\n        return this.layerListControls.excludeBaseLayers || false;\n    }\n    get searchToolInToolbar() {\n        return (this.toolState.toolbox.getToolbar().indexOf('searchResults') !== -1 &&\n            this.searchSourceService\n                .getSources()\n                .filter(sourceCanSearch)\n                .filter(s => s.available && s.getType() === 'Layer').length > 0);\n    }\n    get catalogToolInToolbar() {\n        return this.toolState.toolbox.getToolbar().indexOf('catalog') !== -1;\n    }\n    get contextToolInToolbar() {\n        return this.toolState.toolbox.getToolbar().indexOf('contextManager') !== -1;\n    }\n    ngOnInit() {\n        this.resolution$$ = combineLatest([\n            this.map.layers$,\n            this.map.viewController.resolution$\n        ])\n            .pipe(debounceTime(10))\n            .subscribe((bunch) => {\n            this.layers$.next(bunch[0].filter(layer => layer.showInLayerList !== false &&\n                (!this.excludeBaseLayers || !layer.baseLayer)));\n        });\n        if (this.allowShowAllLegends) {\n            this.mapState.showAllLegendsValue =\n                this.mapState.showAllLegendsValue !== undefined\n                    ? this.mapState.showAllLegendsValue\n                    : this.showAllLegendsValue || false;\n            this.showAllLegendsValue$.next(this.mapState.showAllLegendsValue);\n        }\n        else {\n            this.showAllLegendsValue$.next(false);\n        }\n        // prevent message to be shown too quickly. Waiting for layers\n        setTimeout(() => {\n            this.delayedShowEmptyMapContent = true;\n            this.cdRef.detectChanges();\n        }, 250);\n    }\n    onShowAllLegends(event) {\n        this.mapState.showAllLegendsValue = event;\n        this.showAllLegendsValue$.next(event);\n    }\n    showAllLegend() {\n        if (this.layers$.getValue().length === 0) {\n            return false;\n        }\n        else if (this.layers$.getValue().length !== 0 &&\n            this.allowShowAllLegends === false) {\n            let visibleOrInRangeLayers;\n            this.visibleOrInRangeLayers$$ = this.visibleOrInRangeLayers$.subscribe(value => {\n                value.length === 0\n                    ? (visibleOrInRangeLayers = false)\n                    : (visibleOrInRangeLayers = true);\n            });\n            if (visibleOrInRangeLayers === false) {\n                return false;\n            }\n        }\n        return true;\n    }\n    ngOnDestroy() {\n        this.resolution$$.unsubscribe();\n        if (this.visibleOrInRangeLayers$$) {\n            this.visibleOrInRangeLayers$$.unsubscribe();\n        }\n    }\n    searchEmit() {\n        this.toolState.toolbox.activateTool('searchResults');\n    }\n    catalogEmit() {\n        this.toolState.toolbox.activateTool('catalog');\n    }\n    contextEmit() {\n        this.toolState.toolbox.activateTool('contextManager');\n    }\n};\nMapLegendToolComponent.ɵfac = function MapLegendToolComponent_Factory(t) { return new (t || MapLegendToolComponent)(ɵɵdirectiveInject(MapState), ɵɵdirectiveInject(ToolState), ɵɵdirectiveInject(SearchSourceService), ɵɵdirectiveInject(ChangeDetectorRef)); };\nMapLegendToolComponent.ɵcmp = ɵɵdefineComponent({ type: MapLegendToolComponent, selectors: [[\"igo-map-legend-tool\"]], inputs: { updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", layerAdditionAllowed: \"layerAdditionAllowed\", allowShowAllLegends: \"allowShowAllLegends\", showAllLegendsValue: \"showAllLegendsValue\", layerListControls: \"layerListControls\" }, decls: 8, vars: 10, consts: [[\"igoLayerLegendListBinding\", \"\", 3, \"excludeBaseLayers\", \"allowShowAllLegends\", \"updateLegendOnResolutionChange\", \"showAllLegendsValue\", \"allLegendsShown\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"class\", \"map-empty mat-typography\", 4, \"ngIf\"], [\"emptyLayers\", \"\"], [\"igoLayerLegendListBinding\", \"\", 3, \"excludeBaseLayers\", \"allowShowAllLegends\", \"updateLegendOnResolutionChange\", \"showAllLegendsValue\", \"allLegendsShown\"], [1, \"map-empty\", \"mat-typography\"], [4, \"ngIf\"], [\"mat-list-icon\", \"\"], [\"viewBox\", \"0 0 24 24\", \"fit\", \"\", \"height\", \"100%\", \"width\", \"100%\", \"preserveAspectRatio\", \"xMidYMid meet\", \"focusable\", \"false\"], [\"d\", \"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z\"], [\"matLine\", \"\", 1, \"search-tool\", \"mat-typography\", 3, \"click\"], [\"d\", \"M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z\"], [\"matLine\", \"\", 1, \"catalog-tool\", \"mat-typography\", 3, \"click\"], [\"d\", \"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z\"], [\"matLine\", \"\", 1, \"context-tool\", \"mat-typography\", 3, \"click\"]], template: function MapLegendToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, MapLegendToolComponent_igo_layer_legend_list_0_Template, 2, 6, \"igo-layer-legend-list\", 0);\n        ɵɵtemplate(1, MapLegendToolComponent_1_Template, 1, 0, undefined, 1);\n        ɵɵpipe(2, \"async\");\n        ɵɵtemplate(3, MapLegendToolComponent_p_3_Template, 5, 7, \"p\", 2);\n        ɵɵpipe(4, \"async\");\n        ɵɵpipe(5, \"async\");\n        ɵɵtemplate(6, MapLegendToolComponent_ng_template_6_Template, 1, 1, \"ng-template\", null, 3, ɵɵtemplateRefExtractor);\n    } if (rf & 2) {\n        const _r3 = ɵɵreference(7);\n        ɵɵproperty(\"ngIf\", ctx.showAllLegend());\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(2, 4, ctx.layers$).length !== 0)(\"ngIfElse\", _r3);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", !ctx.allowShowAllLegends && ɵɵpipeBind1(4, 6, ctx.layers$).length !== 0 && ɵɵpipeBind1(5, 8, ctx.visibleOrInRangeLayers$).length === 0);\n    } }, directives: [NgIf, LayerLegendListComponent, LayerLegendListBindingDirective, MatList, MatListItem, MatIcon, MatListIconCssMatStyler, MatLine], pipes: [AsyncPipe, TranslatePipe], styles: [\".catalog-tool[_ngcontent-%COMP%], .context-tool[_ngcontent-%COMP%], .map-empty[_ngcontent-%COMP%], .search-tool[_ngcontent-%COMP%]{margin:10px}.map-empty[_ngcontent-%COMP%]{text-align:justify}.catalog-tool[_ngcontent-%COMP%], .context-tool[_ngcontent-%COMP%], .search-tool[_ngcontent-%COMP%]{cursor:pointer}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700}mat-list-item[_ngcontent-%COMP%]     .mat-list-text{font-size:smaller}mat-list.mat-list-base[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]     div.mat-list-item-content div.mat-list-text{padding-left:5px}\"] });\nMapLegendToolComponent = __decorate([\n    ToolComponent({\n        name: 'mapLegend',\n        title: 'igo.integration.tools.legend',\n        icon: 'format-list-bulleted-type'\n    }),\n    __metadata(\"design:paramtypes\", [MapState,\n        ToolState,\n        SearchSourceService,\n        ChangeDetectorRef])\n], MapLegendToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MapLegendToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-map-legend-tool',\n                templateUrl: './map-legend-tool.component.html',\n                styleUrls: ['./map-legend-tool.component.scss']\n            }]\n    }], function () { return [{ type: MapState }, { type: ToolState }, { type: SearchSourceService }, { type: ChangeDetectorRef }]; }, { updateLegendOnResolutionChange: [{\n            type: Input\n        }], layerAdditionAllowed: [{\n            type: Input\n        }], allowShowAllLegends: [{\n            type: Input\n        }], showAllLegendsValue: [{\n            type: Input\n        }], layerListControls: [{\n            type: Input\n        }] }); })();\n\nclass IgoAppMapModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAppMapModule,\n            providers: []\n        };\n    }\n}\nIgoAppMapModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppMapModule });\nIgoAppMapModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppMapModule_Factory(t) { return new (t || IgoAppMapModule)(); }, imports: [[\n            CommonModule,\n            MatTabsModule,\n            MatListModule,\n            MatIconModule,\n            IgoLanguageModule,\n            IgoLayerModule,\n            IgoMetadataModule,\n            IgoDownloadModule,\n            IgoImportExportModule,\n            IgoFilterModule,\n            IgoContextModule,\n            IgoAppWorkspaceModule,\n            MatMenuModule,\n            MatButtonModule,\n            MatTooltipModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppMapModule, { declarations: [MapToolComponent, MapToolsComponent, MapDetailsToolComponent, MapLegendToolComponent], imports: [CommonModule,\n        MatTabsModule,\n        MatListModule,\n        MatIconModule,\n        IgoLanguageModule,\n        IgoLayerModule,\n        IgoMetadataModule,\n        IgoDownloadModule,\n        IgoImportExportModule,\n        IgoFilterModule,\n        IgoContextModule,\n        IgoAppWorkspaceModule,\n        MatMenuModule,\n        MatButtonModule,\n        MatTooltipModule], exports: [MapToolComponent, MapToolsComponent, MapDetailsToolComponent, MapLegendToolComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppMapModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatTabsModule,\n                    MatListModule,\n                    MatIconModule,\n                    IgoLanguageModule,\n                    IgoLayerModule,\n                    IgoMetadataModule,\n                    IgoDownloadModule,\n                    IgoImportExportModule,\n                    IgoFilterModule,\n                    IgoContextModule,\n                    IgoAppWorkspaceModule,\n                    MatMenuModule,\n                    MatButtonModule,\n                    MatTooltipModule\n                ],\n                declarations: [MapToolComponent, MapToolsComponent, MapDetailsToolComponent, MapLegendToolComponent],\n                exports: [MapToolComponent, MapToolsComponent, MapDetailsToolComponent, MapLegendToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n\n/**\n * Service that holds the state of the measure module\n */\nclass MeasureState {\n    constructor(mapState) {\n        this.mapState = mapState;\n        /**\n         * Store that holds the measures\n         */\n        this.store = new FeatureStore([], {\n            map: this.mapState.map\n        });\n    }\n}\nMeasureState.ɵfac = function MeasureState_Factory(t) { return new (t || MeasureState)(ɵɵinject(MapState)); };\nMeasureState.ɵprov = ɵɵdefineInjectable({ token: MeasureState, factory: MeasureState.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MeasureState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: MapState }]; }, null); })();\n\n/**\n * Tool to measure lengths and areas\n */\nlet MeasurerToolComponent = class MeasurerToolComponent {\n    constructor(measureState, mapState) {\n        this.measureState = measureState;\n        this.mapState = mapState;\n    }\n    /**\n     * Map to measure on\n     * @internal\n     */\n    get store() { return this.measureState.store; }\n    /**\n     * Map to measure on\n     * @internal\n     */\n    get map() { return this.mapState.map; }\n};\nMeasurerToolComponent.ɵfac = function MeasurerToolComponent_Factory(t) { return new (t || MeasurerToolComponent)(ɵɵdirectiveInject(MeasureState), ɵɵdirectiveInject(MapState)); };\nMeasurerToolComponent.ɵcmp = ɵɵdefineComponent({ type: MeasurerToolComponent, selectors: [[\"igo-measurer-tool\"]], decls: 1, vars: 2, consts: [[3, \"store\", \"map\"]], template: function MeasurerToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"igo-measurer\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"store\", ctx.store)(\"map\", ctx.map);\n    } }, directives: [MeasurerComponent], encapsulation: 2, changeDetection: 0 });\nMeasurerToolComponent = __decorate([\n    ToolComponent({\n        name: 'measurer',\n        title: 'igo.integration.tools.measurer',\n        icon: 'ruler'\n    }),\n    __metadata(\"design:paramtypes\", [MeasureState,\n        MapState])\n], MeasurerToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MeasurerToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-measurer-tool',\n                templateUrl: './measurer-tool.component.html',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: MeasureState }, { type: MapState }]; }, null); })();\n\n/**\n * @ignore\n */\nclass IgoAppMeasurerToolModule {\n}\nIgoAppMeasurerToolModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppMeasurerToolModule });\nIgoAppMeasurerToolModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppMeasurerToolModule_Factory(t) { return new (t || IgoAppMeasurerToolModule)(); }, imports: [[\n            IgoMeasurerModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppMeasurerToolModule, { declarations: [MeasurerToolComponent], imports: [IgoMeasurerModule], exports: [MeasurerToolComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppMeasurerToolModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    IgoMeasurerModule\n                ],\n                declarations: [MeasurerToolComponent],\n                exports: [MeasurerToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n\nclass IgoAppMeasureModule {\n}\nIgoAppMeasureModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppMeasureModule });\nIgoAppMeasureModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppMeasureModule_Factory(t) { return new (t || IgoAppMeasureModule)(); }, imports: [[], IgoAppMeasurerToolModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppMeasureModule, { exports: [IgoAppMeasurerToolModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppMeasureModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: [\n                    IgoAppMeasurerToolModule\n                ]\n            }]\n    }], null, null); })();\n\nlet PrintToolComponent = class PrintToolComponent {\n    constructor(mapState) {\n        this.mapState = mapState;\n    }\n    get map() {\n        return this.mapState.map;\n    }\n};\nPrintToolComponent.ɵfac = function PrintToolComponent_Factory(t) { return new (t || PrintToolComponent)(ɵɵdirectiveInject(MapState)); };\nPrintToolComponent.ɵcmp = ɵɵdefineComponent({ type: PrintToolComponent, selectors: [[\"igo-print-tool\"]], decls: 1, vars: 1, consts: [[3, \"map\"]], template: function PrintToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"igo-print\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"map\", ctx.map);\n    } }, directives: [PrintComponent], encapsulation: 2 });\nPrintToolComponent = __decorate([\n    ToolComponent({\n        name: 'print',\n        title: 'igo.integration.tools.print',\n        icon: 'printer'\n    }),\n    __metadata(\"design:paramtypes\", [MapState])\n], PrintToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(PrintToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-print-tool',\n                templateUrl: './print-tool.component.html'\n            }]\n    }], function () { return [{ type: MapState }]; }, null); })();\n\nclass IgoAppPrintModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAppPrintModule,\n            providers: []\n        };\n    }\n}\nIgoAppPrintModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppPrintModule });\nIgoAppPrintModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppPrintModule_Factory(t) { return new (t || IgoAppPrintModule)(); }, imports: [[IgoPrintModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppPrintModule, { declarations: [PrintToolComponent], imports: [IgoPrintModule], exports: [PrintToolComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppPrintModule, [{\n        type: NgModule,\n        args: [{\n                imports: [IgoPrintModule],\n                declarations: [PrintToolComponent],\n                exports: [PrintToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n\n/**\n * Service that holds the state of the search module\n */\nclass SearchState {\n    constructor(searchSourceService, storageService, configService) {\n        this.searchSourceService = searchSourceService;\n        this.storageService = storageService;\n        this.configService = configService;\n        this.searchOverlayStyle = {};\n        this.searchOverlayStyleSelection = {};\n        this.searchOverlayStyleFocus = {};\n        this.searchTermSplitter$ = new BehaviorSubject('|');\n        this.searchTerm$ = new BehaviorSubject(undefined);\n        this.searchType$ = new BehaviorSubject(undefined);\n        this.searchDisabled$ = new BehaviorSubject(false);\n        this.searchResultsGeometryEnabled$ = new BehaviorSubject(false);\n        this.searchSettingsChange$ = new BehaviorSubject(undefined);\n        this.selectedResult$ = new BehaviorSubject(undefined);\n        /**\n         * Store that holds the search results\n         */\n        this.store = new EntityStore([]);\n        const searchOverlayStyle = this.configService.getConfig('searchOverlayStyle');\n        if (searchOverlayStyle) {\n            this.searchOverlayStyle = searchOverlayStyle.base;\n            this.searchOverlayStyleSelection = searchOverlayStyle.selection;\n            this.searchOverlayStyleFocus = searchOverlayStyle.focus;\n        }\n        const searchResultsGeometryEnabled = this.storageService.get('searchResultsGeometryEnabled');\n        if (searchResultsGeometryEnabled) {\n            this.searchResultsGeometryEnabled$.next(searchResultsGeometryEnabled);\n        }\n        this.store.addStrategy(this.createCustomFilterTermStrategy(), false);\n    }\n    /**\n     * Search types currently enabled in the search source service\n     */\n    get searchTypes() {\n        return this.searchSourceService\n            .getEnabledSources()\n            .map((source) => source.constructor.type);\n    }\n    createCustomFilterTermStrategy() {\n        const filterClauseFunc = (record) => {\n            return record.entity.meta.score === 100;\n        };\n        return new EntityStoreFilterCustomFuncStrategy({ filterClauseFunc });\n    }\n    /**\n     * Activate custom strategy\n     *\n     */\n    activateCustomFilterTermStrategy() {\n        const strategy = this.store.getStrategyOfType(EntityStoreFilterCustomFuncStrategy);\n        if (strategy !== undefined) {\n            strategy.activate();\n        }\n    }\n    /**\n     * Deactivate custom strategy\n     *\n     */\n    deactivateCustomFilterTermStrategy() {\n        const strategy = this.store.getStrategyOfType(EntityStoreFilterCustomFuncStrategy);\n        if (strategy !== undefined) {\n            strategy.deactivate();\n        }\n    }\n    enableSearch() {\n        this.searchDisabled$.next(false);\n    }\n    disableSearch() {\n        this.searchDisabled$.next(true);\n    }\n    setSearchTerm(searchTerm) {\n        this.searchTerm$.next(searchTerm);\n    }\n    setSearchType(searchType) {\n        this.searchSourceService.enableSourcesByType(searchType);\n        this.searchType$.next(searchType);\n    }\n    setSearchSettingsChange() {\n        this.searchSettingsChange$.next(true);\n    }\n    setSelectedResult(result) {\n        this.selectedResult$.next(result);\n    }\n    setSearchResultsGeometryStatus(value) {\n        this.storageService.set('searchResultsGeometryEnabled', value);\n        this.searchResultsGeometryEnabled$.next(value);\n    }\n}\nSearchState.ɵfac = function SearchState_Factory(t) { return new (t || SearchState)(ɵɵinject(SearchSourceService), ɵɵinject(StorageService), ɵɵinject(ConfigService)); };\nSearchState.ɵprov = ɵɵdefineInjectable({ token: SearchState, factory: SearchState.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SearchState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: SearchSourceService }, { type: StorageService }, { type: ConfigService }]; }, null); })();\n\nclass SearchBarBindingDirective {\n    constructor(component, searchState) {\n        this.component = component;\n        this.searchState = searchState;\n    }\n    get searchTerm() { return this.searchState.searchTerm$.value; }\n    get searchType() { return this.searchState.searchType$.value; }\n    ngOnInit() {\n        this.searchTerm$$ = this.searchState.searchTerm$.subscribe((searchTerm) => {\n            if (searchTerm !== undefined && searchTerm !== null) {\n                this.component.setTerm(searchTerm);\n            }\n        });\n        this.searchType$$ = this.searchState.searchType$.subscribe((searchType) => {\n            if (searchType !== undefined && searchType !== null) {\n                this.component.setSearchType(searchType);\n            }\n        });\n        this.searchDisabled$$ = this.searchState.searchDisabled$.subscribe((searchDisabled) => {\n            this.component.disabled = searchDisabled;\n        });\n    }\n    ngOnDestroy() {\n        this.searchTerm$$.unsubscribe();\n        this.searchType$$.unsubscribe();\n        this.searchDisabled$$.unsubscribe();\n    }\n    onSearchTermChange(searchTerm) {\n        if (searchTerm !== this.searchTerm) {\n            this.searchState.setSearchTerm(searchTerm);\n        }\n    }\n    onSearchTypeChange(searchType) {\n        if (searchType !== this.searchType) {\n            this.searchState.setSearchType(searchType);\n        }\n    }\n}\nSearchBarBindingDirective.ɵfac = function SearchBarBindingDirective_Factory(t) { return new (t || SearchBarBindingDirective)(ɵɵdirectiveInject(SearchBarComponent, 2), ɵɵdirectiveInject(SearchState)); };\nSearchBarBindingDirective.ɵdir = ɵɵdefineDirective({ type: SearchBarBindingDirective, selectors: [[\"\", \"igoSearchBarBinding\", \"\"]], hostBindings: function SearchBarBindingDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"searchTermChange\", function SearchBarBindingDirective_searchTermChange_HostBindingHandler($event) { return ctx.onSearchTermChange($event); })(\"searchTypeChange\", function SearchBarBindingDirective_searchTypeChange_HostBindingHandler($event) { return ctx.onSearchTypeChange($event); });\n    } } });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SearchBarBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoSearchBarBinding]'\n            }]\n    }], function () { return [{ type: SearchBarComponent, decorators: [{\n                type: Self\n            }] }, { type: SearchState }]; }, { onSearchTermChange: [{\n            type: HostListener,\n            args: ['searchTermChange', ['$event']]\n        }], onSearchTypeChange: [{\n            type: HostListener,\n            args: ['searchTypeChange', ['$event']]\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoAppSearchBarModule {\n}\nIgoAppSearchBarModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppSearchBarModule });\nIgoAppSearchBarModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppSearchBarModule_Factory(t) { return new (t || IgoAppSearchBarModule)(); }, imports: [[IgoSearchModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppSearchBarModule, { declarations: [SearchBarBindingDirective], imports: [IgoSearchModule], exports: [SearchBarBindingDirective] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppSearchBarModule, [{\n        type: NgModule,\n        args: [{\n                imports: [IgoSearchModule],\n                declarations: [SearchBarBindingDirective],\n                exports: [SearchBarBindingDirective],\n            }]\n    }], null, null); })();\n\nfunction SearchResultsToolComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"div\", 2);\n    ɵɵelementStart(1, \"section\", 3);\n    ɵɵelementStart(2, \"h4\");\n    ɵɵelementStart(3, \"strong\");\n    ɵɵtext(4);\n    ɵɵpipe(5, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(6, \"p\");\n    ɵɵelementStart(7, \"strong\");\n    ɵɵtext(8);\n    ɵɵpipe(9, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelement(10, \"div\", 4);\n    ɵɵpipe(11, \"sanitizeHtml\");\n    ɵɵpipe(12, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    ɵɵadvance(4);\n    ɵɵtextInterpolate(ɵɵpipeBind1(5, 3, \"igo.integration.searchResultsTool.noResults\"));\n    ɵɵadvance(4);\n    ɵɵtextInterpolate(ɵɵpipeBind1(9, 5, \"igo.integration.searchResultsTool.doSearch\"));\n    ɵɵadvance(2);\n    ɵɵproperty(\"innerHTML\", ɵɵpipeBind1(11, 7, ɵɵpipeBind1(12, 9, \"igo.integration.searchResultsTool.examples\")), ɵɵsanitizeHtml);\n} }\nfunction SearchResultsToolComponent_igo_flexible_1_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelement(0, \"igo-search-add-button\", 12);\n} if (rf & 2) {\n    const result_r6 = ctx.result;\n    const ctx_r4 = ɵɵnextContext(2);\n    ɵɵproperty(\"map\", ctx_r4.map)(\"layer\", result_r6);\n} }\nfunction SearchResultsToolComponent_igo_flexible_1_igo_panel_8_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 18);\n    ɵɵlistener(\"click\", function SearchResultsToolComponent_igo_flexible_1_igo_panel_8_button_4_Template_button_click_0_listener() { ɵɵrestoreView(_r9); const ctx_r8 = ɵɵnextContext(3); return ctx_r8.zoomToFeatureExtent(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵpipe(2, \"async\");\n    ɵɵelement(3, \"mat-icon\", 19);\n    ɵɵpipe(4, \"async\");\n    ɵɵpipe(5, \"async\");\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r7 = ɵɵnextContext(3);\n    ɵɵproperty(\"matTooltip\", ɵɵpipeBind1(1, 3, ɵɵpipeBind1(2, 5, ctx_r7.isSelectedResultOutOfView$) ? \"igo.integration.searchResultsTool.zoomOnFeatureTooltipOutOfView\" : \"igo.integration.searchResultsTool.zoomOnFeatureTooltip\"));\n    ɵɵadvance(3);\n    ɵɵproperty(\"matBadge\", ɵɵpipeBind1(4, 7, ctx_r7.isSelectedResultOutOfView$) ? \"!\" : \"\")(\"matBadgeHidden\", !ɵɵpipeBind1(5, 9, ctx_r7.isSelectedResultOutOfView$));\n} }\nfunction SearchResultsToolComponent_igo_flexible_1_igo_panel_8_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-panel\", 13);\n    ɵɵelementStart(1, \"button\", 14);\n    ɵɵlistener(\"click\", function SearchResultsToolComponent_igo_flexible_1_igo_panel_8_Template_button_click_1_listener() { ɵɵrestoreView(_r11); const ctx_r10 = ɵɵnextContext(2); return ctx_r10.toggleTopPanel(); });\n    ɵɵelement(2, \"mat-icon\", 15);\n    ɵɵpipe(3, \"async\");\n    ɵɵelementEnd();\n    ɵɵtemplate(4, SearchResultsToolComponent_igo_flexible_1_igo_panel_8_button_4_Template, 6, 11, \"button\", 16);\n    ɵɵelementStart(5, \"igo-feature-details\", 17);\n    ɵɵlistener(\"routingEvent\", function SearchResultsToolComponent_igo_flexible_1_igo_panel_8_Template_igo_feature_details_routingEvent_5_listener($event) { ɵɵrestoreView(_r11); const ctx_r12 = ɵɵnextContext(2); return ctx_r12.getRoute($event); });\n    ɵɵpipe(6, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵɵnextContext(2);\n    ɵɵproperty(\"title\", ctx_r5.featureTitle);\n    ɵɵadvance(2);\n    ɵɵproperty(\"svgIcon\", ɵɵpipeBind1(3, 6, ctx_r5.topPanelState$) === \"collapsed\" ? \"arrow-up\" : \"arrow-down\");\n    ɵɵadvance(2);\n    ɵɵproperty(\"ngIf\", ctx_r5.feature.geometry);\n    ɵɵadvance(1);\n    ɵɵproperty(\"feature\", ɵɵpipeBind1(6, 8, ctx_r5.feature$))(\"map\", ctx_r5.map)(\"toolbox\", ctx_r5.toolState.toolbox);\n} }\nfunction SearchResultsToolComponent_igo_flexible_1_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"igo-flexible\", 5, 6);\n    ɵɵpipe(2, \"async\");\n    ɵɵelementStart(3, \"div\", 7);\n    ɵɵelementStart(4, \"igo-search-results\", 8);\n    ɵɵlistener(\"resultFocus\", function SearchResultsToolComponent_igo_flexible_1_Template_igo_search_results_resultFocus_4_listener($event) { ɵɵrestoreView(_r14); const ctx_r13 = ɵɵnextContext(); return ctx_r13.onResultFocus($event); })(\"resultSelect\", function SearchResultsToolComponent_igo_flexible_1_Template_igo_search_results_resultSelect_4_listener($event) { ɵɵrestoreView(_r14); const ctx_r15 = ɵɵnextContext(); return ctx_r15.onResultSelect($event); })(\"resultUnfocus\", function SearchResultsToolComponent_igo_flexible_1_Template_igo_search_results_resultUnfocus_4_listener($event) { ɵɵrestoreView(_r14); const ctx_r16 = ɵɵnextContext(); return ctx_r16.onResultUnfocus($event); })(\"resultMouseenter\", function SearchResultsToolComponent_igo_flexible_1_Template_igo_search_results_resultMouseenter_4_listener($event) { ɵɵrestoreView(_r14); const ctx_r17 = ɵɵnextContext(); return ctx_r17.onResultFocus($event); })(\"resultMouseleave\", function SearchResultsToolComponent_igo_flexible_1_Template_igo_search_results_resultMouseleave_4_listener($event) { ɵɵrestoreView(_r14); const ctx_r18 = ɵɵnextContext(); return ctx_r18.onResultUnfocus($event); })(\"moreResults\", function SearchResultsToolComponent_igo_flexible_1_Template_igo_search_results_moreResults_4_listener($event) { ɵɵrestoreView(_r14); const ctx_r19 = ɵɵnextContext(); return ctx_r19.onSearch($event); });\n    ɵɵtemplate(5, SearchResultsToolComponent_igo_flexible_1_ng_template_5_Template, 1, 2, \"ng-template\", null, 9, ɵɵtemplateRefExtractor);\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n    ɵɵelementStart(7, \"div\", 10);\n    ɵɵtemplate(8, SearchResultsToolComponent_igo_flexible_1_igo_panel_8_Template, 7, 10, \"igo-panel\", 11);\n    ɵɵpipe(9, \"async\");\n    ɵɵelementEnd();\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    ɵɵproperty(\"state\", ɵɵpipeBind1(2, 7, ctx_r1.feature$) ? ctx_r1.topPanelState : \"initial\");\n    ɵɵadvance(4);\n    ɵɵproperty(\"store\", ctx_r1.store)(\"showIcons\", ctx_r1.showIcons)(\"term\", ctx_r1.term)(\"termSplitter\", ctx_r1.termSplitter)(\"settingsChange$\", ctx_r1.settingsChange$);\n    ɵɵadvance(4);\n    ɵɵproperty(\"ngIf\", ɵɵpipeBind1(9, 9, ctx_r1.feature$));\n} }\n/**\n * Tool to browse the search results\n */\nlet SearchResultsToolComponent = class SearchResultsToolComponent {\n    constructor(mapState, searchState, elRef, toolState, directionState, configService) {\n        this.mapState = mapState;\n        this.searchState = searchState;\n        this.elRef = elRef;\n        this.toolState = toolState;\n        this.directionState = directionState;\n        /**\n         * to show hide results icons\n         */\n        this.showIcons = true;\n        this.hasFeatureEmphasisOnSelection = false;\n        this.shownResultsGeometries = [];\n        this.shownResultsEmphasisGeometries = [];\n        this.focusedResult$ = new BehaviorSubject(undefined);\n        this.isSelectedResultOutOfView$ = new BehaviorSubject(false);\n        this.term = '';\n        this.settingsChange$ = new BehaviorSubject(undefined);\n        this.topPanelState$ = new BehaviorSubject('initial');\n        this.format = new olFormatGeoJSON();\n        this.hasFeatureEmphasisOnSelection = configService.getConfig('hasFeatureEmphasisOnSelection');\n    }\n    /**\n     * Store holding the search results\n     * @internal\n     */\n    get store() {\n        return this.searchState.store;\n    }\n    /**\n     * Map to display the results on\n     * @internal\n     */\n    get map() {\n        return this.mapState.map;\n    }\n    get featureTitle() {\n        return this.feature ? getEntityTitle(this.feature) : undefined;\n    }\n    get feature$() {\n        return this.store.stateView\n            .firstBy$((e) => e.state.focused)\n            .pipe(map((element) => (this.feature = element\n            ? element.entity.data\n            : undefined)));\n    }\n    set topPanelState(value) {\n        this.topPanelState$.next(value);\n    }\n    get topPanelState() {\n        return this.topPanelState$.value;\n    }\n    get termSplitter() {\n        return this.searchState.searchTermSplitter$.value;\n    }\n    ngOnInit() {\n        this.searchTerm$$ = this.searchState.searchTerm$.subscribe((searchTerm) => {\n            if (searchTerm !== undefined && searchTerm !== null) {\n                this.term = searchTerm;\n            }\n        });\n        for (const res of this.store.stateView.all$().value) {\n            if (this.store.state.get(res.entity).selected === true) {\n                this.topPanelState = 'expanded';\n            }\n        }\n        this.searchState.searchSettingsChange$.subscribe(() => {\n            this.settingsChange$.next(true);\n        });\n        this.topPanelState$$ = this.topPanelState$.subscribe(() => {\n            const igoList = this.computeElementRef()[0];\n            const selected = this.computeElementRef()[1];\n            if (selected) {\n                setTimeout(() => {\n                    // To be sure the flexible component has been displayed yet\n                    if (!this.isScrolledIntoView(igoList, selected)) {\n                        this.adjustTopPanel(igoList, selected);\n                    }\n                }, FlexibleComponent.transitionTime + 50);\n            }\n        });\n        if (this.hasFeatureEmphasisOnSelection) {\n            if (!this.searchState.focusedOrResolution$$) {\n                this.searchState.focusedOrResolution$$ = combineLatest([\n                    this.focusedResult$,\n                    this.map.viewController.resolution$\n                ]).subscribe((bunch) => this.buildResultEmphasis(bunch[0], 'focused'));\n            }\n            if (!this.searchState.selectedOrResolution$$) {\n                this.searchState.selectedOrResolution$$ = combineLatest([\n                    this.searchState.selectedResult$,\n                    this.map.viewController.resolution$\n                ]).subscribe((bunch) => this.buildResultEmphasis(bunch[0], 'selected'));\n            }\n        }\n        this.monitorResultOutOfView();\n        this.showResultsGeometries$$ = combineLatest([\n            this.searchState.searchResultsGeometryEnabled$,\n            this.store.stateView.all$(),\n            this.focusedResult$,\n            this.searchState.selectedResult$,\n            this.searchState.searchTerm$,\n            this.map.viewController.resolution$\n        ]).subscribe((bunch) => {\n            const searchResultsGeometryEnabled = bunch[0];\n            const searchResults = bunch[1];\n            if (this.hasFeatureEmphasisOnSelection) {\n                this.clearFeatureEmphasis('shown');\n            }\n            this.shownResultsGeometries.map(result => this.map.queryResultsOverlay.removeFeature(result));\n            const featureToHandleGeom = searchResults\n                .filter(result => result.entity.meta.dataType === FEATURE &&\n                result.entity.data.geometry &&\n                !result.state.selected &&\n                !result.state.focused);\n            featureToHandleGeom.map(result => {\n                var _a;\n                if (searchResultsGeometryEnabled) {\n                    result.entity.data.meta.style =\n                        getCommonVectorStyle(Object.assign({}, { feature: result.entity.data }, this.searchState.searchOverlayStyle, ((_a = result.entity.style) === null || _a === void 0 ? void 0 : _a.base) ? result.entity.style.base : {}));\n                    this.shownResultsGeometries.push(result.entity.data);\n                    this.map.queryResultsOverlay.addFeature(result.entity.data, FeatureMotion.None);\n                    if (this.hasFeatureEmphasisOnSelection) {\n                        this.buildResultEmphasis(result.entity, 'shown');\n                    }\n                }\n            });\n        });\n    }\n    monitorResultOutOfView() {\n        this.isSelectedResultOutOfView$$ = combineLatest([\n            this.map.viewController.state$,\n            this.searchState.selectedResult$\n        ])\n            .pipe(debounceTime(100))\n            .subscribe((bunch) => {\n            const selectedResult = bunch[1];\n            if (!selectedResult) {\n                this.isSelectedResultOutOfView$.next(false);\n                return;\n            }\n            if (selectedResult.data.geometry) {\n                const selectedOlFeature = featureToOl(selectedResult.data, this.map.projection);\n                const selectedOlFeatureExtent = computeOlFeaturesExtent(this.map, [\n                    selectedOlFeature\n                ]);\n                this.isSelectedResultOutOfView$.next(featuresAreOutOfView(this.map, selectedOlFeatureExtent));\n            }\n        });\n    }\n    buildResultEmphasis(result, trigger) {\n        var _a, _b, _c;\n        if (trigger !== 'shown') {\n            this.clearFeatureEmphasis(trigger);\n        }\n        if (!result || !result.data.geometry) {\n            return;\n        }\n        const myOlFeature = featureToOl(result.data, this.map.projection);\n        const olGeometry = myOlFeature.getGeometry();\n        if (featuresAreTooDeepInView(this.map, olGeometry.getExtent(), 0.0025)) {\n            const extent = olGeometry.getExtent();\n            const x = extent[0] + (extent[2] - extent[0]) / 2;\n            const y = extent[1] + (extent[3] - extent[1]) / 2;\n            const feature1 = new olFeature({\n                name: `${trigger}AbstractResult'`,\n                geometry: new olPoint([x, y])\n            });\n            const abstractResult = featureFromOl(feature1, this.map.projection);\n            let computedStyle;\n            let zIndexOffset = 0;\n            switch (trigger) {\n                case 'focused':\n                    computedStyle = getCommonVectorSelectedStyle(Object.assign({}, { feature: abstractResult }, this.searchState.searchOverlayStyleFocus, ((_a = result.style) === null || _a === void 0 ? void 0 : _a.focus) ? result.style.focus : {}));\n                    zIndexOffset = 2;\n                    break;\n                case 'shown':\n                    computedStyle = getCommonVectorStyle(Object.assign({}, { feature: abstractResult }, this.searchState.searchOverlayStyle, ((_b = result.style) === null || _b === void 0 ? void 0 : _b.base) ? result.style.base : {}));\n                    break;\n                case 'selected':\n                    computedStyle = getCommonVectorSelectedStyle(Object.assign({}, { feature: abstractResult }, this.searchState.searchOverlayStyleSelection, ((_c = result.style) === null || _c === void 0 ? void 0 : _c.selection) ? result.style.selection : {}));\n                    zIndexOffset = 1;\n                    break;\n            }\n            abstractResult.meta.style = computedStyle;\n            abstractResult.meta.style.setZIndex(2000 + zIndexOffset);\n            this.map.searchResultsOverlay.addFeature(abstractResult, FeatureMotion.None);\n            if (trigger === 'focused') {\n                this.abstractFocusedResult = abstractResult;\n            }\n            if (trigger === 'selected') {\n                this.abstractSelectedResult = abstractResult;\n            }\n            if (trigger === 'shown') {\n                this.shownResultsEmphasisGeometries.push(abstractResult);\n            }\n        }\n        else {\n            this.clearFeatureEmphasis(trigger);\n        }\n    }\n    clearFeatureEmphasis(trigger) {\n        if (trigger === 'focused' && this.abstractFocusedResult) {\n            this.map.searchResultsOverlay.removeFeature(this.abstractFocusedResult);\n            this.abstractFocusedResult = undefined;\n        }\n        if (trigger === 'selected' && this.abstractSelectedResult) {\n            this.map.searchResultsOverlay.removeFeature(this.abstractSelectedResult);\n            this.abstractSelectedResult = undefined;\n        }\n        if (trigger === 'shown') {\n            this.shownResultsEmphasisGeometries.map(shownResult => this.map.searchResultsOverlay.removeFeature(shownResult));\n            this.shownResultsEmphasisGeometries = [];\n        }\n    }\n    ngOnDestroy() {\n        this.topPanelState$$.unsubscribe();\n        this.searchTerm$$.unsubscribe();\n        if (this.isSelectedResultOutOfView$$) {\n            this.isSelectedResultOutOfView$$.unsubscribe();\n        }\n        if (this.showResultsGeometries$$) {\n            this.showResultsGeometries$$.unsubscribe();\n        }\n    }\n    /**\n     * Try to add a feature to the map when it's being focused\n     * @internal\n     * @param result A search result that could be a feature\n     */\n    onResultFocus(result) {\n        var _a;\n        this.focusedResult$.next(result);\n        if (result.meta.dataType === FEATURE && result.data.geometry) {\n            result.data.meta.style = getCommonVectorSelectedStyle(Object.assign({}, { feature: result.data }, this.searchState.searchOverlayStyleFocus, ((_a = result.style) === null || _a === void 0 ? void 0 : _a.focus) ? result.style.focus : {}));\n            const feature = this.map.searchResultsOverlay.dataSource.ol.getFeatureById(result.meta.id);\n            if (feature) {\n                feature.setStyle(result.data.meta.style);\n                return;\n            }\n            this.map.searchResultsOverlay.addFeature(result.data, FeatureMotion.None);\n        }\n    }\n    onResultUnfocus(result) {\n        var _a;\n        this.focusedResult$.next(undefined);\n        if (result.meta.dataType !== FEATURE) {\n            return;\n        }\n        if (this.store.state.get(result).selected === true) {\n            const feature = this.map.searchResultsOverlay.dataSource.ol.getFeatureById(result.meta.id);\n            if (feature) {\n                const style = getCommonVectorSelectedStyle(Object.assign({}, { feature: result.data }, this.searchState.searchOverlayStyleSelection, ((_a = result.style) === null || _a === void 0 ? void 0 : _a.selection) ? result.style.selection : {}));\n                feature.setStyle(style);\n            }\n            return;\n        }\n        this.map.searchResultsOverlay.removeFeature(result.data);\n    }\n    /**\n     * Try to add a feature to the map when it's being selected\n     * @internal\n     * @param result A search result that could be a feature or some layer options\n     */\n    onResultSelect(result) {\n        this.map.searchResultsOverlay.dataSource.ol.clear();\n        this.tryAddFeatureToMap(result);\n        this.searchState.setSelectedResult(result);\n        if (this.topPanelState === 'expanded') {\n            const igoList = this.computeElementRef()[0];\n            const selected = this.computeElementRef()[1];\n            setTimeout(() => {\n                // To be sure the flexible component has been displayed yet\n                if (!this.isScrolledIntoView(igoList, selected)) {\n                    this.adjustTopPanel(igoList, selected);\n                }\n            }, FlexibleComponent.transitionTime + 50);\n        }\n        if (this.topPanelState === 'initial') {\n            this.topPanelState = 'expanded';\n        }\n    }\n    onSearch(event) {\n        const results = event.results;\n        const newResults = this.store.entities$.value\n            .filter((result) => result.source !== event.research.source)\n            .concat(results);\n        this.store.load(newResults);\n        for (const res of this.store.all()) {\n            if (this.store.state.get(res).focused === true &&\n                this.store.state.get(res).selected !== true) {\n                this.store.state.update(res, { focused: false }, true);\n            }\n        }\n        setTimeout(() => {\n            const igoList = this.elRef.nativeElement.querySelector('igo-list');\n            let moreResults;\n            event.research.request.subscribe((source) => {\n                if (!source[0] || !source[0].source) {\n                    moreResults = null;\n                }\n                else if (source[0].source.getId() === 'icherche') {\n                    moreResults = igoList.querySelector('.icherche .moreResults');\n                }\n                else if (source[0].source.getId() === 'ilayer') {\n                    moreResults = igoList.querySelector('.ilayer .moreResults');\n                }\n                else if (source[0].source.getId() === 'nominatim') {\n                    moreResults = igoList.querySelector('.nominatim .moreResults');\n                }\n                else {\n                    moreResults = igoList.querySelector('.' + source[0].source.getId() + ' .moreResults');\n                }\n                if (moreResults !== null &&\n                    !this.isScrolledIntoView(igoList, moreResults)) {\n                    igoList.scrollTop =\n                        moreResults.offsetTop +\n                            moreResults.offsetHeight -\n                            igoList.clientHeight;\n                }\n            });\n        }, 250);\n    }\n    computeElementRef() {\n        const items = document.getElementsByTagName('igo-search-results-item');\n        const igoList = this.elRef.nativeElement.getElementsByTagName('igo-list')[0];\n        let selectedItem;\n        // tslint:disable-next-line\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].className.includes('igo-list-item-selected')) {\n                selectedItem = items[i];\n            }\n        }\n        return [igoList, selectedItem];\n    }\n    adjustTopPanel(elemSource, elem) {\n        if (!this.isScrolledIntoView(elemSource, elem)) {\n            elemSource.scrollTop =\n                elem.offsetTop +\n                    elem.children[0].offsetHeight -\n                    elemSource.clientHeight;\n        }\n    }\n    toggleTopPanel() {\n        if (this.topPanelState === 'expanded') {\n            this.topPanelState = 'collapsed';\n        }\n        else {\n            this.topPanelState = 'expanded';\n        }\n    }\n    zoomToFeatureExtent() {\n        if (this.feature.geometry) {\n            const localOlFeature = this.format.readFeature(this.feature, {\n                dataProjection: this.feature.projection,\n                featureProjection: this.map.projection\n            });\n            moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Zoom);\n        }\n    }\n    /**\n     * Try to add a feature to the map overlay\n     * @param result A search result that could be a feature\n     */\n    tryAddFeatureToMap(result) {\n        var _a;\n        if (result.meta.dataType !== FEATURE) {\n            return undefined;\n        }\n        const feature = result.data;\n        // Somethimes features have no geometry. It happens with some GetFeatureInfo\n        if (!feature.geometry) {\n            return;\n        }\n        feature.meta.style = getCommonVectorSelectedStyle(Object.assign({}, { feature }, this.searchState.searchOverlayStyleSelection, ((_a = result.style) === null || _a === void 0 ? void 0 : _a.selection) ? result.style.selection : {}));\n        this.map.searchResultsOverlay.addFeature(feature);\n    }\n    isScrolledIntoView(elemSource, elem) {\n        const padding = 6;\n        const docViewTop = elemSource.scrollTop;\n        const docViewBottom = docViewTop + elemSource.clientHeight;\n        const elemTop = elem.offsetTop;\n        const elemBottom = elemTop + elem.clientHeight + padding;\n        return elemBottom <= docViewBottom && elemTop >= docViewTop;\n    }\n    getRoute(features) {\n        this.toolState.toolbox.activateTool('directions');\n        this.directionState.stopsStore.clear();\n        this.directionState.setRouteFromFeatureDetail(true);\n        this.directionState.stopsStore.insertMany(features);\n    }\n};\nSearchResultsToolComponent.ɵfac = function SearchResultsToolComponent_Factory(t) { return new (t || SearchResultsToolComponent)(ɵɵdirectiveInject(MapState), ɵɵdirectiveInject(SearchState), ɵɵdirectiveInject(ElementRef), ɵɵdirectiveInject(ToolState), ɵɵdirectiveInject(DirectionState), ɵɵdirectiveInject(ConfigService)); };\nSearchResultsToolComponent.ɵcmp = ɵɵdefineComponent({ type: SearchResultsToolComponent, selectors: [[\"igo-search-results-tool\"]], inputs: { showIcons: \"showIcons\", topPanelState: \"topPanelState\" }, decls: 3, vars: 4, consts: [[\"style\", \"margin: 10px;\", 4, \"ngIf\"], [\"initial\", \"100%\", \"initialMobile\", \"100%\", \"collapsed\", \"calc(100% - 58px)\", \"collapsedMobile\", \"calc(100% - 58px)\", \"expanded\", \"60%\", \"expandedMobile\", \"60%\", 3, \"state\", 4, \"ngIf\"], [2, \"margin\", \"10px\"], [1, \"mat-typography\"], [3, \"innerHTML\"], [\"initial\", \"100%\", \"initialMobile\", \"100%\", \"collapsed\", \"calc(100% - 58px)\", \"collapsedMobile\", \"calc(100% - 58px)\", \"expanded\", \"60%\", \"expandedMobile\", \"60%\", 3, \"state\"], [\"topPanel\", \"\"], [1, \"igo-content\"], [\"placeholder\", \"false\", 3, \"store\", \"showIcons\", \"term\", \"termSplitter\", \"settingsChange$\", \"resultFocus\", \"resultSelect\", \"resultUnfocus\", \"resultMouseenter\", \"resultMouseleave\", \"moreResults\"], [\"igoSearchItemToolbar\", \"\"], [\"igoFlexibleFill\", \"\", 1, \"igo-content\"], [3, \"title\", 4, \"ngIf\"], [3, \"map\", \"layer\"], [3, \"title\"], [\"mat-icon-button\", \"\", \"panelLeftButton\", \"\", 1, \"igo-icon-button\", 3, \"click\"], [3, \"svgIcon\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", \"class\", \"igo-icon-button\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"igoFeatureDetailsDirective\", \"\", 3, \"feature\", \"map\", \"toolbox\", \"routingEvent\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", \"matTooltipShowDelay\", \"500\", 1, \"igo-icon-button\", 3, \"matTooltip\", \"click\"], [\"matBadgeColor\", \"accent\", \"matBadgeSize\", \"small\", \"svgIcon\", \"magnify-plus-outline\", 3, \"matBadge\", \"matBadgeHidden\"]], template: function SearchResultsToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵtemplate(0, SearchResultsToolComponent_div_0_Template, 13, 11, \"div\", 0);\n        ɵɵtemplate(1, SearchResultsToolComponent_igo_flexible_1_Template, 10, 11, \"igo-flexible\", 1);\n        ɵɵpipe(2, \"async\");\n    } if (rf & 2) {\n        ɵɵproperty(\"ngIf\", !ctx.store || ctx.store.stateView.empty);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.store && !ɵɵpipeBind1(2, 2, ctx.store.stateView.empty$));\n    } }, directives: [NgIf, FlexibleComponent, SearchResultsComponent, SearchResultAddButtonComponent, PanelComponent, MatButton, MatIcon, FeatureDetailsComponent, FeatureDetailsDirective, MatTooltip, MatBadge], pipes: [AsyncPipe, TranslatePipe, SanitizeHtmlPipe], encapsulation: 2, changeDetection: 0 });\nSearchResultsToolComponent = __decorate([\n    ToolComponent({\n        name: 'searchResults',\n        title: 'igo.integration.tools.searchResults',\n        icon: 'magnify'\n    }),\n    __metadata(\"design:paramtypes\", [MapState,\n        SearchState,\n        ElementRef,\n        ToolState,\n        DirectionState,\n        ConfigService])\n], SearchResultsToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SearchResultsToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-results-tool',\n                templateUrl: './search-results-tool.component.html',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: MapState }, { type: SearchState }, { type: ElementRef }, { type: ToolState }, { type: DirectionState }, { type: ConfigService }]; }, { showIcons: [{\n            type: Input\n        }], topPanelState: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoAppSearchResultsToolModule {\n}\nIgoAppSearchResultsToolModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppSearchResultsToolModule });\nIgoAppSearchResultsToolModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppSearchResultsToolModule_Factory(t) { return new (t || IgoAppSearchResultsToolModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatBadgeModule,\n            MatTooltipModule,\n            MatButtonModule,\n            IgoLanguageModule,\n            IgoFeatureModule,\n            IgoSearchModule,\n            IgoFlexibleModule,\n            IgoPanelModule,\n            IgoFeatureDetailsModule,\n            IgoCustomHtmlModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppSearchResultsToolModule, { declarations: [SearchResultsToolComponent], imports: [CommonModule,\n        MatIconModule,\n        MatBadgeModule,\n        MatTooltipModule,\n        MatButtonModule,\n        IgoLanguageModule,\n        IgoFeatureModule,\n        IgoSearchModule,\n        IgoFlexibleModule,\n        IgoPanelModule,\n        IgoFeatureDetailsModule,\n        IgoCustomHtmlModule], exports: [SearchResultsToolComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppSearchResultsToolModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatBadgeModule,\n                    MatTooltipModule,\n                    MatButtonModule,\n                    IgoLanguageModule,\n                    IgoFeatureModule,\n                    IgoSearchModule,\n                    IgoFlexibleModule,\n                    IgoPanelModule,\n                    IgoFeatureDetailsModule,\n                    IgoCustomHtmlModule\n                ],\n                declarations: [SearchResultsToolComponent],\n                exports: [SearchResultsToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n\nclass IgoAppSearchModule {\n}\nIgoAppSearchModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppSearchModule });\nIgoAppSearchModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppSearchModule_Factory(t) { return new (t || IgoAppSearchModule)(); }, imports: [[], IgoAppSearchBarModule,\n        IgoAppSearchResultsToolModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppSearchModule, { exports: [IgoAppSearchBarModule,\n        IgoAppSearchResultsToolModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppSearchModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: [\n                    IgoAppSearchBarModule,\n                    IgoAppSearchResultsToolModule\n                ],\n            }]\n    }], null, null); })();\n\nlet OgcFilterToolComponent = class OgcFilterToolComponent {\n    constructor() { }\n};\nOgcFilterToolComponent.ɵfac = function OgcFilterToolComponent_Factory(t) { return new (t || OgcFilterToolComponent)(); };\nOgcFilterToolComponent.ɵcmp = ɵɵdefineComponent({ type: OgcFilterToolComponent, selectors: [[\"igo-ogc-filter-tool\"]], decls: 1, vars: 0, consts: [[\"igoOgcFilterableListBinding\", \"\"]], template: function OgcFilterToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"igo-ogc-filterable-list\", 0);\n    } }, directives: [OgcFilterableListComponent, OgcFilterableListBindingDirective], encapsulation: 2 });\nOgcFilterToolComponent = __decorate([\n    ToolComponent({\n        name: 'ogcFilter',\n        title: 'igo.integration.tools.ogcFilter',\n        icon: 'filter'\n    }),\n    __metadata(\"design:paramtypes\", [])\n], OgcFilterToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(OgcFilterToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filter-tool',\n                templateUrl: './ogc-filter-tool.component.html'\n            }]\n    }], function () { return []; }, null); })();\n\nlet TimeFilterToolComponent = class TimeFilterToolComponent {\n    constructor() { }\n};\nTimeFilterToolComponent.ɵfac = function TimeFilterToolComponent_Factory(t) { return new (t || TimeFilterToolComponent)(); };\nTimeFilterToolComponent.ɵcmp = ɵɵdefineComponent({ type: TimeFilterToolComponent, selectors: [[\"igo-time-filter-tool\"]], decls: 1, vars: 0, consts: [[\"igoTimeFilterListBinding\", \"\"]], template: function TimeFilterToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"igo-time-filter-list\", 0);\n    } }, directives: [TimeFilterListComponent, TimeFilterListBindingDirective], encapsulation: 2 });\nTimeFilterToolComponent = __decorate([\n    ToolComponent({\n        name: 'timeFilter',\n        title: 'igo.integration.tools.timeFilter',\n        icon: 'history'\n    }),\n    __metadata(\"design:paramtypes\", [])\n], TimeFilterToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(TimeFilterToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-time-filter-tool',\n                templateUrl: './time-filter-tool.component.html'\n            }]\n    }], function () { return []; }, null); })();\n\nfunction SpatialFilterToolComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementContainerStart(0);\n    ɵɵelement(1, \"igo-feature-details\", 3);\n    ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const feature_r1 = ctx.ngIf;\n    ɵɵadvance(1);\n    ɵɵproperty(\"feature\", feature_r1);\n} }\n/**\n * Tool to apply spatial filter\n */\nlet SpatialFilterToolComponent = class SpatialFilterToolComponent {\n    constructor(matIconRegistry, spatialFilterService, dataSourceService, layerService, mapState, messageService, languageService, importExportState, toolState, workspaceState, cdRef) {\n        this.matIconRegistry = matIconRegistry;\n        this.spatialFilterService = spatialFilterService;\n        this.dataSourceService = dataSourceService;\n        this.layerService = layerService;\n        this.mapState = mapState;\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.importExportState = importExportState;\n        this.toolState = toolState;\n        this.workspaceState = workspaceState;\n        this.cdRef = cdRef;\n        this.itemType = SpatialFilterItemType.Address;\n        this.layers = [];\n        this.activeLayers = [];\n        this.buffer = 0;\n        this.iterator = 1;\n        this.selectedFeature$ = new BehaviorSubject(undefined);\n        this.format = new olFormatGeoJSON();\n        this.store = new EntityStore([]); // Store to print results at the end\n        this.spatialListStore = new EntityStore([]);\n        this.loading = false;\n        this.thematicLength = 0;\n        this.measureUnit = MeasureLengthUnit.Meters;\n        this.unsubscribe$ = new Subject();\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    ngOnInit() {\n        for (const layer of this.map.layers) {\n            if (layer.title && layer.title.includes(this.languageService.translate.instant('igo.geo.spatialFilter.spatialFilter'))) {\n                this.layers.push(layer);\n            }\n        }\n    }\n    ngOnDestroy() {\n        this.unsubscribe$.next();\n        this.unsubscribe$.complete();\n    }\n    getOutputType(event) {\n        this.type = event;\n        this.queryType = undefined;\n    }\n    getOutputQueryType(event) {\n        this.queryType = event;\n        if (this.queryType) {\n            this.loadFilterList();\n        }\n    }\n    activateExportTool() {\n        const ids = [];\n        for (const layer of this.layers) {\n            ids.push(layer.id);\n        }\n        this.importExportState.setMode(ImportExportMode.export);\n        this.importExportState.setsExportOptions({ layers: ids });\n        this.toolState.toolbox.activateTool('importExport');\n    }\n    activateWorkspace() {\n        let layerToOpenWks;\n        this.workspaceState.store.entities$.pipe(takeUntil(this.unsubscribe$)).subscribe(() => {\n            if (this.activeLayers.length && this.workspaceState.store.all().length > 1) {\n                if (this.itemType === SpatialFilterItemType.Thematics) {\n                    for (const thematic of this.thematics) {\n                        if (!thematic.zeroResults) {\n                            layerToOpenWks = this.activeLayers.find(layer => layer.title.includes(thematic.name + ' ' + this.iterator.toString()));\n                            break;\n                        }\n                    }\n                }\n                else {\n                    const title = 'Adresses ' + this.iterator.toString();\n                    this.activeLayers.forEach((layer) => {\n                        if (layer.title.includes(title)) {\n                            layerToOpenWks = layer;\n                        }\n                    });\n                }\n                if (layerToOpenWks) {\n                    this.workspaceState.workspacePanelExpanded = true;\n                    this.workspaceState.setActiveWorkspaceById(layerToOpenWks.id);\n                }\n            }\n        });\n    }\n    loadFilterList() {\n        this.spatialFilterService\n            .loadFilterList(this.queryType)\n            .pipe(takeUntil(this.unsubscribe$))\n            .subscribe((features) => {\n            features.sort((a, b) => {\n                if (a.properties.nom < b.properties.nom) {\n                    return -1;\n                }\n                if (a.properties.nom > b.properties.nom) {\n                    return 1;\n                }\n                return 0;\n            });\n            this.spatialListStore.clear();\n            this.spatialListStore.load(features);\n        });\n    }\n    getOutputToggleSearch() {\n        this.loadThematics();\n    }\n    getOutputClearSearch() {\n        this.zone = undefined;\n        this.queryType = undefined;\n    }\n    clearMap() {\n        this.map.removeLayers(this.layers);\n        this.layers = [];\n        this.activeLayers = [];\n        this.thematicLength = 0;\n        this.iterator = 1;\n        if (this.type === SpatialFilterType.Predefined) {\n            this.zone = undefined;\n            this.queryType = undefined;\n        }\n    }\n    loadThematics() {\n        this.loading = true;\n        let zeroResults = true;\n        let thematics;\n        if (this.buffer === 0 || this.type === SpatialFilterType.Point) {\n            this.tryAddFeaturesToMap([this.zone]);\n        }\n        if (this.itemType !== SpatialFilterItemType.Thematics) {\n            const theme = {\n                name: ''\n            };\n            thematics = [theme];\n        }\n        else {\n            thematics = this.thematics;\n        }\n        if (this.measureUnit === MeasureLengthUnit.Kilometers && this.type !== SpatialFilterType.Point) {\n            this.buffer = this.buffer * 1000;\n        }\n        if (this.type === SpatialFilterType.Polygon) {\n            this.buffer = 0; // to avoid buffer enter a second time in terrAPI\n        }\n        const observables$ = [];\n        thematics.forEach(thematic => {\n            observables$.push(this.spatialFilterService\n                .loadFilterItem(this.zone, this.itemType, this.queryType, thematic, this.buffer)\n                .pipe(tap((features) => {\n                this.store.insertMany(features);\n                const featuresPoint = [];\n                const featuresLinePoly = [];\n                let idPoint;\n                let idLinePoly;\n                features.forEach(feature => {\n                    if (feature.geometry.type === 'Point') {\n                        feature.properties.longitude = feature.geometry.coordinates[0];\n                        feature.properties.latitude = feature.geometry.coordinates[1];\n                        featuresPoint.push(feature);\n                        idPoint = feature.meta.id;\n                    }\n                    else {\n                        featuresLinePoly.push(feature);\n                        idLinePoly = feature.meta.id;\n                    }\n                });\n                this.tryAddPointToMap(featuresPoint, idPoint);\n                this.tryAddLayerToMap(featuresLinePoly, idLinePoly);\n                if (features.length) {\n                    zeroResults = false;\n                    this.thematicLength += 1;\n                    thematic.zeroResults = false;\n                    this.cdRef.detectChanges();\n                }\n                else {\n                    thematic.zeroResults = true;\n                }\n                if (features.length >= 10000) {\n                    this.messageService.alert(this.languageService.translate.instant('igo.geo.spatialFilter.maxSizeAlert'), this.languageService.translate.instant('igo.geo.spatialFilter.warning'), { timeOut: 10000 });\n                }\n            })));\n        });\n        forkJoin(observables$).pipe(takeUntil(this.unsubscribe$)).subscribe(() => {\n            this.loading = false;\n            if (zeroResults) {\n                this.messageService.alert(this.languageService.translate.instant('igo.geo.spatialFilter.zeroResults'), this.languageService.translate.instant('igo.geo.spatialFilter.warning'), { timeOut: 10000 });\n            }\n        });\n    }\n    onZoneChange(feature, buffer) {\n        this.zone = feature;\n        if (feature) {\n            buffer ? this.tryAddFeaturesToMap([feature], true) : this.tryAddFeaturesToMap([feature]);\n            this.zoomToFeatureExtent(feature);\n        }\n    }\n    /**\n     * Try to add zone feature to the map overlay\n     */\n    tryAddFeaturesToMap(features, buffer) {\n        var _a, _b, _c, _d;\n        let i = 1;\n        for (const feature of features) {\n            if (this.type === SpatialFilterType.Predefined) {\n                for (const layer of this.layers) {\n                    if (layer.options._internal &&\n                        layer.options._internal.code === feature.properties.code &&\n                        !buffer) {\n                        if (!((_a = layer.title) === null || _a === void 0 ? void 0 : _a.startsWith('Zone'))) {\n                            const index = this.layers.indexOf(layer);\n                            this.layers.splice(index, 1);\n                        }\n                        return;\n                    }\n                    if ((_b = layer.title) === null || _b === void 0 ? void 0 : _b.startsWith('Zone')) {\n                        this.activeLayers = [];\n                        const index = this.layers.indexOf(layer);\n                        this.layers.splice(index, 1);\n                        this.map.removeLayer(layer);\n                    }\n                }\n            }\n            else {\n                if (buffer) {\n                    for (const layer of this.activeLayers) {\n                        if (this.activeLayers.length === 1 && ((_c = layer.title) === null || _c === void 0 ? void 0 : _c.startsWith('Zone'))) {\n                            const index = this.layers.indexOf(layer);\n                            this.layers.splice(index, 1);\n                            this.map.removeLayer(layer);\n                        }\n                    }\n                }\n                this.activeLayers = [];\n            }\n            for (const layer of this.layers) {\n                if ((_d = layer.title) === null || _d === void 0 ? void 0 : _d.startsWith('Zone')) {\n                    i++;\n                }\n            }\n            this.dataSourceService\n                .createAsyncDataSource({\n                type: 'vector',\n                queryable: true\n            })\n                .pipe(take(1))\n                .subscribe((dataSource) => {\n                const olLayer = this.layerService.createLayer({\n                    title: ('Zone ' + i + ' - ' + this.languageService.translate.instant('igo.geo.spatialFilter.spatialFilter')),\n                    workspace: { enabled: true },\n                    _internal: {\n                        code: this.type === SpatialFilterType.Predefined\n                            ? feature.properties.code\n                            : undefined\n                    },\n                    source: dataSource,\n                    visible: true,\n                    style: (_feature, resolution) => {\n                        const coordinates = features[0].coordinates;\n                        return new Style({\n                            image: new Circle({\n                                radius: coordinates\n                                    ? this.buffer /\n                                        Math.cos((Math.PI / 180) * coordinates[1]) /\n                                        resolution\n                                    : undefined,\n                                fill: new Fill({\n                                    color: 'rgba(200, 200, 20, 0.2)'\n                                }),\n                                stroke: new Stroke({\n                                    width: 1,\n                                    color: 'orange'\n                                })\n                            }),\n                            stroke: new Stroke({\n                                width: 1,\n                                color: 'orange'\n                            }),\n                            fill: new Fill({\n                                color: 'rgba(200, 200, 20, 0.2)'\n                            })\n                        });\n                    }\n                });\n                const featuresOl = features.map(f => {\n                    return featureToOl(f, this.map.projection);\n                });\n                if (this.type !== SpatialFilterType.Predefined) {\n                    const type = this.type === SpatialFilterType.Point ? 'Cercle' : 'Polygone';\n                    featuresOl[0].set('nom', 'Zone', true);\n                    featuresOl[0].set('type', type, true);\n                }\n                dataSource.ol.addFeatures(featuresOl);\n                this.map.addLayer(olLayer);\n                this.layers.push(olLayer);\n                this.activeLayers.push(olLayer);\n                this.cdRef.detectChanges();\n            });\n        }\n    }\n    /**\n     * Try to add point features to the map\n     * Necessary to create clusters\n     */\n    tryAddPointToMap(features, id) {\n        var _a;\n        let i = 1;\n        if (features.length) {\n            if (this.map === undefined) {\n                return;\n            }\n            for (const layer of this.layers) {\n                if ((_a = layer.title) === null || _a === void 0 ? void 0 : _a.startsWith(features[0].meta.title)) {\n                    i++;\n                }\n            }\n            this.dataSourceService\n                .createAsyncDataSource({\n                type: 'cluster',\n                id,\n                queryable: true,\n                distance: 120,\n                meta: {\n                    title: 'Cluster'\n                }\n            })\n                .pipe(take(1))\n                .subscribe((dataSource) => {\n                const icon = features[0].meta.icon;\n                let style;\n                if (!icon) {\n                    style = createOverlayMarkerStyle();\n                }\n                else {\n                    style = this.createSvgIcon(icon) || createOverlayMarkerStyle();\n                }\n                const olLayer = this.layerService.createLayer({\n                    title: (features[0].meta.title + ' ' + i + ' - ' + this.languageService.translate.instant('igo.geo.spatialFilter.spatialFilter')),\n                    source: dataSource,\n                    visible: true,\n                    style\n                });\n                const featuresOl = features.map(feature => {\n                    return featureToOl(feature, this.map.projection);\n                });\n                dataSource.ol.source.addFeatures(featuresOl);\n                if (this.layers.find(layer => layer.id === olLayer.id)) {\n                    this.map.removeLayer(this.layers.find(layer => layer.id === olLayer.id));\n                    i = i - 1;\n                    olLayer.title = (features[0].meta.title + ' ' + i + ' - ' + this.languageService.translate.instant('igo.geo.spatialFilter.spatialFilter'));\n                    olLayer.options.title = olLayer.title;\n                }\n                this.iterator = i;\n                this.map.addLayer(olLayer);\n                this.layers.push(olLayer);\n                this.pushLayer(olLayer);\n                this.cdRef.detectChanges();\n            });\n        }\n    }\n    createSvgIcon(icon) {\n        let style;\n        this.matIconRegistry.getNamedSvgIcon(icon).subscribe(svgObj => {\n            const xmlSerializer = new XMLSerializer();\n            svgObj.setAttribute('width', '30');\n            svgObj.setAttribute('height', '30');\n            svgObj.setAttribute('fill', 'rgba(0, 128, 255)');\n            svgObj.setAttribute('stroke', 'white');\n            const svg = xmlSerializer.serializeToString(svgObj);\n            style = new Style({\n                image: new Icon({\n                    src: 'data:image/svg+xml;utf8,' + svg\n                })\n            });\n        });\n        return style;\n    }\n    /**\n     * Try to add line or polygon features to the map\n     */\n    tryAddLayerToMap(features, id) {\n        var _a;\n        let i = 1;\n        if (features.length) {\n            if (this.map === undefined) {\n                return;\n            }\n            for (const layer of this.layers) {\n                if ((_a = layer.title) === null || _a === void 0 ? void 0 : _a.startsWith(features[0].meta.title)) {\n                    i++;\n                }\n            }\n            this.dataSourceService\n                .createAsyncDataSource({\n                type: 'vector',\n                id,\n                queryable: true\n            })\n                .pipe(take(1))\n                .subscribe((dataSource) => {\n                const olLayer = this.layerService.createLayer({\n                    title: (features[0].meta.title + ' ' + i + ' - ' + this.languageService.translate.instant('igo.geo.spatialFilter.spatialFilter')),\n                    source: dataSource,\n                    visible: true\n                });\n                const featuresOl = features.map(feature => {\n                    return featureToOl(feature, this.map.projection);\n                });\n                dataSource.ol.addFeatures(featuresOl);\n                if (this.layers.find(layer => layer.id === olLayer.id)) {\n                    this.map.removeLayer(this.layers.find(layer => layer.id === olLayer.id));\n                    i = i - 1;\n                    olLayer.title = (features[0].meta.title + ' ' + i + ' - ' + this.languageService.translate.instant('igo.geo.spatialFilter.spatialFilter'));\n                    olLayer.options.title = olLayer.title;\n                }\n                this.map.addLayer(olLayer);\n                this.layers.push(olLayer);\n                this.pushLayer(olLayer);\n                this.cdRef.detectChanges();\n            });\n        }\n    }\n    zoomToFeatureExtent(feature) {\n        if (feature) {\n            const olFeature = this.format.readFeature(feature, {\n                dataProjection: feature.projection,\n                featureProjection: this.map.projection\n            });\n            moveToOlFeatures(this.map, [olFeature], FeatureMotion.Zoom);\n        }\n    }\n    pushLayer(layer) {\n        for (const lay of this.activeLayers) {\n            if (lay.id === layer.id) {\n                return;\n            }\n        }\n        this.activeLayers.push(layer);\n    }\n};\nSpatialFilterToolComponent.ɵfac = function SpatialFilterToolComponent_Factory(t) { return new (t || SpatialFilterToolComponent)(ɵɵdirectiveInject(MatIconRegistry), ɵɵdirectiveInject(SpatialFilterService), ɵɵdirectiveInject(DataSourceService), ɵɵdirectiveInject(LayerService), ɵɵdirectiveInject(MapState), ɵɵdirectiveInject(MessageService), ɵɵdirectiveInject(LanguageService), ɵɵdirectiveInject(ImportExportState), ɵɵdirectiveInject(ToolState), ɵɵdirectiveInject(WorkspaceState), ɵɵdirectiveInject(ChangeDetectorRef)); };\nSpatialFilterToolComponent.ɵcmp = ɵɵdefineComponent({ type: SpatialFilterToolComponent, selectors: [[\"igo-spatial-filter-tool\"]], inputs: { type: \"type\", itemType: \"itemType\", freehandDrawIsActive: \"freehandDrawIsActive\" }, decls: 6, vars: 16, consts: [[3, \"store\", \"selectedQueryType\", \"zone\", \"layers\", \"eventType\", \"eventQueryType\", \"zoneChange\", \"zoneWithBufferChange\", \"bufferChange\", \"measureUnitChange\"], [3, \"type\", \"queryType\", \"map\", \"zone\", \"loading\", \"store\", \"layers\", \"allLayers\", \"thematicLength\", \"radiusEvent\", \"bufferEvent\", \"measureUnitChange\", \"freehandControl\", \"drawZoneEvent\", \"zoneWithBufferChange\", \"itemTypeChange\", \"thematicChange\", \"toggleSearch\", \"clearButtonEvent\", \"clearSearchEvent\", \"export\", \"openWorkspace\"], [4, \"ngIf\"], [3, \"feature\"]], template: function SpatialFilterToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"igo-panel\");\n        ɵɵelementStart(1, \"igo-spatial-filter-type\", 0);\n        ɵɵlistener(\"eventType\", function SpatialFilterToolComponent_Template_igo_spatial_filter_type_eventType_1_listener($event) { return ctx.getOutputType($event); })(\"eventQueryType\", function SpatialFilterToolComponent_Template_igo_spatial_filter_type_eventQueryType_1_listener($event) { return ctx.getOutputQueryType($event); })(\"zoneChange\", function SpatialFilterToolComponent_Template_igo_spatial_filter_type_zoneChange_1_listener($event) { return ctx.onZoneChange($event); })(\"zoneWithBufferChange\", function SpatialFilterToolComponent_Template_igo_spatial_filter_type_zoneWithBufferChange_1_listener($event) { return ctx.onZoneChange($event, true); })(\"bufferChange\", function SpatialFilterToolComponent_Template_igo_spatial_filter_type_bufferChange_1_listener($event) { return ctx.buffer = $event; })(\"measureUnitChange\", function SpatialFilterToolComponent_Template_igo_spatial_filter_type_measureUnitChange_1_listener($event) { return ctx.measureUnit = $event; });\n        ɵɵelementEnd();\n        ɵɵelementStart(2, \"igo-spatial-filter-item\", 1);\n        ɵɵlistener(\"radiusEvent\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_radiusEvent_2_listener($event) { return ctx.buffer = $event; })(\"bufferEvent\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_bufferEvent_2_listener($event) { return ctx.buffer = $event; })(\"measureUnitChange\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_measureUnitChange_2_listener($event) { return ctx.measureUnit = $event; })(\"freehandControl\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_freehandControl_2_listener($event) { return ctx.freehandDrawIsActive = $event; })(\"drawZoneEvent\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_drawZoneEvent_2_listener($event) { return ctx.zone = $event; })(\"zoneWithBufferChange\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_zoneWithBufferChange_2_listener($event) { return ctx.onZoneChange($event, true); })(\"itemTypeChange\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_itemTypeChange_2_listener($event) { return ctx.itemType = $event; })(\"thematicChange\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_thematicChange_2_listener($event) { return ctx.thematics = $event; })(\"toggleSearch\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_toggleSearch_2_listener() { return ctx.getOutputToggleSearch(); })(\"clearButtonEvent\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_clearButtonEvent_2_listener() { return ctx.clearMap(); })(\"clearSearchEvent\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_clearSearchEvent_2_listener() { return ctx.getOutputClearSearch(); })(\"export\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_export_2_listener() { return ctx.activateExportTool(); })(\"openWorkspace\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_openWorkspace_2_listener() { return ctx.activateWorkspace(); });\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n        ɵɵelementStart(3, \"igo-panel\");\n        ɵɵtemplate(4, SpatialFilterToolComponent_ng_container_4_Template, 2, 1, \"ng-container\", 2);\n        ɵɵpipe(5, \"async\");\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"store\", ctx.spatialListStore)(\"selectedQueryType\", ctx.queryType)(\"zone\", ctx.zone)(\"layers\", ctx.activeLayers);\n        ɵɵadvance(1);\n        ɵɵproperty(\"type\", ctx.type)(\"queryType\", ctx.queryType)(\"map\", ctx.map)(\"zone\", ctx.zone)(\"loading\", ctx.loading)(\"store\", ctx.store)(\"layers\", ctx.activeLayers)(\"allLayers\", ctx.layers)(\"thematicLength\", ctx.thematicLength);\n        ɵɵadvance(2);\n        ɵɵproperty(\"ngIf\", ɵɵpipeBind1(5, 14, ctx.selectedFeature$));\n    } }, directives: [SpatialFilterTypeComponent, SpatialFilterItemComponent, NgIf], pipes: [AsyncPipe], styles: [\"\"], changeDetection: 0 });\nSpatialFilterToolComponent = __decorate([\n    ToolComponent({\n        name: 'spatialFilter',\n        title: 'igo.integration.tools.spatialFilter',\n        icon: 'selection-marker'\n    })\n    /**\n     * Spatial Filter Type\n     */\n    ,\n    __metadata(\"design:paramtypes\", [MatIconRegistry,\n        SpatialFilterService,\n        DataSourceService,\n        LayerService,\n        MapState,\n        MessageService,\n        LanguageService,\n        ImportExportState,\n        ToolState,\n        WorkspaceState,\n        ChangeDetectorRef])\n], SpatialFilterToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(SpatialFilterToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-spatial-filter-tool',\n                templateUrl: './spatial-filter-tool.component.html',\n                styleUrls: ['./spatial-filter-tool.component.scss'],\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: MatIconRegistry }, { type: SpatialFilterService }, { type: DataSourceService }, { type: LayerService }, { type: MapState }, { type: MessageService }, { type: LanguageService }, { type: ImportExportState }, { type: ToolState }, { type: WorkspaceState }, { type: ChangeDetectorRef }]; }, { type: [{\n            type: Input\n        }], itemType: [{\n            type: Input\n        }], freehandDrawIsActive: [{\n            type: Input\n        }] }); })();\n\nfunction toolSlideInOut(speed = '300ms', type = 'ease-in-out') {\n    return trigger('toolSlideInOut', [\n        state('enter', style({\n            transform: 'translateX(100%)'\n        })),\n        transition('void => enter', animate(speed + ' ' + type))\n    ]);\n}\n\nlet ActiveTimeFilterToolComponent = class ActiveTimeFilterToolComponent {\n    constructor(mapState) {\n        this.mapState = mapState;\n        this.animate = 'enter';\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    get layer() {\n        for (const lay of this.map.layers) {\n            if (lay.options.active === true) {\n                return lay;\n            }\n        }\n        return;\n    }\n};\nActiveTimeFilterToolComponent.ɵfac = function ActiveTimeFilterToolComponent_Factory(t) { return new (t || ActiveTimeFilterToolComponent)(ɵɵdirectiveInject(MapState)); };\nActiveTimeFilterToolComponent.ɵcmp = ɵɵdefineComponent({ type: ActiveTimeFilterToolComponent, selectors: [[\"igo-active-time-filter-tool\"]], decls: 1, vars: 4, consts: [[3, \"map\", \"layer\", \"header\"]], template: function ActiveTimeFilterToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"igo-time-filter-item\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"map\", ctx.map)(\"layer\", ctx.layer)(\"header\", false)(\"@toolSlideInOut\", ctx.animate);\n    } }, directives: [TimeFilterItemComponent], encapsulation: 2, data: { animation: [toolSlideInOut()] } });\nActiveTimeFilterToolComponent = __decorate([\n    ToolComponent({\n        name: 'activeTimeFilter',\n        title: 'igo.integration.tools.timeFilter',\n        icon: 'history',\n        parent: 'mapTools'\n    }),\n    __metadata(\"design:paramtypes\", [MapState])\n], ActiveTimeFilterToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ActiveTimeFilterToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-active-time-filter-tool',\n                templateUrl: './active-time-filter-tool.component.html',\n                animations: [toolSlideInOut()]\n            }]\n    }], function () { return [{ type: MapState }]; }, null); })();\n\nfunction toolSlideInOut$1(speed = '300ms', type = 'ease-in-out') {\n    return trigger('toolSlideInOut', [\n        state('enter', style({\n            transform: 'translateX(100%)'\n        })),\n        transition('void => enter', animate(speed + ' ' + type))\n    ]);\n}\n\nlet ActiveOgcFilterToolComponent = class ActiveOgcFilterToolComponent {\n    constructor(mapState) {\n        this.mapState = mapState;\n        this.animate = 'enter';\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    get layer() {\n        for (const lay of this.map.layers) {\n            if (lay.options.active === true) {\n                return lay;\n            }\n        }\n        return;\n    }\n};\nActiveOgcFilterToolComponent.ɵfac = function ActiveOgcFilterToolComponent_Factory(t) { return new (t || ActiveOgcFilterToolComponent)(ɵɵdirectiveInject(MapState)); };\nActiveOgcFilterToolComponent.ɵcmp = ɵɵdefineComponent({ type: ActiveOgcFilterToolComponent, selectors: [[\"igo-active-ogc-filter-tool\"]], decls: 1, vars: 4, consts: [[3, \"map\", \"layer\", \"header\"]], template: function ActiveOgcFilterToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"igo-ogc-filterable-item\", 0);\n    } if (rf & 2) {\n        ɵɵproperty(\"map\", ctx.map)(\"layer\", ctx.layer)(\"header\", false)(\"@toolSlideInOut\", ctx.animate);\n    } }, directives: [OgcFilterableItemComponent], encapsulation: 2, data: { animation: [toolSlideInOut$1()] } });\nActiveOgcFilterToolComponent = __decorate([\n    ToolComponent({\n        name: 'activeOgcFilter',\n        title: 'igo.integration.tools.ogcFilter',\n        icon: 'filter',\n        parent: 'mapTools'\n    }),\n    __metadata(\"design:paramtypes\", [MapState])\n], ActiveOgcFilterToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ActiveOgcFilterToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-active-ogc-filter-tool',\n                templateUrl: './active-ogc-filter-tool.component.html',\n                animations: [toolSlideInOut$1()]\n            }]\n    }], function () { return [{ type: MapState }]; }, null); })();\n\nclass IgoAppFilterModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAppFilterModule,\n            providers: []\n        };\n    }\n}\nIgoAppFilterModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppFilterModule });\nIgoAppFilterModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppFilterModule_Factory(t) { return new (t || IgoAppFilterModule)(); }, imports: [[IgoFilterModule, IgoQueryModule, CommonModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppFilterModule, { declarations: [OgcFilterToolComponent,\n        ActiveOgcFilterToolComponent,\n        TimeFilterToolComponent,\n        ActiveTimeFilterToolComponent,\n        SpatialFilterToolComponent], imports: [IgoFilterModule, IgoQueryModule, CommonModule], exports: [OgcFilterToolComponent,\n        ActiveOgcFilterToolComponent,\n        TimeFilterToolComponent,\n        ActiveTimeFilterToolComponent,\n        SpatialFilterToolComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppFilterModule, [{\n        type: NgModule,\n        args: [{\n                imports: [IgoFilterModule, IgoQueryModule, CommonModule],\n                declarations: [\n                    OgcFilterToolComponent,\n                    ActiveOgcFilterToolComponent,\n                    TimeFilterToolComponent,\n                    ActiveTimeFilterToolComponent,\n                    SpatialFilterToolComponent\n                ],\n                exports: [\n                    OgcFilterToolComponent,\n                    ActiveOgcFilterToolComponent,\n                    TimeFilterToolComponent,\n                    ActiveTimeFilterToolComponent,\n                    SpatialFilterToolComponent\n                ],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n\nfunction AboutToolComponent_button_2_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 6);\n    ɵɵlistener(\"click\", function AboutToolComponent_button_2_Template_button_click_0_listener() { ɵɵrestoreView(_r5); const ctx_r4 = ɵɵnextContext(); return ctx_r4.openGuide(); });\n    ɵɵpipe(1, \"translate\");\n    ɵɵelementStart(2, \"span\");\n    ɵɵtext(3);\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelement(5, \"mat-icon\", 7);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵɵnextContext();\n    ɵɵproperty(\"disabled\", ctx_r0.loading)(\"matTooltip\", ɵɵpipeBind1(1, 3, \"igo.integration.aboutTool.trainingGuideTooltip\"));\n    ɵɵadvance(3);\n    ɵɵtextInterpolate(ɵɵpipeBind1(4, 5, \"igo.integration.aboutTool.trainingGuide\"));\n} }\nfunction AboutToolComponent_button_3_Template(rf, ctx) { if (rf & 1) {\n    ɵɵelementStart(0, \"button\", 8);\n    ɵɵpipe(1, \"translate\");\n    ɵɵelementStart(2, \"span\");\n    ɵɵtext(3);\n    ɵɵpipe(4, \"translate\");\n    ɵɵelementEnd();\n    ɵɵelement(5, \"mat-icon\", 7);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵɵnextContext();\n    const _r2 = ɵɵreference(5);\n    ɵɵproperty(\"disabled\", ctx_r1.loading)(\"matTooltip\", ɵɵpipeBind1(1, 4, \"igo.integration.aboutTool.trainingGuideTooltip\"))(\"matMenuTriggerFor\", _r2);\n    ɵɵadvance(3);\n    ɵɵtextInterpolate(ɵɵpipeBind1(4, 6, \"igo.integration.aboutTool.trainingGuide\"));\n} }\nfunction AboutToolComponent_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵɵgetCurrentView();\n    ɵɵelementStart(0, \"button\", 9);\n    ɵɵlistener(\"click\", function AboutToolComponent_button_6_Template_button_click_0_listener() { ɵɵrestoreView(_r8); const guide_r6 = ctx.$implicit; const ctx_r7 = ɵɵnextContext(); return ctx_r7.openGuide(guide_r6); });\n    ɵɵtext(1);\n    ɵɵelementEnd();\n} if (rf & 2) {\n    const guide_r6 = ctx.$implicit;\n    const ctx_r3 = ɵɵnextContext();\n    ɵɵadvance(1);\n    ɵɵtextInterpolate(ctx_r3.formatFileName(guide_r6));\n} }\nconst _c0$1 = function (a0) { return { version: a0 }; };\nlet AboutToolComponent = class AboutToolComponent {\n    constructor(configService, auth, http, cdRef) {\n        this.configService = configService;\n        this.auth = auth;\n        this.http = http;\n        this.cdRef = cdRef;\n        this._discoverTitleInLocale = 'IGO';\n        this.discoverTitleInLocale$ = of(this._discoverTitleInLocale);\n        this._html = 'igo.integration.aboutTool.html';\n        this.loading = false;\n        this.version = configService.getConfig('version');\n        this.baseUrlProfil = configService.getConfig('context.url') + '/user/igo?';\n        this.baseUrlGuide = configService.getConfig('depot.url') + '/projects/Documentation/files/';\n    }\n    get html() {\n        return this._html;\n    }\n    set html(value) {\n        this._html = Array.isArray(value) ? value.join('\\n') : value;\n    }\n    get discoverTitleInLocale() {\n        return this._discoverTitleInLocale;\n    }\n    set discoverTitleInLocale(value) {\n        this._discoverTitleInLocale = value;\n        this.discoverTitleInLocale$ = of(value);\n    }\n    ngOnInit() {\n        if (this.auth.authenticated && this.configService.getConfig('context.url')) {\n            this.http.get(this.baseUrlProfil).subscribe((profil) => {\n                const recast = profil;\n                this.trainingGuideURLs = recast.guides;\n                this.cdRef.detectChanges();\n            });\n        }\n        else if (this.auth.authenticated &&\n            !this.configService.getConfig('context.url') &&\n            this.configService.getConfig('depot.trainingGuides')) {\n            this.trainingGuideURLs = this.configService.getConfig('depot.trainingGuides');\n        }\n    }\n    openGuide(guide) {\n        this.loading = true;\n        const url = guide ?\n            this.baseUrlGuide + guide + '?' :\n            this.baseUrlGuide + this.trainingGuideURLs[0] + '?';\n        this.http\n            .get(url, {\n            responseType: 'blob'\n        })\n            .subscribe(() => {\n            this.loading = false;\n            window.open(url, '_blank');\n            this.cdRef.detectChanges();\n        });\n    }\n    formatFileName(name) {\n        name = name.split('_').join(' ');\n        const index = name.indexOf('.');\n        name = name.slice(0, index);\n        return name;\n    }\n};\nAboutToolComponent.ɵfac = function AboutToolComponent_Factory(t) { return new (t || AboutToolComponent)(ɵɵdirectiveInject(ConfigService), ɵɵdirectiveInject(AuthService), ɵɵdirectiveInject(HttpClient), ɵɵdirectiveInject(ChangeDetectorRef)); };\nAboutToolComponent.ɵcmp = ɵɵdefineComponent({ type: AboutToolComponent, selectors: [[\"igo-about-tool\"]], inputs: { html: \"html\", discoverTitleInLocale: \"discoverTitleInLocale\", trainingGuideURLs: \"trainingGuideURLs\" }, decls: 9, vars: 10, consts: [[\"mat-raised-button\", \"\", \"tourToStart\", \"global\", \"menuIsOpen\", \"true\", \"styleButton\", \"raised\", 3, \"discoverTitleInLocale$\"], [\"class\", \"training-guide-button\", \"mat-raised-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"class\", \"training-guide-button\", \"mat-raised-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matTooltip\", \"matMenuTriggerFor\", 4, \"ngIf\"], [\"menu\", \"matMenu\"], [\"mat-menu-item\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"mat-typography\", 3, \"html\"], [\"mat-raised-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"training-guide-button\", 3, \"disabled\", \"matTooltip\", \"click\"], [\"svgIcon\", \"file-document\"], [\"mat-raised-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"training-guide-button\", 3, \"disabled\", \"matTooltip\", \"matMenuTriggerFor\"], [\"mat-menu-item\", \"\", 3, \"click\"]], template: function AboutToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelement(0, \"p\");\n        ɵɵelement(1, \"igo-interactive-tour\", 0);\n        ɵɵtemplate(2, AboutToolComponent_button_2_Template, 6, 7, \"button\", 1);\n        ɵɵtemplate(3, AboutToolComponent_button_3_Template, 6, 8, \"button\", 2);\n        ɵɵelementStart(4, \"mat-menu\", null, 3);\n        ɵɵtemplate(6, AboutToolComponent_button_6_Template, 2, 1, \"button\", 4);\n        ɵɵelementEnd();\n        ɵɵelement(7, \"igo-custom-html\", 5);\n        ɵɵpipe(8, \"translate\");\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵproperty(\"discoverTitleInLocale$\", ctx.discoverTitleInLocale$);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.auth.authenticated && ctx.trainingGuideURLs && ctx.trainingGuideURLs.length === 1);\n        ɵɵadvance(1);\n        ɵɵproperty(\"ngIf\", ctx.auth.authenticated && ctx.trainingGuideURLs && ctx.trainingGuideURLs.length > 1);\n        ɵɵadvance(3);\n        ɵɵproperty(\"ngForOf\", ctx.trainingGuideURLs);\n        ɵɵadvance(1);\n        ɵɵproperty(\"html\", ɵɵpipeBind2(8, 5, ctx.html, ɵɵpureFunction1(8, _c0$1, ctx.version)));\n    } }, directives: [InteractiveTourComponent, NgIf, _MatMenu, NgForOf, CustomHtmlComponent, MatButton, MatTooltip, MatIcon, MatMenuTrigger, MatMenuItem], pipes: [TranslatePipe], styles: [\"igo-interactive-tour[_ngcontent-%COMP%]{margin-left:20px}.training-guide-button[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;margin-left:5px;padding:0 12px}\"] });\nAboutToolComponent = __decorate([\n    ToolComponent({\n        name: 'about',\n        title: 'igo.integration.tools.about',\n        icon: 'help-circle'\n    }),\n    __metadata(\"design:paramtypes\", [ConfigService,\n        AuthService,\n        HttpClient,\n        ChangeDetectorRef])\n], AboutToolComponent);\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AboutToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-about-tool',\n                templateUrl: './about-tool.component.html',\n                styleUrls: ['./about-tool.component.scss']\n            }]\n    }], function () { return [{ type: ConfigService }, { type: AuthService }, { type: HttpClient }, { type: ChangeDetectorRef }]; }, { html: [{\n            type: Input\n        }], discoverTitleInLocale: [{\n            type: Input\n        }], trainingGuideURLs: [{\n            type: Input\n        }] }); })();\n\nclass IgoAppAboutModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAppAboutModule,\n            providers: []\n        };\n    }\n}\nIgoAppAboutModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppAboutModule });\nIgoAppAboutModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppAboutModule_Factory(t) { return new (t || IgoAppAboutModule)(); }, imports: [[\n            IgoLanguageModule,\n            IgoCustomHtmlModule,\n            MatButtonModule,\n            MatTooltipModule,\n            MatIconModule,\n            MatMenuModule,\n            IgoInteractiveTourModule,\n            CommonModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoAppAboutModule, { declarations: [AboutToolComponent], imports: [IgoLanguageModule,\n        IgoCustomHtmlModule,\n        MatButtonModule,\n        MatTooltipModule,\n        MatIconModule,\n        MatMenuModule,\n        IgoInteractiveTourModule,\n        CommonModule], exports: [AboutToolComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppAboutModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    IgoLanguageModule,\n                    IgoCustomHtmlModule,\n                    MatButtonModule,\n                    MatTooltipModule,\n                    MatIconModule,\n                    MatMenuModule,\n                    IgoInteractiveTourModule,\n                    CommonModule\n                ],\n                declarations: [AboutToolComponent],\n                exports: [AboutToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n\nclass IgoAppStorageModule {\n}\nIgoAppStorageModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppStorageModule });\nIgoAppStorageModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppStorageModule_Factory(t) { return new (t || IgoAppStorageModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppStorageModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\nclass IgoIntegrationModule {\n}\nIgoIntegrationModule.ɵmod = ɵɵdefineNgModule({ type: IgoIntegrationModule });\nIgoIntegrationModule.ɵinj = ɵɵdefineInjector({ factory: function IgoIntegrationModule_Factory(t) { return new (t || IgoIntegrationModule)(); }, imports: [[], IgoAppStorageModule,\n        IgoAppAnalyticsModule,\n        IgoAppContextModule,\n        IgoAppCatalogModule,\n        IgoAppDirectionsModule,\n        IgoAppDrawModule,\n        IgoAppWorkspaceModule,\n        IgoAppImportExportModule,\n        IgoAppMapModule,\n        IgoAppMeasureModule,\n        IgoAppPrintModule,\n        IgoAppSearchModule,\n        IgoAppFilterModule,\n        IgoAppAboutModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(IgoIntegrationModule, { exports: [IgoAppStorageModule,\n        IgoAppAnalyticsModule,\n        IgoAppContextModule,\n        IgoAppCatalogModule,\n        IgoAppDirectionsModule,\n        IgoAppDrawModule,\n        IgoAppWorkspaceModule,\n        IgoAppImportExportModule,\n        IgoAppMapModule,\n        IgoAppMeasureModule,\n        IgoAppPrintModule,\n        IgoAppSearchModule,\n        IgoAppFilterModule,\n        IgoAppAboutModule] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoIntegrationModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: [\n                    IgoAppStorageModule,\n                    IgoAppAnalyticsModule,\n                    IgoAppContextModule,\n                    IgoAppCatalogModule,\n                    IgoAppDirectionsModule,\n                    IgoAppDrawModule,\n                    IgoAppWorkspaceModule,\n                    IgoAppImportExportModule,\n                    IgoAppMapModule,\n                    IgoAppMeasureModule,\n                    IgoAppPrintModule,\n                    IgoAppSearchModule,\n                    IgoAppFilterModule,\n                    IgoAppAboutModule\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoAppToolModule {\n}\nIgoAppToolModule.ɵmod = ɵɵdefineNgModule({ type: IgoAppToolModule });\nIgoAppToolModule.ɵinj = ɵɵdefineInjector({ factory: function IgoAppToolModule_Factory(t) { return new (t || IgoAppToolModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(IgoAppToolModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\n/**\n * Service that holds the state of the context module\n */\nclass ContextState {\n    constructor(contextService, toolService, toolState, languageService) {\n        this.contextService = contextService;\n        this.toolService = toolService;\n        this.toolState = toolState;\n        this.languageService = languageService;\n        /**\n         * Observable of the active context\n         */\n        this.context$ = new BehaviorSubject(undefined);\n        this.contextService.context$.subscribe((context) => {\n            this.onContextChange(context);\n        });\n        this.contextService.toolsChanged$.subscribe((context) => {\n            this.updateTools(context);\n        });\n    }\n    /**\n     * Set the active context\n     * @param context Detailed context\n     */\n    setContext(context) {\n        this.updateTools(context);\n        this.context$.next(context);\n    }\n    /**\n     * Update the tool state with the context's tools\n     * @param context Detailed context\n     */\n    updateTools(context) {\n        const toolbox = this.toolState.toolbox;\n        const tools = [];\n        const contextTools = context.tools || [];\n        contextTools.forEach((contextTool) => {\n            const baseTool = this.toolService.getTool(contextTool.name);\n            if (baseTool === undefined) {\n                return;\n            }\n            const options = Object.assign({}, baseTool.options || {}, contextTool.options || {});\n            const tool = Object.assign({}, baseTool, contextTool, { options });\n            tools.push(tool);\n        });\n        tools.forEach((tool) => {\n            if (tool.parent) {\n                const parentIndex = tools.findIndex((el) => el.name === tool.parent);\n                if (parentIndex !== -1) {\n                    tools[parentIndex].children = [];\n                    tools[parentIndex].children.push(tool.name);\n                }\n            }\n        });\n        toolbox.setTools(tools);\n        toolbox.setToolbar(context.toolbar || []);\n        // TODO: This is a patch so the context service can work without\n        // injecting the ToolState or without being completely refactored\n        this.contextService.setTools([].concat(tools));\n        this.contextService.setToolbar(context.toolbar || []);\n    }\n    /**\n     * Set a new context and update the tool state\n     * @param context Detailed context\n     */\n    onContextChange(context) {\n        if (context === undefined) {\n            return;\n        }\n        this.setContext(context);\n    }\n}\nContextState.ɵfac = function ContextState_Factory(t) { return new (t || ContextState)(ɵɵinject(ContextService), ɵɵinject(ToolService), ɵɵinject(ToolState), ɵɵinject(LanguageService)); };\nContextState.ɵprov = ɵɵdefineInjectable({ token: ContextState, factory: ContextState.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(ContextState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ContextService }, { type: ToolService }, { type: ToolState }, { type: LanguageService }]; }, null); })();\n\n/**\n * Service that holds the state of the search module\n */\nclass AnalyticsListenerService {\n    /**\n     * Toolbox that holds main tools\n     */\n    constructor(analyticsService, authService, contextState, searchState, toolState) {\n        this.analyticsService = analyticsService;\n        this.authService = authService;\n        this.contextState = contextState;\n        this.searchState = searchState;\n        this.toolState = toolState;\n    }\n    listen() {\n        this.listenUser();\n        this.listenContext();\n        this.listenTool();\n        this.listenSearch();\n    }\n    listenUser() {\n        this.authService.authenticate$.subscribe(() => {\n            const tokenDecoded = this.authService.decodeToken() || {};\n            if (tokenDecoded.user) {\n                this.authService\n                    .getProfils()\n                    .subscribe(profils => this.analyticsService.setUser(tokenDecoded.user, profils.profils));\n            }\n            else {\n                this.analyticsService.setUser();\n            }\n        });\n    }\n    listenContext() {\n        this.contextState.context$.subscribe(context => {\n            if (context) {\n                this.analyticsService.trackEvent('context', 'activateContext', context.id || context.uri);\n            }\n        });\n    }\n    listenTool() {\n        this.toolState.toolbox.activeTool$.pipe(skip(1)).subscribe(tool => {\n            if (tool) {\n                this.analyticsService.trackEvent('tool', 'activateTool', tool.name);\n            }\n        });\n    }\n    listenSearch() {\n        this.searchState.searchTerm$.pipe(skip(1)).subscribe((searchTerm) => {\n            if (searchTerm !== undefined && searchTerm !== null) {\n                this.analyticsService.trackSearch(searchTerm, this.searchState.store.count);\n            }\n        });\n    }\n}\nAnalyticsListenerService.ɵfac = function AnalyticsListenerService_Factory(t) { return new (t || AnalyticsListenerService)(ɵɵinject(AnalyticsService), ɵɵinject(AuthService), ɵɵinject(ContextState), ɵɵinject(SearchState), ɵɵinject(ToolState)); };\nAnalyticsListenerService.ɵprov = ɵɵdefineInjectable({ token: AnalyticsListenerService, factory: AnalyticsListenerService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(AnalyticsListenerService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: AnalyticsService }, { type: AuthService }, { type: ContextState }, { type: SearchState }, { type: ToolState }]; }, null); })();\n\n/**\n * Service that holds the state of the query module\n */\nclass QueryState {\n    constructor(configService) {\n        this.configService = configService;\n        /**\n         * Store that holds the query results\n         */\n        this.store = new EntityStore([]);\n        this.queryOverlayStyle = {};\n        this.queryOverlayStyleSelection = {};\n        this.queryOverlayStyleFocus = {};\n        const queryOverlayStyle = this.configService.getConfig('queryOverlayStyle');\n        if (queryOverlayStyle) {\n            this.queryOverlayStyle = queryOverlayStyle.base;\n            this.queryOverlayStyleSelection = queryOverlayStyle.selection;\n            this.queryOverlayStyleFocus = queryOverlayStyle.focus;\n        }\n    }\n}\nQueryState.ɵfac = function QueryState_Factory(t) { return new (t || QueryState)(ɵɵinject(ConfigService)); };\nQueryState.ɵprov = ɵɵdefineInjectable({ token: QueryState, factory: QueryState.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(QueryState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ConfigService }]; }, null); })();\n\n/*\n * Public API Surface of tools\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AboutToolComponent, ActiveOgcFilterToolComponent, ActiveTimeFilterToolComponent, AnalyticsListenerService, CatalogBrowserToolComponent, CatalogLibraryToolComponent, CatalogState, ContextEditorToolComponent, ContextManagerToolComponent, ContextPermissionManagerToolComponent, ContextShareToolComponent, ContextState, DirectionsToolComponent, DrawState, DrawingToolComponent, FeatureActionsService, IgoAppAboutModule, IgoAppAnalyticsModule, IgoAppCatalogBrowserToolModule, IgoAppCatalogLibraryToolModule, IgoAppCatalogModule, IgoAppContextModule, IgoAppDirectionsModule, IgoAppDrawModule, IgoAppFilterModule, IgoAppImportExportModule, IgoAppMapModule, IgoAppMeasureModule, IgoAppMeasurerToolModule, IgoAppPrintModule, IgoAppSearchBarModule, IgoAppSearchModule, IgoAppSearchResultsToolModule, IgoAppStorageModule, IgoAppToolModule, IgoAppWorkspaceModule, IgoIntegrationModule, ImportExportMode, ImportExportState, ImportExportToolComponent, ImportExportType, MapDetailsToolComponent, MapLegendToolComponent, MapState, MapToolComponent, MapToolsComponent, MeasureState, MeasurerToolComponent, OgcFilterToolComponent, PrintToolComponent, QueryState, SearchBarBindingDirective, SearchResultsToolComponent, SearchState, SpatialFilterToolComponent, StorageState, TimeFilterToolComponent, ToolState, WfsActionsService, WorkspaceButtonComponent, WorkspaceState };\n//# sourceMappingURL=igo2-integration.js.map\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Search</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: ConfigService, LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/search\">code of this example</a><br>\n    See search section of the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/environments\"> environment config</a>\n    <hr>\n    <br>\n    <span *ngIf=\"!isTouchScreen\" title=\"Details\">\n      F2 activate/deactivate the pointer location.\n    </span>\n  </mat-card-content>\n\n  <igo-map-browser #mapBrowser [map]=\"map\" [view]=\"view\" igoOverlay [igoContextMenu]=actionbarMenu\n\n    igoSearchPointerSummary\n    [igoSearchPointerSummaryDelay]=\"500\"\n    [igoSearchPointerSummaryEnabled]=\"igoSearchPointerSummaryEnabled\"\n    (menuPosition)=\"onContextMenuOpen($event)\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Search\">\n    <igo-search-bar\n      (pointerSummaryStatus)=\"onPointerSummaryStatusChange($event)\"\n      [searchSettings]=\"true\"\n      [store]=\"searchStore\"\n      [termSplitter]=\"termSplitter\"\n      (searchTermChange)=\"onSearchTermChange($event)\"\n      (search)=\"onSearch($event)\"\n      (clearFeature)=\"removeFeatureFromMap()\"\n      (searchSettingsChange)=\"onSearchSettingsChange()\">\n    </igo-search-bar>\n\n    <igo-search-results\n      [store]=\"searchStore\"\n      [term]=\"term\"\n      [termSplitter]=\"termSplitter\"\n      placeholder=\"false\"\n      [settingsChange$]=\"settingsChange$\"\n      (resultFocus)=\"onResultFocus($event)\"\n      (resultSelect)=\"onResultFocus($event)\"\n      (moreResults)=\"onSearch($event)\">\n        <ng-template #igoSearchItemToolbar let-result=\"result\">\n          <igo-search-add-button\n            [map]=\"map\"\n            [layer]=\"result\">\n          </igo-search-add-button>\n        </ng-template>\n    </igo-search-results>\n\n  </igo-panel>\n\n  <igo-panel *ngIf=\"selectedFeature\" title=\"Details\">\n    <igo-feature-details [feature]=\"selectedFeature\"></igo-feature-details>\n  </igo-panel>\n\n</mat-card>\n\n<ng-template #actionbarMenu>\n  <igo-actionbar\n    [store]=\"store\"\n    [withIcon]=\"false\"\n    [horizontal]=\"true\"\n    [mode]=\"'context'\">\n  </igo-actionbar>\n</ng-template>\n\n<igo-message-center></igo-message-center>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppSearchComponent } from './search.component';\n\nconst routes: Routes = [\n  {\n    path: 'search',\n    component: AppSearchComponent\n  }\n];\n\nexport const AppSearchRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { BehaviorSubject } from 'rxjs';\nimport {\n  Component,\n  ElementRef,\n  OnDestroy,\n  OnInit,\n  ViewChild\n} from '@angular/core';\nimport * as proj from 'ol/proj';\n\nimport { LanguageService, MediaService } from '@igo2/core';\nimport { EntityStore, ActionStore } from '@igo2/common';\nimport {\n  FEATURE,\n  Feature,\n  FeatureMotion,\n  GoogleLinks,\n  IgoMap,\n  LayerService,\n  MapService,\n  Layer,\n  ProjectionService,\n  Research,\n  SearchResult,\n  SearchService\n} from '@igo2/geo';\n\nimport { SearchState } from '@igo2/integration';\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.scss']\n})\nexport class AppSearchComponent implements OnInit, OnDestroy {\n  public store = new ActionStore([]);\n\n  public igoSearchPointerSummaryEnabled: boolean = false;\n\n  public termSplitter: string = '|';\n\n  public map = new IgoMap({\n    overlay: true,\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  public osmLayer: Layer;\n\n  @ViewChild('mapBrowser', { read: ElementRef, static: true }) mapBrowser: ElementRef;\n\n  public lonlat;\n  public mapProjection: string;\n  public term: string;\n\n  public settingsChange$ = new BehaviorSubject<boolean>(undefined);\n\n  get searchStore(): EntityStore<SearchResult> {\n    return this.searchState.store;\n  }\n\n  get isTouchScreen(): boolean {\n    return this.mediaService.isTouchScreen();\n  }\n\n  public selectedFeature: Feature;\n\n  constructor(\n    private languageService: LanguageService,\n    private projectionService: ProjectionService,\n    private mapService: MapService,\n    private layerService: LayerService,\n    private searchState: SearchState,\n    private searchService: SearchService,\n    private mediaService: MediaService\n  ) {\n    this.mapService.setMap(this.map);\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        sourceOptions: {\n          type: 'osm'\n        }\n      })\n      .subscribe(layer => {\n        this.osmLayer = layer;\n        this.map.addLayer(layer);\n      });\n  }\n\n  onPointerSummaryStatusChange(value) {\n    this.igoSearchPointerSummaryEnabled = value;\n  }\n\n  onSearchTermChange(term = '') {\n    this.term = term;\n    const termWithoutHashtag = term.replace(/(#[^\\s]*)/g, '').trim();\n    if (termWithoutHashtag.length < 2) {\n      this.searchStore.clear();\n      this.selectedFeature = undefined;\n    }\n  }\n\n  onSearch(event: { research: Research; results: SearchResult[] }) {\n    const results = event.results;\n    this.searchStore.state.updateAll({ focused: false, selected: false });\n    const newResults = this.searchStore.entities$.value\n      .filter((result: SearchResult) => result.source !== event.research.source)\n      .concat(results);\n    this.searchStore.updateMany(newResults);\n  }\n\n  onSearchSettingsChange() {\n    this.settingsChange$.next(true);\n  }\n\n  /**\n   * Try to add a feature to the map when it's being focused\n   * @internal\n   * @param result A search result that could be a feature\n   */\n  onResultFocus(result: SearchResult) {\n    this.tryAddFeatureToMap(result);\n    this.selectedFeature = (result as SearchResult<Feature>).data;\n  }\n\n  /**\n   * Try to add a feature to the map overlay\n   * @param layer A search result that could be a feature\n   */\n  private tryAddFeatureToMap(layer: SearchResult) {\n    if (layer.meta.dataType !== FEATURE) {\n      return undefined;\n    }\n\n    // Somethimes features have no geometry. It happens with some GetFeatureInfo\n    if (layer.data.geometry === undefined) {\n      return;\n    }\n\n    this.map.searchResultsOverlay.setFeatures(\n      [layer.data] as Feature[],\n      FeatureMotion.Default\n    );\n  }\n\n  ngOnInit() {\n    this.store.load([\n      {\n        id: 'coordinates',\n        title: 'coordinates',\n        handler: this.onSearchCoordinate.bind(this)\n      },\n      {\n        id: 'googleMaps',\n        title: 'googleMap',\n        handler: this.onOpenGoogleMaps.bind(this),\n        args: ['1']\n      },\n      {\n        id: 'googleStreetView',\n        title: 'googleStreetView',\n        handler: this.onOpenGoogleStreetView.bind(this)\n      }\n    ]);\n  }\n\n  ngOnDestroy() {\n    this.store.destroy();\n  }\n\n  /*\n   * Remove a feature to the map overlay\n   */\n  removeFeatureFromMap() {\n    this.map.searchResultsOverlay.clear();\n  }\n\n  onContextMenuOpen(event: { x: number; y: number }) {\n    const position = this.mapPosition(event);\n    const coord = this.mapService.getMap().ol.getCoordinateFromPixel(position);\n    this.mapProjection = this.mapService.getMap().projection;\n    this.lonlat = proj.transform(coord, this.mapProjection, 'EPSG:4326');\n  }\n\n  mapPosition(event: { x: number; y: number }) {\n    const contextmenuPoint = event;\n    contextmenuPoint.y =\n      contextmenuPoint.y -\n      this.mapBrowser.nativeElement.getBoundingClientRect().top +\n      window.scrollY;\n    contextmenuPoint.x =\n      contextmenuPoint.x -\n      this.mapBrowser.nativeElement.getBoundingClientRect().left +\n      window.scrollX;\n    const position = [contextmenuPoint.x, contextmenuPoint.y];\n    return position;\n  }\n\n  onPointerSearch(event) {\n    this.lonlat = event;\n    this.onSearchCoordinate();\n  }\n\n  onSearchCoordinate() {\n    this.searchStore.clear();\n    const results = this.searchService.reverseSearch(this.lonlat);\n\n    for (const i in results) {\n      if (results.length > 0) {\n        results[i].request.subscribe((_results: SearchResult<Feature>[]) => {\n          this.onSearch({ research: results[i], results: _results });\n        });\n      }\n    }\n  }\n\n  onOpenGoogleMaps() {\n    window.open(GoogleLinks.getGoogleMapsCoordLink(this.lonlat[0], this.lonlat[1]));\n  }\n\n  onOpenGoogleStreetView() {\n    window.open(\n      GoogleLinks.getGoogleStreetViewLink(this.lonlat[0], this.lonlat[1])\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoMessageModule } from '@igo2/core';\n\nimport {\n  IgoPanelModule,\n  IgoActionbarModule,\n  IgoContextMenuModule\n} from '@igo2/common';\n\nimport {\n  IgoFeatureModule,\n  IgoMapModule,\n  IgoSearchModule,\n  provideIChercheSearchSource,\n  provideILayerSearchSource,\n  provideNominatimSearchSource,\n  provideIChercheReverseSearchSource,\n  provideCoordinatesReverseSearchSource,\n  provideCadastreSearchSource,\n  provideStoredQueriesSearchSource,\n  provideStoredQueriesReverseSearchSource\n} from '@igo2/geo';\n\nimport { IgoAppSearchModule } from '@igo2/integration';\n\nimport { AppSearchComponent } from './search.component';\nimport { AppSearchRoutingModule } from './search-routing.module';\n\n@NgModule({\n  declarations: [AppSearchComponent],\n  imports: [\n    CommonModule,\n    AppSearchRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    MatTooltipModule,\n    IgoMessageModule.forRoot(),\n    IgoPanelModule,\n    IgoMapModule,\n    IgoSearchModule.forRoot(),\n    IgoAppSearchModule,\n    IgoActionbarModule,\n    IgoContextMenuModule,\n    IgoFeatureModule\n  ],\n  exports: [AppSearchComponent],\n  providers: [\n    provideCoordinatesReverseSearchSource(),\n    provideCadastreSearchSource(),\n    provideIChercheSearchSource(),\n    provideILayerSearchSource(),\n    provideNominatimSearchSource(),\n    provideIChercheReverseSearchSource(),\n    provideStoredQueriesSearchSource(),\n    provideStoredQueriesReverseSearchSource()\n  ]\n})\nexport class AppSearchModule {}\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport { IgoMap, LayerService } from '@igo2/geo';\n\n@Component({\n  selector: 'app-print',\n  templateUrl: './print.component.html',\n  styleUrls: ['./print.component.scss']\n})\nexport class AppPrintComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: false\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 9\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private layerService: LayerService\n  ) {\n    this.layerService\n      .createAsyncLayer({\n        title: 'Quebec Base Map',\n        sourceOptions: {\n          type: 'wmts',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/carto/wmts/1.0.0/wmts',\n          layer: 'carte_gouv_qc_ro',\n          matrixSet: 'EPSG_3857',\n          version: '1.3.0',\n          crossOrigin: 'anonymous',\n          attributions: \"© <a href='http://www.droitauteur.gouv.qc.ca/copyright.php' target='_blank'><img src='https://geoegl.msp.gouv.qc.ca/gouvouvert/public/images/quebec/gouv_qc_logo.png' width='64' height='14'>Gouvernement du Québec</a> / <a href='https://www.igouverte.org/' target='_blank'>IGO2</a>\"\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'School board',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n          params: {\n            LAYERS: 'MELS_CS_ANGLO_S',\n            VERSION: '1.3.0'\n          },\n          crossOrigin: 'anonymous'\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n    //\n    this.layerService\n      .createAsyncLayer({\n        title: 'Embacle',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n          params: {\n            LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n            VERSION: '1.3.0'\n          },\n          crossOrigin: 'anonymous'\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    // this.layerService\n    //   .createAsyncLayer({\n    //     title: 'Geomet',\n    //     sourceOptions: {\n    //       type: 'wms',\n    //       url: 'http://geo.weather.gc.ca/geomet/?lang=fr',\n    //       params: {\n    //         LAYERS: 'RADAR_1KM_RDBR',\n    //         VERSION: '1.3.0'\n    //       },\n    //       crossOrigin: 'anonymous'\n    //     }\n    //   })\n    //   .subscribe(l => this.map.addLayer(l));\n\n    /*\n        //CORS error if activate (for test)\n        this.layerService\n          .createAsyncLayer({\n            title: 'Geomet',\n            sourceOptions: {\n              type: 'wms',\n              url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq?service=wms',\n              params: {\n                layers: 'swtq',\n                version: '1.3.0',\n              }\n            }\n          })\n          .subscribe(l => this.map.addLayer(l));\n    */\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMessageModule } from '@igo2/core';\nimport { IgoMapModule, IgoPrintModule } from '@igo2/geo';\n\nimport { AppPrintComponent } from './print.component';\nimport { AppPrintRoutingModule } from './print-routing.module';\n\n@NgModule({\n  declarations: [AppPrintComponent],\n  imports: [\n    AppPrintRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoMessageModule,\n    IgoMapModule,\n    IgoPrintModule\n  ],\n  exports: [AppPrintComponent]\n})\nexport class AppPrintModule {}\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport { IgoMap, LayerService } from '@igo2/geo';\n\n@Component({\n  selector: 'app-import-export',\n  templateUrl: './import-export.component.html',\n  styleUrls: ['./import-export.component.scss']\n})\nexport class AppImportExportComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 9\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private layerService: LayerService\n  ) {\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        sourceOptions: {\n          type: 'osm'\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMessageModule } from '@igo2/core';\nimport {\n  IgoMapModule,\n  IgoImportExportModule,\n  provideStyleListOptions\n} from '@igo2/geo';\n\nimport { AppImportExportComponent } from './import-export.component';\nimport { AppImportExportRoutingModule } from './import-export-routing.module';\n\n@NgModule({\n  declarations: [AppImportExportComponent],\n  imports: [\n    AppImportExportRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoMessageModule,\n    IgoMapModule,\n    IgoImportExportModule\n  ],\n  exports: [AppImportExportComponent],\n  providers: [\n    provideStyleListOptions({\n      path: './assets/import-style.json'\n    })\n  ]\n})\nexport class AppImportExport {}\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  LayerService,\n  MapService,\n  FeatureStore,\n  Feature,\n  ProjectionService\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-directions',\n  templateUrl: './directions.component.html',\n  styleUrls: ['./directions.component.scss']\n})\nexport class AppDirectionsComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 9,\n    geolocate: true\n  };\n\n  public stopsStore = new FeatureStore<Feature>([], { map: this.map });\n  public routeStore = new FeatureStore<Feature>([], { map: this.map });\n\n  constructor(\n    private projectionService: ProjectionService,\n    private languageService: LanguageService,\n    private layerService: LayerService,\n    private mapService: MapService\n  ) {\n    this.mapService.setMap(this.map);\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        sourceOptions: {\n          type: 'osm'\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMessageModule } from '@igo2/core';\nimport {\n  IgoMapModule,\n  IgoDirectionsModule,\n  provideOsrmDirectionsSource\n} from '@igo2/geo';\n\nimport { AppDirectionsComponent } from './directions.component';\nimport { AppDirectionsRoutingModule } from './directions-routing.module';\n\n@NgModule({\n  declarations: [AppDirectionsComponent],\n  imports: [\n    AppDirectionsRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoMessageModule,\n    IgoMapModule,\n    IgoDirectionsModule\n  ],\n  exports: [AppDirectionsComponent],\n  providers: [provideOsrmDirectionsSource()]\n})\nexport class AppDirectionsModule {}\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  TimeFilterableDataSourceOptions,\n  TimeFilterType,\n  TimeFilterStyle\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-time-filter',\n  templateUrl: './time-filter.component.html',\n  styleUrls: ['./time-filter.component.scss']\n})\nexport class AppTimeFilterComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n\n    // const datasource: TimeFilterableDataSourceOptions = {\n    //   type: 'wms',\n    //   url: 'https://geoegl.msp.gouv.qc.ca/ws/igo_gouvouvert.fcgi',\n    //   params: {\n    //     layers: 'vg_observation_v_inondation_embacle_wmst',\n    //     version: '1.3.0'\n    //   },\n    //   timeFilterable: true,\n    //   timeFilter: {\n    //     min: '2017-01-01',\n    //     max: '2018-01-01',\n    //     range: true,\n    //     type: TimeFilterType.DATETIME,\n    //     style: TimeFilterStyle.SLIDER,\n    //     step: 86400000,\n    //     timeInterval: 2000\n    //   }\n    // };\n\n    const datasourceYear: TimeFilterableDataSourceOptions = {\n      type: 'wms',\n      url: 'https://geoegl.msp.gouv.qc.ca/ws/igo_gouvouvert.fcgi',\n      params: {\n        LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n        VERSION: '1.3.0'\n      },\n      timeFilterable: true,\n      timeFilter: {\n        min: '2013',\n        max: '2019',\n        range: false,\n        type: TimeFilterType.YEAR,\n        style: TimeFilterStyle.SLIDER,\n        step: 1,\n        timeInterval: 2000\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceYear)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle YEAR',\n            visible: true,\n            source: dataSource\n          })\n        );\n      });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule } from '@igo2/common';\nimport { IgoMapModule, IgoFilterModule } from '@igo2/geo';\n\nimport { AppTimeFilterComponent } from './time-filter.component';\nimport { AppTimeFilterRoutingModule } from './time-filter-routing.module';\n\n@NgModule({\n  declarations: [AppTimeFilterComponent],\n  imports: [\n    AppTimeFilterRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoFilterModule\n  ],\n  exports: [AppTimeFilterComponent]\n})\nexport class AppTimeFilterModule {}\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  WMSDataSourceOptions,\n  WFSDataSourceOptions,\n  WFSDataSourceOptionsParams,\n  OgcFilterableDataSourceOptions,\n  AnyBaseOgcFilterOptions,\n  OgcFilterOperatorType,\n  OgcFilterDuringOptions\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-ogc-filter',\n  templateUrl: './ogc-filter.component.html',\n  styleUrls: ['./ogc-filter.component.scss']\n})\nexport class AppOgcFilterComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n\n    interface WFSoptions\n      extends WFSDataSourceOptions,\n        OgcFilterableDataSourceOptions {}\n\n    const datasource: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'code_municipalite', alias: '# de la municipalitée' },\n        { name: 'date_observation', excludeFromOgcFilters: true },\n        { name: 'urgence', values: ['immédiate', 'inconnue'] }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters: {\n          logical: 'Or',\n          filters: [\n            {\n              operator: 'PropertyIsEqualTo',\n              propertyName: 'code_municipalite',\n              expression: '10043'\n            },\n            {\n              operator: 'Intersects',\n              geometryName: 'the_geom',\n              wkt_geometry: `MULTIPOLYGON(((\n              -8379441.158019895 5844447.897707146,\n              -8379441.158019895 5936172.331649357,\n              -8134842.66750733 5936172.331649357,\n              -8134842.66750733 5844447.897707146,\n              -8379441.158019895 5844447.897707146\n            ), (\n              -8015003 5942074,\n              -8015003 5780349,\n              -7792364 5780349,\n              -7792364 5942074,\n              -8015003 5942074\n            )))`\n            }\n          ] as AnyBaseOgcFilterOptions[]\n        }\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasource)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (PropertyIsEqualTo OR Intersects)',\n            source: dataSource,\n            style: {\n              circle : {\n                radius: 5,\n                fill: {\n                  color: 'white'\n                },\n                stroke: {\n                  color: 'orange',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n    const datasourceDuringFilter: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation',\n            begin: '2016-01-21T00:00:00-05:00',\n            end: '2016-01-26T00:00:00-05:00'\n          } as OgcFilterDuringOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2016-02-10T00:00:00-05:00',\n      stepDate: 'P2D'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilter)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (During, Step: P2D)',\n            id: '1',\n            source: dataSource,\n            style: {\n              circle: {\n                radius: 5,\n                fill: {\n                  color: 'white'\n                },\n                stroke: {\n                  color: 'red',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n\n    const datasourceDuringFilterTime: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'date_observation', alias: 'Date de l\\'observation', allowedOperatorsType: 'Time' as OgcFilterOperatorType }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation',\n            begin: '2016-01-01T04:00:00-05:00',\n            end: '2016-01-12T16:00:00-05:00'\n          } as OgcFilterDuringOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2016-02-14T20:00:00-05:00',\n      stepDate: 'PT4H'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTime)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (During, Step: PT4H)',\n            id: '2',\n            source: dataSource,\n            style: {\n              circle: {\n                radius: 5,\n                fill: {\n                  color: 'white'\n                },\n                stroke: {\n                  color: 'blue',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n    const datasourceDuringFilterTimeMonth: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'date_observation', alias: 'Date de l\\'observation', allowedOperatorsType: 'Time' as OgcFilterOperatorType }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation',\n            begin: '2016-01-01T00:00:00-05:00',\n            end: '2016-03-31T00:00:00-05:00',\n            displayFormat: 'MMMM'\n          } as OgcFilterDuringOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2018-12-31T00:00:00-05:00',\n      stepDate: 'P1M'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTimeMonth)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (During, Step: P1M)',\n            id: '3',\n            source: dataSource,\n            style: {\n              circle: {\n                radius: 5,\n                fill: {\n                  color: 'white'\n                },\n                stroke: {\n                  color: 'yellow',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n    const datasourceDuringFilterTimeYear: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'date_observation', alias: 'Date de l\\'observation', allowedOperatorsType: 'Time' as OgcFilterOperatorType }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation',\n            begin: '2014-01-01T00:00:00-05:00',\n            end: '2019-12-31T00:00:00-05:00',\n            sliderOptions: {\n              interval: 2000,\n              displayFormat: 'YY'\n            },\n            displayFormat: 'YYYY'\n          } as OgcFilterDuringOptions\n      },\n      minDate: '2014-01-01T00:00:00-05:00',\n      maxDate: '2019-12-31T00:00:00-05:00',\n      stepDate: 'P1Y'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTimeYear)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (During, Step: P1Y)',\n            id: '4',\n            source: dataSource,\n            style: {\n              circle: {\n                radius: 5,\n                fill: {\n                  color: 'white'\n                },\n                stroke: {\n                  color: 'green',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n    const datasourceDuringFilterTimeInterval: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'date_observation', alias: 'Date de l\\'observation', allowedOperatorsType: 'Time' as OgcFilterOperatorType }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation',\n            begin: 'today - 2 days', // \"now\" can also be used. Instead of midnight, the current time will be used\n            end: 'today', // \"now\" can also be used. Instead of midnight, the current time will be used\n          } as OgcFilterDuringOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2025-12-31T00:00:00-05:00',\n      stepDate: 'P1D'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTimeInterval)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (During, Interval from Now, Step: P1D)',\n            id: '5',\n            source: dataSource,\n            style: {\n              circle: {\n                radius: 5,\n                fill: {\n                  color: 'white'\n                },\n                stroke: {\n                  color: 'black',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n    const datasourceDuringFilterTimeRestrictedToStep: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'date_observation', alias: 'Date de l\\'observation', allowedOperatorsType: 'Time' as OgcFilterOperatorType }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation',\n            begin: '2019-01-01 00:00:00',\n            restrictToStep: true\n          } as OgcFilterDuringOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2025-12-31T00:00:00-05:00',\n      stepDate: 'P1M'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTimeRestrictedToStep)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (During, RestrictToStep, Step: P1M)',\n            id: '6',\n            source: dataSource,\n            style: {\n              circle: {\n                radius: 5,\n                fill: {\n                  color: 'black'\n                },\n                stroke: {\n                  color: 'red',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n    const wmsOgcFilterOptions: WMSoptions = {\n        type: 'wms',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n        optionsFromCapabilities: true,\n        params: {\n          LAYERS: 'vg_observation_v_inondation23avril2017_wmst',\n          VERSION: '1.3.0'\n        },\n        sourceFields: [\n          { name: 'date_observation', alias: 'Date de l\\'observation', allowedOperatorsType: 'Time' as OgcFilterOperatorType }\n        ],\n        ogcFilters: {\n          enabled: true,\n          editable: true,\n          filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation'\n          } as OgcFilterDuringOptions,\n          allowedOperatorsType: OgcFilterOperatorType.Time\n        }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wmsOgcFilterOptions)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Inondation (During, optionsFromCapabilities)',\n            source: dataSource\n          })\n        );\n      });\n\n    interface WMSoptions\n      extends WMSDataSourceOptions,\n        OgcFilterableDataSourceOptions {}\n\n    const filterableWMSwithPushButtons: WMSoptions = {\n      type: 'wms',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n      urlWfs: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n      params: {\n        LAYERS: 'radars_photos',\n        VERSION: '1.3.0'\n      },\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        pushButtons: {\n          selectorType: 'pushButton',\n          order: 2,\n          groups : [\n            {title: 'Nom du group1 - push', name: '1 - push', ids : ['id1']},\n          ],\n          bundles: [\n            {\n              id: 'id1',\n              title: 'Régions',\n              logical: 'Or',\n              vertical: true,\n              selectors: [\n                {\n                  title: 'Montréal & Laval',\n                  enabled: false,\n                  tooltip: 'Here a tooltip explaning ...',\n                  filters: {\n                    logical: 'Or',\n                    filters: [\n                      {\n                        operator: 'PropertyIsEqualTo',\n                        propertyName: 'region',\n                        expression: 'Montréal'\n                      },\n                      {\n                        operator: 'PropertyIsEqualTo',\n                        propertyName: 'region',\n                        expression: 'Laval'\n                      }\n                    ]\n                  }\n                },\n                {\n                  title: 'Outside Montréal & Laval',\n                  enabled: false,\n                  tooltip: 'Here a tooltip explaning ...',\n                  filters: {\n                    logical: 'And',\n                    filters: [\n                      {\n                        operator: 'PropertyIsNotEqualTo',\n                        propertyName: 'region',\n                        expression: 'Montréal'\n                      },\n                      {\n                        operator: 'PropertyIsNotEqualTo',\n                        propertyName: 'region',\n                        expression: 'Laval'\n                      }\n                    ]\n                  }\n                }\n              ]\n            }\n          ]\n        },\n        checkboxes: {\n          selectorType: 'checkbox',\n          order: 1,\n          groups : [\n            {title: 'Nom du group1 - checkbox', name: '1 - checkbox', ids : ['id1']},\n          ],\n          bundles: [\n            {\n              id: 'id1',\n              title: 'Type de radar photo',\n              logical: 'Or',\n              selectors: [\n                {\n                  title: 'Radar photo fixe',\n                  enabled: true,\n                  tooltip: 'Here a tooltip explaning ...',\n                  filters: {\n                    operator: 'PropertyIsEqualTo',\n                    propertyName: 'typeAppareil',\n                    expression: 'Radar photo fixe'\n                  }\n                },\n                {\n                  title: 'Radar photo mobile',\n                  enabled: false,\n                  tooltip: 'Here a tooltip explaning ...',\n                  filters: {\n                    operator: 'PropertyIsEqualTo',\n                    propertyName: 'typeAppareil',\n                    expression: 'Radar photo mobile'\n                  }\n                },\n                {\n                  title: 'Radar photo fixe + feu rouge',\n                  enabled: false,\n                  color: '0,200,0',\n                  tooltip: 'Here a tooltip explaning ...',\n                  filters: {\n                    operator: 'PropertyIsEqualTo',\n                    propertyName: 'typeAppareil',\n                    expression: 'Radar photo fixe et surveillance au feu rouge'\n                  }\n                },\n                {\n                  title: 'Radar feu rouge',\n                  enabled: false,\n                  color: '255,0,0',\n                  tooltip: 'Here a tooltip explaning ...',\n                  filters: {\n                    operator: 'PropertyIsEqualTo',\n                    propertyName: 'typeAppareil',\n                    expression: 'Appareil de surveillance au feu rouge'\n                  }\n                }\n              ]\n            }\n          ]\n        },\n        allowedOperatorsType: OgcFilterOperatorType.Basic\n        },\n      paramsWFS: {\n        featureTypes: 'radars_photos',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '1.1.0',\n        outputFormat: 'geojson',\n        outputFormatDownload: 'shp'\n      } as WFSDataSourceOptionsParams\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(filterableWMSwithPushButtons)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Filterable WMS layers with predefined filters (push buttons)',\n            source: dataSource\n          })\n        );\n      });\n\n    // const datasourceWmsWith2Layers: WMSoptions = {\n    //   type: 'wms',\n    //   url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n    //   urlWfs: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n    //   params: {\n    //     layers: 'stations_meteoroutieres,histo_stations_meteoroutieres',\n    //     version: '1.3.0'\n    //   },\n    //   ogcFilters: {\n    //     enabled: true,\n    //     editable: true\n    //   },\n    //   paramsWFS: {\n    //     featureTypes: 'histo_stations_meteoroutieres',\n    //     fieldNameGeometry: 'geometry',\n    //     maxFeatures: 10000,\n    //     version: '1.1.0',\n    //     outputFormat: 'geojson',\n    //     outputFormatDownload: 'shp'\n    //   } as WFSDataSourceOptionsParams\n    // };\n    //\n    // this.dataSourceService\n    //   .createAsyncDataSource(datasourceWmsWith2Layers)\n    //   .subscribe(dataSource => {\n    //     this.map.addLayer(\n    //       this.layerService.createLayer({\n    //         title: 'Layer build from 2 WMS layers',\n    //         source: dataSource\n    //       })\n    //     );\n    //   });\n\n    // const datasourceWms: WMSoptions = {\n    //   type: 'wms',\n    //   url: '/geoserver/wms',\n    //   urlWfs: '/geoserver/wfs',\n    //   params: {\n    //     LAYERS: 'water_areas',\n    //     VERSION: '1.3.0'\n    //   },\n    //   ogcFilters: {\n    //     enabled: true,\n    //     editable: true,\n    //     filters: {\n    //       operator: 'PropertyIsEqualTo',\n    //       propertyName: 'waterway',\n    //       expression: 'riverbank'\n    //     }\n    //   },\n    //   sourceFields: [\n    //     { name: 'waterway', alias: 'Chemin d eau' },\n    //     { name: 'osm_id' },\n    //     { name: 'landuse', values: ['yes', 'no'] }\n    //   ],\n    //   paramsWFS: {\n    //     featureTypes: 'water_areas',\n    //     fieldNameGeometry: 'the_geom',\n    //     maxFeatures: 10000,\n    //     version: '1.1.0',\n    //     outputFormat: 'application/json',\n    //     outputFormatDownload: 'application/vnd.google-earth.kml+xml'\n    //   } as WFSDataSourceOptionsParams\n    // };\n    //\n    // this.dataSourceService\n    //   .createAsyncDataSource(datasourceWms)\n    //   .subscribe(dataSource => {\n    //     this.map.addLayer(\n    //       this.layerService.createLayer({\n    //         title: 'Geoserver water_areas',\n    //         source: dataSource\n    //       })\n    //     );\n    //   });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule } from '@igo2/common';\nimport { IgoMapModule, IgoFilterModule } from '@igo2/geo';\n\nimport { AppOgcFilterComponent } from './ogc-filter.component';\nimport { AppOgcFilterRoutingModule } from './ogc-filter-routing.module';\n\n@NgModule({\n  declarations: [AppOgcFilterComponent],\n  imports: [\n    AppOgcFilterRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoFilterModule\n  ],\n  exports: [AppOgcFilterComponent]\n})\nexport class AppOgcFilterModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppPrintComponent } from './print.component';\n\nconst routes: Routes = [\n  {\n    path: 'print',\n    component: AppPrintComponent\n  }\n];\n\nexport const AppPrintRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Print</mat-card-title>\n  <mat-card-content>\n    <li>npm install --save html2canvas@1.0.0-alpha.12</li>\n    <li>npm install --save jspdf@1.4.1</li>\n    <li>npm install --save file-saver@1.3.8</li>\n    <li>npm install --save jszip@3.1.5</li>\n    <li>npm install --save stream@0.0.2</li>\n\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/print\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n    <igo-geolocate-button [map]=\"map\" color=\"primary\"></igo-geolocate-button>\n    <igo-rotation-button [map]=\"map\" [showIfNoRotation]=\"false\" color=\"primary\"></igo-rotation-button>\n  </igo-map-browser>\n\n  <igo-print [map]=\"map\"></igo-print>\n\n</mat-card>\n\n<igo-message-center></igo-message-center>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppImportExportComponent } from './import-export.component';\n\nconst routes: Routes = [\n  {\n    path: 'import-export',\n    component: AppImportExportComponent\n  }\n];\n\nexport const AppImportExportRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Import / Export</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/import-export\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-import-export [map]=\"map\"></igo-import-export>\n\n</mat-card>\n\n<igo-message-center></igo-message-center>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppDirectionsComponent } from './directions.component';\n\nconst routes: Routes = [\n  {\n    path: 'directions',\n    component: AppDirectionsComponent\n  }\n];\n\nexport const AppDirectionsRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Directions</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/directions\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n    <igo-geolocate-button [map]=\"map\" color=\"primary\"></igo-geolocate-button>\n    <igo-rotation-button [map]=\"map\" [showIfNoRotation]=\"false\" color=\"primary\"></igo-rotation-button>\n  </igo-map-browser>\n\n  <igo-directions-form [stopsStore]=\"stopsStore\" [routeStore]=\"routeStore\" [map]=\"map\"></igo-directions-form>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppTimeFilterComponent } from './time-filter.component';\n\nconst routes: Routes = [\n  {\n    path: 'time-filter',\n    component: AppTimeFilterComponent\n  }\n];\n\nexport const AppTimeFilterRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Time filter</mat-card-title>\n  <mat-card-content>\n    <li>npm install --save moment@2.22.2</li>\n    <li>npm install --save @mat-datetimepicker/core@3.0.0-beta.0</li>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/time-filter\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Layers\">\n    <igo-time-filter-list [layers]=\"map.layers\"></igo-time-filter-list>\n  </igo-panel>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppOgcFilterComponent } from './ogc-filter.component';\n\nconst routes: Routes = [\n  {\n    path: 'ogc-filter',\n    component: AppOgcFilterComponent\n  }\n];\n\nexport const AppOgcFilterRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Ogc filter</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/ogc-filter\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Layers\">\n    <igo-ogc-filterable-list [map]=\"map\" [layers]=\"map.layers\">\n\n    </igo-ogc-filterable-list>\n  </igo-panel>\n\n</mat-card>\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Spatial filter</mat-card-title>\n  <mat-card-content>\n    <li>npm install --save moment@2.22.2</li>\n    <li>npm install --save @mat-datetimepicker/core@3.0.0-beta.0</li>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/spatial-filter\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser\n    [map]=\"map\"\n    [view]=\"view\"\n    igoOverlay igoQuery\n    (query)=\"handleQueryResults($event)\"\n    [queryFeatures]=\"true\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Spatial Filter\">\n    <igo-spatial-filter-type\n      [store]=\"spatialListStore\"\n      [selectedQueryType]=\"queryType\"\n      [zone]=\"zone\"\n      (eventType)=\"getOutputType($event)\"\n      (eventQueryType)=\"getOutputQueryType($event)\"\n      (zoneChange)=\"onZoneChange($event)\">\n    </igo-spatial-filter-type>\n\n    <igo-spatial-filter-item\n      [type]=\"type\"\n      [queryType]=\"queryType\"\n      [map]=\"map\"\n      [zone]=\"zone\"\n      [loading]=\"loading\"\n      [store]=\"store\"\n      [layers]=\"layers\"\n      (radiusEvent)=\"radius = $event\"\n      (freehandControl)=\"freehandDrawIsActive = $event\"\n      (drawZoneEvent)=\"zone = $event\"\n      (itemTypeChange)=\"itemType = $event\"\n      (thematicChange)=\"thematics = $event\"\n      (toggleSearch)=\"getOutputToggleSearch()\"\n      (clearButtonEvent)=\"layers = $event\"\n      (clearSearchEvent)=\"getOutputClearSearch()\">\n    </igo-spatial-filter-item>\n  </igo-panel>\n\n  <igo-panel title=\"Details\">\n    <ng-container *ngIf=\"selectedFeature$ | async as feature\">\n      <igo-feature-details [feature]=\"feature\"></igo-feature-details>\n    </ng-container>\n  </igo-panel>\n\n  <igo-message-center></igo-message-center>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppSpatialFilterComponent } from './spatial-filter.component';\n\nconst routes: Routes = [\n  {\n    path: 'spatial-filter',\n    component: AppSpatialFilterComponent\n  }\n];\n\nexport const AppSpatialFilterRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, Input } from '@angular/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  Feature,\n  moveToOlFeatures,\n  FeatureMotion,\n  ClusterDataSource,\n  featureToOl,\n  DataSource,\n  QueryableDataSourceOptions,\n  Layer,\n  SpatialFilterService,\n  SpatialFilterQueryType,\n  SpatialFilterType,\n  SpatialFilterItemType,\n  SpatialFilterThematic\n} from '@igo2/geo';\nimport { MessageService, LanguageService } from '@igo2/core';\nimport { EntityStore } from '@igo2/common';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\nimport { BehaviorSubject } from 'rxjs';\nimport * as olstyle from 'ol/style';\n\n@Component({\n  selector: 'app-spatial-filter',\n  templateUrl: './spatial-filter.component.html',\n  styleUrls: ['./spatial-filter.component.scss']\n})\nexport class AppSpatialFilterComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  view = {\n    center: [-71.9, 46.9],\n    zoom: 10\n  };\n\n  @Input() type: SpatialFilterType;\n  @Input() itemType: SpatialFilterItemType = SpatialFilterItemType.Address;\n  @Input() freehandDrawIsActive: boolean;\n\n  public layers: Layer[] = [];\n\n  public queryType: SpatialFilterQueryType;\n  public thematics: SpatialFilterThematic[];\n  public zone: Feature;\n  public radius: number;\n\n  public selectedFeature$: BehaviorSubject<Feature> = new BehaviorSubject(\n    undefined\n  );\n\n  private format = new olFormatGeoJSON();\n\n  public store = new EntityStore<Feature>([]); // Store to print results at the end\n\n  public spatialListStore = new EntityStore<Feature>([]);\n\n  public loading = false;\n\n  constructor(\n    private spatialFilterService: SpatialFilterService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService,\n    private messageService: MessageService,\n    private languageService: LanguageService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource,\n            baseLayer: true,\n            visible: true\n          })\n        );\n      });\n  }\n\n  getOutputType(event: SpatialFilterType) {\n    this.type = event;\n    this.queryType = undefined;\n    this.radius = undefined;\n  }\n\n  getOutputQueryType(event: SpatialFilterQueryType) {\n    this.queryType = event;\n    if (this.queryType) {\n      this.loadFilterList();\n    }\n  }\n\n  private loadFilterList() {\n    this.spatialFilterService\n      .loadFilterList(this.queryType)\n      .subscribe((features: Feature[]) => {\n        features.sort((a, b) => {\n          if (a.properties.nom < b.properties.nom) {\n            return -1;\n          }\n          if (a.properties.nom > b.properties.nom) {\n            return 1;\n          }\n          return 0;\n        });\n        this.spatialListStore.clear();\n        this.spatialListStore.load(features);\n      });\n  }\n\n  getOutputToggleSearch() {\n    this.loadThematics();\n  }\n\n  getOutputClearSearch() {\n    this.zone = undefined;\n    this.queryType = undefined;\n  }\n\n  private loadThematics() {\n    this.loading = true;\n    this.tryAddFeaturesToMap([this.zone]);\n    if (!this.thematics) {\n      const theme: SpatialFilterThematic = {\n        name: ''\n      };\n      this.thematics = [theme];\n    }\n    if (this.type === SpatialFilterType.Polygon) {\n      this.radius = undefined;\n    }\n    this.thematics.forEach(thematic => {\n      this.spatialFilterService\n        .loadFilterItem(\n          this.zone,\n          this.itemType,\n          this.queryType,\n          thematic,\n          this.radius\n        )\n        .subscribe((features: Feature[]) => {\n          this.store.insertMany(features);\n          const featuresPoint: Feature[] = [];\n          const featuresLinePoly: Feature[] = [];\n          let idPoint;\n          let idLinePoly;\n          features.forEach(feature => {\n            if (feature.geometry.type === 'Point') {\n              featuresPoint.push(feature);\n              idPoint = feature.meta.id;\n            } else {\n              featuresLinePoly.push(feature);\n              idLinePoly = feature.meta.id;\n            }\n          });\n          this.tryAddPointToMap(featuresPoint, idPoint);\n          this.tryAddLayerToMap(featuresLinePoly, idLinePoly);\n          this.loading = false;\n          if (features.length >= 10000) {\n            this.messageService.alert(\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.maxSizeAlert'\n              ),\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.warning'\n              ),\n              { timeOut: 10000 }\n            );\n          }\n          if (!features.length) {\n            this.messageService.alert(\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.zeroResults'\n              ),\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.warning'\n              ),\n              { timeOut: 10000 }\n            );\n          }\n        });\n    });\n  }\n\n  onZoneChange(feature: Feature) {\n    this.zone = feature;\n    if (feature) {\n      this.tryAddFeaturesToMap([feature]);\n      this.zoomToFeatureExtent(feature);\n    }\n  }\n\n  /**\n   * Try to add zone feature to the map overlay\n   */\n  public tryAddFeaturesToMap(features: Feature[]) {\n    let i = 1;\n    for (const feature of features) {\n      if (this.type === SpatialFilterType.Predefined) {\n        for (const layer of this.map.layers) {\n          if (\n            layer.options._internal &&\n            layer.options._internal.code === feature.properties.code\n          ) {\n            return;\n          }\n          if (layer.title.startsWith('Zone')) {\n            this.map.removeLayer(layer);\n          }\n        }\n      }\n      for (const layer of this.map.layers) {\n        if (layer.title.startsWith('Zone')) {\n          i++;\n        }\n      }\n      this.dataSourceService\n        .createAsyncDataSource({\n          type: 'vector',\n          queryable: true\n        } as QueryableDataSourceOptions)\n        .subscribe((dataSource: DataSource) => {\n          const olLayer = this.layerService.createLayer({\n            title: ('Zone ' + i) as string,\n            _internal: {\n              code:\n                this.type === SpatialFilterType.Predefined\n                  ? feature.properties.code\n                  : undefined\n            },\n            source: dataSource,\n            visible: true,\n            style: (_feature, resolution) => {\n              const coordinates = (features[0] as any).coordinates;\n              return new olstyle.Style({\n                image: new olstyle.Circle({\n                  radius: coordinates\n                    ? this.radius /\n                      Math.cos((Math.PI / 180) * coordinates[1]) /\n                      resolution\n                    : undefined,\n                  fill: new olstyle.Fill({\n                    color: 'rgba(200, 200, 20, 0.2)'\n                  }),\n                  stroke: new olstyle.Stroke({\n                    width: 1,\n                    color: 'orange'\n                  })\n                }),\n                stroke: new olstyle.Stroke({\n                  width: 1,\n                  color: 'orange'\n                }),\n                fill: new olstyle.Fill({\n                  color: 'rgba(200, 200, 20, 0.2)'\n                })\n              });\n            }\n          });\n          const featuresOl = features.map(f => {\n            return featureToOl(f, this.map.projection);\n          });\n          dataSource.ol.addFeatures(featuresOl);\n          this.map.addLayer(olLayer);\n          this.layers.push(olLayer);\n        });\n    }\n  }\n\n  /**\n   * Try to point features to the map\n   * Necessary to create clusters\n   */\n  private tryAddPointToMap(features: Feature[], id) {\n    let i = 1;\n    if (features.length >= 1) {\n      if (this.map === undefined) {\n        return;\n      }\n      for (const layer of this.map.layers) {\n        if (layer.title.startsWith(features[0].meta.title)) {\n          i++;\n        }\n      }\n      this.dataSourceService\n        .createAsyncDataSource({\n          type: 'cluster',\n          id,\n          queryable: true,\n          distance: 120,\n          meta: {\n            title: 'Cluster'\n          }\n        } as QueryableDataSourceOptions)\n        .subscribe((dataSource: ClusterDataSource) => {\n          const olLayer = this.layerService.createLayer({\n            title: (features[0].meta.title + ' ' + i) as string,\n            source: dataSource,\n            visible: true,\n            clusterParam: {\n              clusterRanges: [{ minRadius: 1, maxRadius: 5, style: {} }]\n            }\n          });\n          const featuresOl = features.map(feature => {\n            return featureToOl(feature, this.map.projection);\n          });\n          dataSource.ol.source.addFeatures(featuresOl);\n          if (this.map.layers.find(layer => layer.id === olLayer.id)) {\n            this.map.removeLayer(\n              this.map.layers.find(layer => layer.id === olLayer.id)\n            );\n            i = i - 1;\n            olLayer.title = (features[0].meta.title + ' ' + i) as string;\n            olLayer.options.title = olLayer.title;\n          }\n          this.map.addLayer(olLayer);\n          this.layers.push(olLayer);\n        });\n    }\n  }\n\n  /**\n   * Try to add line or polygon features to the map\n   */\n  private tryAddLayerToMap(features: Feature[], id) {\n    let i = 1;\n    if (features.length > 1) {\n      if (this.map === undefined) {\n        return;\n      }\n      for (const layer of this.map.layers) {\n        if (layer.title.startsWith(features[0].meta.title)) {\n          i++;\n        }\n      }\n      this.dataSourceService\n        .createAsyncDataSource({\n          type: 'vector',\n          id,\n          queryable: true\n        } as QueryableDataSourceOptions)\n        .subscribe((dataSource: DataSource) => {\n          const olLayer = this.layerService.createLayer({\n            title: (features[0].meta.title + ' ' + i) as string,\n            source: dataSource,\n            visible: true\n          });\n          const featuresOl = features.map(feature => {\n            return featureToOl(feature, this.map.projection);\n          });\n          dataSource.ol.addFeatures(featuresOl);\n          if (this.map.layers.find(layer => layer.id === olLayer.id)) {\n            this.map.removeLayer(\n              this.map.layers.find(layer => layer.id === olLayer.id)\n            );\n            i = i - 1;\n            olLayer.title = (features[0].meta.title + ' ' + i) as string;\n            olLayer.options.title = olLayer.title;\n          }\n          this.map.addLayer(olLayer);\n          this.layers.push(olLayer);\n        });\n    }\n  }\n\n  zoomToFeatureExtent(feature) {\n    if (feature) {\n      const olFeature = this.format.readFeature(feature, {\n        dataProjection: feature.projection,\n        featureProjection: this.map.projection\n      });\n      moveToOlFeatures(this.map, [olFeature], FeatureMotion.Zoom);\n    }\n  }\n\n  /**\n   * Permit the query action on one item result\n   */\n  handleQueryResults(results) {\n    const features: Feature[] = results.features;\n    let feature;\n    if (features.length) {\n      feature = features[0];\n    }\n    this.selectedFeature$.next(feature);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule, IgoFormModule } from '@igo2/common';\nimport { IgoMapModule, IgoFilterModule, IgoQueryModule, IgoFeatureModule, IgoFeatureDetailsModule } from '@igo2/geo';\nimport { IgoMessageModule } from '@igo2/core';\n\nimport { AppSpatialFilterComponent } from './spatial-filter.component';\nimport { AppSpatialFilterRoutingModule } from './spatial-filter-routing.module';\n\n@NgModule({\n  declarations: [AppSpatialFilterComponent],\n  imports: [\n    AppSpatialFilterRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoMessageModule,\n    IgoQueryModule,\n    IgoFeatureModule,\n    IgoFeatureDetailsModule,\n    IgoFilterModule,\n    IgoFormModule,\n    CommonModule\n  ],\n  exports: [AppSpatialFilterComponent]\n})\nexport class AppSpatialFilterModule {}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Workspace</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/workspace\">code of this example</a>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-workspace-selector\n    igoWorkspaceSelector\n    [store]=\"workspaceStore\"\n    [map]=\"map\">\n  </igo-workspace-selector>\n\n  <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\n    <igo-entity-table-paginator\n      *ngIf=\"workspace.inResolutionRange$ | async\"\n      [store]=\"workspace.entityStore\"\n      [paginatorOptions]=\"paginatorOptions\"\n      [entitySortChange$]=\"entitySortChange$\"\n      (paginatorChange)=\"paginatorChange($event)\">\n    </igo-entity-table-paginator>\n  </ng-container>\n\n  <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\n    <igo-actionbar\n      *ngIf=\"workspace.actionStore\"\n      [store]=\"workspace.actionStore\"\n      [horizontal]=\"true\"\n      [withToggleButton]=\"true\"\n      [withTitle]=\"true\"\n      [mode]=\"actionbarMode\">\n    </igo-actionbar>\n\n    <igo-entity-table\n      *ngIf=\"workspace.entityStore && workspace.meta && workspace.meta.tableTemplate && (workspace.inResolutionRange$ | async)\"\n      class=\"table-compact table-centered\"\n      [paginator]=\"workspacePaginator\"\n      [scrollBehavior]=\"scrollBehavior\"\n      [store]=\"workspace.entityStore\"\n      [template]=\"workspace.meta.tableTemplate\">\n    </igo-entity-table>\n    <mat-card-content\n    *ngIf=\"!(workspace.inResolutionRange$ | async)\">\n      No data available at this scale. Please zoom in. \n    </mat-card-content>\n\n    <igo-workspace-widget-outlet [workspace]=\"workspace\"></igo-workspace-widget-outlet>\n\n  </ng-container>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppWorkspaceComponent } from './workspace.component';\n\nconst routes: Routes = [\n  {\n    path: 'workspace',\n    component: AppWorkspaceComponent\n  }\n];\n\nexport const AppWorkspaceRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit } from '@angular/core';\n\nimport { Observable, BehaviorSubject } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  ActionbarMode,\n  EntityRecord,\n  EntityTableScrollBehavior,\n  Workspace,\n  WorkspaceStore,\n  EntityTablePaginatorOptions\n} from '@igo2/common';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  WFSDataSourceOptions\n} from '@igo2/geo';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { WorkspaceState } from '@igo2/integration';\n\n@Component({\n  selector: 'app-workspace',\n  templateUrl: './workspace.component.html',\n  styleUrls: ['./workspace.component.scss']\n})\nexport class AppWorkspaceComponent implements OnInit {\n\n  public workspacePaginator: MatPaginator;\n  entitySortChange$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  public paginatorOptions: EntityTablePaginatorOptions = {\n    pageSize: 5, // Number of items to display on a page.\n    pageSizeOptions: [1, 5, 10, 15, 30, 50, 100], // The set of provided page size options to display to the user.\n    showFirstLastButtons: true // Whether to show the first/last buttons UI to the user.\n  };\n\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-72, 47.2],\n    zoom: 5\n  };\n\n  get workspaceStore(): WorkspaceStore {\n    return this.workspaceState.store;\n  }\n\n  public selectedWorkspace$: Observable<Workspace>;\n\n  public actionbarMode = ActionbarMode.Overlay;\n\n  public scrollBehavior = EntityTableScrollBehavior.Instant;\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService,\n    public workspaceState: WorkspaceState,\n  ) {}\n\n  ngOnInit() {\n    this.selectedWorkspace$ = this.workspaceStore.stateView\n      .firstBy$(\n        (record: EntityRecord<Workspace>) => record.state.selected === true\n      )\n      .pipe(\n        map((record: EntityRecord<Workspace>) => {\n          const entity = record === undefined ? undefined : record.entity;\n          if (entity) {\n            // In fact, the download action is not fully functionnal into the igo2-lib demo\n            // The reason why it's has been remove is that this button trigger a tool (importExport)\n            // and this tool is not available in the igo2-lib demo.\n            // This is why it's has been removed frome the actions's list.\n            // Refer to the igo2 demo at https://infra-geo-ouverte.github.io/igo2/\n            entity.actionStore.view.filter((action) => {\n              return action.id !== 'wfsDownload';\n            });\n          }\n          return entity;\n\n        })\n      );\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n\n    // const wmsDataSourceOptions = {\n    //   type: 'wms',\n    //   url: 'https://ahocevar.com/geoserver/wms',\n    //   urlWfs: 'https://ahocevar.com/geoserver/wfs',\n    //   params: {\n    //     LAYERS: 'water_areas',\n    //     VERSION: '1.3.0'\n    //   },\n    //   paramsWFS: {\n    //     featureTypes: 'water_areas',\n    //     fieldNameGeometry: 'the_geom',\n    //     maxFeatures: 10000,\n    //     version: '1.1.0',\n    //     outputFormat: 'application/json',\n    //     outputFormatDownload: 'application/vnd.google-earth.kml+xml'\n    //   },\n    //   sourceFields: [\n    //     {name: 'waterway', alias: 'Chemin d eau'},\n    //     {name: 'osm_id'},\n    //     {name: 'landuse'}\n    //   ],\n    //   ogcFilters: {\n    //     enabled: true,\n    //     editable: true\n    //   },\n    //   serverType: 'geoserver'\n    // };\n    //\n    // this.dataSourceService\n    //   .createAsyncDataSource(wmsDataSourceOptions as OgcFilterableDataSourceOptions)\n    //   .subscribe(dataSource => {\n    //     const layer = {\n    //       optionsFromCapabilities: true,\n    //       title: 'WMS Geoserver filterable ',\n    //       visible: true,\n    //       source: dataSource\n    //     };\n    //     this.map.addLayer(this.layerService.createLayer(layer));\n    //   });\n\n    const wfsDataSourceOptions: WFSDataSourceOptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n      params: {\n        featureTypes: 'etablissement_mtq',\n        fieldNameGeometry: 'geometry',\n        version: '2.0.0',\n        outputFormat: 'geojson'\n      },\n      sourceFields: [\n        { name: 'idetablis', alias: 'ID' },\n        { name: 'nometablis', alias: 'Name' },\n        { name: 'typetablis', alias: 'Type' }\n      ]\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDataSourceOptions)\n      .subscribe(dataSource => {\n        const layer = {\n          title: 'Simple WFS ',\n          maxResolution: 3000,\n          visible: true,\n          source: dataSource\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n  }\n\n  paginatorChange(event: MatPaginator) {\n    this.workspacePaginator = event;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport {\n  IgoActionModule,\n  IgoEntityModule,\n  IgoWorkspaceModule,\n  IgoPanelModule\n} from '@igo2/common';\nimport {\n  IgoMapModule,\n  IgoGeoWorkspaceModule\n} from '@igo2/geo';\n\nimport { AppWorkspaceComponent } from './workspace.component';\nimport { AppWorkspaceRoutingModule } from './workspace-routing.module';\n\n@NgModule({\n  declarations: [AppWorkspaceComponent],\n  imports: [\n    CommonModule,\n    AppWorkspaceRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoActionModule,\n    IgoEntityModule,\n    IgoWorkspaceModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoGeoWorkspaceModule\n  ],\n  exports: [AppWorkspaceComponent]\n})\nexport class AppWorkspaceModule {}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Context</mat-card-title>\n  <mat-card-content>\n    <p>* Dependencies: LanguageService</p>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/context/context\">code of this example</a><br>\n    See <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/contexts\"> contexts</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser\n    igoMapContext\n    igoLayerContext\n    [map]=\"map\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n    <igo-geolocate-button [map]=\"map\" color=\"primary\"></igo-geolocate-button>\n    <igo-rotation-button [map]=\"map\" [showIfNoRotation]=\"true\" color=\"primary\"></igo-rotation-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Contexts list\">\n    <igo-context-list igoContextListBinding [map]=\"map\"></igo-context-list>\n  </igo-panel>\n\n  <igo-panel title=\"Layers\">\n    <igo-layer-list igoLayerListBinding [map]=\"map\">\n      <ng-template #igoLayerItemToolbar let-layer=\"layer\">\n        <igo-metadata-button [layer]=\"layer\"></igo-metadata-button>\n      </ng-template>\n    </igo-layer-list>\n  </igo-panel>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppContextComponent } from './context.component';\n\nconst routes: Routes = [\n  {\n    path: 'context',\n    component: AppContextComponent\n  }\n];\n\nexport const AppContextRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport { IgoMap, OverlayService, MapService } from '@igo2/geo';\n\n@Component({\n  selector: 'app-context',\n  templateUrl: './context.component.html',\n  styleUrls: ['./context.component.scss']\n})\nexport class AppContextComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 6\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private mapService: MapService,\n    private overlayService: OverlayService\n  ) {\n    this.mapService.setMap(this.map);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\nimport { HttpClientJsonpModule } from '@angular/common/http';\nimport { IgoPanelModule } from '@igo2/common';\nimport {\n  IgoMapModule,\n  IgoLayerModule,\n  IgoMetadataModule,\n  IgoOverlayModule,\n  IgoQueryModule,\n  IgoFeatureModule\n} from '@igo2/geo';\nimport { IgoContextManagerModule } from '@igo2/context';\n\nimport { AppContextComponent } from './context.component';\nimport { AppContextRoutingModule } from './context-routing.module';\n\n@NgModule({\n  declarations: [AppContextComponent],\n  imports: [\n    HttpClientJsonpModule,\n    AppContextRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoLayerModule,\n    IgoMetadataModule,\n    IgoOverlayModule,\n    IgoQueryModule,\n    IgoFeatureModule,\n    IgoContextManagerModule\n  ],\n  exports: [AppContextComponent]\n})\nexport class AppContextModule {}\n","import { BrowserModule, DomSanitizer } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NgModule } from '@angular/core';\nimport { HammerModule } from '@angular/platform-browser';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconRegistry, MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { AppHomeModule } from './core/home/home.module';\nimport { AppActivityModule } from './core/activity/activity.module';\nimport { AppConfigModule } from './core/config/config.module';\nimport { AppLanguageModule } from './core/language/language.module';\nimport { AppMediaModule } from './core/media/media.module';\nimport { AppMessageModule } from './core/message/message.module';\nimport { AppRequestModule } from './core/request/request.module';\n\nimport { AppActionModule } from './common/action/action.module';\nimport { AppDynamicComponentModule } from './common/dynamic-component/dynamic-component.module';\nimport { AppEntityTableModule } from './common/entity-table/entity-table.module';\nimport { AppEntitySelectorModule } from './common/entity-selector/entity-selector.module';\nimport { AppFormModule } from './common/form/form.module';\nimport { AppTableModule } from './common/table/table.module';\nimport { AppToolModule } from './common/tool/tool.module';\nimport { AppWidgetModule } from './common/widget/widget.module';\n\nimport { AppAuthFormModule } from './auth/auth-form/auth-form.module';\n\nimport { AppSimpleMapModule } from './geo/simple-map/simple-map.module';\nimport { AppLayerModule } from './geo/layer/layer.module';\nimport { AppLegendModule } from './geo/legend/legend.module';\nimport { AppOverlayModule } from './geo/overlay/overlay.module';\nimport { AppGeometryModule } from './geo/geometry/geometry.module';\nimport { AppFeatureModule } from './geo/feature/feature.module';\nimport { AppHoverModule } from './geo/hover/hover.module';\nimport { AppMeasureModule } from './geo/measure/measure.module';\nimport { AppDrawModule } from './geo/draw/draw.module';\nimport { AppQueryModule } from './geo/query/query.module';\nimport { AppCatalogModule } from './geo/catalog/catalog.module';\nimport { AppSearchModule } from './geo/search/search.module';\nimport { AppPrintModule } from './geo/print/print.module';\nimport { AppImportExport } from './geo/import-export/import-export.module';\nimport { AppDirectionsModule } from './geo/directions/directions.module';\nimport { AppTimeFilterModule } from './geo/time-filter/time-filter.module';\nimport { AppOgcFilterModule } from './geo/ogc-filter/ogc-filter.module';\nimport { AppSpatialFilterModule } from './geo/spatial-filter/spatial-filter.module';\nimport { AppWorkspaceModule } from './geo/workspace/workspace.module';\n\nimport { AppContextModule } from './context/context/context.module';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    MatSidenavModule,\n    MatToolbarModule,\n    MatButtonModule,\n    MatIconModule,\n    MatListModule,\n\n    AppHomeModule,\n    AppActivityModule,\n    AppConfigModule,\n    AppLanguageModule,\n    AppMediaModule,\n    AppMessageModule,\n    AppRequestModule,\n\n    AppActionModule,\n    AppDynamicComponentModule,\n    AppEntityTableModule,\n    AppEntitySelectorModule,\n    AppFormModule,\n    AppTableModule,\n    AppToolModule,\n    AppWidgetModule,\n\n    AppAuthFormModule,\n\n    AppSimpleMapModule,\n    AppLayerModule,\n    AppLegendModule,\n    AppOverlayModule,\n    AppGeometryModule,\n    AppFeatureModule,\n    AppHoverModule,\n    AppMeasureModule,\n    AppDrawModule,\n    AppQueryModule,\n    AppCatalogModule,\n    AppSearchModule,\n    AppPrintModule,\n    AppImportExport,\n    AppDirectionsModule,\n    AppTimeFilterModule,\n    AppOgcFilterModule,\n    AppSpatialFilterModule,\n    AppWorkspaceModule,\n\n    AppContextModule,\n\n    AppRoutingModule,\n\n    HammerModule\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {\n  constructor(matIconRegistry: MatIconRegistry, domSanitizer: DomSanitizer) {\n    matIconRegistry.addSvgIconSet(\n      domSanitizer.bypassSecurityTrustResourceUrl(\n        './assets/igo2/core/icons/mdi.svg'\n      )\n    );\n  }\n}\n","import { MediaMatcher } from '@angular/cdk/layout';\nimport {\n  ChangeDetectorRef,\n  Component,\n  OnDestroy,\n  Renderer2\n} from '@angular/core';\n\nimport { userAgent } from '@igo2/utils';\nimport { version } from '@igo2/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnDestroy {\n  mobileQuery: MediaQueryList;\n\n  public title = 'IGO';\n  public version = version;\n  private themeClass = 'deeppurple-theme';\n  private _mobileQueryListener: () => void;\n\n  constructor(\n    private changeDetectorRef: ChangeDetectorRef,\n    private media: MediaMatcher,\n    private renderer: Renderer2\n  ) {\n    this.mobileQuery = media.matchMedia('(max-width: 600px)');\n    this._mobileQueryListener = () => changeDetectorRef.detectChanges();\n    this.mobileQuery.addEventListener('change', this._mobileQueryListener);\n\n    this.renderer.addClass(document.body, this.themeClass);\n\n    this.detectOldBrowser();\n  }\n\n  ngOnDestroy(): void {\n    this.mobileQuery.removeEventListener('change', this._mobileQueryListener);\n  }\n\n  private detectOldBrowser() {\n    const oldBrowser = userAgent.satisfies({\n      ie: '<11',\n      chrome: '<64',\n      firefox: '<60'\n    });\n\n    if (oldBrowser) {\n      console.log('Very old browser ! ', userAgent.getBrowser());\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nconst routes: Routes = [\n  { path: '', redirectTo: '/home', pathMatch: 'full' },\n  { path: '**', redirectTo: '/home' }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, { useHash: true })],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule {}\n","<div class=\"example-container\" [class.example-is-mobile]=\"mobileQuery.matches\">\n  <mat-toolbar color=\"primary\" class=\"example-toolbar\">\n    <button mat-icon-button (click)=\"snav.toggle()\"><mat-icon svgIcon=\"menu\"></mat-icon></button>\n    <h1>{{title}}</h1>\n    <h5>{{version.lib}}</h5>\n  </mat-toolbar>\n\n  <mat-sidenav-container class=\"example-sidenav-container\" [style.marginTop.px]=\"mobileQuery.matches ? 56 : 0\">\n    <mat-sidenav #snav opened=\"true\" [mode]=\"mobileQuery.matches ? 'over' : 'side'\" [fixedInViewport]=\"mobileQuery.matches\" fixedTopGap=\"56\">\n      <mat-nav-list>\n        <a mat-list-item routerLink=\".\">Home</a>\n\n        <hr>\n\n        <a mat-list-item routerLink=\"activity\">Activity</a>\n        <a mat-list-item routerLink=\"config\">Config</a>\n        <a mat-list-item routerLink=\"language\">Language</a>\n        <a mat-list-item routerLink=\"media\">Media</a>\n        <a mat-list-item routerLink=\"message\">Message</a>\n        <a mat-list-item routerLink=\"request\">Request</a>\n\n        <hr>\n\n        <a mat-list-item routerLink=\"auth-form\">Authentification</a>\n\n        <hr>\n\n        <a mat-list-item routerLink=\"action\">Action</a>\n        <a mat-list-item routerLink=\"dynamic-component\">Dynamic Component</a>\n        <a mat-list-item routerLink=\"entity-table\">Entity Table</a>\n        <a mat-list-item routerLink=\"entity-selector\">Entity Selector</a>\n        <a mat-list-item routerLink=\"form\">Form</a>\n        <a mat-list-item routerLink=\"table\">Table</a>\n        <a mat-list-item routerLink=\"tool\">Tool</a>\n        <a mat-list-item routerLink=\"widget\">Widget</a>\n\n        <hr>\n\n        <a mat-list-item routerLink=\"simple-map\">Simple map</a>\n        <a mat-list-item routerLink=\"layer\">Layer</a>\n        <a mat-list-item routerLink=\"legend\">Legend</a>\n        <a mat-list-item routerLink=\"overlay\">Overlay</a>\n        <a mat-list-item routerLink=\"geometry\">Geometry</a>\n        <a mat-list-item routerLink=\"feature\">Feature</a>\n        <a mat-list-item routerLink=\"hover\">Hover</a>\n        <a mat-list-item routerLink=\"measure\">Measure</a>\n        <a mat-list-item routerLink=\"draw\">Draw</a>\n        <a mat-list-item routerLink=\"query\">Query</a>\n        <a mat-list-item routerLink=\"catalog\">Catalog</a>\n        <a mat-list-item routerLink=\"search\">Search</a>\n        <a mat-list-item routerLink=\"print\">Print</a>\n        <a mat-list-item routerLink=\"import-export\">Import/Export</a>\n        <a mat-list-item routerLink=\"directions\">Directions</a>\n        <a mat-list-item routerLink=\"time-filter\">Time filter</a>\n        <a mat-list-item routerLink=\"ogc-filter\">OGC filter</a>\n        <a mat-list-item routerLink=\"spatial-filter\">Spatial filter</a>\n        <a mat-list-item routerLink=\"workspace\">Workspace</a>\n\n        <hr>\n\n        <a mat-list-item routerLink=\"context\">Context</a>\n\n      </mat-nav-list>\n    </mat-sidenav>\n\n    <mat-sidenav-content>\n      <router-outlet></router-outlet>\n    </mat-sidenav-content>\n\n  </mat-sidenav-container>\n</div>\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nimport 'hammerjs';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n","var map = {\n\t\"./af\": \"K/tc\",\n\t\"./af.js\": \"K/tc\",\n\t\"./ar\": \"jnO4\",\n\t\"./ar-dz\": \"o1bE\",\n\t\"./ar-dz.js\": \"o1bE\",\n\t\"./ar-kw\": \"Qj4J\",\n\t\"./ar-kw.js\": \"Qj4J\",\n\t\"./ar-ly\": \"HP3h\",\n\t\"./ar-ly.js\": \"HP3h\",\n\t\"./ar-ma\": \"CoRJ\",\n\t\"./ar-ma.js\": \"CoRJ\",\n\t\"./ar-sa\": \"gjCT\",\n\t\"./ar-sa.js\": \"gjCT\",\n\t\"./ar-tn\": \"bYM6\",\n\t\"./ar-tn.js\": \"bYM6\",\n\t\"./ar.js\": \"jnO4\",\n\t\"./az\": \"SFxW\",\n\t\"./az.js\": \"SFxW\",\n\t\"./be\": \"H8ED\",\n\t\"./be.js\": \"H8ED\",\n\t\"./bg\": \"hKrs\",\n\t\"./bg.js\": \"hKrs\",\n\t\"./bm\": \"p/rL\",\n\t\"./bm.js\": \"p/rL\",\n\t\"./bn\": \"kEOa\",\n\t\"./bn-bd\": \"loYQ\",\n\t\"./bn-bd.js\": \"loYQ\",\n\t\"./bn.js\": \"kEOa\",\n\t\"./bo\": \"0mo+\",\n\t\"./bo.js\": \"0mo+\",\n\t\"./br\": \"aIdf\",\n\t\"./br.js\": \"aIdf\",\n\t\"./bs\": \"JVSJ\",\n\t\"./bs.js\": \"JVSJ\",\n\t\"./ca\": \"1xZ4\",\n\t\"./ca.js\": \"1xZ4\",\n\t\"./cs\": \"PA2r\",\n\t\"./cs.js\": \"PA2r\",\n\t\"./cv\": \"A+xa\",\n\t\"./cv.js\": \"A+xa\",\n\t\"./cy\": \"l5ep\",\n\t\"./cy.js\": \"l5ep\",\n\t\"./da\": \"DxQv\",\n\t\"./da.js\": \"DxQv\",\n\t\"./de\": \"tGlX\",\n\t\"./de-at\": \"s+uk\",\n\t\"./de-at.js\": \"s+uk\",\n\t\"./de-ch\": \"u3GI\",\n\t\"./de-ch.js\": \"u3GI\",\n\t\"./de.js\": \"tGlX\",\n\t\"./dv\": \"WYrj\",\n\t\"./dv.js\": \"WYrj\",\n\t\"./el\": \"jUeY\",\n\t\"./el.js\": \"jUeY\",\n\t\"./en-au\": \"Dmvi\",\n\t\"./en-au.js\": \"Dmvi\",\n\t\"./en-ca\": \"OIYi\",\n\t\"./en-ca.js\": \"OIYi\",\n\t\"./en-gb\": \"Oaa7\",\n\t\"./en-gb.js\": \"Oaa7\",\n\t\"./en-ie\": \"4dOw\",\n\t\"./en-ie.js\": \"4dOw\",\n\t\"./en-il\": \"czMo\",\n\t\"./en-il.js\": \"czMo\",\n\t\"./en-in\": \"7C5Q\",\n\t\"./en-in.js\": \"7C5Q\",\n\t\"./en-nz\": \"b1Dy\",\n\t\"./en-nz.js\": \"b1Dy\",\n\t\"./en-sg\": \"t+mt\",\n\t\"./en-sg.js\": \"t+mt\",\n\t\"./eo\": \"Zduo\",\n\t\"./eo.js\": \"Zduo\",\n\t\"./es\": \"iYuL\",\n\t\"./es-do\": \"CjzT\",\n\t\"./es-do.js\": \"CjzT\",\n\t\"./es-mx\": \"tbfe\",\n\t\"./es-mx.js\": \"tbfe\",\n\t\"./es-us\": \"Vclq\",\n\t\"./es-us.js\": \"Vclq\",\n\t\"./es.js\": \"iYuL\",\n\t\"./et\": \"7BjC\",\n\t\"./et.js\": \"7BjC\",\n\t\"./eu\": \"D/JM\",\n\t\"./eu.js\": \"D/JM\",\n\t\"./fa\": \"jfSC\",\n\t\"./fa.js\": \"jfSC\",\n\t\"./fi\": \"gekB\",\n\t\"./fi.js\": \"gekB\",\n\t\"./fil\": \"1ppg\",\n\t\"./fil.js\": \"1ppg\",\n\t\"./fo\": \"ByF4\",\n\t\"./fo.js\": \"ByF4\",\n\t\"./fr\": \"nyYc\",\n\t\"./fr-ca\": \"2fjn\",\n\t\"./fr-ca.js\": \"2fjn\",\n\t\"./fr-ch\": \"Dkky\",\n\t\"./fr-ch.js\": \"Dkky\",\n\t\"./fr.js\": \"nyYc\",\n\t\"./fy\": \"cRix\",\n\t\"./fy.js\": \"cRix\",\n\t\"./ga\": \"USCx\",\n\t\"./ga.js\": \"USCx\",\n\t\"./gd\": \"9rRi\",\n\t\"./gd.js\": \"9rRi\",\n\t\"./gl\": \"iEDd\",\n\t\"./gl.js\": \"iEDd\",\n\t\"./gom-deva\": \"qvJo\",\n\t\"./gom-deva.js\": \"qvJo\",\n\t\"./gom-latn\": \"DKr+\",\n\t\"./gom-latn.js\": \"DKr+\",\n\t\"./gu\": \"4MV3\",\n\t\"./gu.js\": \"4MV3\",\n\t\"./he\": \"x6pH\",\n\t\"./he.js\": \"x6pH\",\n\t\"./hi\": \"3E1r\",\n\t\"./hi.js\": \"3E1r\",\n\t\"./hr\": \"S6ln\",\n\t\"./hr.js\": \"S6ln\",\n\t\"./hu\": \"WxRl\",\n\t\"./hu.js\": \"WxRl\",\n\t\"./hy-am\": \"1rYy\",\n\t\"./hy-am.js\": \"1rYy\",\n\t\"./id\": \"UDhR\",\n\t\"./id.js\": \"UDhR\",\n\t\"./is\": \"BVg3\",\n\t\"./is.js\": \"BVg3\",\n\t\"./it\": \"bpih\",\n\t\"./it-ch\": \"bxKX\",\n\t\"./it-ch.js\": \"bxKX\",\n\t\"./it.js\": \"bpih\",\n\t\"./ja\": \"B55N\",\n\t\"./ja.js\": \"B55N\",\n\t\"./jv\": \"tUCv\",\n\t\"./jv.js\": \"tUCv\",\n\t\"./ka\": \"IBtZ\",\n\t\"./ka.js\": \"IBtZ\",\n\t\"./kk\": \"bXm7\",\n\t\"./kk.js\": \"bXm7\",\n\t\"./km\": \"6B0Y\",\n\t\"./km.js\": \"6B0Y\",\n\t\"./kn\": \"PpIw\",\n\t\"./kn.js\": \"PpIw\",\n\t\"./ko\": \"Ivi+\",\n\t\"./ko.js\": \"Ivi+\",\n\t\"./ku\": \"JCF/\",\n\t\"./ku.js\": \"JCF/\",\n\t\"./ky\": \"lgnt\",\n\t\"./ky.js\": \"lgnt\",\n\t\"./lb\": \"RAwQ\",\n\t\"./lb.js\": \"RAwQ\",\n\t\"./lo\": \"sp3z\",\n\t\"./lo.js\": \"sp3z\",\n\t\"./lt\": \"JvlW\",\n\t\"./lt.js\": \"JvlW\",\n\t\"./lv\": \"uXwI\",\n\t\"./lv.js\": \"uXwI\",\n\t\"./me\": \"KTz0\",\n\t\"./me.js\": \"KTz0\",\n\t\"./mi\": \"aIsn\",\n\t\"./mi.js\": \"aIsn\",\n\t\"./mk\": \"aQkU\",\n\t\"./mk.js\": \"aQkU\",\n\t\"./ml\": \"AvvY\",\n\t\"./ml.js\": \"AvvY\",\n\t\"./mn\": \"lYtQ\",\n\t\"./mn.js\": \"lYtQ\",\n\t\"./mr\": \"Ob0Z\",\n\t\"./mr.js\": \"Ob0Z\",\n\t\"./ms\": \"6+QB\",\n\t\"./ms-my\": \"ZAMP\",\n\t\"./ms-my.js\": \"ZAMP\",\n\t\"./ms.js\": \"6+QB\",\n\t\"./mt\": \"G0Uy\",\n\t\"./mt.js\": \"G0Uy\",\n\t\"./my\": \"honF\",\n\t\"./my.js\": \"honF\",\n\t\"./nb\": \"bOMt\",\n\t\"./nb.js\": \"bOMt\",\n\t\"./ne\": \"OjkT\",\n\t\"./ne.js\": \"OjkT\",\n\t\"./nl\": \"+s0g\",\n\t\"./nl-be\": \"2ykv\",\n\t\"./nl-be.js\": \"2ykv\",\n\t\"./nl.js\": \"+s0g\",\n\t\"./nn\": \"uEye\",\n\t\"./nn.js\": \"uEye\",\n\t\"./oc-lnc\": \"Fnuy\",\n\t\"./oc-lnc.js\": \"Fnuy\",\n\t\"./pa-in\": \"8/+R\",\n\t\"./pa-in.js\": \"8/+R\",\n\t\"./pl\": \"jVdC\",\n\t\"./pl.js\": \"jVdC\",\n\t\"./pt\": \"8mBD\",\n\t\"./pt-br\": \"0tRk\",\n\t\"./pt-br.js\": \"0tRk\",\n\t\"./pt.js\": \"8mBD\",\n\t\"./ro\": \"lyxo\",\n\t\"./ro.js\": \"lyxo\",\n\t\"./ru\": \"lXzo\",\n\t\"./ru.js\": \"lXzo\",\n\t\"./sd\": \"Z4QM\",\n\t\"./sd.js\": \"Z4QM\",\n\t\"./se\": \"//9w\",\n\t\"./se.js\": \"//9w\",\n\t\"./si\": \"7aV9\",\n\t\"./si.js\": \"7aV9\",\n\t\"./sk\": \"e+ae\",\n\t\"./sk.js\": \"e+ae\",\n\t\"./sl\": \"gVVK\",\n\t\"./sl.js\": \"gVVK\",\n\t\"./sq\": \"yPMs\",\n\t\"./sq.js\": \"yPMs\",\n\t\"./sr\": \"zx6S\",\n\t\"./sr-cyrl\": \"E+lV\",\n\t\"./sr-cyrl.js\": \"E+lV\",\n\t\"./sr.js\": \"zx6S\",\n\t\"./ss\": \"Ur1D\",\n\t\"./ss.js\": \"Ur1D\",\n\t\"./sv\": \"X709\",\n\t\"./sv.js\": \"X709\",\n\t\"./sw\": \"dNwA\",\n\t\"./sw.js\": \"dNwA\",\n\t\"./ta\": \"PeUW\",\n\t\"./ta.js\": \"PeUW\",\n\t\"./te\": \"XLvN\",\n\t\"./te.js\": \"XLvN\",\n\t\"./tet\": \"V2x9\",\n\t\"./tet.js\": \"V2x9\",\n\t\"./tg\": \"Oxv6\",\n\t\"./tg.js\": \"Oxv6\",\n\t\"./th\": \"EOgW\",\n\t\"./th.js\": \"EOgW\",\n\t\"./tk\": \"Wv91\",\n\t\"./tk.js\": \"Wv91\",\n\t\"./tl-ph\": \"Dzi0\",\n\t\"./tl-ph.js\": \"Dzi0\",\n\t\"./tlh\": \"z3Vd\",\n\t\"./tlh.js\": \"z3Vd\",\n\t\"./tr\": \"DoHr\",\n\t\"./tr.js\": \"DoHr\",\n\t\"./tzl\": \"z1FC\",\n\t\"./tzl.js\": \"z1FC\",\n\t\"./tzm\": \"wQk9\",\n\t\"./tzm-latn\": \"tT3J\",\n\t\"./tzm-latn.js\": \"tT3J\",\n\t\"./tzm.js\": \"wQk9\",\n\t\"./ug-cn\": \"YRex\",\n\t\"./ug-cn.js\": \"YRex\",\n\t\"./uk\": \"raLr\",\n\t\"./uk.js\": \"raLr\",\n\t\"./ur\": \"UpQW\",\n\t\"./ur.js\": \"UpQW\",\n\t\"./uz\": \"Loxo\",\n\t\"./uz-latn\": \"AQ68\",\n\t\"./uz-latn.js\": \"AQ68\",\n\t\"./uz.js\": \"Loxo\",\n\t\"./vi\": \"KSF8\",\n\t\"./vi.js\": \"KSF8\",\n\t\"./x-pseudo\": \"/X5v\",\n\t\"./x-pseudo.js\": \"/X5v\",\n\t\"./yo\": \"fzPg\",\n\t\"./yo.js\": \"fzPg\",\n\t\"./zh-cn\": \"XDpg\",\n\t\"./zh-cn.js\": \"XDpg\",\n\t\"./zh-hk\": \"SatO\",\n\t\"./zh-hk.js\": \"SatO\",\n\t\"./zh-mo\": \"OmwH\",\n\t\"./zh-mo.js\": \"OmwH\",\n\t\"./zh-tw\": \"kOpN\",\n\t\"./zh-tw.js\": \"kOpN\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"RnhZ\";","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"U9wj\";"]}